function bH(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(r,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();function Uc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wH(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var H2={exports:{}},lh={},G2={exports:{}},un={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function xH(){if(u_)return un;u_=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function d(V){return V===null||typeof V!="object"?null:(V=f&&V[f]||V["@@iterator"],typeof V=="function"?V:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function y(V,H,j){this.props=V,this.context=H,this.refs=v,this.updater=j||h}y.prototype.isReactComponent={},y.prototype.setState=function(V,H){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,H,"setState")},y.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function b(){}b.prototype=y.prototype;function x(V,H,j){this.props=V,this.context=H,this.refs=v,this.updater=j||h}var w=x.prototype=new b;w.constructor=x,m(w,y.prototype),w.isPureReactComponent=!0;var N=Array.isArray,C=Object.prototype.hasOwnProperty,E={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function I(V,H,j){var ne,ue={},te=null,ie=null;if(H!=null)for(ne in H.ref!==void 0&&(ie=H.ref),H.key!==void 0&&(te=""+H.key),H)C.call(H,ne)&&!$.hasOwnProperty(ne)&&(ue[ne]=H[ne]);var Z=arguments.length-2;if(Z===1)ue.children=j;else if(1<Z){for(var X=Array(Z),ae=0;ae<Z;ae++)X[ae]=arguments[ae+2];ue.children=X}if(V&&V.defaultProps)for(ne in Z=V.defaultProps,Z)ue[ne]===void 0&&(ue[ne]=Z[ne]);return{$$typeof:t,type:V,key:te,ref:ie,props:ue,_owner:E.current}}function D(V,H){return{$$typeof:t,type:V.type,key:H,ref:V.ref,props:V.props,_owner:V._owner}}function k(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function A(V){var H={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(j){return H[j]})}var O=/\/+/g;function B(V,H){return typeof V=="object"&&V!==null&&V.key!=null?A(""+V.key):H.toString(36)}function z(V,H,j,ne,ue){var te=typeof V;(te==="undefined"||te==="boolean")&&(V=null);var ie=!1;if(V===null)ie=!0;else switch(te){case"string":case"number":ie=!0;break;case"object":switch(V.$$typeof){case t:case e:ie=!0}}if(ie)return ie=V,ue=ue(ie),V=ne===""?"."+B(ie,0):ne,N(ue)?(j="",V!=null&&(j=V.replace(O,"$&/")+"/"),z(ue,H,j,"",function(ae){return ae})):ue!=null&&(k(ue)&&(ue=D(ue,j+(!ue.key||ie&&ie.key===ue.key?"":(""+ue.key).replace(O,"$&/")+"/")+V)),H.push(ue)),1;if(ie=0,ne=ne===""?".":ne+":",N(V))for(var Z=0;Z<V.length;Z++){te=V[Z];var X=ne+B(te,Z);ie+=z(te,H,j,X,ue)}else if(X=d(V),typeof X=="function")for(V=X.call(V),Z=0;!(te=V.next()).done;)te=te.value,X=ne+B(te,Z++),ie+=z(te,H,j,X,ue);else if(te==="object")throw H=String(V),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return ie}function L(V,H,j){if(V==null)return V;var ne=[],ue=0;return z(V,ne,"","",function(te){return H.call(j,te,ue++)}),ne}function F(V){if(V._status===-1){var H=V._result;H=H(),H.then(function(j){(V._status===0||V._status===-1)&&(V._status=1,V._result=j)},function(j){(V._status===0||V._status===-1)&&(V._status=2,V._result=j)}),V._status===-1&&(V._status=0,V._result=H)}if(V._status===1)return V._result.default;throw V._result}var R={current:null},q={transition:null},M={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:q,ReactCurrentOwner:E};function G(){throw Error("act(...) is not supported in production builds of React.")}return un.Children={map:L,forEach:function(V,H,j){L(V,function(){H.apply(this,arguments)},j)},count:function(V){var H=0;return L(V,function(){H++}),H},toArray:function(V){return L(V,function(H){return H})||[]},only:function(V){if(!k(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},un.Component=y,un.Fragment=n,un.Profiler=a,un.PureComponent=x,un.StrictMode=r,un.Suspense=u,un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,un.act=G,un.cloneElement=function(V,H,j){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var ne=m({},V.props),ue=V.key,te=V.ref,ie=V._owner;if(H!=null){if(H.ref!==void 0&&(te=H.ref,ie=E.current),H.key!==void 0&&(ue=""+H.key),V.type&&V.type.defaultProps)var Z=V.type.defaultProps;for(X in H)C.call(H,X)&&!$.hasOwnProperty(X)&&(ne[X]=H[X]===void 0&&Z!==void 0?Z[X]:H[X])}var X=arguments.length-2;if(X===1)ne.children=j;else if(1<X){Z=Array(X);for(var ae=0;ae<X;ae++)Z[ae]=arguments[ae+2];ne.children=Z}return{$$typeof:t,type:V.type,key:ue,ref:te,props:ne,_owner:ie}},un.createContext=function(V){return V={$$typeof:i,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:s,_context:V},V.Consumer=V},un.createElement=I,un.createFactory=function(V){var H=I.bind(null,V);return H.type=V,H},un.createRef=function(){return{current:null}},un.forwardRef=function(V){return{$$typeof:o,render:V}},un.isValidElement=k,un.lazy=function(V){return{$$typeof:c,_payload:{_status:-1,_result:V},_init:F}},un.memo=function(V,H){return{$$typeof:l,type:V,compare:H===void 0?null:H}},un.startTransition=function(V){var H=q.transition;q.transition={};try{V()}finally{q.transition=H}},un.unstable_act=G,un.useCallback=function(V,H){return R.current.useCallback(V,H)},un.useContext=function(V){return R.current.useContext(V)},un.useDebugValue=function(){},un.useDeferredValue=function(V){return R.current.useDeferredValue(V)},un.useEffect=function(V,H){return R.current.useEffect(V,H)},un.useId=function(){return R.current.useId()},un.useImperativeHandle=function(V,H,j){return R.current.useImperativeHandle(V,H,j)},un.useInsertionEffect=function(V,H){return R.current.useInsertionEffect(V,H)},un.useLayoutEffect=function(V,H){return R.current.useLayoutEffect(V,H)},un.useMemo=function(V,H){return R.current.useMemo(V,H)},un.useReducer=function(V,H,j){return R.current.useReducer(V,H,j)},un.useRef=function(V){return R.current.useRef(V)},un.useState=function(V){return R.current.useState(V)},un.useSyncExternalStore=function(V,H,j){return R.current.useSyncExternalStore(V,H,j)},un.useTransition=function(){return R.current.useTransition()},un.version="18.3.1",un}var l_;function lE(){return l_||(l_=1,G2.exports=xH()),G2.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function SH(){if(c_)return lh;c_=1;var t=lE(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function i(o,u,l){var c,f={},d=null,h=null;l!==void 0&&(d=""+l),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)r.call(u,c)&&!s.hasOwnProperty(c)&&(f[c]=u[c]);if(o&&o.defaultProps)for(c in u=o.defaultProps,u)f[c]===void 0&&(f[c]=u[c]);return{$$typeof:e,type:o,key:d,ref:h,props:f,_owner:a.current}}return lh.Fragment=n,lh.jsx=i,lh.jsxs=i,lh}var f_;function NH(){return f_||(f_=1,H2.exports=SH()),H2.exports}var Tt=NH(),vn=lE();const _e=Uc(vn);var hy={},K2={exports:{}},is={},X2={exports:{}},Y2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function CH(){return d_||(d_=1,function(t){function e(q,M){var G=q.length;q.push(M);e:for(;0<G;){var V=G-1>>>1,H=q[V];if(0<a(H,M))q[V]=M,q[G]=H,G=V;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var M=q[0],G=q.pop();if(G!==M){q[0]=G;e:for(var V=0,H=q.length,j=H>>>1;V<j;){var ne=2*(V+1)-1,ue=q[ne],te=ne+1,ie=q[te];if(0>a(ue,G))te<H&&0>a(ie,ue)?(q[V]=ie,q[te]=G,V=te):(q[V]=ue,q[ne]=G,V=ne);else if(te<H&&0>a(ie,G))q[V]=ie,q[te]=G,V=te;else break e}}return M}function a(q,M){var G=q.sortIndex-M.sortIndex;return G!==0?G:q.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var u=[],l=[],c=1,f=null,d=3,h=!1,m=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(q){for(var M=n(l);M!==null;){if(M.callback===null)r(l);else if(M.startTime<=q)r(l),M.sortIndex=M.expirationTime,e(u,M);else break;M=n(l)}}function N(q){if(v=!1,w(q),!m)if(n(u)!==null)m=!0,F(C);else{var M=n(l);M!==null&&R(N,M.startTime-q)}}function C(q,M){m=!1,v&&(v=!1,b(I),I=-1),h=!0;var G=d;try{for(w(M),f=n(u);f!==null&&(!(f.expirationTime>M)||q&&!A());){var V=f.callback;if(typeof V=="function"){f.callback=null,d=f.priorityLevel;var H=V(f.expirationTime<=M);M=t.unstable_now(),typeof H=="function"?f.callback=H:f===n(u)&&r(u),w(M)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var ne=n(l);ne!==null&&R(N,ne.startTime-M),j=!1}return j}finally{f=null,d=G,h=!1}}var E=!1,$=null,I=-1,D=5,k=-1;function A(){return!(t.unstable_now()-k<D)}function O(){if($!==null){var q=t.unstable_now();k=q;var M=!0;try{M=$(!0,q)}finally{M?B():(E=!1,$=null)}}else E=!1}var B;if(typeof x=="function")B=function(){x(O)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,L=z.port2;z.port1.onmessage=O,B=function(){L.postMessage(null)}}else B=function(){y(O,0)};function F(q){$=q,E||(E=!0,B())}function R(q,M){I=y(function(){q(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,F(C))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(d){case 1:case 2:case 3:var M=3;break;default:M=d}var G=d;d=M;try{return q()}finally{d=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,M){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var G=d;d=q;try{return M()}finally{d=G}},t.unstable_scheduleCallback=function(q,M,G){var V=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?V+G:V):G=V,q){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=G+H,q={id:c++,callback:M,priorityLevel:q,startTime:G,expirationTime:H,sortIndex:-1},G>V?(q.sortIndex=G,e(l,q),n(u)===null&&q===n(l)&&(v?(b(I),I=-1):v=!0,R(N,G-V))):(q.sortIndex=H,e(u,q),m||h||(m=!0,F(C))),q},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(q){var M=d;return function(){var G=d;d=M;try{return q.apply(this,arguments)}finally{d=G}}}}(Y2)),Y2}var p_;function EH(){return p_||(p_=1,X2.exports=CH()),X2.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function TH(){if(h_)return is;h_=1;var t=lE(),e=EH();function n(p){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+p,S=1;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function s(p,g){i(p,g),i(p+"Capture",g)}function i(p,g){for(a[p]=g,p=0;p<g.length;p++)r.add(g[p])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function d(p){return u.call(f,p)?!0:u.call(c,p)?!1:l.test(p)?f[p]=!0:(c[p]=!0,!1)}function h(p,g,S,T){if(S!==null&&S.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return T?!1:S!==null?!S.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function m(p,g,S,T){if(g===null||typeof g>"u"||h(p,g,S,T))return!0;if(T)return!1;if(S!==null)switch(S.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function v(p,g,S,T,_,P,K){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=T,this.attributeNamespace=_,this.mustUseProperty=S,this.propertyName=p,this.type=g,this.sanitizeURL=P,this.removeEmptyString=K}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){y[p]=new v(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var g=p[0];y[g]=new v(g,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){y[p]=new v(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){y[p]=new v(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){y[p]=new v(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){y[p]=new v(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){y[p]=new v(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){y[p]=new v(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){y[p]=new v(p,5,!1,p.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function x(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var g=p.replace(b,x);y[g]=new v(g,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var g=p.replace(b,x);y[g]=new v(g,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var g=p.replace(b,x);y[g]=new v(g,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){y[p]=new v(p,1,!1,p.toLowerCase(),null,!1,!1)}),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){y[p]=new v(p,1,!1,p.toLowerCase(),null,!0,!0)});function w(p,g,S,T){var _=y.hasOwnProperty(g)?y[g]:null;(_!==null?_.type!==0:T||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(m(g,S,_,T)&&(S=null),T||_===null?d(g)&&(S===null?p.removeAttribute(g):p.setAttribute(g,""+S)):_.mustUseProperty?p[_.propertyName]=S===null?_.type===3?!1:"":S:(g=_.attributeName,T=_.attributeNamespace,S===null?p.removeAttribute(g):(_=_.type,S=_===3||_===4&&S===!0?"":""+S,T?p.setAttributeNS(T,g,S):p.setAttribute(g,S))))}var N=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),E=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),A=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),q=Symbol.iterator;function M(p){return p===null||typeof p!="object"?null:(p=q&&p[q]||p["@@iterator"],typeof p=="function"?p:null)}var G=Object.assign,V;function H(p){if(V===void 0)try{throw Error()}catch(S){var g=S.stack.trim().match(/\n( *(at )?)/);V=g&&g[1]||""}return`
`+V+p}var j=!1;function ne(p,g){if(!p||j)return"";j=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(Oe){var T=Oe}Reflect.construct(p,[],g)}else{try{g.call()}catch(Oe){T=Oe}p.call(g.prototype)}else{try{throw Error()}catch(Oe){T=Oe}p()}}catch(Oe){if(Oe&&T&&typeof Oe.stack=="string"){for(var _=Oe.stack.split(`
`),P=T.stack.split(`
`),K=_.length-1,le=P.length-1;1<=K&&0<=le&&_[K]!==P[le];)le--;for(;1<=K&&0<=le;K--,le--)if(_[K]!==P[le]){if(K!==1||le!==1)do if(K--,le--,0>le||_[K]!==P[le]){var ye=`
`+_[K].replace(" at new "," at ");return p.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",p.displayName)),ye}while(1<=K&&0<=le);break}}}finally{j=!1,Error.prepareStackTrace=S}return(p=p?p.displayName||p.name:"")?H(p):""}function ue(p){switch(p.tag){case 5:return H(p.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return p=ne(p.type,!1),p;case 11:return p=ne(p.type.render,!1),p;case 1:return p=ne(p.type,!0),p;default:return""}}function te(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case $:return"Fragment";case E:return"Portal";case D:return"Profiler";case I:return"StrictMode";case B:return"Suspense";case z:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case A:return(p.displayName||"Context")+".Consumer";case k:return(p._context.displayName||"Context")+".Provider";case O:var g=p.render;return p=p.displayName,p||(p=g.displayName||g.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case L:return g=p.displayName||null,g!==null?g:te(p.type)||"Memo";case F:g=p._payload,p=p._init;try{return te(p(g))}catch{}}return null}function ie(p){var g=p.type;switch(p.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=g.render,p=p.displayName||p.name||"",g.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(g);case 8:return g===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function Z(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function X(p){var g=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function ae(p){var g=X(p)?"checked":"value",S=Object.getOwnPropertyDescriptor(p.constructor.prototype,g),T=""+p[g];if(!p.hasOwnProperty(g)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var _=S.get,P=S.set;return Object.defineProperty(p,g,{configurable:!0,get:function(){return _.call(this)},set:function(K){T=""+K,P.call(this,K)}}),Object.defineProperty(p,g,{enumerable:S.enumerable}),{getValue:function(){return T},setValue:function(K){T=""+K},stopTracking:function(){p._valueTracker=null,delete p[g]}}}}function pe(p){p._valueTracker||(p._valueTracker=ae(p))}function he(p){if(!p)return!1;var g=p._valueTracker;if(!g)return!0;var S=g.getValue(),T="";return p&&(T=X(p)?p.checked?"true":"false":p.value),p=T,p!==S?(g.setValue(p),!0):!1}function Ne(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function Ee(p,g){var S=g.checked;return G({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:S??p._wrapperState.initialChecked})}function Q(p,g){var S=g.defaultValue==null?"":g.defaultValue,T=g.checked!=null?g.checked:g.defaultChecked;S=Z(g.value!=null?g.value:S),p._wrapperState={initialChecked:T,initialValue:S,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function se(p,g){g=g.checked,g!=null&&w(p,"checked",g,!1)}function ve(p,g){se(p,g);var S=Z(g.value),T=g.type;if(S!=null)T==="number"?(S===0&&p.value===""||p.value!=S)&&(p.value=""+S):p.value!==""+S&&(p.value=""+S);else if(T==="submit"||T==="reset"){p.removeAttribute("value");return}g.hasOwnProperty("value")?Re(p,g.type,S):g.hasOwnProperty("defaultValue")&&Re(p,g.type,Z(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(p.defaultChecked=!!g.defaultChecked)}function xe(p,g,S){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var T=g.type;if(!(T!=="submit"&&T!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+p._wrapperState.initialValue,S||g===p.value||(p.value=g),p.defaultValue=g}S=p.name,S!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,S!==""&&(p.name=S)}function Re(p,g,S){(g!=="number"||Ne(p.ownerDocument)!==p)&&(S==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+S&&(p.defaultValue=""+S))}var Me=Array.isArray;function He(p,g,S,T){if(p=p.options,g){g={};for(var _=0;_<S.length;_++)g["$"+S[_]]=!0;for(S=0;S<p.length;S++)_=g.hasOwnProperty("$"+p[S].value),p[S].selected!==_&&(p[S].selected=_),_&&T&&(p[S].defaultSelected=!0)}else{for(S=""+Z(S),g=null,_=0;_<p.length;_++){if(p[_].value===S){p[_].selected=!0,T&&(p[_].defaultSelected=!0);return}g!==null||p[_].disabled||(g=p[_])}g!==null&&(g.selected=!0)}}function Je(p,g){if(g.dangerouslySetInnerHTML!=null)throw Error(n(91));return G({},g,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function re(p,g){var S=g.value;if(S==null){if(S=g.children,g=g.defaultValue,S!=null){if(g!=null)throw Error(n(92));if(Me(S)){if(1<S.length)throw Error(n(93));S=S[0]}g=S}g==null&&(g=""),S=g}p._wrapperState={initialValue:Z(S)}}function ce(p,g){var S=Z(g.value),T=Z(g.defaultValue);S!=null&&(S=""+S,S!==p.value&&(p.value=S),g.defaultValue==null&&p.defaultValue!==S&&(p.defaultValue=S)),T!=null&&(p.defaultValue=""+T)}function Ce(p){var g=p.textContent;g===p._wrapperState.initialValue&&g!==""&&g!==null&&(p.value=g)}function Ae(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Le(p,g){return p==null||p==="http://www.w3.org/1999/xhtml"?Ae(g):p==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var Pe,Ze=function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,S,T,_){MSApp.execUnsafeLocalFunction(function(){return p(g,S,T,_)})}:p}(function(p,g){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=g;else{for(Pe=Pe||document.createElement("div"),Pe.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=Pe.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;g.firstChild;)p.appendChild(g.firstChild)}});function je(p,g){if(g){var S=p.firstChild;if(S&&S===p.lastChild&&S.nodeType===3){S.nodeValue=g;return}}p.textContent=g}var tt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qe=["Webkit","ms","Moz","O"];Object.keys(tt).forEach(function(p){Qe.forEach(function(g){g=g+p.charAt(0).toUpperCase()+p.substring(1),tt[g]=tt[p]})});function Xt(p,g,S){return g==null||typeof g=="boolean"||g===""?"":S||typeof g!="number"||g===0||tt.hasOwnProperty(p)&&tt[p]?(""+g).trim():g+"px"}function Nt(p,g){p=p.style;for(var S in g)if(g.hasOwnProperty(S)){var T=S.indexOf("--")===0,_=Xt(S,g[S],T);S==="float"&&(S="cssFloat"),T?p.setProperty(S,_):p[S]=_}}var Cn=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function U(p,g){if(g){if(Cn[p]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(n(137,p));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(n(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(n(61))}if(g.style!=null&&typeof g.style!="object")throw Error(n(62))}}function fe(p,g){if(p.indexOf("-")===-1)return typeof g.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ie=null;function qe(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var At=null,kt=null,lr=null;function pf(p){if(p=Kp(p)){if(typeof At!="function")throw Error(n(280));var g=p.stateNode;g&&(g=$v(g),At(p.stateNode,p.type,g))}}function Zg(p){kt?lr?lr.push(p):lr=[p]:kt=p}function ev(){if(kt){var p=kt,g=lr;if(lr=kt=null,pf(p),g)for(p=0;p<g.length;p++)pf(g[p])}}function tv(p,g){return p(g)}function nv(){}var Tp=!1;function rv(p,g,S){if(Tp)return p(g,S);Tp=!0;try{return tv(p,g,S)}finally{Tp=!1,(kt!==null||lr!==null)&&(nv(),ev())}}function zl(p,g){var S=p.stateNode;if(S===null)return null;var T=$v(S);if(T===null)return null;S=T[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(p=p.type,T=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!T;break e;default:p=!1}if(p)return null;if(S&&typeof S!="function")throw Error(n(231,g,typeof S));return S}var Dp=!1;if(o)try{var Wl={};Object.defineProperty(Wl,"passive",{get:function(){Dp=!0}}),window.addEventListener("test",Wl,Wl),window.removeEventListener("test",Wl,Wl)}catch{Dp=!1}function ix(p,g,S,T,_,P,K,le,ye){var Oe=Array.prototype.slice.call(arguments,3);try{g.apply(S,Oe)}catch(Ye){this.onError(Ye)}}var Ul=!1,hf=null,mf=!1,Ap=null,ox={onError:function(p){Ul=!0,hf=p}};function ux(p,g,S,T,_,P,K,le,ye){Ul=!1,hf=null,ix.apply(ox,arguments)}function lx(p,g,S,T,_,P,K,le,ye){if(ux.apply(this,arguments),Ul){if(Ul){var Oe=hf;Ul=!1,hf=null}else throw Error(n(198));mf||(mf=!0,Ap=Oe)}}function Ro(p){var g=p,S=p;if(p.alternate)for(;g.return;)g=g.return;else{p=g;do g=p,g.flags&4098&&(S=g.return),p=g.return;while(p)}return g.tag===3?S:null}function av(p){if(p.tag===13){var g=p.memoizedState;if(g===null&&(p=p.alternate,p!==null&&(g=p.memoizedState)),g!==null)return g.dehydrated}return null}function sv(p){if(Ro(p)!==p)throw Error(n(188))}function cx(p){var g=p.alternate;if(!g){if(g=Ro(p),g===null)throw Error(n(188));return g!==p?null:p}for(var S=p,T=g;;){var _=S.return;if(_===null)break;var P=_.alternate;if(P===null){if(T=_.return,T!==null){S=T;continue}break}if(_.child===P.child){for(P=_.child;P;){if(P===S)return sv(_),p;if(P===T)return sv(_),g;P=P.sibling}throw Error(n(188))}if(S.return!==T.return)S=_,T=P;else{for(var K=!1,le=_.child;le;){if(le===S){K=!0,S=_,T=P;break}if(le===T){K=!0,T=_,S=P;break}le=le.sibling}if(!K){for(le=P.child;le;){if(le===S){K=!0,S=P,T=_;break}if(le===T){K=!0,T=P,S=_;break}le=le.sibling}if(!K)throw Error(n(189))}}if(S.alternate!==T)throw Error(n(190))}if(S.tag!==3)throw Error(n(188));return S.stateNode.current===S?p:g}function iv(p){return p=cx(p),p!==null?ov(p):null}function ov(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var g=ov(p);if(g!==null)return g;p=p.sibling}return null}var uv=e.unstable_scheduleCallback,lv=e.unstable_cancelCallback,fx=e.unstable_shouldYield,ql=e.unstable_requestPaint,Rt=e.unstable_now,xa=e.unstable_getCurrentPriorityLevel,$p=e.unstable_ImmediatePriority,Vl=e.unstable_UserBlockingPriority,no=e.unstable_NormalPriority,dx=e.unstable_LowPriority,B$=e.unstable_IdlePriority,cv=null,ro=null;function F9(p){if(ro&&typeof ro.onCommitFiberRoot=="function")try{ro.onCommitFiberRoot(cv,p,void 0,(p.current.flags&128)===128)}catch{}}var Ti=Math.clz32?Math.clz32:P9,R9=Math.log,M9=Math.LN2;function P9(p){return p>>>=0,p===0?32:31-(R9(p)/M9|0)|0}var fv=64,dv=4194304;function kp(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function pv(p,g){var S=p.pendingLanes;if(S===0)return 0;var T=0,_=p.suspendedLanes,P=p.pingedLanes,K=S&268435455;if(K!==0){var le=K&~_;le!==0?T=kp(le):(P&=K,P!==0&&(T=kp(P)))}else K=S&~_,K!==0?T=kp(K):P!==0&&(T=kp(P));if(T===0)return 0;if(g!==0&&g!==T&&!(g&_)&&(_=T&-T,P=g&-g,_>=P||_===16&&(P&4194240)!==0))return g;if(T&4&&(T|=S&16),g=p.entangledLanes,g!==0)for(p=p.entanglements,g&=T;0<g;)S=31-Ti(g),_=1<<S,T|=p[S],g&=~_;return T}function B9(p,g){switch(p){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L9(p,g){for(var S=p.suspendedLanes,T=p.pingedLanes,_=p.expirationTimes,P=p.pendingLanes;0<P;){var K=31-Ti(P),le=1<<K,ye=_[K];ye===-1?(!(le&S)||le&T)&&(_[K]=B9(le,g)):ye<=g&&(p.expiredLanes|=le),P&=~le}}function px(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function L$(){var p=fv;return fv<<=1,!(fv&4194240)&&(fv=64),p}function hx(p){for(var g=[],S=0;31>S;S++)g.push(p);return g}function Ip(p,g,S){p.pendingLanes|=g,g!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,g=31-Ti(g),p[g]=S}function z9(p,g){var S=p.pendingLanes&~g;p.pendingLanes=g,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=g,p.mutableReadLanes&=g,p.entangledLanes&=g,g=p.entanglements;var T=p.eventTimes;for(p=p.expirationTimes;0<S;){var _=31-Ti(S),P=1<<_;g[_]=0,T[_]=-1,p[_]=-1,S&=~P}}function mx(p,g){var S=p.entangledLanes|=g;for(p=p.entanglements;S;){var T=31-Ti(S),_=1<<T;_&g|p[T]&g&&(p[T]|=g),S&=~_}}var In=0;function z$(p){return p&=-p,1<p?4<p?p&268435455?16:536870912:4:1}var W$,gx,U$,q$,V$,vx=!1,hv=[],bu=null,wu=null,xu=null,_p=new Map,Op=new Map,Su=[],W9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function j$(p,g){switch(p){case"focusin":case"focusout":bu=null;break;case"dragenter":case"dragleave":wu=null;break;case"mouseover":case"mouseout":xu=null;break;case"pointerover":case"pointerout":_p.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Op.delete(g.pointerId)}}function Fp(p,g,S,T,_,P){return p===null||p.nativeEvent!==P?(p={blockedOn:g,domEventName:S,eventSystemFlags:T,nativeEvent:P,targetContainers:[_]},g!==null&&(g=Kp(g),g!==null&&gx(g)),p):(p.eventSystemFlags|=T,g=p.targetContainers,_!==null&&g.indexOf(_)===-1&&g.push(_),p)}function U9(p,g,S,T,_){switch(g){case"focusin":return bu=Fp(bu,p,g,S,T,_),!0;case"dragenter":return wu=Fp(wu,p,g,S,T,_),!0;case"mouseover":return xu=Fp(xu,p,g,S,T,_),!0;case"pointerover":var P=_.pointerId;return _p.set(P,Fp(_p.get(P)||null,p,g,S,T,_)),!0;case"gotpointercapture":return P=_.pointerId,Op.set(P,Fp(Op.get(P)||null,p,g,S,T,_)),!0}return!1}function H$(p){var g=jl(p.target);if(g!==null){var S=Ro(g);if(S!==null){if(g=S.tag,g===13){if(g=av(S),g!==null){p.blockedOn=g,V$(p.priority,function(){U$(S)});return}}else if(g===3&&S.stateNode.current.memoizedState.isDehydrated){p.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}p.blockedOn=null}function mv(p){if(p.blockedOn!==null)return!1;for(var g=p.targetContainers;0<g.length;){var S=bx(p.domEventName,p.eventSystemFlags,g[0],p.nativeEvent);if(S===null){S=p.nativeEvent;var T=new S.constructor(S.type,S);Ie=T,S.target.dispatchEvent(T),Ie=null}else return g=Kp(S),g!==null&&gx(g),p.blockedOn=S,!1;g.shift()}return!0}function G$(p,g,S){mv(p)&&S.delete(g)}function q9(){vx=!1,bu!==null&&mv(bu)&&(bu=null),wu!==null&&mv(wu)&&(wu=null),xu!==null&&mv(xu)&&(xu=null),_p.forEach(G$),Op.forEach(G$)}function Rp(p,g){p.blockedOn===g&&(p.blockedOn=null,vx||(vx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,q9)))}function Mp(p){function g(_){return Rp(_,p)}if(0<hv.length){Rp(hv[0],p);for(var S=1;S<hv.length;S++){var T=hv[S];T.blockedOn===p&&(T.blockedOn=null)}}for(bu!==null&&Rp(bu,p),wu!==null&&Rp(wu,p),xu!==null&&Rp(xu,p),_p.forEach(g),Op.forEach(g),S=0;S<Su.length;S++)T=Su[S],T.blockedOn===p&&(T.blockedOn=null);for(;0<Su.length&&(S=Su[0],S.blockedOn===null);)H$(S),S.blockedOn===null&&Su.shift()}var gf=N.ReactCurrentBatchConfig,gv=!0;function V9(p,g,S,T){var _=In,P=gf.transition;gf.transition=null;try{In=1,yx(p,g,S,T)}finally{In=_,gf.transition=P}}function j9(p,g,S,T){var _=In,P=gf.transition;gf.transition=null;try{In=4,yx(p,g,S,T)}finally{In=_,gf.transition=P}}function yx(p,g,S,T){if(gv){var _=bx(p,g,S,T);if(_===null)Mx(p,g,T,vv,S),j$(p,T);else if(U9(_,p,g,S,T))T.stopPropagation();else if(j$(p,T),g&4&&-1<W9.indexOf(p)){for(;_!==null;){var P=Kp(_);if(P!==null&&W$(P),P=bx(p,g,S,T),P===null&&Mx(p,g,T,vv,S),P===_)break;_=P}_!==null&&T.stopPropagation()}else Mx(p,g,T,null,S)}}var vv=null;function bx(p,g,S,T){if(vv=null,p=qe(T),p=jl(p),p!==null)if(g=Ro(p),g===null)p=null;else if(S=g.tag,S===13){if(p=av(g),p!==null)return p;p=null}else if(S===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;p=null}else g!==p&&(p=null);return vv=p,null}function K$(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xa()){case $p:return 1;case Vl:return 4;case no:case dx:return 16;case B$:return 536870912;default:return 16}default:return 16}}var Nu=null,wx=null,yv=null;function X$(){if(yv)return yv;var p,g=wx,S=g.length,T,_="value"in Nu?Nu.value:Nu.textContent,P=_.length;for(p=0;p<S&&g[p]===_[p];p++);var K=S-p;for(T=1;T<=K&&g[S-T]===_[P-T];T++);return yv=_.slice(p,1<T?1-T:void 0)}function bv(p){var g=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&g===13&&(p=13)):p=g,p===10&&(p=13),32<=p||p===13?p:0}function wv(){return!0}function Y$(){return!1}function $s(p){function g(S,T,_,P,K){this._reactName=S,this._targetInst=_,this.type=T,this.nativeEvent=P,this.target=K,this.currentTarget=null;for(var le in p)p.hasOwnProperty(le)&&(S=p[le],this[le]=S?S(P):P[le]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?wv:Y$,this.isPropagationStopped=Y$,this}return G(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=wv)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=wv)},persist:function(){},isPersistent:wv}),g}var vf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xx=$s(vf),Pp=G({},vf,{view:0,detail:0}),H9=$s(Pp),Sx,Nx,Bp,xv=G({},Pp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ex,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==Bp&&(Bp&&p.type==="mousemove"?(Sx=p.screenX-Bp.screenX,Nx=p.screenY-Bp.screenY):Nx=Sx=0,Bp=p),Sx)},movementY:function(p){return"movementY"in p?p.movementY:Nx}}),Q$=$s(xv),G9=G({},xv,{dataTransfer:0}),K9=$s(G9),X9=G({},Pp,{relatedTarget:0}),Cx=$s(X9),Y9=G({},vf,{animationName:0,elapsedTime:0,pseudoElement:0}),Q9=$s(Y9),J9=G({},vf,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),Z9=$s(J9),ej=G({},vf,{data:0}),J$=$s(ej),tj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aj(p){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(p):(p=rj[p])?!!g[p]:!1}function Ex(){return aj}var sj=G({},Pp,{key:function(p){if(p.key){var g=tj[p.key]||p.key;if(g!=="Unidentified")return g}return p.type==="keypress"?(p=bv(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?nj[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ex,charCode:function(p){return p.type==="keypress"?bv(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?bv(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),ij=$s(sj),oj=G({},xv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z$=$s(oj),uj=G({},Pp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ex}),lj=$s(uj),cj=G({},vf,{propertyName:0,elapsedTime:0,pseudoElement:0}),fj=$s(cj),dj=G({},xv,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),pj=$s(dj),hj=[9,13,27,32],Tx=o&&"CompositionEvent"in window,Lp=null;o&&"documentMode"in document&&(Lp=document.documentMode);var mj=o&&"TextEvent"in window&&!Lp,ek=o&&(!Tx||Lp&&8<Lp&&11>=Lp),tk=" ",nk=!1;function rk(p,g){switch(p){case"keyup":return hj.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ak(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var yf=!1;function gj(p,g){switch(p){case"compositionend":return ak(g);case"keypress":return g.which!==32?null:(nk=!0,tk);case"textInput":return p=g.data,p===tk&&nk?null:p;default:return null}}function vj(p,g){if(yf)return p==="compositionend"||!Tx&&rk(p,g)?(p=X$(),yv=wx=Nu=null,yf=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return ek&&g.locale!=="ko"?null:g.data;default:return null}}var yj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sk(p){var g=p&&p.nodeName&&p.nodeName.toLowerCase();return g==="input"?!!yj[p.type]:g==="textarea"}function ik(p,g,S,T){Zg(T),g=Tv(g,"onChange"),0<g.length&&(S=new xx("onChange","change",null,S,T),p.push({event:S,listeners:g}))}var zp=null,Wp=null;function bj(p){Ck(p,0)}function Sv(p){var g=Nf(p);if(he(g))return p}function wj(p,g){if(p==="change")return g}var ok=!1;if(o){var Dx;if(o){var Ax="oninput"in document;if(!Ax){var uk=document.createElement("div");uk.setAttribute("oninput","return;"),Ax=typeof uk.oninput=="function"}Dx=Ax}else Dx=!1;ok=Dx&&(!document.documentMode||9<document.documentMode)}function lk(){zp&&(zp.detachEvent("onpropertychange",ck),Wp=zp=null)}function ck(p){if(p.propertyName==="value"&&Sv(Wp)){var g=[];ik(g,Wp,p,qe(p)),rv(bj,g)}}function xj(p,g,S){p==="focusin"?(lk(),zp=g,Wp=S,zp.attachEvent("onpropertychange",ck)):p==="focusout"&&lk()}function Sj(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Sv(Wp)}function Nj(p,g){if(p==="click")return Sv(g)}function Cj(p,g){if(p==="input"||p==="change")return Sv(g)}function Ej(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var Di=typeof Object.is=="function"?Object.is:Ej;function Up(p,g){if(Di(p,g))return!0;if(typeof p!="object"||p===null||typeof g!="object"||g===null)return!1;var S=Object.keys(p),T=Object.keys(g);if(S.length!==T.length)return!1;for(T=0;T<S.length;T++){var _=S[T];if(!u.call(g,_)||!Di(p[_],g[_]))return!1}return!0}function fk(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function dk(p,g){var S=fk(p);p=0;for(var T;S;){if(S.nodeType===3){if(T=p+S.textContent.length,p<=g&&T>=g)return{node:S,offset:g-p};p=T}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=fk(S)}}function pk(p,g){return p&&g?p===g?!0:p&&p.nodeType===3?!1:g&&g.nodeType===3?pk(p,g.parentNode):"contains"in p?p.contains(g):p.compareDocumentPosition?!!(p.compareDocumentPosition(g)&16):!1:!1}function hk(){for(var p=window,g=Ne();g instanceof p.HTMLIFrameElement;){try{var S=typeof g.contentWindow.location.href=="string"}catch{S=!1}if(S)p=g.contentWindow;else break;g=Ne(p.document)}return g}function $x(p){var g=p&&p.nodeName&&p.nodeName.toLowerCase();return g&&(g==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||g==="textarea"||p.contentEditable==="true")}function Tj(p){var g=hk(),S=p.focusedElem,T=p.selectionRange;if(g!==S&&S&&S.ownerDocument&&pk(S.ownerDocument.documentElement,S)){if(T!==null&&$x(S)){if(g=T.start,p=T.end,p===void 0&&(p=g),"selectionStart"in S)S.selectionStart=g,S.selectionEnd=Math.min(p,S.value.length);else if(p=(g=S.ownerDocument||document)&&g.defaultView||window,p.getSelection){p=p.getSelection();var _=S.textContent.length,P=Math.min(T.start,_);T=T.end===void 0?P:Math.min(T.end,_),!p.extend&&P>T&&(_=T,T=P,P=_),_=dk(S,P);var K=dk(S,T);_&&K&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==K.node||p.focusOffset!==K.offset)&&(g=g.createRange(),g.setStart(_.node,_.offset),p.removeAllRanges(),P>T?(p.addRange(g),p.extend(K.node,K.offset)):(g.setEnd(K.node,K.offset),p.addRange(g)))}}for(g=[],p=S;p=p.parentNode;)p.nodeType===1&&g.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<g.length;S++)p=g[S],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var Dj=o&&"documentMode"in document&&11>=document.documentMode,bf=null,kx=null,qp=null,Ix=!1;function mk(p,g,S){var T=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;Ix||bf==null||bf!==Ne(T)||(T=bf,"selectionStart"in T&&$x(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),qp&&Up(qp,T)||(qp=T,T=Tv(kx,"onSelect"),0<T.length&&(g=new xx("onSelect","select",null,g,S),p.push({event:g,listeners:T}),g.target=bf)))}function Nv(p,g){var S={};return S[p.toLowerCase()]=g.toLowerCase(),S["Webkit"+p]="webkit"+g,S["Moz"+p]="moz"+g,S}var wf={animationend:Nv("Animation","AnimationEnd"),animationiteration:Nv("Animation","AnimationIteration"),animationstart:Nv("Animation","AnimationStart"),transitionend:Nv("Transition","TransitionEnd")},_x={},gk={};o&&(gk=document.createElement("div").style,"AnimationEvent"in window||(delete wf.animationend.animation,delete wf.animationiteration.animation,delete wf.animationstart.animation),"TransitionEvent"in window||delete wf.transitionend.transition);function Cv(p){if(_x[p])return _x[p];if(!wf[p])return p;var g=wf[p],S;for(S in g)if(g.hasOwnProperty(S)&&S in gk)return _x[p]=g[S];return p}var vk=Cv("animationend"),yk=Cv("animationiteration"),bk=Cv("animationstart"),wk=Cv("transitionend"),xk=new Map,Sk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cu(p,g){xk.set(p,g),s(g,[p])}for(var Ox=0;Ox<Sk.length;Ox++){var Fx=Sk[Ox],Aj=Fx.toLowerCase(),$j=Fx[0].toUpperCase()+Fx.slice(1);Cu(Aj,"on"+$j)}Cu(vk,"onAnimationEnd"),Cu(yk,"onAnimationIteration"),Cu(bk,"onAnimationStart"),Cu("dblclick","onDoubleClick"),Cu("focusin","onFocus"),Cu("focusout","onBlur"),Cu(wk,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vp));function Nk(p,g,S){var T=p.type||"unknown-event";p.currentTarget=S,lx(T,g,void 0,p),p.currentTarget=null}function Ck(p,g){g=(g&4)!==0;for(var S=0;S<p.length;S++){var T=p[S],_=T.event;T=T.listeners;e:{var P=void 0;if(g)for(var K=T.length-1;0<=K;K--){var le=T[K],ye=le.instance,Oe=le.currentTarget;if(le=le.listener,ye!==P&&_.isPropagationStopped())break e;Nk(_,le,Oe),P=ye}else for(K=0;K<T.length;K++){if(le=T[K],ye=le.instance,Oe=le.currentTarget,le=le.listener,ye!==P&&_.isPropagationStopped())break e;Nk(_,le,Oe),P=ye}}}if(mf)throw p=Ap,mf=!1,Ap=null,p}function Gn(p,g){var S=g[Ux];S===void 0&&(S=g[Ux]=new Set);var T=p+"__bubble";S.has(T)||(Ek(g,p,2,!1),S.add(T))}function Rx(p,g,S){var T=0;g&&(T|=4),Ek(S,p,T,g)}var Ev="_reactListening"+Math.random().toString(36).slice(2);function jp(p){if(!p[Ev]){p[Ev]=!0,r.forEach(function(S){S!=="selectionchange"&&(kj.has(S)||Rx(S,!1,p),Rx(S,!0,p))});var g=p.nodeType===9?p:p.ownerDocument;g===null||g[Ev]||(g[Ev]=!0,Rx("selectionchange",!1,g))}}function Ek(p,g,S,T){switch(K$(g)){case 1:var _=V9;break;case 4:_=j9;break;default:_=yx}S=_.bind(null,g,S,p),_=void 0,!Dp||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(_=!0),T?_!==void 0?p.addEventListener(g,S,{capture:!0,passive:_}):p.addEventListener(g,S,!0):_!==void 0?p.addEventListener(g,S,{passive:_}):p.addEventListener(g,S,!1)}function Mx(p,g,S,T,_){var P=T;if(!(g&1)&&!(g&2)&&T!==null)e:for(;;){if(T===null)return;var K=T.tag;if(K===3||K===4){var le=T.stateNode.containerInfo;if(le===_||le.nodeType===8&&le.parentNode===_)break;if(K===4)for(K=T.return;K!==null;){var ye=K.tag;if((ye===3||ye===4)&&(ye=K.stateNode.containerInfo,ye===_||ye.nodeType===8&&ye.parentNode===_))return;K=K.return}for(;le!==null;){if(K=jl(le),K===null)return;if(ye=K.tag,ye===5||ye===6){T=P=K;continue e}le=le.parentNode}}T=T.return}rv(function(){var Oe=P,Ye=qe(S),et=[];e:{var Xe=xk.get(p);if(Xe!==void 0){var ct=xx,gt=p;switch(p){case"keypress":if(bv(S)===0)break e;case"keydown":case"keyup":ct=ij;break;case"focusin":gt="focus",ct=Cx;break;case"focusout":gt="blur",ct=Cx;break;case"beforeblur":case"afterblur":ct=Cx;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ct=Q$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ct=K9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ct=lj;break;case vk:case yk:case bk:ct=Q9;break;case wk:ct=fj;break;case"scroll":ct=H9;break;case"wheel":ct=pj;break;case"copy":case"cut":case"paste":ct=Z9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ct=Z$}var yt=(g&4)!==0,vr=!yt&&p==="scroll",De=yt?Xe!==null?Xe+"Capture":null:Xe;yt=[];for(var Se=Oe,ke;Se!==null;){ke=Se;var at=ke.stateNode;if(ke.tag===5&&at!==null&&(ke=at,De!==null&&(at=zl(Se,De),at!=null&&yt.push(Hp(Se,at,ke)))),vr)break;Se=Se.return}0<yt.length&&(Xe=new ct(Xe,gt,null,S,Ye),et.push({event:Xe,listeners:yt}))}}if(!(g&7)){e:{if(Xe=p==="mouseover"||p==="pointerover",ct=p==="mouseout"||p==="pointerout",Xe&&S!==Ie&&(gt=S.relatedTarget||S.fromElement)&&(jl(gt)||gt[Mo]))break e;if((ct||Xe)&&(Xe=Ye.window===Ye?Ye:(Xe=Ye.ownerDocument)?Xe.defaultView||Xe.parentWindow:window,ct?(gt=S.relatedTarget||S.toElement,ct=Oe,gt=gt?jl(gt):null,gt!==null&&(vr=Ro(gt),gt!==vr||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(ct=null,gt=Oe),ct!==gt)){if(yt=Q$,at="onMouseLeave",De="onMouseEnter",Se="mouse",(p==="pointerout"||p==="pointerover")&&(yt=Z$,at="onPointerLeave",De="onPointerEnter",Se="pointer"),vr=ct==null?Xe:Nf(ct),ke=gt==null?Xe:Nf(gt),Xe=new yt(at,Se+"leave",ct,S,Ye),Xe.target=vr,Xe.relatedTarget=ke,at=null,jl(Ye)===Oe&&(yt=new yt(De,Se+"enter",gt,S,Ye),yt.target=ke,yt.relatedTarget=vr,at=yt),vr=at,ct&&gt)t:{for(yt=ct,De=gt,Se=0,ke=yt;ke;ke=xf(ke))Se++;for(ke=0,at=De;at;at=xf(at))ke++;for(;0<Se-ke;)yt=xf(yt),Se--;for(;0<ke-Se;)De=xf(De),ke--;for(;Se--;){if(yt===De||De!==null&&yt===De.alternate)break t;yt=xf(yt),De=xf(De)}yt=null}else yt=null;ct!==null&&Tk(et,Xe,ct,yt,!1),gt!==null&&vr!==null&&Tk(et,vr,gt,yt,!0)}}e:{if(Xe=Oe?Nf(Oe):window,ct=Xe.nodeName&&Xe.nodeName.toLowerCase(),ct==="select"||ct==="input"&&Xe.type==="file")var xt=wj;else if(sk(Xe))if(ok)xt=Cj;else{xt=Sj;var It=xj}else(ct=Xe.nodeName)&&ct.toLowerCase()==="input"&&(Xe.type==="checkbox"||Xe.type==="radio")&&(xt=Nj);if(xt&&(xt=xt(p,Oe))){ik(et,xt,S,Ye);break e}It&&It(p,Xe,Oe),p==="focusout"&&(It=Xe._wrapperState)&&It.controlled&&Xe.type==="number"&&Re(Xe,"number",Xe.value)}switch(It=Oe?Nf(Oe):window,p){case"focusin":(sk(It)||It.contentEditable==="true")&&(bf=It,kx=Oe,qp=null);break;case"focusout":qp=kx=bf=null;break;case"mousedown":Ix=!0;break;case"contextmenu":case"mouseup":case"dragend":Ix=!1,mk(et,S,Ye);break;case"selectionchange":if(Dj)break;case"keydown":case"keyup":mk(et,S,Ye)}var _t;if(Tx)e:{switch(p){case"compositionstart":var zt="onCompositionStart";break e;case"compositionend":zt="onCompositionEnd";break e;case"compositionupdate":zt="onCompositionUpdate";break e}zt=void 0}else yf?rk(p,S)&&(zt="onCompositionEnd"):p==="keydown"&&S.keyCode===229&&(zt="onCompositionStart");zt&&(ek&&S.locale!=="ko"&&(yf||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&yf&&(_t=X$()):(Nu=Ye,wx="value"in Nu?Nu.value:Nu.textContent,yf=!0)),It=Tv(Oe,zt),0<It.length&&(zt=new J$(zt,p,null,S,Ye),et.push({event:zt,listeners:It}),_t?zt.data=_t:(_t=ak(S),_t!==null&&(zt.data=_t)))),(_t=mj?gj(p,S):vj(p,S))&&(Oe=Tv(Oe,"onBeforeInput"),0<Oe.length&&(Ye=new J$("onBeforeInput","beforeinput",null,S,Ye),et.push({event:Ye,listeners:Oe}),Ye.data=_t))}Ck(et,g)})}function Hp(p,g,S){return{instance:p,listener:g,currentTarget:S}}function Tv(p,g){for(var S=g+"Capture",T=[];p!==null;){var _=p,P=_.stateNode;_.tag===5&&P!==null&&(_=P,P=zl(p,S),P!=null&&T.unshift(Hp(p,P,_)),P=zl(p,g),P!=null&&T.push(Hp(p,P,_))),p=p.return}return T}function xf(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function Tk(p,g,S,T,_){for(var P=g._reactName,K=[];S!==null&&S!==T;){var le=S,ye=le.alternate,Oe=le.stateNode;if(ye!==null&&ye===T)break;le.tag===5&&Oe!==null&&(le=Oe,_?(ye=zl(S,P),ye!=null&&K.unshift(Hp(S,ye,le))):_||(ye=zl(S,P),ye!=null&&K.push(Hp(S,ye,le)))),S=S.return}K.length!==0&&p.push({event:g,listeners:K})}var Ij=/\r\n?/g,_j=/\u0000|\uFFFD/g;function Dk(p){return(typeof p=="string"?p:""+p).replace(Ij,`
`).replace(_j,"")}function Dv(p,g,S){if(g=Dk(g),Dk(p)!==g&&S)throw Error(n(425))}function Av(){}var Px=null,Bx=null;function Lx(p,g){return p==="textarea"||p==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var zx=typeof setTimeout=="function"?setTimeout:void 0,Oj=typeof clearTimeout=="function"?clearTimeout:void 0,Ak=typeof Promise=="function"?Promise:void 0,Fj=typeof queueMicrotask=="function"?queueMicrotask:typeof Ak<"u"?function(p){return Ak.resolve(null).then(p).catch(Rj)}:zx;function Rj(p){setTimeout(function(){throw p})}function Wx(p,g){var S=g,T=0;do{var _=S.nextSibling;if(p.removeChild(S),_&&_.nodeType===8)if(S=_.data,S==="/$"){if(T===0){p.removeChild(_),Mp(g);return}T--}else S!=="$"&&S!=="$?"&&S!=="$!"||T++;S=_}while(S);Mp(g)}function Eu(p){for(;p!=null;p=p.nextSibling){var g=p.nodeType;if(g===1||g===3)break;if(g===8){if(g=p.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return p}function $k(p){p=p.previousSibling;for(var g=0;p;){if(p.nodeType===8){var S=p.data;if(S==="$"||S==="$!"||S==="$?"){if(g===0)return p;g--}else S==="/$"&&g++}p=p.previousSibling}return null}var Sf=Math.random().toString(36).slice(2),ao="__reactFiber$"+Sf,Gp="__reactProps$"+Sf,Mo="__reactContainer$"+Sf,Ux="__reactEvents$"+Sf,Mj="__reactListeners$"+Sf,Pj="__reactHandles$"+Sf;function jl(p){var g=p[ao];if(g)return g;for(var S=p.parentNode;S;){if(g=S[Mo]||S[ao]){if(S=g.alternate,g.child!==null||S!==null&&S.child!==null)for(p=$k(p);p!==null;){if(S=p[ao])return S;p=$k(p)}return g}p=S,S=p.parentNode}return null}function Kp(p){return p=p[ao]||p[Mo],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function Nf(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(n(33))}function $v(p){return p[Gp]||null}var qx=[],Cf=-1;function Tu(p){return{current:p}}function Kn(p){0>Cf||(p.current=qx[Cf],qx[Cf]=null,Cf--)}function Vn(p,g){Cf++,qx[Cf]=p.current,p.current=g}var Du={},Sa=Tu(Du),ts=Tu(!1),Hl=Du;function Ef(p,g){var S=p.type.contextTypes;if(!S)return Du;var T=p.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===g)return T.__reactInternalMemoizedMaskedChildContext;var _={},P;for(P in S)_[P]=g[P];return T&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=g,p.__reactInternalMemoizedMaskedChildContext=_),_}function ns(p){return p=p.childContextTypes,p!=null}function kv(){Kn(ts),Kn(Sa)}function kk(p,g,S){if(Sa.current!==Du)throw Error(n(168));Vn(Sa,g),Vn(ts,S)}function Ik(p,g,S){var T=p.stateNode;if(g=g.childContextTypes,typeof T.getChildContext!="function")return S;T=T.getChildContext();for(var _ in T)if(!(_ in g))throw Error(n(108,ie(p)||"Unknown",_));return G({},S,T)}function Iv(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Du,Hl=Sa.current,Vn(Sa,p),Vn(ts,ts.current),!0}function _k(p,g,S){var T=p.stateNode;if(!T)throw Error(n(169));S?(p=Ik(p,g,Hl),T.__reactInternalMemoizedMergedChildContext=p,Kn(ts),Kn(Sa),Vn(Sa,p)):Kn(ts),Vn(ts,S)}var Po=null,_v=!1,Vx=!1;function Ok(p){Po===null?Po=[p]:Po.push(p)}function Bj(p){_v=!0,Ok(p)}function Au(){if(!Vx&&Po!==null){Vx=!0;var p=0,g=In;try{var S=Po;for(In=1;p<S.length;p++){var T=S[p];do T=T(!0);while(T!==null)}Po=null,_v=!1}catch(_){throw Po!==null&&(Po=Po.slice(p+1)),uv($p,Au),_}finally{In=g,Vx=!1}}return null}var Tf=[],Df=0,Ov=null,Fv=0,js=[],Hs=0,Gl=null,Bo=1,Lo="";function Kl(p,g){Tf[Df++]=Fv,Tf[Df++]=Ov,Ov=p,Fv=g}function Fk(p,g,S){js[Hs++]=Bo,js[Hs++]=Lo,js[Hs++]=Gl,Gl=p;var T=Bo;p=Lo;var _=32-Ti(T)-1;T&=~(1<<_),S+=1;var P=32-Ti(g)+_;if(30<P){var K=_-_%5;P=(T&(1<<K)-1).toString(32),T>>=K,_-=K,Bo=1<<32-Ti(g)+_|S<<_|T,Lo=P+p}else Bo=1<<P|S<<_|T,Lo=p}function jx(p){p.return!==null&&(Kl(p,1),Fk(p,1,0))}function Hx(p){for(;p===Ov;)Ov=Tf[--Df],Tf[Df]=null,Fv=Tf[--Df],Tf[Df]=null;for(;p===Gl;)Gl=js[--Hs],js[Hs]=null,Lo=js[--Hs],js[Hs]=null,Bo=js[--Hs],js[Hs]=null}var ks=null,Is=null,Qn=!1,Ai=null;function Rk(p,g){var S=Ys(5,null,null,0);S.elementType="DELETED",S.stateNode=g,S.return=p,g=p.deletions,g===null?(p.deletions=[S],p.flags|=16):g.push(S)}function Mk(p,g){switch(p.tag){case 5:var S=p.type;return g=g.nodeType!==1||S.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(p.stateNode=g,ks=p,Is=Eu(g.firstChild),!0):!1;case 6:return g=p.pendingProps===""||g.nodeType!==3?null:g,g!==null?(p.stateNode=g,ks=p,Is=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(S=Gl!==null?{id:Bo,overflow:Lo}:null,p.memoizedState={dehydrated:g,treeContext:S,retryLane:1073741824},S=Ys(18,null,null,0),S.stateNode=g,S.return=p,p.child=S,ks=p,Is=null,!0):!1;default:return!1}}function Gx(p){return(p.mode&1)!==0&&(p.flags&128)===0}function Kx(p){if(Qn){var g=Is;if(g){var S=g;if(!Mk(p,g)){if(Gx(p))throw Error(n(418));g=Eu(S.nextSibling);var T=ks;g&&Mk(p,g)?Rk(T,S):(p.flags=p.flags&-4097|2,Qn=!1,ks=p)}}else{if(Gx(p))throw Error(n(418));p.flags=p.flags&-4097|2,Qn=!1,ks=p}}}function Pk(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;ks=p}function Rv(p){if(p!==ks)return!1;if(!Qn)return Pk(p),Qn=!0,!1;var g;if((g=p.tag!==3)&&!(g=p.tag!==5)&&(g=p.type,g=g!=="head"&&g!=="body"&&!Lx(p.type,p.memoizedProps)),g&&(g=Is)){if(Gx(p))throw Bk(),Error(n(418));for(;g;)Rk(p,g),g=Eu(g.nextSibling)}if(Pk(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));e:{for(p=p.nextSibling,g=0;p;){if(p.nodeType===8){var S=p.data;if(S==="/$"){if(g===0){Is=Eu(p.nextSibling);break e}g--}else S!=="$"&&S!=="$!"&&S!=="$?"||g++}p=p.nextSibling}Is=null}}else Is=ks?Eu(p.stateNode.nextSibling):null;return!0}function Bk(){for(var p=Is;p;)p=Eu(p.nextSibling)}function Af(){Is=ks=null,Qn=!1}function Xx(p){Ai===null?Ai=[p]:Ai.push(p)}var Lj=N.ReactCurrentBatchConfig;function Xp(p,g,S){if(p=S.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(n(309));var T=S.stateNode}if(!T)throw Error(n(147,p));var _=T,P=""+p;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===P?g.ref:(g=function(K){var le=_.refs;K===null?delete le[P]:le[P]=K},g._stringRef=P,g)}if(typeof p!="string")throw Error(n(284));if(!S._owner)throw Error(n(290,p))}return p}function Mv(p,g){throw p=Object.prototype.toString.call(g),Error(n(31,p==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":p))}function Lk(p){var g=p._init;return g(p._payload)}function zk(p){function g(De,Se){if(p){var ke=De.deletions;ke===null?(De.deletions=[Se],De.flags|=16):ke.push(Se)}}function S(De,Se){if(!p)return null;for(;Se!==null;)g(De,Se),Se=Se.sibling;return null}function T(De,Se){for(De=new Map;Se!==null;)Se.key!==null?De.set(Se.key,Se):De.set(Se.index,Se),Se=Se.sibling;return De}function _(De,Se){return De=Mu(De,Se),De.index=0,De.sibling=null,De}function P(De,Se,ke){return De.index=ke,p?(ke=De.alternate,ke!==null?(ke=ke.index,ke<Se?(De.flags|=2,Se):ke):(De.flags|=2,Se)):(De.flags|=1048576,Se)}function K(De){return p&&De.alternate===null&&(De.flags|=2),De}function le(De,Se,ke,at){return Se===null||Se.tag!==6?(Se=z2(ke,De.mode,at),Se.return=De,Se):(Se=_(Se,ke),Se.return=De,Se)}function ye(De,Se,ke,at){var xt=ke.type;return xt===$?Ye(De,Se,ke.props.children,at,ke.key):Se!==null&&(Se.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===F&&Lk(xt)===Se.type)?(at=_(Se,ke.props),at.ref=Xp(De,Se,ke),at.return=De,at):(at=iy(ke.type,ke.key,ke.props,null,De.mode,at),at.ref=Xp(De,Se,ke),at.return=De,at)}function Oe(De,Se,ke,at){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==ke.containerInfo||Se.stateNode.implementation!==ke.implementation?(Se=W2(ke,De.mode,at),Se.return=De,Se):(Se=_(Se,ke.children||[]),Se.return=De,Se)}function Ye(De,Se,ke,at,xt){return Se===null||Se.tag!==7?(Se=nc(ke,De.mode,at,xt),Se.return=De,Se):(Se=_(Se,ke),Se.return=De,Se)}function et(De,Se,ke){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return Se=z2(""+Se,De.mode,ke),Se.return=De,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case C:return ke=iy(Se.type,Se.key,Se.props,null,De.mode,ke),ke.ref=Xp(De,null,Se),ke.return=De,ke;case E:return Se=W2(Se,De.mode,ke),Se.return=De,Se;case F:var at=Se._init;return et(De,at(Se._payload),ke)}if(Me(Se)||M(Se))return Se=nc(Se,De.mode,ke,null),Se.return=De,Se;Mv(De,Se)}return null}function Xe(De,Se,ke,at){var xt=Se!==null?Se.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number")return xt!==null?null:le(De,Se,""+ke,at);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case C:return ke.key===xt?ye(De,Se,ke,at):null;case E:return ke.key===xt?Oe(De,Se,ke,at):null;case F:return xt=ke._init,Xe(De,Se,xt(ke._payload),at)}if(Me(ke)||M(ke))return xt!==null?null:Ye(De,Se,ke,at,null);Mv(De,ke)}return null}function ct(De,Se,ke,at,xt){if(typeof at=="string"&&at!==""||typeof at=="number")return De=De.get(ke)||null,le(Se,De,""+at,xt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case C:return De=De.get(at.key===null?ke:at.key)||null,ye(Se,De,at,xt);case E:return De=De.get(at.key===null?ke:at.key)||null,Oe(Se,De,at,xt);case F:var It=at._init;return ct(De,Se,ke,It(at._payload),xt)}if(Me(at)||M(at))return De=De.get(ke)||null,Ye(Se,De,at,xt,null);Mv(Se,at)}return null}function gt(De,Se,ke,at){for(var xt=null,It=null,_t=Se,zt=Se=0,Xr=null;_t!==null&&zt<ke.length;zt++){_t.index>zt?(Xr=_t,_t=null):Xr=_t.sibling;var Sn=Xe(De,_t,ke[zt],at);if(Sn===null){_t===null&&(_t=Xr);break}p&&_t&&Sn.alternate===null&&g(De,_t),Se=P(Sn,Se,zt),It===null?xt=Sn:It.sibling=Sn,It=Sn,_t=Xr}if(zt===ke.length)return S(De,_t),Qn&&Kl(De,zt),xt;if(_t===null){for(;zt<ke.length;zt++)_t=et(De,ke[zt],at),_t!==null&&(Se=P(_t,Se,zt),It===null?xt=_t:It.sibling=_t,It=_t);return Qn&&Kl(De,zt),xt}for(_t=T(De,_t);zt<ke.length;zt++)Xr=ct(_t,De,zt,ke[zt],at),Xr!==null&&(p&&Xr.alternate!==null&&_t.delete(Xr.key===null?zt:Xr.key),Se=P(Xr,Se,zt),It===null?xt=Xr:It.sibling=Xr,It=Xr);return p&&_t.forEach(function(Pu){return g(De,Pu)}),Qn&&Kl(De,zt),xt}function yt(De,Se,ke,at){var xt=M(ke);if(typeof xt!="function")throw Error(n(150));if(ke=xt.call(ke),ke==null)throw Error(n(151));for(var It=xt=null,_t=Se,zt=Se=0,Xr=null,Sn=ke.next();_t!==null&&!Sn.done;zt++,Sn=ke.next()){_t.index>zt?(Xr=_t,_t=null):Xr=_t.sibling;var Pu=Xe(De,_t,Sn.value,at);if(Pu===null){_t===null&&(_t=Xr);break}p&&_t&&Pu.alternate===null&&g(De,_t),Se=P(Pu,Se,zt),It===null?xt=Pu:It.sibling=Pu,It=Pu,_t=Xr}if(Sn.done)return S(De,_t),Qn&&Kl(De,zt),xt;if(_t===null){for(;!Sn.done;zt++,Sn=ke.next())Sn=et(De,Sn.value,at),Sn!==null&&(Se=P(Sn,Se,zt),It===null?xt=Sn:It.sibling=Sn,It=Sn);return Qn&&Kl(De,zt),xt}for(_t=T(De,_t);!Sn.done;zt++,Sn=ke.next())Sn=ct(_t,De,zt,Sn.value,at),Sn!==null&&(p&&Sn.alternate!==null&&_t.delete(Sn.key===null?zt:Sn.key),Se=P(Sn,Se,zt),It===null?xt=Sn:It.sibling=Sn,It=Sn);return p&&_t.forEach(function(yH){return g(De,yH)}),Qn&&Kl(De,zt),xt}function vr(De,Se,ke,at){if(typeof ke=="object"&&ke!==null&&ke.type===$&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case C:e:{for(var xt=ke.key,It=Se;It!==null;){if(It.key===xt){if(xt=ke.type,xt===$){if(It.tag===7){S(De,It.sibling),Se=_(It,ke.props.children),Se.return=De,De=Se;break e}}else if(It.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===F&&Lk(xt)===It.type){S(De,It.sibling),Se=_(It,ke.props),Se.ref=Xp(De,It,ke),Se.return=De,De=Se;break e}S(De,It);break}else g(De,It);It=It.sibling}ke.type===$?(Se=nc(ke.props.children,De.mode,at,ke.key),Se.return=De,De=Se):(at=iy(ke.type,ke.key,ke.props,null,De.mode,at),at.ref=Xp(De,Se,ke),at.return=De,De=at)}return K(De);case E:e:{for(It=ke.key;Se!==null;){if(Se.key===It)if(Se.tag===4&&Se.stateNode.containerInfo===ke.containerInfo&&Se.stateNode.implementation===ke.implementation){S(De,Se.sibling),Se=_(Se,ke.children||[]),Se.return=De,De=Se;break e}else{S(De,Se);break}else g(De,Se);Se=Se.sibling}Se=W2(ke,De.mode,at),Se.return=De,De=Se}return K(De);case F:return It=ke._init,vr(De,Se,It(ke._payload),at)}if(Me(ke))return gt(De,Se,ke,at);if(M(ke))return yt(De,Se,ke,at);Mv(De,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"?(ke=""+ke,Se!==null&&Se.tag===6?(S(De,Se.sibling),Se=_(Se,ke),Se.return=De,De=Se):(S(De,Se),Se=z2(ke,De.mode,at),Se.return=De,De=Se),K(De)):S(De,Se)}return vr}var $f=zk(!0),Wk=zk(!1),Pv=Tu(null),Bv=null,kf=null,Yx=null;function Qx(){Yx=kf=Bv=null}function Jx(p){var g=Pv.current;Kn(Pv),p._currentValue=g}function Zx(p,g,S){for(;p!==null;){var T=p.alternate;if((p.childLanes&g)!==g?(p.childLanes|=g,T!==null&&(T.childLanes|=g)):T!==null&&(T.childLanes&g)!==g&&(T.childLanes|=g),p===S)break;p=p.return}}function If(p,g){Bv=p,Yx=kf=null,p=p.dependencies,p!==null&&p.firstContext!==null&&(p.lanes&g&&(rs=!0),p.firstContext=null)}function Gs(p){var g=p._currentValue;if(Yx!==p)if(p={context:p,memoizedValue:g,next:null},kf===null){if(Bv===null)throw Error(n(308));kf=p,Bv.dependencies={lanes:0,firstContext:p}}else kf=kf.next=p;return g}var Xl=null;function e2(p){Xl===null?Xl=[p]:Xl.push(p)}function Uk(p,g,S,T){var _=g.interleaved;return _===null?(S.next=S,e2(g)):(S.next=_.next,_.next=S),g.interleaved=S,zo(p,T)}function zo(p,g){p.lanes|=g;var S=p.alternate;for(S!==null&&(S.lanes|=g),S=p,p=p.return;p!==null;)p.childLanes|=g,S=p.alternate,S!==null&&(S.childLanes|=g),S=p,p=p.return;return S.tag===3?S.stateNode:null}var $u=!1;function t2(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qk(p,g){p=p.updateQueue,g.updateQueue===p&&(g.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Wo(p,g){return{eventTime:p,lane:g,tag:0,payload:null,callback:null,next:null}}function ku(p,g,S){var T=p.updateQueue;if(T===null)return null;if(T=T.shared,xn&2){var _=T.pending;return _===null?g.next=g:(g.next=_.next,_.next=g),T.pending=g,zo(p,S)}return _=T.interleaved,_===null?(g.next=g,e2(T)):(g.next=_.next,_.next=g),T.interleaved=g,zo(p,S)}function Lv(p,g,S){if(g=g.updateQueue,g!==null&&(g=g.shared,(S&4194240)!==0)){var T=g.lanes;T&=p.pendingLanes,S|=T,g.lanes=S,mx(p,S)}}function Vk(p,g){var S=p.updateQueue,T=p.alternate;if(T!==null&&(T=T.updateQueue,S===T)){var _=null,P=null;if(S=S.firstBaseUpdate,S!==null){do{var K={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};P===null?_=P=K:P=P.next=K,S=S.next}while(S!==null);P===null?_=P=g:P=P.next=g}else _=P=g;S={baseState:T.baseState,firstBaseUpdate:_,lastBaseUpdate:P,shared:T.shared,effects:T.effects},p.updateQueue=S;return}p=S.lastBaseUpdate,p===null?S.firstBaseUpdate=g:p.next=g,S.lastBaseUpdate=g}function zv(p,g,S,T){var _=p.updateQueue;$u=!1;var P=_.firstBaseUpdate,K=_.lastBaseUpdate,le=_.shared.pending;if(le!==null){_.shared.pending=null;var ye=le,Oe=ye.next;ye.next=null,K===null?P=Oe:K.next=Oe,K=ye;var Ye=p.alternate;Ye!==null&&(Ye=Ye.updateQueue,le=Ye.lastBaseUpdate,le!==K&&(le===null?Ye.firstBaseUpdate=Oe:le.next=Oe,Ye.lastBaseUpdate=ye))}if(P!==null){var et=_.baseState;K=0,Ye=Oe=ye=null,le=P;do{var Xe=le.lane,ct=le.eventTime;if((T&Xe)===Xe){Ye!==null&&(Ye=Ye.next={eventTime:ct,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var gt=p,yt=le;switch(Xe=g,ct=S,yt.tag){case 1:if(gt=yt.payload,typeof gt=="function"){et=gt.call(ct,et,Xe);break e}et=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=yt.payload,Xe=typeof gt=="function"?gt.call(ct,et,Xe):gt,Xe==null)break e;et=G({},et,Xe);break e;case 2:$u=!0}}le.callback!==null&&le.lane!==0&&(p.flags|=64,Xe=_.effects,Xe===null?_.effects=[le]:Xe.push(le))}else ct={eventTime:ct,lane:Xe,tag:le.tag,payload:le.payload,callback:le.callback,next:null},Ye===null?(Oe=Ye=ct,ye=et):Ye=Ye.next=ct,K|=Xe;if(le=le.next,le===null){if(le=_.shared.pending,le===null)break;Xe=le,le=Xe.next,Xe.next=null,_.lastBaseUpdate=Xe,_.shared.pending=null}}while(!0);if(Ye===null&&(ye=et),_.baseState=ye,_.firstBaseUpdate=Oe,_.lastBaseUpdate=Ye,g=_.shared.interleaved,g!==null){_=g;do K|=_.lane,_=_.next;while(_!==g)}else P===null&&(_.shared.lanes=0);Jl|=K,p.lanes=K,p.memoizedState=et}}function jk(p,g,S){if(p=g.effects,g.effects=null,p!==null)for(g=0;g<p.length;g++){var T=p[g],_=T.callback;if(_!==null){if(T.callback=null,T=S,typeof _!="function")throw Error(n(191,_));_.call(T)}}}var Yp={},so=Tu(Yp),Qp=Tu(Yp),Jp=Tu(Yp);function Yl(p){if(p===Yp)throw Error(n(174));return p}function n2(p,g){switch(Vn(Jp,g),Vn(Qp,p),Vn(so,Yp),p=g.nodeType,p){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:Le(null,"");break;default:p=p===8?g.parentNode:g,g=p.namespaceURI||null,p=p.tagName,g=Le(g,p)}Kn(so),Vn(so,g)}function _f(){Kn(so),Kn(Qp),Kn(Jp)}function Hk(p){Yl(Jp.current);var g=Yl(so.current),S=Le(g,p.type);g!==S&&(Vn(Qp,p),Vn(so,S))}function r2(p){Qp.current===p&&(Kn(so),Kn(Qp))}var ar=Tu(0);function Wv(p){for(var g=p;g!==null;){if(g.tag===13){var S=g.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||S.data==="$?"||S.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var a2=[];function s2(){for(var p=0;p<a2.length;p++)a2[p]._workInProgressVersionPrimary=null;a2.length=0}var Uv=N.ReactCurrentDispatcher,i2=N.ReactCurrentBatchConfig,Ql=0,sr=null,Fr=null,Gr=null,qv=!1,Zp=!1,eh=0,zj=0;function Na(){throw Error(n(321))}function o2(p,g){if(g===null)return!1;for(var S=0;S<g.length&&S<p.length;S++)if(!Di(p[S],g[S]))return!1;return!0}function u2(p,g,S,T,_,P){if(Ql=P,sr=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Uv.current=p===null||p.memoizedState===null?Vj:jj,p=S(T,_),Zp){P=0;do{if(Zp=!1,eh=0,25<=P)throw Error(n(301));P+=1,Gr=Fr=null,g.updateQueue=null,Uv.current=Hj,p=S(T,_)}while(Zp)}if(Uv.current=Hv,g=Fr!==null&&Fr.next!==null,Ql=0,Gr=Fr=sr=null,qv=!1,g)throw Error(n(300));return p}function l2(){var p=eh!==0;return eh=0,p}function io(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?sr.memoizedState=Gr=p:Gr=Gr.next=p,Gr}function Ks(){if(Fr===null){var p=sr.alternate;p=p!==null?p.memoizedState:null}else p=Fr.next;var g=Gr===null?sr.memoizedState:Gr.next;if(g!==null)Gr=g,Fr=p;else{if(p===null)throw Error(n(310));Fr=p,p={memoizedState:Fr.memoizedState,baseState:Fr.baseState,baseQueue:Fr.baseQueue,queue:Fr.queue,next:null},Gr===null?sr.memoizedState=Gr=p:Gr=Gr.next=p}return Gr}function th(p,g){return typeof g=="function"?g(p):g}function c2(p){var g=Ks(),S=g.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=p;var T=Fr,_=T.baseQueue,P=S.pending;if(P!==null){if(_!==null){var K=_.next;_.next=P.next,P.next=K}T.baseQueue=_=P,S.pending=null}if(_!==null){P=_.next,T=T.baseState;var le=K=null,ye=null,Oe=P;do{var Ye=Oe.lane;if((Ql&Ye)===Ye)ye!==null&&(ye=ye.next={lane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),T=Oe.hasEagerState?Oe.eagerState:p(T,Oe.action);else{var et={lane:Ye,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null};ye===null?(le=ye=et,K=T):ye=ye.next=et,sr.lanes|=Ye,Jl|=Ye}Oe=Oe.next}while(Oe!==null&&Oe!==P);ye===null?K=T:ye.next=le,Di(T,g.memoizedState)||(rs=!0),g.memoizedState=T,g.baseState=K,g.baseQueue=ye,S.lastRenderedState=T}if(p=S.interleaved,p!==null){_=p;do P=_.lane,sr.lanes|=P,Jl|=P,_=_.next;while(_!==p)}else _===null&&(S.lanes=0);return[g.memoizedState,S.dispatch]}function f2(p){var g=Ks(),S=g.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=p;var T=S.dispatch,_=S.pending,P=g.memoizedState;if(_!==null){S.pending=null;var K=_=_.next;do P=p(P,K.action),K=K.next;while(K!==_);Di(P,g.memoizedState)||(rs=!0),g.memoizedState=P,g.baseQueue===null&&(g.baseState=P),S.lastRenderedState=P}return[P,T]}function Gk(){}function Kk(p,g){var S=sr,T=Ks(),_=g(),P=!Di(T.memoizedState,_);if(P&&(T.memoizedState=_,rs=!0),T=T.queue,d2(Qk.bind(null,S,T,p),[p]),T.getSnapshot!==g||P||Gr!==null&&Gr.memoizedState.tag&1){if(S.flags|=2048,nh(9,Yk.bind(null,S,T,_,g),void 0,null),Kr===null)throw Error(n(349));Ql&30||Xk(S,g,_)}return _}function Xk(p,g,S){p.flags|=16384,p={getSnapshot:g,value:S},g=sr.updateQueue,g===null?(g={lastEffect:null,stores:null},sr.updateQueue=g,g.stores=[p]):(S=g.stores,S===null?g.stores=[p]:S.push(p))}function Yk(p,g,S,T){g.value=S,g.getSnapshot=T,Jk(g)&&Zk(p)}function Qk(p,g,S){return S(function(){Jk(g)&&Zk(p)})}function Jk(p){var g=p.getSnapshot;p=p.value;try{var S=g();return!Di(p,S)}catch{return!0}}function Zk(p){var g=zo(p,1);g!==null&&_i(g,p,1,-1)}function eI(p){var g=io();return typeof p=="function"&&(p=p()),g.memoizedState=g.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:th,lastRenderedState:p},g.queue=p,p=p.dispatch=qj.bind(null,sr,p),[g.memoizedState,p]}function nh(p,g,S,T){return p={tag:p,create:g,destroy:S,deps:T,next:null},g=sr.updateQueue,g===null?(g={lastEffect:null,stores:null},sr.updateQueue=g,g.lastEffect=p.next=p):(S=g.lastEffect,S===null?g.lastEffect=p.next=p:(T=S.next,S.next=p,p.next=T,g.lastEffect=p)),p}function tI(){return Ks().memoizedState}function Vv(p,g,S,T){var _=io();sr.flags|=p,_.memoizedState=nh(1|g,S,void 0,T===void 0?null:T)}function jv(p,g,S,T){var _=Ks();T=T===void 0?null:T;var P=void 0;if(Fr!==null){var K=Fr.memoizedState;if(P=K.destroy,T!==null&&o2(T,K.deps)){_.memoizedState=nh(g,S,P,T);return}}sr.flags|=p,_.memoizedState=nh(1|g,S,P,T)}function nI(p,g){return Vv(8390656,8,p,g)}function d2(p,g){return jv(2048,8,p,g)}function rI(p,g){return jv(4,2,p,g)}function aI(p,g){return jv(4,4,p,g)}function sI(p,g){if(typeof g=="function")return p=p(),g(p),function(){g(null)};if(g!=null)return p=p(),g.current=p,function(){g.current=null}}function iI(p,g,S){return S=S!=null?S.concat([p]):null,jv(4,4,sI.bind(null,g,p),S)}function p2(){}function oI(p,g){var S=Ks();g=g===void 0?null:g;var T=S.memoizedState;return T!==null&&g!==null&&o2(g,T[1])?T[0]:(S.memoizedState=[p,g],p)}function uI(p,g){var S=Ks();g=g===void 0?null:g;var T=S.memoizedState;return T!==null&&g!==null&&o2(g,T[1])?T[0]:(p=p(),S.memoizedState=[p,g],p)}function lI(p,g,S){return Ql&21?(Di(S,g)||(S=L$(),sr.lanes|=S,Jl|=S,p.baseState=!0),g):(p.baseState&&(p.baseState=!1,rs=!0),p.memoizedState=S)}function Wj(p,g){var S=In;In=S!==0&&4>S?S:4,p(!0);var T=i2.transition;i2.transition={};try{p(!1),g()}finally{In=S,i2.transition=T}}function cI(){return Ks().memoizedState}function Uj(p,g,S){var T=Fu(p);if(S={lane:T,action:S,hasEagerState:!1,eagerState:null,next:null},fI(p))dI(g,S);else if(S=Uk(p,g,S,T),S!==null){var _=Wa();_i(S,p,T,_),pI(S,g,T)}}function qj(p,g,S){var T=Fu(p),_={lane:T,action:S,hasEagerState:!1,eagerState:null,next:null};if(fI(p))dI(g,_);else{var P=p.alternate;if(p.lanes===0&&(P===null||P.lanes===0)&&(P=g.lastRenderedReducer,P!==null))try{var K=g.lastRenderedState,le=P(K,S);if(_.hasEagerState=!0,_.eagerState=le,Di(le,K)){var ye=g.interleaved;ye===null?(_.next=_,e2(g)):(_.next=ye.next,ye.next=_),g.interleaved=_;return}}catch{}finally{}S=Uk(p,g,_,T),S!==null&&(_=Wa(),_i(S,p,T,_),pI(S,g,T))}}function fI(p){var g=p.alternate;return p===sr||g!==null&&g===sr}function dI(p,g){Zp=qv=!0;var S=p.pending;S===null?g.next=g:(g.next=S.next,S.next=g),p.pending=g}function pI(p,g,S){if(S&4194240){var T=g.lanes;T&=p.pendingLanes,S|=T,g.lanes=S,mx(p,S)}}var Hv={readContext:Gs,useCallback:Na,useContext:Na,useEffect:Na,useImperativeHandle:Na,useInsertionEffect:Na,useLayoutEffect:Na,useMemo:Na,useReducer:Na,useRef:Na,useState:Na,useDebugValue:Na,useDeferredValue:Na,useTransition:Na,useMutableSource:Na,useSyncExternalStore:Na,useId:Na,unstable_isNewReconciler:!1},Vj={readContext:Gs,useCallback:function(p,g){return io().memoizedState=[p,g===void 0?null:g],p},useContext:Gs,useEffect:nI,useImperativeHandle:function(p,g,S){return S=S!=null?S.concat([p]):null,Vv(4194308,4,sI.bind(null,g,p),S)},useLayoutEffect:function(p,g){return Vv(4194308,4,p,g)},useInsertionEffect:function(p,g){return Vv(4,2,p,g)},useMemo:function(p,g){var S=io();return g=g===void 0?null:g,p=p(),S.memoizedState=[p,g],p},useReducer:function(p,g,S){var T=io();return g=S!==void 0?S(g):g,T.memoizedState=T.baseState=g,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:g},T.queue=p,p=p.dispatch=Uj.bind(null,sr,p),[T.memoizedState,p]},useRef:function(p){var g=io();return p={current:p},g.memoizedState=p},useState:eI,useDebugValue:p2,useDeferredValue:function(p){return io().memoizedState=p},useTransition:function(){var p=eI(!1),g=p[0];return p=Wj.bind(null,p[1]),io().memoizedState=p,[g,p]},useMutableSource:function(){},useSyncExternalStore:function(p,g,S){var T=sr,_=io();if(Qn){if(S===void 0)throw Error(n(407));S=S()}else{if(S=g(),Kr===null)throw Error(n(349));Ql&30||Xk(T,g,S)}_.memoizedState=S;var P={value:S,getSnapshot:g};return _.queue=P,nI(Qk.bind(null,T,P,p),[p]),T.flags|=2048,nh(9,Yk.bind(null,T,P,S,g),void 0,null),S},useId:function(){var p=io(),g=Kr.identifierPrefix;if(Qn){var S=Lo,T=Bo;S=(T&~(1<<32-Ti(T)-1)).toString(32)+S,g=":"+g+"R"+S,S=eh++,0<S&&(g+="H"+S.toString(32)),g+=":"}else S=zj++,g=":"+g+"r"+S.toString(32)+":";return p.memoizedState=g},unstable_isNewReconciler:!1},jj={readContext:Gs,useCallback:oI,useContext:Gs,useEffect:d2,useImperativeHandle:iI,useInsertionEffect:rI,useLayoutEffect:aI,useMemo:uI,useReducer:c2,useRef:tI,useState:function(){return c2(th)},useDebugValue:p2,useDeferredValue:function(p){var g=Ks();return lI(g,Fr.memoizedState,p)},useTransition:function(){var p=c2(th)[0],g=Ks().memoizedState;return[p,g]},useMutableSource:Gk,useSyncExternalStore:Kk,useId:cI,unstable_isNewReconciler:!1},Hj={readContext:Gs,useCallback:oI,useContext:Gs,useEffect:d2,useImperativeHandle:iI,useInsertionEffect:rI,useLayoutEffect:aI,useMemo:uI,useReducer:f2,useRef:tI,useState:function(){return f2(th)},useDebugValue:p2,useDeferredValue:function(p){var g=Ks();return Fr===null?g.memoizedState=p:lI(g,Fr.memoizedState,p)},useTransition:function(){var p=f2(th)[0],g=Ks().memoizedState;return[p,g]},useMutableSource:Gk,useSyncExternalStore:Kk,useId:cI,unstable_isNewReconciler:!1};function $i(p,g){if(p&&p.defaultProps){g=G({},g),p=p.defaultProps;for(var S in p)g[S]===void 0&&(g[S]=p[S]);return g}return g}function h2(p,g,S,T){g=p.memoizedState,S=S(T,g),S=S==null?g:G({},g,S),p.memoizedState=S,p.lanes===0&&(p.updateQueue.baseState=S)}var Gv={isMounted:function(p){return(p=p._reactInternals)?Ro(p)===p:!1},enqueueSetState:function(p,g,S){p=p._reactInternals;var T=Wa(),_=Fu(p),P=Wo(T,_);P.payload=g,S!=null&&(P.callback=S),g=ku(p,P,_),g!==null&&(_i(g,p,_,T),Lv(g,p,_))},enqueueReplaceState:function(p,g,S){p=p._reactInternals;var T=Wa(),_=Fu(p),P=Wo(T,_);P.tag=1,P.payload=g,S!=null&&(P.callback=S),g=ku(p,P,_),g!==null&&(_i(g,p,_,T),Lv(g,p,_))},enqueueForceUpdate:function(p,g){p=p._reactInternals;var S=Wa(),T=Fu(p),_=Wo(S,T);_.tag=2,g!=null&&(_.callback=g),g=ku(p,_,T),g!==null&&(_i(g,p,T,S),Lv(g,p,T))}};function hI(p,g,S,T,_,P,K){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(T,P,K):g.prototype&&g.prototype.isPureReactComponent?!Up(S,T)||!Up(_,P):!0}function mI(p,g,S){var T=!1,_=Du,P=g.contextType;return typeof P=="object"&&P!==null?P=Gs(P):(_=ns(g)?Hl:Sa.current,T=g.contextTypes,P=(T=T!=null)?Ef(p,_):Du),g=new g(S,P),p.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Gv,p.stateNode=g,g._reactInternals=p,T&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=_,p.__reactInternalMemoizedMaskedChildContext=P),g}function gI(p,g,S,T){p=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(S,T),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(S,T),g.state!==p&&Gv.enqueueReplaceState(g,g.state,null)}function m2(p,g,S,T){var _=p.stateNode;_.props=S,_.state=p.memoizedState,_.refs={},t2(p);var P=g.contextType;typeof P=="object"&&P!==null?_.context=Gs(P):(P=ns(g)?Hl:Sa.current,_.context=Ef(p,P)),_.state=p.memoizedState,P=g.getDerivedStateFromProps,typeof P=="function"&&(h2(p,g,P,S),_.state=p.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(g=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),g!==_.state&&Gv.enqueueReplaceState(_,_.state,null),zv(p,S,_,T),_.state=p.memoizedState),typeof _.componentDidMount=="function"&&(p.flags|=4194308)}function Of(p,g){try{var S="",T=g;do S+=ue(T),T=T.return;while(T);var _=S}catch(P){_=`
Error generating stack: `+P.message+`
`+P.stack}return{value:p,source:g,stack:_,digest:null}}function g2(p,g,S){return{value:p,source:null,stack:S??null,digest:g??null}}function v2(p,g){try{console.error(g.value)}catch(S){setTimeout(function(){throw S})}}var Gj=typeof WeakMap=="function"?WeakMap:Map;function vI(p,g,S){S=Wo(-1,S),S.tag=3,S.payload={element:null};var T=g.value;return S.callback=function(){ey||(ey=!0,_2=T),v2(p,g)},S}function yI(p,g,S){S=Wo(-1,S),S.tag=3;var T=p.type.getDerivedStateFromError;if(typeof T=="function"){var _=g.value;S.payload=function(){return T(_)},S.callback=function(){v2(p,g)}}var P=p.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(S.callback=function(){v2(p,g),typeof T!="function"&&(_u===null?_u=new Set([this]):_u.add(this));var K=g.stack;this.componentDidCatch(g.value,{componentStack:K!==null?K:""})}),S}function bI(p,g,S){var T=p.pingCache;if(T===null){T=p.pingCache=new Gj;var _=new Set;T.set(g,_)}else _=T.get(g),_===void 0&&(_=new Set,T.set(g,_));_.has(S)||(_.add(S),p=oH.bind(null,p,g,S),g.then(p,p))}function wI(p){do{var g;if((g=p.tag===13)&&(g=p.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return p;p=p.return}while(p!==null);return null}function xI(p,g,S,T,_){return p.mode&1?(p.flags|=65536,p.lanes=_,p):(p===g?p.flags|=65536:(p.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(g=Wo(-1,1),g.tag=2,ku(S,g,1))),S.lanes|=1),p)}var Kj=N.ReactCurrentOwner,rs=!1;function za(p,g,S,T){g.child=p===null?Wk(g,null,S,T):$f(g,p.child,S,T)}function SI(p,g,S,T,_){S=S.render;var P=g.ref;return If(g,_),T=u2(p,g,S,T,P,_),S=l2(),p!==null&&!rs?(g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~_,Uo(p,g,_)):(Qn&&S&&jx(g),g.flags|=1,za(p,g,T,_),g.child)}function NI(p,g,S,T,_){if(p===null){var P=S.type;return typeof P=="function"&&!L2(P)&&P.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(g.tag=15,g.type=P,CI(p,g,P,T,_)):(p=iy(S.type,null,T,g,g.mode,_),p.ref=g.ref,p.return=g,g.child=p)}if(P=p.child,!(p.lanes&_)){var K=P.memoizedProps;if(S=S.compare,S=S!==null?S:Up,S(K,T)&&p.ref===g.ref)return Uo(p,g,_)}return g.flags|=1,p=Mu(P,T),p.ref=g.ref,p.return=g,g.child=p}function CI(p,g,S,T,_){if(p!==null){var P=p.memoizedProps;if(Up(P,T)&&p.ref===g.ref)if(rs=!1,g.pendingProps=T=P,(p.lanes&_)!==0)p.flags&131072&&(rs=!0);else return g.lanes=p.lanes,Uo(p,g,_)}return y2(p,g,S,T,_)}function EI(p,g,S){var T=g.pendingProps,_=T.children,P=p!==null?p.memoizedState:null;if(T.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vn(Rf,_s),_s|=S;else{if(!(S&1073741824))return p=P!==null?P.baseLanes|S:S,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:p,cachePool:null,transitions:null},g.updateQueue=null,Vn(Rf,_s),_s|=p,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},T=P!==null?P.baseLanes:S,Vn(Rf,_s),_s|=T}else P!==null?(T=P.baseLanes|S,g.memoizedState=null):T=S,Vn(Rf,_s),_s|=T;return za(p,g,_,S),g.child}function TI(p,g){var S=g.ref;(p===null&&S!==null||p!==null&&p.ref!==S)&&(g.flags|=512,g.flags|=2097152)}function y2(p,g,S,T,_){var P=ns(S)?Hl:Sa.current;return P=Ef(g,P),If(g,_),S=u2(p,g,S,T,P,_),T=l2(),p!==null&&!rs?(g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~_,Uo(p,g,_)):(Qn&&T&&jx(g),g.flags|=1,za(p,g,S,_),g.child)}function DI(p,g,S,T,_){if(ns(S)){var P=!0;Iv(g)}else P=!1;if(If(g,_),g.stateNode===null)Xv(p,g),mI(g,S,T),m2(g,S,T,_),T=!0;else if(p===null){var K=g.stateNode,le=g.memoizedProps;K.props=le;var ye=K.context,Oe=S.contextType;typeof Oe=="object"&&Oe!==null?Oe=Gs(Oe):(Oe=ns(S)?Hl:Sa.current,Oe=Ef(g,Oe));var Ye=S.getDerivedStateFromProps,et=typeof Ye=="function"||typeof K.getSnapshotBeforeUpdate=="function";et||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(le!==T||ye!==Oe)&&gI(g,K,T,Oe),$u=!1;var Xe=g.memoizedState;K.state=Xe,zv(g,T,K,_),ye=g.memoizedState,le!==T||Xe!==ye||ts.current||$u?(typeof Ye=="function"&&(h2(g,S,Ye,T),ye=g.memoizedState),(le=$u||hI(g,S,le,T,Xe,ye,Oe))?(et||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(g.flags|=4194308)):(typeof K.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=T,g.memoizedState=ye),K.props=T,K.state=ye,K.context=Oe,T=le):(typeof K.componentDidMount=="function"&&(g.flags|=4194308),T=!1)}else{K=g.stateNode,qk(p,g),le=g.memoizedProps,Oe=g.type===g.elementType?le:$i(g.type,le),K.props=Oe,et=g.pendingProps,Xe=K.context,ye=S.contextType,typeof ye=="object"&&ye!==null?ye=Gs(ye):(ye=ns(S)?Hl:Sa.current,ye=Ef(g,ye));var ct=S.getDerivedStateFromProps;(Ye=typeof ct=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(le!==et||Xe!==ye)&&gI(g,K,T,ye),$u=!1,Xe=g.memoizedState,K.state=Xe,zv(g,T,K,_);var gt=g.memoizedState;le!==et||Xe!==gt||ts.current||$u?(typeof ct=="function"&&(h2(g,S,ct,T),gt=g.memoizedState),(Oe=$u||hI(g,S,Oe,T,Xe,gt,ye)||!1)?(Ye||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(T,gt,ye),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(T,gt,ye)),typeof K.componentDidUpdate=="function"&&(g.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof K.componentDidUpdate!="function"||le===p.memoizedProps&&Xe===p.memoizedState||(g.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||le===p.memoizedProps&&Xe===p.memoizedState||(g.flags|=1024),g.memoizedProps=T,g.memoizedState=gt),K.props=T,K.state=gt,K.context=ye,T=Oe):(typeof K.componentDidUpdate!="function"||le===p.memoizedProps&&Xe===p.memoizedState||(g.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||le===p.memoizedProps&&Xe===p.memoizedState||(g.flags|=1024),T=!1)}return b2(p,g,S,T,P,_)}function b2(p,g,S,T,_,P){TI(p,g);var K=(g.flags&128)!==0;if(!T&&!K)return _&&_k(g,S,!1),Uo(p,g,P);T=g.stateNode,Kj.current=g;var le=K&&typeof S.getDerivedStateFromError!="function"?null:T.render();return g.flags|=1,p!==null&&K?(g.child=$f(g,p.child,null,P),g.child=$f(g,null,le,P)):za(p,g,le,P),g.memoizedState=T.state,_&&_k(g,S,!0),g.child}function AI(p){var g=p.stateNode;g.pendingContext?kk(p,g.pendingContext,g.pendingContext!==g.context):g.context&&kk(p,g.context,!1),n2(p,g.containerInfo)}function $I(p,g,S,T,_){return Af(),Xx(_),g.flags|=256,za(p,g,S,T),g.child}var w2={dehydrated:null,treeContext:null,retryLane:0};function x2(p){return{baseLanes:p,cachePool:null,transitions:null}}function kI(p,g,S){var T=g.pendingProps,_=ar.current,P=!1,K=(g.flags&128)!==0,le;if((le=K)||(le=p!==null&&p.memoizedState===null?!1:(_&2)!==0),le?(P=!0,g.flags&=-129):(p===null||p.memoizedState!==null)&&(_|=1),Vn(ar,_&1),p===null)return Kx(g),p=g.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?(g.mode&1?p.data==="$!"?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(K=T.children,p=T.fallback,P?(T=g.mode,P=g.child,K={mode:"hidden",children:K},!(T&1)&&P!==null?(P.childLanes=0,P.pendingProps=K):P=oy(K,T,0,null),p=nc(p,T,S,null),P.return=g,p.return=g,P.sibling=p,g.child=P,g.child.memoizedState=x2(S),g.memoizedState=w2,p):S2(g,K));if(_=p.memoizedState,_!==null&&(le=_.dehydrated,le!==null))return Xj(p,g,K,T,le,_,S);if(P){P=T.fallback,K=g.mode,_=p.child,le=_.sibling;var ye={mode:"hidden",children:T.children};return!(K&1)&&g.child!==_?(T=g.child,T.childLanes=0,T.pendingProps=ye,g.deletions=null):(T=Mu(_,ye),T.subtreeFlags=_.subtreeFlags&14680064),le!==null?P=Mu(le,P):(P=nc(P,K,S,null),P.flags|=2),P.return=g,T.return=g,T.sibling=P,g.child=T,T=P,P=g.child,K=p.child.memoizedState,K=K===null?x2(S):{baseLanes:K.baseLanes|S,cachePool:null,transitions:K.transitions},P.memoizedState=K,P.childLanes=p.childLanes&~S,g.memoizedState=w2,T}return P=p.child,p=P.sibling,T=Mu(P,{mode:"visible",children:T.children}),!(g.mode&1)&&(T.lanes=S),T.return=g,T.sibling=null,p!==null&&(S=g.deletions,S===null?(g.deletions=[p],g.flags|=16):S.push(p)),g.child=T,g.memoizedState=null,T}function S2(p,g){return g=oy({mode:"visible",children:g},p.mode,0,null),g.return=p,p.child=g}function Kv(p,g,S,T){return T!==null&&Xx(T),$f(g,p.child,null,S),p=S2(g,g.pendingProps.children),p.flags|=2,g.memoizedState=null,p}function Xj(p,g,S,T,_,P,K){if(S)return g.flags&256?(g.flags&=-257,T=g2(Error(n(422))),Kv(p,g,K,T)):g.memoizedState!==null?(g.child=p.child,g.flags|=128,null):(P=T.fallback,_=g.mode,T=oy({mode:"visible",children:T.children},_,0,null),P=nc(P,_,K,null),P.flags|=2,T.return=g,P.return=g,T.sibling=P,g.child=T,g.mode&1&&$f(g,p.child,null,K),g.child.memoizedState=x2(K),g.memoizedState=w2,P);if(!(g.mode&1))return Kv(p,g,K,null);if(_.data==="$!"){if(T=_.nextSibling&&_.nextSibling.dataset,T)var le=T.dgst;return T=le,P=Error(n(419)),T=g2(P,T,void 0),Kv(p,g,K,T)}if(le=(K&p.childLanes)!==0,rs||le){if(T=Kr,T!==null){switch(K&-K){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(T.suspendedLanes|K)?0:_,_!==0&&_!==P.retryLane&&(P.retryLane=_,zo(p,_),_i(T,p,_,-1))}return B2(),T=g2(Error(n(421))),Kv(p,g,K,T)}return _.data==="$?"?(g.flags|=128,g.child=p.child,g=uH.bind(null,p),_._reactRetry=g,null):(p=P.treeContext,Is=Eu(_.nextSibling),ks=g,Qn=!0,Ai=null,p!==null&&(js[Hs++]=Bo,js[Hs++]=Lo,js[Hs++]=Gl,Bo=p.id,Lo=p.overflow,Gl=g),g=S2(g,T.children),g.flags|=4096,g)}function II(p,g,S){p.lanes|=g;var T=p.alternate;T!==null&&(T.lanes|=g),Zx(p.return,g,S)}function N2(p,g,S,T,_){var P=p.memoizedState;P===null?p.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:T,tail:S,tailMode:_}:(P.isBackwards=g,P.rendering=null,P.renderingStartTime=0,P.last=T,P.tail=S,P.tailMode=_)}function _I(p,g,S){var T=g.pendingProps,_=T.revealOrder,P=T.tail;if(za(p,g,T.children,S),T=ar.current,T&2)T=T&1|2,g.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=g.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&II(p,S,g);else if(p.tag===19)II(p,S,g);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===g)break e;for(;p.sibling===null;){if(p.return===null||p.return===g)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}T&=1}if(Vn(ar,T),!(g.mode&1))g.memoizedState=null;else switch(_){case"forwards":for(S=g.child,_=null;S!==null;)p=S.alternate,p!==null&&Wv(p)===null&&(_=S),S=S.sibling;S=_,S===null?(_=g.child,g.child=null):(_=S.sibling,S.sibling=null),N2(g,!1,_,S,P);break;case"backwards":for(S=null,_=g.child,g.child=null;_!==null;){if(p=_.alternate,p!==null&&Wv(p)===null){g.child=_;break}p=_.sibling,_.sibling=S,S=_,_=p}N2(g,!0,S,null,P);break;case"together":N2(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function Xv(p,g){!(g.mode&1)&&p!==null&&(p.alternate=null,g.alternate=null,g.flags|=2)}function Uo(p,g,S){if(p!==null&&(g.dependencies=p.dependencies),Jl|=g.lanes,!(S&g.childLanes))return null;if(p!==null&&g.child!==p.child)throw Error(n(153));if(g.child!==null){for(p=g.child,S=Mu(p,p.pendingProps),g.child=S,S.return=g;p.sibling!==null;)p=p.sibling,S=S.sibling=Mu(p,p.pendingProps),S.return=g;S.sibling=null}return g.child}function Yj(p,g,S){switch(g.tag){case 3:AI(g),Af();break;case 5:Hk(g);break;case 1:ns(g.type)&&Iv(g);break;case 4:n2(g,g.stateNode.containerInfo);break;case 10:var T=g.type._context,_=g.memoizedProps.value;Vn(Pv,T._currentValue),T._currentValue=_;break;case 13:if(T=g.memoizedState,T!==null)return T.dehydrated!==null?(Vn(ar,ar.current&1),g.flags|=128,null):S&g.child.childLanes?kI(p,g,S):(Vn(ar,ar.current&1),p=Uo(p,g,S),p!==null?p.sibling:null);Vn(ar,ar.current&1);break;case 19:if(T=(S&g.childLanes)!==0,p.flags&128){if(T)return _I(p,g,S);g.flags|=128}if(_=g.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Vn(ar,ar.current),T)break;return null;case 22:case 23:return g.lanes=0,EI(p,g,S)}return Uo(p,g,S)}var OI,C2,FI,RI;OI=function(p,g){for(var S=g.child;S!==null;){if(S.tag===5||S.tag===6)p.appendChild(S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===g)break;for(;S.sibling===null;){if(S.return===null||S.return===g)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},C2=function(){},FI=function(p,g,S,T){var _=p.memoizedProps;if(_!==T){p=g.stateNode,Yl(so.current);var P=null;switch(S){case"input":_=Ee(p,_),T=Ee(p,T),P=[];break;case"select":_=G({},_,{value:void 0}),T=G({},T,{value:void 0}),P=[];break;case"textarea":_=Je(p,_),T=Je(p,T),P=[];break;default:typeof _.onClick!="function"&&typeof T.onClick=="function"&&(p.onclick=Av)}U(S,T);var K;S=null;for(Oe in _)if(!T.hasOwnProperty(Oe)&&_.hasOwnProperty(Oe)&&_[Oe]!=null)if(Oe==="style"){var le=_[Oe];for(K in le)le.hasOwnProperty(K)&&(S||(S={}),S[K]="")}else Oe!=="dangerouslySetInnerHTML"&&Oe!=="children"&&Oe!=="suppressContentEditableWarning"&&Oe!=="suppressHydrationWarning"&&Oe!=="autoFocus"&&(a.hasOwnProperty(Oe)?P||(P=[]):(P=P||[]).push(Oe,null));for(Oe in T){var ye=T[Oe];if(le=_!=null?_[Oe]:void 0,T.hasOwnProperty(Oe)&&ye!==le&&(ye!=null||le!=null))if(Oe==="style")if(le){for(K in le)!le.hasOwnProperty(K)||ye&&ye.hasOwnProperty(K)||(S||(S={}),S[K]="");for(K in ye)ye.hasOwnProperty(K)&&le[K]!==ye[K]&&(S||(S={}),S[K]=ye[K])}else S||(P||(P=[]),P.push(Oe,S)),S=ye;else Oe==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,le=le?le.__html:void 0,ye!=null&&le!==ye&&(P=P||[]).push(Oe,ye)):Oe==="children"?typeof ye!="string"&&typeof ye!="number"||(P=P||[]).push(Oe,""+ye):Oe!=="suppressContentEditableWarning"&&Oe!=="suppressHydrationWarning"&&(a.hasOwnProperty(Oe)?(ye!=null&&Oe==="onScroll"&&Gn("scroll",p),P||le===ye||(P=[])):(P=P||[]).push(Oe,ye))}S&&(P=P||[]).push("style",S);var Oe=P;(g.updateQueue=Oe)&&(g.flags|=4)}},RI=function(p,g,S,T){S!==T&&(g.flags|=4)};function rh(p,g){if(!Qn)switch(p.tailMode){case"hidden":g=p.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?p.tail=null:S.sibling=null;break;case"collapsed":S=p.tail;for(var T=null;S!==null;)S.alternate!==null&&(T=S),S=S.sibling;T===null?g||p.tail===null?p.tail=null:p.tail.sibling=null:T.sibling=null}}function Ca(p){var g=p.alternate!==null&&p.alternate.child===p.child,S=0,T=0;if(g)for(var _=p.child;_!==null;)S|=_.lanes|_.childLanes,T|=_.subtreeFlags&14680064,T|=_.flags&14680064,_.return=p,_=_.sibling;else for(_=p.child;_!==null;)S|=_.lanes|_.childLanes,T|=_.subtreeFlags,T|=_.flags,_.return=p,_=_.sibling;return p.subtreeFlags|=T,p.childLanes=S,g}function Qj(p,g,S){var T=g.pendingProps;switch(Hx(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ca(g),null;case 1:return ns(g.type)&&kv(),Ca(g),null;case 3:return T=g.stateNode,_f(),Kn(ts),Kn(Sa),s2(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(p===null||p.child===null)&&(Rv(g)?g.flags|=4:p===null||p.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,Ai!==null&&(R2(Ai),Ai=null))),C2(p,g),Ca(g),null;case 5:r2(g);var _=Yl(Jp.current);if(S=g.type,p!==null&&g.stateNode!=null)FI(p,g,S,T,_),p.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!T){if(g.stateNode===null)throw Error(n(166));return Ca(g),null}if(p=Yl(so.current),Rv(g)){T=g.stateNode,S=g.type;var P=g.memoizedProps;switch(T[ao]=g,T[Gp]=P,p=(g.mode&1)!==0,S){case"dialog":Gn("cancel",T),Gn("close",T);break;case"iframe":case"object":case"embed":Gn("load",T);break;case"video":case"audio":for(_=0;_<Vp.length;_++)Gn(Vp[_],T);break;case"source":Gn("error",T);break;case"img":case"image":case"link":Gn("error",T),Gn("load",T);break;case"details":Gn("toggle",T);break;case"input":Q(T,P),Gn("invalid",T);break;case"select":T._wrapperState={wasMultiple:!!P.multiple},Gn("invalid",T);break;case"textarea":re(T,P),Gn("invalid",T)}U(S,P),_=null;for(var K in P)if(P.hasOwnProperty(K)){var le=P[K];K==="children"?typeof le=="string"?T.textContent!==le&&(P.suppressHydrationWarning!==!0&&Dv(T.textContent,le,p),_=["children",le]):typeof le=="number"&&T.textContent!==""+le&&(P.suppressHydrationWarning!==!0&&Dv(T.textContent,le,p),_=["children",""+le]):a.hasOwnProperty(K)&&le!=null&&K==="onScroll"&&Gn("scroll",T)}switch(S){case"input":pe(T),xe(T,P,!0);break;case"textarea":pe(T),Ce(T);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(T.onclick=Av)}T=_,g.updateQueue=T,T!==null&&(g.flags|=4)}else{K=_.nodeType===9?_:_.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=Ae(S)),p==="http://www.w3.org/1999/xhtml"?S==="script"?(p=K.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof T.is=="string"?p=K.createElement(S,{is:T.is}):(p=K.createElement(S),S==="select"&&(K=p,T.multiple?K.multiple=!0:T.size&&(K.size=T.size))):p=K.createElementNS(p,S),p[ao]=g,p[Gp]=T,OI(p,g,!1,!1),g.stateNode=p;e:{switch(K=fe(S,T),S){case"dialog":Gn("cancel",p),Gn("close",p),_=T;break;case"iframe":case"object":case"embed":Gn("load",p),_=T;break;case"video":case"audio":for(_=0;_<Vp.length;_++)Gn(Vp[_],p);_=T;break;case"source":Gn("error",p),_=T;break;case"img":case"image":case"link":Gn("error",p),Gn("load",p),_=T;break;case"details":Gn("toggle",p),_=T;break;case"input":Q(p,T),_=Ee(p,T),Gn("invalid",p);break;case"option":_=T;break;case"select":p._wrapperState={wasMultiple:!!T.multiple},_=G({},T,{value:void 0}),Gn("invalid",p);break;case"textarea":re(p,T),_=Je(p,T),Gn("invalid",p);break;default:_=T}U(S,_),le=_;for(P in le)if(le.hasOwnProperty(P)){var ye=le[P];P==="style"?Nt(p,ye):P==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,ye!=null&&Ze(p,ye)):P==="children"?typeof ye=="string"?(S!=="textarea"||ye!=="")&&je(p,ye):typeof ye=="number"&&je(p,""+ye):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(a.hasOwnProperty(P)?ye!=null&&P==="onScroll"&&Gn("scroll",p):ye!=null&&w(p,P,ye,K))}switch(S){case"input":pe(p),xe(p,T,!1);break;case"textarea":pe(p),Ce(p);break;case"option":T.value!=null&&p.setAttribute("value",""+Z(T.value));break;case"select":p.multiple=!!T.multiple,P=T.value,P!=null?He(p,!!T.multiple,P,!1):T.defaultValue!=null&&He(p,!!T.multiple,T.defaultValue,!0);break;default:typeof _.onClick=="function"&&(p.onclick=Av)}switch(S){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}}T&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return Ca(g),null;case 6:if(p&&g.stateNode!=null)RI(p,g,p.memoizedProps,T);else{if(typeof T!="string"&&g.stateNode===null)throw Error(n(166));if(S=Yl(Jp.current),Yl(so.current),Rv(g)){if(T=g.stateNode,S=g.memoizedProps,T[ao]=g,(P=T.nodeValue!==S)&&(p=ks,p!==null))switch(p.tag){case 3:Dv(T.nodeValue,S,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&Dv(T.nodeValue,S,(p.mode&1)!==0)}P&&(g.flags|=4)}else T=(S.nodeType===9?S:S.ownerDocument).createTextNode(T),T[ao]=g,g.stateNode=T}return Ca(g),null;case 13:if(Kn(ar),T=g.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Qn&&Is!==null&&g.mode&1&&!(g.flags&128))Bk(),Af(),g.flags|=98560,P=!1;else if(P=Rv(g),T!==null&&T.dehydrated!==null){if(p===null){if(!P)throw Error(n(318));if(P=g.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(n(317));P[ao]=g}else Af(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;Ca(g),P=!1}else Ai!==null&&(R2(Ai),Ai=null),P=!0;if(!P)return g.flags&65536?g:null}return g.flags&128?(g.lanes=S,g):(T=T!==null,T!==(p!==null&&p.memoizedState!==null)&&T&&(g.child.flags|=8192,g.mode&1&&(p===null||ar.current&1?Rr===0&&(Rr=3):B2())),g.updateQueue!==null&&(g.flags|=4),Ca(g),null);case 4:return _f(),C2(p,g),p===null&&jp(g.stateNode.containerInfo),Ca(g),null;case 10:return Jx(g.type._context),Ca(g),null;case 17:return ns(g.type)&&kv(),Ca(g),null;case 19:if(Kn(ar),P=g.memoizedState,P===null)return Ca(g),null;if(T=(g.flags&128)!==0,K=P.rendering,K===null)if(T)rh(P,!1);else{if(Rr!==0||p!==null&&p.flags&128)for(p=g.child;p!==null;){if(K=Wv(p),K!==null){for(g.flags|=128,rh(P,!1),T=K.updateQueue,T!==null&&(g.updateQueue=T,g.flags|=4),g.subtreeFlags=0,T=S,S=g.child;S!==null;)P=S,p=T,P.flags&=14680066,K=P.alternate,K===null?(P.childLanes=0,P.lanes=p,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=K.childLanes,P.lanes=K.lanes,P.child=K.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=K.memoizedProps,P.memoizedState=K.memoizedState,P.updateQueue=K.updateQueue,P.type=K.type,p=K.dependencies,P.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),S=S.sibling;return Vn(ar,ar.current&1|2),g.child}p=p.sibling}P.tail!==null&&Rt()>Mf&&(g.flags|=128,T=!0,rh(P,!1),g.lanes=4194304)}else{if(!T)if(p=Wv(K),p!==null){if(g.flags|=128,T=!0,S=p.updateQueue,S!==null&&(g.updateQueue=S,g.flags|=4),rh(P,!0),P.tail===null&&P.tailMode==="hidden"&&!K.alternate&&!Qn)return Ca(g),null}else 2*Rt()-P.renderingStartTime>Mf&&S!==1073741824&&(g.flags|=128,T=!0,rh(P,!1),g.lanes=4194304);P.isBackwards?(K.sibling=g.child,g.child=K):(S=P.last,S!==null?S.sibling=K:g.child=K,P.last=K)}return P.tail!==null?(g=P.tail,P.rendering=g,P.tail=g.sibling,P.renderingStartTime=Rt(),g.sibling=null,S=ar.current,Vn(ar,T?S&1|2:S&1),g):(Ca(g),null);case 22:case 23:return P2(),T=g.memoizedState!==null,p!==null&&p.memoizedState!==null!==T&&(g.flags|=8192),T&&g.mode&1?_s&1073741824&&(Ca(g),g.subtreeFlags&6&&(g.flags|=8192)):Ca(g),null;case 24:return null;case 25:return null}throw Error(n(156,g.tag))}function Jj(p,g){switch(Hx(g),g.tag){case 1:return ns(g.type)&&kv(),p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 3:return _f(),Kn(ts),Kn(Sa),s2(),p=g.flags,p&65536&&!(p&128)?(g.flags=p&-65537|128,g):null;case 5:return r2(g),null;case 13:if(Kn(ar),p=g.memoizedState,p!==null&&p.dehydrated!==null){if(g.alternate===null)throw Error(n(340));Af()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 19:return Kn(ar),null;case 4:return _f(),null;case 10:return Jx(g.type._context),null;case 22:case 23:return P2(),null;case 24:return null;default:return null}}var Yv=!1,Ea=!1,Zj=typeof WeakSet=="function"?WeakSet:Set,dt=null;function Ff(p,g){var S=p.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(T){cr(p,g,T)}else S.current=null}function E2(p,g,S){try{S()}catch(T){cr(p,g,T)}}var MI=!1;function eH(p,g){if(Px=gv,p=hk(),$x(p)){if("selectionStart"in p)var S={start:p.selectionStart,end:p.selectionEnd};else e:{S=(S=p.ownerDocument)&&S.defaultView||window;var T=S.getSelection&&S.getSelection();if(T&&T.rangeCount!==0){S=T.anchorNode;var _=T.anchorOffset,P=T.focusNode;T=T.focusOffset;try{S.nodeType,P.nodeType}catch{S=null;break e}var K=0,le=-1,ye=-1,Oe=0,Ye=0,et=p,Xe=null;t:for(;;){for(var ct;et!==S||_!==0&&et.nodeType!==3||(le=K+_),et!==P||T!==0&&et.nodeType!==3||(ye=K+T),et.nodeType===3&&(K+=et.nodeValue.length),(ct=et.firstChild)!==null;)Xe=et,et=ct;for(;;){if(et===p)break t;if(Xe===S&&++Oe===_&&(le=K),Xe===P&&++Ye===T&&(ye=K),(ct=et.nextSibling)!==null)break;et=Xe,Xe=et.parentNode}et=ct}S=le===-1||ye===-1?null:{start:le,end:ye}}else S=null}S=S||{start:0,end:0}}else S=null;for(Bx={focusedElem:p,selectionRange:S},gv=!1,dt=g;dt!==null;)if(g=dt,p=g.child,(g.subtreeFlags&1028)!==0&&p!==null)p.return=g,dt=p;else for(;dt!==null;){g=dt;try{var gt=g.alternate;if(g.flags&1024)switch(g.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var yt=gt.memoizedProps,vr=gt.memoizedState,De=g.stateNode,Se=De.getSnapshotBeforeUpdate(g.elementType===g.type?yt:$i(g.type,yt),vr);De.__reactInternalSnapshotBeforeUpdate=Se}break;case 3:var ke=g.stateNode.containerInfo;ke.nodeType===1?ke.textContent="":ke.nodeType===9&&ke.documentElement&&ke.removeChild(ke.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(at){cr(g,g.return,at)}if(p=g.sibling,p!==null){p.return=g.return,dt=p;break}dt=g.return}return gt=MI,MI=!1,gt}function ah(p,g,S){var T=g.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var _=T=T.next;do{if((_.tag&p)===p){var P=_.destroy;_.destroy=void 0,P!==void 0&&E2(g,S,P)}_=_.next}while(_!==T)}}function Qv(p,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&p)===p){var T=S.create;S.destroy=T()}S=S.next}while(S!==g)}}function T2(p){var g=p.ref;if(g!==null){var S=p.stateNode;switch(p.tag){case 5:p=S;break;default:p=S}typeof g=="function"?g(p):g.current=p}}function PI(p){var g=p.alternate;g!==null&&(p.alternate=null,PI(g)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(g=p.stateNode,g!==null&&(delete g[ao],delete g[Gp],delete g[Ux],delete g[Mj],delete g[Pj])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function BI(p){return p.tag===5||p.tag===3||p.tag===4}function LI(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||BI(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function D2(p,g,S){var T=p.tag;if(T===5||T===6)p=p.stateNode,g?S.nodeType===8?S.parentNode.insertBefore(p,g):S.insertBefore(p,g):(S.nodeType===8?(g=S.parentNode,g.insertBefore(p,S)):(g=S,g.appendChild(p)),S=S._reactRootContainer,S!=null||g.onclick!==null||(g.onclick=Av));else if(T!==4&&(p=p.child,p!==null))for(D2(p,g,S),p=p.sibling;p!==null;)D2(p,g,S),p=p.sibling}function A2(p,g,S){var T=p.tag;if(T===5||T===6)p=p.stateNode,g?S.insertBefore(p,g):S.appendChild(p);else if(T!==4&&(p=p.child,p!==null))for(A2(p,g,S),p=p.sibling;p!==null;)A2(p,g,S),p=p.sibling}var ua=null,ki=!1;function Iu(p,g,S){for(S=S.child;S!==null;)zI(p,g,S),S=S.sibling}function zI(p,g,S){if(ro&&typeof ro.onCommitFiberUnmount=="function")try{ro.onCommitFiberUnmount(cv,S)}catch{}switch(S.tag){case 5:Ea||Ff(S,g);case 6:var T=ua,_=ki;ua=null,Iu(p,g,S),ua=T,ki=_,ua!==null&&(ki?(p=ua,S=S.stateNode,p.nodeType===8?p.parentNode.removeChild(S):p.removeChild(S)):ua.removeChild(S.stateNode));break;case 18:ua!==null&&(ki?(p=ua,S=S.stateNode,p.nodeType===8?Wx(p.parentNode,S):p.nodeType===1&&Wx(p,S),Mp(p)):Wx(ua,S.stateNode));break;case 4:T=ua,_=ki,ua=S.stateNode.containerInfo,ki=!0,Iu(p,g,S),ua=T,ki=_;break;case 0:case 11:case 14:case 15:if(!Ea&&(T=S.updateQueue,T!==null&&(T=T.lastEffect,T!==null))){_=T=T.next;do{var P=_,K=P.destroy;P=P.tag,K!==void 0&&(P&2||P&4)&&E2(S,g,K),_=_.next}while(_!==T)}Iu(p,g,S);break;case 1:if(!Ea&&(Ff(S,g),T=S.stateNode,typeof T.componentWillUnmount=="function"))try{T.props=S.memoizedProps,T.state=S.memoizedState,T.componentWillUnmount()}catch(le){cr(S,g,le)}Iu(p,g,S);break;case 21:Iu(p,g,S);break;case 22:S.mode&1?(Ea=(T=Ea)||S.memoizedState!==null,Iu(p,g,S),Ea=T):Iu(p,g,S);break;default:Iu(p,g,S)}}function WI(p){var g=p.updateQueue;if(g!==null){p.updateQueue=null;var S=p.stateNode;S===null&&(S=p.stateNode=new Zj),g.forEach(function(T){var _=lH.bind(null,p,T);S.has(T)||(S.add(T),T.then(_,_))})}}function Ii(p,g){var S=g.deletions;if(S!==null)for(var T=0;T<S.length;T++){var _=S[T];try{var P=p,K=g,le=K;e:for(;le!==null;){switch(le.tag){case 5:ua=le.stateNode,ki=!1;break e;case 3:ua=le.stateNode.containerInfo,ki=!0;break e;case 4:ua=le.stateNode.containerInfo,ki=!0;break e}le=le.return}if(ua===null)throw Error(n(160));zI(P,K,_),ua=null,ki=!1;var ye=_.alternate;ye!==null&&(ye.return=null),_.return=null}catch(Oe){cr(_,g,Oe)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)UI(g,p),g=g.sibling}function UI(p,g){var S=p.alternate,T=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(Ii(g,p),oo(p),T&4){try{ah(3,p,p.return),Qv(3,p)}catch(yt){cr(p,p.return,yt)}try{ah(5,p,p.return)}catch(yt){cr(p,p.return,yt)}}break;case 1:Ii(g,p),oo(p),T&512&&S!==null&&Ff(S,S.return);break;case 5:if(Ii(g,p),oo(p),T&512&&S!==null&&Ff(S,S.return),p.flags&32){var _=p.stateNode;try{je(_,"")}catch(yt){cr(p,p.return,yt)}}if(T&4&&(_=p.stateNode,_!=null)){var P=p.memoizedProps,K=S!==null?S.memoizedProps:P,le=p.type,ye=p.updateQueue;if(p.updateQueue=null,ye!==null)try{le==="input"&&P.type==="radio"&&P.name!=null&&se(_,P),fe(le,K);var Oe=fe(le,P);for(K=0;K<ye.length;K+=2){var Ye=ye[K],et=ye[K+1];Ye==="style"?Nt(_,et):Ye==="dangerouslySetInnerHTML"?Ze(_,et):Ye==="children"?je(_,et):w(_,Ye,et,Oe)}switch(le){case"input":ve(_,P);break;case"textarea":ce(_,P);break;case"select":var Xe=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!P.multiple;var ct=P.value;ct!=null?He(_,!!P.multiple,ct,!1):Xe!==!!P.multiple&&(P.defaultValue!=null?He(_,!!P.multiple,P.defaultValue,!0):He(_,!!P.multiple,P.multiple?[]:"",!1))}_[Gp]=P}catch(yt){cr(p,p.return,yt)}}break;case 6:if(Ii(g,p),oo(p),T&4){if(p.stateNode===null)throw Error(n(162));_=p.stateNode,P=p.memoizedProps;try{_.nodeValue=P}catch(yt){cr(p,p.return,yt)}}break;case 3:if(Ii(g,p),oo(p),T&4&&S!==null&&S.memoizedState.isDehydrated)try{Mp(g.containerInfo)}catch(yt){cr(p,p.return,yt)}break;case 4:Ii(g,p),oo(p);break;case 13:Ii(g,p),oo(p),_=p.child,_.flags&8192&&(P=_.memoizedState!==null,_.stateNode.isHidden=P,!P||_.alternate!==null&&_.alternate.memoizedState!==null||(I2=Rt())),T&4&&WI(p);break;case 22:if(Ye=S!==null&&S.memoizedState!==null,p.mode&1?(Ea=(Oe=Ea)||Ye,Ii(g,p),Ea=Oe):Ii(g,p),oo(p),T&8192){if(Oe=p.memoizedState!==null,(p.stateNode.isHidden=Oe)&&!Ye&&p.mode&1)for(dt=p,Ye=p.child;Ye!==null;){for(et=dt=Ye;dt!==null;){switch(Xe=dt,ct=Xe.child,Xe.tag){case 0:case 11:case 14:case 15:ah(4,Xe,Xe.return);break;case 1:Ff(Xe,Xe.return);var gt=Xe.stateNode;if(typeof gt.componentWillUnmount=="function"){T=Xe,S=Xe.return;try{g=T,gt.props=g.memoizedProps,gt.state=g.memoizedState,gt.componentWillUnmount()}catch(yt){cr(T,S,yt)}}break;case 5:Ff(Xe,Xe.return);break;case 22:if(Xe.memoizedState!==null){jI(et);continue}}ct!==null?(ct.return=Xe,dt=ct):jI(et)}Ye=Ye.sibling}e:for(Ye=null,et=p;;){if(et.tag===5){if(Ye===null){Ye=et;try{_=et.stateNode,Oe?(P=_.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(le=et.stateNode,ye=et.memoizedProps.style,K=ye!=null&&ye.hasOwnProperty("display")?ye.display:null,le.style.display=Xt("display",K))}catch(yt){cr(p,p.return,yt)}}}else if(et.tag===6){if(Ye===null)try{et.stateNode.nodeValue=Oe?"":et.memoizedProps}catch(yt){cr(p,p.return,yt)}}else if((et.tag!==22&&et.tag!==23||et.memoizedState===null||et===p)&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===p)break e;for(;et.sibling===null;){if(et.return===null||et.return===p)break e;Ye===et&&(Ye=null),et=et.return}Ye===et&&(Ye=null),et.sibling.return=et.return,et=et.sibling}}break;case 19:Ii(g,p),oo(p),T&4&&WI(p);break;case 21:break;default:Ii(g,p),oo(p)}}function oo(p){var g=p.flags;if(g&2){try{e:{for(var S=p.return;S!==null;){if(BI(S)){var T=S;break e}S=S.return}throw Error(n(160))}switch(T.tag){case 5:var _=T.stateNode;T.flags&32&&(je(_,""),T.flags&=-33);var P=LI(p);A2(p,P,_);break;case 3:case 4:var K=T.stateNode.containerInfo,le=LI(p);D2(p,le,K);break;default:throw Error(n(161))}}catch(ye){cr(p,p.return,ye)}p.flags&=-3}g&4096&&(p.flags&=-4097)}function tH(p,g,S){dt=p,qI(p)}function qI(p,g,S){for(var T=(p.mode&1)!==0;dt!==null;){var _=dt,P=_.child;if(_.tag===22&&T){var K=_.memoizedState!==null||Yv;if(!K){var le=_.alternate,ye=le!==null&&le.memoizedState!==null||Ea;le=Yv;var Oe=Ea;if(Yv=K,(Ea=ye)&&!Oe)for(dt=_;dt!==null;)K=dt,ye=K.child,K.tag===22&&K.memoizedState!==null?HI(_):ye!==null?(ye.return=K,dt=ye):HI(_);for(;P!==null;)dt=P,qI(P),P=P.sibling;dt=_,Yv=le,Ea=Oe}VI(p)}else _.subtreeFlags&8772&&P!==null?(P.return=_,dt=P):VI(p)}}function VI(p){for(;dt!==null;){var g=dt;if(g.flags&8772){var S=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:Ea||Qv(5,g);break;case 1:var T=g.stateNode;if(g.flags&4&&!Ea)if(S===null)T.componentDidMount();else{var _=g.elementType===g.type?S.memoizedProps:$i(g.type,S.memoizedProps);T.componentDidUpdate(_,S.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var P=g.updateQueue;P!==null&&jk(g,P,T);break;case 3:var K=g.updateQueue;if(K!==null){if(S=null,g.child!==null)switch(g.child.tag){case 5:S=g.child.stateNode;break;case 1:S=g.child.stateNode}jk(g,K,S)}break;case 5:var le=g.stateNode;if(S===null&&g.flags&4){S=le;var ye=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":ye.autoFocus&&S.focus();break;case"img":ye.src&&(S.src=ye.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var Oe=g.alternate;if(Oe!==null){var Ye=Oe.memoizedState;if(Ye!==null){var et=Ye.dehydrated;et!==null&&Mp(et)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ea||g.flags&512&&T2(g)}catch(Xe){cr(g,g.return,Xe)}}if(g===p){dt=null;break}if(S=g.sibling,S!==null){S.return=g.return,dt=S;break}dt=g.return}}function jI(p){for(;dt!==null;){var g=dt;if(g===p){dt=null;break}var S=g.sibling;if(S!==null){S.return=g.return,dt=S;break}dt=g.return}}function HI(p){for(;dt!==null;){var g=dt;try{switch(g.tag){case 0:case 11:case 15:var S=g.return;try{Qv(4,g)}catch(ye){cr(g,S,ye)}break;case 1:var T=g.stateNode;if(typeof T.componentDidMount=="function"){var _=g.return;try{T.componentDidMount()}catch(ye){cr(g,_,ye)}}var P=g.return;try{T2(g)}catch(ye){cr(g,P,ye)}break;case 5:var K=g.return;try{T2(g)}catch(ye){cr(g,K,ye)}}}catch(ye){cr(g,g.return,ye)}if(g===p){dt=null;break}var le=g.sibling;if(le!==null){le.return=g.return,dt=le;break}dt=g.return}}var nH=Math.ceil,Jv=N.ReactCurrentDispatcher,$2=N.ReactCurrentOwner,Xs=N.ReactCurrentBatchConfig,xn=0,Kr=null,Nr=null,la=0,_s=0,Rf=Tu(0),Rr=0,sh=null,Jl=0,Zv=0,k2=0,ih=null,as=null,I2=0,Mf=1/0,qo=null,ey=!1,_2=null,_u=null,ty=!1,Ou=null,ny=0,oh=0,O2=null,ry=-1,ay=0;function Wa(){return xn&6?Rt():ry!==-1?ry:ry=Rt()}function Fu(p){return p.mode&1?xn&2&&la!==0?la&-la:Lj.transition!==null?(ay===0&&(ay=L$()),ay):(p=In,p!==0||(p=window.event,p=p===void 0?16:K$(p.type)),p):1}function _i(p,g,S,T){if(50<oh)throw oh=0,O2=null,Error(n(185));Ip(p,S,T),(!(xn&2)||p!==Kr)&&(p===Kr&&(!(xn&2)&&(Zv|=S),Rr===4&&Ru(p,la)),ss(p,T),S===1&&xn===0&&!(g.mode&1)&&(Mf=Rt()+500,_v&&Au()))}function ss(p,g){var S=p.callbackNode;L9(p,g);var T=pv(p,p===Kr?la:0);if(T===0)S!==null&&lv(S),p.callbackNode=null,p.callbackPriority=0;else if(g=T&-T,p.callbackPriority!==g){if(S!=null&&lv(S),g===1)p.tag===0?Bj(KI.bind(null,p)):Ok(KI.bind(null,p)),Fj(function(){!(xn&6)&&Au()}),S=null;else{switch(z$(T)){case 1:S=$p;break;case 4:S=Vl;break;case 16:S=no;break;case 536870912:S=B$;break;default:S=no}S=n_(S,GI.bind(null,p))}p.callbackPriority=g,p.callbackNode=S}}function GI(p,g){if(ry=-1,ay=0,xn&6)throw Error(n(327));var S=p.callbackNode;if(Pf()&&p.callbackNode!==S)return null;var T=pv(p,p===Kr?la:0);if(T===0)return null;if(T&30||T&p.expiredLanes||g)g=sy(p,T);else{g=T;var _=xn;xn|=2;var P=YI();(Kr!==p||la!==g)&&(qo=null,Mf=Rt()+500,ec(p,g));do try{sH();break}catch(le){XI(p,le)}while(!0);Qx(),Jv.current=P,xn=_,Nr!==null?g=0:(Kr=null,la=0,g=Rr)}if(g!==0){if(g===2&&(_=px(p),_!==0&&(T=_,g=F2(p,_))),g===1)throw S=sh,ec(p,0),Ru(p,T),ss(p,Rt()),S;if(g===6)Ru(p,T);else{if(_=p.current.alternate,!(T&30)&&!rH(_)&&(g=sy(p,T),g===2&&(P=px(p),P!==0&&(T=P,g=F2(p,P))),g===1))throw S=sh,ec(p,0),Ru(p,T),ss(p,Rt()),S;switch(p.finishedWork=_,p.finishedLanes=T,g){case 0:case 1:throw Error(n(345));case 2:tc(p,as,qo);break;case 3:if(Ru(p,T),(T&130023424)===T&&(g=I2+500-Rt(),10<g)){if(pv(p,0)!==0)break;if(_=p.suspendedLanes,(_&T)!==T){Wa(),p.pingedLanes|=p.suspendedLanes&_;break}p.timeoutHandle=zx(tc.bind(null,p,as,qo),g);break}tc(p,as,qo);break;case 4:if(Ru(p,T),(T&4194240)===T)break;for(g=p.eventTimes,_=-1;0<T;){var K=31-Ti(T);P=1<<K,K=g[K],K>_&&(_=K),T&=~P}if(T=_,T=Rt()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*nH(T/1960))-T,10<T){p.timeoutHandle=zx(tc.bind(null,p,as,qo),T);break}tc(p,as,qo);break;case 5:tc(p,as,qo);break;default:throw Error(n(329))}}}return ss(p,Rt()),p.callbackNode===S?GI.bind(null,p):null}function F2(p,g){var S=ih;return p.current.memoizedState.isDehydrated&&(ec(p,g).flags|=256),p=sy(p,g),p!==2&&(g=as,as=S,g!==null&&R2(g)),p}function R2(p){as===null?as=p:as.push.apply(as,p)}function rH(p){for(var g=p;;){if(g.flags&16384){var S=g.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var T=0;T<S.length;T++){var _=S[T],P=_.getSnapshot;_=_.value;try{if(!Di(P(),_))return!1}catch{return!1}}}if(S=g.child,g.subtreeFlags&16384&&S!==null)S.return=g,g=S;else{if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ru(p,g){for(g&=~k2,g&=~Zv,p.suspendedLanes|=g,p.pingedLanes&=~g,p=p.expirationTimes;0<g;){var S=31-Ti(g),T=1<<S;p[S]=-1,g&=~T}}function KI(p){if(xn&6)throw Error(n(327));Pf();var g=pv(p,0);if(!(g&1))return ss(p,Rt()),null;var S=sy(p,g);if(p.tag!==0&&S===2){var T=px(p);T!==0&&(g=T,S=F2(p,T))}if(S===1)throw S=sh,ec(p,0),Ru(p,g),ss(p,Rt()),S;if(S===6)throw Error(n(345));return p.finishedWork=p.current.alternate,p.finishedLanes=g,tc(p,as,qo),ss(p,Rt()),null}function M2(p,g){var S=xn;xn|=1;try{return p(g)}finally{xn=S,xn===0&&(Mf=Rt()+500,_v&&Au())}}function Zl(p){Ou!==null&&Ou.tag===0&&!(xn&6)&&Pf();var g=xn;xn|=1;var S=Xs.transition,T=In;try{if(Xs.transition=null,In=1,p)return p()}finally{In=T,Xs.transition=S,xn=g,!(xn&6)&&Au()}}function P2(){_s=Rf.current,Kn(Rf)}function ec(p,g){p.finishedWork=null,p.finishedLanes=0;var S=p.timeoutHandle;if(S!==-1&&(p.timeoutHandle=-1,Oj(S)),Nr!==null)for(S=Nr.return;S!==null;){var T=S;switch(Hx(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&kv();break;case 3:_f(),Kn(ts),Kn(Sa),s2();break;case 5:r2(T);break;case 4:_f();break;case 13:Kn(ar);break;case 19:Kn(ar);break;case 10:Jx(T.type._context);break;case 22:case 23:P2()}S=S.return}if(Kr=p,Nr=p=Mu(p.current,null),la=_s=g,Rr=0,sh=null,k2=Zv=Jl=0,as=ih=null,Xl!==null){for(g=0;g<Xl.length;g++)if(S=Xl[g],T=S.interleaved,T!==null){S.interleaved=null;var _=T.next,P=S.pending;if(P!==null){var K=P.next;P.next=_,T.next=K}S.pending=T}Xl=null}return p}function XI(p,g){do{var S=Nr;try{if(Qx(),Uv.current=Hv,qv){for(var T=sr.memoizedState;T!==null;){var _=T.queue;_!==null&&(_.pending=null),T=T.next}qv=!1}if(Ql=0,Gr=Fr=sr=null,Zp=!1,eh=0,$2.current=null,S===null||S.return===null){Rr=1,sh=g,Nr=null;break}e:{var P=p,K=S.return,le=S,ye=g;if(g=la,le.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Oe=ye,Ye=le,et=Ye.tag;if(!(Ye.mode&1)&&(et===0||et===11||et===15)){var Xe=Ye.alternate;Xe?(Ye.updateQueue=Xe.updateQueue,Ye.memoizedState=Xe.memoizedState,Ye.lanes=Xe.lanes):(Ye.updateQueue=null,Ye.memoizedState=null)}var ct=wI(K);if(ct!==null){ct.flags&=-257,xI(ct,K,le,P,g),ct.mode&1&&bI(P,Oe,g),g=ct,ye=Oe;var gt=g.updateQueue;if(gt===null){var yt=new Set;yt.add(ye),g.updateQueue=yt}else gt.add(ye);break e}else{if(!(g&1)){bI(P,Oe,g),B2();break e}ye=Error(n(426))}}else if(Qn&&le.mode&1){var vr=wI(K);if(vr!==null){!(vr.flags&65536)&&(vr.flags|=256),xI(vr,K,le,P,g),Xx(Of(ye,le));break e}}P=ye=Of(ye,le),Rr!==4&&(Rr=2),ih===null?ih=[P]:ih.push(P),P=K;do{switch(P.tag){case 3:P.flags|=65536,g&=-g,P.lanes|=g;var De=vI(P,ye,g);Vk(P,De);break e;case 1:le=ye;var Se=P.type,ke=P.stateNode;if(!(P.flags&128)&&(typeof Se.getDerivedStateFromError=="function"||ke!==null&&typeof ke.componentDidCatch=="function"&&(_u===null||!_u.has(ke)))){P.flags|=65536,g&=-g,P.lanes|=g;var at=yI(P,le,g);Vk(P,at);break e}}P=P.return}while(P!==null)}JI(S)}catch(xt){g=xt,Nr===S&&S!==null&&(Nr=S=S.return);continue}break}while(!0)}function YI(){var p=Jv.current;return Jv.current=Hv,p===null?Hv:p}function B2(){(Rr===0||Rr===3||Rr===2)&&(Rr=4),Kr===null||!(Jl&268435455)&&!(Zv&268435455)||Ru(Kr,la)}function sy(p,g){var S=xn;xn|=2;var T=YI();(Kr!==p||la!==g)&&(qo=null,ec(p,g));do try{aH();break}catch(_){XI(p,_)}while(!0);if(Qx(),xn=S,Jv.current=T,Nr!==null)throw Error(n(261));return Kr=null,la=0,Rr}function aH(){for(;Nr!==null;)QI(Nr)}function sH(){for(;Nr!==null&&!fx();)QI(Nr)}function QI(p){var g=t_(p.alternate,p,_s);p.memoizedProps=p.pendingProps,g===null?JI(p):Nr=g,$2.current=null}function JI(p){var g=p;do{var S=g.alternate;if(p=g.return,g.flags&32768){if(S=Jj(S,g),S!==null){S.flags&=32767,Nr=S;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Rr=6,Nr=null;return}}else if(S=Qj(S,g,_s),S!==null){Nr=S;return}if(g=g.sibling,g!==null){Nr=g;return}Nr=g=p}while(g!==null);Rr===0&&(Rr=5)}function tc(p,g,S){var T=In,_=Xs.transition;try{Xs.transition=null,In=1,iH(p,g,S,T)}finally{Xs.transition=_,In=T}return null}function iH(p,g,S,T){do Pf();while(Ou!==null);if(xn&6)throw Error(n(327));S=p.finishedWork;var _=p.finishedLanes;if(S===null)return null;if(p.finishedWork=null,p.finishedLanes=0,S===p.current)throw Error(n(177));p.callbackNode=null,p.callbackPriority=0;var P=S.lanes|S.childLanes;if(z9(p,P),p===Kr&&(Nr=Kr=null,la=0),!(S.subtreeFlags&2064)&&!(S.flags&2064)||ty||(ty=!0,n_(no,function(){return Pf(),null})),P=(S.flags&15990)!==0,S.subtreeFlags&15990||P){P=Xs.transition,Xs.transition=null;var K=In;In=1;var le=xn;xn|=4,$2.current=null,eH(p,S),UI(S,p),Tj(Bx),gv=!!Px,Bx=Px=null,p.current=S,tH(S),ql(),xn=le,In=K,Xs.transition=P}else p.current=S;if(ty&&(ty=!1,Ou=p,ny=_),P=p.pendingLanes,P===0&&(_u=null),F9(S.stateNode),ss(p,Rt()),g!==null)for(T=p.onRecoverableError,S=0;S<g.length;S++)_=g[S],T(_.value,{componentStack:_.stack,digest:_.digest});if(ey)throw ey=!1,p=_2,_2=null,p;return ny&1&&p.tag!==0&&Pf(),P=p.pendingLanes,P&1?p===O2?oh++:(oh=0,O2=p):oh=0,Au(),null}function Pf(){if(Ou!==null){var p=z$(ny),g=Xs.transition,S=In;try{if(Xs.transition=null,In=16>p?16:p,Ou===null)var T=!1;else{if(p=Ou,Ou=null,ny=0,xn&6)throw Error(n(331));var _=xn;for(xn|=4,dt=p.current;dt!==null;){var P=dt,K=P.child;if(dt.flags&16){var le=P.deletions;if(le!==null){for(var ye=0;ye<le.length;ye++){var Oe=le[ye];for(dt=Oe;dt!==null;){var Ye=dt;switch(Ye.tag){case 0:case 11:case 15:ah(8,Ye,P)}var et=Ye.child;if(et!==null)et.return=Ye,dt=et;else for(;dt!==null;){Ye=dt;var Xe=Ye.sibling,ct=Ye.return;if(PI(Ye),Ye===Oe){dt=null;break}if(Xe!==null){Xe.return=ct,dt=Xe;break}dt=ct}}}var gt=P.alternate;if(gt!==null){var yt=gt.child;if(yt!==null){gt.child=null;do{var vr=yt.sibling;yt.sibling=null,yt=vr}while(yt!==null)}}dt=P}}if(P.subtreeFlags&2064&&K!==null)K.return=P,dt=K;else e:for(;dt!==null;){if(P=dt,P.flags&2048)switch(P.tag){case 0:case 11:case 15:ah(9,P,P.return)}var De=P.sibling;if(De!==null){De.return=P.return,dt=De;break e}dt=P.return}}var Se=p.current;for(dt=Se;dt!==null;){K=dt;var ke=K.child;if(K.subtreeFlags&2064&&ke!==null)ke.return=K,dt=ke;else e:for(K=Se;dt!==null;){if(le=dt,le.flags&2048)try{switch(le.tag){case 0:case 11:case 15:Qv(9,le)}}catch(xt){cr(le,le.return,xt)}if(le===K){dt=null;break e}var at=le.sibling;if(at!==null){at.return=le.return,dt=at;break e}dt=le.return}}if(xn=_,Au(),ro&&typeof ro.onPostCommitFiberRoot=="function")try{ro.onPostCommitFiberRoot(cv,p)}catch{}T=!0}return T}finally{In=S,Xs.transition=g}}return!1}function ZI(p,g,S){g=Of(S,g),g=vI(p,g,1),p=ku(p,g,1),g=Wa(),p!==null&&(Ip(p,1,g),ss(p,g))}function cr(p,g,S){if(p.tag===3)ZI(p,p,S);else for(;g!==null;){if(g.tag===3){ZI(g,p,S);break}else if(g.tag===1){var T=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(_u===null||!_u.has(T))){p=Of(S,p),p=yI(g,p,1),g=ku(g,p,1),p=Wa(),g!==null&&(Ip(g,1,p),ss(g,p));break}}g=g.return}}function oH(p,g,S){var T=p.pingCache;T!==null&&T.delete(g),g=Wa(),p.pingedLanes|=p.suspendedLanes&S,Kr===p&&(la&S)===S&&(Rr===4||Rr===3&&(la&130023424)===la&&500>Rt()-I2?ec(p,0):k2|=S),ss(p,g)}function e_(p,g){g===0&&(p.mode&1?(g=dv,dv<<=1,!(dv&130023424)&&(dv=4194304)):g=1);var S=Wa();p=zo(p,g),p!==null&&(Ip(p,g,S),ss(p,S))}function uH(p){var g=p.memoizedState,S=0;g!==null&&(S=g.retryLane),e_(p,S)}function lH(p,g){var S=0;switch(p.tag){case 13:var T=p.stateNode,_=p.memoizedState;_!==null&&(S=_.retryLane);break;case 19:T=p.stateNode;break;default:throw Error(n(314))}T!==null&&T.delete(g),e_(p,S)}var t_;t_=function(p,g,S){if(p!==null)if(p.memoizedProps!==g.pendingProps||ts.current)rs=!0;else{if(!(p.lanes&S)&&!(g.flags&128))return rs=!1,Yj(p,g,S);rs=!!(p.flags&131072)}else rs=!1,Qn&&g.flags&1048576&&Fk(g,Fv,g.index);switch(g.lanes=0,g.tag){case 2:var T=g.type;Xv(p,g),p=g.pendingProps;var _=Ef(g,Sa.current);If(g,S),_=u2(null,g,T,p,_,S);var P=l2();return g.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,ns(T)?(P=!0,Iv(g)):P=!1,g.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,t2(g),_.updater=Gv,g.stateNode=_,_._reactInternals=g,m2(g,T,p,S),g=b2(null,g,T,!0,P,S)):(g.tag=0,Qn&&P&&jx(g),za(null,g,_,S),g=g.child),g;case 16:T=g.elementType;e:{switch(Xv(p,g),p=g.pendingProps,_=T._init,T=_(T._payload),g.type=T,_=g.tag=fH(T),p=$i(T,p),_){case 0:g=y2(null,g,T,p,S);break e;case 1:g=DI(null,g,T,p,S);break e;case 11:g=SI(null,g,T,p,S);break e;case 14:g=NI(null,g,T,$i(T.type,p),S);break e}throw Error(n(306,T,""))}return g;case 0:return T=g.type,_=g.pendingProps,_=g.elementType===T?_:$i(T,_),y2(p,g,T,_,S);case 1:return T=g.type,_=g.pendingProps,_=g.elementType===T?_:$i(T,_),DI(p,g,T,_,S);case 3:e:{if(AI(g),p===null)throw Error(n(387));T=g.pendingProps,P=g.memoizedState,_=P.element,qk(p,g),zv(g,T,null,S);var K=g.memoizedState;if(T=K.element,P.isDehydrated)if(P={element:T,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},g.updateQueue.baseState=P,g.memoizedState=P,g.flags&256){_=Of(Error(n(423)),g),g=$I(p,g,T,S,_);break e}else if(T!==_){_=Of(Error(n(424)),g),g=$I(p,g,T,S,_);break e}else for(Is=Eu(g.stateNode.containerInfo.firstChild),ks=g,Qn=!0,Ai=null,S=Wk(g,null,T,S),g.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(Af(),T===_){g=Uo(p,g,S);break e}za(p,g,T,S)}g=g.child}return g;case 5:return Hk(g),p===null&&Kx(g),T=g.type,_=g.pendingProps,P=p!==null?p.memoizedProps:null,K=_.children,Lx(T,_)?K=null:P!==null&&Lx(T,P)&&(g.flags|=32),TI(p,g),za(p,g,K,S),g.child;case 6:return p===null&&Kx(g),null;case 13:return kI(p,g,S);case 4:return n2(g,g.stateNode.containerInfo),T=g.pendingProps,p===null?g.child=$f(g,null,T,S):za(p,g,T,S),g.child;case 11:return T=g.type,_=g.pendingProps,_=g.elementType===T?_:$i(T,_),SI(p,g,T,_,S);case 7:return za(p,g,g.pendingProps,S),g.child;case 8:return za(p,g,g.pendingProps.children,S),g.child;case 12:return za(p,g,g.pendingProps.children,S),g.child;case 10:e:{if(T=g.type._context,_=g.pendingProps,P=g.memoizedProps,K=_.value,Vn(Pv,T._currentValue),T._currentValue=K,P!==null)if(Di(P.value,K)){if(P.children===_.children&&!ts.current){g=Uo(p,g,S);break e}}else for(P=g.child,P!==null&&(P.return=g);P!==null;){var le=P.dependencies;if(le!==null){K=P.child;for(var ye=le.firstContext;ye!==null;){if(ye.context===T){if(P.tag===1){ye=Wo(-1,S&-S),ye.tag=2;var Oe=P.updateQueue;if(Oe!==null){Oe=Oe.shared;var Ye=Oe.pending;Ye===null?ye.next=ye:(ye.next=Ye.next,Ye.next=ye),Oe.pending=ye}}P.lanes|=S,ye=P.alternate,ye!==null&&(ye.lanes|=S),Zx(P.return,S,g),le.lanes|=S;break}ye=ye.next}}else if(P.tag===10)K=P.type===g.type?null:P.child;else if(P.tag===18){if(K=P.return,K===null)throw Error(n(341));K.lanes|=S,le=K.alternate,le!==null&&(le.lanes|=S),Zx(K,S,g),K=P.sibling}else K=P.child;if(K!==null)K.return=P;else for(K=P;K!==null;){if(K===g){K=null;break}if(P=K.sibling,P!==null){P.return=K.return,K=P;break}K=K.return}P=K}za(p,g,_.children,S),g=g.child}return g;case 9:return _=g.type,T=g.pendingProps.children,If(g,S),_=Gs(_),T=T(_),g.flags|=1,za(p,g,T,S),g.child;case 14:return T=g.type,_=$i(T,g.pendingProps),_=$i(T.type,_),NI(p,g,T,_,S);case 15:return CI(p,g,g.type,g.pendingProps,S);case 17:return T=g.type,_=g.pendingProps,_=g.elementType===T?_:$i(T,_),Xv(p,g),g.tag=1,ns(T)?(p=!0,Iv(g)):p=!1,If(g,S),mI(g,T,_),m2(g,T,_,S),b2(null,g,T,!0,p,S);case 19:return _I(p,g,S);case 22:return EI(p,g,S)}throw Error(n(156,g.tag))};function n_(p,g){return uv(p,g)}function cH(p,g,S,T){this.tag=p,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(p,g,S,T){return new cH(p,g,S,T)}function L2(p){return p=p.prototype,!(!p||!p.isReactComponent)}function fH(p){if(typeof p=="function")return L2(p)?1:0;if(p!=null){if(p=p.$$typeof,p===O)return 11;if(p===L)return 14}return 2}function Mu(p,g){var S=p.alternate;return S===null?(S=Ys(p.tag,g,p.key,p.mode),S.elementType=p.elementType,S.type=p.type,S.stateNode=p.stateNode,S.alternate=p,p.alternate=S):(S.pendingProps=g,S.type=p.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=p.flags&14680064,S.childLanes=p.childLanes,S.lanes=p.lanes,S.child=p.child,S.memoizedProps=p.memoizedProps,S.memoizedState=p.memoizedState,S.updateQueue=p.updateQueue,g=p.dependencies,S.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},S.sibling=p.sibling,S.index=p.index,S.ref=p.ref,S}function iy(p,g,S,T,_,P){var K=2;if(T=p,typeof p=="function")L2(p)&&(K=1);else if(typeof p=="string")K=5;else e:switch(p){case $:return nc(S.children,_,P,g);case I:K=8,_|=8;break;case D:return p=Ys(12,S,g,_|2),p.elementType=D,p.lanes=P,p;case B:return p=Ys(13,S,g,_),p.elementType=B,p.lanes=P,p;case z:return p=Ys(19,S,g,_),p.elementType=z,p.lanes=P,p;case R:return oy(S,_,P,g);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case k:K=10;break e;case A:K=9;break e;case O:K=11;break e;case L:K=14;break e;case F:K=16,T=null;break e}throw Error(n(130,p==null?p:typeof p,""))}return g=Ys(K,S,g,_),g.elementType=p,g.type=T,g.lanes=P,g}function nc(p,g,S,T){return p=Ys(7,p,T,g),p.lanes=S,p}function oy(p,g,S,T){return p=Ys(22,p,T,g),p.elementType=R,p.lanes=S,p.stateNode={isHidden:!1},p}function z2(p,g,S){return p=Ys(6,p,null,g),p.lanes=S,p}function W2(p,g,S){return g=Ys(4,p.children!==null?p.children:[],p.key,g),g.lanes=S,g.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},g}function dH(p,g,S,T,_){this.tag=g,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hx(0),this.expirationTimes=hx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hx(0),this.identifierPrefix=T,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function U2(p,g,S,T,_,P,K,le,ye){return p=new dH(p,g,S,le,ye),g===1?(g=1,P===!0&&(g|=8)):g=0,P=Ys(3,null,null,g),p.current=P,P.stateNode=p,P.memoizedState={element:T,isDehydrated:S,cache:null,transitions:null,pendingSuspenseBoundaries:null},t2(P),p}function pH(p,g,S){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:T==null?null:""+T,children:p,containerInfo:g,implementation:S}}function r_(p){if(!p)return Du;p=p._reactInternals;e:{if(Ro(p)!==p||p.tag!==1)throw Error(n(170));var g=p;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(ns(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(n(171))}if(p.tag===1){var S=p.type;if(ns(S))return Ik(p,S,g)}return g}function a_(p,g,S,T,_,P,K,le,ye){return p=U2(S,T,!0,p,_,P,K,le,ye),p.context=r_(null),S=p.current,T=Wa(),_=Fu(S),P=Wo(T,_),P.callback=g??null,ku(S,P,_),p.current.lanes=_,Ip(p,_,T),ss(p,T),p}function uy(p,g,S,T){var _=g.current,P=Wa(),K=Fu(_);return S=r_(S),g.context===null?g.context=S:g.pendingContext=S,g=Wo(P,K),g.payload={element:p},T=T===void 0?null:T,T!==null&&(g.callback=T),p=ku(_,g,K),p!==null&&(_i(p,_,K,P),Lv(p,_,K)),K}function ly(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function s_(p,g){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var S=p.retryLane;p.retryLane=S!==0&&S<g?S:g}}function q2(p,g){s_(p,g),(p=p.alternate)&&s_(p,g)}function hH(){return null}var i_=typeof reportError=="function"?reportError:function(p){console.error(p)};function V2(p){this._internalRoot=p}cy.prototype.render=V2.prototype.render=function(p){var g=this._internalRoot;if(g===null)throw Error(n(409));uy(p,g,null,null)},cy.prototype.unmount=V2.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var g=p.containerInfo;Zl(function(){uy(null,p,null,null)}),g[Mo]=null}};function cy(p){this._internalRoot=p}cy.prototype.unstable_scheduleHydration=function(p){if(p){var g=q$();p={blockedOn:null,target:p,priority:g};for(var S=0;S<Su.length&&g!==0&&g<Su[S].priority;S++);Su.splice(S,0,p),S===0&&H$(p)}};function j2(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function fy(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function o_(){}function mH(p,g,S,T,_){if(_){if(typeof T=="function"){var P=T;T=function(){var Oe=ly(K);P.call(Oe)}}var K=a_(g,T,p,0,null,!1,!1,"",o_);return p._reactRootContainer=K,p[Mo]=K.current,jp(p.nodeType===8?p.parentNode:p),Zl(),K}for(;_=p.lastChild;)p.removeChild(_);if(typeof T=="function"){var le=T;T=function(){var Oe=ly(ye);le.call(Oe)}}var ye=U2(p,0,!1,null,null,!1,!1,"",o_);return p._reactRootContainer=ye,p[Mo]=ye.current,jp(p.nodeType===8?p.parentNode:p),Zl(function(){uy(g,ye,S,T)}),ye}function dy(p,g,S,T,_){var P=S._reactRootContainer;if(P){var K=P;if(typeof _=="function"){var le=_;_=function(){var ye=ly(K);le.call(ye)}}uy(g,K,p,_)}else K=mH(S,g,p,_,T);return ly(K)}W$=function(p){switch(p.tag){case 3:var g=p.stateNode;if(g.current.memoizedState.isDehydrated){var S=kp(g.pendingLanes);S!==0&&(mx(g,S|1),ss(g,Rt()),!(xn&6)&&(Mf=Rt()+500,Au()))}break;case 13:Zl(function(){var T=zo(p,1);if(T!==null){var _=Wa();_i(T,p,1,_)}}),q2(p,1)}},gx=function(p){if(p.tag===13){var g=zo(p,134217728);if(g!==null){var S=Wa();_i(g,p,134217728,S)}q2(p,134217728)}},U$=function(p){if(p.tag===13){var g=Fu(p),S=zo(p,g);if(S!==null){var T=Wa();_i(S,p,g,T)}q2(p,g)}},q$=function(){return In},V$=function(p,g){var S=In;try{return In=p,g()}finally{In=S}},At=function(p,g,S){switch(g){case"input":if(ve(p,S),g=S.name,S.type==="radio"&&g!=null){for(S=p;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<S.length;g++){var T=S[g];if(T!==p&&T.form===p.form){var _=$v(T);if(!_)throw Error(n(90));he(T),ve(T,_)}}}break;case"textarea":ce(p,S);break;case"select":g=S.value,g!=null&&He(p,!!S.multiple,g,!1)}},tv=M2,nv=Zl;var gH={usingClientEntryPoint:!1,Events:[Kp,Nf,$v,Zg,ev,M2]},uh={findFiberByHostInstance:jl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vH={bundleType:uh.bundleType,version:uh.version,rendererPackageName:uh.rendererPackageName,rendererConfig:uh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=iv(p),p===null?null:p.stateNode},findFiberByHostInstance:uh.findFiberByHostInstance||hH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var py=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!py.isDisabled&&py.supportsFiber)try{cv=py.inject(vH),ro=py}catch{}}return is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gH,is.createPortal=function(p,g){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j2(g))throw Error(n(200));return pH(p,g,null,S)},is.createRoot=function(p,g){if(!j2(p))throw Error(n(299));var S=!1,T="",_=i_;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(T=g.identifierPrefix),g.onRecoverableError!==void 0&&(_=g.onRecoverableError)),g=U2(p,1,!1,null,null,S,!1,T,_),p[Mo]=g.current,jp(p.nodeType===8?p.parentNode:p),new V2(g)},is.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var g=p._reactInternals;if(g===void 0)throw typeof p.render=="function"?Error(n(188)):(p=Object.keys(p).join(","),Error(n(268,p)));return p=iv(g),p=p===null?null:p.stateNode,p},is.flushSync=function(p){return Zl(p)},is.hydrate=function(p,g,S){if(!fy(g))throw Error(n(200));return dy(null,p,g,!0,S)},is.hydrateRoot=function(p,g,S){if(!j2(p))throw Error(n(405));var T=S!=null&&S.hydratedSources||null,_=!1,P="",K=i_;if(S!=null&&(S.unstable_strictMode===!0&&(_=!0),S.identifierPrefix!==void 0&&(P=S.identifierPrefix),S.onRecoverableError!==void 0&&(K=S.onRecoverableError)),g=a_(g,null,p,1,S??null,_,!1,P,K),p[Mo]=g.current,jp(p),T)for(p=0;p<T.length;p++)S=T[p],_=S._getVersion,_=_(S._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[S,_]:g.mutableSourceEagerHydrationData.push(S,_);return new cy(g)},is.render=function(p,g,S){if(!fy(g))throw Error(n(200));return dy(null,p,g,!1,S)},is.unmountComponentAtNode=function(p){if(!fy(p))throw Error(n(40));return p._reactRootContainer?(Zl(function(){dy(null,null,p,!1,function(){p._reactRootContainer=null,p[Mo]=null})}),!0):!1},is.unstable_batchedUpdates=M2,is.unstable_renderSubtreeIntoContainer=function(p,g,S,T){if(!fy(S))throw Error(n(200));if(p==null||p._reactInternals===void 0)throw Error(n(38));return dy(p,g,S,!1,T)},is.version="18.3.1-next-f1338f8080-20240426",is}var m_;function DH(){if(m_)return K2.exports;m_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),K2.exports=TH(),K2.exports}var g_;function AH(){if(g_)return hy;g_=1;var t=DH();return hy.createRoot=t.createRoot,hy.hydrateRoot=t.hydrateRoot,hy}var H4=AH(),G4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},v_=_e.createContext&&_e.createContext(G4),$H=["attr","size","title"];function kH(t,e){if(t==null)return{};var n=IH(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function IH(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function m0(){return m0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m0.apply(this,arguments)}function y_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function g0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y_(Object(n),!0).forEach(function(r){_H(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _H(t,e,n){return e=OH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OH(t){var e=FH(t,"string");return typeof e=="symbol"?e:e+""}function FH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K4(t){return t&&t.map((e,n)=>_e.createElement(e.tag,g0({key:n},e.attr),K4(e.child)))}function Vd(t){return e=>_e.createElement(RH,m0({attr:g0({},t.attr)},e),K4(t.child))}function RH(t){var e=n=>{var{attr:r,size:a,title:s}=t,i=kH(t,$H),o=a||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),_e.createElement("svg",m0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:u,style:g0(g0({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&_e.createElement("title",null,s),t.children)};return v_!==void 0?_e.createElement(v_.Consumer,null,n=>e(n)):e(G4)}function MH(t){return Vd({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function PH(t){return Vd({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(t)}function BH(t){return Vd({tag:"svg",attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M799.855 166.312c.023.007.043.018.084.059l57.69 57.69c.041.041.052.06.059.084a.118.118 0 0 1 0 .069c-.007.023-.018.042-.059.083L569.926 512l287.703 287.703c.041.04.052.06.059.083a.118.118 0 0 1 0 .07c-.007.022-.018.042-.059.083l-57.69 57.69c-.041.041-.06.052-.084.059a.118.118 0 0 1-.069 0c-.023-.007-.042-.018-.083-.059L512 569.926 224.297 857.629c-.04.041-.06.052-.083.059a.118.118 0 0 1-.07 0c-.022-.007-.042-.018-.083-.059l-57.69-57.69c-.041-.041-.052-.06-.059-.084a.118.118 0 0 1 0-.069c.007-.023.018-.042.059-.083L454.073 512 166.371 224.297c-.041-.04-.052-.06-.059-.083a.118.118 0 0 1 0-.07c.007-.022.018-.042.059-.083l57.69-57.69c.041-.041.06-.052.084-.059a.118.118 0 0 1 .069 0c.023.007.042.018.083.059L512 454.073l287.703-287.702c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"},child:[]}]})(t)}function LH(t){return Vd({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"},child:[]}]})(t)}function zH(t){return Vd({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"},child:[]}]})(t)}const WH=()=>{const[t,e]=vn.useState(!1),[n,r]=vn.useState(!1),a=()=>{e(!t)},s=()=>{r(!n)};return Tt.jsxs(Tt.Fragment,{children:[Tt.jsxs("header",{className:"bg-sidebar text-text py-4 px-6 shadow-md flex justify-between items-center",children:[Tt.jsx("h1",{className:"text-lg font-semibold",children:"Emely Chat Bot IA1-EDV"}),Tt.jsxs("div",{className:"flex items-center space-x-4",children:[Tt.jsxs("div",{className:"relative",children:[Tt.jsxs("button",{onClick:s,className:"flex items-right text-text hover:text-primary focus:outline-none","aria-label":"Abrir selector de opciones",children:[Tt.jsx("span",{children:"EmilyChat"}),Tt.jsx(LH,{className:"ml-1",size:16})]}),n&&Tt.jsxs("ul",{className:"absolute right-0 mt-2 bg-sidebar border border-gray-600 rounded-md shadow-lg text-text",children:[Tt.jsx("li",{className:"px-4 py-2 hover:bg-gray-700 cursor-pointer",children:"EmiliChat"}),Tt.jsx("li",{className:"px-4 py-2 hover:bg-gray-700 cursor-pointer",children:"EmiliChat Plus"})]})]}),Tt.jsx("button",{onClick:a,className:"text-text hover:text-primary focus:outline-none","aria-label":"Abrir modal de soporte tcnico",children:Tt.jsx(PH,{size:24})})]})]}),t&&Tt.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Tt.jsxs("div",{className:"bg-white p-6 rounded-md shadow-lg text-center",children:[Tt.jsx("h2",{className:"text-gray-700 font-bold mb-4",children:"Inteligencia Artificial 1"}),Tt.jsx("p",{className:"text-gray-700 mb-6",children:"Proyecto fase 2 - Contactar con soporte tcnico"}),Tt.jsx("button",{onClick:a,className:"px-4 py-2 bg-primary text-white rounded hover:bg-primary-dark focus:outline-none",children:"Cerrar"})]})})]})};function UH(t){return Vd({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M144 464a16 16 0 0 1-16-16v-64h-24a72.08 72.08 0 0 1-72-72V120a72.08 72.08 0 0 1 72-72h304a72.08 72.08 0 0 1 72 72v192a72.08 72.08 0 0 1-72 72H245.74l-91.49 76.29A16.05 16.05 0 0 1 144 464z"},child:[]}]})(t)}const qH=({resetChat:t})=>{const[e,n]=vn.useState(!1),r=()=>{n(!e)};return Tt.jsxs("div",{className:`${e?"w-16":"w-64"} bg-sidebar h-full shadow-md flex flex-col transition-all duration-300`,children:[Tt.jsx("div",{className:"flex items-center justify-between p-4 cursor-pointer text-text",onClick:r,children:e?Tt.jsx(zH,{size:24,className:"text-text"}):Tt.jsx(BH,{size:24,className:"text-text"})}),Tt.jsxs("div",{className:"flex-1 flex flex-col items-start",children:[Tt.jsxs("div",{className:"flex items-center w-full px-4 py-2 cursor-pointer hover:bg-gray-600 hover:text-accent transition-colors",onClick:t,children:[Tt.jsx(UH,{className:"text-xl"}),!e&&Tt.jsx("span",{className:"ml-3 text-text font-medium",children:"Nuevo Chat"})]}),Tt.jsxs("div",{className:"flex items-center w-full px-4 py-2 cursor-pointer hover:bg-gray-600 hover:text-accent transition-colors",onClick:t,children:[Tt.jsx(MH,{className:"text-xl"}),!e&&Tt.jsx("span",{className:"ml-3 text-text font-medium",children:"Borrar Chat"})]})]}),Tt.jsx("div",{className:"p-4 text-gray-400 text-sm",children:e?"":" 2024 Tu Chatbot"})]})};var Q2={exports:{}},J2,b_;function VH(){if(b_)return J2;b_=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return J2=t,J2}var Z2,w_;function jH(){if(w_)return Z2;w_=1;var t=VH();function e(){}function n(){}return n.resetWarningCache=e,Z2=function(){function r(i,o,u,l,c,f){if(f!==t){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function a(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},Z2}var x_;function HH(){return x_||(x_=1,Q2.exports=jH()()),Q2.exports}var GH=HH();const st=Uc(GH);var Ft="cs",eS={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var S_;function KH(){return S_||(S_=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",i=0;i<arguments.length;i++){var o=arguments[i];o&&(s=a(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var i="";for(var o in s)e.call(s,o)&&s[o]&&(i=a(i,o));return i}function a(s,i){return i?s?s+" "+i:s+i:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(eS)),eS.exports}var XH=KH();const an=Uc(XH);var X4=["available","unavailable","away","dnd","invisible","eager"],Y4=["xs","sm","md","lg","fluid"];function kh(t){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(t)}var YH=["status","size","className","name","selected","children"];function JS(){return JS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JS.apply(this,arguments)}function N_(t,e,n){return e=QH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QH(t){var e=JH(t,"string");return kh(e)=="symbol"?e:String(e)}function JH(t,e){if(kh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZH(t,e){if(t==null)return{};var n=eG(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eG(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var Q4=function(e){var n=e.status,r=e.size,a=r===void 0?"md":r,s=e.className,i=e.name,o=e.selected,u=e.children,l=ZH(e,YH),c="".concat(Ft,"-status"),f=_e.createElement("div",{className:"".concat(c,"__bullet")}),d=i||u;return _e.createElement("div",JS({},l,{"aria-selected":o===!0?"":null,className:an(c,"".concat(c,"--").concat(a),"".concat(c,"--").concat(n),N_({},"".concat(c,"--selected"),o),N_({},"".concat(c,"--named"),d),s)}),f,d&&_e.createElement("div",{className:"".concat(c,"__name")},i||u))};function Ih(t){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ih(t)}var tG=["name","src","size","status","className","active","children"];function ZS(){return ZS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZS.apply(this,arguments)}function nG(t,e,n){return e=rG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rG(t){var e=aG(t,"string");return Ih(e)=="symbol"?e:String(e)}function aG(t,e){if(Ih(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ih(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sG(t,e){if(t==null)return{};var n=iG(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iG(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function oG(t,e){var n=t.name,r=n===void 0?"":n,a=t.src,s=a===void 0?"":a,i=t.size,o=i===void 0?"md":i,u=t.status,l=t.className,c=t.active,f=c===void 0?!1:c,d=t.children,h=sG(t,tG),m="".concat(Ft,"-avatar"),v=typeof o<"u"?" ".concat(m,"--").concat(o):"",y=vn.useRef();return vn.useImperativeHandle(e,function(){return{focus:function(){return y.current.focus()}}}),_e.createElement("div",ZS({ref:y},h,{className:an("".concat(m).concat(v),nG({},"".concat(m,"--active"),f),l)}),d||_e.createElement(_e.Fragment,null,_e.createElement("img",{src:s,alt:r}),typeof u=="string"&&_e.createElement(Q4,{status:u,size:o})," "))}var Cc=vn.forwardRef(oG);Cc.displayName="Avatar";Cc.propTypes={children:st.node,name:st.string,src:st.string,size:st.oneOf(Y4),status:st.oneOf(X4),active:st.bool,className:st.string};function C_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function my(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C_(Object(n),!0).forEach(function(r){uG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uG(t,e,n){return e=lG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lG(t){var e=cG(t,"string");return rl(e)=="symbol"?e:String(e)}function cG(t,e){if(rl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rl(t){"@babel/helpers - typeof";return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rl(t)}var t0=function(){},fG=function(e){return e==null||Array.isArray(e)&&e.length===0},om=function(e,n){var r=[],a=n.map(function(s){return s.displayName||s.name});return _e.Children.toArray(e).forEach(function(s){var i=n.indexOf(s.type);if(i!==-1)r[i]=s;else{var o,u,l,c=(o=s==null||(u=s.props)===null||u===void 0?void 0:u.as)!==null&&o!==void 0?o:s==null||(l=s.props)===null||l===void 0?void 0:l.is,f=rl(c);if(f==="function"){var d=n.indexOf(c);d!==-1&&(r[d]=_e.cloneElement(s,my(my({},s.props),{},{as:null})))}else if(f==="object"){var h=c.name||c.displayName,m=a.indexOf(h);m!==-1&&(r[m]=_e.cloneElement(s,my(my({},s.props),{},{as:null})))}else if(f==="string"){var v=a.indexOf(c);v!==-1&&(r[v]=s)}}}),r},J4=function(e){if(typeof e=="string")return e;if("type"in e){var n=rl(e.type);if(n==="function"||n==="object"){if("displayName"in e.type)return e.type.displayName;if("name"in e.type)return e.type.name}else if(n==="string")return e.type;return"undefined"}return"undefined"},Z4=function(e){return function(n,r,a){var s=e.map(function(c){return c.name||c.displayName}),i=_e.Children.toArray(n[r]).find(function(c){if(typeof c=="string"&&c.trim().length===0)return!1;if(e.indexOf(c.type)===-1){var f,d,h=(c==null||(f=c.props)===null||f===void 0?void 0:f.as)||(c==null||(d=c.props)===null||d===void 0?void 0:d.is),m=rl(h);if(m==="function")return e.indexOf(h)===-1;if(m==="object"){var v=h.name||h.displayName;return s.indexOf(v)===-1}else return m==="string"?s.indexOf(h)===-1:!0}});if(typeof i<"u"){var o=J4(i),u=e.map(function(c){return c.name||c.displayName}).join(", "),l='"'.concat(o,'" is not a valid child for ').concat(a,". Allowed types: ").concat(u);return new Error(l)}}},dG=["children","size","className","max","activeIndex","hoverToFront"];function eN(){return eN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eN.apply(this,arguments)}function pG(t,e){if(t==null)return{};var n=hG(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hG(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var eB=function(e){var n=e.children,r=e.size,a=r===void 0?"md":r,s=e.className,i=e.max,o=e.activeIndex,u=e.hoverToFront,l=pG(e,dG),c="".concat(Ft,"-avatar-group"),f=typeof i=="number"&&_e.Children.count(n)>i?_e.Children.toArray(n).reverse().slice(0,i):_e.Children.toArray(n).reverse(),d=typeof o=="number"?f.length-o-1:void 0;return _e.createElement("div",eN({},l,{className:an(c,"".concat(c,"--").concat(a),s)}),f.map(function(h,m){var v=typeof d=="number"?{active:d===m}:{};return u===!0&&(v.className=an("".concat(Ft,"-avatar--active-on-hover"),h.props.className)),_e.cloneElement(h,v)}))};eB.displayName="AvatarGroup";var mG=["children","className","icon","border","labelPosition"];function tN(){return tN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tN.apply(this,arguments)}function gG(t,e){if(t==null)return{};var n=vG(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vG(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var um=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,s=a===void 0?"":a,i=e.icon,o=i===void 0?void 0:i,u=e.border,l=u===void 0?!1:u,c=e.labelPosition,f=c===void 0?void 0:c,d=gG(e,mG),h="".concat(Ft,"-button"),m=typeof f<"u"?f:"right",v=_e.Children.count(r)>0?"".concat(h,"--").concat(m):"",y=l===!0?"".concat(h,"--border"):"";return _e.createElement("button",tN({},d,{className:an(h,v,y,s)}),m==="left"&&r,o,m==="right"&&r)};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */function Th(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Th=function(e){return typeof e}:Th=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Th(t)}function yG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wG(t,e,n){return e&&bG(t.prototype,e),t}function xG(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function En(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){xG(t,a,n[a])})}return t}function tB(t,e){return SG(t)||NG(t,e)||CG()}function SG(t){if(Array.isArray(t))return t}function NG(t,e){var n=[],r=!0,a=!1,s=void 0;try{for(var i=t[Symbol.iterator](),o;!(r=(o=i.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(u){a=!0,s=u}finally{try{!r&&i.return!=null&&i.return()}finally{if(a)throw s}}return n}function CG(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var E_=function(){},cE={},nB={},EG=null,rB={mark:E_,measure:E_};try{typeof window<"u"&&(cE=window),typeof document<"u"&&(nB=document),typeof MutationObserver<"u"&&(EG=MutationObserver),typeof performance<"u"&&(rB=performance)}catch{}var TG=cE.navigator||{},T_=TG.userAgent,D_=T_===void 0?"":T_,Rb=cE,ja=nB,gy=rB;Rb.document;var fE=!!ja.documentElement&&!!ja.head&&typeof ja.addEventListener=="function"&&typeof ja.createElement=="function";~D_.indexOf("MSIE")||~D_.indexOf("Trident/");var nu="___FONT_AWESOME___",aB="fa",sB="svg-inline--fa",DG="data-fa-i2svg";(function(){try{return!0}catch{return!1}})();var tS={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},iB=Rb.FontAwesomeConfig||{};function AG(t){var e=ja.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function $G(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(ja&&typeof ja.querySelector=="function"){var kG=[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];kG.forEach(function(t){var e=tB(t,2),n=e[0],r=e[1],a=$G(AG(n));a!=null&&(iB[r]=a)})}var IG={familyPrefix:aB,replacementClass:sB,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},nN=En({},IG,iB);nN.autoReplaceSvg||(nN.observeMutations=!1);var Rs=En({},nN);Rb.FontAwesomeConfig=Rs;var ru=Rb||{};ru[nu]||(ru[nu]={});ru[nu].styles||(ru[nu].styles={});ru[nu].hooks||(ru[nu].hooks={});ru[nu].shims||(ru[nu].shims=[]);var ho=ru[nu],_G=[],OG=function t(){ja.removeEventListener("DOMContentLoaded",t),rN=1,_G.map(function(e){return e()})},rN=!1;fE&&(rN=(ja.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ja.readyState),rN||ja.addEventListener("DOMContentLoaded",OG));var dE="pending",oB="settled",v0="fulfilled",y0="rejected",FG=function(){},uB=typeof global<"u"&&typeof global.process<"u"&&typeof global.process.emit=="function",RG=typeof setImmediate>"u"?setTimeout:setImmediate,gh=[],aN;function MG(){for(var t=0;t<gh.length;t++)gh[t][0](gh[t][1]);gh=[],aN=!1}function b0(t,e){gh.push([t,e]),aN||(aN=!0,RG(MG,0))}function PG(t,e){function n(a){pE(e,a)}function r(a){_h(e,a)}try{t(n,r)}catch(a){r(a)}}function lB(t){var e=t.owner,n=e._state,r=e._data,a=t[n],s=t.then;if(typeof a=="function"){n=v0;try{r=a(r)}catch(i){_h(s,i)}}cB(s,r)||(n===v0&&pE(s,r),n===y0&&_h(s,r))}function cB(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&(typeof e=="function"||Th(e)==="object")){var r=e.then;if(typeof r=="function")return r.call(e,function(a){n||(n=!0,e===a?fB(t,a):pE(t,a))},function(a){n||(n=!0,_h(t,a))}),!0}}catch(a){return n||_h(t,a),!0}return!1}function pE(t,e){(t===e||!cB(t,e))&&fB(t,e)}function fB(t,e){t._state===dE&&(t._state=oB,t._data=e,b0(BG,t))}function _h(t,e){t._state===dE&&(t._state=oB,t._data=e,b0(LG,t))}function dB(t){t._then=t._then.forEach(lB)}function BG(t){t._state=v0,dB(t)}function LG(t){t._state=y0,dB(t),!t._handled&&uB&&global.process.emit("unhandledRejection",t._data,t)}function zG(t){global.process.emit("rejectionHandled",t)}function fi(t){if(typeof t!="function")throw new TypeError("Promise resolver "+t+" is not a function");if(!(this instanceof fi))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],PG(t,this)}fi.prototype={constructor:fi,_state:dE,_then:null,_data:void 0,_handled:!1,then:function(e,n){var r={owner:this,then:new this.constructor(FG),fulfilled:e,rejected:n};return(n||e)&&!this._handled&&(this._handled=!0,this._state===y0&&uB&&b0(zG,this)),this._state===v0||this._state===y0?b0(lB,r):this._then.push(r),r.then},catch:function(e){return this.then(null,e)}};fi.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new fi(function(e,n){var r=[],a=0;function s(u){return a++,function(l){r[u]=l,--a||e(r)}}for(var i=0,o;i<t.length;i++)o=t[i],o&&typeof o.then=="function"?o.then(s(i),n):r[i]=o;a||e(r)})};fi.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new fi(function(e,n){for(var r=0,a;r<t.length;r++)a=t[r],a&&typeof a.then=="function"?a.then(e,n):e(a)})};fi.resolve=function(t){return t&&Th(t)==="object"&&t.constructor===fi?t:new fi(function(e){e(t)})};fi.reject=function(t){return new fi(function(e,n){n(t)})};var Jf={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function WG(t){if(!(!t||!fE)){var e=ja.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=ja.head.childNodes,r=null,a=n.length-1;a>-1;a--){var s=n[a],i=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(i)>-1&&(r=s)}return ja.head.insertBefore(e,r),t}}var UG="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function w0(){for(var t=12,e="";t-- >0;)e+=UG[Math.random()*62|0];return e}function pB(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function qG(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(pB(t[n]),'" ')},"").trim()}function hB(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n],";")},"")}function mB(t){return t.size!==Jf.size||t.x!==Jf.x||t.y!==Jf.y||t.rotate!==Jf.rotate||t.flipX||t.flipY}function gB(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,a={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),i="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),o="rotate(".concat(e.rotate," 0 0)"),u={transform:"".concat(s," ").concat(i," ").concat(o)},l={transform:"translate(".concat(r/2*-1," -256)")};return{outer:a,inner:u,path:l}}var nS={x:0,y:0,width:"100%",height:"100%"};function A_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function VG(t){return t.tag==="g"?t.children:[t]}function jG(t){var e=t.children,n=t.attributes,r=t.main,a=t.mask,s=t.maskId,i=t.transform,o=r.width,u=r.icon,l=a.width,c=a.icon,f=gB({transform:i,containerWidth:l,iconWidth:o}),d={tag:"rect",attributes:En({},nS,{fill:"white"})},h=u.children?{children:u.children.map(A_)}:{},m={tag:"g",attributes:En({},f.inner),children:[A_(En({tag:u.tag,attributes:En({},u.attributes,f.path)},h))]},v={tag:"g",attributes:En({},f.outer),children:[m]},y="mask-".concat(s||w0()),b="clip-".concat(s||w0()),x={tag:"mask",attributes:En({},nS,{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,v]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:VG(c)},x]};return e.push(w,{tag:"rect",attributes:En({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(y,")")},nS)}),{children:e,attributes:n}}function HG(t){var e=t.children,n=t.attributes,r=t.main,a=t.transform,s=t.styles,i=hB(s);if(i.length>0&&(n.style=i),mB(a)){var o=gB({transform:a,containerWidth:r.width,iconWidth:r.width});e.push({tag:"g",attributes:En({},o.outer),children:[{tag:"g",attributes:En({},o.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:En({},r.icon.attributes,o.path)}]}]})}else e.push(r.icon);return{children:e,attributes:n}}function GG(t){var e=t.children,n=t.main,r=t.mask,a=t.attributes,s=t.styles,i=t.transform;if(mB(i)&&n.found&&!r.found){var o=n.width,u=n.height,l={x:o/u/2,y:.5};a.style=hB(En({},s,{"transform-origin":"".concat(l.x+i.x/16,"em ").concat(l.y+i.y/16,"em")}))}return[{tag:"svg",attributes:a,children:e}]}function KG(t){var e=t.prefix,n=t.iconName,r=t.children,a=t.attributes,s=t.symbol,i=s===!0?"".concat(e,"-").concat(Rs.familyPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:En({},a,{id:i}),children:r}]}]}function XG(t){var e=t.icons,n=e.main,r=e.mask,a=t.prefix,s=t.iconName,i=t.transform,o=t.symbol,u=t.title,l=t.maskId,c=t.titleId,f=t.extra,d=t.watchable,h=d===void 0?!1:d,m=r.found?r:n,v=m.width,y=m.height,b=a==="fak",x=b?"":"fa-w-".concat(Math.ceil(v/y*16)),w=[Rs.replacementClass,s?"".concat(Rs.familyPrefix,"-").concat(s):"",x].filter(function(k){return f.classes.indexOf(k)===-1}).filter(function(k){return k!==""||!!k}).concat(f.classes).join(" "),N={children:[],attributes:En({},f.attributes,{"data-prefix":a,"data-icon":s,class:w,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v," ").concat(y)})},C=b&&!~f.classes.indexOf("fa-fw")?{width:"".concat(v/y*16*.0625,"em")}:{};h&&(N.attributes[DG]=""),u&&N.children.push({tag:"title",attributes:{id:N.attributes["aria-labelledby"]||"title-".concat(c||w0())},children:[u]});var E=En({},N,{prefix:a,iconName:s,main:n,mask:r,maskId:l,transform:i,symbol:o,styles:En({},C,f.styles)}),$=r.found&&n.found?jG(E):HG(E),I=$.children,D=$.attributes;return E.children=I,E.attributes=D,o?KG(E):GG(E)}var $_=function(){};Rs.measurePerformance&&gy&&gy.mark&&gy.measure;var rS=function(e,n,r,a){var s=Object.keys(e),i=s.length,o=n,u,l,c;for(r===void 0?(u=1,c=e[s[0]]):(u=0,c=r);u<i;u++)l=s[u],c=o(c,e[l],l,e);return c};function vB(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,a=r===void 0?!1:r,s=Object.keys(e).reduce(function(i,o){var u=e[o],l=!!u.icon;return l?i[u.iconName]=u.icon:i[o]=u,i},{});typeof ho.hooks.addPack=="function"&&!a?ho.hooks.addPack(t,s):ho.styles[t]=En({},ho.styles[t]||{},s),t==="fas"&&vB("fa",e)}var k_=ho.styles,YG=ho.shims,yB=function(){var e=function(a){return rS(k_,function(s,i,o){return s[o]=rS(i,a,{}),s},{})};e(function(r,a,s){return a[3]&&(r[a[3]]=s),r}),e(function(r,a,s){var i=a[2];return r[s]=s,i.forEach(function(o){r[o]=s}),r});var n="far"in k_;rS(YG,function(r,a){var s=a[0],i=a[1],o=a[2];return i==="far"&&!n&&(i="fas"),r[s]={prefix:i,iconName:o},r},{})};yB();ho.styles;function I_(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}function bB(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,a=t.children,s=a===void 0?[]:a;return typeof t=="string"?pB(t):"<".concat(e," ").concat(qG(r),">").concat(s.map(bB).join(""),"</").concat(e,">")}var QG=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce(function(r,a){var s=a.toLowerCase().split("-"),i=s[0],o=s.slice(1).join("-");if(i&&o==="h")return r.flipX=!0,r;if(i&&o==="v")return r.flipY=!0,r;if(o=parseFloat(o),isNaN(o))return r;switch(i){case"grow":r.size=r.size+o;break;case"shrink":r.size=r.size-o;break;case"left":r.x=r.x-o;break;case"right":r.x=r.x+o;break;case"up":r.y=r.y-o;break;case"down":r.y=r.y+o;break;case"rotate":r.rotate=r.rotate+o;break}return r},n):n};function sN(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=new Error().stack}sN.prototype=Object.create(Error.prototype);sN.prototype.constructor=sN;var Mb={fill:"currentColor"},wB={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};En({},Mb,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"});var hE=En({},wB,{attributeName:"opacity"});En({},Mb,{cx:"256",cy:"364",r:"28"}),En({},wB,{attributeName:"r",values:"28;14;28;28;14;28;"}),En({},hE,{values:"1;0;1;1;0;1;"});En({},Mb,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),En({},hE,{values:"1;0;0;0;0;1;"});En({},Mb,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),En({},hE,{values:"0;0;1;1;0;0;"});ho.styles;function __(t){var e=t[0],n=t[1],r=t.slice(4),a=tB(r,1),s=a[0],i=null;return Array.isArray(s)?i={tag:"g",attributes:{class:"".concat(Rs.familyPrefix,"-").concat(tS.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Rs.familyPrefix,"-").concat(tS.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(Rs.familyPrefix,"-").concat(tS.PRIMARY),fill:"currentColor",d:s[1]}}]}:i={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:e,height:n,icon:i}}ho.styles;var JG=`svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}`;function ZG(){var t=aB,e=sB,n=Rs.familyPrefix,r=Rs.replacementClass,a=JG;if(n!==t||r!==e){var s=new RegExp("\\.".concat(t,"\\-"),"g"),i=new RegExp("\\--".concat(t,"\\-"),"g"),o=new RegExp("\\.".concat(e),"g");a=a.replace(s,".".concat(n,"-")).replace(i,"--".concat(n,"-")).replace(o,".".concat(r))}return a}var eK=function(){function t(){yG(this,t),this.definitions={}}return wG(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var i=a.reduce(this._pullDefinitions,{});Object.keys(i).forEach(function(o){n.definitions[o]=En({},n.definitions[o]||{},i[o]),vB(o,i[o]),yB()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var a=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(a).map(function(s){var i=a[s],o=i.prefix,u=i.iconName,l=i.icon;n[o]||(n[o]={}),n[o][u]=l}),n}}]),t}();function tK(){Rs.autoAddCss&&!F_&&(WG(ZG()),F_=!0)}function nK(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return bB(r)})}}),Object.defineProperty(t,"node",{get:function(){if(fE){var r=ja.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function O_(t){var e=t.prefix,n=e===void 0?"fa":e,r=t.iconName;if(r)return I_(aK.definitions,n,r)||I_(ho.styles,n,r)}function rK(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:O_(e||{}),a=n.mask;return a&&(a=(a||{}).icon?a:O_(a||{})),t(r,En({},n,{mask:a}))}}var aK=new eK,F_=!1,iN={transform:function(e){return QG(e)}},sK=rK(function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.transform,r=n===void 0?Jf:n,a=e.symbol,s=a===void 0?!1:a,i=e.mask,o=i===void 0?null:i,u=e.maskId,l=u===void 0?null:u,c=e.title,f=c===void 0?null:c,d=e.titleId,h=d===void 0?null:d,m=e.classes,v=m===void 0?[]:m,y=e.attributes,b=y===void 0?{}:y,x=e.styles,w=x===void 0?{}:x;if(t){var N=t.prefix,C=t.iconName,E=t.icon;return nK(En({type:"icon"},t),function(){return tK(),Rs.autoA11y&&(f?b["aria-labelledby"]="".concat(Rs.replacementClass,"-title-").concat(h||w0()):(b["aria-hidden"]="true",b.focusable="false")),XG({icons:{main:__(E),mask:o?__(o.icon):{found:!1,width:null,height:null,icon:{}}},prefix:N,iconName:C,transform:En({},Jf,r),symbol:s,title:f,maskId:l,titleId:h,extra:{attributes:b,styles:w,classes:v}})})}});function R_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Uu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R_(Object(n),!0).forEach(function(r){Zf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function x0(t){"@babel/helpers - typeof";return x0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x0(t)}function Zf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function xB(t,e){if(t==null)return{};var n=iK(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oN(t){return oK(t)||uK(t)||lK(t)||cK()}function oK(t){if(Array.isArray(t))return uN(t)}function uK(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lK(t,e){if(t){if(typeof t=="string")return uN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uN(t,e)}}function uN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fK(t){var e,n=t.beat,r=t.fade,a=t.beatFade,s=t.bounce,i=t.shake,o=t.flash,u=t.spin,l=t.spinPulse,c=t.spinReverse,f=t.pulse,d=t.fixedWidth,h=t.inverse,m=t.border,v=t.listItem,y=t.flip,b=t.size,x=t.rotation,w=t.pull,N=(e={"fa-beat":n,"fa-fade":r,"fa-beat-fade":a,"fa-bounce":s,"fa-shake":i,"fa-flash":o,"fa-spin":u,"fa-spin-reverse":c,"fa-spin-pulse":l,"fa-pulse":f,"fa-fw":d,"fa-inverse":h,"fa-border":m,"fa-li":v,"fa-flip":y===!0,"fa-flip-horizontal":y==="horizontal"||y==="both","fa-flip-vertical":y==="vertical"||y==="both"},Zf(e,"fa-".concat(b),typeof b<"u"&&b!==null),Zf(e,"fa-rotate-".concat(x),typeof x<"u"&&x!==null&&x!==0),Zf(e,"fa-pull-".concat(w),typeof w<"u"&&w!==null),Zf(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(N).map(function(C){return N[C]?C:null}).filter(function(C){return C})}function dK(t){return t=t-0,t===t}function SB(t){return dK(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var pK=["style"];function hK(t){return t.charAt(0).toUpperCase()+t.slice(1)}function mK(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),a=SB(n.slice(0,r)),s=n.slice(r+1).trim();return a.startsWith("webkit")?e[hK(a)]=s:e[a]=s,e},{})}function NB(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(u){return NB(t,u)}),a=Object.keys(e.attributes||{}).reduce(function(u,l){var c=e.attributes[l];switch(l){case"class":u.attrs.className=c,delete e.attributes.class;break;case"style":u.attrs.style=mK(c);break;default:l.indexOf("aria-")===0||l.indexOf("data-")===0?u.attrs[l.toLowerCase()]=c:u.attrs[SB(l)]=c}return u},{attrs:{}}),s=n.style,i=s===void 0?{}:s,o=xB(n,pK);return a.attrs.style=Uu(Uu({},a.attrs.style),i),t.apply(void 0,[e.tag,Uu(Uu({},a.attrs),o)].concat(oN(r)))}var CB=!1;try{CB=!0}catch{}function gK(){if(!CB&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function M_(t){if(t&&x0(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(iN.icon)return iN.icon(t);if(t===null)return null;if(t&&x0(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function aS(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Zf({},t,e):{}}var vK=["forwardedRef"];function gi(t){var e=t.forwardedRef,n=xB(t,vK),r=n.icon,a=n.mask,s=n.symbol,i=n.className,o=n.title,u=n.titleId,l=n.maskId,c=M_(r),f=aS("classes",[].concat(oN(fK(n)),oN(i.split(" ")))),d=aS("transform",typeof n.transform=="string"?iN.transform(n.transform):n.transform),h=aS("mask",M_(a)),m=sK(c,Uu(Uu(Uu(Uu({},f),d),h),{},{symbol:s,title:o,titleId:u,maskId:l}));if(!m)return gK("Could not find icon",c),null;var v=m.abstract,y={ref:e};return Object.keys(n).forEach(function(b){gi.defaultProps.hasOwnProperty(b)||(y[b]=n[b])}),yK(v[0],y)}gi.displayName="FontAwesomeIcon";gi.propTypes={beat:st.bool,border:st.bool,beatFade:st.bool,bounce:st.bool,className:st.string,fade:st.bool,flash:st.bool,mask:st.oneOfType([st.object,st.array,st.string]),maskId:st.string,fixedWidth:st.bool,inverse:st.bool,flip:st.oneOf([!0,!1,"horizontal","vertical","both"]),icon:st.oneOfType([st.object,st.array,st.string]),listItem:st.bool,pull:st.oneOf(["right","left"]),pulse:st.bool,rotation:st.oneOf([0,90,180,270]),shake:st.bool,size:st.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:st.bool,spinPulse:st.bool,spinReverse:st.bool,symbol:st.oneOfType([st.bool,st.string]),title:st.string,titleId:st.string,transform:st.oneOfType([st.string,st.object]),swapOpacity:st.bool};gi.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var yK=NB.bind(null,_e.createElement),sS={},P_;function bK(){return P_||(P_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-up",r=448,a=512,s=[],i="f062",o="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z";t.definition={prefix:e,iconName:n,icon:[r,a,s,i,o]},t.faArrowUp=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=s,t.unicode=i,t.svgPathData=o}(sS)),sS}var wK=bK(),iS={},B_;function xK(){return B_||(B_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-right",r=448,a=512,s=[],i="f061",o="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z";t.definition={prefix:e,iconName:n,icon:[r,a,s,i,o]},t.faArrowRight=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=s,t.unicode=i,t.svgPathData=o}(iS)),iS}var SK=xK(),oS={},L_;function NK(){return L_||(L_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-down",r=448,a=512,s=[],i="f063",o="M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z";t.definition={prefix:e,iconName:n,icon:[r,a,s,i,o]},t.faArrowDown=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=s,t.unicode=i,t.svgPathData=o}(oS)),oS}var CK=NK(),uS={},z_;function EK(){return z_||(z_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-left",r=448,a=512,s=[],i="f060",o="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z";t.definition={prefix:e,iconName:n,icon:[r,a,s,i,o]},t.faArrowLeft=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=s,t.unicode=i,t.svgPathData=o}(uS)),uS}var TK=EK(),DK=["className","direction","children"];function lN(){return lN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lN.apply(this,arguments)}function AK(t,e){if(t==null)return{};var n=$K(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $K(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var kK=function(e){var n=e.className,r=n===void 0?"":n,a=e.direction,s=a===void 0?"right":a,i=e.children,o=AK(e,DK),u="".concat(Ft,"-button--arrow"),l=function(){if(s==="up")return wK.faArrowUp;if(s==="right")return SK.faArrowRight;if(s==="down")return CK.faArrowDown;if(s==="left")return TK.faArrowLeft}();return _e.createElement(um,lN({},o,{className:an(u,r),icon:_e.createElement(gi,{icon:l})}),i)},lS={},W_;function IK(){return W_||(W_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="info-circle",r=512,a=512,s=[],i="f05a",o="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z";t.definition={prefix:e,iconName:n,icon:[r,a,s,i,o]},t.faInfoCircle=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=s,t.unicode=i,t.svgPathData=o}(lS)),lS}var _K=IK(),OK=["className","children"];function cN(){return cN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cN.apply(this,arguments)}function FK(t,e){if(t==null)return{};var n=RK(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function RK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var MK=function(e){var n=e.className,r=n===void 0?"":n,a=e.children,s=FK(e,OK),i="".concat(Ft,"-button--info");return _e.createElement(um,cN({},s,{className:an(i,r),icon:_e.createElement(gi,{icon:_K.faInfoCircle})}),a)},cS={},U_;function PK(){return U_||(U_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="star",r=576,a=512,s=[],i="f005",o="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z";t.definition={prefix:e,iconName:n,icon:[r,a,s,i,o]},t.faStar=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=s,t.unicode=i,t.svgPathData=o}(cS)),cS}var BK=PK(),LK=["className","children"];function fN(){return fN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fN.apply(this,arguments)}function zK(t,e){if(t==null)return{};var n=WK(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function WK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var UK=function(e){var n=e.className,r=n===void 0?"":n,a=e.children,s=zK(e,LK),i="".concat(Ft,"-button--star");return _e.createElement(um,fN({},s,{className:an(i,r),icon:_e.createElement(gi,{icon:BK.faStar})}),a)},fS={},q_;function qK(){return q_||(q_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="ellipsis-v",r=192,a=512,s=[],i="f142",o="M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z";t.definition={prefix:e,iconName:n,icon:[r,a,s,i,o]},t.faEllipsisV=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=s,t.unicode=i,t.svgPathData=o}(fS)),fS}var VK=qK(),dS={},V_;function jK(){return V_||(V_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="paper-plane",r=512,a=512,s=[],i="f1d8",o="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z";t.definition={prefix:e,iconName:n,icon:[r,a,s,i,o]},t.faPaperPlane=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=s,t.unicode=i,t.svgPathData=o}(dS)),dS}var HK=jK(),GK=["className","children"];function dN(){return dN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dN.apply(this,arguments)}function KK(t,e){if(t==null)return{};var n=XK(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function XK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var YK=function(e){var n=e.className,r=n===void 0?"":n,a=e.children,s=KK(e,GK),i="".concat(Ft,"-button--send");return _e.createElement(um,dN({},s,{className:an(i,r),icon:_e.createElement(gi,{icon:HK.faPaperPlane})}),a)},pS={},j_;function QK(){return j_||(j_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="paperclip",r=448,a=512,s=[],i="f0c6",o="M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z";t.definition={prefix:e,iconName:n,icon:[r,a,s,i,o]},t.faPaperclip=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=s,t.unicode=i,t.svgPathData=o}(pS)),pS}var JK=QK(),ZK=["className","children"];function pN(){return pN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pN.apply(this,arguments)}function eX(t,e){if(t==null)return{};var n=tX(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var nX=function(e){var n=e.className,r=n===void 0?"":n,a=e.children,s=eX(e,ZK),i="".concat(Ft,"-button--attachment");return _e.createElement(um,pN({},s,{className:an(i,r),icon:_e.createElement(gi,{icon:JK.faPaperclip})}),a)},rX=["onClick","children","className"];function hN(){return hN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hN.apply(this,arguments)}function aX(t,e){if(t==null)return{};var n=sX(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var mE=function(e){var n=e.onClick,r=n===void 0?function(){}:n,a=e.children,s=a===void 0?void 0:a,i=e.className,o=aX(e,rX),u="".concat(Ft,"-conversation-header__back");return _e.createElement("div",hN({},o,{className:an(u,i)}),typeof s<"u"?s:_e.createElement(kK,{direction:"left",onClick:r}))};mE.displayName="ConversationHeader.Back";var iX=["children","className"];function mN(){return mN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mN.apply(this,arguments)}function oX(t,e){if(t==null)return{};var n=uX(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var gE=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,s=oX(e,iX),i="".concat(Ft,"-conversation-header__actions");return _e.createElement("section",mN({},s,{className:an(i,a)}),r)};gE.displayName="ConversationHeader.Actions";var lX=["userName","info","children","className"];function gN(){return gN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gN.apply(this,arguments)}function cX(t,e){if(t==null)return{};var n=fX(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var vE=function(e){var n=e.userName,r=n===void 0?"":n,a=e.info,s=a===void 0?"":a,i=e.children,o=i===void 0?void 0:i,u=e.className,l=cX(e,lX),c="".concat(Ft,"-conversation-header__content");return _e.createElement("div",gN({},l,{className:an(c,u)}),typeof o<"u"?o:_e.createElement(_e.Fragment,null,_e.createElement("div",{className:"".concat(Ft,"-conversation-header__user-name")},r),_e.createElement("div",{className:"".concat(Ft,"-conversation-header__info")},s)))};vE.displayName="ConversationHeader.Content";var dX=["children","className"];function vN(){return vN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vN.apply(this,arguments)}function pX(t,e){return vX(t)||gX(t,e)||mX(t,e)||hX()}function hX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mX(t,e){if(t){if(typeof t=="string")return H_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H_(t,e)}}function H_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gX(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,s,i,o=[],u=!0,l=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(u=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return o}}function vX(t){if(Array.isArray(t))return t}function yX(t,e){if(t==null)return{};var n=bX(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var Qu=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,s=yX(e,dX),i="".concat(Ft,"-conversation-header"),o=om(r,[mE,Cc,eB,vE,gE]),u=pX(o,5),l=u[0],c=u[1],f=u[2],d=u[3],h=u[4];return _e.createElement("div",vN({},s,{className:an(i,a)}),l,c&&_e.createElement("div",{className:"".concat(i,"__avatar")},c),!c&&f&&_e.createElement("div",{className:"".concat(i,"__avatar")},f),d,h)};Qu.displayName="ConversationHeader";Qu.Back=mE;Qu.Actions=gE;Qu.Content=vE;/*!
 * perfect-scrollbar v1.5.0
 * Copyright 2020 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function mo(t){return getComputedStyle(t)}function fs(t,e){for(var n in e){var r=e[n];typeof r=="number"&&(r=r+"px"),t.style[n]=r}return t}function vy(t){var e=document.createElement("div");return e.className=t,e}var G_=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function qu(t,e){if(!G_)throw new Error("No element matching method supported");return G_.call(t,e)}function ed(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function K_(t,e){return Array.prototype.filter.call(t.children,function(n){return qu(n,e)})}var Cr={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},EB={x:null,y:null};function TB(t,e){var n=t.element.classList,r=Cr.state.scrolling(e);n.contains(r)?clearTimeout(EB[e]):n.add(r)}function DB(t,e){EB[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(Cr.state.scrolling(e))},t.settings.scrollingThreshold)}function wX(t,e){TB(t,e),DB(t,e)}var lm=function(e){this.element=e,this.handlers={}},AB={isEmpty:{configurable:!0}};lm.prototype.bind=function(e,n){typeof this.handlers[e]>"u"&&(this.handlers[e]=[]),this.handlers[e].push(n);var r=["touchstart","wheel","touchmove"];r.indexOf(e)!==-1?this.element.addEventListener(e,n,{passive:!1}):this.element.addEventListener(e,n,!1)};lm.prototype.unbind=function(e,n){var r=this;this.handlers[e]=this.handlers[e].filter(function(a){return n&&a!==n?!0:(r.element.removeEventListener(e,a,!1),!1)})};lm.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)};AB.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return t.handlers[e].length===0})};Object.defineProperties(lm.prototype,AB);var jd=function(){this.eventElements=[]};jd.prototype.eventElement=function(e){var n=this.eventElements.filter(function(r){return r.element===e})[0];return n||(n=new lm(e),this.eventElements.push(n)),n};jd.prototype.bind=function(e,n,r){this.eventElement(e).bind(n,r)};jd.prototype.unbind=function(e,n,r){var a=this.eventElement(e);a.unbind(n,r),a.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(a),1)};jd.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]};jd.prototype.once=function(e,n,r){var a=this.eventElement(e),s=function i(o){a.unbind(n,i),r(o)};a.bind(n,s)};function yy(t){if(typeof window.CustomEvent=="function")return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function S0(t,e,n,r,a,s){r===void 0&&(r=!0),a===void 0&&(a=!1);var i;if(e==="top")i=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(e==="left")i=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");xX(t,n,i,r,a,s)}function xX(t,e,n,r,a,s){var i=n[0],o=n[1],u=n[2],l=n[3],c=n[4],f=n[5];r===void 0&&(r=!0),a===void 0&&(a=!1);var d=t.element;t.reach[l]=null;var h=s===!0?t[i]!==t[o]:!0;h&&d[u]<1&&(t.reach[l]="start"),h&&d[u]>t[i]-t[o]-1&&(t.reach[l]="end"),e&&(d.dispatchEvent(yy("ps-scroll-"+l)),e<0?d.dispatchEvent(yy("ps-scroll-"+c)):e>0&&d.dispatchEvent(yy("ps-scroll-"+f)),r&&wX(t,l)),t.reach[l]&&(e||a)&&d.dispatchEvent(yy("ps-"+l+"-reach-"+t.reach[l]))}function ir(t){return parseInt(t,10)||0}function SX(t){return qu(t,"input,[contenteditable]")||qu(t,"select,[contenteditable]")||qu(t,"textarea,[contenteditable]")||qu(t,"button,[contenteditable]")}function NX(t){var e=mo(t);return ir(e.width)+ir(e.paddingLeft)+ir(e.paddingRight)+ir(e.borderLeftWidth)+ir(e.borderRightWidth)}var vh={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function au(t){var e=t.element,n=Math.floor(e.scrollTop),r=e.getBoundingClientRect();t.containerWidth=Math.round(r.width),t.containerHeight=Math.round(r.height),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(K_(e,Cr.element.rail("x")).forEach(function(a){return ed(a)}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(K_(e,Cr.element.rail("y")).forEach(function(a){return ed(a)}),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=X_(t,ir(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=ir((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=X_(t,ir(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=ir(n*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),CX(e,t),t.scrollbarXActive?e.classList.add(Cr.state.active("x")):(e.classList.remove(Cr.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=t.isRtl===!0?t.contentWidth:0),t.scrollbarYActive?e.classList.add(Cr.state.active("y")):(e.classList.remove(Cr.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function X_(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function CX(t,e){var n={width:e.railXWidth},r=Math.floor(t.scrollTop);e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-r:n.top=e.scrollbarXTop+r,fs(e.scrollbarXRail,n);var a={top:r,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?a.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:a.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?a.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth*2-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:a.left=e.scrollbarYLeft+t.scrollLeft,fs(e.scrollbarYRail,a),fs(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),fs(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}function EX(t){t.element,t.event.bind(t.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarYRail,"mousedown",function(e){var n=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top,r=n>t.scrollbarYTop?1:-1;t.element.scrollTop+=r*t.containerHeight,au(t),e.stopPropagation()}),t.event.bind(t.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarXRail,"mousedown",function(e){var n=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left,r=n>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=r*t.containerWidth,au(t),e.stopPropagation()})}function TX(t){Y_(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),Y_(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function Y_(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],i=e[4],o=e[5],u=e[6],l=e[7],c=e[8],f=t.element,d=null,h=null,m=null;function v(x){x.touches&&x.touches[0]&&(x[a]=x.touches[0].pageY),f[u]=d+m*(x[a]-h),TB(t,l),au(t),x.stopPropagation(),x.preventDefault()}function y(){DB(t,l),t[c].classList.remove(Cr.state.clicking),t.event.unbind(t.ownerDocument,"mousemove",v)}function b(x,w){d=f[u],w&&x.touches&&(x[a]=x.touches[0].pageY),h=x[a],m=(t[r]-t[n])/(t[s]-t[o]),w?t.event.bind(t.ownerDocument,"touchmove",v):(t.event.bind(t.ownerDocument,"mousemove",v),t.event.once(t.ownerDocument,"mouseup",y),x.preventDefault()),t[c].classList.add(Cr.state.clicking),x.stopPropagation()}t.event.bind(t[i],"mousedown",function(x){b(x)}),t.event.bind(t[i],"touchstart",function(x){b(x,!0)})}function DX(t){var e=t.element,n=function(){return qu(e,":hover")},r=function(){return qu(t.scrollbarX,":focus")||qu(t.scrollbarY,":focus")};function a(s,i){var o=Math.floor(e.scrollTop);if(s===0){if(!t.scrollbarYActive)return!1;if(o===0&&i>0||o>=t.contentHeight-t.containerHeight&&i<0)return!t.settings.wheelPropagation}var u=e.scrollLeft;if(i===0){if(!t.scrollbarXActive)return!1;if(u===0&&s<0||u>=t.contentWidth-t.containerWidth&&s>0)return!t.settings.wheelPropagation}return!0}t.event.bind(t.ownerDocument,"keydown",function(s){if(!(s.isDefaultPrevented&&s.isDefaultPrevented()||s.defaultPrevented)&&!(!n()&&!r())){var i=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(i){if(i.tagName==="IFRAME")i=i.contentDocument.activeElement;else for(;i.shadowRoot;)i=i.shadowRoot.activeElement;if(SX(i))return}var o=0,u=0;switch(s.which){case 37:s.metaKey?o=-t.contentWidth:s.altKey?o=-t.containerWidth:o=-30;break;case 38:s.metaKey?u=t.contentHeight:s.altKey?u=t.containerHeight:u=30;break;case 39:s.metaKey?o=t.contentWidth:s.altKey?o=t.containerWidth:o=30;break;case 40:s.metaKey?u=-t.contentHeight:s.altKey?u=-t.containerHeight:u=-30;break;case 32:s.shiftKey?u=t.containerHeight:u=-t.containerHeight;break;case 33:u=t.containerHeight;break;case 34:u=-t.containerHeight;break;case 36:u=t.contentHeight;break;case 35:u=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&o!==0||t.settings.suppressScrollY&&u!==0||(e.scrollTop-=u,e.scrollLeft+=o,au(t),a(o,u)&&s.preventDefault())}})}function AX(t){var e=t.element;function n(i,o){var u=Math.floor(e.scrollTop),l=e.scrollTop===0,c=u+e.offsetHeight===e.scrollHeight,f=e.scrollLeft===0,d=e.scrollLeft+e.offsetWidth===e.scrollWidth,h;return Math.abs(o)>Math.abs(i)?h=l||c:h=f||d,h?!t.settings.wheelPropagation:!0}function r(i){var o=i.deltaX,u=-1*i.deltaY;return(typeof o>"u"||typeof u>"u")&&(o=-1*i.wheelDeltaX/6,u=i.wheelDeltaY/6),i.deltaMode&&i.deltaMode===1&&(o*=10,u*=10),o!==o&&u!==u&&(o=0,u=i.wheelDelta),i.shiftKey?[-u,-o]:[o,u]}function a(i,o,u){if(!vh.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(i))return!1;for(var l=i;l&&l!==e;){if(l.classList.contains(Cr.element.consuming))return!0;var c=mo(l);if(u&&c.overflowY.match(/(scroll|auto)/)){var f=l.scrollHeight-l.clientHeight;if(f>0&&(l.scrollTop>0&&u<0||l.scrollTop<f&&u>0))return!0}if(o&&c.overflowX.match(/(scroll|auto)/)){var d=l.scrollWidth-l.clientWidth;if(d>0&&(l.scrollLeft>0&&o<0||l.scrollLeft<d&&o>0))return!0}l=l.parentNode}return!1}function s(i){var o=r(i),u=o[0],l=o[1];if(!a(i.target,u,l)){var c=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(l?e.scrollTop-=l*t.settings.wheelSpeed:e.scrollTop+=u*t.settings.wheelSpeed,c=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(u?e.scrollLeft+=u*t.settings.wheelSpeed:e.scrollLeft-=l*t.settings.wheelSpeed,c=!0):(e.scrollTop-=l*t.settings.wheelSpeed,e.scrollLeft+=u*t.settings.wheelSpeed),au(t),c=c||n(u,l),c&&!i.ctrlKey&&(i.stopPropagation(),i.preventDefault())}}typeof window.onwheel<"u"?t.event.bind(e,"wheel",s):typeof window.onmousewheel<"u"&&t.event.bind(e,"mousewheel",s)}function $X(t){if(!vh.supportsTouch&&!vh.supportsIePointer)return;var e=t.element;function n(m,v){var y=Math.floor(e.scrollTop),b=Math.ceil(e.scrollLeft),x=Math.abs(m),w=Math.abs(v);if(!t.settings.wheelPropagation)return!0;if(w>x){if(t.settings.suppressScrollY)return!1;if(v>0)return y!==0;if(v<0)return y<t.contentHeight-t.containerHeight}else if(x>w){if(t.settings.suppressScrollX)return!1;if(m>0)return b!==0;if(v<0)return b<t.contentWidth-t.containerWidth}return!0}function r(m,v){e.scrollTop-=v,e.scrollLeft-=m,au(t)}var a={},s=0,i={},o=null;function u(m){return m.targetTouches?m.targetTouches[0]:m}function l(m){return m.pointerType&&m.pointerType==="pen"&&m.buttons===0?!1:!!(m.targetTouches&&m.targetTouches.length===1||m.pointerType&&m.pointerType!=="mouse"&&m.pointerType!==m.MSPOINTER_TYPE_MOUSE)}function c(m){if(l(m)){var v=u(m);a.pageX=v.pageX,a.pageY=v.pageY,s=new Date().getTime(),o!==null&&clearInterval(o)}}function f(m,v,y){if(!e.contains(m))return!1;for(var b=m;b&&b!==e;){if(b.classList.contains(Cr.element.consuming))return!0;var x=mo(b);if(y&&x.overflowY.match(/(scroll|auto)/)){var w=b.scrollHeight-b.clientHeight;if(w>0&&(b.scrollTop>0&&y<0||b.scrollTop<w&&y>0))return!0}if(v&&x.overflowX.match(/(scroll|auto)/)){var N=b.scrollWidth-b.clientWidth;if(N>0&&(b.scrollLeft>0&&v<0||b.scrollLeft<N&&v>0))return!0}b=b.parentNode}return!1}function d(m){if(l(m)){var v=u(m),y={pageX:v.pageX,pageY:v.pageY},b=y.pageX-a.pageX,x=y.pageY-a.pageY;if(f(m.target,b,x))return;r(b,x),a=y;var w=new Date().getTime(),N=w-s;N>0&&(i.x=b/N,i.y=x/N,s=w),m.cancelable&&n(b,x)&&m.preventDefault()}}function h(){t.settings.swipeEasing&&(clearInterval(o),o=setInterval(function(){if(t.isInitialized){clearInterval(o);return}if(!i.x&&!i.y){clearInterval(o);return}if(Math.abs(i.x)<.01&&Math.abs(i.y)<.01){clearInterval(o);return}r(i.x*30,i.y*30),i.x*=.8,i.y*=.8},10))}vh.supportsTouch?(t.event.bind(e,"touchstart",c),t.event.bind(e,"touchmove",d),t.event.bind(e,"touchend",h)):vh.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",c),t.event.bind(e,"pointermove",d),t.event.bind(e,"pointerup",h)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",c),t.event.bind(e,"MSPointerMove",d),t.event.bind(e,"MSPointerUp",h)))}var kX=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},IX={"click-rail":EX,"drag-thumb":TX,keyboard:DX,wheel:AX,touch:$X},cm=function(e,n){var r=this;if(n===void 0&&(n={}),typeof e=="string"&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add(Cr.main),this.settings=kX();for(var a in n)this.settings[a]=n[a];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var s=function(){return e.classList.add(Cr.state.focus)},i=function(){return e.classList.remove(Cr.state.focus)};this.isRtl=mo(e).direction==="rtl",this.isRtl===!0&&e.classList.add(Cr.rtl),this.isNegativeScroll=function(){var l=e.scrollLeft,c=null;return e.scrollLeft=-1,c=e.scrollLeft<0,e.scrollLeft=l,c}(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new jd,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=vy(Cr.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=vy(Cr.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",s),this.event.bind(this.scrollbarX,"blur",i),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var o=mo(this.scrollbarXRail);this.scrollbarXBottom=parseInt(o.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=ir(o.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=ir(o.borderLeftWidth)+ir(o.borderRightWidth),fs(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=ir(o.marginLeft)+ir(o.marginRight),fs(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=vy(Cr.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=vy(Cr.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",s),this.event.bind(this.scrollbarY,"blur",i),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var u=mo(this.scrollbarYRail);this.scrollbarYRight=parseInt(u.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=ir(u.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?NX(this.scrollbarY):null,this.railBorderYWidth=ir(u.borderTopWidth)+ir(u.borderBottomWidth),fs(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=ir(u.marginTop)+ir(u.marginBottom),fs(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(l){return IX[l](r)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(l){return r.onScroll(l)}),au(this)};cm.prototype.update=function(e){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,fs(this.scrollbarXRail,{display:"block"}),fs(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=ir(mo(this.scrollbarXRail).marginLeft)+ir(mo(this.scrollbarXRail).marginRight),this.railYMarginHeight=ir(mo(this.scrollbarYRail).marginTop)+ir(mo(this.scrollbarYRail).marginBottom),fs(this.scrollbarXRail,{display:"none"}),fs(this.scrollbarYRail,{display:"none"}),au(this),S0(this,"top",0,!1,!0,e),S0(this,"left",0,!1,!0,e),fs(this.scrollbarXRail,{display:""}),fs(this.scrollbarYRail,{display:""}))};cm.prototype.onScroll=function(e){this.isAlive&&(au(this),S0(this,"top",this.element.scrollTop-this.lastScrollTop),S0(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};cm.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),ed(this.scrollbarX),ed(this.scrollbarY),ed(this.scrollbarXRail),ed(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};cm.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};function vd(t){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vd(t)}var _X=["className","style","option","options","containerRef","onScrollY","onScrollX","onScrollUp","onScrollDown","onScrollLeft","onScrollRight","onYReachStart","onYReachEnd","onXReachStart","onXReachEnd","component","onSync","children"];function yN(){return yN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yN.apply(this,arguments)}function OX(t,e){if(t==null)return{};var n=FX(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function RX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BX(r.key),r)}}function PX(t,e,n){return e&&MX(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function BX(t){var e=LX(t,"string");return vd(e)=="symbol"?e:String(e)}function LX(t,e){if(vd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function zX(t,e,n){return e=N0(e),WX(t,$B()?Reflect.construct(e,n||[],N0(t).constructor):e.apply(t,n))}function WX(t,e){if(e&&(vd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kB(t)}function $B(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($B=function(){return!!t})()}function N0(t){return N0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},N0(t)}function kB(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UX(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bN(t,e)}function bN(t,e){return bN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},bN(t,e)}var n0={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(n0);var IB=function(t){UX(e,t);function e(n){var r;return RX(this,e),r=zX(this,e,[n]),r.handleRef=r.handleRef.bind(kB(r)),r._handlerByEvent={},r}return PX(e,[{key:"componentDidMount",value:function(){this.props.option&&console.warn('react-perfect-scrollbar: the "option" prop has been deprecated in favor of "options"'),this._ps=new cm(this._container,this.props.options||this.props.option),this._updateEventHook(),this._updateClassName()}},{key:"componentDidUpdate",value:function(r){this._updateEventHook(r),this.updateScroll(),r.className!==this.props.className&&this._updateClassName()}},{key:"componentWillUnmount",value:function(){var r=this;Object.keys(this._handlerByEvent).forEach(function(a){var s=r._handlerByEvent[a];s&&r._container.removeEventListener(a,s,!1)}),this._handlerByEvent={},this._ps.destroy(),this._ps=null}},{key:"_updateEventHook",value:function(){var r=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(n0).forEach(function(s){var i=r.props[n0[s]],o=a[n0[s]];if(i!==o){if(o){var u=r._handlerByEvent[s];r._container.removeEventListener(s,u,!1),r._handlerByEvent[s]=null}if(i){var l=function(){return i(r._container)};r._container.addEventListener(s,l,!1),r._handlerByEvent[s]=l}}})}},{key:"_updateClassName",value:function(){var r=this.props.className,a=this._container.className.split(" ").filter(function(s){return s.match(/^ps([-_].+|)$/)}).join(" ");this._container&&(this._container.className="scrollbar-container".concat(r?" ".concat(r):"").concat(a?" ".concat(a):""))}},{key:"updateScroll",value:function(){var r=this.props.onSync;typeof r=="function"?r(this._ps):this._ps.update()}},{key:"handleRef",value:function(r){var a,s;this._container=r,(a=(s=this.props).containerRef)===null||a===void 0||a.call(s,r)}},{key:"render",value:function(){var r=this.props;r.className;var a=r.style;r.option,r.options,r.containerRef,r.onScrollY,r.onScrollX,r.onScrollUp,r.onScrollDown,r.onScrollLeft,r.onScrollRight,r.onYReachStart,r.onYReachEnd,r.onXReachStart,r.onXReachEnd;var s=r.component;r.onSync;var i=r.children,o=OX(r,_X),u=typeof s>"u"?"div":s;return _e.createElement(u,yN({style:a,ref:this.handleRef},o),i)}}]),e}(vn.Component);function Oh(t){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(t)}var qX=["className","variant","children"];function wN(){return wN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wN.apply(this,arguments)}function VX(t,e,n){return e=jX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jX(t){var e=HX(t,"string");return Oh(e)=="symbol"?e:String(e)}function HX(t,e){if(Oh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Oh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GX(t,e){if(t==null)return{};var n=KX(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function KX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var Q_=function(e){var n=e.className,r=n===void 0?void 0:n,a=e.variant,s=a===void 0?"default":a,i=e.children,o=GX(e,qX),u="".concat(Ft,"-loader"),l=_e.Children.count(i)>0?"".concat(u,"--content"):"";return _e.createElement("div",wN({},o,{className:an(u,l,VX({},"".concat(u,"--variant-").concat(s),s!=="default"),r),role:"status"}),i)};function Fh(t){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(t)}var XX=["className","children","blur","grayscale"];function xN(){return xN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xN.apply(this,arguments)}function J_(t,e,n){return e=YX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YX(t){var e=QX(t,"string");return Fh(e)=="symbol"?e:String(e)}function QX(t,e){if(Fh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Fh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JX(t,e){if(t==null)return{};var n=ZX(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ZX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var eY=function(e){var n=e.className,r=n===void 0?"":n,a=e.children,s=a===void 0?void 0:a,i=e.blur,o=i===void 0?!1:i,u=e.grayscale,l=u===void 0?!1:u,c=JX(e,XX),f="".concat(Ft,"-overlay"),d="".concat(f,"--blur"),h="".concat(f,"--grayscale");return _e.createElement("div",xN({},c,{className:an(f,J_({},d,o),J_({},h,l),r)}),_e.createElement("div",{className:"".concat(f,"__content")},s))},tY=["sender","sentTime","children","className"];function SN(){return SN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SN.apply(this,arguments)}function nY(t,e){if(t==null)return{};var n=rY(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var yE=function(e){var n=e.sender,r=n===void 0?"":n,a=e.sentTime,s=a===void 0?"":a,i=e.children,o=i===void 0?void 0:i,u=e.className,l=nY(e,tY),c="".concat(Ft,"-message__header");return _e.createElement("div",SN({},l,{className:an(c,u)}),typeof o<"u"?o:_e.createElement(_e.Fragment,null,_e.createElement("div",{className:"".concat(Ft,"-message__sender-name")},r),_e.createElement("div",{className:"".concat(Ft,"-message__sent-time")},s)))};yE.displayName="Message.Header";var aY=["sender","sentTime","children","className"];function NN(){return NN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NN.apply(this,arguments)}function sY(t,e){if(t==null)return{};var n=iY(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var bE=function(e){var n=e.sender,r=n===void 0?"":n,a=e.sentTime,s=a===void 0?"":a,i=e.children,o=i===void 0?void 0:i,u=e.className,l=sY(e,aY),c="".concat(Ft,"-message__footer");return _e.createElement("div",NN({},l,{className:an(c,u)}),typeof o<"u"?o:_e.createElement(_e.Fragment,null,_e.createElement("div",{className:"".concat(Ft,"-message__sender-name")},r),_e.createElement("div",{className:"".concat(Ft,"-message__sent-time")},s)))};bE.displayName="Message.Footer";var wE=function(e){var n=e.children,r=e.className,a="".concat(Ft,"-message__custom-content");return _e.createElement("div",{className:an(a,r)},n)};wE.displayName="Message.CustomContent";var C0=function(e){var n=e.src,r=e.width,a=e.height,s=e.alt,i=e.className,o="".concat(Ft,"-message__image-content"),u={width:typeof r=="number"?"".concat(r,"px"):typeof r=="string"?r:void 0,height:typeof a=="number"?"".concat(a,"px"):typeof a=="string"?a:void 0};return _e.createElement("div",{className:an(o,i)},_e.createElement("img",{src:n,style:u,alt:s}))};C0.displayName="Message.ImageContent";var E0=function(e){var n=e.html,r=e.className,a="".concat(Ft,"-message__html-content"),s=function(){return{__html:n}};return _e.createElement("div",{className:an(a,r),dangerouslySetInnerHTML:s()})};E0.displayName="Message.HtmlContent";var T0=function(e){var n=e.text,r=e.className,a=e.children,s="".concat(Ft,"-message__text-content"),i=a??n;return _e.createElement("div",{className:an(s,r)},i)};T0.displayName="Message.TextContent";var oY=["model","avatarSpacer","avatarPosition","type","payload","children","className"];function CN(){return CN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CN.apply(this,arguments)}function Z_(t,e,n){return e=uY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uY(t){var e=lY(t,"string");return yd(e)=="symbol"?e:String(e)}function lY(t,e){if(yd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yd(t){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yd(t)}function cY(t,e){return hY(t)||pY(t,e)||dY(t,e)||fY()}function fY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dY(t,e){if(t){if(typeof t=="string")return eO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eO(t,e)}}function eO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pY(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,s,i,o=[],u=!0,l=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(u=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return o}}function hY(t){if(Array.isArray(t))return t}function mY(t,e){if(t==null)return{};var n=gY(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var yl=function(e){var n,r,a=e.model,s=a.message,i=s===void 0?"":s,o=a.sentTime,u=o===void 0?"":o,l=a.sender,c=l===void 0?"":l,f=a.direction,d=f===void 0?1:f,h=a.position,m=a.type,v=a.payload,y=e.avatarSpacer,b=y===void 0?!1:y,x=e.avatarPosition,w=x===void 0?void 0:x,N=e.type,C=N===void 0?"html":N,E=e.payload,$=e.children,I=e.className,D=mY(e,oY),k="".concat(Ft,"-message"),A=om($,[Cc,yE,bE,E0,T0,C0,wE]),O=cY(A,7),B=O[0],z=O[1],L=O[2],F=O[3],R=O[4],q=O[5],M=O[6],G=function(){if(d===0||d==="incoming")return"".concat(k,"--incoming");if(d===1||d==="outgoing")return"".concat(k,"--outgoing")}(),V=function(te){var ie="".concat(k,"--avatar-");if(te===0||te==="top-left"||te==="tl")return"".concat(ie,"tl");if(te===1||te==="top-right"||te==="tr")return"".concat(ie,"tr");if(te===2||te==="bottom-right"||te==="br")return"".concat(ie,"br");if(te===3||te==="bottom-left"||te==="bl")return"".concat(ie,"bl");if(te===4||te==="center-left"||te==="cl")return"".concat(ie,"cl");if(te===5||te==="center-right"||te==="cr")return"".concat(ie,"cr")}(w),H=function(te){var ie="".concat(Ft,"-message--");if(te==="single"||te===0)return"".concat(ie,"single");if(te==="first"||te===1)return"".concat(ie,"first");if(te==="normal"||te===2)return"";if(te==="last"||te===3)return"".concat(ie,"last")}(h),j=function(){return(c==null?void 0:c.length)>0&&(u==null?void 0:u.length)>0?"".concat(c,": ").concat(u):(c==null?void 0:c.length)>0&&(typeof u>"u"||(u==null?void 0:u.length)===0)?c:null}(),ne=(n=(r=F??R)!==null&&r!==void 0?r:q)!==null&&n!==void 0?n:M,ue=ne??function(){var te=m??C,ie=v??i,Z=ie??E,X=yd(Z)==="object"?J4(Z):"";if(te==="html"&&X!=="Message.CustomContent")return _e.createElement(E0,{html:Z});if(te==="text")return _e.createElement(T0,{text:Z});if(te==="image")return _e.createElement(C0,Z);if(te==="custom"||X==="Message.CustomContent")return Z}();return _e.createElement("section",CN({},D,{"aria-label":j,className:an(k,G,Z_({},"".concat(k,"--avatar-spacer"),b),H,V,I)},Z_({},"data-".concat(Ft,"-message"),"")),typeof B<"u"&&_e.createElement("div",{className:"".concat(k,"__avatar")},B),_e.createElement("div",{className:"".concat(k,"__content-wrapper")},z,_e.createElement("div",{className:"".concat(k,"__content")},ue),L))};yl.Header=yE;yl.HtmlContent=E0;yl.TextContent=T0;yl.ImageContent=C0;yl.CustomContent=wE;yl.Footer=bE;var vY=["children","className"];function EN(){return EN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EN.apply(this,arguments)}function yY(t,e){if(t==null)return{};var n=bY(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var xE=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,s=yY(e,vY),i="".concat(Ft,"-message-group__header");return _e.createElement("div",EN({},s,{className:an(i,a)}),r)};xE.displayName="MessageGroup.Header";var wY=["children","className"];function TN(){return TN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TN.apply(this,arguments)}function xY(t,e){if(t==null)return{};var n=SY(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function SY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var SE=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,s=xY(e,wY),i="".concat(Ft,"-message-group__footer");return _e.createElement("div",TN({},s,{className:an(i,a)}),r)};SE.displayName="MessageGroup.Footer";var NY=["children","className"];function DN(){return DN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DN.apply(this,arguments)}function CY(t,e){if(t==null)return{};var n=EY(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function EY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var NE=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,s=CY(e,NY),i="".concat(Ft,"-message-group");return _e.createElement("div",DN({},s,{className:an("".concat(i,"__messages"),a)}),r)};NE.displayName="MessageGroup.Messages";function Rh(t){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(t)}var TY=["direction","avatarPosition","sender","sentTime","children","className"];function AN(){return AN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AN.apply(this,arguments)}function DY(t,e,n){return e=AY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AY(t){var e=$Y(t,"string");return Rh(e)=="symbol"?e:String(e)}function $Y(t,e){if(Rh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kY(t,e){return FY(t)||OY(t,e)||_Y(t,e)||IY()}function IY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Y(t,e){if(t){if(typeof t=="string")return tO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tO(t,e)}}function tO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function OY(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,s,i,o=[],u=!0,l=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(u=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return o}}function FY(t){if(Array.isArray(t))return t}function RY(t,e){if(t==null)return{};var n=MY(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function MY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var Pb=function(e){var n=e.direction,r=n===void 0?"incoming":n,a=e.avatarPosition,s=a===void 0?void 0:a,i=e.sender,o=i===void 0?"":i,u=e.sentTime,l=u===void 0?"":u,c=e.children,f=e.className,d=RY(e,TY),h="".concat(Ft,"-message-group"),m=function(){if(r===0||r==="incoming")return"".concat(h,"--incoming");if(r===1||r==="outgoing")return"".concat(h,"--outgoing")}(),v=function(){var $="".concat(h,"--avatar-");if(typeof s=="string"&&(s==="tl"||s==="top-left"||s==="tr"||s==="top-right"||s==="bl"||s==="bottom-right"||s==="br"||s==="bottom-right"||s==="cl"||s==="center-left"||s==="cr"||s==="center-right"))return"".concat($).concat(s)}(),y=om(c,[Cc,xE,SE,NE]),b=kY(y,4),x=b[0],w=b[1],N=b[2],C=b[3],E=function(){return o.length>0&&l.length>0?"".concat(o,": ").concat(l):o.length>0&&l.length===0?o:null}();return _e.createElement("section",AN({"aria-label":E},d,{className:an(h,m,v,f)},DY({},"data-".concat(Ft,"-message-group"),"")),typeof x<"u"&&_e.createElement("div",{className:"".concat(h,"__avatar")},x),_e.createElement("div",{className:"".concat(h,"__content")},w,C,N))};Pb.Header=xE;Pb.Footer=SE;Pb.Messages=NE;var PY=["content","as","children","className"];function $N(){return $N=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$N.apply(this,arguments)}function BY(t,e){if(t==null)return{};var n=LY(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function LY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var zY=function(e){var n=e.content,r=n===void 0?void 0:n,a=e.as,s=a===void 0?"div":a,i=e.children,o=i===void 0?void 0:i,u=e.className,l=BY(e,PY),c="".concat(Ft,"-message-separator"),f=function(){return typeof s=="string"&&s.length>0?s:"div"}();return _e.createElement(f,$N({},l,{className:an(c,u)}),fG(o)===!0?r:o)},WY=["className","children"];function kN(){return kN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kN.apply(this,arguments)}function UY(t,e){if(t==null)return{};var n=qY(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var Bb=function(e){var n=e.className,r=e.children,a=UY(e,WY);return _e.createElement("div",kN({},a,{className:n}),r)};Bb.displayName="MessageList.Content";var VY=["children","typingIndicator","loading","loadingMore","loadingMorePosition","onYReachStart","onYReachEnd","className","disableOnYReachWhenNoScroll","scrollBehavior","autoScrollToBottom","autoScrollToBottomOnMount"];function bd(t){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bd(t)}function Mh(){return Mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mh.apply(this,arguments)}function jY(t,e){return XY(t)||KY(t,e)||GY(t,e)||HY()}function HY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GY(t,e){if(t){if(typeof t=="string")return nO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nO(t,e)}}function nO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function KY(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,s,i,o=[],u=!0,l=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(u=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return o}}function XY(t){if(Array.isArray(t))return t}function YY(t,e){if(t==null)return{};var n=QY(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function QY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function JY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,OB(r.key),r)}}function eQ(t,e,n){return e&&ZY(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tQ(t,e,n){return e=D0(e),nQ(t,_B()?Reflect.construct(e,n||[],D0(t).constructor):e.apply(t,n))}function nQ(t,e){if(e&&(bd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gf(t)}function _B(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_B=function(){return!!t})()}function D0(t){return D0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},D0(t)}function Gf(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IN(t,e)}function IN(t,e){return IN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},IN(t,e)}function rc(t,e,n){return e=OB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OB(t){var e=aQ(t,"string");return bd(e)=="symbol"?e:String(e)}function aQ(t,e){if(bd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CE=function(t){rQ(e,t);function e(n){var r;return JY(this,e),r=tQ(this,e,[n]),rc(Gf(r),"handleResize",function(){r.containerRef.current.clientHeight<r.lastClientHeight&&r.scrollToEnd(r.props.scrollBehavior),r.scrollRef.current.updateScroll()}),rc(Gf(r),"handleContainerResize",function(){r.resizeTicking===!1&&(window.requestAnimationFrame(function(){var a=r.containerRef.current;if(a){var s=a.clientHeight,i=s-r.lastClientHeight;i>=1?r.preventScrollTop===!1&&(a.scrollTop=Math.round(a.scrollTop)-i):a.scrollTop=a.scrollTop-i,r.lastClientHeight=a.clientHeight,r.scrollRef.current.updateScroll()}r.resizeTicking=!1}),r.resizeTicking=!0)}),rc(Gf(r),"isSticked",function(){var a=r.containerRef.current;return a.scrollHeight===Math.round(a.scrollTop+a.clientHeight)}),rc(Gf(r),"handleScroll",function(){r.scrollTicking===!1&&(window.requestAnimationFrame(function(){r.noScroll===!1?r.preventScrollTop=r.isSticked():r.noScroll=!1,r.scrollTicking=!1}),r.scrollTicking=!0)}),rc(Gf(r),"getLastMessageOrGroup",function(){var a=r.containerRef.current.querySelector("[data-".concat(Ft,"-message-list]>[data-").concat(Ft,"-message]:last-of-type,[data-").concat(Ft,"-message-list]>[data-").concat(Ft,"-message-group]:last-of-type")),s=a==null?void 0:a.querySelector("[data-".concat(Ft,"-message]:last-of-type"));return{lastElement:a,lastMessageInGroup:s}}),r.scrollPointRef=_e.createRef(),r.containerRef=_e.createRef(),r.scrollRef=_e.createRef(),r.lastClientHeight=0,r.preventScrollTop=!1,r.resizeObserver=void 0,r.scrollTicking=!1,r.resizeTicking=!1,r.noScroll=void 0,r}return eQ(e,[{key:"getSnapshotBeforeUpdate",value:function(){var r=this.containerRef.current,a=Math.round(r.scrollTop+r.clientHeight),s=r.scrollHeight===a||r.scrollHeight+1===a||r.scrollHeight-1===a;return{sticky:s,clientHeight:r.clientHeight,scrollHeight:r.scrollHeight,lastMessageOrGroup:this.getLastMessageOrGroup(),diff:r.scrollHeight-r.scrollTop}}},{key:"componentDidMount",value:function(){this.props.autoScrollToBottomOnMount===!0&&this.scrollToEnd(this.props.scrollBehavior),this.lastClientHeight=this.containerRef.current.clientHeight,window.addEventListener("resize",this.handleResize),typeof window.ResizeObserver=="function"&&(this.resizeObserver=new ResizeObserver(this.handleContainerResize),this.resizeObserver.observe(this.containerRef.current)),this.containerRef.current.addEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(r,a,s){var i=this.props.autoScrollToBottom;if(typeof s<"u"){var o=this.containerRef.current,u=this.getLastMessageOrGroup(),l=u.lastElement,c=u.lastMessageInGroup;if(l===s.lastMessageOrGroup.lastElement&&(typeof c>"u"||c===s.lastMessageOrGroup.lastMessageInGroup)&&(o.scrollTop=o.scrollHeight-s.diff+(this.lastClientHeight-o.clientHeight)),s.sticky===!0)i===!0&&this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0;else if(s.clientHeight<this.lastClientHeight){var f=o.scrollTop+this.lastClientHeight;o.scrollHeight===f||o.scrollHeight+1===f||o.scrollHeight-1===f?i===!0&&(this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0):this.preventScrollTop=!1}else this.preventScrollTop=!1,l===s.lastMessageOrGroup.lastElement&&(typeof c>"u"||c===s.lastMessageOrGroup.lastMessageInGroup)&&o.scrollTop===0&&o.scrollHeight>s.scrollHeight&&(o.scrollTop=o.scrollHeight-s.scrollHeight);this.lastClientHeight=s.clientHeight}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),typeof this.resizeObserver<"u"&&this.resizeObserver.disconnect(),this.containerRef.current.removeEventListener("scroll",this.handleScroll)}},{key:"scrollToEnd",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollBehavior,a=this.containerRef.current,s=this.scrollPointRef.current,i=a.getBoundingClientRect(),o=s.getBoundingClientRect(),u=o.top+a.scrollTop-i.top;a.scrollBy?a.scrollBy({top:u,behavior:r}):a.scrollTop=u,this.lastClientHeight=a.clientHeight,this.noScroll=!0}},{key:"render",value:function(){var r=this,a=this.props,s=a.children,i=a.typingIndicator,o=a.loading,u=a.loadingMore,l=a.loadingMorePosition,c=a.onYReachStart,f=a.onYReachEnd,d=a.className,h=a.disableOnYReachWhenNoScroll;a.scrollBehavior,a.autoScrollToBottom,a.autoScrollToBottomOnMount;var m=YY(a,VY),v="".concat(Ft,"-message-list"),y=om(s,[Bb]),b=jY(y,1),x=b[0];return _e.createElement("div",Mh({},m,{className:an(v,d)}),u&&_e.createElement("div",{className:an("".concat(v,"__loading-more"),rc({},"".concat(v,"__loading-more--bottom"),l==="bottom"))},_e.createElement(Q_,null)),o&&_e.createElement(eY,null,_e.createElement(Q_,null)),_e.createElement(IB,Mh({onYReachStart:c,onYReachEnd:f,onSync:function(N){return N.update(h)},className:"".concat(v,"__scroll-wrapper"),ref:this.scrollRef,containerRef:function(N){return r.containerRef.current=N},options:{suppressScrollX:!0}},rc({},"data-".concat(Ft,"-message-list"),""),{style:{overscrollBehaviorY:"none",overflowAnchor:"auto",touchAction:"none"}}),x||s,_e.createElement("div",{className:"".concat(v,"__scroll-to"),ref:this.scrollPointRef})),typeof i<"u"&&_e.createElement("div",{className:"".concat(v,"__typing-indicator-container")},i))}}]),e}(_e.Component);CE.displayName="MessageList";function sQ(t,e){var n=vn.useRef(),r=function(s){return n.current.scrollToEnd(s)};return vn.useImperativeHandle(e,function(){return{scrollToBottom:r}}),_e.createElement(CE,Mh({ref:n},t))}var Hd=vn.forwardRef(sQ);Hd.propTypes={children:Z4([yl,Pb,zY,Bb]),typingIndicator:st.node,loading:st.bool,loadingMore:st.bool,loadingMorePosition:st.oneOf(["top","bottom"]),onYReachStart:st.func,onYReachEnd:st.func,disableOnYReachWhenNoScroll:st.bool,autoScrollToBottom:st.bool,autoScrollToBottomOnMount:st.bool,scrollBehavior:st.oneOf(["auto","smooth"]),className:st.string};Hd.defaultProps={typingIndicator:void 0,loading:!1,loadingMore:!1,loadingMorePosition:"top",disableOnYReachWhenNoScroll:!1,autoScrollToBottom:!0,autoScrollToBottomOnMount:!0,scrollBehavior:"auto"};CE.defaultProps=Hd.defaultProps;Hd.Content=Bb;function wd(t){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wd(t)}function iQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oQ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RB(r.key),r)}}function uQ(t,e,n){return e&&oQ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lQ(t,e,n){return e=A0(e),cQ(t,FB()?Reflect.construct(e,n||[],A0(t).constructor):e.apply(t,n))}function cQ(t,e){if(e&&(wd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oc(t)}function FB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FB=function(){return!!t})()}function A0(t){return A0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},A0(t)}function oc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_N(t,e)}function _N(t,e){return _N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},_N(t,e)}function hS(t,e,n){return e=RB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RB(t){var e=dQ(t,"string");return wd(e)=="symbol"?e:String(e)}function dQ(t,e){if(wd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pQ=function(e,n){var r=document.activeElement===e,a=document.createTextNode("");if(e.appendChild(a),a!==null&&a.nodeValue!==null&&(r||n)){var s=window.getSelection();if(s!==null){var i=document.createRange();i.setStart(a,a.nodeValue.length),i.collapse(!0),s.removeAllRanges(),s.addRange(i)}}},hQ=function(t){fQ(e,t);function e(n){var r;return iQ(this,e),r=lQ(this,e,[n]),hS(oc(r),"innerHTML",function(){var a=oc(r),s=a.props.value;return{__html:typeof s<"u"?s:""}}),hS(oc(r),"handleKeyPress",function(a){var s=oc(r),i=s.props.onKeyPress;i==null||i(a)}),hS(oc(r),"handleInput",function(a){var s=oc(r),i=s.props.onChange,o=a.target;i==null||i(o.innerHTML,o.textContent,o.innerText)}),r.msgRef=_e.createRef(),r}return uQ(e,[{key:"focus",value:function(){typeof this.msgRef.current<"u"&&this.msgRef.current.focus()}},{key:"componentDidMount",value:function(){this.props.autoFocus===!0&&this.msgRef.current.focus()}},{key:"shouldComponentUpdate",value:function(r){var a=this.msgRef,s=this.props,i=s.placeholder,o=s.disabled,u=s.activateAfterChange;return typeof a.current>"u"||r.value!==a.current.innerHTML?!0:i!==r.placeholder||o!==r.disabled||u!==r.activateAfterChange}},{key:"componentDidUpdate",value:function(){var r=this.msgRef,a=this.props,s=a.value,i=a.activateAfterChange;s!==r.current.innerHTML&&(r.current.innerHTML=typeof s=="string"?s:""),pQ(r.current,i)}},{key:"render",value:function(){var r=this.msgRef,a=this.handleInput,s=this.handleKeyPress,i=this.innerHTML,o=this.props,u=o.placeholder,l=o.disabled,c=o.className,f=typeof u=="string"?u:"";return _e.createElement("div",{ref:r,className:c,contentEditable:l===!1,disabled:l,"data-placeholder":f,onInput:a,onKeyPress:s,dangerouslySetInnerHTML:i()})}}]),e}(vn.Component);function xd(t){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xd(t)}var mQ=["fancyScroll","children","forwardedRef"],gQ=["value","onSend","onChange","autoFocus","placeholder","fancyScroll","className","activateAfterChange","disabled","sendDisabled","sendOnReturnDisabled","attachDisabled","sendButton","attachButton","onAttachClick"];function vQ(t,e,n){return e=PB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ON(t,e){return xQ(t)||wQ(t,e)||bQ(t,e)||yQ()}function yQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bQ(t,e){if(t){if(typeof t=="string")return rO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rO(t,e)}}function rO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wQ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,s,i,o=[],u=!0,l=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(u=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return o}}function xQ(t){if(Array.isArray(t))return t}function rd(){return rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rd.apply(this,arguments)}function MB(t,e){if(t==null)return{};var n=SQ(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function SQ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function NQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CQ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,PB(r.key),r)}}function EQ(t,e,n){return e&&CQ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function PB(t){var e=TQ(t,"string");return xd(e)=="symbol"?e:String(e)}function TQ(t,e){if(xd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DQ(t,e,n){return e=$0(e),AQ(t,BB()?Reflect.construct(e,n||[],$0(t).constructor):e.apply(t,n))}function AQ(t,e){if(e&&(xd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Q(t)}function $Q(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BB=function(){return!!t})()}function $0(t){return $0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$0(t)}function kQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FN(t,e)}function FN(t,e){return FN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},FN(t,e)}function IQ(){var t=function(e){kQ(n,e);function n(){return NQ(this,n),DQ(this,n,arguments)}return EQ(n,[{key:"render",value:function(){var a=this.props,s=a.fancyScroll,i=a.children,o=a.forwardedRef,u=MB(a,mQ);return _e.createElement(_e.Fragment,null,s===!0&&_e.createElement(IB,rd({ref:function(c){return o.current=c}},u,{options:{suppressScrollX:!0}}),i),s===!1&&_e.createElement("div",rd({ref:o},u),i))}}]),n}(vn.Component);return _e.forwardRef(function(e,n){return _e.createElement(t,rd({forwardedRef:n},e))})}var _Q=IQ(),aO=function(e,n){var r=typeof e<"u"?e:n,a=vn.useState(r),s=ON(a,2),i=s[0],o=s[1],u=typeof e<"u"?e:i;return[u,function(l){o(l)}]};function OQ(t,e){var n=t.value,r=n===void 0?void 0:n,a=t.onSend,s=a===void 0?t0:a,i=t.onChange,o=i===void 0?t0:i,u=t.autoFocus,l=u===void 0?!1:u,c=t.placeholder,f=c===void 0?"":c,d=t.fancyScroll,h=d===void 0?!0:d,m=t.className,v=t.activateAfterChange,y=v===void 0?!1:v,b=t.disabled,x=b===void 0?!1:b,w=t.sendDisabled,N=t.sendOnReturnDisabled,C=N===void 0?!1:N,E=t.attachDisabled,$=E===void 0?!1:E,I=t.sendButton,D=I===void 0?!0:I,k=t.attachButton,A=k===void 0?!0:k,O=t.onAttachClick,B=O===void 0?t0:O,z=MB(t,gQ),L=vn.useRef(),F=vn.useRef(),R=aO(r,""),q=ON(R,2),M=q[0],G=q[1],V=aO(w,!0),H=ON(V,2),j=H[0],ne=H[1],ue=function(){typeof F.current<"u"&&F.current.focus()};vn.useImperativeHandle(e,function(){return{focus:ue}}),vn.useEffect(function(){l===!0&&ue()},[]),vn.useEffect(function(){typeof L.current.updateScroll=="function"&&L.current.updateScroll()});var te=function(){var Ne=F.current.msgRef.current;return[Ne.textContent,Ne.innerText,Ne.cloneNode(!0).childNodes]},ie=function(){if(M.length>0){r===void 0&&G(""),typeof w>"u"&&ne(!0);var Ne=te();s(M,Ne[0],Ne[1],Ne[2])}},Z=function(Ne){Ne.key==="Enter"&&Ne.shiftKey===!1&&C===!1&&(Ne.preventDefault(),ie())},X=function(Ne,Ee,Q){G(Ne),typeof w>"u"&&ne(Ee.length===0),typeof L.current.updateScroll=="function"&&L.current.updateScroll();var se=te();o(Ne,Ee,Q,se[2])},ae="".concat(Ft,"-message-input"),pe=typeof f=="string"?f:"";return _e.createElement("div",rd({},z,{className:an(ae,vQ({},"".concat(ae,"--disabled"),x),m)}),A===!0&&_e.createElement("div",{className:"".concat(ae,"__tools")},_e.createElement(nX,{onClick:B,disabled:x===!0||$===!0})),_e.createElement("div",{className:"".concat(ae,"__content-editor-wrapper")},_e.createElement(_Q,{fancyScroll:h,ref:L,className:"".concat(ae,"__content-editor-container")},_e.createElement(hQ,{ref:F,className:"".concat(ae,"__content-editor"),disabled:x,placeholder:pe,onKeyPress:Z,onChange:X,activateAfterChange:y,value:M}))),D===!0&&_e.createElement("div",{className:"".concat(ae,"__tools")},_e.createElement(YK,{onClick:ie,disabled:x===!0||j===!0})))}var Lb=vn.forwardRef(OQ);Lb.displayName="MessageInput";Lb.propTypes={value:st.string,placeholder:st.string,disabled:st.bool,sendOnReturnDisabled:st.bool,sendDisabled:st.bool,fancyScroll:st.bool,activateAfterChange:st.bool,autoFocus:st.bool,onChange:st.func,onSend:st.func,className:st.string,sendButton:st.bool,attachButton:st.bool,attachDisabled:st.bool,onAttachClick:st.func};var FQ=["className","children"];function RN(){return RN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RN.apply(this,arguments)}function RQ(t,e){if(t==null)return{};var n=MQ(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function MQ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var LB=function(e){var n=e.className,r=e.children,a=RQ(e,FQ),s="".concat(Ft,"-input-toolbox");return _e.createElement("div",RN({},a,{className:an(s,n)}),r)};LB.displayName="InputToolbox";var PQ=["children","className"];function MN(){return MN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MN.apply(this,arguments)}function BQ(t,e){return UQ(t)||WQ(t,e)||zQ(t,e)||LQ()}function LQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zQ(t,e){if(t){if(typeof t=="string")return sO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sO(t,e)}}function sO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function WQ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,s,i,o=[],u=!0,l=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(u=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return o}}function UQ(t){if(Array.isArray(t))return t}function qQ(t,e){if(t==null)return{};var n=VQ(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function VQ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var jQ=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,s=qQ(e,PQ),i="".concat(Ft,"-chat-container"),o=om(r,[Qu,Hd,Lb,LB]),u=BQ(o,4),l=u[0],c=u[1],f=u[2],d=u[3];return _e.createElement("div",MN({},s,{className:an(i,a)}),l,c,f,d)},bc="".concat(Ft,"-conversation");function Ph(t){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(t)}var HQ=["children","className","visible"];function PN(){return PN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PN.apply(this,arguments)}function GQ(t,e,n){return e=KQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KQ(t){var e=XQ(t,"string");return Ph(e)=="symbol"?e:String(e)}function XQ(t,e){if(Ph(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ph(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YQ(t,e){if(t==null)return{};var n=QQ(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function QQ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var JQ=function(e){var n=e.children,r=e.className,a=e.visible,s=YQ(e,HQ);return _e.createElement("div",PN({},s,{className:an("".concat(bc,"__operations"),GQ({},"".concat(bc,"__operations--visible"),a),r)}),_e.Children.count(n)>0?n:_e.createElement(gi,{icon:VK.faEllipsisV}))};JQ.displayName="Conversation.Operations";var ZQ=["lastSenderName","info","name","children","className"];function BN(){return BN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BN.apply(this,arguments)}function LN(t){"@babel/helpers - typeof";return LN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LN(t)}function eJ(t,e){if(t==null)return{};var n=tJ(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tJ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var nJ=function(e){var n=e.name;return _e.createElement(_e.Fragment,null,_e.createElement("div",{className:"".concat(bc,"__last-sender")},n),":")},rJ=function(e){var n=e.info;return _e.createElement("div",{className:"".concat(bc,"__info-content")},n)},aJ=function(e){var n=e.lastSenderName,r=e.info,a=e.name,s=e.children,i=e.className,o=eJ(e,ZQ),u=LN(n);return _e.createElement("div",BN({},o,{className:an("".concat(bc,"__content"),i)}),_e.Children.count(s)>0?s:_e.createElement(_e.Fragment,null,_e.createElement("div",{className:"".concat(bc,"__name")},a),_e.createElement("div",{className:"".concat(bc,"__info")},u!=="undefined"?_e.createElement(_e.Fragment,null,u==="string"?_e.createElement(nJ,{name:n}):n," "):null,typeof r<"u"&&_e.createElement(rJ,{info:r}))))};aJ.displayName="Conversation.Content";function Bh(t){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(t)}var sJ=["responsive","children","className"];function zN(){return zN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zN.apply(this,arguments)}function iJ(t,e,n){return e=oJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oJ(t){var e=uJ(t,"string");return Bh(e)=="symbol"?e:String(e)}function uJ(t,e){if(Bh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Bh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lJ(t,e){if(t==null)return{};var n=cJ(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cJ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var fJ=function(e){var n=e.responsive,r=n===void 0?!1:n,a=e.children,s=a===void 0?void 0:a,i=e.className,o=lJ(e,sJ),u="".concat(Ft,"-main-container");return _e.createElement("div",zN({},o,{className:an(u,iJ({},"".concat(u,"--responsive"),r),i)}),s)};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var dJ={prefix:"fas",iconName:"search",icon:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"]},pJ={prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]};function Lh(t){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lh(t)}var hJ=["placeholder","value","onChange","onClearClick","className","disabled"];function WN(){return WN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WN.apply(this,arguments)}function iO(t,e,n){return e=mJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mJ(t){var e=gJ(t,"string");return Lh(e)=="symbol"?e:String(e)}function gJ(t,e){if(Lh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oO(t,e){return wJ(t)||bJ(t,e)||yJ(t,e)||vJ()}function vJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yJ(t,e){if(t){if(typeof t=="string")return uO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uO(t,e)}}function uO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bJ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,s,i,o=[],u=!0,l=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(u=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return o}}function wJ(t){if(Array.isArray(t))return t}function xJ(t,e){if(t==null)return{};var n=SJ(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function SJ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var NJ=function(e,n){return typeof n>"u"?vn.useState(e):[n,function(){}]};function CJ(t,e){var n=t.placeholder,r=n===void 0?"":n,a=t.value,s=a===void 0?void 0:a,i=t.onChange,o=i===void 0?function(){}:i,u=t.onClearClick,l=u===void 0?function(){}:u,c=t.className,f=t.disabled,d=f===void 0?!1:f,h=xJ(t,hJ),m="".concat(Ft,"-search"),v=vn.useMemo(function(){return typeof s<"u"},[]),y=NJ("",s),b=oO(y,2),x=b[0],w=b[1],N=vn.useState(v?x.length>0:!1),C=oO(N,2),E=C[0],$=C[1];if(v!==typeof s<"u")throw"Search: Changing from controlled to uncontrolled component and vice versa is not allowed";var I=vn.useRef(void 0),D=function(){typeof I.current<"u"&&I.current.focus()};vn.useImperativeHandle(e,function(){return{focus:D}});var k=function(B){var z=B.target.value;$(z.length>0),v===!1&&w(z),o(z)},A=function(){v===!1&&w(""),$(!1),l()};return _e.createElement("div",WN({},h,{className:an(m,iO({},"".concat(m,"--disabled"),d),c)}),_e.createElement(gi,{icon:dJ,className:"".concat(m,"__search-icon")}),_e.createElement("input",{ref:I,type:"text",className:"".concat(m,"__input"),placeholder:r,onChange:k,disabled:d,value:x}),_e.createElement(gi,{icon:pJ,className:an("".concat(m,"__clear-icon"),iO({},"".concat(m,"__clear-icon--active"),E)),onClick:A}))}var zB=vn.forwardRef(CJ);zB.displayName="Search";zB.propTypes={placeholder:st.string,value:st.string,onChange:st.func,onClearClick:st.func,className:st.string,disabled:st.bool};var EJ=["content","className"];function UN(){return UN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UN.apply(this,arguments)}function TJ(t,e){if(t==null)return{};var n=DJ(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DJ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var AJ=function(e){var n=e.content,r=n===void 0?"":n,a=e.className,s=TJ(e,EJ),i="".concat(Ft,"-typing-indicator");return _e.createElement("div",UN({},s,{className:an(i,a)}),_e.createElement("div",{className:"".concat(i,"__indicator")},_e.createElement("div",{className:"".concat(i,"__dot")}),_e.createElement("div",{className:"".concat(i,"__dot")}),_e.createElement("div",{className:"".concat(i,"__dot")})),_e.createElement("div",{className:"".concat(i,"__text")},r))};function zh(t){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zh(t)}var $J=["className","children","size","selected","onChange","itemsTabIndex"];function qN(){return qN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qN.apply(this,arguments)}function kJ(t,e,n){return e=IJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IJ(t){var e=_J(t,"string");return zh(e)=="symbol"?e:String(e)}function _J(t,e){if(zh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OJ(t,e){if(t==null)return{};var n=FJ(t,e),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FJ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,s;for(s=0;s<r.length;s++)a=r[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function RJ(t,e){var n=t.className,r=t.children,a=t.size,s=t.selected,i=t.onChange,o=i===void 0?t0:i,u=t.itemsTabIndex,l=OJ(t,$J),c="".concat(Ft,"-status-list"),f=vn.useRef();vn.useImperativeHandle(e,function(){return{focus:function(m){var v=Array.from(f.current.querySelectorAll("li")),y=v.filter(function(b){return b.parentNode===f.current});typeof y[m]<"u"&&y[m].focus()}}});var d=u;return _e.createElement("ul",qN({ref:f},l,{className:an(c,n,kJ({},"".concat(c,"--").concat(a),a))}),_e.Children.map(r,function(h){var m={};s&&(m.selected=h.props.status===s),o&&(m.onClick=function(b){o(h.props.status),h.onClick&&h.onClick(b)});var v=function(x){o&&x.key==="Enter"&&x.shiftKey===!1&&x.altKey===!1&&o(h.props.status)},y=function(){if(typeof d=="number")return d>0?d++:d}();return _e.createElement("li",{tabIndex:y,onKeyPress:v},_e.cloneElement(h,m))}))}var WB=vn.forwardRef(RJ);WB.displayName="StatusList";WB.propTypes={children:Z4([Q4]),selected:st.oneOf(X4),size:st.oneOf(Y4),itemsTabIndex:st.number,className:st.string,onChange:st.func};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MJ=1e-7,PJ=1e-4;class UB{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class EE{refCount(e){return os("refCount")}incRef(e){return os("incRef")}timerAvailable(){return!0}time(e){return os("time")}read(e){return os("read")}readSync(e){return os("readSync")}readToGPU(e,n){return os("readToGPU")}numDataIds(){return os("numDataIds")}disposeData(e,n){return os("disposeData")}write(e,n,r){return os("write")}move(e,n,r,a,s){return os("move")}createTensorFromGPUData(e,n,r){return os("createTensorFromGPUData")}memory(){return os("memory")}floatPrecision(){return os("floatPrecision")}epsilon(){return this.floatPrecision()===32?MJ:PJ}dispose(){return os("dispose")}}function os(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BJ(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Kf(t,e,n)}function Ec(t,e,n){return Math.max(t,Math.min(e,n))}function TE(t){return t%2===0?t:t+1}function Kf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function LJ(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function Y(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Es(t,e,n=""){Y(fn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Gd(t){Y(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Fe(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function zJ(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function fn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Sd(t){return t%1===0}function VN(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function ad(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function lO(t,e=a=>0,n,r){return new Promise((a,s)=>{let i=0;const o=()=>{if(t()){a();return}i++;const u=e(i);if(n!=null&&i>=n){s();return}r!=null?r(o,u):setTimeout(o,u)};o()})}function qB(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const a=t.slice();return a[r]=e/n,a}function sn(t,e){const n=e.length;return t=t==null?e.map((r,a)=>a):[].concat(t),Y(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),Y(t.every(r=>Sd(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function bl(t,e){const n=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||a?null:sn(e,t).sort();let i=0;for(let o=0;o<t.length;++o){if(s!=null){if(s[i]===o&&t[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${t[o]}' is not 1`);(s[i]==null||s[i]>o)&&t[o]===1&&(n.push(t[o]),r.push(o)),s[i]<=o&&i++}t[o]!==1&&(n.push(t[o]),r.push(o))}return{newShape:n,keptDims:r}}function ta(t,e){return fr(t,e)}function fr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function WJ(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function UJ(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function VB(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function k0(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function qJ(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function fm(t){return typeof t=="string"||t instanceof String}function VJ(t){return typeof t=="boolean"}function jN(t){return typeof t=="number"}function Kd(t){return Array.isArray(t)?Kd(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":jN(t)?"float32":fm(t)?"string":VJ(t)?"bool":"float32"}function HN(t){return!!(t&&t.constructor&&t.call&&t.apply)}function GN(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function St(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function jB(t,e,n,r=!1){const a=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let i=0;i<s;i++)a[i]=n[t+i]}else{const s=e[0],i=e.slice(1),o=i.reduce((u,l)=>u*l)*(r?2:1);for(let u=0;u<s;u++)a[u]=jB(t+u*o,i,n,r)}return a}function di(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((a,s)=>a*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return jB(0,t,e,n)}function jJ(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function DE(t,e){const n=ma(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function ma(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function HB(t,e){const n=t.reduce((r,a)=>r*a,1);if(e==null||e==="float32")return di(t,new Float32Array(n));if(e==="int32")return di(t,new Int32Array(n));if(e==="bool")return di(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Ls(t){t.forEach(e=>{Y(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function yo(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let a=0;a<t.length-1;++a)r+=n[a]*t[a];return r}function Xd(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(t/n[a]),t-=r[a]*n[a];return r[r.length-1]=t,r}function Tc(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cO="tfjsflags";class HJ{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=GJ,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&($e().getBool("IS_TEST")||$e().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const a=this.urlFlags[e];$e().getBool("IS_TEST")||$e().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${a}.`),this.set(e,a)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Tc(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);cO in e&&e[cO].split(",").forEach(r=>{const[a,s]=r.split(":");this.urlFlags[a]=XJ(a,s)})}}function GJ(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(KJ(e,r[0],r[1]),r.join("="))),e}function KJ(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function XJ(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function $e(){return GB}let GB=null;function YJ(t){GB=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let mS;function KB(){if(mS==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");mS=t}return mS}function QJ(){const t=KB();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function AE(t,e){const n=QJ();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const zb="Abs",dm="Acos",pm="Acosh",Yd="Add",Wb="AddN",$E="All",kE="Any",Ub="ArgMax",qb="ArgMin",hm="Asin",mm="Asinh",gm="Atan",vm="Atanh",ym="Atan2",Vb="AvgPool",IE="AvgPoolGrad",jb="AvgPool3D",_E="AvgPool3DGrad",Hb="BatchMatMul",Gb="BatchToSpaceND",OE="Bincount",Kb="BitwiseAnd",JJ="BroadcastTo",FE="BroadcastArgs",bm="Cast",wm="Ceil",xm="ClipByValue",RE="Complex",Xb="ComplexAbs",Yb="Concat",Qb="Conv2D",ME="Conv2DBackpropFilter",Jb="Conv2DBackpropInput",Zb="Conv3D",PE="Conv3DBackpropFilterV2",BE="Conv3DBackpropInputV2",Sm="Cos",Nm="Cosh",LE="Cumprod",e1="Cumsum",zE="CropAndResize",WE="DenseBincount",UE="DepthToSpace",t1="DepthwiseConv2dNative",qE="DepthwiseConv2dNativeBackpropFilter",VE="DepthwiseConv2dNativeBackpropInput",jE="Diag",n1="Dilation2D",KN="Dilation2DBackpropInput",XN="Dilation2DBackpropFilter",ZJ="Draw",Cm="RealDiv",HE="Einsum",Em="Elu",GE="EluGrad",Tm="Erf",r1="Equal",Dm="Exp",a1="ExpandDims",Am="Expm1",KE="FFT",XE="Fill",YE="FlipLeftRight",$m="Floor",km="FloorDiv",s1="FusedBatchNorm",i1="GatherV2",QE="GatherNd",o1="Greater",Im="GreaterEqual",_m="Identity",JE="IFFT",ZE="Imag",Om="IsFinite",Fm="IsInf",Rm="IsNan",u1="LeakyRelu",l1="Less",c1="LessEqual",eT="LinSpace",Mm="Log",Pm="Log1p",f1="LogicalAnd",d1="LogicalNot",p1="LogicalOr",eZ="LogSoftmax",h1="LRN",tT="LRNGrad",m1="Max",Bm="Maximum",g1="MaxPool",nT="MaxPoolGrad",v1="MaxPool3D",rT="MaxPool3DGrad",aT="MaxPoolWithArgmax",y1="Mean",b1="Min",Lm="Minimum",w1="MirrorPad",zm="Mod",sT="Multinomial",Wm="Multiply",x1="Neg",S1="NotEqual",iT="NonMaxSuppressionV3",oT="NonMaxSuppressionV4",uT="NonMaxSuppressionV5",N1="OnesLike",C1="OneHot",E1="Pack",T1="PadV2",Um="Pow",D1="Prelu",A1="Prod",lT="RaggedGather",cT="RaggedRange",fT="RaggedTensorToTensor",dT="Range",pT="Real",qm="Reciprocal",Vm="Relu",$1="Reshape",k1="ResizeNearestNeighbor",hT="ResizeNearestNeighborGrad",I1="ResizeBilinear",mT="ResizeBilinearGrad",jm="Relu6",_1="Reverse",Hm="Round",Gm="Rsqrt",gT="ScatterNd",vT="TensorScatterUpdate",yT="SearchSorted",O1="Select",Km="Selu",F1="Slice",Xm="Sin",Ym="Sinh",Qm="Sign",Jm="Sigmoid",Zm="Softplus",eg="Sqrt",R1="Sum",M1="SpaceToBatchND",P1="SplitV",B1="Softmax",bT="SparseFillEmptyRows",wT="SparseReshape",xT="SparseSegmentMean",ST="SparseSegmentSum",NT="SparseToDense",tg="SquaredDifference",CT="Square",L1="StaticRegexReplace",ET="StridedSlice",TT="StringNGrams",DT="StringSplit",AT="StringToHashBucketFast",ng="Sub",rg="Tan",ag="Tanh",sg="Tile",$T="TopK",kT="Transform",sd="Transpose",IT="Unique",z1="Unpack",W1="UnsortedSegmentSum",U1="ZerosLike",ig="Step",tZ="FromPixels",_T="RotateWithOffset",I0="_FusedMatMul",_0="FusedConv2D",O0="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Os(...t){$e().getBool("IS_TEST")||$e().getBool("PROD")||console.warn(...t)}function nZ(...t){$e().getBool("IS_TEST")||$e().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F0=AE("kernelRegistry",()=>new Map),YN=AE("gradRegistry",()=>new Map);function fO(t,e){const n=YB(t,e);return F0.get(n)}function dO(t){return YN.get(t)}function pO(t){const e=F0.entries(),n=[];for(;;){const{done:r,value:a}=e.next();if(r)break;const[s,i]=a,[o]=s.split("_");o===t&&n.push(i)}return n}function XB(t){const{kernelName:e,backendName:n}=t,r=YB(e,n);F0.has(r)&&Os(`The kernel '${e}' for backend '${n}' is already registered`),F0.set(r,t)}function rZ(t){const{kernelName:e}=t;YN.has(e)&&$e().getBool("DEBUG")&&Os(`Overriding the gradient for '${e}'`),YN.set(e,t)}function YB(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QB(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var gS,hO;function aZ(){if(hO)return gS;hO=1,gS=e;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(k,A,O){this.low=k|0,this.high=A|0,this.unsigned=!!O}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function n(k){return(k&&k.__isLong__)===!0}e.isLong=n;var r={},a={};function s(k,A){var O,B,z;return A?(k>>>=0,(z=0<=k&&k<256)&&(B=a[k],B)?B:(O=o(k,(k|0)<0?-1:0,!0),z&&(a[k]=O),O)):(k|=0,(z=-128<=k&&k<128)&&(B=r[k],B)?B:(O=o(k,k<0?-1:0,!1),z&&(r[k]=O),O))}e.fromInt=s;function i(k,A){if(isNaN(k))return A?x:b;if(A){if(k<0)return x;if(k>=m)return $}else{if(k<=-v)return I;if(k+1>=v)return E}return k<0?i(-k,A).neg():o(k%h|0,k/h|0,A)}e.fromNumber=i;function o(k,A,O){return new e(k,A,O)}e.fromBits=o;var u=Math.pow;function l(k,A,O){if(k.length===0)throw Error("empty string");if(k==="NaN"||k==="Infinity"||k==="+Infinity"||k==="-Infinity")return b;if(typeof A=="number"?(O=A,A=!1):A=!!A,O=O||10,O<2||36<O)throw RangeError("radix");var B;if((B=k.indexOf("-"))>0)throw Error("interior hyphen");if(B===0)return l(k.substring(1),A,O).neg();for(var z=i(u(O,8)),L=b,F=0;F<k.length;F+=8){var R=Math.min(8,k.length-F),q=parseInt(k.substring(F,F+R),O);if(R<8){var M=i(u(O,R));L=L.mul(M).add(i(q))}else L=L.mul(z),L=L.add(i(q))}return L.unsigned=A,L}e.fromString=l;function c(k,A){return typeof k=="number"?i(k,A):typeof k=="string"?l(k,A):o(k.low,k.high,typeof A=="boolean"?A:k.unsigned)}e.fromValue=c;var f=65536,d=1<<24,h=f*f,m=h*h,v=m/2,y=s(d),b=s(0);e.ZERO=b;var x=s(0,!0);e.UZERO=x;var w=s(1);e.ONE=w;var N=s(1,!0);e.UONE=N;var C=s(-1);e.NEG_ONE=C;var E=o(-1,2147483647,!1);e.MAX_VALUE=E;var $=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=$;var I=o(0,-2147483648,!1);e.MIN_VALUE=I;var D=e.prototype;return D.toInt=function(){return this.unsigned?this.low>>>0:this.low},D.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},D.toString=function(A){if(A=A||10,A<2||36<A)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(I)){var O=i(A),B=this.div(O),z=B.mul(O).sub(this);return B.toString(A)+z.toInt().toString(A)}else return"-"+this.neg().toString(A);for(var L=i(u(A,6),this.unsigned),F=this,R="";;){var q=F.div(L),M=F.sub(q.mul(L)).toInt()>>>0,G=M.toString(A);if(F=q,F.isZero())return G+R;for(;G.length<6;)G="0"+G;R=""+G+R}},D.getHighBits=function(){return this.high},D.getHighBitsUnsigned=function(){return this.high>>>0},D.getLowBits=function(){return this.low},D.getLowBitsUnsigned=function(){return this.low>>>0},D.getNumBitsAbs=function(){if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(var A=this.high!=0?this.high:this.low,O=31;O>0&&!(A&1<<O);O--);return this.high!=0?O+33:O+1},D.isZero=function(){return this.high===0&&this.low===0},D.eqz=D.isZero,D.isNegative=function(){return!this.unsigned&&this.high<0},D.isPositive=function(){return this.unsigned||this.high>=0},D.isOdd=function(){return(this.low&1)===1},D.isEven=function(){return(this.low&1)===0},D.equals=function(A){return n(A)||(A=c(A)),this.unsigned!==A.unsigned&&this.high>>>31===1&&A.high>>>31===1?!1:this.high===A.high&&this.low===A.low},D.eq=D.equals,D.notEquals=function(A){return!this.eq(A)},D.neq=D.notEquals,D.ne=D.notEquals,D.lessThan=function(A){return this.comp(A)<0},D.lt=D.lessThan,D.lessThanOrEqual=function(A){return this.comp(A)<=0},D.lte=D.lessThanOrEqual,D.le=D.lessThanOrEqual,D.greaterThan=function(A){return this.comp(A)>0},D.gt=D.greaterThan,D.greaterThanOrEqual=function(A){return this.comp(A)>=0},D.gte=D.greaterThanOrEqual,D.ge=D.greaterThanOrEqual,D.compare=function(A){if(n(A)||(A=c(A)),this.eq(A))return 0;var O=this.isNegative(),B=A.isNegative();return O&&!B?-1:!O&&B?1:this.unsigned?A.high>>>0>this.high>>>0||A.high===this.high&&A.low>>>0>this.low>>>0?-1:1:this.sub(A).isNegative()?-1:1},D.comp=D.compare,D.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(w)},D.neg=D.negate,D.add=function(A){n(A)||(A=c(A));var O=this.high>>>16,B=this.high&65535,z=this.low>>>16,L=this.low&65535,F=A.high>>>16,R=A.high&65535,q=A.low>>>16,M=A.low&65535,G=0,V=0,H=0,j=0;return j+=L+M,H+=j>>>16,j&=65535,H+=z+q,V+=H>>>16,H&=65535,V+=B+R,G+=V>>>16,V&=65535,G+=O+F,G&=65535,o(H<<16|j,G<<16|V,this.unsigned)},D.subtract=function(A){return n(A)||(A=c(A)),this.add(A.neg())},D.sub=D.subtract,D.multiply=function(A){if(this.isZero())return b;if(n(A)||(A=c(A)),t){var O=t.mul(this.low,this.high,A.low,A.high);return o(O,t.get_high(),this.unsigned)}if(A.isZero())return b;if(this.eq(I))return A.isOdd()?I:b;if(A.eq(I))return this.isOdd()?I:b;if(this.isNegative())return A.isNegative()?this.neg().mul(A.neg()):this.neg().mul(A).neg();if(A.isNegative())return this.mul(A.neg()).neg();if(this.lt(y)&&A.lt(y))return i(this.toNumber()*A.toNumber(),this.unsigned);var B=this.high>>>16,z=this.high&65535,L=this.low>>>16,F=this.low&65535,R=A.high>>>16,q=A.high&65535,M=A.low>>>16,G=A.low&65535,V=0,H=0,j=0,ne=0;return ne+=F*G,j+=ne>>>16,ne&=65535,j+=L*G,H+=j>>>16,j&=65535,j+=F*M,H+=j>>>16,j&=65535,H+=z*G,V+=H>>>16,H&=65535,H+=L*M,V+=H>>>16,H&=65535,H+=F*q,V+=H>>>16,H&=65535,V+=B*G+z*M+L*q+F*R,V&=65535,o(j<<16|ne,V<<16|H,this.unsigned)},D.mul=D.multiply,D.divide=function(A){if(n(A)||(A=c(A)),A.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&A.low===-1&&A.high===-1)return this;var O=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,A.low,A.high);return o(O,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?x:b;var B,z,L;if(this.unsigned){if(A.unsigned||(A=A.toUnsigned()),A.gt(this))return x;if(A.gt(this.shru(1)))return N;L=x}else{if(this.eq(I)){if(A.eq(w)||A.eq(C))return I;if(A.eq(I))return w;var F=this.shr(1);return B=F.div(A).shl(1),B.eq(b)?A.isNegative()?w:C:(z=this.sub(A.mul(B)),L=B.add(z.div(A)),L)}else if(A.eq(I))return this.unsigned?x:b;if(this.isNegative())return A.isNegative()?this.neg().div(A.neg()):this.neg().div(A).neg();if(A.isNegative())return this.div(A.neg()).neg();L=b}for(z=this;z.gte(A);){B=Math.max(1,Math.floor(z.toNumber()/A.toNumber()));for(var R=Math.ceil(Math.log(B)/Math.LN2),q=R<=48?1:u(2,R-48),M=i(B),G=M.mul(A);G.isNegative()||G.gt(z);)B-=q,M=i(B,this.unsigned),G=M.mul(A);M.isZero()&&(M=w),L=L.add(M),z=z.sub(G)}return L},D.div=D.divide,D.modulo=function(A){if(n(A)||(A=c(A)),t){var O=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,A.low,A.high);return o(O,t.get_high(),this.unsigned)}return this.sub(this.div(A).mul(A))},D.mod=D.modulo,D.rem=D.modulo,D.not=function(){return o(~this.low,~this.high,this.unsigned)},D.and=function(A){return n(A)||(A=c(A)),o(this.low&A.low,this.high&A.high,this.unsigned)},D.or=function(A){return n(A)||(A=c(A)),o(this.low|A.low,this.high|A.high,this.unsigned)},D.xor=function(A){return n(A)||(A=c(A)),o(this.low^A.low,this.high^A.high,this.unsigned)},D.shiftLeft=function(A){return n(A)&&(A=A.toInt()),(A&=63)===0?this:A<32?o(this.low<<A,this.high<<A|this.low>>>32-A,this.unsigned):o(0,this.low<<A-32,this.unsigned)},D.shl=D.shiftLeft,D.shiftRight=function(A){return n(A)&&(A=A.toInt()),(A&=63)===0?this:A<32?o(this.low>>>A|this.high<<32-A,this.high>>A,this.unsigned):o(this.high>>A-32,this.high>=0?0:-1,this.unsigned)},D.shr=D.shiftRight,D.shiftRightUnsigned=function(A){if(n(A)&&(A=A.toInt()),A&=63,A===0)return this;var O=this.high;if(A<32){var B=this.low;return o(B>>>A|O<<32-A,O>>>A,this.unsigned)}else return A===32?o(O,0,this.unsigned):o(O>>>A-32,0,this.unsigned)},D.shru=D.shiftRightUnsigned,D.shr_u=D.shiftRightUnsigned,D.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},D.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},D.toBytes=function(A){return A?this.toBytesLE():this.toBytesBE()},D.toBytesLE=function(){var A=this.high,O=this.low;return[O&255,O>>>8&255,O>>>16&255,O>>>24,A&255,A>>>8&255,A>>>16&255,A>>>24]},D.toBytesBE=function(){var A=this.high,O=this.low;return[A>>>24,A>>>16&255,A>>>8&255,A&255,O>>>24,O>>>16&255,O>>>8&255,O&255]},e.fromBytes=function(A,O,B){return B?e.fromBytesLE(A,O):e.fromBytesBE(A,O)},e.fromBytesLE=function(A,O){return new e(A[0]|A[1]<<8|A[2]<<16|A[3]<<24,A[4]|A[5]<<8|A[6]<<16|A[7]<<24,O)},e.fromBytesBE=function(A,O){return new e(A[4]<<24|A[5]<<16|A[6]<<8|A[7],A[0]<<24|A[1]<<16|A[2]<<8|A[3],O)},gS}var JB=aZ();const ZB=Uc(JB),sZ=bH({__proto__:null,default:ZB},[JB]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cc=ZB||sZ;function q1(t){return cc.fromString(t,!0,16)}const eL=q1("c3a5c85c97cb3127"),uc=q1("b492b66fbe98f273"),Aa=q1("9ae16a3b2f90404f");function QN(t){return t.xor(t.shru(47))}function tL(t,e,n){const r=t.slice(e,e+n);return cc.fromBytes(Array.from(r),!0,!0)}function Wn(t,e){return tL(t,e,8)}function mO(t,e){return tL(t,e,4)}function Pr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Ju(t,e,n=q1("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let a=e.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function iZ(t,e,n,r,a,s){a=a.add(t),s=Pr(s.add(a).add(r),21);const i=a;return a=a.add(e),a=a.add(n),s=s.add(Pr(a,44)),[a.add(r),s.add(i)]}function by(t,e,n,r){return iZ(Wn(t,e),Wn(t,e+8),Wn(t,e+16),Wn(t,e+24),n,r)}function oZ(t,e=t.length){if(e>=8){const n=Aa.add(e*2),r=Wn(t,0).add(Aa),a=Wn(t,e-8),s=Pr(a,37).mul(n).add(r),i=Pr(r,25).add(a).mul(n);return Ju(s,i,n)}if(e>=4){const n=Aa.add(e*2),r=mO(t,0);return Ju(r.shl(3).add(e),mO(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],a=t[e-1],s=n+(r<<8),i=e+(a<<2);return QN(Aa.mul(s).xor(eL.mul(i))).mul(Aa)}return Aa}function uZ(t,e=t.length){const n=Aa.add(e*2),r=Wn(t,0).mul(uc),a=Wn(t,8),s=Wn(t,e-8).mul(n),i=Wn(t,e-16).mul(Aa);return Ju(Pr(r.add(a),43).add(Pr(s,30)).add(i),r.add(Pr(a.add(Aa),18)).add(s),n)}function lZ(t,e=t.length){const n=Aa.add(e*2),r=Wn(t,0).mul(Aa),a=Wn(t,8),s=Wn(t,e-8).mul(n),i=Wn(t,e-16).mul(Aa),o=Pr(r.add(a),43).add(Pr(s,30)).add(i),u=Ju(o,r.add(Pr(a.add(Aa),18)).add(s),n),l=Wn(t,16).mul(n),c=Wn(t,24),f=o.add(Wn(t,e-32)).mul(n),d=u.add(Wn(t,e-24)).mul(n);return Ju(Pr(l.add(c),43).add(Pr(f,30)).add(d),l.add(Pr(c.add(r),18)).add(f),n)}function cZ(t,e=t.length){const n=cc.fromNumber(81,!0);if(e<=32)return e<=16?oZ(t,e):uZ(t,e);if(e<=64)return lZ(t,e);let r=n,a=n.mul(uc).add(113),s=QN(a.mul(Aa).add(113)).mul(Aa),i=[cc.UZERO,cc.UZERO],o=[cc.UZERO,cc.UZERO];r=r.mul(Aa).add(Wn(t,0));let u=0;const l=(e-1>>6)*64,c=l+(e-1&63)-63;do r=Pr(r.add(a).add(i[0]).add(Wn(t,u+8)),37).mul(uc),a=Pr(a.add(i[1]).add(Wn(t,u+48)),42).mul(uc),r=r.xor(o[1]),a=a.add(i[0]).add(Wn(t,u+40)),s=Pr(s.add(o[0]),33).mul(uc),i=by(t,u,i[1].mul(uc),r.add(o[0])),o=by(t,u+32,s.add(o[1]),a.add(Wn(t,u+16))),[s,r]=[r,s],u+=64;while(u!==l);const f=uc.add(s.and(255).shl(1));return u=c,o[0]=o[0].add(e-1&63),i[0]=i[0].add(o[0]),o[0]=o[0].add(i[0]),r=Pr(r.add(a).add(i[0]).add(Wn(t,u+8)),37).mul(f),a=Pr(a.add(i[1]).add(Wn(t,u+48)),42).mul(f),r=r.xor(o[1].mul(9)),a=a.add(i[0].mul(9).add(Wn(t,u+40))),s=Pr(s.add(o[0]),33).mul(f),i=by(t,u,i[1].mul(f),r.add(o[0])),o=by(t,u+32,s.add(o[1]),a.add(Wn(t,u+16))),[s,r]=[r,s],Ju(Ju(i[0],o[0],f).add(QN(a).mul(eL)).add(s),Ju(i[1],o[1],f).add(r),f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wl(t,e){return e==="string"?Zu(t):qc([t],e)}function fZ(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function qc(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=sl(t)),$e().getBool("DEBUG")&&WJ(t,e),fZ(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Ua(){return $e().platform.now()}function dZ(t,e){return $e().platform.fetch(t,e)}function Zu(t,e="utf-8"){return e=e||"utf-8",$e().platform.encode(t,e)}function al(t,e="utf-8"){return e=e||"utf-8",$e().platform.decode(t,e)}function vi(t){return $e().platform.isTypedArray!=null?$e().platform.isTypedArray(t):QB(t)}function sl(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Tc(t)||t==null||vi(t)&&n)e.push(t);else if(Array.isArray(t)||vi(t))for(let r=0;r<t.length;++r)sl(t[r],e,n);else{let r=-1;for(const a of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(a)&&(r=Math.max(r,Number(a)));for(let a=0;a<=r;a++)sl(t[a],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pZ{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new mZ)}profileKernel(e,n,r){let a;const s=()=>{a=r()};let i;const o=Ua();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(s);else{s();for(const l of a)l.dataSync();i=Promise.resolve({kernelMs:Ua()-o})}if($e().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<a.length;l++){const c=a[l];c.data().then(f=>{hZ(f,c.dtype,e)})}return{kernelName:e,outputs:a,inputs:n,timeMs:i.then(l=>l.kernelMs),extraInfo:i.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:a,inputs:s,extraInfo:i}=e;r.forEach(o=>{Promise.all([o.data(),a,i]).then(u=>{this.logger.logKernelProfile(n,o,u[0],u[1],s,u[2])})})}}function hZ(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const a=t[r];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${n}'`),!0}return!1}class mZ{logKernelProfile(e,n,r,a,s,i){const o=typeof a=="number"?ad(`${a}ms`,9):a.error,u=ad(e,25),l=n.rank,c=n.size,f=ad(n.shape.toString(),14);let d="";for(const h in s){const m=s[h];if(m!=null){const v=m.shape||n.shape,y=v.length;d+=`${h}: ${y}D ${y>0?v:""} `}}console.log(`%c${u}	%c${o}	%c${l}D ${f}	%c${c}	%c${d}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gZ(t,e,n){const r={},a={};for(let u=0;u<e.length;u++)r[e[u].id]=!0;for(let u=0;u<t.length;u++){const l=t[u],c=l.inputs;for(const f in c){const d=c[f];let h=!1;for(let m=0;m<e.length;m++)if(r[d.id]){l.outputs.forEach(v=>r[v.id]=!0),h=!0,a[l.id]=!0;break}if(h)break}}const s={};s[n.id]=!0;const i={};for(let u=t.length-1;u>=0;u--){const l=t[u],c=l.inputs;for(let f=0;f<l.outputs.length;f++)if(s[l.outputs[f].id]){for(const d in c)s[c[d].id]=!0,i[l.id]=!0;break}}const o=[];for(let u=0;u<t.length;u++){const l=t[u];if(a[l.id]&&i[l.id]){const c={};for(const d in l.inputs){const h=l.inputs[d];r[h.id]&&(c[d]=h)}const f=Object.assign({},l);f.inputs=c,f.outputs=l.outputs,o.push(f)}}return o}function vZ(t,e,n,r){for(let a=e.length-1;a>=0;a--){const s=e[a],i=[];if(s.outputs.forEach(u=>{const l=t[u.id];l!=null?i.push(l):i.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const o=s.gradient(i);for(const u in s.inputs){if(!(u in o))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(o)}.`);const l=n(()=>o[u]());if(l.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${l.dtype}'`);const c=s.inputs[u];if(!fn(l.shape,c.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${u}' has shape '${l.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=l;else{const f=t[c.id];t[c.id]=r(f,l),f.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gO=20,ch=3,vS=7;function yZ(t,e,n,r){const a=St(e),s=bZ(t,e,n,a),i=e.length,o=r0(t,e,n,a,s),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${i}`),u.push(`  shape: [${e}]`),u.push("  values:")),u.push(o.map(l=>"    "+l).join(`
`)),u.join(`
`)}function bZ(t,e,n,r){const a=Fe(e),s=r[r.length-1],i=new Array(s).fill(0),o=e.length,u=n==="complex64"?bh(t):t;if(o>1)for(let l=0;l<a/s;l++){const c=l*s;for(let f=0;f<s;f++)i[f]=Math.max(i[f],yh(u[c+f],0,n).length)}return i}function yh(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(vS))} + ${parseFloat(t[1].toFixed(vS))}j`:fm(t)?r=`'${t}'`:n==="bool"?r=nL(t):r=parseFloat(t.toFixed(vS)).toString(),ad(r,e)}function nL(t){return t===0?"false":"true"}function r0(t,e,n,r,a,s=!0){const i=n==="complex64"?2:1,o=e[0],u=e.length;if(u===0){if(n==="complex64"){const v=bh(t);return[yh(v[0],0,n)]}return n==="bool"?[nL(t[0])]:[t[0].toString()]}if(u===1){if(o>gO){const y=ch*i;let b=Array.from(t.slice(0,y)),x=Array.from(t.slice((o-ch)*i,o*i));return n==="complex64"&&(b=bh(b),x=bh(x)),["["+b.map((w,N)=>yh(w,a[N],n)).join(", ")+", ..., "+x.map((w,N)=>yh(w,a[o-ch+N],n)).join(", ")+"]"]}return["["+(n==="complex64"?bh(t):Array.from(t)).map((y,b)=>yh(y,a[b],n)).join(", ")+"]"]}const l=e.slice(1),c=r.slice(1),f=r[0]*i,d=[];if(o>gO){for(let v=0;v<ch;v++){const y=v*f,b=y+f;d.push(...r0(t.slice(y,b),l,n,c,a,!1))}d.push("...");for(let v=o-ch;v<o;v++){const y=v*f,b=y+f;d.push(...r0(t.slice(y,b),l,n,c,a,v===o-1))}}else for(let v=0;v<o;v++){const y=v*f,b=y+f;d.push(...r0(t.slice(y,b),l,n,c,a,v===o-1))}const h=u===2?",":"";d[0]="["+(o>0?d[0]+h:"");for(let v=1;v<d.length-1;v++)d[v]=" "+d[v]+h;let m=`,
`;for(let v=2;v<u;v++)m+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(s?"":m),d}function bh(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $r{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=Fe(e),r!=null){const a=r.length;Y(a===this.size,()=>`Length of values '${a}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||fr(n,this.size),this.strides=St(e)}set(e,...n){n.length===0&&(n=[0]),Y(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const a of e){if(a<0||a>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=this.strides[a]*e[a];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Mi().makeTensor(this.values,this.shape,this.dtype)}}let Mi=null,Xf=null;function wZ(t){Mi=t}function xZ(t){Xf=t}class er{constructor(e,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Fe(e),this.strides=St(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Xf.buffer(this.shape,this.dtype,e)}bufferSync(){return Xf.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return di(this.shape,e,this.dtype==="complex64")}arraySync(){return di(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Mi().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>al(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Mi().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Mi().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>al(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Mi().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Mi().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Xf.print(this,e)}clone(){return this.throwIfDisposed(),Xf.clone(this)}toString(e=!1){const n=this.dataSync();return yZ(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Xf.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Mi().makeVariable(this,e,n,r)}}Object.defineProperty(er,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Be(){return AE("Tensor",()=>er)}Be();class R0 extends er{constructor(e,n,r,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!fn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Mi().disposeTensor(this),this.dataId=e.dataId,Mi().incRef(this,null)}dispose(){Mi().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(R0,Symbol.hasInstance,{value:t=>t instanceof er&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var vO;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(vO||(vO={}));var JN;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(JN||(JN={}));var ZN;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(ZN||(ZN={}));var eC;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(eC||(eC={}));var tC;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(tC||(tC={}));const SZ={float32:eC,int32:JN,bool:ZN,complex64:tC};function vs(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return SZ[t][e]}function OT(t){return vs(t,"int32")}function rL(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function aL(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ur(t,e){if(t.dtype===e.dtype)return[t,e];const n=vs(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function NZ(t,e){Y(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function sL(t){const e=[];return iL(t,e,new Set),e}function iL(t,e,n){if(t==null)return;if(t instanceof er){e.push(t);return}if(!CZ(t))return;const r=t;for(const a in r){const s=r[a];n.has(s)||(n.add(s),iL(s,e,n))}}function CZ(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yS(t){return t.kernelName!=null}class yO{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Nd{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new yO}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Os(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new pZ(this.backendInstance),!0}setupRegisteredKernels(){pO(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){pO(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof EE)&&typeof r.then=="function"){const a=++this.pendingBackendInitId,s=r.then(i=>a<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,Os(`Initialization of backend ${e} failed`),Os(i.stack||i.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Os(`Initialization of backend ${e} failed`),Os(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:a,asyncInit:s}=this.initializeBackend(r);if(s||a)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),a=r.backend,s=this.readSync(n),i=a.refCount(n);a.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let a;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(a),()=>(a=n(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(e,n,r){e();try{const a=r();return n(),a}catch(a){throw n(),a}}nextTensorId(){return Nd.nextTensorId++}nextVariableId(){return Nd.nextVariableId++}clone(e){const n=me.runKernel(_m,{x:e}),r={x:e},a=i=>({x:()=>{const o="float32",u={x:i},l={dtype:o};return me.runKernel(bm,u,l)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],a,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(fO(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const a=this.backend.numDataIds();let s=0;r.forEach(u=>{s+=u.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=a-n-s-i;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const a=this.isTapeOn(),s=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let u;const l=yS(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(yS(e)){const{kernelName:m,inputs:v,attrs:y}=e;this.backendName==null&&this.backend;const b=fO(m,this.backendName);Y(b!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),o=()=>{const x=this.backend.numDataIds();u=b.kernelFunc({inputs:v,attrs:y,backend:this.backend});const w=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,x,w);const N=w.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(a){const C=this.getTensorsForGradient(m,v,N);r=this.saveTensorsForBackwardMode(C)}return N}}else{const{forwardFunc:m}=e,v=y=>{a&&(r=y.map(b=>this.keep(this.clone(b))))};o=()=>{const y=this.backend.numDataIds();u=this.tidy(()=>m(this.backend,v));const b=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,y,b),b}}const{inputs:c,attrs:f}=e,d=yS(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(h=this.profiler.profileKernel(l,c,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),a&&this.addTapeNode(l,c,n,d,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(m=>c[m]!=null?c[m].shape:null),outputShapes:n.map(m=>m.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(u)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const a=dO(e);if(a!=null){const s=a.inputsToSave||[],i=a.outputsToSave||[];let o;a.saveAllInputs?(Y(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(l=>n[l])):o=s.map(l=>n[l]);const u=r.filter((l,c)=>i[c]);return o.concat(u)}return[]}makeTensor(e,n,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;let s=e;r==="string"&&fm(e[0])&&(s=e.map(u=>Zu(u)));const i=a.write(s,n,r),o=new er(n,r,i,this.nextTensorId());if(this.trackTensor(o,a),r==="string"){const u=this.state.tensorInfo.get(i),l=qJ(s);this.state.numBytes+=l-u.bytes,u.bytes=l}return o}makeTensorFromDataId(e,n,r,a){r=r||"float32";const s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,a)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:a,dtype:s}=e,i=new er(a,s,r,this.nextTensorId());return this.trackTensor(i,n),i}makeVariable(e,n=!0,r,a){r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.cast(a));const s=new R0(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*k0(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof R0||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*k0(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,a,s,i){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},u=dO(e);u!=null&&(a=u.gradFunc),a!=null&&(o.gradient=l=>(l=l.map((c,f)=>{if(c==null){const d=r[f],h=ma(d.size,d.dtype);return this.makeTensor(h,d.shape,d.dtype)}return c}),a(l.length>1?l:l[0],s,i))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=sL(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const i=this.state.activeScope.track[s];!i.kept&&!r.has(i.id)&&i.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===a.id&&this.track(s)})}gradients(e,n,r,a=!1){if(Y(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));Y(s instanceof er,()=>"The result y returned by f() must be a tensor.");const i=gZ(this.state.activeTape,n,s);if(!a&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[s.id]=r??EZ(s.shape),vZ(o,i,l=>this.tidy(l),TZ);const u=n.map(l=>o[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(const c of l.saved)c.dispose()}),this.state.activeTape=null),{value:s,grads:u}})}customGrad(e){return Y(HN(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{Y(n.every(o=>o instanceof er),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const a={};n.forEach((o,u)=>{a[u]=o});const s=(o,u)=>(r=e(...n,u),Y(r.value instanceof er,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),Y(HN(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),i=(o,u)=>{const l=r.gradFunc(o,u),c=Array.isArray(l)?l:[l];Y(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),Y(c.every(d=>d instanceof er),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return c.forEach((d,h)=>{f[h]=()=>d}),f};return this.runKernelFunc({forwardFunc:s,backwardsFunc:i,inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Ua(),r=await this.backend.time(e);return r.wallMs=Ua()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new yO;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Nd.nextTensorId=0;Nd.nextVariableId=0;function EZ(t){const e=DE(Fe(t),"float32");return me.makeTensor(e,t,"float32")}function oL(){const t=KB();if(t._tfengine==null){const e=new HJ(t);t._tfengine=new Nd(e)}return YJ(t._tfengine.ENV),wZ(()=>t._tfengine),t._tfengine}const me=oL();function TZ(t,e){const n={a:t,b:e};return me.runKernel(Yd,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DZ(){return typeof navigator<"u"&&navigator!=null}function uL(t){if(t||DZ()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function lL(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xa=$e();Xa.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Xa.registerFlag("IS_BROWSER",()=>lL());Xa.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Xa.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Xa.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Xa.registerFlag("PROD",()=>!1);Xa.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Xa.getBool("DEBUG"));Xa.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Xa.registerFlag("IS_TEST",()=>!1);Xa.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Xa.getBool("DEBUG"));Xa.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Xa.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Xa.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xl(t,e){let n=t;if(vi(t))return e==="string"?[]:[t.length];if(rL(t)){const a=t.channels||"RGBA";return[t.height,t.width*a.length]}else if(aL(t))return[t.buffer.size/(e==null?4:k0(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||vi(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&$e().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&cL(t,r,[]),r}function cL(t,e,n){if(n=n||[],!Array.isArray(t)&&!vi(t)){Y(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}Y(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),Y(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let a=0;a<t.length;++a)cL(t[a],r,n.concat(a))}function bO(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function J(t,e,n,r="numeric"){if(t instanceof Be())return bO(r,t.dtype,e,n),t;let a=Kd(t);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),bO(r,a,e,n),t==null||!vi(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const u=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}const s=xl(t,a);!vi(t)&&!Array.isArray(t)&&(t=[t]);const o=a!=="string"?qc(t,a):sl(t,[],!0);return me.makeTensor(o,s,a)}function M0(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,i)=>J(s,`${e}[${i}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fL="__op";function de(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+fL;const a=(...s)=>{me.startScope(n);try{const i=r(...s);return Tc(i)&&console.error("Cannot return a Promise inside of tidy."),me.endScope(i),i}catch(i){throw me.endScope(null),i}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AZ(t,e){const n=J(t,"real","complex"),r=J(e,"imag","complex");Es(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const a={real:n,imag:r};return me.runKernel(RE,a)}const il=de({complex_:AZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sl(t,e,n,r){if(r==null)r=Kd(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(aL(t)||rL(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return me.backend.createTensorFromGPUData(t,e||n,r)}if(!vi(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Ls(e);const a=Fe(e),s=Fe(n);Y(a===s,()=>`Based on the provided shape, [${e}], the tensor should have ${a} values but has ${s}`);for(let i=0;i<n.length;++i){const o=n[i],u=i===n.length-1?o!==Fe(e.slice(i)):!0;Y(n[i]===e[i]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!vi(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?qc(t,r):sl(t,[],!0),me.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zi(t,e,n){const r=xl(t,n);return Sl(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dc={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Gi{static join(e){return new Gi(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>vi(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const a=e[r];r!==e.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+a.byteLength;this.shards.push({buffer:a,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const a=n-e,s=new ArrayBuffer(a),i=new Uint8Array(s);let o=0;for(let u=r;u<this.shards.length;u++){const l=this.shards[u],f=e+o-l.start,d=o,m=Math.min(n,l.end)-l.start,v=new Uint8Array(l.buffer,f,m-f);if(i.set(v,d),o+=v.length,n<l.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(a){return e<a.start?-1:e>=a.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=$Z(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function $Z(t,e){let n=0,r=t.length;for(;n<=r;){const a=Math.floor((r-n)/2)+n,s=e(t[a]);if(s===0)return a;s<0?r=a:n=a+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uo(){return me}function wO(){return me.memory()}function Te(t,e){return me.tidy(t,e)}function rn(t){sL(t).forEach(n=>n.dispose())}function Lr(t){return me.keep(t)}function kZ(t){return me.setBackend(t)}function IZ(){return me.ready()}function _Z(){return me.backendName}function dL(t,e,n=1){return me.registerBackend(t,e,n)}function pL(){return me.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ol=4;async function nC(t,e){const n=[],r=[],a=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);for(let i=0;i<a.length;++i){const o=a[i],u=Array.isArray(t)?t[i].tensor:t[o];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${u.dtype}`);const l={name:o,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){const c=new Promise(async f=>{const d=await u.bytes(),h=d.reduce((y,b)=>y+b.length,0)+ol*d.length,m=new Uint8Array(h);let v=0;for(let y=0;y<d.length;y++){const b=d[y],x=new Uint8Array(new Uint32Array([b.length]).buffer);m.set(x,v),v+=ol,m.set(b,v),v+=b.length}f(m)});r.push(c)}else r.push(u.data());e!=null&&(l.group=e),n.push(l)}const s=await Promise.all(r);return{data:RZ(s),specs:n}}function hL(t,e){const n=new Gi(t),r={};let a=0;for(const s of e){const i=OZ(s,(o,u)=>n.slice(a+o,a+u));r[s.name]=mL(s,n.slice(a,a+i)),a+=i}return r}function OZ(t,e){const n=Fe(t.shape);let r;if("quantization"in t){const a=t.quantization;r=Dc[a.dtype]}else if(t.dtype==="string"){let a=0;for(let s=0;s<n;s++)a+=ol+new Uint32Array(e(a,a+ol))[0];return a}else r=Dc[t.dtype];return n*r}async function FZ(t,e){const n=Fe(t.shape);let r;if("quantization"in t){const a=t.quantization;r=Dc[a.dtype]}else if(t.dtype==="string"){let a=0;for(let s=0;s<n;s++)a+=ol+new Uint32Array(await e(a,a+ol))[0];return a}else r=Dc[t.dtype];return n*r}function mL(t,e){const n=t.name,r=t.dtype,a=t.shape,s=Fe(a);let i,o=0;if("quantization"in t){const u=t.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${t.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const l=Dc[u.dtype],c=u.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){i=new Float32Array(c.length);for(let f=0;f<c.length;f++){const d=c[f];i[f]=d*u.scale+u.min}}else if(u.dtype==="float16")i=WZ()(c);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(r==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);i=new Int32Array(c.length);for(let f=0;f<c.length;f++){const d=c[f];i[f]=Math.round(d*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=s*l}else if(r==="string"){const u=Fe(t.shape);i=[];for(let l=0;l<u;l++){const c=new Uint32Array(e.slice(o,o+ol))[0];o+=ol;const f=new Uint8Array(e.slice(o,o+c));i.push(f),o+=c}}else{const u=Dc[r];if(r==="float32")i=new Float32Array(e);else if(r==="int32")i=new Int32Array(e);else if(r==="bool")i=new Uint8Array(e);else if(r==="complex64"){i=new Float32Array(e);const l=new Float32Array(i.length/2),c=new Float32Array(i.length/2);for(let m=0;m<l.length;m++)l[m]=i[m*2],c[m]=i[m*2+1];const f=zi(l,a,"float32"),d=zi(c,a,"float32"),h=il(f,d);return f.dispose(),d.dispose(),h}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=s*u}return zi(i,a,r)}async function xO(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:a,value:s}=await t.read();if(a&&s==null){const o=n-r.byteLength;throw new Error(`Reader is done but ${o} bytes are still expected`)}const i=new Uint8Array(r.length+s.byteLength);i.set(r,0),i.set(new Uint8Array(s),r.length),r=i}return r.buffer}async function gL(t,e){const n={},r=t.getReader();let a=new ArrayBuffer(0);for(const s of e){const i=await FZ(s,async(l,c)=>(a=await xO(r,a,c),a.slice(l,c)));a=await xO(r,a,i);const o=a.slice(0,i);a=a.slice(i);const u=mL(s,o);if(n[s.name]=u,_Z()==="webgpu"){const l=pL();"uploadToGPU"in l&&Fe(u.shape)>=$e().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&l.uploadToGPU(u.dataId)}}return n}function RZ(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let a=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),a),a+=s.byteLength}),r.buffer}const FT=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function SO(t){return FT?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function MZ(t){if(FT)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,a=e.length;r<a;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function PZ(t){if(FT){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function vL(t){return Gi.join(t)}function NO(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function yL(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function bL(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function RT(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),bL(t,n,r)}function og(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:SO(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:SO(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Gi(t.weightData).byteLength}}function rC(t){const e=[];for(const n of t)e.push(...n.weights);return e}function BZ(){const t=n=>{let r=n<<13,a=0;for(;!(r&8388608);)a-=8388608,r<<=1;return r&=-8388609,a+=947912704,r|a},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function LZ(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function zZ(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function WZ(){const t=BZ(),e=LZ(),n=zZ();return r=>{const a=new ArrayBuffer(4*r.length),s=new Uint32Array(a);for(let i=0;i<r.length;i++){const o=r[i],u=t[n[o>>10]+(o&1023)]+e[o>>10];s[i]=u}return new Float32Array(a)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Zn.instance==null&&(Zn.instance=new Zn),Zn.instance}static registerSaveRouter(e){Zn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Zn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Zn.getHandlers(e,"save")}static getLoadHandlers(e,n){return Zn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const a=[];return(n==="load"?Zn.getInstance().loadRouters:Zn.getInstance().saveRouters).forEach(i=>{const o=i(e,r);o!==null&&a.push(o)}),a}}const UZ=t=>Zn.registerSaveRouter(t),qZ=t=>Zn.registerLoadRouter(t),wL=t=>Zn.getSaveHandlers(t),VZ=(t,e)=>Zn.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aC="tensorflowjs",sC=1,mc="models_store",Vu="model_info_store";function xL(){if(!$e().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function iC(t){const e=t.result;e.createObjectStore(mc,{keyPath:"modelPath"}),e.createObjectStore(Vu,{keyPath:"modelPath"})}class Ac{constructor(e){if(this.indexedDB=xL(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,a)=>{const s=this.indexedDB.open(aC,sC);s.onupgradeneeded=()=>iC(s),s.onsuccess=()=>{const i=s.result;if(n==null){const o=i.transaction(mc,"readonly"),l=o.objectStore(mc).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return i.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=c=>(i.close(),a(l.error)),o.oncomplete=()=>i.close()}else{n.weightData=Gi.join(n.weightData);const o=og(n),u=i.transaction(Vu,"readwrite");let l=u.objectStore(Vu),c;try{c=l.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(d){return a(d)}let f;c.onsuccess=()=>{f=i.transaction(mc,"readwrite");const d=f.objectStore(mc);let h;try{h=d.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:o})}catch(m){return a(m)}h.onsuccess=()=>r({modelArtifactsInfo:o}),h.onerror=m=>{l=u.objectStore(Vu);const v=l.delete(this.modelPath);v.onsuccess=()=>(i.close(),a(h.error)),v.onerror=y=>(i.close(),a(h.error))}},c.onerror=d=>(i.close(),a(c.error)),u.oncomplete=()=>{f==null?i.close():f.oncomplete=()=>i.close()}}},s.onerror=i=>a(s.error)})}}Ac.URL_SCHEME="indexeddb://";const SL=t=>$e().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ac.URL_SCHEME)?jZ(t.slice(Ac.URL_SCHEME.length)):null;Zn.registerSaveRouter(SL);Zn.registerLoadRouter(SL);function jZ(t){return new Ac(t)}function HZ(t){return t.startsWith(Ac.URL_SCHEME)?t.slice(Ac.URL_SCHEME.length):t}class GZ{constructor(){this.indexedDB=xL()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(aC,sC);r.onupgradeneeded=()=>iC(r),r.onsuccess=()=>{const a=r.result,s=a.transaction(Vu,"readonly"),o=s.objectStore(Vu).getAll();o.onsuccess=()=>{const u={};for(const l of o.result)u[l.modelPath]=l.modelArtifactsInfo;e(u)},o.onerror=u=>(a.close(),n(o.error)),s.oncomplete=()=>a.close()},r.onerror=a=>n(r.error)})}async removeModel(e){return e=HZ(e),new Promise((n,r)=>{const a=this.indexedDB.open(aC,sC);a.onupgradeneeded=()=>iC(a),a.onsuccess=()=>{const s=a.result,i=s.transaction(Vu,"readwrite"),o=i.objectStore(Vu),u=o.get(e);let l;u.onsuccess=()=>{if(u.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=o.delete(e),f=()=>{l=s.transaction(mc,"readwrite");const h=l.objectStore(mc).delete(e);h.onsuccess=()=>n(u.result.modelArtifactsInfo),h.onerror=m=>r(u.error)};c.onsuccess=f,c.onerror=d=>(f(),s.close(),r(u.error))}},u.onerror=c=>(s.close(),r(u.error)),i.oncomplete=()=>{l==null?s.close():l.oncomplete=()=>s.close()}},a.onerror=s=>r(a.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xo="/",Yf="tensorflowjs_models",NL="info",KZ="model_topology",XZ="weight_specs",YZ="weight_data",QZ="model_metadata";function CL(t){return{info:[Yf,t,NL].join(Xo),topology:[Yf,t,KZ].join(Xo),weightSpecs:[Yf,t,XZ].join(Xo),weightData:[Yf,t,YZ].join(Xo),modelMetadata:[Yf,t,QZ].join(Xo)}}function EL(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function JZ(t){const e=t.split(Xo);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Xo)}function ZZ(t){return t.startsWith($c.URL_SCHEME)?t.slice($c.URL_SCHEME.length):t}class $c{constructor(e){if(!$e().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=CL(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=og(e),s=Gi.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,MZ(s));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:a}}catch{throw EL(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=a;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const o=JSON.parse(s);n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(n.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=PZ(i),n}}$c.URL_SCHEME="localstorage://";const TL=t=>$e().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith($c.URL_SCHEME)?eee(t.slice($c.URL_SCHEME.length)):null;Zn.registerSaveRouter(TL);Zn.registerLoadRouter(TL);function eee(t){return new $c(t)}class tee{constructor(){Y($e().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Y(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Yf+Xo,r=Xo+NL;for(let a=0;a<this.LS.length;++a){const s=this.LS.key(a);if(s.startsWith(n)&&s.endsWith(r)){const i=JZ(s);e[i]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=ZZ(e);const n=CL(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return EL(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const id="://";class Da{constructor(){this.managers={}}static getInstance(){return Da.instance==null&&(Da.instance=new Da),Da.instance}static registerManager(e,n){Y(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(id)&&(e=e.slice(0,e.indexOf(id))),Y(e.length>0,()=>"scheme must not be an empty string.");const r=Da.getInstance();Y(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Da.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Da.getInstance().managers)}}function a0(t){if(t.indexOf(id)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Da.getSchemes().join(",")}`);return{scheme:t.split(id)[0],path:t.split(id)[1]}}async function DL(t,e,n=!1){Y(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Zn.getLoadHandlers(t);Y(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),Y(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const a=r[0],s=Zn.getSaveHandlers(e);Y(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),Y(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const i=s[0],o=a0(t).scheme,u=a0(t).path,l=o===a0(t).scheme,c=await a.load();n&&l&&await Da.getManager(o).removeModel(u);const f=await i.save(c);return n&&!l&&await Da.getManager(o).removeModel(u),f.modelArtifactsInfo}async function nee(){const t=Da.getSchemes(),e={};for(const n of t){const r=await Da.getManager(n).listModels();for(const a in r){const s=n+id+a;e[s]=r[a]}}return e}async function ree(t){const e=a0(t);return Da.getManager(e.scheme).removeModel(e.path)}async function aee(t,e){return DL(t,e,!1)}async function see(t,e){return DL(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iee{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!$e().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const a=this.functionRefs[r.data.index];a(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return QB(e)}}if($e().get("IS_BROWSER")){$e().setPlatform("browser",new iee);try{Da.registerManager($c.URL_SCHEME,new tee)}catch{}try{Da.registerManager(Ac.URL_SCHEME,new GZ)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oee={importFetch:()=>require("node-fetch")};let bS;class uee{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return $e().global.fetch!=null?$e().global.fetch(e,n):(bS==null&&(bS=oee.importFetch()),bS(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}$e().get("IS_NODE")&&!$e().get("IS_BROWSER")&&$e().setPlatform("node",new uee);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tn(t,e="float32",n){return e=e||"float32",Ls(t),new $r(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lee(t,e){const n=J(t,"x","cast");if(!UJ(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:e};return me.runKernel(bm,r,a)}const ot=de({cast_:lee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cee(t){const n={x:J(t,"x","clone","string_or_numeric")};return me.runKernel(_m,n)}const Jo=de({clone_:cee});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AL(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */oL();const fee={buffer:tn,cast:ot,clone:Jo,print:AL};xZ(fee);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dee(t,e){let n=J(t,"a","add"),r=J(e,"b","add");[n,r]=ur(n,r);const a={a:n,b:r};return me.runKernel(Yd,a)}const Ve=de({add_:dee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pee(t,e){let n=J(t,"a","floorDiv"),r=J(e,"b","floorDiv");[n,r]=ur(n,r);const a={a:n,b:r};return me.runKernel(km,a)}const MT=de({floorDiv_:pee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hee(t,e){let n=J(t,"a","div"),r=J(e,"b","div");if([n,r]=ur(n,r),n.dtype==="int32"&&r.dtype==="int32")return MT(n,r);const a={a:n,b:r},s={};return me.runKernel(Cm,a,s)}const bt=de({div_:hee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mee(t,e){let n=J(t,"a","mul"),r=J(e,"b","mul");[n,r]=ur(n,r);const a={a:n,b:r};return me.runKernel(Wm,a)}const ge=de({mul_:mee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gee(t){const e=J(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return me.runKernel(Xb,n)}else{const n={x:e};return me.runKernel(zb,n)}}const Er=de({abs_:gee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vee(t){const n={x:J(t,"x","acos")};return me.runKernel(dm,n)}const $L=de({acos_:vee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yee(t){const n={x:J(t,"x","acosh")};return me.runKernel(pm,n)}const kL=de({acosh_:yee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bee(t){Y(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),Y(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((a,s)=>J(a,`tensors${s}`,"addN")),n=e[0];e.forEach(a=>{if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(a=>{if(!fn(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return me.runKernel(Wb,r)}const wee=de({addN_:bee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xee(t,e=null,n=!1){const a={x:J(t,"x","all","bool")},s={axis:e,keepDims:n};return me.runKernel($E,a,s)}const PT=de({all_:xee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function See(t,e=null,n=!1){const a={x:J(t,"x","any","bool")},s={axis:e,keepDims:n};return me.runKernel(kE,a,s)}const P0=de({any_:See});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nee(t,e=0){const r={x:J(t,"x","argMax")},a={axis:e};return me.runKernel(Ub,r,a)}const Cd=de({argMax_:Nee});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cee(t,e=0){const r={x:J(t,"x","argMin")},a={axis:e};return me.runKernel(qb,r,a)}const IL=de({argMin_:Cee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eee(t){const n={x:J(t,"x","asin")};return me.runKernel(hm,n)}const _L=de({asin_:Eee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tee(t){const n={x:J(t,"x","asinh")};return me.runKernel(mm,n)}const OL=de({asinh_:Tee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dee(t){const n={x:J(t,"x","atan")};return me.runKernel(gm,n)}const FL=de({atan_:Dee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aee(t,e){let n=J(t,"a","atan2"),r=J(e,"b","atan2");[n,r]=ur(n,r);const a={a:n,b:r};return me.runKernel(ym,a)}const RL=de({atan2_:Aee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ee(t){const n={x:J(t,"x","atanh")};return me.runKernel(vm,n)}const ML=de({atanh_:$ee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ug(t,e,n,r,a="NHWC",s){const i=t[3],o=[...e,i],u=pu(a);return Ur(t,o,n,s,r,null,null,u)}function xi(t,e,n,r,a,s,i="channelsLast"){const[o,u]=Wh(e);let l;if(i==="channelsLast")l=[o,u,t[3],t[3]];else if(i==="channelsFirst")l=[o,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return Ur(t,l,n,r,a,s,!1,i)}function du(t,e,n,r,a,s,i="NDHWC"){const[o,u,l]=oC(e);let c,f;if(i==="NDHWC")f="channelsLast",c=[o,u,l,t[4],t[4]];else if(i==="NCDHW")f="channelsFirst",c=[o,u,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return Nl(t,c,n,r,a,!1,f,s)}function Ur(t,e,n,r,a,s,i=!1,o="channelsLast"){let[u,l,c,f]=[-1,-1,-1,-1];if(o==="channelsLast")[u,l,c,f]=t;else if(o==="channelsFirst")[u,f,l,c]=t;else throw new Error(`Unknown dataFormat ${o}`);const[d,h,,m]=e,[v,y]=Wh(n),[b,x]=Wh(r),w=od(d,b),N=od(h,x),{padInfo:C,outHeight:E,outWidth:$}=_ee(a,l,c,v,y,w,N,s,o),I=i?m*f:m;let D;return o==="channelsFirst"?D=[u,I,E,$]:o==="channelsLast"&&(D=[u,E,$,I]),{batchSize:u,dataFormat:o,inHeight:l,inWidth:c,inChannels:f,outHeight:E,outWidth:$,outChannels:I,padInfo:C,strideHeight:v,strideWidth:y,filterHeight:d,filterWidth:h,effectiveFilterHeight:w,effectiveFilterWidth:N,dilationHeight:b,dilationWidth:x,inShape:t,outShape:D,filterShape:e}}function Nl(t,e,n,r,a,s=!1,i="channelsLast",o){let[u,l,c,f,d]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[u,l,c,f,d]=t;else if(i==="channelsFirst")[u,d,l,c,f]=t;else throw new Error(`Unknown dataFormat ${i}`);const[h,m,v,,y]=e,[b,x,w]=oC(n),[N,C,E]=oC(r),$=od(h,N),I=od(m,C),D=od(v,E),{padInfo:k,outDepth:A,outHeight:O,outWidth:B}=Oee(a,l,c,f,b,x,w,$,I,D,o),z=s?y*d:y;let L;return i==="channelsFirst"?L=[u,z,A,O,B]:i==="channelsLast"&&(L=[u,A,O,B,z]),{batchSize:u,dataFormat:i,inDepth:l,inHeight:c,inWidth:f,inChannels:d,outDepth:A,outHeight:O,outWidth:B,outChannels:z,padInfo:k,strideDepth:b,strideHeight:x,strideWidth:w,filterDepth:h,filterHeight:m,filterWidth:v,effectiveFilterDepth:$,effectiveFilterHeight:I,effectiveFilterWidth:D,dilationDepth:N,dilationHeight:C,dilationWidth:E,inShape:t,outShape:L,filterShape:e}}function kee(t,e,n,r,a){r==null&&(r=BT(t,e,n));const s=t[0],i=t[1],o=Uh((s-e+2*r)/n+1,a),u=Uh((i-e+2*r)/n+1,a);return[o,u]}function Iee(t,e,n,r,a,s){a==null&&(a=BT(t,e[0],r[0]));const i=[0,0,0,n];for(let o=0;o<3;o++)t[o]+2*a>=e[o]&&(i[o]=Uh((t[o]-e[o]+2*a)/r[o]+1,s));return i}function BT(t,e,n,r=1){const a=od(e,r);return Math.floor((t[0]*(n-1)-n+a)/2)}function Wh(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function oC(t){return typeof t=="number"?[t,t,t]:t}function od(t,e){return e<=1?t:t+(t-1)*(e-1)}function _ee(t,e,n,r,a,s,i,o,u){let l,c,f;if(typeof t=="number"){l={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=kee([e,n],s,r,t,o);c=h[0],f=h[1]}else if(t==="same"){c=Math.ceil(e/r),f=Math.ceil(n/a);const d=Math.max(0,(c-1)*r+s-e),h=Math.max(0,(f-1)*a+i-n),m=Math.floor(d/2),v=d-m,y=Math.floor(h/2),b=h-y;l={top:m,bottom:v,left:y,right:b,type:"SAME"}}else if(t==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-s+1)/r),f=Math.ceil((n-i+1)/a);else if(typeof t=="object"){const d=u==="channelsLast"?t[1][0]:t[2][0],h=u==="channelsLast"?t[1][1]:t[2][1],m=u==="channelsLast"?t[2][0]:t[3][0],v=u==="channelsLast"?t[2][1]:t[3][1];l={top:d,bottom:h,left:m,right:v,type:d===0&&h===0&&m===0&&v===0?"VALID":"EXPLICIT"},c=Uh((e-s+d+h)/r+1,o),f=Uh((n-i+m+v)/a+1,o)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:l,outHeight:c,outWidth:f}}function Oee(t,e,n,r,a,s,i,o,u,l,c){let f,d,h,m;if(t==="valid"&&(t=0),typeof t=="number"){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const y=Iee([e,n,r,1],[o,u,l],1,[a,s,i],t,c);d=y[0],h=y[1],m=y[2]}else if(t==="same"){d=Math.ceil(e/a),h=Math.ceil(n/s),m=Math.ceil(r/i);const v=(d-1)*a+o-e,y=(h-1)*s+u-n,b=(m-1)*i+l-r,x=Math.floor(v/2),w=v-x,N=Math.floor(y/2),C=y-N,E=Math.floor(b/2),$=b-E;f={top:N,bottom:C,left:E,right:$,front:x,back:w,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:f,outDepth:d,outHeight:h,outWidth:m}}function Uh(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function ul(t){const[e,n,r]=Wh(t);return e===1&&n===1&&r===1}function aa(t,e){return ul(t)||ul(e)}function kc(t){return Wh(t).every(e=>e>0)}function pu(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Ma(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")Y(Sd(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(a=>{Y(Sd(a),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${a}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fee(t,e){const r={x:J(t,"x","reshape","string_or_numeric")},a={shape:e};return me.runKernel($1,r,a)}const be=de({reshape_:Fee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ree(t,e,n,r,a){const s=J(t,"x","avgPool","float32"),i=1;Y(aa(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let o=s,u=!1;s.rank===3&&(u=!0,o=be(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Y(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),Ma("avgPool",r,a);const l={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a};let f=me.runKernel(Vb,l,c);return f=ot(f,s.dtype),u?be(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const V1=de({avgPool_:Ree});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mee(t,e,n,r,a,s="NDHWC"){const i=J(t,"x","avgPool3d","float32");let o=i,u=!1;i.rank===4&&(u=!0,o=be(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Y(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),Y(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),Y(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Ma("avgPool3d",r,a);const l={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:s};let f=me.runKernel(jb,l,c);return f=ot(f,o.dtype),u?be(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const PL=de({avgPool3d_:Mee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pee(t,e=0){Y(t.length>=1,()=>"Pass at least one tensor to concat");const n=M0(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return Jo(n[0]);const r=n,a={axis:e};return me.runKernel(Yb,r,a)}const wr=de({concat_:Pee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bee(t,e,n=!1,r=!1){let a=J(t,"a","matMul"),s=J(e,"b","matMul");[a,s]=ur(a,s);const i={a,b:s},o={transposeA:n,transposeB:r};return me.runKernel(Hb,i,o)}const nn=de({matMul_:Bee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lee(t){const n={x:J(t,"x","sigmoid","float32")};return me.runKernel(Jm,n)}const bo=de({sigmoid_:Lee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zee(t,e,n){const r=J(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const a={x:r},s={begin:e,size:n};return me.runKernel(F1,a,s)}const dn=de({slice_:zee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wee(t){const n={x:J(t,"x","tanh","float32")};return me.runKernel(ag,n)}const Ic=de({tanh_:Wee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uee(t,e,n,r,a,s){const i=J(t,"forgetBias","basicLSTMCell"),o=J(e,"lstmKernel","basicLSTMCell"),u=J(n,"lstmBias","basicLSTMCell"),l=J(r,"data","basicLSTMCell"),c=J(a,"c","basicLSTMCell"),f=J(s,"h","basicLSTMCell"),d=wr([l,f],1),h=nn(d,o),m=Ve(h,u),v=m.shape[0],y=m.shape[1]/4,b=[v,y],x=dn(m,[0,0],b),w=dn(m,[0,y],b),N=dn(m,[0,y*2],b),C=dn(m,[0,y*3],b),E=Ve(ge(bo(x),Ic(w)),ge(c,bo(Ve(i,N)))),$=ge(Ic(E),bo(C));return[E,$]}const qee=de({basicLSTMCell_:Uee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vee(t,e,n){const r=J(t,"x","batchToSpaceND"),a=e.reduce((o,u)=>o*u);Y(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),Y(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),Y(r.shape[0]%a===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${a}`);const s={x:r},i={blockShape:e,crops:n};return me.runKernel(Gb,s,i)}const j1=de({batchToSpaceND_:Vee});function jee(t){let e;return t.rank===0||t.rank===1?e=be(t,[1,1,1,t.size]):t.rank===2?e=be(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hee(t,e,n,r,a,s){s==null&&(s=.001);const i=J(t,"x","batchNorm"),o=J(e,"mean","batchNorm"),u=J(n,"variance","batchNorm");let l;a!=null&&(l=J(a,"scale","batchNorm"));let c;r!=null&&(c=J(r,"offset","batchNorm")),Y(o.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y(l==null||o.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:jee(i),scale:l,offset:c,mean:o,variance:u},h={varianceEpsilon:s},m=me.runKernel(s1,d,h);return be(m,i.shape)}const lg=de({batchNorm_:Hee});function Gee(t,e,n,r,a,s){const i=J(t,"x","batchNorm"),o=J(e,"mean","batchNorm"),u=J(n,"variance","batchNorm");let l;a!=null&&(l=J(a,"scale","batchNorm"));let c;return r!=null&&(c=J(r,"offset","batchNorm")),Y(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),Y(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),Y(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),l!=null&&Y(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&Y(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),lg(i,o,u,c,l,s)}const BL=de({batchNorm2d_:Gee});function Kee(t,e,n,r,a,s){const i=J(t,"x","batchNorm"),o=J(e,"mean","batchNorm"),u=J(n,"variance","batchNorm");let l;a!=null&&(l=J(a,"scale","batchNorm"));let c;return r!=null&&(c=J(r,"offset","batchNorm")),Y(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),Y(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),Y(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),l!=null&&Y(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&Y(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),lg(i,o,u,c,l,s)}const LL=de({batchNorm3d_:Kee});function Xee(t,e,n,r,a,s){const i=J(t,"x","batchNorm"),o=J(e,"mean","batchNorm"),u=J(n,"variance","batchNorm");let l;a!=null&&(l=J(a,"scale","batchNorm"));let c;return r!=null&&(c=J(r,"offset","batchNorm")),Y(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),Y(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),Y(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),l!=null&&Y(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&Y(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),lg(i,o,u,c,l,s)}const zL=de({batchNorm4d_:Xee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yee(t,e,n){const r=J(t,"x","bincount"),a=J(e,"weights","bincount");Y(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),Y(n>=0,()=>`size must be non-negative, but got ${n}.`),Y(a.size===r.size||a.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`);const s={x:r,weights:a},i={size:n};return me.runKernel(OE,s,i)}const WL=de({bincount_:Yee});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qee(t,e){const n=J(t,"x","bitwiseAnd"),r=J(e,"y","bitwiseAnd");if(!fn(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const a={a:n,b:r};return me.runKernel(Kb,a)}const Jee=de({bitwiseAnd_:Qee});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zee(t,e){const n=J(t,"s0","broadcastArgs","int32"),r=J(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const a={s0:n,s1:r};return me.runKernel(FE,a)}const ete=de({broadcastArgs_:Zee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tte(t,e){let n=J(t,"broadcastTo","x");const r=n.shape;if(Ls(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=be(n,l)}const a=n.shape,s=Array.from(e);for(let l=e.length-1;l>=0;l--)if(a[l]===e[l])s[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((l,c)=>l>1?c:-1).filter(l=>l>=0).length===0)return Jo(n);const o={x:n},u={reps:s};return me.runKernel(sg,o,u)}const ud=de({broadcastTo_:tte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nte(t){const n={x:J(t,"x","ceil","float32")};return me.runKernel(wm,n)}const UL=de({ceil_:nte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qd(t,e,n){Ls(t),n=n||Kd(e);const r={shape:t,value:e,dtype:n};return me.runKernel(XE,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rte(t,e,n){const r=J(t,"x","clipByValue");if(Y(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Qd(r.shape,e,r.dtype);const a={x:r},s={clipValueMin:e,clipValueMax:n};return me.runKernel(xm,a,s)}const ys=de({clipByValue_:rte});function ate(t){return wr(t,0)}const qL=de({concat1d_:ate});function ste(t,e){return wr(t,e)}const VL=de({concat2d_:ste});function ite(t,e){return wr(t,e)}const jL=de({concat3d_:ite});function ote(t,e){return wr(t,e)}const HL=de({concat4d_:ote});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ute(t,e,n,r,a="NHWC",s=[1,1],i){const o=J(t,"x","conv2d","float32"),u=J(e,"filter","conv2d","float32");let l=o,c=!1;o.rank===3&&(c=!0,l=be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Y(l.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),Y(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),Ma("conv2d",r,i);const f=a==="NHWC"?l.shape[3]:l.shape[1];Y(f===u.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${u.shape[2]}.`),Y(aa(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Y(kc(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),Y(kc(n),()=>"Error in conv2D: Strides should be larger than 0.");const d={x:l,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i},m=me.runKernel(Qb,d,h);return c?be(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const ll=de({conv2d_:ute});function lte(t,e,n,r,a="NWC",s=1,i){const o=J(t,"x","conv1d"),u=J(e,"filter","conv1d");let l=o,c=!1;o.rank===2&&(c=!0,l=be(o,[1,o.shape[0],o.shape[1]])),Y(l.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),Y(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),Ma("conv1d",r,i),Y(l.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${u.shape[1]}.`),Y(aa(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),Y(kc(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),Y(kc(n),()=>"Error in conv1D: Stride should be larger than 0."),Y(a==="NWC",()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);const f=be(u,[1,u.shape[0],u.shape[1],u.shape[2]]),d=be(l,[l.shape[0],1,l.shape[1],l.shape[2]]),y=ll(d,f,[1,n],r,"NHWC",[1,s],i);return c?be(y,[y.shape[2],y.shape[3]]):be(y,[y.shape[0],y.shape[2],y.shape[3]])}const LT=de({conv1d_:lte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cte(t,e,n,r,a,s="NHWC",i){Y(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,u=e,l=!1;e.rank===3&&(l=!0,u=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,t[0],t[1],t[2]]),Y(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),Y(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),Y(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=s==="NHWC"?o[3]:o[1],f=s==="NHWC"?u.shape[3]:u.shape[1];Y(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),Y(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),Ma("conv2dDerInput",a,i);const d={dy:u,filter:n},h={strides:r,pad:a,dataFormat:s,dimRoundingMode:i,inputShape:o},m=me.runKernel(Jb,d,h);return l?be(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const zT=de({conv2DBackpropInput_:cte});function fte(t,e,n,r,a,s){const i=J(t,"x","conv2dTranspose"),o=J(e,"filter","conv2dTranspose");return zT(n,i,o,r,a,"NHWC",s)}const WT=de({conv2dTranspose_:fte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dte(t,e,n,r,a="NDHWC",s=[1,1,1]){const i=J(t,"x","conv3d"),o=J(e,"filter","conv3d");let u=i,l=!1;i.rank===4&&(l=!0,u=be(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Y(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),Y(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),Y(u.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${o.shape[3]}.`),Y(aa(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Y(a==="NDHWC",()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`),Y(kc(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),Y(kc(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:u,filter:o},f={strides:n,pad:r,dataFormat:a,dilations:s},d=me.runKernel(Zb,c,f);return l?be(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const GL=de({conv3d_:dte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pte(t,e,n,r,a){Y(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,i=e,o=!1;e.rank===4&&(o=!0,i=be(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const u=s[4],l=i.shape[4];Y(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),Y(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),Y(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),Y(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),Y(l===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${n.shape[4]}.`);const c={dy:i,filter:n},f={pad:a,strides:r,inputShape:s},d=me.runKernel(BE,c,f);return o?be(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const KL=de({conv3DBackpropInput_:pte});function hte(t,e,n,r,a){const s=J(t,"x","conv3dTranspose"),i=J(e,"filter","conv3dTranspose");return KL(n,s,i,r,a)}const XL=de({conv3dTranspose_:hte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mte(t){const n={x:J(t,"x","cos","float32")};return me.runKernel(Sm,n)}const H1=de({cos_:mte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gte(t){const n={x:J(t,"x","cosh","float32")};return me.runKernel(Nm,n)}const UT=de({cosh_:gte});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vte(t,e=0,n=!1,r=!1){const s={x:J(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return me.runKernel(LE,s,i)}const B0=de({cumprod_:vte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yte(t,e=0,n=!1,r=!1){const s={x:J(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return me.runKernel(e1,s,i)}const qT=de({cumsum_:yte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bte(t,e,n,r=!1){const a=J(t,"x","denseBincount"),s=J(e,"weights","denseBincount");Y(a.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`),Y(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),Y(n>=0,()=>`size must be non-negative, but got ${n}.`),Y(s.size===a.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${s.shape}.`);const i={x:a,weights:s},o={size:n,binaryOutput:r};return me.runKernel(WE,i,o)}const uC=de({denseBincount_:bte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wte(t,e,n="NHWC"){const r=J(t,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];Y(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),Y(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e}  for depthToSpace with input shape
    ${r.shape}`),Y(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),Y(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${r.shape}`);const o={x:r},u={blockSize:e,dataFormat:n};return me.runKernel(UE,o,u)}const YL=de({depthToSpace_:wte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xte(t,e,n,r,a="NHWC",s=[1,1],i){const o=J(t,"x","depthwiseConv2d","float32"),u=J(e,"filter","depthwiseConv2d","float32");let l=o,c=!1;o.rank===3&&(c=!0,l=be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Y(l.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`),Y(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);const f=a==="NHWC"?l.shape[3]:l.shape[1];Y(f===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${u.shape[2]}.`),Ma("depthwiseConv2d",r,i);const d={x:l,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i},m=me.runKernel(t1,d,h);return c?be(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const cg=de({depthwiseConv2d_:xte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ste(t){const n={x:J(t,"x","diag")};return me.runKernel(jE,n)}const Nte=de({diag_:Ste});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cte(t,e,n,r,a=[1,1],s="NHWC"){const i=J(t,"x","dilation2d"),o=J(e,"filter","dilation2d");Y(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),Y(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),Y(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let u=i,l=!1;i.rank===3&&(u=be(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=!0),Y(u.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${o.shape[2]}`);const c={x:u,filter:o},f={strides:n,pad:r,dilations:a},d=me.runKernel(n1,c,f);return l?be(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const QL=de({dilation2d_:Cte});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ed(t,e){const n=t.length,r=[];for(let a=0;a<n;a++){const s=n-1-a,i=t[s]||1;(e[e.length-1-a]||1)>1&&i===1&&r.unshift(s)}return r}function _r(t,e){const n=[];for(let r=0;r<e.length;r++){const a=t[t.length-r-1],s=e.length-r-1,i=e[s];(a==null||a===1&&i>1)&&n.unshift(s)}return n}function Ht(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let a=0;a<n;a++){let s=t[t.length-a-1];s==null&&(s=1);let i=e[e.length-a-1];if(i==null&&(i=1),s===1)r[n-a-1]=i;else if(i===1)r[n-a-1]=s;else if(s!==i){const o=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(o)}else r[n-a-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ete(t,e){let n=J(t,"a","equal","string_or_numeric"),r=J(e,"b","equal","string_or_numeric");[n,r]=ur(n,r),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(r1,a)}const qi=de({equal_:Ete});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tte(t,e,n){const r=J(e,"a","where"),a=J(n,"b","where"),s=J(t,"condition","where","bool"),i=Ht(Ht(s.shape,r.shape),a.shape),o=ud(s,i),u=ud(r,i),l=ud(a,i),c={condition:o,t:u,e:l};return me.runKernel(O1,c)}const pa=de({where_:Tte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dte(t){const n={x:J(t,"x","zerosLike")};return me.runKernel(U1,n)}const mn=de({zerosLike_:Dte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ate(t,e){let n=J(t,"a","div"),r=J(e,"b","div");[n,r]=ur(n,r);const a=bt(n,r),s=mn(a),i=qi(r,s);return pa(i,s,a)}const JL=de({divNoNan_:Ate});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $te(t,e){const n=J(t,"t1","dot"),r=J(e,"t2","dot");Y((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const a=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(Y(a===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${s}.`),n.rank===1&&r.rank===1){const i=be(n,[1,-1]),o=be(r,[-1,1]),u=nn(i,o);return be(u,[])}else if(n.rank===1&&r.rank===2){const i=be(n,[1,-1]),o=be(r,[r.shape[0],r.shape[1]]),u=nn(i,o);return be(u,[u.size])}else if(n.rank===2&&r.rank===1){const i=be(r,[-1,1]),o=nn(n,i);return be(o,[o.size])}else{const i=be(r,[r.shape[0],r.shape[1]]);return nn(n,i)}}const ZL=de({dot_:$te});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kte(t,...e){const n=e.map((a,s)=>J(a,`tensors${s}`,"einsum")),r={equation:t};return me.runKernel(HE,n,r)}const Qf=de({einsum_:kte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ite(t){const n={x:J(t,"x","elu","float32")};return me.runKernel(Em,n)}const fg=de({elu_:Ite});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _te(t,e){const n=J(t,"x","ensureShape","string_or_numeric");if(!zJ(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const Ote=de({ensureShape_:_te});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fte(t){let e=J(t,"x","erf");Y(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=ot(e,"float32"));const n={x:e};return me.runKernel(Tm,n)}const VT=de({erf_:Fte});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jT(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function ez(t,e,n){const r=t.length+e.length,a=[];let s=0,i=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?a.push(t[s++]):a.push(e[i++]);return a}function qr(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const a=e.map(s=>t[s]);return[n,a]}function dr(t,e){const n=e.map(r=>1);return ez(t,n,e)}function sa(t,e,n){Y(jT(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function nr(t,e){if(jT(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Cl(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function pr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rte(t,e=null,n=!1){const a={x:J(t,"x","max")},s={reductionIndices:e,keepDims:n};return me.runKernel(m1,a,s)}const pi=de({max_:Rte});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mte(t,e=null,n=!1){const a={x:J(t,"x","min")},s={axis:e,keepDims:n};return me.runKernel(b1,a,s)}const qh=de({min_:Mte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pte(t,e){let n=J(t,"base","pow"),r=J(e,"exp","pow");[n,r]=ur(n,r);const a={a:n,b:r};return me.runKernel(Um,a)}const su=de({pow_:Pte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ct(t,e){if((vi(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&vi(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Sl(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bte(t){const n={x:J(t,"x","sqrt","float32")};return me.runKernel(eg,n)}const na=de({sqrt_:Bte});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lte(t){const e=J(t,"x","square"),n={};return me.runKernel("Square",{x:e},n)}const Pn=de({square_:Lte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zte(t,e=null,n=!1){let r=J(t,"x","sum");r.dtype==="bool"&&(r=ot(r,"int32"));const a={x:r},s={axis:e,keepDims:n};return me.runKernel(R1,a,s)}const ht=de({sum_:zte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wte(t,e="euclidean",n=null,r=!1){t=J(t,"x","norm");const a=tz(t,e,n);let s=a.shape;if(r){const i=sn(n,t.shape);s=dr(a.shape,i)}return be(a,s)}function tz(t,e,n=null){if(t.rank===0)return Er(t);if(t.rank!==1&&n===null)return tz(be(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return ht(Er(t),n);if(e===1/0)return pi(Er(t),n);if(e===-1/0)return qh(Er(t),n);if(e==="euclidean"||e===2)return na(ht(su(Er(t),Ct(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return pi(ht(Er(t),n[0]),n[1]-1);if(e===1/0)return pi(ht(Er(t),n[1]),n[0]);if(e===-1/0)return qh(ht(Er(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return na(ht(Pn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const dg=de({norm_:Wte});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ute(t,e=null,n=!1){return dg(t,"euclidean",e,n)}const nz=de({euclideanNorm_:Ute});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qte(t){const n={x:J(t,"x","exp")};return me.runKernel(Dm,n)}const bs=de({exp_:qte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vte(t,e=0){const n=J(t,"x","expandDims","string_or_numeric");Y(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},a={dim:e};return me.runKernel(a1,r,a)}const $a=de({expandDims_:Vte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jte(t){const n={x:J(t,"x","expm1")};return me.runKernel(Am,n)}const rz=de({expm1_:jte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hte(t,e){const n=J(t,"x","tile","string_or_numeric");Y(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},a={reps:e};return me.runKernel(sg,r,a)}const ui=de({tile_:Hte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gte(t,e,n,r="float32"){e==null&&(e=t);const a=tn([t,e],r),s=t<=e?t:e;for(let o=0;o<s;++o)a.set(1,o,o);const i=be(a.toTensor(),[t,e]);if(n==null)return i;if(n.length===1)return ui($a(i,0),[n[0],1,1]);if(n.length===2)return ui($a($a(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return ui($a($a($a(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const HT=de({eye_:Gte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kte(t){const n={x:J(t,"x","floor","float32")};return me.runKernel($m,n)}const pg=de({floor_:Kte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xte(t,e,n=0,r=0){const a=J(t,"x","gather"),s=J(e,"indices","gather","int32"),i={x:a,indices:s},o={axis:n,batchDims:r};return me.runKernel(i1,i,o)}const hg=de({gather_:Xte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yte(t,e){let n=J(t,"a","greater","string_or_numeric"),r=J(e,"b","greater","string_or_numeric");[n,r]=ur(n,r),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(o1,a)}const Ts=de({greater_:Yte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qte(t,e){let n=J(t,"a","greaterEqual","string_or_numeric"),r=J(e,"b","greaterEqual","string_or_numeric");[n,r]=ur(n,r),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(Im,a)}const El=de({greaterEqual_:Qte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jte(t){const n={input:J(t,"input","imag")};return me.runKernel(ZE,n)}const G1=de({imag_:Jte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zte(t){const n={x:J(t,"x","isFinite")};return me.runKernel(Om,n)}const az=de({isFinite_:Zte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ene(t){const n={x:J(t,"x","isInf")};return me.runKernel(Fm,n)}const sz=de({isInf_:ene});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tne(t){const n={x:J(t,"x","isNaN")};return me.runKernel(Rm,n)}const iz=de({isNaN_:tne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nne(t,e=.2){const r={x:J(t,"x","leakyRelu")},a={alpha:e};return me.runKernel(u1,r,a)}const K1=de({leakyRelu_:nne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rne(t,e){let n=J(t,"a","less","string_or_numeric"),r=J(e,"b","less","string_or_numeric");[n,r]=ur(n,r),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(l1,a)}const Vh=de({less_:rne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ane(t,e){let n=J(t,"a","lessEqual","string_or_numeric"),r=J(e,"b","lessEqual","string_or_numeric");[n,r]=ur(n,r),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(c1,a)}const Vc=de({lessEqual_:ane});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sne(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return me.runKernel(eT,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ine(t,e=5,n=1,r=1,a=.5){const s=J(t,"x","localResponseNormalization");Y(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),Y(Sd(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=s,o=!1;s.rank===3&&(o=!0,i=be(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const u={x:i},l={depthRadius:e,bias:n,alpha:r,beta:a},c=me.runKernel(h1,u,l);return o?be(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const oz=de({localResponseNormalization_:ine});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function one(t){const n={x:J(t,"x","log","float32")};return me.runKernel(Mm,n)}const Ms=de({log_:one});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function une(t){const n={x:J(t,"x","log1p")};return me.runKernel(Pm,n)}const X1=de({log1p_:une});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lne(t,e){Y(HN(t),()=>"The f passed in variableGrads(f) must be a function"),Y(e==null||Array.isArray(e)&&e.every(l=>l instanceof R0),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const l in me.registeredVariables)e.push(me.registeredVariables[l])}const r=n?e.filter(l=>!l.trainable):null,a=e.length;e=e.filter(l=>l.trainable),Y(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);const s=!0,{value:i,grads:o}=me.gradients(t,e,null,s);Y(o.some(l=>l!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),Y(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const u={};return e.forEach((l,c)=>{o[c]!=null&&(u[l.name]=o[c])}),r!=null&&r.forEach(l=>u[l.name]=null),{value:i,grads:u}}function iu(t){return me.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cne(t){const n={x:J(t,"x","neg")};return me.runKernel(x1,n)}const jn=de({neg_:cne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fne(t){const n={x:J(t,"x","softplus")};return me.runKernel(Zm,n)}const Jd=de({softplus_:fne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dne(t){const e=J(t,"x","logSigmoid");return iu(r=>({value:jn(Jd(jn(r))),gradFunc:i=>ge(i,bo(jn(r)))}))(e)}const uz=de({logSigmoid_:dne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pne(t,e){let n=J(t,"a","sub"),r=J(e,"b","sub");[n,r]=ur(n,r);const a={a:n,b:r};return me.runKernel(ng,a)}const ft=de({sub_:pne});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hne(t,e=-1){const n=J(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return iu((a,s)=>{const o=pi(a,e,!0),u=ft(a,o),l=ft(ot(u,"float32"),Ms(ht(bs(u),e,!0)));return s([l]),{value:l,gradFunc:(f,d)=>{const[h]=d,m=!0,v=bs(h);return ft(f,ge(ht(f,e,m),v))}}})(n)}const GT=de({logSoftmax_:hne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mne(t,e=null,n=!1){const r=J(t,"x","logSumExp"),a=sn(e,r.shape),s=pi(r,a,!0),i=ft(r,s),o=bs(i),u=ht(o,a),l=Ms(u),c=Ve(be(s,l.shape),l);if(n){const f=dr(c.shape,a);return be(c,f)}return c}const Y1=de({logSumExp_:mne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gne(t,e){const n=J(t,"a","logicalAnd","bool"),r=J(e,"b","logicalAnd","bool");Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(f1,a)}const No=de({logicalAnd_:gne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vne(t){const n={x:J(t,"x","logicalNot","bool")};return me.runKernel(d1,n)}const Q1=de({logicalNot_:vne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yne(t,e){const n=J(t,"a","logicalOr","bool"),r=J(e,"b","logicalOr","bool");Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(p1,a)}const KT=de({logicalOr_:yne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bne(t,e){const n=J(t,"a","logicalXor","bool"),r=J(e,"b","logicalXor","bool");return Ht(n.shape,r.shape),No(KT(t,e),Q1(No(t,e)))}const lz=de({logicalXor_:bne});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wy=2147483648;function wne(t,e,n="left"){const r=J(t,"sortedSequence","searchSorted"),a=J(e,"values","searchSorted"),s=r.shape[r.shape.length-1],i=a.shape[a.shape.length-1],o=be(r,[-1,s]),u=be(a,[-1,i]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Fe(u.shape)>=wy)throw new Error(`values tensor size must less than ${wy}`);if(o.shape[1]>=wy)throw new Error(`trailing dim_size must less than ${wy} for int32 output type, was ${o.shape[1]}`);const l={sortedSequence:o,values:u},c={side:n};return me.runKernel(yT,l,c)}const XT=de({searchSorted_:wne});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xne(t,e){return XT(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sne(t,e,n,r,a){const s=J(t,"x","maxPool"),i=1;let o=s,u=!1;s.rank===3&&(u=!0,o=be(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Y(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),Y(aa(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Ma("maxPool",r,a);const l={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a},f=me.runKernel(g1,l,c);return u?be(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const J1=de({maxPool_:Sne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nne(t,e=[1,1,1],n,r,a,s="NDHWC"){const i=J(t,"x","maxPool3d");let o=i,u=!1;i.rank===4&&(u=!0,o=be(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Y(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),Y(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),Ma("maxPool3d",r,a);const l={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:s},f=me.runKernel(v1,l,c);return u?be(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const cz=de({maxPool3d_:Nne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cne(t,e,n,r,a=!1){const i={x:J(t,"x","maxPoolWithArgmax")},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:a},u=me.runKernel(aT,i,o);return{result:u[0],indexes:u[1]}}const Ene=de({maxPoolWithArgmax_:Cne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tne(t,e){let n=J(t,"a","maximum"),r=J(e,"b","maximum");[n,r]=ur(n,r),n.dtype==="bool"&&(n=ot(n,"int32"),r=ot(r,"int32")),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(Bm,a)}const hu=de({maximum_:Tne});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dne(t,e=null,n=!1){const a={x:J(t,"x","mean")},s={axis:e,keepDims:n};return me.runKernel(y1,a,s)}const or=de({mean_:Dne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tr(t,e="float32"){if(Ls(t),e==="complex64"){const r=Tr(t,"float32"),a=Tr(t,"float32");return il(r,a)}const n=ma(Fe(t),e);return me.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ps(t,e="float32"){if(Ls(t),e==="complex64"){const r=ps(t,"float32"),a=Tr(t,"float32");return il(r,a)}const n=DE(Fe(t),e);return me.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ane(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=J(t,"x","meshgrid",t instanceof er?t.dtype:"float32");if(e===void 0)return[r];let a=J(e,"y","meshgrid",e instanceof er?e.dtype:"float32");const s=Fe(r.shape),i=Fe(a.shape);return n==="xy"?(r=be(r,[1,-1]),a=be(a,[-1,1]),[nn(ps([i,1],r.dtype),r),nn(a,ps([1,s],a.dtype))]):(r=be(r,[-1,1]),a=be(a,[1,-1]),[nn(r,ps([1,i],r.dtype)),nn(ps([s,1],a.dtype),a)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ne(t,e){let n=J(t,"a","minimum"),r=J(e,"b","minimum");[n,r]=ur(n,r),n.dtype==="bool"&&(n=ot(n,"int32"),r=ot(r,"int32")),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(Lm,a)}const _c=de({minimum_:$ne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kne(t,e,n){Y(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=J(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Y(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const a=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)Y(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Y(e[o][0]>=0&&e[o][0]<=r.shape[o]-a&&e[o][1]>=0&&e[o][1]<=r.shape[o]-a,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-a} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},i={x:r};return me.runKernel(w1,i,s)}const fz=de({mirrorPad_:kne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ine(t,e){let n=J(t,"a","mod"),r=J(e,"b","mod");[n,r]=ur(n,r);const a={a:n,b:r};return me.runKernel(zm,a)}const dz=de({mod_:Ine});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ne(t,e=null,n=!1){t=J(t,"x","moments");const r=sn(e,t.shape),a=or(t,r,n);let s=a.shape;n||(s=dr(a.shape,r));const i=Pn(ft(ot(t,"float32"),be(a,s))),o=or(i,r,n);return{mean:a,variance:o}}const Z1=de({moments_:_ne});function One(t,e,n,r){const a=J(e,"data","multiRNNCell"),s=M0(n,"c","multiRNNCell"),i=M0(r,"h","multiRNNCell");let o=a;const u=[];for(let f=0;f<t.length;f++){const d=t[f](o,s[f],i[f]);u.push(d[0]),u.push(d[1]),o=d[1]}const l=[],c=[];for(let f=0;f<u.length;f+=2)l.push(u[f]),c.push(u[f+1]);return[l,c]}const Fne=de({multiRNNCell_:One});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rne(t,e,n,r=!1){const a=J(t,"logits","multinomial"),s=a.size,i=a.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);n=n||Math.random();const u={logits:i===1?be(a,[1,-1]):a},l={numSamples:e,seed:n,normalized:r},c=me.runKernel(sT,u,l);return i===1?be(c,[c.size]):c}const Mne=de({multinomial_:Rne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pne(t,e){let n=J(t,"a","notEqual","string_or_numeric"),r=J(e,"b","notEqual","string_or_numeric");[n,r]=ur(n,r),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(S1,a)}const Td=de({notEqual_:Pne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bne(t,e,n=1,r=0,a="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:J(t,"indices","oneHot","int32")},o={dtype:a,depth:e,onValue:n,offValue:r};return me.runKernel(C1,i,o)}const YT=de({oneHot_:Bne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lne(t){const n={x:J(t,"x","onesLike")};return me.runKernel(N1,n)}const Ps=de({onesLike_:Lne});function zne(t,e){const n=J(t,"v1","outerProduct"),r=J(e,"v2","outerProduct");Y(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const a=be(n,[-1,1]),s=be(r,[1,-1]);return nn(a,s)}const Wne=de({outerProduct_:zne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Une(t,e,n=0){const r=J(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:e,constantValue:n},s={x:r};return me.runKernel(T1,s,a)}const Tl=de({pad_:Une});function qne(t,e,n=0){return Y(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Tl(t,[e],n)}const Vne=de({pad1d_:qne});function jne(t,e,n=0){return Y(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Tl(t,e,n)}const Hne=de({pad2d_:jne});function Gne(t,e,n=0){return Y(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Tl(t,e,n)}const Kne=de({pad3d_:Gne});function Xne(t,e,n=0){return Y(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Tl(t,e,n)}const Yne=de({pad4d_:Xne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qne(t,e,n){const r=J(t,"x","spaceToBatchND");Y(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),Y(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),Y(r.shape.reduce((i,o,u)=>u>0&&u<=e.length?i&&(o+n[u-1][0]+n[u-1][1])%e[u-1]===0:i,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const a={x:r},s={blockShape:e,paddings:n};return me.runKernel(M1,a,s)}const ew=de({spaceToBatchND_:Qne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jne(t,e,n,r,a,s,i){a==null&&(a=[1,1]),s==null&&(s=1),r===0&&(r="valid");const o=J(t,"x","maxPool");let u=o,l=!1;o.rank===3&&(l=!0,u=be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Y(aa(s,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${a}'`);const c=xi(u.shape,e,s,a,r),f=[c.dilationHeight,c.dilationWidth];let d;r==="same"?d=ere([c.filterHeight,c.filterWidth],f):d=[[0,0],[0,0]];const h=f[0]===1&&f[1]===1,[m,v]=Zne([c.inHeight,c.inWidth],f,d),y=h?r:"valid",b=h?u:ew(u,f,m),w=(n==="avg"?()=>V1(b,e,s,y,i):()=>J1(b,e,s,y,i))(),N=h?w:j1(w,f,v);return l?be(N,[N.shape[1],N.shape[2],N.shape[3]]):N}function Zne(t,e,n){const r=n.map(c=>c[0]),a=n.map(c=>c[1]),s=t.concat(r,a),i=e.map((c,f)=>(c-s[f]%c)%c),o=a.map((c,f)=>c+i[f]),u=e.map((c,f)=>[r[f],o[f]]),l=e.map((c,f)=>[0,i[f]]);return[u,l]}function ere(t,e){const r=t.map((i,o)=>i+(i-1)*(e[o]-1)).map(i=>i-1),a=r.map(i=>Math.floor(i/2)),s=r.map((i,o)=>i-a[o]);return r.map((i,o)=>[a[o],s[o]])}const pz=de({pool_:Jne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tre(t,e){const n=J(t,"x","prelu"),r=J(e,"alpha","prelu"),a={x:n,alpha:r};return me.runKernel(D1,a)}const tw=de({prelu_:tre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nre(t,e=null,n=!1){let r=J(t,"x","prod");r.dtype==="bool"&&(r=ot(r,"int32"));const a={x:r},s={axis:e,keepDims:n};return me.runKernel(A1,a,s)}const hz=de({prod_:nre});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rre(t,e,n,r){const a=t.map((c,f)=>J(c,`tensors${f}`,"raggedGather","int32")),s=J(e,"paramsDenseValues","raggedGather"),i=J(n,"indices","raggedGather","int32"),o={paramsNestedSplits:a,paramsDenseValues:s,indices:i},u={outputRaggedRank:r},l=me.runKernel(lT,o,u);return{outputNestedSplits:l.slice(0,l.length-1),outputDenseValues:l[l.length-1]}}const are=de({raggedGather_:rre});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sre(t,e,n){const r=J(t,"starts","raggedRange"),a=J(e,"limits","raggedRange",r.dtype),s=J(n,"deltas","raggedRange",r.dtype),i={starts:r,limits:a,deltas:s},o=me.runKernel(cT,i);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}const ire=de({raggedRange_:sre});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ore(t,e,n,r,a){const s=J(t,"shape","raggedTensorToTensor","int32"),i=J(e,"values","raggedTensorToTensor"),o=J(n,"defaultValue","raggedTensorToTensor",i.dtype),u=r.map((f,d)=>J(f,`tensors${d}`,"raggedTensorToTensor","int32")),l={shape:s,values:i,defaultValue:o,rowPartitionTensors:u},c={rowPartitionTypes:a};return me.runKernel(fT,l,c)}const ure=de({raggedTensorToTensor_:ore});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lre(t,e,n){Ls(t);const r=Fe(t);let a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else if(n==="bool")a=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let s=0;s<r;s++)a[s]=e();return me.makeTensor(a,t,n)}const cre=de({rand_:lre});var s0={exports:{}},fre=s0.exports,CO;function dre(){return CO||(CO=1,function(t){(function(e,n,r){function a(u){var l=this,c=o();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function s(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function i(u,l){var c=new a(u),f=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&s(f,c),d.state=function(){return s(c,{})}),d}function o(){var u=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=i:this.alea=i})(fre,t)}(s0)),s0.exports}var i0={exports:{}},pre=i0.exports,EO;function hre(){return EO||(EO=1,function(t){(function(e,n,r){function a(o){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},o===(o|0)?u.x=o:l+=o;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function s(o,u){return u.x=o.x,u.y=o.y,u.z=o.z,u.w=o.w,u}function i(o,u){var l=new a(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=i:this.xor128=i})(pre,t)}(i0)),i0.exports}var o0={exports:{}},mre=o0.exports,TO;function gre(){return TO||(TO=1,function(t){(function(e,n,r){function a(o){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,o===(o|0)?u.x=o:l+=o;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function s(o,u){return u.x=o.x,u.y=o.y,u.z=o.z,u.w=o.w,u.v=o.v,u.d=o.d,u}function i(o,u){var l=new a(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=i:this.xorwow=i})(mre,t)}(o0)),o0.exports}var u0={exports:{}},vre=u0.exports,DO;function yre(){return DO||(DO=1,function(t){(function(e,n,r){function a(o){var u=this;u.next=function(){var c=u.x,f=u.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,u.i=f+1&7,h};function l(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(u,o)}function s(o,u){return u.x=o.x.slice(),u.i=o.i,u}function i(o,u){o==null&&(o=+new Date);var l=new a(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.x&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=i:this.xorshift7=i})(vre,t)}(u0)),u0.exports}var l0={exports:{}},bre=l0.exports,AO;function wre(){return AO||(AO=1,function(t){(function(e,n,r){function a(o){var u=this;u.next=function(){var c=u.w,f=u.X,d=u.i,h,m;return u.w=c=c+1640531527|0,m=f[d+34&127],h=f[d=d+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=f[d]=m^h,u.i=d,m+(c^c>>>16)|0};function l(c,f){var d,h,m,v,y,b=[],x=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,x=Math.max(x,f.length)),m=0,v=-32;v<x;++v)f&&(h^=f.charCodeAt((v+32)%f.length)),v===0&&(y=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(y=y+1640531527|0,d=b[v&127]^=h+y,m=d==0?m+1:0);for(m>=128&&(b[(f&&f.length||0)&127]=-1),m=127,v=4*128;v>0;--v)h=b[m+34&127],d=b[m=m+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,b[m]=h^d;c.w=y,c.X=b,c.i=m}l(u,o)}function s(o,u){return u.i=o.i,u.w=o.w,u.X=o.X.slice(),u}function i(o,u){o==null&&(o=+new Date);var l=new a(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.X&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=i:this.xor4096=i})(bre,t)}(l0)),l0.exports}var c0={exports:{}},xre=c0.exports,$O;function Sre(){return $O||($O=1,function(t){(function(e,n,r){function a(o){var u=this,l="";u.next=function(){var f=u.b,d=u.c,h=u.d,m=u.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^m,m=m-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-h|0,u.d=h<<16^d>>>16^m,u.a=m-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,o===Math.floor(o)?(u.a=o/4294967296|0,u.b=o|0):l+=o;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function s(o,u){return u.a=o.a,u.b=o.b,u.c=o.c,u.d=o.d,u}function i(o,u){var l=new a(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&s(c,l),f.state=function(){return s(l,{})}),f}n&&n.exports?n.exports=i:this.tychei=i})(xre,t)}(c0)),c0.exports}var f0={exports:{}};const Nre={},Cre=Object.freeze(Object.defineProperty({__proto__:null,default:Nre},Symbol.toStringTag,{value:"Module"})),Ere=wH(Cre);var Tre=f0.exports,kO;function Dre(){return kO||(kO=1,function(t){(function(e,n,r){var a=256,s=6,i=52,o="random",u=r.pow(a,s),l=r.pow(2,i),c=l*2,f=a-1,d;function h(N,C,E){var $=[];C=C==!0?{entropy:!0}:C||{};var I=b(y(C.entropy?[N,w(n)]:N??x(),3),$),D=new m($),k=function(){for(var A=D.g(s),O=u,B=0;A<l;)A=(A+B)*a,O*=a,B=D.g(1);for(;A>=c;)A/=2,O/=2,B>>>=1;return(A+B)/O};return k.int32=function(){return D.g(4)|0},k.quick=function(){return D.g(4)/4294967296},k.double=k,b(w(D.S),n),(C.pass||E||function(A,O,B,z){return z&&(z.S&&v(z,D),A.state=function(){return v(D,{})}),B?(r[o]=A,O):A})(k,I,"global"in C?C.global:this==r,C.state)}function m(N){var C,E=N.length,$=this,I=0,D=$.i=$.j=0,k=$.S=[];for(E||(N=[E++]);I<a;)k[I]=I++;for(I=0;I<a;I++)k[I]=k[D=f&D+N[I%E]+(C=k[I])],k[D]=C;($.g=function(A){for(var O,B=0,z=$.i,L=$.j,F=$.S;A--;)O=F[z=f&z+1],B=B*a+F[f&(F[z]=F[L=f&L+O])+(F[L]=O)];return $.i=z,$.j=L,B})(a)}function v(N,C){return C.i=N.i,C.j=N.j,C.S=N.S.slice(),C}function y(N,C){var E=[],$=typeof N,I;if(C&&$=="object")for(I in N)try{E.push(y(N[I],C-1))}catch{}return E.length?E:$=="string"?N:N+"\0"}function b(N,C){for(var E=N+"",$,I=0;I<E.length;)C[f&I]=f&($^=C[f&I]*19)+E.charCodeAt(I++);return w(C)}function x(){try{var N;return d&&(N=d.randomBytes)?N=N(a):(N=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(N)),w(N)}catch{var C=e.navigator,E=C&&C.plugins;return[+new Date,e,E,e.screen,w(n)]}}function w(N){return String.fromCharCode.apply(0,N)}if(b(r.random(),n),t.exports){t.exports=h;try{d=Ere}catch{}}else r["seed"+o]=h})(typeof self<"u"?self:Tre,[],Math)}(f0)),f0.exports}var wS,IO;function Are(){if(IO)return wS;IO=1;var t=dre(),e=hre(),n=gre(),r=yre(),a=wre(),s=Sre(),i=Dre();return i.alea=t,i.xor128=e,i.xorwow=n,i.xorshift7=r,i.xor4096=a,i.tychei=s,wS=i,wS}var mg=Are();const mz=Uc(mg);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QT{constructor(e,n,r,a,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=s||Math.random();this.random=mg.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const a=this.nextVal;return this.nextVal=NaN,a}let e,n,r=!1;for(;!r;){let a,s,i;do a=2*this.random()-1,s=2*this.random()-1,i=a*a+s*s;while(i>=1||i===0);const o=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*a*o,n=this.mean+this.stdDev*s*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class $re{constructor(e,n,r,a){this.alpha=e,this.beta=1/n,this.dtype=r;const s=a||Math.random();this.randu=mg.alea(s.toString()),this.randn=new QT(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,a,s,i;for(;;){do a=this.randn.nextValue(),i=1+this.c*a;while(i<=0);if(i*=i*i,e=a*a,n=1-.331*e*e,r=.5*e+this.d*(1-i+Math.log(i)),s=this.randu(),s<n||Math.log(s)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class kre{constructor(e=0,n=1,r,a){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=mg.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ire(t,e,n=1,r="float32",a){if(Ls(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const s=new $re(e,n,r,a),i=tn(t,r);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}const _re=de({randomGamma_:Ire});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ore(t,e=0,n=1,r,a){if(Ls(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new QT(e,n,r,!1,a),i=tn(t,r);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}const JT=de({randomNormal_:Ore});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fre(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return JT(t,0,1,e,n)}const Rre=de({randomStandardNormal_:Fre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mre(t,e=0,n=1,r="float32",a){Ls(t);const s=tn(t,r),i=new kre(e,n,null,a);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}const jc=de({randomUniform_:Mre});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pre(t,e,n,r){return jc(t,e,n,"int32",r)}const Bre=de({randomUniformInt_:Pre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dd(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const a={start:t,stop:e,step:n,dtype:r};return me.runKernel(dT,{},a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lre(t){const n={input:J(t,"input","real")};return me.runKernel(pT,n)}const jh=de({real_:Lre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zre(t){const n={x:J(t,"x","reciprocal")};return me.runKernel(qm,n)}const gz=de({reciprocal_:zre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wre(t){const n={x:J(t,"x","relu")};return me.runKernel(Vm,n)}const $o=de({relu_:Wre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ure(t){const n={x:J(t,"x","relu6")};return me.runKernel(jm,n)}const ZT=de({relu6_:Ure});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qre(t,e){const r={x:J(t,"x","reverse")},a={dims:e};return me.runKernel(_1,r,a)}const yi=de({reverse_:qre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vre(t){const e=J(t,"x","reverse");return Y(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),yi(e,0)}const jre=de({reverse1d_:Vre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hre(t,e){const n=J(t,"x","reverse");return Y(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),yi(n,e)}const Gre=de({reverse2d_:Hre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kre(t,e){const n=J(t,"x","reverse");return Y(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),yi(n,e)}const Xre=de({reverse3d_:Kre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yre(t,e){const n=J(t,"x","reverse");return Y(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),yi(n,e)}const Qre=de({reverse4d_:Yre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jre(t){const n={x:J(t,"x","round")};return me.runKernel(Hm,n)}const eD=de({round_:Jre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zre(t){const n={x:J(t,"x","rsqrt","float32")};return me.runKernel(Gm,n)}const tD=de({rsqrt_:Zre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eae(t){const n={x:J(t,"x","selu")};return me.runKernel(Km,n)}const nD=de({selu_:eae});function tae(t,e,n,r,a,s=[1,1],i="NHWC"){const o=J(t,"x","separableConv2d"),u=J(e,"depthwiseFilter","separableConv2d"),l=J(n,"pointwiseFilter","separableConv2d");let c=o,f=!1;if(o.rank===3&&(f=!0,c=be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Y(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),Y(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),Y(l.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),Y(l.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`),Y(l.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`);const d=u.shape[2],h=u.shape[3];Y(l.shape[2]===d*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*h}, but got ${l.shape[2]}.`);const m=cg(c,u,r,a,i,s),y=ll(m,l,1,"valid",i);return f?be(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const rD=de({separableConv2d_:tae});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nae(t,e){const n=J(t,"x","setdiff1d"),r=J(e,"y","setdiff1d");Y(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),Y(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),Y(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const a=await n.data(),s=await r.data(),i=new Set(s);let o=0;for(let c=0;c<a.length;c++)i.has(a[c])||o++;const u=new $r([o],n.dtype),l=new $r([o],"int32");for(let c=0,f=0;c<a.length;c++)i.has(a[c])||(u.values[f]=a[c],l.values[f]=c,f++);return[u.toTensor(),l.toTensor()]}const rae=nae;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aae(t){const n={x:J(t,"x","sign")};return me.runKernel(Qm,n)}const vz=de({sign_:aae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sae(t){const n={x:J(t,"x","sin","float32")};return me.runKernel(Xm,n)}const aD=de({sin_:sae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iae(t){const n={x:J(t,"x","sinh")};return me.runKernel(Ym,n)}const sD=de({sinh_:iae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oae(t,e,n){const r=J(t,"x","slice1d");return Y(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),dn(r,[e],[n])}const nw=de({slice1d_:oae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uae(t,e,n){const r=J(t,"x","slice2d");return Y(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),dn(r,e,n)}const iD=de({slice2d_:uae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lae(t,e,n){const r=J(t,"x","slice3d");return Y(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),dn(r,e,n)}const rw=de({slice3d_:lae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cae(t,e,n){const r=J(t,"x","slice4d");return Y(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),dn(r,e,n)}const Hh=de({slice4d_:cae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fae(t,e=-1){const n=J(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},a={dim:e};return me.runKernel(B1,r,a)}const aw=de({softmax_:fae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dae(t){Y(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return me.runKernel(KE,e)}const sw=de({fft_:dae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pae(t){Y(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return me.runKernel(JE,e)}const Gh=de({ifft_:pae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hae(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const a=be(t,[n,e]);r=Gh(a)}else{const a=[n,2*(e-1)],s=be(jh(t),[n,e]),i=be(G1(t),[n,e]),o=yi(dn(s,[0,1],[n,e-2]),1),u=ge(yi(dn(i,[0,1],[n,e-2]),1),Ct(-1)),l=wr([s,o],1),c=wr([i,u],1),f=be(il(l,c),[a[0],a[1]]);r=Gh(f)}if(r=jh(r),t.rank===3&&t.shape[0]!==0){const a=r,s=t.shape[0];r=be(r,[s,r.shape[0]/s,r.shape[1]]),a.dispose()}return r}const oD=de({irfft_:hae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mae(t,e,n=0){const a={x:J(t,"x","split")},s={numOrSizeSplits:e,axis:n};return me.runKernel(P1,a,s)}const hs=de({split_:mae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gae(t,e){Y(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let a;if(e!=null&&e<n){const m=t.shape.map(y=>0),v=t.shape.map(y=>y);v[t.shape.length-1]=e,a=dn(t,m,v),n=e}else if(e!=null&&e>n){const m=t.shape.map(v=>v);m[t.shape.length-1]=e-n,a=wr([t,Tr(m)],t.shape.length-1),n=e}else a=t;const s=mn(a),i=be(il(a,s),[r,n]),o=sw(i),u=Math.floor(n/2)+1,l=jh(o),c=G1(o),f=hs(l,[u,n-u],l.shape.length-1),d=hs(c,[u,n-u],c.shape.length-1),h=a.shape.slice();return h[a.shape.length-1]=u,be(il(f[0],d[0]),h)}const iw=de({rfft_:gae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vae(t,e){let n=J(t,"a","squaredDifference"),r=J(e,"b","squaredDifference");[n,r]=ur(n,r),Ht(n.shape,r.shape);const a={a:n,b:r},s={};return me.runKernel(tg,a,s)}const uD=de({squaredDifference_:vae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yae(t,e){const n=J(t,"x","squeeze","string_or_numeric");return be(n,bl(n.shape,e).newShape)}const Hc=de({squeeze_:yae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bae(t,e=0){const n=M0(t,"tensors","stack","string_or_numeric");Y(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&Y(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,a={axis:e};return me.runKernel(E1,r,a)}const ws=de({stack_:bae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wae(t,e=0){const r={x:J(t,"x","step")},a={alpha:e};return me.runKernel(ig,r,a)}const Zd=de({step_:wae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xae(t,e,n,r,a=0,s=0,i=0,o=0,u=0){const c={x:J(t,"x","stridedSlice","string_or_numeric")},f={begin:e,end:n,strides:r,beginMask:a,endMask:s,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:u};return me.runKernel(ET,c,f)}const yz=de({stridedSlice_:xae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sae(t){const n={x:J(t,"x","tan","float32")};return me.runKernel(rg,n)}const bz=de({tan_:Sae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ca(t,e){Gd(t);const n=xl(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Sl(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ld(t,e,n){if(Gd(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=xl(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Sl(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nae(t,e,n){if(Gd(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=xl(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Sl(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cae(t,e,n){if(Gd(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=xl(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Sl(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eae(t,e,n){if(Gd(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=xl(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Sl(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tae(t,e,n){if(Gd(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=xl(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Sl(t,e,r,n)}function wz(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(s+` update.rank < ${a}. `);if(t.length<r+(n.rank-a))throw new Error(s+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+t.length-r)throw new Error(s+` update.rank != ${a+t.length-r}`);for(let i=0;i<a;++i)if(n.shape[i]!==e.shape[i])throw new Error(s+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<n.rank-a;++i)if(n.shape[i+a]!==t[i+r])throw new Error(s+` updates.shape[${i+a}] (${n.shape[i+a]}) != shape[${i+a}] (${t[i+a]})`)}function lD(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}wz(n,e,t)}function Gc(t,e,n){const r=e.shape.length,a=r>1?e.shape[r-1]:1,s=n.length;let i=1;for(let f=a;f<s;++f)i*=n[f];const o=a<1?1:a,u=Fe(e.shape)/o,l=[...St(n.slice(0,a)),1],c=Fe(n);return{sliceRank:a,numUpdates:u,sliceSize:i,strides:l,outputSize:c}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dae(t,e,n){const r=J(t,"tensor","tensorScatterupdate"),a=J(e,"indices","tensorScatterupdate","int32"),s=J(n,"updates","tensorScatterupdate");if(lD(s,a,r.shape),r.dtype!==s.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${s.dtype}.`);const i={tensor:r,indices:a,updates:s},o={};return me.runKernel(vT,i,o)}const Aae=de({tensorScatterUpdate_:Dae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ae(t,e=1,n=!0){const r=J(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${e}`);const s={x:r},i={k:e,sorted:n},[o,u]=me.runKernel($T,s,i);return{values:o,indices:u}}const xz=de({topk_:$ae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kae(t,e=0,n=1,r,a){if(Ls(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new QT(e,n,r,!0,a),i=tn(t,r);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}const cD=de({truncatedNormal_:kae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iae(t,e=0){const n=J(t,"x","unique","string_or_numeric");Y(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},a={axis:e},[s,i]=me.runKernel(IT,r,a);return{values:s,indices:i}}const Sz=de({unique_:Iae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ae(t,e,n){const r=J(t,"x","unsortedSegmentSum"),a=J(e,"segmentIds","unsortedSegmentSum","int32");Y(Sd(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:a},i={numSegments:n};return me.runKernel(W1,s,i)}const fD=de({unsortedSegmentSum_:_ae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oae(t,e=0){const n=J(t,"x","unstack","string_or_numeric");Y(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},a={axis:e};return me.runKernel(z1,r,a)}const bi=de({unstack_:Oae});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fae(t,e){return XT(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nz(t,e=!0,n,r){return me.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dD(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=tn(t,"int32"),a=tn([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const i=r.indexToLoc(n[s]),o=s*t.length;a.values.set(i,o)}return a.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Rae(t){const e=J(t,"condition","whereAsync","bool"),n=await e.data(),r=dD(e.shape,n);return t!==e&&e.dispose(),r}const Cz=Rae;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Mae(t,e,n){const r=J(t,"tensor","boolMask"),a=J(e,"mask","boolMask","bool"),s=n??0,i=a.rank,o=r.shape;Y(i>0,()=>"mask cannot be scalar"),Es(o.slice(s,s+i),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let v=s;v<s+i;v++)u*=o[v];const l=o.slice(0,s).concat([u],o.slice(s+i)),c=be(r,l),f=be(a,[-1]),d=await Cz(f),h=Hc(d,[1]),m=hg(c,h,s);return t!==r&&r.dispose(),e!==a&&a.dispose(),h.dispose(),c.dispose(),f.dispose(),d.dispose(),m}const Pae=Mae;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bae(t,e,n){const r=J(t,"x","transpose");if(e==null&&(e=r.shape.map((i,o)=>o).reverse()),Y(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(i=>{Y(i>=0&&i<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const a={x:r},s={perm:e};return r.dtype==="complex64"?Te(()=>{let i=jh(r),o=G1(r);return i=me.runKernel(sd,{x:i},s),o=me.runKernel(sd,{x:o},s),n&&(o=jn(o)),il(i,o)}):me.runKernel(sd,a,s)}const pn=de({transpose_:Bae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lae(t,e,n,r,a=!0){const s=J(t,"v","movingAverage"),i=J(e,"x","movingAverage"),o=J(n,"decay","movingAverage");NZ(s,i),Y(fn(s.shape,i.shape),()=>"Shape mismatch in v and x");const u=Ct(1),l=ft(u,o);let c=ge(ft(i,s),l);if(a){Y(r!=null,()=>"When using zeroDebias: true, step is required.");const f=J(r,"step","movingAverage");c=bt(c,ft(u,su(o,f)))}return Ve(s,c)}const zae=de({movingAverage_:Lae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wae(t,e,n){Ls(n);const r=J(t,"indices","scatterND","int32"),a=J(e,"updates","scatterND");lD(a,r,n);const s={indices:r,updates:a},i={shape:n};return me.runKernel(gT,s,i)}const Uae=de({scatterND_:Wae});function qae(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const a=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);const i=e.size;if(!(e.rank===0||e.rank===1&&i===a))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${a}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vae(t,e,n,r=0){Ls(n);const a=J(t,"sparseIndices","sparseToDense","int32"),s=J(e,"sparseValues","sparseToDense","string_or_numeric"),i=J(r,"defaultValue","sparseToDense",s.dtype);qae(a,s,n,i);const o={sparseIndices:a,sparseValues:s,defaultValue:i},u={outputShape:n};return me.runKernel(NT,o,u)}const jae=de({sparseToDense_:Vae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hae(t,e){const n=J(e,"indices","gatherND","int32"),a={params:J(t,"x","gatherND","string_or_numeric"),indices:n};return me.runKernel(QE,a)}const Gae=de({gatherND_:Hae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kae(t,e){if(e==null)return t.shape.slice();if(fn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xae(t,e,n,r){const a=J(t,"x","dropout");if(Y(a.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),Y(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof er?a.clone():a;const s=Kae(a,n),i=1-e,o=bt(pg(Ve(jc(s,0,1,"float32",r),i)),i);return ge(a,o)}const Ez=de({dropout_:Xae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tz(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function pD(t,e,n){const r=1-t%2,a=new Float32Array(t);for(let s=0;s<t;++s){const i=2*Math.PI*s/(t+r-1);a[s]=e-n*Math.cos(i)}return ca(a,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Yae(t,e,n=1){const r=J(t,"predictions","inTopK"),a=J(e,"targets","inTopK");Y(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),Y(r.rank-1===a.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`),Es(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];Y(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);const i=await r.data(),o=await a.data(),[u,l]=[i.length/s,s],c=ta("bool",u);for(let f=0;f<u;f++){const d=f*l,h=i.subarray(d,d+l),m=[];for(let v=0;v<h.length;v++)m.push({value:h[v],index:v});m.sort((v,y)=>y.value-v.value),c[f]=0;for(let v=0;v<n;v++)if(m[v].index===o[f]){c[f]=1;break}}return t!==r&&r.dispose(),e!==a&&a.dispose(),zi(c,a.shape,"bool")}const Qae=Yae;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jae(t,e,n,r,a,s="NHWC",i){let o=t;t.rank===3&&(o=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=be(e,[1,e.shape[0],e.shape[1],e.shape[2]])),Y(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),Y(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),Y(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const l=s==="NHWC"?o.shape[3]:o.shape[1],c=s==="NHWC"?u.shape[3]:u.shape[1];Y(l===n[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${n[2]}.`),Y(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),Ma("conv2dDerFilter",a,i);const f={x:o,dy:u},d={strides:r,pad:a,dataFormat:s,dimRoundingMode:i,filterShape:n};return me.runKernel(ME,f,d)}const hD=de({conv2DBackpropFilter_:Jae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ow(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return ge(t,Zd(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function uw(t,e){let n=e;const r=_r(t.shape,e.shape);return r.length>0&&(n=ht(n,r)),be(n,t.shape)}function lw(t,e,n,r){if(e==="linear")return t;if(e==="relu")return $o(t);if(e==="elu")return fg(t);if(e==="relu6")return ZT(t);if(e==="prelu")return tw(t,n);if(e==="leakyrelu")return K1(t,r);if(e==="sigmoid")return bo(t);throw new Error(`Unknown fused activation ${e}.`)}const cw=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zae({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:o,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(u=u||"linear",cw(me.state.gradientDepth,u)===!1){Y(a==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let E=ll(t,e,n,r,a,s,i);return o!=null&&(E=Ve(E,o)),lw(E,u,l,c)}const f=J(t,"x","conv2d","float32"),d=J(e,"filter","conv2d","float32");let h=f,m=!1;f.rank===3&&(m=!0,h=be(f,[1,f.shape[0],f.shape[1],f.shape[2]])),Y(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),Y(d.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),Ma("fused conv2d",r,i);const v=a==="NHWC"?h.shape[3]:h.shape[1];Y(d.shape[2]===v,()=>`Error in conv2d: depth of input (${v}) must match input depth for filter ${d.shape[2]}.`),Y(aa(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const y=Ur(h.shape,d.shape,n,s,r,i);let b;o!=null&&(b=J(o,"bias","fused conv2d"),[b]=ur(b,f),a==="NHWC"?Ht(y.outShape,b.shape):(Y(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),Y(b.shape.length===0||b.shape[0]===y.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let x;if(l!=null){const E=l.shape;if(Y(E.length<=1||E.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${E.length}.`),E.length===1)Y(E[0]===1||E[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the number of output channels (${y.outChannels}).`);else if(E.length===3)try{Ht(E,y.outShape)}catch{const I=`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(I)}x=J(l,"prelu weights","fused conv2d")}const w=(E,$)=>{Y(a==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`);const[I,D,k,A]=$,O=ow(E,k,u);Y(ul(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const B=zT(D.shape,O,I,n,r),z=hD(D,O,I.shape,n,r),L=[B,z];if(A!=null){const F=uw(A,O);L.push(F)}return L},N={x:h,filter:d,bias:b,preluActivationWeights:x},C={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i,activation:u,leakyreluAlpha:c};return o==null?iu(($,I,D)=>{let k=me.runKernel(_0,N,C);return D([I,$,k]),m&&(k=be(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:w}})(h,d):iu(($,I,D,k)=>{let A=me.runKernel(_0,N,C);return k([I,$,A,D]),m&&(A=be(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:w}})(h,d,b)}const Dz=de({fusedConv2d_:Zae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ese(t,e,n,r,a,s=[1,1],i){let o=t;t.rank===3&&(o=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={x:o,dy:u},c={strides:r,pad:a,dimRoundingMode:i,dilations:s,filterShape:n};return me.runKernel(qE,l,c)}const Az=de({depthwiseConv2dNativeBackpropFilter_:ese});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tse(t,e,n,r,a,s=[1,1],i){let o=e,u=!1;e.rank===3&&(u=!0,o=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={dy:o,filter:n},c={strides:r,pad:a,dimRoundingMode:i,dilations:s,inputShape:t},f=me.runKernel(VE,l,c);return u?be(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const $z=de({depthwiseConv2dNativeBackpropInput_:tse});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nse({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:o,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(cw(me.state.gradientDepth,u)===!1){let C=cg(t,e,n,r,a,s,i);return o!=null&&(C=Ve(C,o)),lw(C,u,l,c)}const f=J(t,"x","depthwiseConv2d","float32"),d=J(e,"filter","depthwiseConv2d","float32");let h=f,m=!1;f.rank===3&&(m=!0,h=be(f,[1,f.shape[0],f.shape[1],f.shape[2]])),Y(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),Y(d.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),Y(h.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),s==null&&(s=[1,1]),Y(aa(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Ma("fused depthwiseConv2d",r,i);const v=Ur(h.shape,d.shape,n,s,r,i,!0);let y;o!=null&&(y=J(o,"bias","fused conv2d"),[y]=ur(y,f),Ht(v.outShape,y.shape));let b;l!=null&&(b=J(l,"prelu weights","fused depthwiseConv2d"));const x=(C,E)=>{Y(ul(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[$,I,D,k]=E,A=ow(C,D,u),O=$z(I.shape,A,$,n,r,s,i),B=Az(I,A,$.shape,n,r,s,i);if(k!=null){const z=uw(y,A);return[O,B,z]}return[O,B]},w={x:h,filter:d,bias:y,preluActivationWeights:b},N={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i,activation:u,leakyreluAlpha:c};return o==null?iu((E,$,I)=>{let D=me.runKernel(O0,w,N);return I([$,E,D]),m&&(D=be(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:x}})(h,d):iu((E,$,I,D)=>{let k=me.runKernel(O0,w,N);return D([$,E,k,I]),m&&(k=be(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:x}})(h,d,y)}const rse=de({fusedDepthwiseConv2d_:nse});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ase({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:a,activation:s="linear",preluActivationWeights:i,leakyreluAlpha:o=.2}){if(cw(me.state.gradientDepth,s)===!1){let A=nn(t,e,n,r);return a!=null&&(A=Ve(A,a)),lw(A,s,i,o)}let u=J(t,"a","fused matMul"),l=J(e,"b","fused matMul");[u,l]=ur(u,l);const c=n?u.shape[u.rank-2]:u.shape[u.rank-1],f=r?l.shape[l.rank-1]:l.shape[l.rank-2],d=n?u.shape[u.rank-1]:u.shape[u.rank-2],h=r?l.shape[l.rank-2]:l.shape[l.rank-1],m=u.shape.slice(0,-2),v=l.shape.slice(0,-2),y=Fe(m),b=Fe(v);Y(c===f,()=>`Error in fused matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${u.shape} and ${l.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=Ht(u.shape.slice(0,-2),l.shape.slice(0,-2)).concat([d,h]),N=n?be(u,[y,c,d]):be(u,[y,d,c]),C=r?be(l,[b,h,f]):be(l,[b,f,h]);let E;a!=null&&(E=J(a,"bias","fused matMul"),[E]=ur(E,u),Ht(w,E.shape));let $;i!=null&&($=J(i,"prelu weights","fused matMul"));const I=(A,O)=>{const[B,z,L,F]=O,R=ow(be(A,L.shape),L,s);let q,M;if(!n&&!r?(q=nn(R,z,!1,!0),M=nn(B,R,!0,!1)):!n&&r?(q=nn(R,z,!1,!1),M=nn(R,B,!0,!1)):n&&!r?(q=nn(z,R,!1,!0),M=nn(B,R,!1,!1)):(q=nn(z,R,!0,!0),M=nn(R,B,!0,!0)),a!=null){const G=uw(F,R);return[q,M,G]}else return[q,M]},D={a:N,b:C,bias:E,preluActivationWeights:$},k={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:o};return a==null?iu((O,B,z)=>{const L=me.runKernel(I0,D,k);return z([O,B,L]),{value:be(L,w),gradFunc:I}})(N,C):iu((O,B,z,L)=>{const F=me.runKernel(I0,D,k);return L([O,B,F,z]),{value:be(F,w),gradFunc:I}})(N,C,E)}const lC=de({fusedMatMul_:ase});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sse=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Dz,depthwiseConv2d:rse,matMul:lC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ise(t){return pD(t,.54,.46)}const ose=de({hammingWindow_:ise});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function use(t){return pD(t,.5,.5)}const kz=de({hannWindow_:use});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lse(t,e,n,r=!1,a=0){let s=0;const i=[];for(;s+e<=t.size;)i.push(dn(t,s,e)),s+=n;if(r)for(;s<t.size;){const o=s+e-t.size,u=wr([dn(t,s,e-o),Qd([o],a)]);i.push(u),s+=n}return i.length===0?ld([],[0,e]):be(wr(i),[i.length,e])}const Iz=de({frame_:lse});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cse(t,e,n,r,a=kz){r==null&&(r=Tz(e));const s=Iz(t,e,n),i=ge(s,a(e));return iw(i,r)}const fse=de({stft_:cse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dse(t,e,n,r,a="bilinear",s=0){const i=J(t,"image","cropAndResize"),o=J(e,"boxes","cropAndResize","float32"),u=J(n,"boxInd","cropAndResize","int32"),l=o.shape[0];Y(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),Y(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${l},4] but had shape ${o.shape}.`),Y(u.rank===1&&u.shape[0]===l,()=>`Error in cropAndResize: boxInd must be have size [${l}] but had shape ${o.shape}.`),Y(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),Y(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),Y(a==="bilinear"||a==="nearest",()=>`method must be bilinear or nearest, but was ${a}`);const c={image:i,boxes:o,boxInd:u},f={method:a,extrapolationValue:s,cropSize:r};return me.runKernel(zE,c,f)}const pse=de({cropAndResize_:dse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hse(t){const e=J(t,"image","flipLeftRight","float32");Y(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return me.runKernel(YE,n,{})}const mse=de({flipLeftRight_:hse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gse(t){const e=J(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];Y(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),Y(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const a=new Array(e.rank);return a.fill(1,0,n),a[n]=3,ui(e,a)}const vse=de({grayscaleToRGB_:gse});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yse(t){const e=J(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];Y(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),Y(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const a=e.dtype,s=ot(e,"float32"),i=ca([.2989,.587,.114]);let o;switch(e.rank){case 2:o=Qf("ij,j->i",s,i);break;case 3:o=Qf("ijk,k->ij",s,i);break;case 4:o=Qf("ijkl,l->ijk",s,i);break;case 5:o=Qf("ijklm,m->ijkl",s,i);break;case 6:o=Qf("ijklmn,n->ijklm",s,i);break;default:throw new Error("Not a valid tensor rank.")}return o=$a(o,-1),ot(o,a)}const bse=de({rgbToGrayscale_:yse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wse(t,e,n=0,r=.5){const a=J(t,"image","rotateWithOffset","float32");Y(a.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`);const s={image:a},i={radians:e,fillValue:n,center:r};return me.runKernel(_T,s,i)}const xse=de({rotateWithOffset_:wse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ep(t,e,n,r,a,s){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),s==null&&(s=0);const i=t.shape[0];return n=Math.min(n,i),Y(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),Y(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),Y(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),Y(e.rank===1,()=>"scores must be a 1D tensor"),Y(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),Y(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sse(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const s=J(t,"boxes","nonMaxSuppression","float32"),i=J(e,"scores","nonMaxSuppression","float32"),o=ep(s,i,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;const u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return me.runKernel(iT,{boxes:s,scores:i},u)}const Nse=de({nonMaxSuppression_:Sse});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cse(t,e,n){const r=Ese(t,e,n),a=r<0?-(r+1):r;t.splice(a,0,e)}function Ese(t,e,n){return Dse(t,e,n||Tse)}function Tse(t,e){return t>e?1:t<e?-1:0}function Dse(t,e,n){let r=0,a=t.length,s=0,i=!1;for(;r<a;){s=r+(a-r>>>1);const o=n(e,t[s]);o>0?r=s+1:(a=s,i=!o)}return i?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mD(t,e,n,r,a){return yD(t,e,n,r,a,0)}function gD(t,e,n,r,a,s){return yD(t,e,n,r,a,0,!1,s,!0)}function vD(t,e,n,r,a,s){return yD(t,e,n,r,a,s,!0)}function yD(t,e,n,r,a,s,i=!1,o=!1,u=!1){const l=[];for(let y=0;y<e.length;y++)e[y]>a&&l.push({score:e[y],boxIndex:y,suppressBeginIndex:0});l.sort(_O);const c=s>0?-.5/s:0,f=[],d=[];for(;f.length<n&&l.length>0;){const y=l.pop(),{score:b,boxIndex:x,suppressBeginIndex:w}=y;if(b<a)break;let N=!1;for(let C=f.length-1;C>=w;--C){const E=Ase(t,x,f[C]);if(E>=r){N=!0;break}if(y.score=y.score*$se(r,c,E),y.score<=a)break}y.suppressBeginIndex=f.length,N||(y.score===b?(f.push(x),d.push(y.score)):y.score>a&&Cse(l,y,_O))}const h=f.length,m=n-h;o&&m>0&&(f.push(...new Array(m).fill(0)),d.push(...new Array(m).fill(0)));const v={selectedIndices:f};return i&&(v.selectedScores=d),u&&(v.validOutputs=h),v}function Ase(t,e,n){const r=t.subarray(e*4,e*4+4),a=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),h=(o-s)*(u-i),m=(f-l)*(d-c);if(h<=0||m<=0)return 0;const v=Math.max(s,l),y=Math.max(i,c),b=Math.min(o,f),x=Math.min(u,d),w=Math.max(b-v,0)*Math.max(x-y,0);return w/(h+m-w)}function $se(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function _O(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function kse(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const s=J(t,"boxes","nonMaxSuppressionAsync"),i=J(e,"scores","nonMaxSuppressionAsync"),o=ep(s,i,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;const u=await Promise.all([s.data(),i.data()]),l=u[0],c=u[1],{selectedIndices:f}=mD(l,c,n,r,a);return s!==t&&s.dispose(),i!==e&&i.dispose(),ca(f,"int32")}const Ise=kse;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _se(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){const i=J(t,"boxes","nonMaxSuppression"),o=J(e,"scores","nonMaxSuppression"),u=ep(i,o,n,r,a,s);n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,s=u.softNmsSigma;const l={boxes:i,scores:o},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:s},f=me.runKernel(uT,l,c);return{selectedIndices:f[0],selectedScores:f[1]}}const Ose=de({nonMaxSuppressionWithScore_:_se});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Fse(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){const i=J(t,"boxes","nonMaxSuppressionAsync"),o=J(e,"scores","nonMaxSuppressionAsync"),u=ep(i,o,n,r,a,s);n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,s=u.softNmsSigma;const l=await Promise.all([i.data(),o.data()]),c=l[0],f=l[1],{selectedIndices:d,selectedScores:h}=vD(c,f,n,r,a,s);return i!==t&&i.dispose(),o!==e&&o.dispose(),{selectedIndices:ca(d,"int32"),selectedScores:ca(h)}}const Rse=Fse;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mse(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){const i=J(t,"boxes","nonMaxSuppression"),o=J(e,"scores","nonMaxSuppression"),u=ep(i,o,n,r,a,null),l=u.maxOutputSize,c=u.iouThreshold,f=u.scoreThreshold,d={boxes:i,scores:o},h={maxOutputSize:l,iouThreshold:c,scoreThreshold:f,padToMaxOutputSize:s},m=me.runKernel(oT,d,h);return{selectedIndices:m[0],validOutputs:m[1]}}const Pse=de({nonMaxSuppressionPadded_:Mse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Bse(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){const i=J(t,"boxes","nonMaxSuppressionAsync"),o=J(e,"scores","nonMaxSuppressionAsync"),u=ep(i,o,n,r,a,null),l=u.maxOutputSize,c=u.iouThreshold,f=u.scoreThreshold,[d,h]=await Promise.all([i.data(),o.data()]),{selectedIndices:m,validOutputs:v}=gD(d,h,l,c,f,s);return i!==t&&i.dispose(),o!==e&&o.dispose(),{selectedIndices:ca(m,"int32"),validOutputs:Ct(v,"int32")}}const Lse=Bse;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zse(t,e,n=!1,r=!1){const a=J(t,"images","resizeBilinear");Y(a.rank===3||a.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),Y(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),Y(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=a,i=!1;a.rank===3&&(i=!0,s=be(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const o={images:s},u={alignCorners:n,halfPixelCenters:r,size:e},l=me.runKernel(I1,o,u);return i?be(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const _z=de({resizeBilinear_:zse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wse(t,e,n=!1,r=!1){const a=J(t,"images","resizeNearestNeighbor");Y(a.rank===3||a.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),Y(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),Y(a.dtype==="float32"||a.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),Y(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=a,i=!1;a.rank===3&&(i=!0,s=be(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const o={images:s},u={alignCorners:n,halfPixelCenters:r,size:e},l=me.runKernel(k1,o,u);return i?be(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const Oz=de({resizeNearestNeighbor_:Wse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Use(t,e="binary",n=!1,r=.5){const a=J(t,"image","threshold"),s=.2989,i=.587,o=.114,u=a.shape[0]*a.shape[1];let l=ge(ca([r]),255),c,f,d,h;if(Y(a.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`),Y(a.shape[2]===3||a.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`),Y(a.dtype==="int32"||a.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`),Y(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),a.shape[2]===3){[c,f,d]=hs(a,[1,1,1],-1);const y=ge(c,s),b=ge(f,i),x=ge(d,o);h=Ve(Ve(y,b),x)}else h=t;if(e==="otsu"){const y=WL(ot(eD(h),"int32"),zi([]),256);l=qse(y,u)}const m=n?Vc(h,l):Ts(h,l);return ot(ge(m,255),"int32")}function qse(t,e){let n=ca([-1]),r=ca([0]),a=ca([0]),s,i,o,u,l,c;for(let f=0;f<t.size-1;f++){s=dn(t,0,f+1),i=dn(t,f+1),l=bt(ht(s),e),c=bt(ht(i),e);const d=ht(ge(s,Dd(0,s.size)));o=bt(d,ht(s));const h=Qd(i.shape,s.size),m=Ve(Dd(0,i.size),h),v=ge(i,m);u=bt(ht(v),ht(i));const y=ft(o,u),b=ft(o,u),x=ge(l,c);a=ge(ge(x,y),b);const w=Ts(a,r);r=pa(w,a,r),n=pa(w,ca([f]),n)}return n}const Vse=de({threshold_:Use});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jse(t,e,n="nearest",r="constant",a=0,s){const i=J(t,"image","transform","float32"),o=J(e,"transforms","transform","float32");Y(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),Y(o.rank===2&&(o.shape[0]===i.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),Y(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const u={image:i,transforms:o},l={interpolation:n,fillMode:r,fillValue:a,outputShape:s};return me.runKernel(kT,u,l)}const Hse=de({transform_:jse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gse(t,e,n){const r=J(t,"a","bandPart");Y(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const a=r.shape,[s,i]=r.shape.slice(-2);let o,u;typeof e=="number"?(Y(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),Y(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),o=J(e<0?s:e,"numLower","bandPart")):(Y(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=pa(Vh(e,0),s,_c(e,s))),typeof n=="number"?(Y(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),Y(n<=i,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`),u=J(n<0?i:n,"numUpper","bandPart")):(Y(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=pa(Vh(n,0),i,_c(n,i)));const l=be(Dd(0,s,1,"int32"),[-1,1]),c=Dd(0,i,1,"int32"),f=ft(l,c),d=No(Vc(f,o),El(f,jn(u))),h=Tr([s,i],r.dtype);return be(ws(bi(be(r,[-1,s,i])).map(m=>pa(d,m,h))),a)}const Kse=de({bandPart_:Gse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xse(t){let e;if(Array.isArray(t)){e=!1,Y(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const a=t[0].shape[0];for(let s=1;s<t.length;++s)Y(t[s].shape[0]===a,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${a})`)}else e=!0,t=hs(t,t.shape[0],0).map(a=>Hc(a,[0]));Y(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let a=0;a<t.length;++a)n.push(me.tidy(()=>{let s=r[a];if(a>0)for(let i=0;i<a;++i){const o=ge(ht(ge(n[i],s)),n[i]);s=ft(s,o)}return bt(s,dg(s,"euclidean"))}));return e?ws(n,0):n}const Yse=de({gramSchmidt_:Xse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qse(t,e=!1){if(Y(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return OO(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((u,l)=>u*l),r=bi(be(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],s=[];r.forEach(u=>{const[l,c]=OO(u,e);a.push(l),s.push(c)});const i=be(ws(a,0),t.shape),o=be(ws(s,0),t.shape);return[i,o]}}function OO(t,e=!1){return me.tidy(()=>{Y(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let a=HT(n),s=Jo(t);const i=ld([[1]],[1,1]);let o=Jo(i);const u=n>=r?r:n;for(let l=0;l<u;++l){const c=s,f=o,d=a;[o,s,a]=me.tidy(()=>{const h=dn(s,[l,l],[n-l,1]),m=dg(h),v=dn(s,[l,l],[1,1]),y=pa(Ts(v,0),ld([[-1]]),ld([[1]])),b=ft(v,ge(y,m)),x=bt(h,b);x.shape[0]===1?o=Jo(i):o=wr([i,dn(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);const w=jn(bt(nn(y,b),m)),N=dn(s,[l,0],[n-l,r]),C=ge(w,o),E=pn(o);if(l===0)s=ft(N,nn(C,nn(E,N)));else{const D=ft(N,nn(C,nn(E,N)));s=wr([dn(s,[0,0],[l,r]),D],0)}const $=pn(C),I=dn(a,[0,l],[n,a.shape[1]-l]);if(l===0)a=ft(I,nn(nn(I,o),$));else{const D=ft(I,nn(nn(I,o),$));a=wr([dn(a,[0,0],[n,l]),D],1)}return[o,s,a]}),rn([c,f,d])}return!e&&n>r&&(a=dn(a,[0,0],[n,r]),s=dn(s,[0,0],[r,r])),[a,s]})}const Jse=de({qr_:Qse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Va;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Va||(Va={}));function Zse(t,e,n=Va.SUM_BY_NONZERO_WEIGHTS){const r=J(t,"losses","computeWeightedLoss");let a=null;e!=null&&(a=J(e,"weights","computeWeightedLoss"));const s=a==null?r:ge(r,a);if(n===Va.NONE)return s;if(n===Va.SUM)return ht(s);if(n===Va.MEAN){if(a==null)return or(s);{const i=r.size/a.size,o=bt(ht(s),ht(a));return i>1?bt(o,Ct(i)):o}}if(n===Va.SUM_BY_NONZERO_WEIGHTS){if(a==null)return bt(ht(s),Ct(r.size));{const i=ge(a,ps(r.shape)),o=ot(ht(Td(i,Ct(0))),"float32");return bt(ht(s),o)}}throw Error(`Unknown reduction: ${n}`)}const mu=de({computeWeightedLoss_:Zse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eie(t,e,n,r=Va.SUM_BY_NONZERO_WEIGHTS){const a=J(t,"labels","absoluteDifference"),s=J(e,"predictions","absoluteDifference");let i=null;n!=null&&(i=J(n,"weights","absoluteDifference")),Es(a.shape,s.shape,"Error in absoluteDifference: ");const o=Er(ft(a,s));return mu(o,i,r)}const tie=de({absoluteDifference_:eie});function nie(t,e,n,r,a=Va.SUM_BY_NONZERO_WEIGHTS){const s=J(t,"labels","cosineDistance"),i=J(e,"predictions","cosineDistance");let o=null;r!=null&&(o=J(r,"weights","cosineDistance")),Es(s.shape,i.shape,"Error in cosineDistance: ");const u=Ct(1),l=ft(u,ht(ge(s,i),n,!0));return mu(l,o,a)}const rie=de({cosineDistance_:nie});function aie(t,e,n,r=Va.SUM_BY_NONZERO_WEIGHTS){let a=J(t,"labels","hingeLoss");const s=J(e,"predictions","hingeLoss");let i=null;n!=null&&(i=J(n,"weights","hingeLoss")),Es(a.shape,s.shape,"Error in hingeLoss: ");const o=Ct(1);a=ft(ge(Ct(2),a),o);const u=$o(ft(o,ge(a,s)));return mu(u,i,r)}const sie=de({hingeLoss_:aie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iie(t,e,n,r=1,a=Va.SUM_BY_NONZERO_WEIGHTS){const s=J(t,"labels","huberLoss"),i=J(e,"predictions","huberLoss");let o=null;n!=null&&(o=J(n,"weights","huberLoss")),Es(s.shape,i.shape,"Error in huberLoss: ");const u=Ct(r),l=Er(ft(i,s)),c=_c(l,u),f=ft(l,c),d=Ve(ge(Ct(.5),Pn(c)),ge(u,f));return mu(d,o,a)}const oie=de({huberLoss_:iie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uie(t,e,n,r=1e-7,a=Va.SUM_BY_NONZERO_WEIGHTS){const s=J(t,"labels","logLoss"),i=J(e,"predictions","logLoss");let o=null;n!=null&&(o=J(n,"weights","logLoss")),Es(s.shape,i.shape,"Error in logLoss: ");const u=Ct(1),l=Ct(r),c=jn(ge(s,Ms(Ve(i,l)))),f=ge(ft(u,s),Ms(Ve(ft(u,i),l))),d=ft(c,f);return mu(d,o,a)}const lie=de({logLoss_:uie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cie(t,e,n,r=Va.SUM_BY_NONZERO_WEIGHTS){const a=J(t,"labels","meanSquaredError"),s=J(e,"predictions","meanSquaredError");let i=null;n!=null&&(i=J(n,"weights","meanSquaredError")),Es(a.shape,s.shape,"Error in meanSquaredError: ");const o=uD(a,s);return mu(o,i,r)}const fie=de({meanSquaredError_:cie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function die(t,e){const n=J(t,"labels","sigmoidCrossEntropyWithLogits"),r=J(e,"logits","sigmoidCrossEntropyWithLogits");Es(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=$o(r),s=ge(r,n),i=X1(bs(jn(Er(r))));return Ve(ft(a,s),i)}function pie(t,e,n,r=0,a=Va.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"multiClassLabels","sigmoidCrossEntropy");const i=J(e,"logits","sigmoidCrossEntropy");let o=null;if(n!=null&&(o=J(n,"weights","sigmoidCrossEntropy")),Es(s.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){const l=Ct(r),c=Ct(1),f=Ct(.5);s=Ve(ge(s,ft(c,l)),ge(f,l))}const u=die(s,i);return mu(u,o,a)}const hie=de({sigmoidCrossEntropy_:pie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mie(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return iu((a,s,i)=>{const u=Y1(s,[n],!0),l=ft(ot(s,"float32"),u);i([a,l]);const c=jn(ge(l,a));return{value:ht(c,[n]),gradFunc:(h,m)=>{const[v,y]=m,b=dr(h.shape,[n]);return[ge(be(h,b),ft(ot(v,"float32"),bs(y))),ge(be(h,b),ft(bs(y),ot(v,"float32")))]}}})(t,e)}function gie(t,e,n,r=0,a=Va.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"onehotLabels","softmaxCrossEntropy");const i=J(e,"logits","softmaxCrossEntropy");let o=null;if(n!=null&&(o=J(n,"weights","softmaxCrossEntropy")),Es(s.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const l=Ct(r),c=Ct(1),f=Ct(s.shape[1]);s=Ve(ge(s,ft(c,l)),bt(l,f))}const u=mie(s,i);return mu(u,o,a)}const vie=de({softmaxCrossEntropy_:gie});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yie(t,e,n,r){const a=J(t,"indices","sparseFillEmptyRows","int32"),s=J(e,"values","sparseFillEmptyRows"),i=J(n,"denseShape","sparseFillEmptyRows","int32"),o=J(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(a.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${a.shape}`);if(s.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(o.rank!==0)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);const u={indices:a,values:s,denseShape:i,defaultValue:o},l=me.runKernel(bT,u);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}const bie=de({sparseFillEmptyRows_:yie});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wie(t,e,n){const r=J(t,"inputIndices","sparseReshape","int32"),a=J(e,"inputShape","sparseReshape","int32"),s=J(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(a.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(s.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);const i={inputIndices:r,inputShape:a,newShape:s},o=me.runKernel(wT,i);return{outputIndices:o[0],outputShape:o[1]}}const xie=de({sparseReshape_:wie});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sie(t,e,n){const r=J(t,"data","sparseSegmentMean"),a=J(e,"indices","sparseSegmentMean","int32"),s=J(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${a.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${s.shape}`);const i={data:r,indices:a,segmentIds:s};return me.runKernel(xT,i)}const Nie=de({sparseSegmentMean_:Sie});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cie(t,e,n){const r=J(t,"data","sparseSegmentSum"),a=J(e,"indices","sparseSegmentSum","int32"),s=J(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${a.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${s.shape}`);const i={data:r,indices:a,segmentIds:s};return me.runKernel(ST,i)}const Eie=de({sparseSegmentSum_:Cie});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tie(t,e,n,r,a,s,i,o){const u=J(t,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);const l=J(e,"dataSplits","stringNGrams");if(l.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:a,rightPad:s,padWidth:i,preserveShortSequences:o},f={data:u,dataSplits:l},d=me.runKernel(TT,f,c);return{nGrams:d[0],nGramsSplits:d[1]}}const Die=de({stringNGrams_:Tie});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aie(t,e,n=!0){const r=J(t,"input","stringSplit","string"),a=J(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(a.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${a.shape}`);const s={skipEmpty:n},i={input:r,delimiter:a},o=me.runKernel(DT,i,s);return{indices:o[0],values:o[1],shape:o[2]}}const $ie=de({stringSplit_:Aie});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kie(t,e){const n=J(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const a={input:n};return me.runKernel(AT,a,r)}const Iie=de({stringToHashBucketFast_:kie});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ie(t,e,n,r=!0){const a=J(t,"input","staticRegexReplace","string"),s={pattern:e,rewrite:n,replaceGlobal:r};return me.runKernel(L1,{x:a},s)}const Oie=de({staticRegexReplace_:_ie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fie={fft:sw,ifft:Gh,rfft:iw,irfft:oD},Rie={hammingWindow:ose,hannWindow:kz,frame:Iz,stft:fse},go={flipLeftRight:mse,grayscaleToRGB:vse,resizeNearestNeighbor:Oz,resizeBilinear:_z,rgbToGrayscale:bse,rotateWithOffset:xse,cropAndResize:pse,nonMaxSuppression:Nse,nonMaxSuppressionAsync:Ise,nonMaxSuppressionWithScore:Ose,nonMaxSuppressionWithScoreAsync:Rse,nonMaxSuppressionPadded:Pse,nonMaxSuppressionPaddedAsync:Lse,threshold:Vse,transform:Hse},Fz={bandPart:Kse,gramSchmidt:Yse,qr:Jse},Mie={absoluteDifference:tie,computeWeightedLoss:mu,cosineDistance:rie,hingeLoss:sie,huberLoss:oie,logLoss:lie,meanSquaredError:fie,sigmoidCrossEntropy:hie,softmaxCrossEntropy:vie},Pie={sparseFillEmptyRows:bie,sparseReshape:xie,sparseSegmentMean:Nie,sparseSegmentSum:Eie},Bie={stringNGrams:Die,stringSplit:$ie,stringToHashBucketFast:Iie,staticRegexReplace:Oie};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lie=new Map,zie=new Map;class tp{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class ii{constructor(){this.classNameMap={}}static getMap(){return ii.instance==null&&(ii.instance=new ii),ii.instance}static register(e){ii.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Ke(t,e,n){Y(t.className!=null,()=>"Class being registered does not have the static className property defined."),Y(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),Y(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,a=e+">"+r;return ii.register(t),Lie.set(a,t),zie.set(t,a),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dl extends tp{minimize(e,n=!1,r){const{value:a,grads:s}=this.computeGradients(e,r);if(r!=null){const i=r.map(o=>({name:o.name,tensor:s[o.name]}));this.applyGradients(i)}else this.applyGradients(s);return rn(s),n?a:(a.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return lne(e,n)}dispose(){this.iterations_!=null&&rn(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ct(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Dl,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rz extends Dl{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=me.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const s=me.registeredVariables[r],i=!1;this.accumulatedGrads[a]==null&&(this.accumulatedGrads[a]={originalName:`${r}/accum_grad`,variable:Te(()=>mn(s).variable(i))}),this.accumulatedUpdates[a]==null&&(this.accumulatedUpdates[a]={originalName:`${r}/accum_var`,variable:Te(()=>mn(s).variable(i))});const o=Array.isArray(e)?e[a].tensor:e[r];if(o==null)return;const u=this.accumulatedGrads[a].variable,l=this.accumulatedUpdates[a].variable;Te(()=>{const c=Ve(ge(u,this.rho),ge(Pn(o),1-this.rho)),f=ge(bt(na(Ve(l,this.epsilon)),na(Ve(u,this.epsilon))),o),d=Ve(ge(l,this.rho),ge(Pn(f),1-this.rho));u.assign(c),l.assign(d);const h=Ve(ge(f,-this.learningRate),s);s.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(rn(this.accumulatedGrads.map(e=>e.variable)),rn(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mz extends Dl{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const s=me.registeredVariables[r];this.accumulatedGrads[a]==null&&(this.accumulatedGrads[a]={originalName:`${r}/accumulator`,variable:Te(()=>Qd(s.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[a].tensor:e[r];if(i==null)return;const o=this.accumulatedGrads[a].variable;Te(()=>{const u=Ve(o,Pn(i));o.assign(u);const l=Ve(ge(bt(i,na(Ve(u,me.backend.epsilon()))),-this.learningRate),s);s.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&rn(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pz extends Dl{static get className(){return"Adam"}constructor(e,n,r,a=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Te(()=>{this.accBeta1=Ct(n).variable(),this.accBeta2=Ct(r).variable()}),a==null&&(this.epsilon=me.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Te(()=>{const r=ft(1,this.accBeta1),a=ft(1,this.accBeta2);n.forEach((s,i)=>{const o=me.registeredVariables[s],u=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${s}/m`,variable:Te(()=>mn(o).variable(u))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${s}/v`,variable:Te(()=>mn(o).variable(u))});const l=Array.isArray(e)?e[i].tensor:e[s];if(l==null)return;const c=this.accumulatedFirstMoment[i].variable,f=this.accumulatedSecondMoment[i].variable,d=Ve(ge(c,this.beta1),ge(l,1-this.beta1)),h=Ve(ge(f,this.beta2),ge(Pn(l),1-this.beta2)),m=bt(d,r),v=bt(h,a);c.assign(d),f.assign(h);const y=Ve(ge(bt(m,Ve(na(v),this.epsilon)),-this.learningRate),o);o.assign(y)}),this.accBeta1.assign(ge(this.accBeta1,this.beta1)),this.accBeta2.assign(ge(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&rn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&rn(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Te(()=>{this.accBeta1.assign(su(this.beta1,this.iterations_+1)),this.accBeta2.assign(su(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bz extends Dl{static get className(){return"Adamax"}constructor(e,n,r,a=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Te(()=>{this.iteration=Ct(0).variable(),this.accBeta1=Ct(n).variable()}),a==null&&(this.epsilon=me.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Te(()=>{const r=ft(1,this.accBeta1),a=bt(-this.learningRate,Ve(ge(this.iteration,this.decay),1));n.forEach((s,i)=>{const o=me.registeredVariables[s],u=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${s}/m`,variable:mn(o).variable(u)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${s}/v`,variable:mn(o).variable(u)});const l=Array.isArray(e)?e[i].tensor:e[s];if(l==null)return;const c=this.accumulatedFirstMoment[i].variable,f=this.accumulatedWeightedInfNorm[i].variable,d=Ve(ge(c,this.beta1),ge(l,1-this.beta1)),h=ge(f,this.beta2),m=Er(l),v=hu(h,m);c.assign(d),f.assign(v);const y=Ve(ge(bt(a,r),bt(d,Ve(v,this.epsilon))),o);o.assign(y)}),this.iteration.assign(Ve(this.iteration,1)),this.accBeta1.assign(ge(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&rn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&rn(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bD extends Dl{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const s=Array.isArray(e)?e[a].tensor:e[r];if(s==null)return;const i=me.registeredVariables[r];Te(()=>{const o=Ve(ge(this.c,s),i);i.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Lr(Ct(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lz extends bD{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Ct(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const s=me.registeredVariables[r];this.accumulations[a]==null&&(this.accumulations[a]={originalName:`${r}/momentum`,variable:Te(()=>mn(s).variable(!1))});const i=this.accumulations[a].variable,o=Array.isArray(e)?e[a].tensor:e[r];o!=null&&Te(()=>{let u;const l=Ve(ge(this.m,i),o);this.useNesterov?u=Ve(ge(this.c,Ve(o,ge(l,this.m))),s):u=Ve(ge(this.c,l),s),i.assign(l),s.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&rn(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zz extends Dl{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,a=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,a==null&&(this.epsilon=me.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const s=me.registeredVariables[r],i=!1;this.accumulatedMeanSquares[a]==null&&(this.accumulatedMeanSquares[a]={originalName:`${r}/rms`,variable:Te(()=>mn(s).variable(i))}),this.accumulatedMoments[a]==null&&(this.accumulatedMoments[a]={originalName:`${r}/momentum`,variable:Te(()=>mn(s).variable(i))}),this.accumulatedMeanGrads[a]==null&&this.centered&&(this.accumulatedMeanGrads[a]={originalName:`${r}/mg`,variable:Te(()=>mn(s).variable(i))});const o=Array.isArray(e)?e[a].tensor:e[r];if(o==null)return;const u=this.accumulatedMeanSquares[a].variable,l=this.accumulatedMoments[a].variable;Te(()=>{const c=Ve(ge(u,this.decay),ge(Pn(o),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[a].variable,d=Ve(ge(f,this.decay),ge(o,1-this.decay)),h=bt(ge(o,this.learningRate),na(ft(c,Ve(Pn(d),this.epsilon)))),m=Ve(ge(l,this.momentum),h);u.assign(c),f.assign(d),l.assign(m);const v=ft(s,m);s.assign(v)}else{const f=Ve(ge(u,this.decay),ge(Pn(o),1-this.decay)),d=Ve(ge(l,this.momentum),bt(ge(o,this.learningRate),na(Ve(f,this.epsilon))));u.assign(f),l.assign(d);const h=ft(s,d);s.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&rn(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&rn(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&rn(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wie=[Rz,Mz,Pz,Bz,Lz,zz,bD];function Uie(){for(const t of Wie)Ke(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qie="model",Vie=".json",jie=".weights.bin";function FO(t){return new Promise(e=>setTimeout(e)).then(t)}class Oc{constructor(e){if(!$e().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Oc.URL_SCHEME)&&(e=e.slice(Oc.URL_SCHEME.length)),(e==null||e.length===0)&&(e=qie),this.modelJsonFileName=e+Vie,this.weightDataFileName=e+jie}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=Gi.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const a=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],s=yL(e,a),i=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=i,await FO(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;u.download=this.weightDataFileName,u.href=r,await FO(()=>u.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:og(e)}}}}Oc.URL_SCHEME="downloads://";class Hie{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=a=>{const s=JSON.parse(a.target.result),i=s.modelTopology;if(i==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(s.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:i});return}const u=RT(s,l=>this.loadWeights(l));e(u)},r.onerror=a=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const i of e)n.push(...i.weights),r.push(...i.paths);const a=this.checkManifestAndWeightFiles(e),s=r.map(i=>this.loadWeightsFile(i,a[i]));return Promise.all(s).then(i=>[n,i])}loadWeightsFile(e,n){return new Promise((r,a)=>{const s=new FileReader;s.onload=i=>{const o=i.target.result;r(o)},s.onerror=i=>a(`Failed to weights data from file of path '${e}'.`),s.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(s=>NO(s.name)),a={};for(const s of e)s.paths.forEach(i=>{const o=NO(i);if(n.indexOf(o)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(n.push(o),r.indexOf(o)===-1)throw new Error(`Weight file with basename '${o}' is not provided.`);a[i]=this.weightsFiles[r.indexOf(o)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return a}}const Gie=t=>$e().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Oc.URL_SCHEME)?Kie(t.slice(Oc.URL_SCHEME.length)):null;Zn.registerSaveRouter(Gie);function Kie(t="model"){return new Oc(t)}function Xie(t){return new Hie(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RO(t,e,n,r){i(t),n=n??0,r=r??1,o(n,r);let a=0;const s=u=>(u.then(l=>{const c=n+ ++a/t.length*(r-n);return e(c),l}),u);function i(u){Y(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function o(u,l){Y(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),Y(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${l}`),Y(l>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${l}`)}return Promise.all(t.map(s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Wz(t,e){e==null&&(e={});const n=e.fetchFunc==null?$e().platform.fetch:e.fetchFunc,r=t.map(f=>n(f,e.requestInit,{isBinary:!0})),o=(e.onProgress==null?await Promise.all(r):await RO(r,e.onProgress,0,.5)).map(f=>f.arrayBuffer());return e.onProgress==null?await Promise.all(o):await RO(o,e.onProgress,.5,1)}function Yie(t,e){var n;const r=e.fetchFunc==null?$e().platform.fetch:e.fetchFunc;let a=0,s;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async i=>{for(var o;a<t.length;){s||(s=(await r(t[a],e.requestInit,{isBinary:!0})).body.getReader());const{done:u,value:l}=await s.read();if(u){a++,s=void 0,(o=e.onProgress)===null||o===void 0||o.call(e,a/t.length);continue}i.enqueue(l);return}i.close()}})}async function Qie(t,e="",n,r){return Uz(i=>Wz(i,{requestInit:r}))(t,e,n)}function Uz(t){return async(e,n="",r)=>{const a=e.map(()=>!1),s={},i=r!=null?r.map(()=>!1):[],o=[];if(e.forEach((h,m)=>{let v=0;h.weights.forEach(y=>{const b="quantization"in y?y.quantization.dtype:y.dtype,x=Dc[b]*Fe(y.shape),w=()=>{a[m]=!0,s[m]==null&&(s[m]=[]),s[m].push({manifestEntry:y,groupOffset:v,sizeBytes:x})};r!=null?r.forEach((N,C)=>{N===y.name&&(w(),i[C]=!0)}):w(),o.push(y.name),v+=x})}),!i.every(h=>h)){const h=r.filter((m,v)=>!i[v]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}const u=a.reduce((h,m,v)=>(m&&h.push(v),h),[]),l=[];u.forEach(h=>{e[h].paths.forEach(m=>{const v=n+(n.endsWith("/")?"":"/")+m;l.push(v)})});const c=await t(l),f={};let d=0;return u.forEach(h=>{const m=e[h].paths.length,v=new Gi(c.slice(d,d+m));s[h].forEach(b=>{const x=v.slice(b.groupOffset,b.groupOffset+b.sizeBytes),w=hL(x,[b.manifestEntry]);for(const N in w)f[N]=w[N]}),d+=m}),f}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jie="application/octet-stream",Zie="application/json";class wD{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(Y(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=$e().platform.fetch,Y(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&Y(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a=yL(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(a)],{type:Zie}),"model.json"),e.weightData!=null){const i=Gi.join(e.weightData);n.body.append("model.weights.bin",new Blob([i],{type:Jie}),"model.weights.bin")}const s=await this.fetch(this.path,n);if(s.ok)return{modelArtifactsInfo:og(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const r=n.modelTopology,a=n.weightsManifest;if(r==null&&a==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return RT(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=rC(e.weightsManifest),a=()=>Yie(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:a})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,a]=eoe(n),s=this.weightPathPrefix||r,i=[],o=[];for(const u of e)for(const l of u.paths)this.weightUrlConverter!=null?o.push(this.weightUrlConverter(l)):i.push(s+l+a);return this.weightUrlConverter&&i.push(...await Promise.all(o)),i}async loadWeights(e){const n=await this.getWeightUrls(e),r=rC(e),a=await Wz(n,this.loadOptions);return[r,a]}}wD.URL_SCHEME_REGEX=/^https?:\/\//;function eoe(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),a=n>e?t.substring(n):"";return[r+"/",a]}function cC(t){return t.match(wD.URL_SCHEME_REGEX)!=null}const qz=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>cC(r)):n=cC(t),n)return xD(t,e)}return null};Zn.registerSaveRouter(qz);Zn.registerLoadRouter(qz);function xD(t,e){return new wD(t,e)}function toe(t,e){return xD(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xS{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class Vz{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class noe{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function roe(t,e,n,r){const a=arguments;return new noe(jz(...a))}function jz(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new xS(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new xS({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new xS({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function aoe(t){return new Vz(t)}function soe(t){return new Vz(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hz=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:Gi,browserFiles:Xie,browserHTTPRequest:toe,concatenateArrayBuffers:vL,copyModel:aee,decodeWeights:hL,decodeWeightsStream:gL,encodeWeights:nC,fromMemory:roe,fromMemorySync:jz,getLoadHandlers:VZ,getModelArtifactsForJSON:RT,getModelArtifactsForJSONSync:bL,getModelArtifactsInfoForJSON:og,getSaveHandlers:wL,getWeightSpecs:rC,http:xD,isHTTPScheme:cC,listModels:nee,loadWeights:Qie,moveModel:see,registerLoadRouter:qZ,registerSaveRouter:UZ,removeModel:ree,weightsLoaderFactory:Uz,withSaveHandler:aoe,withSaveHandlerSync:soe},Symbol.toStringTag,{value:"Module"}));function SD(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(Fe(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const a=e.shape,s=a[a.length-1];let i=1;for(let f=0;f<a.length-1;++f)i*=a[f];const o=t.shape,u=a.slice();u.pop();let l=1;for(let f=s;f<n;++f)l*=o[f],u.push(o[f]);const c=[...St(t.shape).map(f=>f/l),1].slice(0,s);return[u,i,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fC=-2,ioe=-1;function ND(t,e,n){const r=t.shape.length;Y(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),Y(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let a=0;a<r;++a)Y(e[a]+n[a]<=t.shape[a],()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${e[a]+n[a]}) would overflow input.shape[${a}] (${t.shape[a]})`)}function ooe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function CD(t,e,n){const r=[];for(let a=0;a<t.length;a++)r[a]=Math.ceil((e[a]-t[a])/n[a]);return r}function Gz(t,e,n,r){const a=[...t];for(let s=a.length;s<r.length;s++)a.push(1);for(let s=0;s<n;s++)s===0?a[e]=1:(a.splice(e,0,1),a.pop());return a}function Kz(t,e,n){return n<=t?n:n-(e-1)}function Xz(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function uoe(t,e,n,r,a,s,i,o,u){const l=t.length;let c=new Array(l),f=new Array(l),d=new Array(l);if(e.length&&n>0){const h=e[0],m=n+1;c=Yz(i,h,m,r,t),f=Qz(o,h,m,a,t),d=Gz(s,h,m,t)}else for(let h=0;h<l;h++)c[h]=Zz(i,r,s,t,h,u),f[h]=e5(o,a,s,t,h,u),d[h]=Jz(s,h,u);return{begin:c,end:f,strides:d}}function Yz(t,e,n,r,a){const s=[...a],i=Xz(n,e);for(let o=0;o<s.length;o++)if(i.indexOf(o)>-1)s[o]=0;else{const u=Kz(e,n,o);let l=r[u];t&1<<u&&(l=0),s[o]=l}return s}function Qz(t,e,n,r,a){const s=[...a],i=Xz(n,e);for(let o=0;o<s.length;o++)if(i.indexOf(o)>-1)s[o]=Number.MAX_SAFE_INTEGER;else{const u=Kz(e,n,o);let l=r[u];t&1<<u&&(l=Number.MAX_SAFE_INTEGER),s[o]=l}for(let o=0;o<s.length;o++){const u=a[o];s[o]<0&&(s[o]+=u),s[o]=Ec(0,s[o],a[o])}return s}function Jz(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function Zz(t,e,n,r,a,s){let i=e[a];const o=n[a]||1;(t&1<<a||s&1<<a||i==null)&&(o>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const u=r[a];return i<0&&(i+=u),i=Ec(0,i,u-1),i}function e5(t,e,n,r,a,s){let i=e[a];const o=n[a]||1;(t&1<<a||s&1<<a||i==null)&&(o>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const u=r[a];return i<0&&(i+=u),o>0?i=Ec(0,i,u):i=Ec(-1,i,u-1),i}function ED(t,e,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(e[a]>0||n[a]!==t[a])return!1;return!0}function TD(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function fw(t,e,n){let r;const a=t.shape.length;typeof e=="number"?r=[e,...new Array(a-1).fill(0)]:e.length<a?r=e.concat(new Array(a-e.length).fill(0)):r=e.slice(),r.forEach(i=>{Y(i!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(a).fill(-1):typeof n=="number"?s=[n,...new Array(a-1).fill(-1)]:n.length<a?s=n.concat(new Array(a-n.length).fill(-1)):s=n,s=s.map((i,o)=>i>=0?i:(Y(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${o}.`),t.shape[o]-r[o])),[r,s]}function DD(t,e,n,r,a,s,i,o,u){let l;if(r==null?(l=new Array(e.length),l.fill(1)):l=r,i!=null&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const f={dims:l.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:l.slice(),beginMask:a,endMask:s,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:u};for(let w=0;w<f.dims;w++)c&&1<<w&o&&f.numAddAxisAfterEllipsis++,1<<w&i&&(c=!0);c||(f.ellipsisMask|=1<<f.dims,f.dims++);const d={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};loe(f,d);let h=!0,m=!0,v=!0;const y=[],b=[];for(let w=0;w<t.length;++w){if(d.strides[w]===0)throw Error(`strides[${w}] must be non-zero`);const N=!!(d.shrinkAxisMask&1<<w),C=t[w];if(C===-1){y.push(N?1:-1);continue}const E=[d.beginMask&1<<w,d.endMask&1<<w],$=[d.strides[w]>0?0:-1,d.strides[w]>0?C:C-1];if(N&&d.strides[w]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&d.strides[w]===1;const I=!!(d.beginMask&1<<w&&d.endMask&1<<w);if(d.beginValid&&d.endValid){if(N){const O=d.begin[w]<0?C+d.begin[w]:d.begin[w];if(d.begin[w]=O,d.end[w]=d.begin[w]+1,O<0||O>=C)throw Error(`slice index ${d.begin[w]} of dimension ${w} out of bounds.`)}else d.begin[w]=MO(d.begin[w],0,d.strides[w],C,E,$),d.end[w]=MO(d.end[w],1,d.strides[w],C,E,$);const A=d.strides[w]===1&&d.begin[w]===0&&d.end[w]===C;h=h&&A,m=m&&(w===0&&d.strides[w]===1||A)}else h=h&&d.strides[w]===1&&I,m=m&&(w===0&&d.strides[w]===1||I);let D,k=!1;if(d.beginValid&&d.endValid?(D=d.end[w]-d.begin[w],k=!0):N?(D=1,k=!0):I&&C>=0&&(d.strides[w]<0?D=-C:D=C,k=!0),k){let A;D===0||D<0!=d.strides[w]<0?A=0:A=Math.trunc(D/d.strides[w])+(D%d.strides[w]!==0?1:0),y.push(A)}else y.push(-1)}for(let w=0;w<d.finalShapeGatherIndices.length;++w){const N=d.finalShapeGatherIndices[w];N>=0?b.push(y[N]):N===fC&&b.push(1)}return{finalShapeSparse:b.filter((w,N)=>d.finalShapeGatherIndices[N]!==fC),finalShape:b,isIdentity:h,sliceDim0:m,isSimpleSlice:v,begin:d.begin,end:d.end,strides:d.strides}}function loe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const a=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<a;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(fC),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(ioe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function MO(t,e,n,r,a,s){if(a[e])return n>0?s[e]:s[e+1&1];{const i=t<0?r+t:t;return i<s[0]?s[0]:i>s[1]?s[1]:i}}const coe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:ND,computeFlatOffset:TD,computeOutShape:CD,getNormalizedAxes:uoe,isSliceContinous:ED,maskToAxes:ooe,parseSliceParams:fw,sliceInfo:DD,startForAxis:Zz,startIndicesWithElidedDims:Yz,stopForAxis:e5,stopIndicesWithElidedDims:Qz,stridesForAxis:Jz,stridesWithElidedDims:Gz},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class foe{static sgd(e){return new bD(e)}static momentum(e,n,r=!1){return new Lz(e,n,r)}static rmsprop(e,n=.9,r=0,a=null,s=!1){return new zz(e,n,r,a,s)}static adam(e=.001,n=.9,r=.999,a=null){return new Pz(e,n,r,a)}static adadelta(e=.001,n=.95,r=null){return new Rz(e,n,r)}static adamax(e=.002,n=.9,r=.999,a=null,s=0){return new Bz(e,n,r,a,s)}static adagrad(e,n=.1){return new Mz(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bf=foe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const doe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function t5(){return new Promise(t=>doe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AD(t,e){const n=t[0].length;t.forEach((a,s)=>{Y(a.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),Y(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((a,s)=>{for(let i=0;i<n;i++)Y(i===e||a[i]===r[i],()=>`Error in concat${n}D: Shape of tensors[${s}] (${a}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function wo(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Pi;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Pi||(Pi={}));function n5(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let a=1;a<n.length;++a){const s=n[a],i=r[r.length-n.length+a],o=r[i];if(s>=0)if(o>=0){if(o!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${a+t}] = ${s} but shape[${a+t}] = ${o}`)}else r[i]=s}return r}function r5(t){const e={FIRST_DIM_SIZE:Pi.FIRST_DIM_SIZE,VALUE_ROWIDS:Pi.VALUE_ROWIDS,ROW_LENGTHS:Pi.ROW_LENGTHS,ROW_SPLITS:Pi.ROW_SPLITS,ROW_LIMITS:Pi.ROW_LIMITS,ROW_STARTS:Pi.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function a5(t){return t.length===0?0:t[0]===Pi.FIRST_DIM_SIZE?t.length-1:t.length}function s5(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let a=0;a<Math.min(n,r-1);++a){const s=t[a],i=e[a+1];if(s>=0&&i>=0&&s!==1&&s!==i)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${a-t.length}] = ${s} but ragged tensor input.flatValues.shape[${a-t.length}] = ${i}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $D=30;function dw(t){return t<=$D?t:GN(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kD(t,e,n){const r=n*(typeof t=="number"?t:t[0]),a=e*(typeof t=="number"?t:t[1]);return[r,a]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gg(t,e,n,r=!0){let a=[];if(r)a=a.concat(e.slice(0)),a.push(t[0]/n),a=a.concat(t.slice(1));else{a=a.concat(t[0]);const s=e.length;for(let i=0;i<s;++i)a=a.concat([t[i+1]/e[i],e[i]]);a=a.concat(t.slice(s+1))}return a}function vg(t,e,n=!0){const r=[];if(n){r.push(e);for(let a=e+1;a<t;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{const a=[],s=[];for(let i=1;i<t;++i)i>=e*2+1||i%2===1?s.push(i):a.push(i);r.push(...a),r.push(0),r.push(...s)}return r}function yg(t,e,n,r=!0){const a=[];r?a.push(t[0]/n):a.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?a.push(e[s-1]*t[s]):a.push(t[s]/e[s-1]):a.push(t[s]);return a}function ID(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function _D(t,e,n){const r=t.slice(0,1);for(let a=0;a<n;++a)r.push(t[a+1]-e[a][0]-e[a][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pw=1.7580993408473768,hw=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OD=.3275911,FD=.254829592,RD=-.284496736,MD=1.421413741,PD=-1.453152027,BD=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ou(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function i5(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function o5(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=0;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function u5(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=2;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function LD(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function l5(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function c5(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let a=0;a<Math.ceil(t/2);a++){const s=(e?2:-2)*Math.PI*(a/t);n[a]=Math.cos(s),r[a]=Math.sin(s)}return{real:n,imag:r}}function f5(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),a=Math.cos(r),s=Math.sin(r);return{real:a,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SS="->",poe=/->/g,PO=",",BO="...";function zD(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(poe,"").length)/SS.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${SS}").`);const[r,a]=t.split(SS);Y(r.indexOf(BO)===-1,()=>`The ellipsis notation ("${BO}") is not supported yet.`);const s=r.split(PO),i=s.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let d=0;d<a.length;++d){const h=a[d];if(!s.some(m=>m.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);o.indexOf(h)===-1&&o.push(h)}for(let d=0;d<r.length;++d){const h=r[d];o.indexOf(h)===-1&&h!==PO&&o.push(h)}const u=new Array(s.length);for(let d=0;d<i;++d){if(new Set(s[d].split("")).size!==s[d].length)throw new Error(`Found duplicate axes in input component ${s[d]}. Support for duplicate axes in input is not implemented yet.`);u[d]=[];for(let h=0;h<s[d].length;++h)u[d].push(o.indexOf(s[d][h]))}const l=o.length,c=a.length,f=[];for(let d=c;d<l;++d)f.push(d);return{allDims:o,summedDims:f,idDims:u}}function WD(t,e){let n=new Array(t);n.fill(-1);for(let a=0;a<e.length;++a)n[e[a]]=a;const r=[];for(let a=0;a<t;++a)n[a]===-1&&r.push(a);return n=n.filter(a=>a!==-1),{permutationIndices:n,expandDims:r}}function UD(t,e,n){const r=new Array(t);for(let a=0;a<n.length;++a){const s=n[a].shape;for(let i=0;i<e[a].length;++i)r[e[a][i]]===void 0?r[e[a][i]]=s[i]:Y(r[e[a][i]]===s[i],()=>`Expected dimension ${r[e[a][i]]} at axis ${i} of input shaped ${JSON.stringify(s)}, but got dimension ${s[i]}`)}}function qD(t,e){const n=t,r=[];let a=0;t.length===0&&n.push(-1),a=t.length+1;for(let i=0;i<a;++i)r.push([]);const s=[];for(let i=0;i<n.length;++i){const o=n[i],u=hoe(e,o);for(const l of u)s.indexOf(l)===-1&&(r[i].push(l),s.push(l))}return{path:n,steps:r}}function VD(t){return t.every((e,n)=>e===n)}function hoe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function jD(t,e,n=0){let r=[];if(typeof e=="number")Y(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const a=e.reduce((i,o)=>(o===-1&&(i+=1),i),0);Y(a<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const i=e.reduce((o,u)=>u>0?o+u:o);e[s]=t.shape[n]-i}Y(t.shape[n]===e.reduce((i,o)=>i+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function p5(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function h5(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m5(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function g5(t,e){return`size ${t} must be non-negative, not ${e}`}function v5(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function y5(t,e){const n=Fe(t),r=Fe(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function b5(t,e){const n=Fe(t),r=Fe(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dC(){return"segment ids must be >= 0"}function w5(){return"segment ids are not increasing"}function x5(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function S5(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N5(t,e){let n=!1,r;for(t<=$D?(r=t,n=!0):r=GN(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=GN(t,r+1);return r}function C5(t,e,n){const r=[],a=t.length;for(let s=0;s<a;s++)s!==e?r.push(t[s]):r.push(n);return r}function HD(t,e,n,r){const a=e.shape.length,s=t.shape.length;if(r!==0&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(t.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${t.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);const i=t.shape[n],o=[];let u=1,l=1,c=1;for(let f=0;f<r;++f)o.push(t.shape[f]),u*=t.shape[f];for(let f=r;f<n;f++)o.push(t.shape[f]),l*=t.shape[f];for(let f=r;f<a;f++)o.push(e.shape[f]);for(let f=n+1;f<s;f++)o.push(t.shape[f]),c*=t.shape[f];return{batchSize:u,sliceSize:c,outerSize:l,dimSize:i,outputShape:o}}const moe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:HD,computeOutShape:C5,segOpComputeOptimalWindowSize:N5},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uu(t){try{return t.map(e=>al(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function E5(t){return t.map(e=>Zu(e))}const goe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:FD,ERF_A2:RD,ERF_A3:MD,ERF_A4:PD,ERF_A5:BD,ERF_P:OD,PARALLELIZE_THRESHOLD:$D,get RowPartitionType(){return Pi},SELU_SCALE:hw,SELU_SCALEALPHA:pw,applyActivation:lw,assertAndGetBroadcastShape:Ht,assertAxesAreInnerMostDims:sa,assertParamsConsistent:AD,assignToTypedArray:l5,axesAreInnerMostDims:jT,calculateShapes:Gc,checkEinsumDimSizes:UD,checkPadOnDimRoundingMode:Ma,combineLocations:ez,combineRaggedTensorToTensorShapes:n5,complexWithEvenIndex:o5,complexWithOddIndex:u5,computeConv2DInfo:Ur,computeConv3DInfo:Nl,computeDefaultPad:BT,computeDilation2DInfo:ug,computeOptimalWindowSize:dw,computeOutAndReduceShapes:qr,computeOutShape:wo,computePool2DInfo:xi,computePool3DInfo:du,convertConv2DDataFormat:pu,decodeEinsumEquation:zD,eitherStridesOrDilationsAreOne:aa,expandShapeToKeepDim:dr,exponent:f5,exponents:c5,fromStringArrayToUint8:E5,fromUint8ToStringArray:uu,getAxesPermutation:nr,getBroadcastDims:Ed,getComplexWithIndex:LD,getEinsumComputePath:qD,getEinsumPermutation:WD,getFusedBiasGradient:uw,getFusedDyActivation:ow,getImageCenter:kD,getInnerMostAxes:pr,getPermuted:vg,getRaggedRank:a5,getReductionAxes:_r,getReshaped:gg,getReshapedPermuted:yg,getRowPartitionTypesHelper:r5,getSliceBeginCoords:ID,getSliceSize:_D,getSparseFillEmptyRowsIndicesDenseShapeMismatch:d5,getSparseFillEmptyRowsNegativeIndexErrorMessage:p5,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:h5,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:v5,getSparseReshapeInputOutputMismatchErrorMessage:b5,getSparseReshapeInputOutputMultipleErrorMessage:y5,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:m5,getSparseReshapeNegativeOutputDimErrorMessage:g5,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:S5,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:dC,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:w5,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:x5,getUndoAxesPermutation:Cl,isIdentityPermutation:VD,log:nZ,mergeRealAndImagArrays:ou,prepareAndValidate:SD,prepareSplitSize:jD,segment_util:moe,shouldFuse:cw,slice_util:coe,splitRealAndImagArrays:i5,stridesOrDilationsArePositive:kc,tupleValuesAreOne:ul,upcastType:vs,validateDefaultValueShape:s5,validateInput:lD,validateUpdateShape:wz,warn:Os},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Uie();/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const voe=$e();voe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var us;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(us||(us={}));var LO;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(LO||(LO={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yoe={};function T5(t){return yoe[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W(t,e,n,r,a){const s=e.inputParams[t];if(s&&s.inputIndexStart!==void 0){const o=s.inputIndexStart,u=s.inputIndexEnd===0?void 0:s.inputIndexEnd===void 0?o+1:s.inputIndexEnd,l=o<0?e.inputNames.length+o:o;if(s.type==="tensor")return Jr(e.inputNames[l],n,r,a);if(s.type==="tensors"){const d=e.inputs.slice(o,u);return e.inputNames.slice(o,u).filter((m,v)=>{var y;return((y=d[v])===null||y===void 0?void 0:y.op)!=="NoOp"}).map(m=>Jr(m,n,r,a))}const c=Jr(e.inputNames[l],n,r,a),f=c.dataSync();return s.type==="number"?f[0]:di(c.shape,f)}const i=e.attrParams[t];return i&&i.value}function Jr(t,e,n,r){const[a,s]=ls(t,n);if(r!=null){const o=r.getHashTableHandleByName(a);if(o!=null)return o}const i=n.currentContextIds.find(o=>!!e[L0(a,o)]);return i!==void 0?e[L0(a,i)][s]:void 0}function zO(t,e,n){return e[L0(t,n.currentContextId)]}function Ho(t,e){const[n,r,a]=ls(t,e);return[L0(n,e&&e.currentContextId),r,a]}function L0(t,e){return e?`${t}-${e}`:t}function ls(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const s=e.parseNodeNameCache.get(t);if(s!=null)return s}const r=t.split(":");let a;if(r.length===1)a=[t,0,void 0];else{const s=r[0],i=r.length===3?r[1]:void 0,o=Number(r[r.length-1]);a=[s,o,i]}return n&&e.parseNodeNameCache.set(t,a),a}function d0(t,e,n){let r=W("pad",t,e,n);if(r==="explicit"){r=W("explicitPaddings",t,e,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let s=0;s<4;s++)a[s][0]=r[s*2],a[s][1]=r[s*2+1];return a}return r}function Go(t){return t.kept?t:Jo(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const boe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],woe=Object.freeze(Object.defineProperty({__proto__:null,json:boe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xoe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Soe=Object.freeze(Object.defineProperty({__proto__:null,json:xoe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Noe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],Coe=Object.freeze(Object.defineProperty({__proto__:null,json:Noe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eoe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],Toe=Object.freeze(Object.defineProperty({__proto__:null,json:Eoe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Doe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Aoe=Object.freeze(Object.defineProperty({__proto__:null,json:Doe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $oe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],koe=Object.freeze(Object.defineProperty({__proto__:null,json:$oe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ioe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],_oe=Object.freeze(Object.defineProperty({__proto__:null,json:Ioe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ooe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Foe=Object.freeze(Object.defineProperty({__proto__:null,json:Ooe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Roe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Moe=Object.freeze(Object.defineProperty({__proto__:null,json:Roe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Poe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Boe=Object.freeze(Object.defineProperty({__proto__:null,json:Poe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Loe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],zoe=Object.freeze(Object.defineProperty({__proto__:null,json:Loe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Woe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Uoe=Object.freeze(Object.defineProperty({__proto__:null,json:Woe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qoe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Voe=Object.freeze(Object.defineProperty({__proto__:null,json:qoe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const joe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Hoe=Object.freeze(Object.defineProperty({__proto__:null,json:joe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Goe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Koe=Object.freeze(Object.defineProperty({__proto__:null,json:Goe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xoe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Yoe=Object.freeze(Object.defineProperty({__proto__:null,json:Xoe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qoe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Joe=Object.freeze(Object.defineProperty({__proto__:null,json:Qoe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zoe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],eue=Object.freeze(Object.defineProperty({__proto__:null,json:Zoe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tue=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],nue=Object.freeze(Object.defineProperty({__proto__:null,json:tue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WO{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[woe,Soe,Coe,Toe,Aoe,koe,_oe,Foe,Moe,Boe,zoe,Uoe,Voe,Hoe,Koe,Yoe,Joe,eue,nue],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,a)=>(r[a.tfOpName]=a,r),{})}transformGraph(e,n={}){const r=e.node,a=[],s=[],i=[],o=r.reduce((v,y)=>(v[y.name]=this.mapNode(y),y.op.startsWith("Placeholder")?a.push(v[y.name]):y.op==="Const"?s.push(v[y.name]):(y.input==null||y.input.length===0)&&i.push(v[y.name]),v),{});let u=[];const l=[];let c={},f={};n!=null&&(c=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));const d=Object.keys(o);d.forEach(v=>{const y=o[v];y.inputNames.forEach((b,x)=>{const[w,,N]=Ho(b),C=o[w];if(C.outputs!=null){const E=C.outputs.indexOf(N);if(E!==-1){const $=`${w}:${E}`;y.inputNames[x]=$}}y.inputs.push(C),C.children.push(y)})}),Object.keys(f).length===0?d.forEach(v=>{const y=o[v];y.children.length===0&&l.push(y)}):Object.keys(f).forEach(v=>{const[y]=Ho(v),b=o[y];b!=null&&(b.signatureKey=f[v],l.push(b))}),Object.keys(c).length>0?Object.keys(c).forEach(v=>{const[y]=Ho(v),b=o[y];b&&(b.signatureKey=c[v],u.push(b))}):u=a;let h={};e.library!=null&&e.library.function!=null&&(h=e.library.function.reduce((v,y)=>(v[y.signature.name]=this.mapFunction(y),v),{}));const m={nodes:o,inputs:u,outputs:l,weights:s,placeholders:a,signature:n,functions:h};return i.length>0&&(m.initNodes=i),m}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=T5(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(a=>a.startsWith("^")?a.slice(1):a),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((a,s)=>(a[s.name]={type:s.type,inputIndexStart:s.start,inputIndexEnd:s.end},a),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((a,s)=>{const i=s.type;let o;switch(s.type){case"string":o=pC(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=pC(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"string[]":o=wC(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=wC(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number":o=mC(e.attr,s.tfName,s.defaultValue||0),o===void 0&&s.tfDeprecatedName&&(o=mC(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number[]":o=bC(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=bC(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool":o=hC(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=hC(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool[]":o=SC(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=SC(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape":o=yC(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=yC(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape[]":o=xC(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=xC(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype":o=gC(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=gC(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype[]":o=vC(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=vC(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"func":o=UO(e.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=UO(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${s.type} for op: ${e.op}`)}return a[s.name]={value:o,type:i},a},{})),r}mapFunction(e){const n=e.nodeDef,r=[],a=[];let s={};n!=null&&(s=n.reduce((f,d)=>(f[d.name]=this.mapNode(d),d.op==="Const"&&a.push(f[d.name]),f),{}));const i=[],o=[];e.signature.inputArg.forEach(f=>{const[d]=Ho(f.name),h={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:GD(f.type),type:"dtype"}},children:[]};h.signatureKey=f.name,i.push(h),s[d]=h}),Object.keys(s).forEach(f=>{const d=s[f];d.inputNames.forEach((h,m)=>{const[v,,y]=Ho(h),b=s[v];if(b.outputs!=null){const x=b.outputs.indexOf(y);if(x!==-1){const w=`${v}:${x}`;d.inputNames[m]=w}}d.inputs.push(b),b.children.push(d)})});const l=e.ret;e.signature.outputArg.forEach(f=>{const[d,h]=Ho(l[f.name]),m=s[d];m!=null&&(m.defaultOutput=h,o.push(m))});const c=this.mapArgsToSignature(e);return{nodes:s,inputs:i,outputs:o,weights:a,placeholders:r,signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function rue(t){const e=$e().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function D5(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):rue(t);return e?n:n.toLowerCase()}function pC(t,e,n,r=!1){const a=t[e];return a!=null?D5(a.s,r):n}function hC(t,e,n){const r=t[e];return r?r.b:n}function mC(t,e,n){const r=t[e]||{},a=r.i!=null?r.i:r.f!=null?r.f:n;return typeof a=="number"?a:parseInt(a,10)}function GD(t){switch(typeof t=="string"&&(t=us[t]),t){case us.DT_FLOAT:case us.DT_HALF:return"float32";case us.DT_INT32:case us.DT_INT64:case us.DT_INT8:case us.DT_UINT8:return"int32";case us.DT_BOOL:return"bool";case us.DT_DOUBLE:return"float32";case us.DT_STRING:return"string";case us.DT_COMPLEX64:case us.DT_COMPLEX128:return"complex64";default:return null}}function UO(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function gC(t,e,n){const r=t[e];return r&&r.type?GD(r.type):n}function vC(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(a=>GD(a)):n}function A5(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function yC(t,e,n){const r=t[e];return r&&r.shape?A5(r.shape):n}function bC(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(a=>typeof a=="number"?a:parseInt(a,10)):n}function wC(t,e,n,r=!1){const a=t[e];return a&&a.list&&a.list.s?a.list.s.map(s=>D5(s,r)):n}function xC(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(a=>A5(a)):n}function SC(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aue{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(a=>this.getInput(a)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((a,s)=>(a[s]=this.getAttr(s),a),{}))}getInput(e){return Jr(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Jr(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return mC(this.node.rawAttrs,e,n);if(r.s!=null)return pC(this.node.rawAttrs,e,n);if(r.b!=null)return hC(this.node.rawAttrs,e,n);if(r.shape!=null)return yC(this.node.rawAttrs,e,n);if(r.type!=null)return gC(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return bC(this.node.rawAttrs,e,n);if(r.list.s!=null)return wC(this.node.rawAttrs,e,n);if(r.list.shape!=null)return xC(this.node.rawAttrs,e,n);if(r.list.b!=null)return SC(this.node.rawAttrs,e,n);if(r.list.type!=null)return vC(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ia=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:fL,abs:Er,acos:$L,acosh:kL,add:Ve,addN:wee,all:PT,any:P0,argMax:Cd,argMin:IL,asin:_L,asinh:OL,atan:FL,atan2:RL,atanh:ML,avgPool:V1,avgPool3d:PL,basicLSTMCell:qee,batchNorm:lg,batchNorm2d:BL,batchNorm3d:LL,batchNorm4d:zL,batchToSpaceND:j1,bincount:WL,bitwiseAnd:Jee,booleanMaskAsync:Pae,broadcastArgs:ete,broadcastTo:ud,buffer:tn,cast:ot,ceil:UL,clipByValue:ys,clone:Jo,complex:il,concat:wr,concat1d:qL,concat2d:VL,concat3d:jL,concat4d:HL,conv1d:LT,conv2d:ll,conv2dTranspose:WT,conv3d:GL,conv3dTranspose:XL,cos:H1,cosh:UT,cosineWindow:pD,cumprod:B0,cumsum:qT,denseBincount:uC,depthToSpace:YL,depthwiseConv2d:cg,diag:Nte,dilation2d:QL,div:bt,divNoNan:JL,dot:ZL,dropout:Ez,einsum:Qf,elu:fg,enclosingPowerOfTwo:Tz,ensureShape:Ote,equal:qi,erf:VT,euclideanNorm:nz,exp:bs,expandDims:$a,expm1:rz,eye:HT,fft:sw,fill:Qd,floor:pg,floorDiv:MT,fused:sse,gather:hg,gatherND:Gae,greater:Ts,greaterEqual:El,ifft:Gh,imag:G1,image:go,inTopKAsync:Qae,irfft:oD,isFinite:az,isInf:sz,isNaN:iz,leakyRelu:K1,less:Vh,lessEqual:Vc,linalg:Fz,linspace:sne,localResponseNormalization:oz,log:Ms,log1p:X1,logSigmoid:uz,logSoftmax:GT,logSumExp:Y1,logicalAnd:No,logicalNot:Q1,logicalOr:KT,logicalXor:lz,losses:Mie,lowerBound:xne,matMul:nn,max:pi,maxPool:J1,maxPool3d:cz,maxPoolWithArgmax:Ene,maximum:hu,mean:or,meshgrid:Ane,min:qh,minimum:_c,mirrorPad:fz,mod:dz,moments:Z1,movingAverage:zae,mul:ge,multiRNNCell:Fne,multinomial:Mne,neg:jn,norm:dg,notEqual:Td,oneHot:YT,ones:ps,onesLike:Ps,op:de,outerProduct:Wne,pad:Tl,pad1d:Vne,pad2d:Hne,pad3d:Kne,pad4d:Yne,pool:pz,pow:su,prelu:tw,print:AL,prod:hz,raggedGather:are,raggedRange:ire,raggedTensorToTensor:ure,rand:cre,randomGamma:_re,randomNormal:JT,randomStandardNormal:Rre,randomUniform:jc,randomUniformInt:Bre,range:Dd,real:jh,reciprocal:gz,relu:$o,relu6:ZT,reshape:be,reverse:yi,reverse1d:jre,reverse2d:Gre,reverse3d:Xre,reverse4d:Qre,rfft:iw,round:eD,rsqrt:tD,scalar:Ct,scatterND:Uae,searchSorted:XT,selu:nD,separableConv2d:rD,setdiff1dAsync:rae,sigmoid:bo,sign:vz,signal:Rie,sin:aD,sinh:sD,slice:dn,slice1d:nw,slice2d:iD,slice3d:rw,slice4d:Hh,softmax:aw,softplus:Jd,spaceToBatchND:ew,sparse:Pie,sparseToDense:jae,spectral:Fie,split:hs,sqrt:na,square:Pn,squaredDifference:uD,squeeze:Hc,stack:ws,step:Zd,stridedSlice:yz,string:Bie,sub:ft,sum:ht,tan:bz,tanh:Ic,tensor:zi,tensor1d:ca,tensor2d:ld,tensor3d:Nae,tensor4d:Cae,tensor5d:Eae,tensor6d:Tae,tensorScatterUpdate:Aae,tile:ui,topk:xz,transpose:pn,truncatedNormal:cD,unique:Sz,unsortedSegmentSum:fD,unstack:bi,upperBound:Fae,variable:Nz,where:pa,whereAsync:Cz,zeros:Tr,zerosLike:mn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sue=(t,e,n,r=ia)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(W("a",t,e,n),W("b",t,e,n))];case"AddN":return[r.addN(W("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(W("a",t,e,n),W("b",t,e,n))];case"Mul":return[r.mul(W("a",t,e,n),W("b",t,e,n))];case"RealDiv":case"Div":return[r.div(W("a",t,e,n),W("b",t,e,n))];case"DivNoNan":return[r.divNoNan(W("a",t,e,n),W("b",t,e,n))];case"FloorDiv":return[r.floorDiv(W("a",t,e,n),W("b",t,e,n))];case"Sub":return[r.sub(W("a",t,e,n),W("b",t,e,n))];case"Minimum":return[r.minimum(W("a",t,e,n),W("b",t,e,n))];case"Maximum":return[r.maximum(W("a",t,e,n),W("b",t,e,n))];case"Pow":return[r.pow(W("a",t,e,n),W("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(W("a",t,e,n),W("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iue=(t,e,n,r=ia)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(W("x",t,e,n))];case"Acos":return[r.acos(W("x",t,e,n))];case"Acosh":return[r.acosh(W("x",t,e,n))];case"Asin":return[r.asin(W("x",t,e,n))];case"Asinh":return[r.asinh(W("x",t,e,n))];case"Atan":return[r.atan(W("x",t,e,n))];case"Atan2":return[r.atan2(W("x",t,e,n),W("y",t,e,n))];case"Atanh":return[r.atanh(W("x",t,e,n))];case"Ceil":return[r.ceil(W("x",t,e,n))];case"Complex":return[r.complex(W("real",t,e,n),W("imag",t,e,n))];case"Cos":return[r.cos(W("x",t,e,n))];case"Cosh":return[r.cosh(W("x",t,e,n))];case"Elu":return[r.elu(W("x",t,e,n))];case"Erf":return[r.erf(W("x",t,e,n))];case"Exp":return[r.exp(W("x",t,e,n))];case"Expm1":return[r.expm1(W("x",t,e,n))];case"Floor":return[r.floor(W("x",t,e,n))];case"Log":return[r.log(W("x",t,e,n))];case"Log1p":return[r.log1p(W("x",t,e,n))];case"Imag":return[r.imag(W("x",t,e,n))];case"Neg":return[r.neg(W("x",t,e,n))];case"Reciprocal":return[r.reciprocal(W("x",t,e,n))];case"Real":return[r.real(W("x",t,e,n))];case"Relu":return[r.relu(W("x",t,e,n))];case"Round":return[r.round(W("x",t,e,n))];case"Selu":return[r.selu(W("x",t,e,n))];case"Sigmoid":return[r.sigmoid(W("x",t,e,n))];case"Sin":return[r.sin(W("x",t,e,n))];case"Sign":return[r.sign(W("x",t,e,n))];case"Sinh":return[r.sinh(W("x",t,e,n))];case"Softplus":return[r.softplus(W("x",t,e,n))];case"Sqrt":return[r.sqrt(W("x",t,e,n))];case"Square":return[r.square(W("x",t,e,n))];case"Tanh":return[r.tanh(W("x",t,e,n))];case"Tan":return[r.tan(W("x",t,e,n))];case"ClipByValue":return[r.clipByValue(W("x",t,e,n),W("clipValueMin",t,e,n),W("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(W("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Jr(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(W("x",t,e,n),W("alpha",t,e,n))];case"Prelu":return[r.prelu(W("x",t,e,n),W("alpha",t,e,n))];case"IsNan":return[r.isNaN(Jr(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(Jr(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(Jr(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ri(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){Y(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const a=t[r],s=e[r];Y(a<0||s<0||a===s,()=>n+` Shapes ${t} and ${e} must match`)}}}function qO(t){return!(typeof t=="number"||t.some(e=>e<0))}function fh(t,e,n){let r=NC(t,n);const a=!qO(r);if(a&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(a&&e.forEach(s=>{r=NC(s.shape,r)}),!qO(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function NC(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const a=t[r],s=e[r];if(a>=0&&s>=0&&a!==s)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=a>=0?a:s}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oue{constructor(e,n,r,a,s,i,o){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=s,this.dynamicSize=i,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=Ct(0),Lr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),ri(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,Lr(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,a)=>this.write(r,n[a]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let a=0;a<this.size();a++)e.push(a)}if(e.length===0)return zi([],[0].concat(this.elementShape));const r=this.readMany(e);return ri(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),ws(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return zi([],[0].concat(this.elementShape));const n=[];for(let a=0;a<this.size();a++)n.push(a);const r=this.readMany(n);return ri(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),wr(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,bi(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const a=e.map(u=>(r+=u,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const s=r===0?0:n.size/r,i=[];Te(()=>{n=be(n,[1,r,s]);for(let u=0;u<e.length;++u){const c=[0,u===0?0:a[u-1],0],f=[1,e[u],s];i[u]=be(dn(n,c,f),this.elementShape)}return i});const o=[];for(let u=0;u<e.length;u++)o[u]=u;this.writeMany(o,i)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fc{get id(){return this.idTensor.id}constructor(e,n,r,a=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);ri(n,s.shape,"TensorList shape mismatch: "),Lr(s)}),this.idTensor=Ct(0),this.maxNumElements=a,Lr(this.idTensor)}copy(){return new Fc([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);ri(e,this.elementShape,"TensorList shape mismatch: ");const a=fh(this.elementShape,this.tensors,e);return Te(()=>{const s=this.tensors.map(i=>be(i,a));return ws(s,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=fh(this.elementShape,this.tensors,e),a=this.tensors.pop();return a.kept=!1,ri(a.shape,e,"TensorList shape mismatch: "),be(a,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(ri(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Lr(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new Fc([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);ri(this.tensors[e].shape,n,"TensorList shape mismatch: ");const a=fh(this.elementShape,this.tensors,n);return be(this.tensors[e],a)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);ri(this.elementShape,n.shape,"TensorList shape mismatch: "),Lr(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);ri(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const a=fh(this.elementShape,this.tensors,r);return e.length===0?zi([],[0].concat(a)):Te(()=>{const s=e.map(i=>be(this.tensors[i],a));return ws(s,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);ri(this.elementShape,n,"TensorList shape mismatch: ");const r=fh(this.elementShape,this.tensors,n);return this.size()===0?zi([],[0].concat(r)):Te(()=>{const a=this.tensors.map(s=>be(s,r));return wr(a,0)})}}function uue(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const a=t.shape.slice(1);ri(a,e,"TensorList shape mismatch: ");const s=bi(t);return new Fc(s,e,r)}function lue(t,e,n,r){return new Fc([],t,e,r)}function cue(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const a=Math.max(...e);if(r!=null&&r!==-1&&a>=r)throw new Error(`Max index must be < array size (${a}  vs. ${r})`);const s=new Fc([],n,t.dtype,r),i=bi(t,0);return e.forEach((o,u)=>{s.setItem(o,i[u])}),s}function fue(t,e,n){let r=0;const a=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const s=t.shape.slice(1),i=NC(s,n),o=r===0?0:t.size/r,u=Te(()=>{const c=[];t=be(t,[1,r,o]);for(let f=0;f<e.length;++f){const h=[0,f===0?0:a[f-1],0],m=[1,e[f],o];c[f]=be(dn(t,h,m),i)}return t.dispose(),c}),l=new Fc([],n,t.dtype,e.length);for(let c=0;c<u.length;c++)l.setItem(c,u[c]);return l}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const due=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=W("thenBranch",t,e,n),a=W("elseBranch",t,e,n),s=W("cond",t,e,n),i=W("args",t,e,n);return(await s.data())[0]?n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=W("body",t,e,n),a=W("cond",t,e,n),s=W("args",t,e,n),i=await n.functionMap[a].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),o=s.map(c=>c.id);let u=await i[0].data();i.forEach(c=>{!c.kept&&o.indexOf(c.id)===-1&&c.dispose()});let l=s;for(;u[0];){const c=l;l=await n.functionMap[r].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);const f=l.map(h=>h.id);c.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()});const d=await n.functionMap[a].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);u=await d[0].data(),d.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()})}return l}case"LoopCond":{const r=W("pred",t,e,n);return[Go(r)]}case"Switch":{const r=W("pred",t,e,n);let a=W("data",t,e,n);return a.kept||(a=Go(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=t.inputNames.find(a=>Jr(a,e,n)!==void 0);if(r){const a=Jr(r,e,n);return[Go(a)]}return}case"Enter":{const r=W("frameName",t,e,n),a=W("tensor",t,e,n);return n.enterFrame(r),[Go(a)]}case"Exit":{const r=W("tensor",t,e,n);return n.exitFrame(),[Go(r)]}case"NextIteration":{const r=W("tensor",t,e,n);return n.nextIteration(),[Go(r)]}case"TensorArrayV3":{const r=W("size",t,e,n),a=W("dtype",t,e,n),s=W("elementShape",t,e,n),i=W("dynamicSize",t,e,n),o=W("clearAfterRead",t,e,n),u=W("identicalElementShapes",t,e,n),l=W("name",t,e,n),c=new oue(l,a,r,s,u,i,o);return n.addTensorArray(c),[c.idTensor,Ct(1)]}case"TensorArrayWriteV3":{const r=W("tensorArrayId",t,e,n),a=W("index",t,e,n),s=W("tensor",t,e,n),i=n.getTensorArray(r.id);return i.write(a,s),[i.idTensor]}case"TensorArrayReadV3":{const r=W("tensorArrayId",t,e,n),a=W("index",t,e,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{const r=W("tensorArrayId",t,e,n),a=W("indices",t,e,n),s=W("dtype",t,e,n);return[n.getTensorArray(r.id).gather(a,s)]}case"TensorArrayScatterV3":{const r=W("tensorArrayId",t,e,n),a=W("indices",t,e,n),s=W("tensor",t,e,n),i=n.getTensorArray(r.id);return i.scatter(a,s),[i.idTensor]}case"TensorArrayConcatV3":{const r=W("tensorArrayId",t,e,n),a=n.getTensorArray(r.id),s=W("dtype",t,e,n);return[a.concat(s)]}case"TensorArraySplitV3":{const r=W("tensorArrayId",t,e,n),a=W("tensor",t,e,n),s=W("lengths",t,e,n),i=n.getTensorArray(r.id);return i.split(s,a),[i.idTensor]}case"TensorArraySizeV3":{const r=W("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return[Ct(a.size(),"int32")]}case"TensorArrayCloseV3":{const r=W("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=W("tensorListId",t,e,n),a=W("index",t,e,n),s=W("tensor",t,e,n),i=n.getTensorList(r.id);return i.setItem(a,s),[i.idTensor]}case"TensorListGetItem":{const r=W("tensorListId",t,e,n),a=W("index",t,e,n),s=W("elementShape",t,e,n),i=W("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(a,s,i)]}case"TensorListScatterV2":case"TensorListScatter":{const r=W("indices",t,e,n),a=W("tensor",t,e,n),s=W("elementShape",t,e,n),i=W("numElements",t,e,n),o=cue(a,r,s,i);return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=W("elementShape",t,e,n),a=W("elementDType",t,e,n);let s;t.op==="TensorListReserve"?s="numElements":s="maxNumElements";const i=W(s,t,e,n),o=t.op==="TensorListReserve"?-1:i,u=lue(r,a,i,o);return n.addTensorList(u),[u.idTensor]}case"TensorListGather":{const r=W("tensorListId",t,e,n),a=W("indices",t,e,n),s=W("elementShape",t,e,n),i=W("elementDType",t,e,n);return[n.getTensorList(r.id).gather(a,i,s)]}case"TensorListStack":{const r=W("tensorListId",t,e,n),a=W("elementShape",t,e,n),s=W("elementDType",t,e,n),i=W("numElements",t,e,n);return[n.getTensorList(r.id).stack(a,s,i)]}case"TensorListFromTensor":{const r=W("tensor",t,e,n),a=W("elementShape",t,e,n),s=W("elementDType",t,e,n),i=uue(r,a,s);return n.addTensorList(i),[i.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=W("tensorListId",t,e,n),a=n.getTensorList(r.id),s=W("dtype",t,e,n),i=W("elementShape",t,e,n);return[a.concat(s,i)]}case"TensorListPushBack":{const r=W("tensorListId",t,e,n),a=W("tensor",t,e,n),s=n.getTensorList(r.id);return s.pushBack(a),[s.idTensor]}case"TensorListPopBack":{const r=W("tensorListId",t,e,n),a=W("elementShape",t,e,n),s=W("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(a,s)]}case"TensorListSplit":{const r=W("tensor",t,e,n),a=W("elementShape",t,e,n),s=W("lengths",t,e,n),i=fue(r,s,a);return n.addTensorList(i),[i.idTensor]}case"TensorListLength":{const r=W("tensorListId",t,e,n),a=n.getTensorList(r.id);return[Ct(a.size(),"int32")]}case"TensorListResize":{const r=W("tensorListId",t,e,n),a=W("size",t,e,n),i=n.getTensorList(r.id).resize(a);return n.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VO(t,e,n){const[r,a]=W("fusedOps",t,e,n),s=r==="biasadd",i=!s,o=a==="prelu",u=r==="fusedbatchnorm",l=W("numArgs",t,e,n);if(s){if(o&&l!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&s&&l!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=W("strides",t,e,n),f=d0(t,e,n),d=W("dataFormat",t,e,n).toUpperCase(),h=W("dilations",t,e,n);let[m,v]=W("args",t,e,n);i&&(v=m,m=void 0);const y=W("leakyreluAlpha",t,e,n);return{stride:c,pad:f,dataFormat:d,dilations:h,biasArg:m,preluArg:v,activationFunc:a,leakyreluAlpha:y}}const pue=(t,e,n,r=ia)=>{switch(t.op){case"Conv1D":{const a=W("stride",t,e,n),s=W("pad",t,e,n),i=W("dataFormat",t,e,n).toUpperCase(),o=W("dilation",t,e,n);return[r.conv1d(W("x",t,e,n),W("filter",t,e,n),a,s,i,o)]}case"Conv2D":{const a=W("strides",t,e,n),s=d0(t,e,n),i=W("dataFormat",t,e,n).toUpperCase(),o=W("dilations",t,e,n);return[r.conv2d(W("x",t,e,n),W("filter",t,e,n),[a[1],a[2]],s,i,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:a,pad:s,dataFormat:i,dilations:o,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:f}=VO(t,e,n);return[r.fused.conv2d({x:W("x",t,e,n),filter:W("filter",t,e,n),strides:[a[1],a[2]],pad:s,dataFormat:i,dilations:[o[1],o[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{const{stride:a,pad:s,dataFormat:i,dilations:o,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:f}=VO(t,e,n);return[r.fused.depthwiseConv2d({x:W("x",t,e,n),filter:W("filter",t,e,n),strides:[a[1],a[2]],pad:s,dataFormat:i,dilations:[o[1],o[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const a=W("outputShape",t,e,n),s=W("strides",t,e,n),i=d0(t,e,n);return[r.conv2dTranspose(W("x",t,e,n),W("filter",t,e,n),a,[s[1],s[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const a=W("strides",t,e,n),s=d0(t,e,n),i=W("dilations",t,e,n),o=W("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(W("input",t,e,n),W("filter",t,e,n),[a[1],a[2]],s,o,[i[1],i[2]])]}case"Conv3D":{const a=W("strides",t,e,n),s=W("pad",t,e,n),i=W("dataFormat",t,e,n).toUpperCase(),o=W("dilations",t,e,n);return[r.conv3d(W("x",t,e,n),W("filter",t,e,n),[a[1],a[2],a[3]],s,i,[o[1],o[2],o[3]])]}case"AvgPool":{const a=W("strides",t,e,n),s=W("pad",t,e,n),i=W("kernelSize",t,e,n);return[r.avgPool(W("x",t,e,n),[i[1],i[2]],[a[1],a[2]],s)]}case"MaxPool":{const a=W("strides",t,e,n),s=W("pad",t,e,n),i=W("kernelSize",t,e,n);return[r.maxPool(W("x",t,e,n),[i[1],i[2]],[a[1],a[2]],s)]}case"MaxPoolWithArgmax":{const a=W("strides",t,e,n),s=W("pad",t,e,n),i=W("kernelSize",t,e,n),o=W("includeBatchInIndex",t,e,n),{result:u,indexes:l}=r.maxPoolWithArgmax(W("x",t,e,n),[i[1],i[2]],[a[1],a[2]],s,o);return[u,l]}case"AvgPool3D":{const a=W("strides",t,e,n),s=W("pad",t,e,n),i=W("kernelSize",t,e,n);return[r.avgPool3d(W("x",t,e,n),[i[1],i[2],i[3]],[a[1],a[2],a[3]],s)]}case"MaxPool3D":{const a=W("strides",t,e,n),s=W("pad",t,e,n),i=W("kernelSize",t,e,n);return[r.maxPool3d(W("x",t,e,n),[i[1],i[2],i[3]],[a[1],a[2],a[3]],s)]}case"Dilation2D":{const a=W("strides",t,e,n),s=W("pad",t,e,n),i=W("dilations",t,e,n),o=a[1],u=a[2],l=i[1],c=i[2];return[r.dilation2d(W("x",t,e,n),W("filter",t,e,n),[o,u],s,[l,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hue=(t,e,n,r=ia)=>{switch(t.op){case"Fill":{const a=W("shape",t,e,n),s=W("dtype",t,e,n),i=W("value",t,e,n);return[r.fill(a,i,s)]}case"LinSpace":{const a=W("start",t,e,n),s=W("stop",t,e,n),i=W("num",t,e,n);return[r.linspace(a,s,i)]}case"Multinomial":{const a=W("logits",t,e,n),s=W("numSamples",t,e,n),i=W("seed",t,e,n);return[r.multinomial(a,s,i)]}case"OneHot":{const a=W("indices",t,e,n),s=W("depth",t,e,n),i=W("onValue",t,e,n),o=W("offValue",t,e,n),u=W("dtype",t,e,n);return[r.oneHot(a,s,i,o,u)]}case"Ones":return[r.ones(W("shape",t,e,n),W("dtype",t,e,n))];case"OnesLike":return[r.onesLike(W("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(W("shape",t,e,n),W("dtype",t,e,n),W("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(W("shape",t,e,n),W("minval",t,e,n),W("maxval",t,e,n),W("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(W("shape",t,e,n),W("minval",t,e,n),W("maxval",t,e,n),W("seed",t,e,n))];case"Range":{const a=W("start",t,e,n),s=W("stop",t,e,n),i=W("step",t,e,n);return[r.range(a,s,i,W("dtype",t,e,n))]}case"TruncatedNormal":{const a=W("shape",t,e,n),s=W("mean",t,e,n),i=W("stdDev",t,e,n),o=W("seed",t,e,n);return[r.truncatedNormal(a,s,i,W("dtype",t,e,n),o)]}case"Zeros":return[r.zeros(W("shape",t,e,n),W("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(W("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NS(t,e,n){const r=W("boxes",t,e,n),a=W("scores",t,e,n),s=W("maxOutputSize",t,e,n),i=W("iouThreshold",t,e,n),o=W("scoreThreshold",t,e,n),u=W("softNmsSigma",t,e,n);return{boxes:r,scores:a,maxOutputSize:s,iouThreshold:i,scoreThreshold:o,softNmsSigma:u}}const mue=async(t,e,n,r,a=ia)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:s,scores:i,maxOutputSize:o,iouThreshold:u,scoreThreshold:l,softNmsSigma:c}=NS(t,e,n),f=await a.image.nonMaxSuppressionWithScoreAsync(s,i,o,u,l,c);return[f.selectedIndices,f.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:s,scores:i,maxOutputSize:o,iouThreshold:u,scoreThreshold:l}=NS(t,e,n),c=W("padToMaxOutputSize",t,e,n),f=await a.image.nonMaxSuppressionPaddedAsync(s,i,o,u,l,c);return[f.selectedIndices,f.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:s,scores:i,maxOutputSize:o,iouThreshold:u,scoreThreshold:l}=NS(t,e,n);return[await a.image.nonMaxSuppressionAsync(s,i,o,u,l)]}case"Where":{const s=a.cast(W("condition",t,e,n),"bool"),i=[await a.whereAsync(s)];return s.dispose(),i}case"ListDiff":return a.setdiff1dAsync(W("x",t,e,n),W("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gue=(t,e,n,r=ia)=>{switch(t.op){case"LowerBound":{const a=W("sortedSequence",t,e,n),s=W("values",t,e,n);return[r.lowerBound(a,s)]}case"TopKV2":{const a=W("x",t,e,n),s=W("k",t,e,n),i=W("sorted",t,e,n),o=r.topk(a,s,i);return[o.values,o.indices]}case"UpperBound":{const a=W("sortedSequence",t,e,n),s=W("values",t,e,n);return[r.upperBound(a,s)]}case"Unique":{const a=W("x",t,e,n),s=r.unique(a);return[s.values,s.indices]}case"UniqueV2":{const a=W("x",t,e,n),s=W("axis",t,e,n),i=r.unique(a,s);return[i.values,i.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vue=(t,e,n,r=ia)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const a=W("default",t,e,n);return[Jr(t.name,e,n)||a];case"Placeholder":return[Jr(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=W("x",t,e,n);return[Go(c)]}case"IdentityN":return W("x",t,e,n).map(c=>Go(c));case"Snapshot":const s=W("x",t,e,n);return[Go(s)];case"Shape":return[r.tensor1d(W("x",t,e,n).shape,"int32")];case"ShapeN":return W("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(W("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(W("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const i=W("x",t,e,n),o=W("data",t,e,n),u=W("message",t,e,n),l=W("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let c=0;c<o.length;c++)console.log(Array.prototype.slice.call(o[c].dataSync()).slice(0,l));return[i];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yue{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=Ct(0),this.tensorMap=new Map,Lr(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ct(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(a=>a.dispose()),this.tensorMap.clear(),Te(()=>{const a=bi(n),s=r.length,i=a.length;Y(s===i,()=>`The number of elements doesn't match, keys has ${s} elements, the values has ${i} elements.`);for(let o=0;o<s;o++){const u=r[o],l=a[o];Lr(l),this.tensorMap.set(u,l)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return Te(()=>{const a=[];for(let s=0;s<r.length;s++){const i=r[s],o=this.findWithDefault(i,n);a.push(o)}return ws(a)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bue=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const a=r.getHashTableHandleByName(t.name);if(a!=null)return[a];{const s=W("keyDType",t,e,n),i=W("valueDType",t,e,n),o=new yue(s,i);return r.addHashTable(t.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const a=W("tableHandle",t,e,n,r),s=W("keys",t,e,n),i=W("values",t,e,n);return[await r.getHashTableById(a.id).import(s,i)]}case"LookupTableFind":case"LookupTableFindV2":{const a=W("tableHandle",t,e,n,r),s=W("keys",t,e,n),i=W("defaultValue",t,e,n);return[await r.getHashTableById(a.id).find(s,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const a=W("tableHandle",t,e,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wue=(t,e,n,r=ia)=>{switch(t.op){case"ResizeBilinear":{const a=W("images",t,e,n),s=W("size",t,e,n),i=W("alignCorners",t,e,n),o=W("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(a,[s[0],s[1]],i,o)]}case"ResizeNearestNeighbor":{const a=W("images",t,e,n),s=W("size",t,e,n),i=W("alignCorners",t,e,n),o=W("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(a,[s[0],s[1]],i,o)]}case"CropAndResize":{const a=W("image",t,e,n),s=W("boxes",t,e,n),i=W("boxInd",t,e,n),o=W("cropSize",t,e,n),u=W("method",t,e,n),l=W("extrapolationValue",t,e,n);return[r.image.cropAndResize(a,s,i,o,u,l)]}case"ImageProjectiveTransformV3":{const a=W("images",t,e,n),s=W("transforms",t,e,n),i=W("outputShape",t,e,n),o=W("fillValue",t,e,n),u=W("interpolation",t,e,n),l=W("fillMode",t,e,n);return[r.image.transform(a,s,u.toLowerCase(),l.toLowerCase(),o,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xue=(t,e,n,r=ia)=>{switch(t.op){case"Equal":return[r.equal(W("a",t,e,n),W("b",t,e,n))];case"NotEqual":return[r.notEqual(W("a",t,e,n),W("b",t,e,n))];case"Greater":return[r.greater(W("a",t,e,n),W("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(W("a",t,e,n),W("b",t,e,n))];case"Less":return[r.less(W("a",t,e,n),W("b",t,e,n))];case"LessEqual":return[r.lessEqual(W("a",t,e,n),W("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(W("a",t,e,n),W("b",t,e,n))];case"LogicalNot":return[r.logicalNot(W("a",t,e,n))];case"LogicalOr":return[r.logicalOr(W("a",t,e,n),W("b",t,e,n))];case"Select":case"SelectV2":return[r.where(W("condition",t,e,n),W("a",t,e,n),W("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(W("a",t,e,n),W("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sue=(t,e,n,r=ia)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(W("a",t,e,n),W("b",t,e,n),W("transposeA",t,e,n),W("transposeB",t,e,n))];case"Einsum":return[r.einsum(W("equation",t,e,n),...W("tensors",t,e,n))];case"Transpose":return[r.transpose(W("x",t,e,n),W("perm",t,e,n))];case"_FusedMatMul":const[a,s]=W("fusedOps",t,e,n),i=a==="biasadd",o=s==="prelu",u=W("numArgs",t,e,n),l=W("leakyreluAlpha",t,e,n);if(i){if(o&&u!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&u!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,f]=W("args",t,e,n);return[r.fused.matMul({a:W("a",t,e,n),b:W("b",t,e,n),transposeA:W("transposeA",t,e,n),transposeB:W("transposeB",t,e,n),bias:c,activation:s,preluActivationWeights:f,leakyreluAlpha:l})];case"MatrixBandPart":return[r.linalg.bandPart(W("a",t,e,n),W("numLower",t,e,n),W("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nue=(t,e,n,r=ia)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(W("x",t,e,n),W("axis",t,e,n),W("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(W("x",t,e,n),W("mean",t,e,n),W("variance",t,e,n),W("offset",t,e,n),W("scale",t,e,n),W("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(W("x",t,e,n),W("mean",t,e,n),W("variance",t,e,n),W("offset",t,e,n),W("scale",t,e,n),W("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(W("x",t,e,n),W("radius",t,e,n),W("bias",t,e,n),W("alpha",t,e,n),W("beta",t,e,n))];case"Softmax":return[r.softmax(W("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(W("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cue=(t,e,n,r=ia)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:a,outputDenseValues:s}=r.raggedGather(W("paramsNestedSplits",t,e,n),W("paramsDenseValues",t,e,n),W("indices",t,e,n),W("outputRaggedRank",t,e,n));return a.concat(s)}case"RaggedRange":{const{rtNestedSplits:a,rtDenseValues:s}=r.raggedRange(W("starts",t,e,n),W("limits",t,e,n),W("splits",t,e,n));return[a,s]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(W("shape",t,e,n),W("values",t,e,n),W("defaultValue",t,e,n),W("rowPartitionTensors",t,e,n),W("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eue=(t,e,n,r=ia)=>{switch(t.op){case"Max":{const o=W("axis",t,e,n),u=W("keepDims",t,e,n);return[r.max(W("x",t,e,n),o,u)]}case"Mean":{const o=W("axis",t,e,n),u=W("keepDims",t,e,n);return[r.mean(W("x",t,e,n),o,u)]}case"Min":{const o=W("axis",t,e,n),u=W("keepDims",t,e,n);return[r.min(W("x",t,e,n),o,u)]}case"Sum":{const o=W("axis",t,e,n),u=W("keepDims",t,e,n);return[r.sum(W("x",t,e,n),o,u)]}case"All":{const o=W("axis",t,e,n),u=W("keepDims",t,e,n);return[r.all(W("x",t,e,n),o,u)]}case"Any":{const o=W("axis",t,e,n),u=W("keepDims",t,e,n);return[r.any(W("x",t,e,n),o,u)]}case"ArgMax":{const o=W("axis",t,e,n);return[r.argMax(W("x",t,e,n),o)]}case"ArgMin":{const o=W("axis",t,e,n);return[r.argMin(W("x",t,e,n),o)]}case"Prod":{const o=W("axis",t,e,n),u=W("keepDims",t,e,n);return[r.prod(W("x",t,e,n),o,u)]}case"Cumprod":{const o=W("axis",t,e,n),u=W("exclusive",t,e,n),l=W("reverse",t,e,n);return[r.cumprod(W("x",t,e,n),o,u,l)]}case"Cumsum":{const o=W("axis",t,e,n),u=W("exclusive",t,e,n),l=W("reverse",t,e,n);return[r.cumsum(W("x",t,e,n),o,u,l)]}case"Bincount":const a=W("x",t,e,n),s=W("weights",t,e,n),i=W("size",t,e,n);return[r.bincount(a,s,i)];case"DenseBincount":{const o=W("x",t,e,n),u=W("weights",t,e,n),l=W("size",t,e,n),c=W("binaryOutput",t,e,n);return[r.denseBincount(o,u,l,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tue=(t,e,n,r=ia)=>{switch(t.op){case"ConcatV2":case"Concat":{const a=W("n",t,e,n),s=W("axis",t,e,n);let i=W("tensors",t,e,n);return i=i.slice(0,a),[r.concat(i,s)]}case"Gather":{const a=W("x",t,e,n),s=W("indices",t,e,n);return[r.gather(a,r.cast(s,"int32"),0)]}case"GatherV2":{const a=W("axis",t,e,n),s=W("batchDims",t,e,n),i=W("x",t,e,n),o=W("indices",t,e,n);return[r.gather(i,r.cast(o,"int32"),a,s)]}case"Reverse":{const a=W("dims",t,e,n),s=[];for(let o=0;o<a.length;o++)a[o]&&s.push(o);const i=W("x",t,e,n);return[r.reverse(i,s)]}case"ReverseV2":{const a=W("axis",t,e,n),s=W("x",t,e,n);return[r.reverse(s,a)]}case"Slice":{const a=W("begin",t,e,n),s=W("size",t,e,n);return[r.slice(W("x",t,e,n),a,s)]}case"StridedSlice":{const a=W("begin",t,e,n),s=W("end",t,e,n),i=W("strides",t,e,n),o=W("beginMask",t,e,n),u=W("endMask",t,e,n),l=W("ellipsisMask",t,e,n),c=W("newAxisMask",t,e,n),f=W("shrinkAxisMask",t,e,n),d=W("x",t,e,n);return[r.stridedSlice(d,a,s,i,o,u,l,c,f)]}case"Pack":return Te(()=>{const a=W("axis",t,e,n),s=W("tensors",t,e,n),i=s[0].shape,o=r.squeeze(s[0]).shape,u=s.map(l=>{const c=fn(l.shape,i);if(!c&&!fn(r.squeeze(l).shape,o))throw new Error("the input tensors shape does not match");return c?l:r.reshape(l,i)});return[r.stack(u,a)]});case"Unpack":{const a=W("axis",t,e,n),s=W("tensor",t,e,n);return r.unstack(s,a)}case"Tile":{const a=W("reps",t,e,n);return[r.tile(W("x",t,e,n),a)]}case"Split":case"SplitV":{const a=W("axis",t,e,n),s=W("numOrSizeSplits",t,e,n),i=W("x",t,e,n);return r.split(i,s,a)}case"ScatterNd":{const a=W("indices",t,e,n),s=W("values",t,e,n),i=W("shape",t,e,n);return[r.scatterND(a,s,i)]}case"GatherNd":{const a=W("x",t,e,n),s=W("indices",t,e,n);return[r.gatherND(a,s)]}case"SparseToDense":{const a=W("sparseIndices",t,e,n),s=W("outputShape",t,e,n),i=W("sparseValues",t,e,n),o=W("defaultValue",t,e,n);return[r.sparseToDense(a,i,s,i.dtype===o.dtype?o:r.cast(o,i.dtype))]}case"TensorScatterUpdate":{const a=W("indices",t,e,n),s=W("values",t,e,n),i=W("tensor",t,e,n);return[r.tensorScatterUpdate(i,a,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Due=(t,e,n,r=ia)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:a,outputValues:s,emptyRowIndicator:i,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(W("indices",t,e,n),W("values",t,e,n),W("denseShape",t,e,n),W("defaultValue",t,e,n));return[a,s,i,o]}case"SparseReshape":{const{outputIndices:a,outputShape:s}=r.sparse.sparseReshape(W("inputIndices",t,e,n),W("inputShape",t,e,n),W("newShape",t,e,n));return[a,s]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(W("data",t,e,n),W("indices",t,e,n),W("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(W("data",t,e,n),W("indices",t,e,n),W("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aue=(t,e,n,r=ia)=>{switch(t.op){case"FFT":return[r.fft(W("x",t,e,n))];case"IFFT":return[r.ifft(W("x",t,e,n))];case"RFFT":return[r.rfft(W("x",t,e,n))];case"IRFFT":return[r.irfft(W("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ue=(t,e,n,r=ia)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(W("input",t,e,n),W("pattern",t,e,n),W("rewrite",t,e,n),W("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:a,nGramsSplits:s}=r.string.stringNGrams(W("data",t,e,n),W("dataSplits",t,e,n),W("separator",t,e,n),W("nGramWidths",t,e,n),W("leftPad",t,e,n),W("rightPad",t,e,n),W("padWidth",t,e,n),W("preserveShortSequences",t,e,n));return[a,s]}case"StringSplit":{const{indices:a,values:s,shape:i}=r.string.stringSplit(W("input",t,e,n),W("delimiter",t,e,n),W("skipEmpty",t,e,n));return[a,s,i]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(W("input",t,e,n),W("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kue=(t,e,n,r=ia)=>{switch(t.op){case"Cast":return[r.cast(W("x",t,e,n),W("dtype",t,e,n))];case"ExpandDims":{const a=W("axis",t,e,n);return[r.expandDims(W("x",t,e,n),a)]}case"Squeeze":{const a=W("axis",t,e,n);return[r.squeeze(W("x",t,e,n),a)]}case"Reshape":return[r.reshape(W("x",t,e,n),W("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(W("x",t,e,n),W("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(W("x",t,e,n),W("padding",t,e,n),W("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(W("x",t,e,n),W("padding",t,e,n),W("constantValue",t,e,n))];case"SpaceToBatchND":{const a=W("blockShape",t,e,n),s=W("paddings",t,e,n);return[r.spaceToBatchND(W("x",t,e,n),a,s)]}case"BatchToSpaceND":{const a=W("blockShape",t,e,n),s=W("crops",t,e,n);return[r.batchToSpaceND(W("x",t,e,n),a,s)]}case"DepthToSpace":{const a=W("blockSize",t,e,n),s=W("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(W("x",t,e,n),a,s)]}case"BroadcastTo":return[r.broadcastTo(W("x",t,e,n),W("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(W("s0",t,e,n),W("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jO(t,e,n,r,a=Te){const s=((i,o,u)=>{switch(i.category){case"arithmetic":return a(()=>sue(i,o,u));case"basic_math":return a(()=>iue(i,o,u));case"control":return due(i,o,u);case"convolution":return a(()=>pue(i,o,u));case"creation":return a(()=>hue(i,o,u));case"dynamic":return mue(i,o,u);case"evaluation":return a(()=>gue(i,o,u));case"image":return a(()=>wue(i,o,u));case"graph":return a(()=>vue(i,o,u));case"logical":return a(()=>xue(i,o,u));case"matrices":return a(()=>Sue(i,o,u));case"normalization":return a(()=>Nue(i,o,u));case"ragged":return a(()=>Cue(i,o,u));case"reduction":return a(()=>Eue(i,o,u));case"slice_join":return a(()=>Tue(i,o,u));case"sparse":return a(()=>Due(i,o,u));case"spectral":return a(()=>Aue(i,o,u));case"string":return a(()=>$ue(i,o,u));case"transformation":return a(()=>kue(i,o,u));case"hash_table":return bue(i,o,u,r);case"custom":const l=T5(i.op);if(l&&l.customExecutor)return l.customExecutor(new aue(i,o,u));throw TypeError(`Custom op ${i.op} is not registered.`);default:throw TypeError(`Unknown op '${i.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Tc(s)?s.then(i=>[].concat(i)):[].concat(s)}class HO{constructor(e={},n={},r={},a={},s){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.parseNodeNameCache=s,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GO(t,e,n,r){const a=new Set,s=[];let i=null,o=null;const u=new Set,l=new Set(Object.keys(t).map(d=>ls(d)[0]));r=r||[];const c=new Set(r.map(d=>ls(d.name)[0])),f=[...e];for(;f.length>0;){const d=f.pop();if((fc(d)||Bue(d)||Lue(d))&&i==null&&(i=d,o=i.children.map(h=>h.name).filter(h=>a.has(h))),a.add(d.name),n[d.name]==null&&!l.has(d.name)&&!c.has(d.name)){if(d.inputs.length===0){s.push(d.name);continue}d.inputs.forEach(h=>{u.has(h.name)||(u.add(h.name),f.push(h))})}}return{inputs:t,outputs:e,usedNodes:a,missingInputs:s,dynamicNode:i,syncInputs:o}}function Iue(t,e){const{usedNodes:n,inputs:r}=e,a=Object.keys(r).map(y=>ls(y)[0]).map(y=>t.nodes[y]),s=t.initNodes||[],i=y=>n.has(typeof y=="string"?y:y.name);function o(y){return[...new Map(y.map(b=>[b.name,b])).values()]}const u=o([...a,...t.weights,...s]).filter(i),l=o([...u,...Object.values(t.nodes)]).filter(i),c=new Map(l.map(y=>[y.name,y])),f={};for(const y of l){f[y.name]=f[y.name]||0;for(const b of y.children)i(b)||(f[b.name]=Number.POSITIVE_INFINITY),f[b.name]=(f[b.name]||0)+1}const d=Object.entries(f).filter(([,y])=>y===0).map(([y])=>y),h=[...d];for(;d.length>0;){const y=d.pop(),b=c.get(y);for(const x of b.children.filter(i))--f[x.name]===0&&(h.push(x.name),d.push(x.name))}const m=h.map(y=>c.get(y)),v=_ue(m,u);return Oue(v,u),v}function _ue(t,e){const n=new Map(t.map(i=>[i.name,i])),r=e.map(i=>i.name),a=new Set(r);for(;r.length>0;){const i=r.pop(),o=n.get(i);for(const u of o.children)!n.has(u.name)||a.has(u.name)||(a.add(u.name),r.push(u.name))}return t.filter(i=>a.has(i.name))}class xy extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function Oue(t,e){const n=new Map(t.map((o,u)=>[o.name,u])),r=new Set(e.map(o=>o.name)),a=o=>r.has(typeof o=="string"?o:o.name),s=new Set(t.map(o=>o.name)),i=o=>s.has(typeof o=="string"?o:o.name);for(const o of t){for(const u of o.children.filter(i)){if(!n.has(u.name))throw new xy(`Child ${u.name} of node ${o.name} is unreachable.`);if(n.get(o.name)>n.get(u.name))throw new xy(`Node ${o.name} is scheduled to run after its child ${u.name}.`)}if(!a(o))for(const u of o.inputs){if(!n.has(u.name))throw new xy(`Input ${u.name} of node ${o.name} is unreachable.`);if(n.get(u.name)>n.get(o.name))throw new xy(`Node ${o.name} is scheduled to run before its input ${u.name}.`)}}}function Fue(t){const e=new Map(t.map((o,u)=>[o.name,u])),n=Number.MAX_SAFE_INTEGER,r=t.map((o,u)=>fc(o)?n:u),a=o=>{const u=r[e.get(o.name)];return u??-1},s=t.map((o,u)=>o.children.map(a).reduce((l,c)=>Math.max(l,c),r[u])),i=new Map;for(let o=0;o<t.length;++o){const u=s[o];if(u===n)continue;const l=t[o],c=t[u];i.has(c.name)||i.set(c.name,[]),i.get(c.name).push(l)}return i}const Rue=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Mue=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Pue=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function fc(t){return Rue.has(t.op)}function Bue(t){return Mue.has(t.op)}function Lue(t){return Pue.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z0{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(a=>a.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new z0(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(s=>s.name).sort(),a=n.map(s=>s.name).sort();return r.join(this.SEPARATOR)+"--"+a.join(this.SEPARATOR)}compile(e,n){const r=GO(e,n,this.weightMap,this._initNodes),{missingInputs:a,dynamicNode:s,syncInputs:i}=r;if(s!=null)throw new Error(`This execution contains the node '${s.name}', which has the dynamic op '${s.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${i}]`);if(a.length>0){const l=n.map(f=>f.name),c=Object.keys(e);throw new Error(`Cannot compute the outputs [${l}] from the provided inputs [${c}]. Missing the following inputs: [${a}]`)}const o=Iue(this.graph,r),u=Fue(o);return{orderedNodes:o,nodeLiveUntilMap:u}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return Lr(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const a=r.map(d=>this.graph.nodes[ls(d)[0]]),s=n.map(d=>ls(d)[0]),i=new Set(s);let o=s.map(d=>this.graph.nodes[d]);o.length===0&&(o=this._outputs);const u=this.getCompilationKey(a,o);let l=this.compiledMap.get(u);l==null&&(l=this.compile(e,o),this.compiledMap.set(u,l));try{this.keepIntermediateTensors=$e().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const c={},f={};return Te(()=>{const d=new HO(this.weightMap,c,f,this.functionExecutorMap,this.parseNodeNameCache),h=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(b=>{const[x,w]=ls(b,d),N=[];N[w]=e[b],h[x]=N,this.keepIntermediateTensors&&(this.clonedTensorsMap[x]=this.cloneTensorList(N))});const m=this.getFrozenTensorIds(h),{orderedNodes:v,nodeLiveUntilMap:y}=l;for(const b of v){if(h[b.name])continue;const x=jO(b,h,d,this._resourceManager);if(Tc(x))throw new Error(`The execution of the op '${b.op}' returned a promise. Please use model.executeAsync() instead.`);h[b.name]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[b.name]=this.cloneTensorList(x)),this.checkTensorForDisposalWithNodeLiveUntilInfo(b,h,d,m,i,y.get(b.name))}return this.parent==null&&d.dispose(m),n.map(b=>Jr(b,h,d))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(a=>a.id)));return new Set(n)}checkTensorForDisposal(e,n,r,a,s,i,o){if(!(fc(n)||i.has(e))){for(const u of r[e])u!=null&&(o[u.id]=(o[u.id]||0)+n.children.length);for(const u of n.inputs){if(fc(u))continue;const l=zO(u.name,r,a);if(l!=null)for(const c of l){if(!c||c.kept||s.has(c.id))continue;const f=o[c.id];f===1?(c.dispose(),delete o[c.id]):f!=null&&o[c.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,a,s,i){function o(u){return fc(u)||s.has(u.name)}if(!(fc(e)||i==null))for(const u of i){if(o(u))continue;const l=zO(u.name,n,r);for(const c of l)!c||c.kept||a.has(c.id)||c.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,a={},s={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=$e().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const i=new HO(this.weightMap,a,s,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const o=await this.executeWithControlFlow(e,i,n,r),u=n.map(d=>Jr(d,o,i)),l=u.map(d=>d.id),c=Object.keys(e).map(d=>e[d].id),f=new Set([...l,...c,...this.weightIds]);return Object.values(o).forEach(d=>{d.forEach(h=>{h&&!h.isDisposed&&!f.has(h.id)&&h.dispose()})}),this.parent==null&&i.dispose(f),u}async executeFunctionAsync(e,n,r){const a=e.reduce((s,i,o)=>(s[this.inputs[o].name]=i,s),{});return this._executeAsync(a,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,a){const s=Object.keys(e),i=s.map(N=>this.graph.nodes[ls(N)[0]]),o=r.map(N=>ls(N)[0]),u=new Set(o);let l=o.map(N=>this.graph.nodes[N]);l.length===0&&(l=this._outputs);const{usedNodes:c,missingInputs:f,dynamicNode:d,syncInputs:h}=GO(e,l,this.weightMap,this._initNodes),m=[...i,...this.graph.weights,...this._initNodes||[]].map(N=>({node:N,contexts:n.currentContext})),v=Object.assign({},this.weightMap);Object.keys(e).forEach(N=>{const[C,E]=ls(N),$=[];$[E]=e[N],v[C]=$});const y={},b=this.getFrozenTensorIds(v),x={};for(;m.length>0;){const N=this.processStack(i,m,n,v,x,b,u,y,c);await Promise.all(N)}d==null&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const w=l.filter(N=>!fc(N)&&!Jr(N.name,v,n)).map(N=>N.name);if(w.length>0){let N="";throw d!=null&&(N=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${w}] from the provided inputs [${s}]. Consider providing the following inputs: [${f}]. ${N}`)}return v}processStack(e,n,r,a,s,i,o,u,l){const c=[];for(;n.length>0;){const f=n.pop();r.currentContext=f.contexts;let d="";if(f.node.op==="Enter"&&W("isConstant",f.node,a,r)&&([d]=Ho(f.node.name,r)),a[f.node.name]==null){const h=jO(f.node,a,r,this._resourceManager);d||([d]=Ho(f.node.name,r));const m=r.currentContext;Tc(h)?c.push(h.then(v=>(a[d]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(v)),r.currentContext=m,this.checkTensorForDisposal(d,f.node,a,r,i,o,u),this.processChildNodes(f.node,n,r,a,s,l),v))):(a[d]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(h)),this.checkTensorForDisposal(d,f.node,a,r,i,o,u),this.processChildNodes(f.node,n,r,a,s,l))}else this.processChildNodes(f.node,n,r,a,s,l)}return c}processChildNodes(e,n,r,a,s,i){e.children.forEach(o=>{const[u]=Ho(o.name,r);s[u]||!i.has(o.name)||(o.op==="Merge"?o.inputNames.some(l=>!!Jr(l,a,r))&&(s[u]=!0,n.push({contexts:r.currentContext,node:o})):o.inputNames.every(l=>!!Jr(l,a,r))&&(s[u]=!0,n.push({contexts:r.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[a]=ls(n),s=this.graph.nodes[a];if(s.attrParams.shape&&s.attrParams.shape.value){const i=s.attrParams.shape.value,o=i.length===r.shape.length&&r.shape.every((u,l)=>i[l]===-1||i[l]===u);Y(o,()=>`The shape of dict['${s.name}'] provided in model.execute(dict) must be [${i}], but was [${r.shape}]`)}s.attrParams.dtype&&s.attrParams.dtype.value&&Y(r.dtype===s.attrParams.dtype.value,()=>`The dtype of dict['${s.name}'] provided in model.execute(dict) must be ${s.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const a={};for(const s in e){const i=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[s];i!=null?a[i.name]=e[s]:a[s]=e[s]}return a}checkInputs(e){const n=Object.keys(e).filter(r=>{const[a]=ls(r);return this.graph.nodes[a]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,a;const s=(a=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||a===void 0?void 0:a[n];return s!=null?s.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=ls(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class zue{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wue="?tfjs-format=file",Uue="model.json";class que{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=Hz){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new zue}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Tc(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await gL(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let a=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const s=this.artifacts.userDefinedMetadata;s.signature!=null&&(a=s.signature),s.structuredOutputKeys!=null&&(this.structuredOutputKeys=s.structuredOutputKeys)}if(this.signature=a,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new z0(WO.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const s=WO.Instance.transformGraph(e.modelInitializer);this.initializer=new z0(s),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof er?[e]:e,r={};return n.forEach((a,s)=>r[this.structuredOutputKeys[s]]=a),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof er)&&!Array.isArray(e)){const s=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(s!=null)for(const i in s){const o=s[i];o.resourceId!=null&&(e[i]=this.resourceIdToCapturedInput[o.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let a=0;return this.inputNodes.reduce((s,i)=>{var o,u,l;const c=(l=(u=(o=this.signature)===null||o===void 0?void 0:o.inputs)===null||u===void 0?void 0:u[i])===null||l===void 0?void 0:l.resourceId;return c!=null?s[i]=this.resourceIdToCapturedInput[c]:s[i]=e[a++],s},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let a=0;a<r.length;a++){const s=r[a],i=n[s];this.resourceIdToCapturedInput[i.resourceId]=e[a]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&rn(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function KO(t,e={},n=Hz){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=Vue(t));const r=new que(t,e,n);return await r.load(),r}function Vue(t){return t.endsWith("/")||(t=t+"/"),`${t}${Uue}${Wue}`}/**
    * @license
    * Copyright 2021 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */function Dh(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(l){try{u(r.next(l))}catch(c){s(c)}}function o(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?a(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(i,o)}u((r=r.apply(t,[])).next())})}function Ah(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(c[0]===6&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(f){c=[6,f],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var $5=function(t){for(var e=[],n=0,r=t;n<r.length;n++){var a=r[n];e.push(a)}return e},XO=function(){return function(){this.parent=null,this.children={},this.end=!1,this.word=[[],0,0]}}(),jue=function(){function t(){this.root=new XO}return t.prototype.insert=function(e,n,r){for(var a=this.root,s=$5(e),i=0;i<s.length;i++)a.children[s[i]]||(a.children[s[i]]=new XO,a.children[s[i]].parent=a,a.children[s[i]].word[0]=a.word[0].concat(s[i])),a=a.children[s[i]],i===s.length-1&&(a.end=!0,a.word[1]=n,a.word[2]=r)},t.prototype.commonPrefixSearch=function(e){for(var n=[],r=this.root.children[e[0]],a=0;a<e.length&&r;a++)r.end&&n.push(r.word),r=r.children[e[a+1]];return n.length||n.push([[e[0]],0,0]),n},t}(),YO="";function Hue(t){var e=t.normalize("NFKC");return e.length>0?YO+e.replace(/ /g,YO):e}var Gue=6,Kue=function(){function t(e,n){n===void 0&&(n=Gue),this.vocabulary=e,this.reservedSymbolsCount=n,this.trie=new jue;for(var r=this.reservedSymbolsCount;r<this.vocabulary.length;r++)this.trie.insert(this.vocabulary[r][0],this.vocabulary[r][1],r)}return t.prototype.encode=function(e){var n=[],r=[],a=[];e=Hue(e);for(var s=$5(e),i=0;i<=s.length;i++)n.push({}),r.push(0),a.push(0);for(i=0;i<s.length;i++)for(var o=this.trie.commonPrefixSearch(s.slice(i)),u=0;u<o.length;u++){var l=o[u],c={key:l[0],score:l[1],index:l[2]};n[i+(f=l[0].length)][i]==null&&(n[i+f][i]=[]),n[i+f][i].push(c)}for(var f=0;f<=s.length;f++)for(var d in n[f]){var h=n[f][d];for(u=0;u<h.length;u++){var m=h[u],v=m.score+a[f-m.key.length];(a[f]===0||v>=a[f])&&(a[f]=v,r[f]=h[u].index)}}for(var y=[],b=r.length-1;b>0;)y.push(r[b]),b-=this.vocabulary[r[b]][0].length;var x=[],w=!1;for(i=0;i<y.length;i++){var N=y[i];w&&N===0||x.push(N),w=N===0}return x.reverse()},t}();function Xue(t){return Dh(this,void 0,void 0,function(){return Ah(this,function(e){switch(e.label){case 0:return[4,dZ(t)];case 1:return[2,e.sent().json()]}})})}var Yue="https://storage.googleapis.com/tfjs-models/savedmodel/universal_sentence_encoder";function Que(t){return Dh(this,void 0,void 0,function(){var e;return Ah(this,function(n){switch(n.label){case 0:return[4,(e=new Jue).load(t)];case 1:return n.sent(),[2,e]}})})}var Jue=function(){function t(){}return t.prototype.loadModel=function(e){return Dh(this,void 0,void 0,function(){return Ah(this,function(n){return[2,e?KO(e):KO("https://tfhub.dev/tensorflow/tfjs-model/universal-sentence-encoder-lite/1/default/1",{fromTFHub:!0})]})})},t.prototype.load=function(e){return e===void 0&&(e={}),Dh(this,void 0,void 0,function(){var n,r,a;return Ah(this,function(s){switch(s.label){case 0:return[4,Promise.all([this.loadModel(e.modelUrl),Xue(e.vocabUrl||Yue+"/vocab.json")])];case 1:return n=s.sent(),r=n[0],a=n[1],this.model=r,this.tokenizer=new Kue(a),[2]}})})},t.prototype.embed=function(e){return Dh(this,void 0,void 0,function(){var n,r,a,s,i,o,u,l,c=this;return Ah(this,function(f){switch(f.label){case 0:for(typeof e=="string"&&(e=[e]),n=e.map(function(d){return c.tokenizer.encode(d)}),r=n.map(function(d,h){return d.map(function(m,v){return[h,v]})}),a=[],s=0;s<r.length;s++)a=a.concat(r[s]);return i=ld(a,[a.length,2],"int32"),o=ca(sl(n),"int32"),u={indices:i,values:o},[4,this.model.executeAsync(u)];case 1:return l=f.sent(),i.dispose(),o.dispose(),[2,l]}})})},t}();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k5={kernelName:zb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,Zd(ot(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zue={kernelName:dm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Pn(ot(n,"float32")),a=na(ft(Ct(1),r));return jn(bt(t,a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ele={kernelName:pm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=na(ft(Pn(ot(n,"float32")),1));return bt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tle={kernelName:Yd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ht(n.shape,r.shape);return{a:()=>{let o=t;const u=_r(n.shape,a);return u.length>0&&(o=ht(o,u)),be(o,n.shape)},b:()=>{let o=t;const u=_r(r.shape,a);return u.length>0&&(o=ht(o,u)),be(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nle={kernelName:Wb,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,a)=>{n[a]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rle={kernelName:Ub,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mn(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ale={kernelName:qb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mn(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sle={kernelName:hm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,na(ft(Ct(1),Pn(ot(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ile={kernelName:mm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=na(Ve(Ct(1),Pn(ot(n,"float32"))));return bt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ole={kernelName:ym,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ht(n.shape,r.shape);return{a:()=>{const o=Ve(Pn(n),Pn(r));let u=ge(t,bt(r,o));const l=_r(n.shape,a);return l.length>0&&(u=ht(u,l)),be(u,n.shape)},b:()=>{const o=Ve(Pn(n),Pn(r));let u=jn(ge(t,bt(n,o)));const l=_r(r.shape,a);return l.length>0&&(u=ht(u,l)),be(u,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ule={kernelName:gm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,Ve(Pn(ot(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lle={kernelName:vm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,ft(Ct(1),Pn(ot(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cle(t,e,n,r,a,s){const i=J(t,"dy","avgPool3dGrad"),o=J(e,"input","avgPool3dGrad");let u=i,l=o,c=!1;o.rank===4&&(c=!0,u=be(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),l=be(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Y(u.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),Y(l.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${l.rank}.`),Ma("avgPool3dGrad",a,s);const f={dy:u,input:l},d={filterSize:n,strides:r,pad:a,dimRoundingMode:s},h=me.runKernel(_E,f,d);return c?be(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const fle=de({avgPool3dGrad_:cle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dle={kernelName:jb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:a,strides:s,pad:i,dimRoundingMode:o}=n;return{x:()=>fle(t,r,a,s,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ple(t,e,n,r,a){const s=J(t,"dy","avgPoolGrad"),i=J(e,"input","avgPoolGrad");Y(i.rank===s.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${s.rank})`);let o=i,u=s,l=!1;i.rank===3&&(l=!0,o=be(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=be(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Y(u.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),Y(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const c={dy:u,input:o},f={filterSize:n,strides:r,pad:a},d=me.runKernel(IE,c,f);return l?be(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const hle=de({avgPoolGrad_:ple});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mle={kernelName:Vb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:a,strides:s,pad:i}=n;return{x:()=>hle(t,r,a,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gle={kernelName:Hb,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,a]=e,{transposeA:s,transposeB:i}=n;return!s&&!i?{a:()=>nn(t,a,!1,!0),b:()=>nn(r,t,!0,!1)}:!s&&i?{a:()=>nn(t,a,!1,!1),b:()=>nn(t,r,!0,!1)}:s&&!i?{a:()=>nn(a,t,!1,!0),b:()=>nn(r,t,!1,!1)}:{a:()=>nn(a,t,!0,!0),b:()=>nn(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vle={kernelName:Gb,gradFunc:(t,e,n)=>{const{blockShape:r,crops:a}=n;return{x:()=>ew(t,r,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yle={kernelName:JJ,gradFunc:(t,e,n)=>{const r=n,a=r.inputShape,s=r.shape,i=Array.from(s);for(let u=a.length-1;u>=0;u--)if(a[u]===s[u])i[u]=1;else if(a[u]!==1)throw new Error(`broadcastTo(): [${a}] cannot be broadcast to [${s}].`);const o=[];for(let u=0;u<i.length;u++)i[u]>1&&o.push(u);return{x:()=>ht(t,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ble={kernelName:bm,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wle={kernelName:wm,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xle={kernelName:xm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:a,clipValueMax:s}=n;return{x:()=>pa(No(El(r,a),Vc(r,s)),t,mn(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sle={kernelName:Xb,inputsToSave:["x"],gradFunc:k5.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nle={kernelName:Yb,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(u=>u.shape),{axis:a}=n,s=sn(a,e[0].shape)[0],i=r.map(u=>u[s]);return hs(t,i,s).map(u=>()=>u)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cle={kernelName:Qb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,a]=e,{dilations:s,strides:i,pad:o,dataFormat:u}=n;return Y(ul(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>zT(r.shape,t,a,i,o,u),filter:()=>hD(r,t,a.shape,i,o,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ele={kernelName:Jb,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,a]=e,{strides:s,pad:i,dataFormat:o,dimRoundingMode:u}=n;return{dy:()=>ll(t,a,s,i,o,1,u),filter:()=>hD(t,r,a.shape,s,i,o,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tle(t,e,n,r,a){let s=t;t.rank===4&&(s=be(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let i=e;i.rank===4&&(i=be(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),Y(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),Y(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),Y(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),Y(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),Y(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const o={x:s,dy:i},u={strides:r,pad:a,filterShape:n};return me.runKernel(PE,o,u)}const Dle=de({conv3DBackpropFilter_:Tle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ale={kernelName:Zb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:a,pad:s}=n;Y(ul(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[i,o]=e;return{x:()=>KL(i.shape,t,o,a,s),filter:()=>Dle(i,t,o.shape,a,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $le={kernelName:Sm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(jn(aD(ot(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kle={kernelName:Nm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(sD(ot(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ile={kernelName:e1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:a,exclusive:s,reverse:i}=n;return{x:()=>{const o=nr([a],r.rank);let u=qT(t,a,s,!i);return o!=null&&(u=pn(u,o)),u}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _le={kernelName:t1,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:a,pad:s,dimRoundingMode:i}=n,o=r??[1,1];Y(ul(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[u,l]=e;return Y(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),Y(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${l.rank}.`),Y(u.shape[3]===l.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),Y(aa(a,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${a} and dilations '${o}'.`),Ma("depthwiseConv2d",s,i),{x:()=>$z(u.shape,t,l,a,s,o,i),filter:()=>Az(u,t,l.shape,a,s,o,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ole={kernelName:n1,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,a]=e,s={x:r,filter:a,dy:t},i={x:r,filter:a,dy:t};return{x:()=>me.runKernel(KN,s,n),filter:()=>me.runKernel(XN,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fle={kernelName:Em,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>me.runKernel(GE,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rle={kernelName:Tm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ge(bs(jn(Pn(n))),2/Math.sqrt(Math.PI));return{x:()=>ge(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mle={kernelName:Dm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ple={kernelName:a1,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>be(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ble={kernelName:Am,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,bs(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lle={kernelName:$m,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zle={kernelName:km,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ht(n.shape,r.shape);return{a:()=>{const o=bt(t,ot(r,"float32")),u=_r(n.shape,a);return u.length>0?be(ht(o,u),n.shape):o},b:()=>{let o=ge(t,ot(n,"float32"));const u=_r(r.shape,a);u.length>0&&(o=be(ht(o,u),r.shape));const l=Pn(r);return jn(bt(o,ot(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wle={kernelName:s1,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[a,s,i,o]=e,u=o??Ct(1),l=_r(s.shape,a.shape),c=[];if(s.rank===1){for(let N=0;N<a.shape.length-1;++N)c.push(a.shape[N]);c.push(1)}const f=ft(a,s),d=ge(t,u),h=tD(Ve(i,Ct(r))),m=ge(ge(ge(h,h),h),Ct(-.5));return{x:()=>s.rank===1?be(ge(ge(t,ui(be(h,[1,1,1,s.shape[0]]),c)),u),a.shape):be(ge(ge(t,h),u),a.shape),mean:()=>{let N=ge(ge(h,Ct(-1)),d);return s.rank===1&&(N=ht(N,l)),be(N,s.shape)},variance:()=>{let N=ge(ge(m,f),d);return s.rank===1&&(N=ht(N,l)),be(N,s.shape)},scale:()=>{const N=ge(f,h);let C=ge(t,N);return s.rank===1&&(C=ht(C,l)),be(C,s.shape)},offset:()=>{let N=t;return s.rank===1&&(N=ht(N,l)),be(N,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ule={kernelName:i1,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,a]=e,{axis:s,batchDims:i}=n,o=sn(s,r.shape)[0],u=(l,c,f)=>()=>{const d=l.shape,h=c.size,m=d.slice(0,o),v=m.length,y=d.slice(s,d.length).slice(1),b=y.length,x=QO(0,v),w=QO(v+1,v+1+b),N=JO([m,[h],y]),C=be(f,N),E=be(c,[h]),$=JO([[v],x,w]),I=pn(C,$);let D=fD(I,E,l.shape[o]);const k=Cl($);return D=pn(D,k),D};if(i===1){const l=r.shape[0],c=r.split(l,0);return{x:()=>ws(c.map((h,m)=>u(h,a.slice(m,1),t.slice(m,1))())).reshape(r.shape),indices:()=>a}}else return{x:u(r,a,t),indices:()=>a}}};function QO(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function JO(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qle={kernelName:Im,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>mn(n),b:()=>mn(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vle={kernelName:_m,gradFunc:t=>({x:()=>ot(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jle={kernelName:Om,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hle={kernelName:Fm,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gle={kernelName:Rm,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kle={kernelName:u1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:a}=n,s=Ts(r,0);return{x:()=>pa(s,t,ge(t,a))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xle={kernelName:Pm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,Ve(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yle={kernelName:Mm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,ot(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qle={kernelName:eZ,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:a}=n;return{logits:()=>{const i=bs(r);return ft(t,ge(ht(t,a,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jle(t,e,n,r=5,a=1,s=1,i=.5){const o={x:t,y:e,dy:n},u={depthRadius:r,bias:a,alpha:s,beta:i};return me.runKernel(tT,o,u)}const Zle=de({localResponseNormalizationBackprop_:Jle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ece={kernelName:h1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,a]=e,{depthRadius:s,bias:i,alpha:o,beta:u}=n;return{x:()=>Zle(r,a,t,s,i,o,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I5(t,e,n,r){return e.rank<n.rank&&(e=be(e,dr(e.shape,r))),t.rank<n.rank&&(t=be(t,dr(t.shape,r))),{x:()=>ge(t,ot(qi(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZO={kernelName:m1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:a}=r,s=e[0],i=e[1],o=sn(a,s.shape),u=I5(t,i,s,o);return{x:()=>u.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tce={kernelName:Bm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ge(t,ot(El(n,r),"float32")),b:()=>ge(t,ot(Vh(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nce(t,e,n,r,a,s,i){const o=J(t,"dy","maxPool3dGrad"),u=J(e,"input","maxPool3dGrad"),l=J(n,"output","maxPool3dGrad");let c=o,f=u,d=l,h=!1;u.rank===4&&(h=!0,c=be(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),f=be(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),d=be(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),Y(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),Y(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),Y(d.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),Ma("maxPool3dGrad",s,i);const m={dy:c,input:f,output:d},v={filterSize:r,strides:a,pad:s,dimRoundingMode:i},y=me.runKernel(rT,m,v);return h?be(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const rce=de({maxPool3dGrad_:nce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ace={kernelName:v1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,a]=e,{filterSize:s,strides:i,pad:o,dimRoundingMode:u}=n;return{x:()=>rce(t,r,a,s,i,o,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sce(t,e,n,r,a,s,i){const o=J(t,"dy","maxPoolGrad"),u=J(e,"input","maxPoolGrad"),l=J(n,"output","maxPoolGrad");Y(u.rank===o.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${o.rank})`),Y(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),Y(u.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${u.rank}.`),Ma("maxPoolGrad",s,i);const c={dy:o,input:u,output:l},f={filterSize:r,strides:a,pad:s,dimRoundingMode:i};return me.runKernel(nT,c,f)}const ice=de({maxPoolGrad_:sce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oce={kernelName:g1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,a]=e,{filterSize:s,strides:i,pad:o}=n;return{x:()=>ice(t,r,a,s,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uce={kernelName:y1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:a}=n,s=sn(a,r.shape),o=qr(r.shape,s)[1],u=Fe(o);return{x:()=>{const c=r.shape.slice();s.forEach(h=>{c[h]=1});const f=be(t,c);return bt(ge(f,ps(r.shape,"float32")),u)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lce={kernelName:b1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:a}=r,[s,i]=e,o=sn(a,s.shape),u=I5(t,i,s,o);return{x:()=>u.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cce={kernelName:Lm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ge(t,ot(Vc(n,r),"float32")),b:()=>ge(t,ot(Ts(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fce={kernelName:w1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:a}=n,s=a.map(i=>i[0]);return{x:()=>dn(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dce={kernelName:zm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ht(n.shape,r.shape);return{a:()=>{const o=_r(n.shape,a);return o.length>0?be(ht(t,o),n.shape):t},b:()=>{const o=ge(t,jn(pg(bt(n,r)))),u=_r(r.shape,a);return u.length>0?be(ht(o,u),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pce={kernelName:Wm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ht(n.shape,r.shape);return{a:()=>{const o=ge(t,ot(r,"float32")),u=_r(n.shape,a);return u.length>0?be(ht(o,u),n.shape):o},b:()=>{const o=ge(t,ot(n,"float32")),u=_r(r.shape,a);return u.length>0?be(ht(o,u),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hce={kernelName:x1,gradFunc:t=>({x:()=>jn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mce={kernelName:C1,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Tr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gce={kernelName:N1,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vce={kernelName:E1,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return bi(t,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e3={kernelName:T1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:a}=n,s=a.map(i=>i[0]);return{x:()=>dn(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yce={kernelName:Um,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,a]=e,s=n,i=r,o=Ht(s.shape,i.shape);return{a:()=>{const c=ot(i,"float32");let f=ge(t,ge(c,su(s,ft(c,Ct(1)))));const d=_r(s.shape,o);return d.length>0&&(f=ht(f,d)),be(f,s.shape)},b:()=>{const c=Ts(s,0),f=pa(c,Ms(s),mn(s));let d=ge(t,ge(a,f));const h=_r(i.shape,o);return h.length>0&&(d=ht(d,h)),be(d,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bce={kernelName:D1,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,a=Ts(n,0);return{x:()=>pa(a,t,ge(t,r)),alpha:()=>{let s=pa(a,mn(t),ge(t,n));const i=_r(r.shape,t.shape);return i.length>0&&(s=ht(s,i)),be(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wce(t,e,n){const r=t.shape.slice();r[n]=1;const a=be(e,r),s=B0(t,n,!0,!1),i=B0(t,n,!0,!0),o=ge(s,i);return ge(a,o)}function xce(t,e,n){const r=t.shape.length,a=r-n.length,s=nr(n,r);let i=t;s!=null&&(i=pn(t,s));const o=i.shape.slice(),l=o.splice(r-n.length,n.length).reduce((d,h)=>d*h,1);o.push(l);const c=i.reshape(o);let f=wce(c,e,a);if(f=f.reshape(i.shape),s!=null){const d=Cl(s);f=pn(f,d)}return f}const Sce={kernelName:A1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:a}=n;let s=[];return a==null?s=r.shape.map((i,o)=>o):typeof a=="number"?s=[a]:s=a,{x:()=>xce(r,t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nce={kernelName:Cm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ht(n.shape,r.shape);return{a:()=>{const o=bt(t,ot(r,"float32")),u=_r(n.shape,a);return u.length>0?be(ht(o,u),n.shape):o},b:()=>{let o=ge(t,ot(n,"float32"));const u=_r(r.shape,a);u.length>0&&(o=be(ht(o,u),r.shape));const l=Pn(r);return jn(bt(o,ot(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cce={kernelName:qm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,jn(Pn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ece={kernelName:jm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ge(Vc(n,6),Zd(n));return{x:()=>ge(t,ot(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tce={kernelName:Vm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,ot(Zd(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dce={kernelName:$1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>be(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ace={kernelName:I1,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,a={dy:t,images:r};return{images:()=>me.runKernel(mT,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ce={kernelName:k1,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,a={dy:t,images:r};return{images:()=>me.runKernel(hT,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kce={kernelName:_1,gradFunc:(t,e,n)=>{const{dims:r}=n,a=sn(r,t.shape);return{x:()=>yi(t,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ice={kernelName:Hm,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ce={kernelName:Gm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>jn(bt(t,ge(su(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oce={kernelName:O1,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>ot(mn(n),"float32"),t:()=>ge(t,ot(n,t.dtype)),e:()=>ge(t,ot(Q1(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fce={kernelName:Km,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ts(n,Ct(0)),a=Ct(pw),s=Ct(hw),i=ge(t,s),o=ge(ge(t,a),bs(ot(n,"float32")));return pa(r,i,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rce={kernelName:Jm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,ge(n,ft(Ct(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mce={kernelName:Qm,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pce={kernelName:Xm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(H1(ot(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bce={kernelName:Ym,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(UT(ot(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lce={kernelName:F1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:a,size:s}=n,i=r.shape,[o,u]=fw(r,a,s),l=[];for(let c=0;c<t.rank;c++)l.push([o[c],i[c]-o[c]-u[c]]);return{x:()=>Tl(t,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zce={kernelName:B1,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:a}=n,s=!0,i=ge(t,r);return{logits:()=>ft(i,ge(ht(i,[a],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wce={kernelName:Zm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,bo(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t3={kernelName:M1,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:a}=n;return{x:()=>j1(t,r,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n3={kernelName:P1,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>wr(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uce={kernelName:eg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,ge(na(ot(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qce={kernelName:CT,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,ge(ot(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vce={kernelName:tg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ct(2);return{a:()=>ge(t,ge(a,ft(n,r))),b:()=>ge(t,ge(a,ft(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jce={kernelName:ig,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hce={kernelName:ng,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ht(n.shape,r.shape);return{a:()=>{let o=t;const u=_r(n.shape,a);return u.length>0&&(o=ht(o,u)),be(o,n.shape)},b:()=>{let o=t;const u=_r(r.shape,a);return u.length>0&&(o=ht(o,u)),be(jn(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gce={kernelName:R1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,a=r.shape.slice(),{axis:s}=n;sn(s,r.shape).forEach(l=>{a[l]=1});const o=be(t,a),u=ge(o,ps(r.shape,"float32"));return{x:()=>u}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kce={kernelName:rg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,Pn(H1(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xce={kernelName:ag,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(ft(Ct(1),Pn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yce={kernelName:sg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:a}=n;return{x:()=>{let i=mn(r);if(r.rank===1)for(let o=0;o<a[0];++o)i=Ve(i,dn(t,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<a[0];++o)for(let u=0;u<a[1];++u)i=Ve(i,dn(t,[o*r.shape[0],u*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<a[0];++o)for(let u=0;u<a[1];++u)for(let l=0;l<a[2];++l)i=Ve(i,dn(t,[o*r.shape[0],u*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<a[0];++o)for(let u=0;u<a[1];++u)for(let l=0;l<a[2];++l)for(let c=0;c<a[3];++c)i=Ve(i,dn(t,[o*r.shape[0],u*r.shape[1],l*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qce={kernelName:sd,gradFunc:(t,e,n)=>{const r=n,{perm:a}=r,s=Cl(a);return{x:()=>pn(t,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jce={kernelName:z1,gradFunc:(t,e,n)=>{const r=n,{axis:a}=r;return{value:()=>ws(t,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zce={kernelName:W1,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>efe(t,n)}}};function efe(t,e){const n=hu(e,mn(e)),r=hg(t,n);let a=El(e,Ct(0,"int32"));const s=r.rank-a.rank;for(let o=0;o<s;++o)a=$a(a,o+1);a=No(a,ps(r.shape,"bool"));const i=mn(r);return pa(a,r,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tfe={kernelName:U1,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nfe=[k5,Zue,ele,tle,nle,rle,ale,sle,ile,ole,ule,lle,dle,mle,gle,vle,yle,ble,wle,xle,Sle,Nle,Ele,Cle,Ale,$le,kle,Ile,_le,Ole,Nce,Fle,Rle,Mle,Ple,Ble,zle,Lle,Wle,Ule,qle,Vle,jle,Hle,Gle,Kle,Xle,Yle,Qle,ece,ZO,ZO,tce,ace,oce,uce,lce,cce,fce,dce,pce,hce,mce,gce,vce,e3,e3,yce,bce,Sce,Cce,Ece,Tce,Dce,Ace,$ce,kce,Ice,_ce,Oce,Fce,Rce,Mce,Pce,Bce,Lce,zce,Wce,t3,t3,n3,n3,Uce,Vce,qce,jce,Hce,Gce,Kce,Xce,Yce,Qce,Jce,Zce,tfe];for(const t of nfe)rZ(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.abs=function(){return this.throwIfDisposed(),Er(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.acos=function(){return this.throwIfDisposed(),$L(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.acosh=function(){return this.throwIfDisposed(),kL(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.add=function(t){return this.throwIfDisposed(),Ve(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.all=function(t,e){return this.throwIfDisposed(),PT(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.any=function(t,e){return this.throwIfDisposed(),P0(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.argMax=function(t){return this.throwIfDisposed(),Cd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.argMin=function(t){return this.throwIfDisposed(),IL(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asScalar=function(){return this.throwIfDisposed(),Y(this.size===1,()=>"The array must have only 1 element."),be(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asType=function(t){return this.throwIfDisposed(),ot(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as1D=function(){return this.throwIfDisposed(),be(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as2D=function(t,e){return this.throwIfDisposed(),be(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),be(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),be(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as5D=function(t,e,n,r,a){return this.throwIfDisposed(),be(this,[t,e,n,r,a])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asin=function(){return this.throwIfDisposed(),_L(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asinh=function(){return this.throwIfDisposed(),OL(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.atan=function(){return this.throwIfDisposed(),FL(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.atan2=function(t){return this.throwIfDisposed(),RL(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.atanh=function(){return this.throwIfDisposed(),ML(this)};Be().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),V1(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),j1(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.batchNorm=function(t,e,n,r,a){return this.throwIfDisposed(),lg(this,t,e,n,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.broadcastTo=function(t){return this.throwIfDisposed(),ud(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cast=function(t){return this.throwIfDisposed(),ot(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.ceil=function(){return this.throwIfDisposed(),UL(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),ys(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof er&&(t=[t]),wr([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.conv1d=function(t,e,n,r,a,s){return this.throwIfDisposed(),LT(this,t,e,n,r,a,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.conv2dTranspose=function(t,e,n,r,a){return this.throwIfDisposed(),WT(this,t,e,n,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.conv2d=function(t,e,n,r,a,s){return this.throwIfDisposed(),ll(this,t,e,n,r,a,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cos=function(){return this.throwIfDisposed(),H1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cosh=function(){return this.throwIfDisposed(),UT(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),B0(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),qT(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),YL(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.depthwiseConv2d=function(t,e,n,r,a,s){return this.throwIfDisposed(),cg(this,t,e,n,r,a,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.dilation2d=function(t,e,n,r,a){return this.throwIfDisposed(),QL(this,t,e,n,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.divNoNan=function(t){return this.throwIfDisposed(),JL(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.div=function(t){return this.throwIfDisposed(),bt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.dot=function(t){return this.throwIfDisposed(),ZL(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.elu=function(){return this.throwIfDisposed(),fg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.equal=function(t){return this.throwIfDisposed(),qi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.erf=function(){return this.throwIfDisposed(),VT(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),nz(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.exp=function(){return this.throwIfDisposed(),bs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.expandDims=function(t){return this.throwIfDisposed(),$a(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.expm1=function(){return this.throwIfDisposed(),rz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.fft=function(){return this.throwIfDisposed(),sw(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.flatten=function(){return this.throwIfDisposed(),be(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.floor=function(){return this.throwIfDisposed(),pg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.floorDiv=function(t){return this.throwIfDisposed(),MT(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.gather=function(t,e,n){return this.throwIfDisposed(),hg(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.greaterEqual=function(t){return this.throwIfDisposed(),El(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.greater=function(t){return this.throwIfDisposed(),Ts(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.ifft=function(){return this.throwIfDisposed(),Gh(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.irfft=function(){return this.throwIfDisposed(),oD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.isFinite=function(){return this.throwIfDisposed(),az(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.isInf=function(){return this.throwIfDisposed(),sz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.isNaN=function(){return this.throwIfDisposed(),iz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.leakyRelu=function(t){return this.throwIfDisposed(),K1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.lessEqual=function(t){return this.throwIfDisposed(),Vc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.less=function(t){return this.throwIfDisposed(),Vh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),oz(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logSigmoid=function(){return this.throwIfDisposed(),uz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logSoftmax=function(t){return this.throwIfDisposed(),GT(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),Y1(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.log=function(){return this.throwIfDisposed(),Ms(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.log1p=function(){return this.throwIfDisposed(),X1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalAnd=function(t){return this.throwIfDisposed(),No(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalNot=function(){return this.throwIfDisposed(),Q1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalOr=function(t){return this.throwIfDisposed(),KT(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalXor=function(t){return this.throwIfDisposed(),lz(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),nn(this,t,e,n)};Be().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),J1(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.max=function(t,e){return this.throwIfDisposed(),pi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.maximum=function(t){return this.throwIfDisposed(),hu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mean=function(t,e){return this.throwIfDisposed(),or(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.min=function(t,e){return this.throwIfDisposed(),qh(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.minimum=function(t){return this.throwIfDisposed(),_c(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),fz(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mod=function(t){return this.throwIfDisposed(),dz(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mul=function(t){return this.throwIfDisposed(),ge(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.neg=function(){return this.throwIfDisposed(),jn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.norm=function(t,e,n){return this.throwIfDisposed(),dg(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.notEqual=function(t){return this.throwIfDisposed(),Td(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),YT(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.onesLike=function(){return this.throwIfDisposed(),Ps(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.pad=function(t,e){return this.throwIfDisposed(),Tl(this,t,e)};Be().prototype.pool=function(t,e,n,r,a,s){return this.throwIfDisposed(),pz(this,t,e,n,r,a,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.pow=function(t){return this.throwIfDisposed(),su(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.prelu=function(t){return this.throwIfDisposed(),tw(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.prod=function(t,e){return this.throwIfDisposed(),hz(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reciprocal=function(){return this.throwIfDisposed(),gz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.relu=function(){return this.throwIfDisposed(),$o(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.relu6=function(){return this.throwIfDisposed(),ZT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reshapeAs=function(t){return this.throwIfDisposed(),be(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reshape=function(t){return this.throwIfDisposed(),be(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),_z(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),Oz(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reverse=function(t){return this.throwIfDisposed(),yi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.rfft=function(){return this.throwIfDisposed(),iw(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.round=function(){return this.throwIfDisposed(),eD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.rsqrt=function(){return this.throwIfDisposed(),tD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.selu=function(){return this.throwIfDisposed(),nD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.separableConv2d=function(t,e,n,r,a,s){return this.throwIfDisposed(),rD(this,t,e,n,r,a,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sigmoid=function(){return this.throwIfDisposed(),bo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sign=function(){return this.throwIfDisposed(),vz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sin=function(){return this.throwIfDisposed(),aD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sinh=function(){return this.throwIfDisposed(),sD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.slice=function(t,e){return this.throwIfDisposed(),dn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.softmax=function(t){return this.throwIfDisposed(),aw(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.softplus=function(){return this.throwIfDisposed(),Jd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),ew(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.split=function(t,e){return this.throwIfDisposed(),hs(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sqrt=function(){return this.throwIfDisposed(),na(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.square=function(){return this.throwIfDisposed(),Pn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.squaredDifference=function(t){return this.throwIfDisposed(),uD(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.squeeze=function(t){return this.throwIfDisposed(),Hc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof er?[this,t]:[this,...t];return ws(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.step=function(t){return this.throwIfDisposed(),Zd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.stridedSlice=function(t,e,n,r,a,s,i,o){return this.throwIfDisposed(),yz(this,t,e,n,r,a,s,i,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sub=function(t){return this.throwIfDisposed(),ft(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sum=function(t,e){return this.throwIfDisposed(),ht(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.tan=function(){return this.throwIfDisposed(),bz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.tanh=function(){return this.throwIfDisposed(),Ic(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.tile=function(t){return this.throwIfDisposed(),ui(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.toBool=function(){return this.throwIfDisposed(),ot(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.toFloat=function(){return this.throwIfDisposed(),ot(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.toInt=function(){return this.throwIfDisposed(),ot(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.topk=function(t,e){return this.throwIfDisposed(),xz(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.transpose=function(t){return this.throwIfDisposed(),pn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.unique=function(t){return this.throwIfDisposed(),Sz(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),fD(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.unstack=function(t){return this.throwIfDisposed(),bi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.where=function(t,e){return this.throwIfDisposed(),pa(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.zerosLike=function(){return this.throwIfDisposed(),mn(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class co extends Error{constructor(e){super(e),Object.setPrototypeOf(this,co.prototype)}}class li extends Error{constructor(e){super(e),Object.setPrototypeOf(this,li.prototype)}}class we extends Error{constructor(e){super(e),Object.setPrototypeOf(this,we.prototype)}}class Jt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Jt.prototype)}}class KD extends Error{constructor(e){super(e),Object.setPrototypeOf(this,KD.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class _5{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Rc(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function fo(t,e){if(!t)throw new KD(e)}function r3(t,e){let n=0;for(const r of t)r===e&&n++;return n}function qa(t){return t.length===1?t[0]:t}function Dn(t){return Array.isArray(t)?t:[t]}function Ko(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function dc(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Qs={};function XD(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function CC(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>CC(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:CC(r))}}}function bg(t,e={},n={},r="object",a=!1){if(typeof t=="string"){const s=t;let i;if(s in n)i=n[s];else if(s in Qs)i=Qs[s];else if(i=e[s],i==null)throw new we(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const s=t;if(s.className==null||s.config==null)throw new we(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const i=s.className;let o,u;if(i in n?[o,u]=n[i]:i in Qs?[o,u]=Qs.className:i in e&&([o,u]=e[i]),o==null)throw new we(`Unknown ${r}: ${i}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(u!=null){const l={};for(const h of Object.keys(Qs))l[h]=Qs[h];for(const h of Object.keys(n))l[h]=n[h];const c=s.config;c.customObjects=l;const f=Object.assign({},Qs);for(const h of Object.keys(n))Qs[h]=n[h];CC(s.config);const d=u(o,s.config,n,a);return Qs=Object.assign({},f),d}else{const l=Object.assign({},Qs);for(const f of Object.keys(n))Qs[f]=n[f];const c=new o(s.config);return Qs=Object.assign({},l),c}}}function rfe(t,e){return t<e?-1:t>e?1:0}function Sy(t,e){return-1*rfe(t,e)}function el(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function afe(t){if(t==null)throw new we(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Kc(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new we(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function YD(t,e,n=0,r=1/0){return fo(n>=0),fo(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(a=>typeof a===e)}function zr(t,e){Array.isArray(t)?(Y(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>zr(n,`element ${r+1} of ${e}`))):Y(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${O5(t)}.`)}function O5(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>O5(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function sfe(t,e,n){let r=n!=null?n():Ua(),a;return(...i)=>{const o=n!=null?n():Ua();return o-r<e||(r=o,a=t(...i)),a}}function F5(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let ife=0;function R5(){return ife++}const Ny={};function mw(t=""){return t in Ny||(Ny[t]=0),Ny[t]+=1,t+Ny[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ofe=["channelsFirst","channelsLast"],ufe=["nearest","bilinear"],lfe=["valid","same","causal"],cfe=["max","avg"],ffe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Lf=new Map;function hr(t){Kc(ofe,"DataFormat",t)}function dfe(t){Kc(ufe,"InterpolationFormat",t)}function zs(t){Kc(lfe,"PaddingMode",t)}function M5(t){Kc(cfe,"PoolMode",t)}const $h=[],a3="/";function wc(t,e){$h.push(t);try{const n=e();return $h.pop(),n}catch(n){throw $h.pop(),n}}function pfe(){return $h.length===0?"":$h.join(a3)+a3}function P5(t){if(!L5(t))throw new Error("Not a valid tensor name: '"+t+"'");return pfe()+t}function B5(t){if(!L5(t))throw new Error("Not a valid tensor name: '"+t+"'");Lf.has(t)||Lf.set(t,0);const e=Lf.get(t);if(Lf.set(t,Lf.get(t)+1),e>0){const n=`${t}_${e}`;return Lf.set(n,1),n}else return t}const hfe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function L5(t){return!!t.match(hfe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mfe(t){return t===parseInt(t.toString(),10)}function tl(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let a=e;a<n;++a)r*=t[a];return r}function Ad(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function cl(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Vi(t,e){if(e<t)throw new we(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let CS;function Dr(){return CS==null&&(CS=pL().epsilon()),CS}function ji(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xo(t,e){return ot(t,e)}function wg(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),be(t,n)}function gfe(t,e){return Te(()=>{if(t.shape.length!==2)throw new we(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=wg(t,1);return EC(n,[1,e,1])})}function vfe(t){const e=[tl(t.shape)];return be(t,e)}function yfe(t){if(t.rank<=1)throw new we(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],tl(t.shape,1)];return be(t,e)}function xc(t,e,n){return Te(()=>{switch(t.rank){case 1:return nw(t,e,n);case 2:return iD(t,[e,0],[n,t.shape[1]]);case 3:return rw(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Hh(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return dn(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return dn(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new we(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function ES(t,e,n){return Te(()=>{switch(t.rank){case 1:return nw(t,e,n);case 2:return iD(t,[0,e],[t.shape[0],n]);case 3:return rw(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Hh(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new we(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Cy(t,e,n,r){return Te(()=>{switch(t.rank){case 1:return nw(t,e,n);case 2:switch(r){case 1:return xc(t,e,n);case 2:return ES(t,e,n);default:throw new we(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return xc(t,e,n);case 2:return rw(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return ES(t,e,n);default:throw new we(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return xc(t,e,n);case 2:return Hh(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Hh(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return ES(t,e,n);default:throw new we(`The axis is not within the rank of the tensor ${r}`)}default:throw new we(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function QD(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),wr(t,e)}function s3(t,e){switch(t.rank){case 1:return qL([t,e]);case 2:return VL([t,e],0);case 3:return jL([t,e],0);case 4:return HL([t,e],0);default:throw new we(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function EC(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new we(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return ui(t,e)}function gw(t,e=0,n=1,r,a){return JT(t,e,n,r,a)}function So(t,e,n,r){if(t.rank<2||e.rank<2)throw new Jt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const a=t.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(a!==s)throw new Jt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return lC({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?TC(t.rank,r,ji()):null,activation:n});{const a=t.shape.slice(),s=a.pop();t=be(t,[-1,s]);const i=e.shape.slice(),o=i.pop(),u=i.pop(),l=[...i,o],c=Array.from({length:e.rank},(m,v)=>v===0?e.rank-2:v<=e.rank-2?v-1:v);e=be(pn(e,c),[u,-1]);const f=[...a,...l];return be(lC({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?TC(t.rank,r,ji()):null,activation:n}),f)}}function z5(t,e,n){return Te(()=>(Array.isArray(e)?e=ca(e,"int32"):e=ot(e,"int32"),hg(t,e,n)))}function xg(t){return ge(t,t)}function TC(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new we(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?be(e,[1,r[0],1,1,1]):be(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?be(e,[1,1,1,1,r[0]]):be(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?be(e,[1,r[0],1,1]):be(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?be(e,[1,1,1,r[0]]):be(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?be(e,[1,r[0],1]):be(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?be(e,[1,1,r[0]]):be(e,[1].concat(r))}else if(t<3)return e;throw new we(`Unsupported input rank by biasAdd: ${e.rank}`)}function Ki(t,e,n){return Te(()=>(n==null&&(n=ji()),hr(n),Ve(t,TC(t.rank,e,n))))}function bfe(t,e=1){if(e!==1)throw new Jt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return fg(t)}function wfe(t){return Te(()=>bt(t,Ve(Er(t),1)))}function W5(t,e,n,r){return Te(()=>Ez(t,e,n,r))}function xfe(t){return Te(()=>{const e=Ve(.5,ge(.2,t));return ys(e,0,1)})}function Sg(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Sfe=["fanIn","fanOut","fanAvg"],Nfe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Cfe(t){Kc(Sfe,"FanMode",t)}function Efe(t){Kc(Nfe,"Distribution",t)}class Si extends tp{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class U5 extends Si{apply(e,n){return Tr(e,n)}}U5.className="Zeros";Ke(U5);class JD extends Si{apply(e,n){return ps(e,n)}}JD.className="Ones";Ke(JD);class q5 extends Si{constructor(e){if(super(),typeof e!="object")throw new we(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new we(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return Te(()=>ge(Ct(this.value),ps(e,n)))}getConfig(){return{value:this.value}}}q5.className="Constant";Ke(q5);class V5 extends Si{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return jc(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}V5.className="RandomUniform";Ke(V5);class j5 extends Si{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Jt(`randomNormal does not support dType ${n}.`);return gw(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}j5.className="RandomNormal";Ke(j5);class H5 extends Si{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Jt(`truncatedNormal does not support dType ${n}.`);return cD(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}H5.className="TruncatedNormal";Ke(H5);class G5 extends Si{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return Te(()=>{if(e.length!==2||e[0]!==e[1])throw new we("Identity matrix initializer can only be used for 2D square matrices.");return ge(this.gain,HT(e[0]))})}getConfig(){return{gain:this.gain}}}G5.className="Identity";Ke(G5);function Tfe(t,e="channelsLast"){let n,r;if(hr(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const a=tl(t,2);n=t[1]*a,r=t[0]*a}else if(e==="channelsLast"){const a=tl(t,0,t.length-2);n=t[t.length-2]*a,r=t[t.length-1]*a}}else{const a=tl(t);n=Math.sqrt(a),r=Math.sqrt(a)}return[n,r]}class xs extends Si{constructor(e){if(super(),e.scale<0)throw new we(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Cfe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,Efe(this.distribution),this.seed=e.seed}apply(e,n){const r=Tfe(e),a=r[0],s=r[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,a):this.mode==="fanOut"?i/=Math.max(1,s):i/=Math.max(1,(a+s)/2),this.distribution==="normal"){const o=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Jt(`${this.getClassName()} does not support dType ${n}.`);return cD(e,0,o,n,this.seed)}else{const o=Math.sqrt(3*i);return jc(e,-o,o,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}xs.className="VarianceScaling";Ke(xs);class ZD extends xs{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return xs.className}}ZD.className="GlorotUniform";Ke(ZD);class eA extends xs{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return xs.className}}eA.className="GlorotNormal";Ke(eA);class tA extends xs{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return xs.className}}tA.className="HeNormal";Ke(tA);class nA extends xs{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return xs.className}}nA.className="HeUniform";Ke(nA);class rA extends xs{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return xs.className}}rA.className="LeCunNormal";Ke(rA);class aA extends xs{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return xs.className}}aA.className="LeCunUniform";Ke(aA);class K5 extends Si{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return Te(()=>{if(e.length<2)throw new Jt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=Fe(e.slice(0,-1)),a=e[e.length-1],s=r*a;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const i=[Math.max(a,r),Math.min(a,r)],o=gw(i,0,1,n,this.seed),u=Fz.qr(o,!1);let l=u[0];const f=u[1].flatten().stridedSlice([0],[Math.min(a,r)*Math.min(a,r)],[Math.min(a,r)+1]);return l=ge(l,f.sign()),r<a&&(l=l.transpose()),ge(Ct(this.gain),l.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}K5.className="Orthogonal";Ke(K5);const i3={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function o3(t,e={}){return bg(t,ii.getMap().classNameMap,e,"initializer")}function tr(t){return XD(t)}function Xn(t){if(typeof t=="string"){const e=t in i3?i3[t]:t;if(e==="GlorotNormal")return new eA;if(e==="GlorotUniform")return new ZD;if(e==="HeNormal")return new tA;if(e==="HeUniform")return new nA;if(e==="LeCunNormal")return new rA;if(e==="LeCunUniform")return new aA;{const n={};return n.className=e,n.config={},o3(n)}}else return t instanceof Si?t:o3(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DC(t){return Array.isArray(t)&&Array.isArray(t[0])}function W0(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Pt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new we(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function wn(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new we(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function U0(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,a)=>r*a);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const u3="Variable";class Dfe{constructor(e,n="float32",r=u3,a=!0,s=null){this.dtype=n??"float32",this.shape=e.shape,this.id=R5(),r=r??u3,this.originalName=P5(r),this.name=B5(this.originalName),this.trainable_=a,this.constraint=s,this.val=Nz(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),Afe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function Afe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function AC(t){return t.map(e=>e.read())}function sA(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ar{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Co{constructor(e,n,r,a,s,i,o){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=s,this.outputTensorIndex=o,this.id=R5(),i!=null&&(this.originalName=P5(i),this.name=B5(this.originalName)),this.rank=n.length}}let $fe=0,vw=class{constructor(e,n){this.callArgs=n,this.id=$fe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},kfe=0;class on extends tp{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=kfe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Ko(r)+"_"+mw(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let a=e.dtype;a==null&&(a=e.inputDType),a==null&&(a="float32"),this.dtype=a}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new li(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new we(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return qa(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return qa(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new co(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new co(`Layer ${this.name} is not connected, no input to return.`);return qa(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new co(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new co(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return qa(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Dn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Dn(this.inputSpec);if(n.length!==r.length)throw new we(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let a=0;a<n.length;a++){const s=n[a],i=r[a];if(i==null)continue;const o=s.rank;if(i.ndim!=null&&o!==i.ndim)throw new we(`Input ${a} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${o}`);if(i.maxNDim!=null&&o>i.maxNDim)throw new we(`Input ${a} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${o}`);if(i.minNDim!=null&&o<i.minNDim)throw new we(`Input ${a} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${o}.`);if(i.dtype!=null&&s.dtype!==i.dtype)throw new we(`Input ${a} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${s.dtype}.`);if(i.axes){const u=s.shape;for(const l in i.axes){const c=Number(l),f=i.axes[l],d=c>=0?u[c]:u[u.length+c];if(f!=null&&[f,null].indexOf(d)===-1)throw new we(`Input ${a} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${f} but got shape ${u}.`)}}if(i.shape!=null)for(let u=0;u<i.shape.length;++u){const l=i.shape[u],c=s.shape[u];if(l!=null&&c!=null&&l!==c)throw new we(`Input ${a} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${s.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Dn(e),a=Ofe(e),s=Ffe(e);if(a===s)throw new we("Arguments to apply() must be all SymbolicTensors or all Tensors");return wc(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const o of Dn(e))i.push(o.shape);this.build(qa(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let i=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,i);const o=Dn(i),u=[];for(let l of o)r.indexOf(l)!==-1&&(l=l.clone()),u.push(l);if(i=qa(u),this.activityRegularizer!=null)throw new Jt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=Ife(e),o=this.computeOutputShape(i);let u;const l=_fe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),o!=null&&o.length>0&&Array.isArray(o[0])?u=o.map((c,f)=>new Co(l,c,this,Dn(e),n,this.name,f)):u=new Co(l,o,this,Dn(e),n,this.name),this.addInboundNode(e,u,null,null,i,o,n),this._refCount++,this.activityRegularizer!=null)throw new Jt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return u}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,a)=>{r!=null&&e[a]!=null&&e[a]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new co(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new co(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new li(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return U0(this.weights)}build(e){this.built=!0}getWeights(e=!1){return AC(e?this.trainableWeights:this.weights)}setWeights(e){Te(()=>{const n=this.weights;if(n.length!==e.length)throw new we(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],a=AC(n);for(let s=0;s<a.length;++s){const i=a[s],o=n[s],u=e[s];if(!fn(i.shape,u.shape))throw new we(`Layer weight shape ${i.shape} not compatible with provided weight shape ${u.shape}`);r.push([o,u])}sA(r)})}addWeight(e,n,r,a,s,i,o,u){if(this._addedWeightNames.indexOf(e)!==-1)throw new we(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(a=u!=null?u():Xn("zeros"));const l=a.apply(n,r),c=new Dfe(l,r,e,i,o);return l.dispose(),s!=null&&this.addLoss(()=>s.apply(c.read())),i==null&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Dn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const a=this.computeMask(e,r),s=Dn(n),i=Dn(a);if(s.length!==i.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let o=0;o<s.length;o++)s[o].kerasMask=i[o]}addInboundNode(e,n,r,a,s,i,o=null){const u=Dn(e);n=Dn(n),r=Dn(r),a=Dn(a),s=W0(s),i=W0(i);const l=[],c=[],f=[];for(const d of u)l.push(d.sourceLayer),c.push(d.nodeIndex),f.push(d.tensorIndex);new vw({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:f,inputTensors:u,outputTensors:n,inputMasks:r,outputMasks:a,inputShapes:s,outputShapes:i},o);for(let d=0;d<n.length;d++)n[d].sourceLayer=this,n[d].nodeIndex=this.inboundNodes.length-1,n[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Ife(t){t=Dn(t);const e=[];for(const n of t)e.push(n.shape);return qa(e)}function _fe(t){return"float32"}function X5(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const a=[];for(let s=0;s<r.inboundLayers.length;s++){const i=r.inputTensors[s],o=r.inboundLayers[s],u=r.nodeIndices[s],l=X5(i,o,u);for(const c of l)a.indexOf(c)===-1&&a.push(c)}return a}}}function Ofe(t){let e=!0;for(const n of Dn(t))if(!(n instanceof Co)){e=!1;break}return e}function Ffe(t){let e=!0;for(const n of Dn(t))if(n instanceof Co){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ng extends on{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:mw("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new we("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new we("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new we("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const a=new Co(this.dtype,this.batchInputShape,this,[],{},this.name);a.nodeIndex=0,a.tensorIndex=0,new vw({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new we(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Ng.className="InputLayer";Ke(Ng);function Rfe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new we("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Ng({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Mfe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return ot(e,t.dtype)}catch{throw new we(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class ju{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof ju)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=Mfe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new we(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Co){if(this.id2Value[e.id]==null)throw new we(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new we(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Co){if(this.id2Value[e.id]==null)throw new we(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new we(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&rn(this.id2Mask)}}const q0=new _5,V0=new _5;function Pfe(t){q0!=null&&q0.setMaxEntries(t),V0!=null&&V0.setMaxEntries(t)}function wh(t,e,n,r){const a=n==null?!1:n.training,s=Array.isArray(t),i=s?t:[t],o=i.map(m=>m.name),u=[],l=e.names();for(const m of o)l.indexOf(m)!==-1?u.push(e.getValue(m)):u.push(null);const c=o.join(",")+"|"+e.names().sort().join(",");let f=q0.get(c),d;if(f==null){const m=Bfe(i,e);f=m.sorted,d=m.recipientCounts,q0.put(c,f),V0.put(c,d)}d={},a||Object.assign(d,V0.get(c));const h=new ju(e);for(let m=0;m<f.length;++m){const v=f[m],y=v.sourceLayer;if(y instanceof Ng)continue;const b=[],x=[],w=[];let N=!1;for(const D of v.inputs){const k=h.getValue(D),A=h.getMask(D);b.push(k),x.push(A),A!=null&&(N=!0),a||(d[D.name]--,d[D.name]===0&&!e.hasKey(D)&&o.indexOf(D.name)===-1&&!k.isDisposed&&D.sourceLayer.stateful!==!0&&w.push(k))}N&&(n=n||{},n.mask=x[0]);const C=Dn(y.apply(b,n));let E=null;y.supportsMasking&&(E=y.computeMask(b,x));const $=zfe(v),I=Array.isArray($)?$:[$];for(let D=0;D<I.length;++D){h.hasKey(I[D])||h.add(I[D],C[D],Array.isArray(E)?E[0]:E);const k=o.indexOf(I[D].name);k!==-1&&(u[k]=C[D])}a||rn(w)}return h.disposeMasks(),s?u:u[0]}function Bfe(t,e){Y(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const a=l3(t[0],e);n=a.sorted,r=a.recipientMap}else{const a=new Set;for(const s of t){const{sorted:i,recipientMap:o}=l3(s,e);for(const u of i)a.has(u.name)||(n.push(u),a.add(u.name));for(const u in o)r[u]==null&&(r[u]=new Set),o[u].forEach(l=>r[u].add(l))}}return{sorted:n,recipientCounts:Lfe(r)}}function Lfe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function l3(t,e){const n=new Set,r=[],a={};for(const o of e.names())n.add(o);const s=[],i=[];for(s.push(t);s.length>0;){const o=s[s.length-1];if(n.has(o.name)){s.pop();continue}const u=i[i.length-1]===s.length-1;if(o.inputs.length===0||u)s.pop(),r.push(o),n.add(o.name),u&&i.pop();else{i.push(s.length-1);for(const l of o.inputs)a[l.name]==null&&(a[l.name]=new Set),a[l.name].add(o.name),!n.has(l.name)&&s.push(l)}}return{sorted:r,recipientMap:a}}function zfe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const a of t.sourceLayer.inboundNodes[r].outputTensors)if(a.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wfe=$e();Wfe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,Pfe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function iA(t,e){return Te(()=>na(ht(ge(t,t),e,!0)))}class Cg extends tp{getConfig(){return{}}}class Y5 extends Cg{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Te(()=>{const n=iA(e,this.axis),r=ys(n,0,this.maxValue);return ge(e,bt(r,Ve(Dr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Y5.className="MaxNorm";Ke(Y5);class Q5 extends Cg{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Te(()=>bt(e,Ve(Dr(),iA(e,this.axis))))}getConfig(){return{axis:this.axis}}}Q5.className="UnitNorm";Ke(Q5);class J5 extends Cg{apply(e){return $o(e)}}J5.className="NonNeg";Ke(J5);class Z5 extends Cg{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Te(()=>{const n=iA(e,this.axis),r=Ve(ge(this.rate,ys(n,this.minValue,this.maxValue)),ge(1-this.rate,n));return ge(e,bt(r,Ve(Dr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Z5.className="MinMaxNorm";Ke(Z5);const c3={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function kr(t){return XD(t)}function f3(t,e={}){return bg(t,ii.getMap().classNameMap,e,"constraint")}function Ir(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in c3?c3[t]:t,config:{}};return f3(n)}else return t instanceof Cg?t:f3(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function ac(t){if(t==null)return;const e=[],n=[],r=[];for(const a in t){const s=t[a];if(typeof s!="number"){const i=s;e.push(i.data()),n.push(a),r.push(i)}}if(e.length>0){const a=await Promise.all(e);for(let s=0;s<a.length;++s)t[n[s]]=a[s][0];rn(r)}}function e6(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var d3;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(d3||(d3={}));const Ufe=125;class Kh{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class qfe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class Vfe extends Kh{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const a in n){const s=n[a];if(typeof s=="number")this.totals.hasOwnProperty(a)||(this.totals[a]=0),this.totals[a]=this.totals[a]+s*r;else{let i;a in this.totals?i=this.totals[a]:this.totals[a]=0;const o=Te(()=>Ve(this.totals[a],ge(s,r)));this.totals[a]=o,i!=null&&i.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:Te(()=>{const a=ge(bt(1,this.seen),this.totals[r]);n[r]=a,this.totals[r].dispose(),Lr(n[r])}))}}class jfe extends Kh{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const s in this.history){const i=this.history[s];for(let o=0;o<i.length;++o)if(typeof i[o]!="number"){const u=i[o];e.push(u.data()),n.push(s),r.push(o)}}const a=await Promise.all(e);for(let s=0;s<a.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=a[s][0]}}class Hfe extends Kh{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||t5,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=Ufe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");jN(this.yieldEvery)&&(this.maybeWait=sfe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const a=[];this.yield!=null&&(await ac(r),a.push(this.yield(e,n,r))),a.push(this.nextFrameFunc()),await Promise.all(a)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await ac(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await ac(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await ac(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await ac(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):jN(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await ac(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await ac(e),await this.trainEnd(e))}}function t6(t,e){return t==null&&(t={}),t instanceof Kh?[t]:Array.isArray(t)&&t[0]instanceof Kh?t:Dn(t).map(r=>new Hfe(r,e))}class ti{constructor(){}static registerCallbackConstructor(e,n){Y(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),ti.checkForDuplicate(n),ti.constructors[e]==null&&(ti.constructors[e]=[]),ti.constructors[e].push(n)}static checkForDuplicate(e){for(const n in ti.constructors)ti.constructors[+n].forEach(a=>{if(a===e)throw new we("Duplicate callback constructor.")})}static clear(){ti.constructors={}}static createCallbacks(e){const n=[];for(const r in ti.constructors){const a=+r;e>=a&&n.push(...ti.constructors[a])}return n.map(r=>new r)}}ti.constructors={};function n6(t,e,n,r,a,s,i,o,u){const l=new jfe,c=[new Vfe,...ti.createCallbacks(e)];t!=null&&c.push(...t),c.push(l);const f=new qfe(c);return f.setParams({epochs:n,initialEpoch:r,samples:a,steps:s,batchSize:i,verbose:e,doValidation:o,metrics:u}),{callbackList:f,history:l}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zo(t,e={},n=!1){return bg(t,ii.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function j0(t,e){return Te(()=>{t.dtype!=="float32"&&(t=ot(t,"float32"));const n=ht(xg(t),e,!0),r=Qd(n.shape,Dr()),a=na(hu(n,r));return bt(t,a)})}function yw(t,e){return Te(()=>or(xg(ft(e,t)),-1))}function oA(t,e){return Te(()=>or(Er(ft(e,t)),-1))}function uA(t,e){return Te(()=>{const n=ft(t,e),r=ys(Er(t),Dr(),Number.MAX_VALUE),a=Er(bt(n,r));return ge(100,or(a,-1))})}function Gfe(t,e){return Te(()=>{const n=ys(e,Dr(),Number.MAX_VALUE),r=Ms(Ve(1,n)),a=ys(t,Dr(),Number.MAX_VALUE),s=Ms(Ve(1,a));return or(xg(ft(r,s)),-1)})}function Kfe(t,e){return Te(()=>{const n=hu(0,ft(1,ge(t,e)));return or(xg(n),-1)})}function Xfe(t,e){return Te(()=>{const n=hu(0,ft(1,ge(t,e)));return or(n,-1)})}function Yfe(t,e){return Te(()=>{const n=ht(ge(t,e),-1),r=pi(ge(ft(1,t),e),-1);return hu(0,Ve(1,ft(r,n)))})}function Qfe(t,e){return Te(()=>{const n=Math.log(2),r=ft(e,t),a=ft(Ve(r,Jd(ge(-2,r))),n);return or(a,-1)})}function Xh(t,e,n=!1){return Te(()=>{if(n)e=aw(e);else{const r=ht(e,e.shape.length-1,!0);e=bt(e,r)}return e=ys(e,Dr(),1-Dr()),jn(ht(ge(ot(t,"float32"),Ms(e)),e.shape.length-1))})}function H0(t,e,n=!1){return Te(()=>{const r=ot(pg(vfe(t)),"int32");e=ys(e,Dr(),1-Dr());const a=e.shape,s=be(YT(r,a[a.length-1]),a);return Xh(s,e,n)})}function Jfe(t,e){if(!fn(t.shape,e.shape))throw new we(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Te(()=>{const n=$o(e),r=jn(Er(e));return Ve(ft(n,ge(e,t)),X1(bs(r)))})}function bw(t,e){return Te(()=>{let n;return n=ys(e,Dr(),1-Dr()),n=Ms(bt(n,ft(1,n))),or(Jfe(t,n),-1)})}function Zfe(t,e){return Te(()=>{const n=ys(t,Dr(),1),r=ys(e,Dr(),1);return ht(ge(t,Ms(bt(n,r))),-1)})}function ede(t,e){return Te(()=>{const n=Ms(Ve(Dr(),e));return or(ft(e,ge(t,n)),-1)})}function r6(t,e){return Te(()=>{const n=j0(t,-1),r=j0(e,-1),a=ge(n,r);return jn(ht(a,-1))})}const G0={meanSquaredError:yw,meanAbsoluteError:oA,meanAbsolutePercentageError:uA,meanSquaredLogarithmicError:Gfe,squaredHinge:Kfe,hinge:Xfe,categoricalHinge:Yfe,logcosh:Qfe,categoricalCrossentropy:Xh,sparseCategoricalCrossentropy:H0,binaryCrossentropy:bw,kullbackLeiblerDivergence:Zfe,poisson:ede,cosineProximity:r6};function TS(t){if(typeof t=="string"){if(t in G0)return G0[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new we(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a6(t,e){return Te(()=>{const n=ge(.5,Ps(e)),r=xo(Ts(e,n),t.dtype);return or(qi(t,r),-1)})}function s6(t,e){return Te(()=>xo(qi(Cd(t,-1),Cd(e,-1)),"float32"))}function tde(t,e){return Te(()=>ot(ht(No(qi(t,1),qi(e,1))),"float32"))}function nde(t,e){return Te(()=>ot(ht(No(qi(t,0),qi(e,1))),"float32"))}function rde(t,e){return Te(()=>{const n=tde(t,e),r=nde(t,e),a=Ve(n,r);return ot(pa(Ts(a,0),bt(n,a),0),"float32")})}function ade(t,e){return bw(t,e)}function sde(t,e){return t.rank===e.rank&&(t=Hc(t,[t.rank-1])),e=Cd(e,-1),e.dtype!==t.dtype&&(e=ot(e,t.dtype)),ot(qi(t,e),"float32")}const ide=yw,ode=yw,ude=oA,lde=oA,cde=uA,fde=uA,i6=Xh,dde=r6,o6=H0,K0={binaryAccuracy:a6,categoricalAccuracy:s6,precision:rde,categoricalCrossentropy:i6,sparseCategoricalCrossentropy:o6,mse:ide,MSE:ode,mae:ude,MAE:lde,mape:cde,MAPE:fde,cosine:dde};function pde(t){if(typeof t=="string"&&t in K0)return K0[t];if(typeof t!="string"&&t!=null)return t;throw new we(`Unknown metric ${t}`)}function Ey(t){if(fo(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(G0))if(G0[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(K0))if(K0[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hde(t){const e={Adagrad:()=>Bf.adagrad(.01),Adadelta:()=>Bf.adadelta(1,.95,Dr()),Adam:()=>Bf.adam(.001,.9,.999,Dr()),Adamax:()=>Bf.adamax(.002,.9,.999,Dr(),0),RMSProp:()=>Bf.rmsprop(.001,.9,0,Dr()),SGD:()=>Bf.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new we(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const p3=1*1024*1024;function h3(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!$C(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>p3&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${p3}.`)}}function $C(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!$C(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!$C(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mde(t,e,n,r=console.log){const a=vde(t),s=["Layer (type)","Input Shape","Output shape","Param #"];a?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let i;if(!a){s.push("Receives inputs"),i=[];for(const c in t.nodesByDepth)i.push(...t.nodesByDepth[c])}r("_".repeat(e)),X0(s,n,r),r("=".repeat(e));const o=t.layers;for(let c=0;c<o.length;++c)a?yde(o[c],n,r):bde(o[c],n,i,r),r((c===o.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const u=gde(t),l=U0(t.nonTrainableWeights);r(`Total params: ${u+l}`),r(`Trainable params: ${u}`),r(`Non-trainable params: ${l}`),r("_".repeat(e))}function gde(t){let e;return t.collectedTrainableWeights!=null?e=U0(t.collectedTrainableWeights):e=U0(t.trainableWeights),e}function vde(t){let e=!0;const n=[],r=[];for(const a in t.nodesByDepth)n.push(t.nodesByDepth[a]);for(const a of n){if(a.length>1||a.length===1&&a[0].inboundLayers.length>1){e=!1;break}r.push(...a)}if(e)for(const a of t.layers){let s=!1;for(const i of a.inboundNodes)if(r.indexOf(i)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function X0(t,e,n=console.log){let r="";for(let a=0;a<t.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r+=t[a],r=r.slice(0,e[a]),r+=" ".repeat(e[a]-r.length);n(r)}function yde(t,e,n){let r,a;try{a=t.inboundNodes.map(u=>JSON.stringify(u.inputShapes)).join(",")}catch{a="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const s=t.name,i=t.getClassName(),o=[`${s} (${i})`,a,r,t.countParams().toString()];X0(o,e,n)}function bde(t,e,n,r){let a,s;try{s=t.inboundNodes.map(f=>JSON.stringify(f.inputShapes)).join(",")}catch{s="multiple"}try{a=JSON.stringify(t.outputShape)}catch{a="multiple"}const i=[];for(const f of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(f)===-1))for(let d=0;d<f.inboundLayers.length;++d){const h=f.inboundLayers[d].name,m=f.nodeIndices[d],v=f.tensorIndices[d];i.push(`${h}[${m}][${v}]`)}const o=t.name,u=t.getClassName(),l=i.length===0?"":i[0],c=[`${o} (${u})`,s,a,t.countParams().toString(),l];X0(c,e,r);for(let f=1;f<i.length;++f)X0(["","","","",i[f]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function u6(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function kC(t,e){if(t===null)return null;if(typeof t=="string")return dc(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let a=0;a<r;++a){const s=t[a];u6(e,a,s)?n.push(s):n.push(kC(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const a=t[r];if(r==="name"&&typeof a=="string")n[r]=a;else{const s=dc(r);n[s]=kC(a,s)}}return n}}function IC(t,e){if(t==null)return null;if(typeof t=="string")return Ko(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let a=0;a<r;++a){const s=t[a];u6(e,a,s)?n.push(s):n.push(IC(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const a=t[r],s=Ko(r);(r==="name"||r==="className")&&typeof a=="string"?n[s]=a:n[s]=IC(a,r)}return n}}/** @license See the LICENSE file. */const l6="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const wde=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Ri extends on{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const x=this.getClassName().toLowerCase();this.name=mw(x)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],el(this.inputs).length!==this.inputs.length)throw new we(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(x=>x.name)}`);el(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(x=>x.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const x of this.outputs){const w=x.sourceLayer,N=x.nodeIndex,C=x.tensorIndex;this.outputLayers.push(w),this.outputLayersNodeIndices.push(N),this.outputLayersTensorIndices.push(C)}for(const x of this.inputs){const w=x.sourceLayer,N=x.nodeIndex,C=x.tensorIndex;fo(N===0,"input layer has >1 nodes"),fo(C===0,"input layer has >1 tensors"),this.inputLayers.push(w),this.inputLayersNodeIndices.push(N),this.inputLayersTensorIndices.push(C)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let x=0;x<this.inputLayers.length;x++){const w=this.inputLayers[x];if(!(w instanceof Ng))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${x} (0-based) originates from layer type ${w.getClassName()}.`);this.inputNames.push(w.name),this.feedInputShapes.push(w.batchInputShape),this.feedInputNames.push(w.name)}for(const x of this.outputLayers)this.outputNames.push(x.name);this.internalInputShapes=this.inputs.map(x=>x.shape),this.internalOutputShapes=this.outputs.map(x=>x.shape);const n={},r={},a={},s={},i={},o=[],u=(x,w,N,C,E,$)=>{(C==null||E==null||$==null)&&(C=x.sourceLayer,E=x.nodeIndex,$=x.tensorIndex);const I=C.inboundNodes[E];if(N.indexOf(I)!==-1)throw new li(`The tensor ${x.name} at layer "${C.name}" is part of a cycle.`);if(w.indexOf(I)!==-1)return;this.containerNodes.add(Ri.nodeKey(C,E)),C.id in i||(i[C.id]=Object.keys(i).length),N.indexOf(I)===-1&&N.push(I);const D=I.inboundLayers.length;for(let k=0;k<D;k++){const A=I.inputTensors[k],O=I.inboundLayers[k],B=I.nodeIndices[k],z=I.tensorIndices[k];u(A,w,N,O,B,z)}for(w.push(I);N.indexOf(I)>=0;)N.splice(N.indexOf(I),1);o.push(I)},l=[],c=[];for(const x of this.outputs)u(x,l,c);const f=o.slice().reverse();for(const x of f){r[x.id]=x,x.id in n||(n[x.id]=0);let w=n[x.id];const N=a[x.outboundLayer.id]==null?0:a[x.outboundLayer.id];w=Math.max(w,N),a[x.outboundLayer.id]=w,s[x.outboundLayer.id]=x.outboundLayer,n[x.id]=w;for(let C=0;C<x.inboundLayers.length;C++){const E=x.inboundLayers[C],$=x.nodeIndices[C],I=E.inboundNodes[$],D=n[I.id]==null?0:n[I.id];n[I.id]=Math.max(w+1,D),r[I.id]=I}}const d={};for(const x in n){const w=n[x];w in d||(d[w]=[]),d[w].push(r[x])}const h={};for(const x in a){const w=a[x];w in h||(h[w]=[]),h[w].push(s[x])}let m=Object.keys(h).map(x=>parseInt(x,10)).sort(Sy);this.layers=[];for(const x of m){const w=h[x];w.sort((N,C)=>{const E=i[N.id],$=i[C.id];return E<$?-1:E>$?1:0});for(const N of w)N instanceof Ri&&this.internalContainerRefs.push(N),this.layers.push(N)}this.layersByDepth=h,m=Object.keys(d).map(x=>parseInt(x,10)).sort(Sy);const v=this.inputs.slice(),y=[];for(const x of m)for(const w of d[x]){const N=w.outboundLayer;if(N!=null){for(const C of w.inputTensors)if(v.indexOf(C)===-1)throw new li(`Graph disconnected: cannot obtain value for tensor ${C} at layer "${N.name}". The following previous layers were accessed without issue: ${y}`);for(const C of w.outputTensors)v.push(C);y.push(N.name)}}this.nodesByDepth=d;const b=this.layers.map(x=>x.name);for(const x of b){const w=b.filter(N=>N===x).length;if(w!==1)throw new li(`The name "${x}" is used ${w} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(b))}this.outboundNodes=[],this.inboundNodes=[],new vw({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(x=>null),outputMasks:this.outputs.map(x=>null),inputShapes:this.inputs.map(x=>x.shape),outputShapes:this.outputs.map(x=>x.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new we("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let a=0;const s=wde(e);s&&this.parseWeights(e);for(const o of this.layers)for(const[u,l]of o.weights.entries()){const c=s?`${l.name.split("/").slice(0,-1).join("/")+"/"}${u}`:l.originalName;if(r[c]!=null)throw new we(`Duplicate weight name: ${c}`);r[c]=l,a++}const i=[];for(const o in e){let u=o;if(r[o]==null){const l=o.split("/");u=l.slice(0,-2).concat([l[l.length-1]]).join("/")}if(r[u]!=null)i.push([r[u],e[o]]);else if(n)throw new we(`Provided weight data has no target variable: ${o}`);delete r[u]}if(n){const o=[];for(const u in r)o.push(u);if(o.length>0)throw new we(`${o.length} of ${a} weights are not set: ${o}`)}sA(i)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),a=["vars","layer_checkpoint_dependencies"],s=r.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!a.includes(i)).join("/");s!==n&&(e[s]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${l6}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=IC(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return Te(()=>{e=Dn(e);const r=new ju;for(let a=0;a<this.inputs.length;++a)r.add(this.inputs[a],e[a]);return wh(this.outputs,r,n)})}computeMask(e,n){return Te(()=>{e=Dn(e);let r;return n==null?r=Rc(null,e.length):r=Dn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=W0(e);if(n.length!==this.inputLayers.length)throw new we(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<n.length;o++){const u=this.inputLayers[o],l=n[o],c=u.name+"_0_0";r[c]=l}const a=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(Sy);if(a.length>1)for(const o of a){const u=this.nodesByDepth[o];for(const l of u){const c=l.outboundLayer;if(this.inputLayers.map(v=>v.id).indexOf(c.id)!==-1)continue;const f=[];for(let v=0;v<l.inboundLayers.length;v++){const y=l.inboundLayers[v],b=l.nodeIndices[v],x=l.tensorIndices[v],w=`${y.name}_${b}_${x}`,N=r[w];f.push(N)}const d=c.computeOutputShape(qa(f)),h=W0(d),m=c.inboundNodes.indexOf(l);for(let v=0;v<h.length;v++){const y=`${c.name}_${m}_${v}`;r[y]=h[v]}}}const s=[],i=[];for(let o=0;o<this.outputLayers.length;o++){const u=this.outputLayers[o],l=this.outputLayersNodeIndices[o],c=this.outputLayersTensorIndices[o],f=`${u.name}_${l}_${c}`;i.push(f)}for(let o=0;o<i.length;o++){const u=i[o];fo(u in r),s.push(r[u])}return qa(s)}runInternalGraph(e,n){n==null&&(n=Rc(null,e.length));const r={};for(let u=0;u<this.inputs.length;++u){const l=this.inputs[u],c=e[u],f=n[u];r[l.id]=[c,f]}const a=Object.keys(this.nodesByDepth).map(u=>parseInt(u,10)).sort(Sy);for(const u of a){const l=this.nodesByDepth[u];for(const c of l){const f=c.outboundLayer,d=c.inputTensors,h=c.outputTensors,m=new Array;for(const v of d)v.id in r&&m.push(r[v.id]);if(m.length===d.length){let v={},y,b,x,w;if(c.callArgs!=null&&(v=c.callArgs),m.length===1){const[N,C]=m[0];v.mask==null&&(v.mask=C),x=Dn(f.call(N,v)),w=Dn(f.computeMask(N,C)),y=[N],b=[C]}else y=m.map(N=>N[0]),b=m.map(N=>N[1]),v.mask==null&&(v.mask=b),x=Dn(f.call(y,v)),w=Dn(f.computeMask(y,b));if(f.activityRegularizer)throw new Jt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let N=0;N<h.length;++N){const C=h[N],E=x[N],$=w[N];r[C.id]=[E,$]}}}}const s=[],i=[],o=[];for(const u of this.outputs){fo(u.id in r,`Could not compute output ${u.name} : ${u.id}`);const[l,c]=r[u.id];o.push(l.shape),s.push(l),i.push(c)}return[s,i,o]}buildNodeConversionMap(e){const n={};let r;for(const a of this.layers){r=a instanceof Ri?1:0;for(let s=0;s<a.inboundNodes.length;s++){const i=Ri.nodeKey(a,s);this.containerNodes.has(i)&&(n[i]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new we("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new we(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new we(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Te(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const a=Ri.nodeKey(n,r);this.containerNodes.has(a)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const i of this.layers){const o=i.getClassName(),u=i.getConfig(),l=[];for(let f=0;f<i.inboundNodes.length;f++){const d=i.inboundNodes[f],h=Ri.nodeKey(i,f);let m={};if(this.containerNodes.has(h)){if(d.callArgs)try{JSON.stringify(d.callArgs),m=d.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${d.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),m={}}if(d.inboundLayers.length>0){const v=[];for(let y=0;y<d.inboundLayers.length;y++){const b=d.inboundLayers[y],x=d.nodeIndices[y],w=d.tensorIndices[y],N=Ri.nodeKey(b,x);let C=n[N];C==null&&(C=0),v.push([b.name,C,w,m])}l.push(v)}}}const c={};c.name=i.name,c.className=o,c.config=u,c.inboundNodes=l,r.push(c)}e.layers=r;const a=[];for(let i=0;i<this.inputLayers.length;i++){const o=this.inputLayers[i],u=this.inputLayersNodeIndices[i],l=Ri.nodeKey(o,u);if(!this.containerNodes.has(l))continue;let c=n[l];c==null&&(c=0);const f=this.inputLayersTensorIndices[i];a.push([o.name,c,f])}e.inputLayers=a;const s=[];for(let i=0;i<this.outputLayers.length;i++){const o=this.outputLayers[i],u=this.outputLayersNodeIndices[i],l=Ri.nodeKey(o,u);if(!this.containerNodes.has(l))continue;let c=n[l];c==null&&(c=0);const f=this.outputLayersTensorIndices[i];s.push([o.name,c,f])}return e.outputLayers=s,e}static fromConfig(e,n,r={},a=!1){const s={},i={};function o(y,b){y.name in i?i[y.name].push(b):i[y.name]=[b]}function u(y,b){const x=[];let w;for(const N of b){const C=N[0],E=N[1],$=N[2];if(w=N[3]==null?{}:N[3],!(C in s)){o(y,b);return}const I=s[C];if(I.inboundNodes.length<=E){o(y,b);return}const D=I.inboundNodes[E];x.push(D.outputTensors[$])}x.length>0&&y.apply(qa(x),w)}function l(y){const b=y.name,x=Zo(y,n.customObjects!=null?n.customObjects:{});x.setFastWeightInitDuringBuild(a),s[b]=x,y.inboundNodes.forEach(N=>{if(!(N instanceof Array))throw new we(`Corrupted configuration, expected array for nodeData: ${N}`);o(x,N)})}const c=n.name,f=n.layers;for(const y of f)l(y);for(;!afe(i);)for(const y of f){const b=s[y.name];if(b.name in i){const x=i[b.name];delete i[b.name];for(const w of x)u(b,w)}}const d=[],h=[],m=n.inputLayers;for(const y of m){const b=y[0],x=y[1],w=y[2];fo(b in s);const C=s[b].inboundNodes[x].outputTensors;d.push(C[w])}const v=n.outputLayers;for(const y of v){const b=y[0],x=y[1],w=y[2];fo(b in s);const C=s[b].inboundNodes[x].outputTensors;h.push(C[w])}return new e({inputs:d,outputs:h,name:c})}get stateful(){if(this._stateful)throw new we("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Te(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xde(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(a=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const a=[];return e.forEach(s=>{s in t?a.push(t[s]):a.push(null)}),a}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function c6(t,e){return xde(t,e,"classWeight")}async function f6(t,e,n,r){if(n!=null){const a=Te(()=>{if(t.shape.length===1)return Jo(t);if(t.shape.length===2){if(t.shape[1]>1)return Cd(t,1);if(t.shape[1]===1)return be(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await a.data());rn(a);const i=[];return s.forEach(o=>{if(n[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);i.push(n[o])}),ca(i,"float32")}else return null}function Sde(t,e){return ge(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Nde=32;function d6(t,e){let n,r;const a=e;n=a.xs,r=a.ys,Y(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=m3("input",t.inputNames,n),i=m3("output",t.outputNames,r),o=s[0].shape[0];Y(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),Y(i.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let u=0;u<s.length;u++)Y(s[u].shape[0]===o,()=>`Batch size mismatch: input ${t.inputNames[u]} has ${s[u].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);for(let u=0;u<i.length;u++)Y(i[u].shape[0]===o,()=>`Batch size mismatch: output ${t.outputNames[u]} has ${i[u].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);return{xs:s,ys:i}}function m3(t,e,n){if(n instanceof er)return[n];if(Array.isArray(n))return Y(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const a of e){if(n[a]==null)throw new we(`The feature data generated by the dataset lacks the required ${t} key '${a}'.`);r.push(n[a])}return r}}function Cde(t){if(t.length===3)throw new Jt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function Ede(t,e,n){const r=n.batchesPerEpoch!=null;if(Y(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),Y(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),Y(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),Y(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),Y(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const a=n.validationData!=null;let s,i;if(a)if(g3(n.validationData))Y(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const y=Cde(n.validationData);s=y.xs,i=y.ys}const o=t.makeTrainFunction(),u=t.getDedupedMetricsNames();let l;a?l=u.slice().concat(u.map(y=>"val_"+y)):l=u.slice();const c=t6(n.callbacks,n.yieldEvery),f=n.verbose==null?1:n.verbose,{callbackList:d,history:h}=n6(c,f,n.epochs,null,null,Tde(e,n),null,a,l);d.setModel(t),t.history=h,await d.onTrainBegin(),t.stopTraining_=!1;let m=n.initialEpoch==null?0:n.initialEpoch,v=await e.iterator();for(;m<n.epochs;){const y={};await d.onEpochBegin(m);let b=0,x=0;for(r||(v=await e.iterator());!r||b<n.batchesPerEpoch;){const w=await v.next();if(r&&w.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${b} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(w.value!=null){const{xs:N,ys:C}=d6(t,w.value),E={};E.batch=x,E.size=N[0].shape[0],await d.onBatchBegin(x,E);const $=[];if(n.classWeight!=null){const k=c6(n.classWeight,t.outputNames);for(let A=0;A<k.length;++A)$.push(await f6(C[A],null,k[A]))}const I=N.concat(C).concat($),D=o(I);rn(I);for(let k=0;k<u.length;++k){const A=u[k],O=D[k];E[A]=O,Lr(O)}await d.onBatchEnd(x,E),e6(E),x++,b++}if(r?b>=n.batchesPerEpoch:w.done){if(a){let N;g3(n.validationData)?N=Dn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):N=Dn(t.evaluate(s,i,{batchSize:n.validationBatchSize==null?Nde:n.validationBatchSize,verbose:0}));for(let C=0;C<t.metricsNames.length;++C)y[`val_${t.metricsNames[C]}`]=N[C]}break}if(t.stopTraining_)break}if(await d.onEpochEnd(m,y),m++,t.stopTraining_)break}return await d.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Tde(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function g3(t){return typeof t.iterator=="function"}function Dde(t){return typeof t.next=="function"}async function Ade(t,e,n){n=n||{};const r=n.batches!=null,a=t.testFunction;let s=[];if(n.verbose>0)throw new Jt("Verbose mode is not implemented yet.");Y(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=Dde(e)?e:await e.iterator();let o=0,u=0;for(;!r||u<n.batches;){const l=await i.next();if(s=Te(()=>{if(l.value){const{xs:c,ys:f}=d6(t,l.value),d=c.concat(f),h=Te(()=>a(d));if(rn(d),u===0)for(let v=0;v<h.length;++v)s.push(Ct(0));const m=d[0].shape[0];for(let v=0;v<h.length;++v){const y=h[v],b=s[v];s[v]=Te(()=>Ve(s[v],ge(m,y))),u>0&&rn(b)}rn(h),o+=m,++u}return s}),l.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let l=0;l<s.length;++l){const c=s[l];s[l]=bt(s[l],o),rn(c)}return qa(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DS(t){Y(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function dh(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>xc(r,e,n-e)):xc(t,e,n-e)}function _C(t,e){return Te(()=>t==null?null:Array.isArray(t)?t.map(n=>_C(n,e)):z5(t,e.dtype==="int32"?e:ot(e,"int32")))}function AS(t,e){const n=[];let r=0,a=null;for(;r<t;)a=r+e,a>=t&&(a=t),n.push([r,a]),r=a;return n}function p6(t){const e=[];t instanceof er&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(wg(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Oi(t,e){if(t==null)return;const n=[];if(e instanceof er)n.push(e.id);else if(Array.isArray(e))e.forEach(a=>n.push(a.id));else if(e!=null)for(const a in e){const s=e[a];n.push(s.id)}const r=[];if(t instanceof er)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(a=>{n.indexOf(a.id)===-1&&r.push(a)});else if(t!=null)for(const a in t){const s=t[a];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(a=>{a.isDisposed||a.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $de(t){return t instanceof er}function OC(t){return Array.isArray(t)}function v3(t){return!$de(t)&&!OC(t)}function y3(t,e,n,r=!0,a=""){if(e==null||e.length===0){if(t!=null){let i=!1;if(OC(t)&&t.length>0)i=!0;else if(v3(t)){for(const o in t)if(t.hasOwnProperty(o)){i=!0;break}}else i=!0;if(i)throw new we(`Error when checking model ${a} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(i=>null);let s;if(v3(t)){t=t,s=[];for(const i of e){if(t[i]==null)throw new we(`No data provided for "${i}". Need data for each key in: ${e}`);s.push(t[i])}}else if(OC(t)){if(t=t,t.length!==e.length)throw new we(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new we(`The model ${a} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=p6(s),n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const o=s[i];if(o.shape.length!==n[i].length)throw new we(`Error when checking ${a}: expected ${e[i]} to have ${n[i].length} dimension(s). but got array with shape ${o.shape}`);for(let u=0;u<n[i].length;++u){if(u===0&&!r)continue;const l=o.shape[u],c=n[i][u];if(c!=null&&c>=0&&l!==c)throw new we(`${a} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${a} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return s}function kde(t,e,n){const r=el(t.map(s=>s.shape[0]));r.sort();const a=el(e.map(s=>s.shape[0]));if(a.sort(),r.length>1)throw new we(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(a.length>1)throw new we(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&a.length>0&&!fn(r,a))throw new we(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${a[0]} target sample(s).`)}function Ide(t,e,n){const r=[yw,bw,Xh];for(let a=0;a<t.length;++a){const s=t[a],i=e[a],o=n[a];if(i!=null){if(i===Xh&&s.shape[s.shape.length-1]===1)throw new we(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(i)!==-1){const u=s.shape.slice(1),l=o.slice(1);for(let c=0;c<u.length;++c){const f=u[c],d=l[c];if(d!=null&&f!==d)throw new we(`A target Tensor with shape ${s.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function b3(t,e,n,r=!0,a=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new we(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new we(`The model expects ${e.length} ${a} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const o=s[i];if(o.shape.length!==n[i].length)throw new we(`Error when checking ${a}: expected ${e[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let u=0;u<n[i].length;++u){if(u===0&&!r)continue;const l=o.shape[u],c=n[i][u];if(c!=null&&c!==l)throw new we(`Error when checking ${a}: expected ${e[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function _de(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const a of e){let s=n.hasOwnProperty(a)?n[a]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const Ode="layers-model";class cd extends Ri{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new we("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");mde(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=hde(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Dl))throw new we("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new we(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push(TS(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new we(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(o=>TS(o))}else{const i=TS(e.loss);this.outputs.forEach(o=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const o=this.internalOutputShapes[i],u=this.outputNames[i];this.feedOutputNames.push(u),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[i])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],wc("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const o=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([o,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const a=_de(e.metrics,this.outputNames),s=(i,o,u)=>{this.outputNames.length>1&&(o=this.outputNames[i]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([u,i])};wc("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const o=a[i];(l=>{const c="";let f,d,h;for(const m of l){if(typeof m=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(m)!==-1){const y=this.internalOutputShapes[i];y[y.length-1]===1||this.lossFunctions[i]===bw?["accuracy","acc"].indexOf(m)!==-1?d=a6:["crossentropy","ce"].indexOf(m)!==-1&&(d=ade):this.lossFunctions[i]===H0?["accuracy","acc"].indexOf(m)!==-1?d=sde:["crossentropy","ce"].indexOf(m)!==-1&&(d=o6):["accuracy","acc"].indexOf(m)!==-1?d=s6:["crossentropy","ce"].indexOf(m)!==-1&&(d=i6);let b;["accuracy","acc"].indexOf(m)!==-1?b="acc":["crossentropy","ce"].indexOf(m)!==-1&&(b="ce"),h=d,f=c+b}else h=pde(m),f=c+Ey(m);let v;wc(f,()=>{v=h}),s(i,f,v)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const a=r.batchSize==null?32:r.batchSize;DS(a);const i=this.standardizeUserDataXY(e,n,!0,a);try{const o=i[0].concat(i[1]);this.makeTestFunction();const u=this.testFunction,l=this.testLoop(u,o,a,r.verbose,r.steps);return qa(l)}finally{Oi(i[0],e),Oi(i[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),Ade(this,e,n)}checkNumSamples(e,n,r,a="steps"){let s;if(r!=null){if(s=null,n!=null)throw new we(`If ${a} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new we(`Either the input data should have a defined shape, or ${a} shoud be specified.`);return s}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new we("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),a=r?n:[n],s=this.retrieveSymbolicTensors(a),i=new ju;if(e instanceof er&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new we(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let u=0;u<this.inputs.length;++u)i.add(this.inputs[u],e[u])}else for(const u of this.inputs){const l=e[u.name];if(l==null)throw new we(`No value is provided for the model's input ${u.name}`);i.add(u,l)}const o=wh(s,i);return r?o:o[0]}retrieveSymbolicTensors(e){const n=Rc(null,e.length);let r=e.length;for(const a of this.layers){const s=Array.isArray(a.output)?a.output:[a.output],i=s.map(o=>o.name);for(let o=0;o<e.length;++o){const u=i.indexOf(e[o]);if(u!==-1&&(n[o]=s[u],r--),r===0)break}if(r===0)break}if(r>0){const a=[];throw n.forEach((s,i)=>{s==null&&a.push(e[i])}),new we(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(a)}`)}return n}predictLoop(e,n=32,r=!1){return Te(()=>{const a=this.checkNumSamples(e);if(r)throw new Jt("Verbose predictLoop() is not implemented yet.");const s=AS(a,n),i=this.outputs.map(o=>[]);for(let o=0;o<s.length;++o)Te(()=>{const l=s[o][0],c=s[o][1],f=dh(e,l,c),d=[];if(Array.isArray(f))for(let m=0;m<f.length;++m)d.push({key:this.inputs[m],value:f[m]});else d.push({key:this.inputs[0],value:f});const h=new ju(d);return wh(this.outputs,h)}).forEach((l,c)=>i[c].push(l));return qa(i.map(o=>wr(o,0)))})}predict(e,n={}){const r=p6(e);b3(r,this.inputNames,this.feedInputShapes,!1);try{const a=n.batchSize==null?32:n.batchSize;return DS(a),this.predictLoop(r,a)}finally{Oi(r,e)}}predictOnBatch(e){b3(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,a){if(this.optimizer_==null)throw new li("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let i=0;i<this.feedOutputShapes.length;++i){const o=this.feedOutputShapes[i];this.feedLossFns[i]===H0?s.push(o.slice(0,o.length-1).concat([1])):s.push(o)}if(e=y3(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=y3(n,this.feedOutputNames,s,!1,"target"),kde(e,n),Ide(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&a!=null&&a>0&&e[0].shape[0]%a!==0)throw new we(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${a}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,a,s=!0,i){const[o,u]=this.standardizeUserDataXY(e,n,s,i);if(r!=null)throw new Error("sample weight is not supported yet.");let l=null;if(a!=null){const c=c6(a,this.outputNames);l=[];for(let f=0;f<c.length;++f)l.push(await f6(u[f],null,c[f]))}return[o,u,l]}testLoop(e,n,r,a=0,s){return Te(()=>{const i=this.checkNumSamples(n,r,s,"steps"),o=[];if(a>0)throw new Jt("Verbose mode is not implemented yet.");if(s!=null)throw new Jt("steps mode in testLoop() is not implemented yet");{const u=AS(i,r),l=ca(Vi(0,i));for(let c=0;c<u.length;++c){const f=u[c][0],d=u[c][1],h=xc(l,f,d-f),m=_C(n,h),v=e(m);if(c===0)for(let y=0;y<v.length;++y)o.push(Ct(0));for(let y=0;y<v.length;++y){const b=v[y];o[y]=Ve(o[y],ge(d-f,b))}}for(let c=0;c<o.length;++c)o[c]=bt(o[c],i)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const a=e[r];let s=a;if(r3(e,a)>1){const i=r3(e.slice(0,r),a);s+=`_${i}`}n.push(s)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],o=()=>{const f=[];for(let v=0;v<this.inputs.length;++v)f.push({key:this.inputs[v],value:r[v]});const d=new ju(f),h=wh(this.outputs,d,{training:!0});let m;for(let v=0;v<this.lossFunctions.length;++v){const y=this.lossFunctions[v];let b=y(a[v],h[v]);s[v]!=null&&(b=Sde(b,s[v]));const x=or(b);n.push(x),v===0?m=b:m=Ve(m,b)}for(let v=0;v<this.metricsTensors.length;++v){let y;if(this.outputs.length>1&&v<this.outputs.length)y=n[v];else{const b=this.metricsTensors[v][0],x=this.metricsTensors[v][1];y=or(b(a[x],h[x]))}Lr(y),i.push(y)}return m=or(m),this.calculateLosses().forEach(v=>{m=Ve(m,v)}),m},u=this.collectedTrainableWeights.map(f=>f.read());return[this.optimizer_.minimize(o,!0,u)].concat(i)}}makeTestFunction(){this.testFunction=e=>Te(()=>{const n=[];let r;const a=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let l=0;l<this.inputs.length;++l)i.push({key:this.inputs[l],value:a[l]});const o=new ju(i),u=wh(this.outputs,o);for(let l=0;l<this.lossFunctions.length;++l){const c=this.lossFunctions[l],f=or(c(s[l],u[l]));l===0?r=f:r=Ve(r,f),n.push(r)}for(let l=0;l<this.metricsTensors.length;++l){const c=this.metricsTensors[l][0],f=this.metricsTensors[l][1],d=or(c(s[f],u[f]));n.push(d)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let a,s,i,o,u,l,c,f,d;try{const h=r.batchSize==null?32:r.batchSize;DS(h);const v=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,h);a=v[0],s=v[1],d=v[2];let y=!1,b;if(r.validationData!=null&&r.validationData.length>0){if(y=!0,r.validationData.length===2)u=r.validationData[0],l=r.validationData[1];else throw r.validationData.length===3?new Jt("validationData including sample weights is not supported yet."):new we(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const k=await this.standardizeUserData(u,l,null,null,!0,h);c=k[0],f=k[1],b=c.concat(f)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){y=!0;const D=Math.floor(a[0].shape[0]*(1-r.validationSplit)),k=a[0].shape[0];c=dh(a,D,k),i=a,a=dh(a,0,D),f=dh(s,D,k),o=s,s=dh(s,0,D),b=c.concat(f)}else r.validationSteps!=null&&(y=!0);const x=a.concat(s).concat(d);this.checkTrainableWeightsConsistency();const w=this.makeTrainFunction(),N=this.getDedupedMetricsNames();let C,E;y?(this.makeTestFunction(),C=this.testFunction,E=N.slice().concat(N.map(D=>"val_"+D))):(C=null,b=[],E=N.slice());const $=t6(r.callbacks,r.yieldEvery);return await this.fitLoop(w,x,N,h,r.epochs,r.verbose,$,C,b,r.shuffle,E,r.initialEpoch,null,null)}finally{this.isTraining=!1,Oi(a,e),Oi(s,n),Oi(i,e),Oi(o,n),Oi(c,u),Oi(f,l),d!=null&&rn(d)}}async fitLoop(e,n,r,a,s,i,o,u,l,c,f,d,h,m){a==null&&(a=32),s==null&&(s=1),c==null&&(c=!0),d==null&&(d=0);let v=!1;if(u!=null&&l!=null&&(v=!0),m!=null&&(v=!0,h==null))throw new we("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const y=this.checkNumSamples(n,a,h,"steps_per_epoch");let b;y!=null&&(b=Vi(0,y)),i==null&&(i=1);const{callbackList:x,history:w}=n6(o,i,s,d,y,h,a,v,f);x.setModel(this),this.history=w,await x.onTrainBegin(),this.stopTraining_=!1;for(let N=d;N<s;++N){await x.onEpochBegin(N);const C={};if(h!=null)throw new Jt("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new Jt("batch shuffling is not implemneted yet");c&&BJ(b);const E=ca(b),$=AS(y,a);for(let I=0;I<$.length;++I){const D={};if(await x.onBatchBegin(I,D),Te(()=>{const k=$[I][0],A=$[I][1],O=xc(E,k,A-k);D.batch=I,D.size=A-k;const B=_C(n,O),z=e(B);for(let L=0;L<r.length;++L){const F=r[L],R=z[L];D[F]=R,Lr(R)}if(I===$.length-1&&v){const L=this.testLoop(u,l,a);for(let F=0;F<r.length;++F){const R=r[F],q=L[F];Lr(q),C["val_"+R]=q}}}),await x.onBatchEnd(I,D),e6(D),this.stopTraining_)break}E.dispose()}if(await x.onEpochEnd(N,C),this.stopTraining_)break}return await x.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return Ede(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),a=r[0],s=r[1],o=this.makeTrainFunction()(a.concat(s)),u=[];for(const l of o){const c=await l.data();u.push(c[0])}return rn(o),Oi(r[0],e),Oi(r[1],n),qa(u)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,a=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let i=0;i<a.length;++i)r&&!a[i].trainable||n.push({name:a[i].originalName,tensor:s[i]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=wO().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-wO().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Ko(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Ko(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const a of n)if(typeof r[a]=="string")e[a]=Ko(r[a]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ko(Ey(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Ko(Ey(e)));{const e={};for(const n in this.metrics)e[n]=Ko(Ey(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=kC(e.optimizer_config),r=Zo(n);let a;if(typeof e.loss=="string")a=dc(e.loss);else if(Array.isArray(e.loss))a=e.loss.map(i=>dc(i));else if(e.loss!=null){a={};for(const i in e.loss)a[i]=dc(e.loss[i])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(i=>dc(i));else if(e.metrics!=null){s={};for(const i in e.metrics)s[i]=dc(e.metrics[i])}this.compile({loss:a,metrics:s,optimizer:r})}async save(e,n){if(typeof e=="string"){const l=wL(e);if(l.length===0)throw new we(`Cannot find any save handlers for URL '${e}'`);if(l.length>1)throw new we(`Found more than one (${l.length}) save handlers for URL '${e}'`);e=l[0]}if(e.save==null)throw new we("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await nC(this.getNamedWeights(n)),o={modelTopology:this.toJSON(null,!1),format:Ode,generatedBy:`TensorFlow.js tfjs-layers v${l6}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const l="optimizer",{data:c,specs:f}=await nC(await this.optimizer.getWeights(),l);r.specs.push(...f),r.data=vL([r.data,c])}return this.userDefinedMetadata!=null&&(h3(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){h3(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}cd.className="Model";Ke(cd);class h6 extends cd{}h6.className="Functional";Ke(h6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Yh extends cd{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:mw("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new we(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Yh||e instanceof cd;let r;if(n){if(r=e,r.outputs.length!==1)throw new we("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new we("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new we("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const a=Rfe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new we(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new we("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=X5(this.outputs[0])}this.inboundNodes=[],new vw({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Rc(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(a=>a.shape),outputShapes:this.outputs[0].shape})}else{const a=e.apply(this.outputs[0]);if(Array.isArray(a))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[a],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(wn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new cd({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new li("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new li("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new li("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new li("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},a=!1){let s,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new we("Legacy serialization format not supported yet.");s=n}else Y(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,i=n;const o=new e(i);if(!(o instanceof Yh))throw new Jt(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const u of s){const c=Zo(u,void 0,a);a&&c.setFastWeightInitDuringBuild(!0),o.add(c)}return o}set stopTraining(e){if(this.model==null)throw new we("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new we("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Yh.className="Sequential";Ke(Yh);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let va=class extends tp{getConfig(){return{}}};class m6 extends va{apply(e,n=1){return bfe(e,n)}}m6.className="elu";Ke(m6);class g6 extends va{apply(e){return nD(e)}}g6.className="selu";Ke(g6);class v6 extends va{apply(e){return $o(e)}}v6.className="relu";Ke(v6);class y6 extends va{apply(e){return Te(()=>_c(6,$o(e)))}}y6.className="relu6";Ke(y6);class b6 extends va{apply(e){return e}}b6.className="linear";Ke(b6);class w6 extends va{apply(e){return bo(e)}}w6.className="sigmoid";Ke(w6);class x6 extends va{apply(e){return xfe(e)}}x6.className="hardSigmoid";Ke(x6);class S6 extends va{apply(e){return Jd(e)}}S6.className="softplus";Ke(S6);class N6 extends va{apply(e){return wfe(e)}}N6.className="softsign";Ke(N6);class C6 extends va{apply(e){return Ic(e)}}C6.className="tanh";Ke(C6);let lA=class extends va{apply(e,n=-1){return aw(e,n)}};lA.className="softmax";Ke(lA);class E6 extends va{apply(e,n=-1){return GT(e,n)}}E6.className="logSoftmax";Ke(E6);class T6 extends va{apply(e){return Te(()=>Te(()=>{const n=Math.sqrt(2),r=ge(.5,Ve(1,VT(bt(e,n))));return ge(e,r)}))}}T6.className="gelu";Ke(T6);class D6 extends va{apply(e){return Te(()=>ge(.5,ge(e,Ve(1,Ic(ge(na(bt(2,Math.PI)),Ve(e,ge(.044715,su(e,3)))))))))}}D6.className="gelu_new";Ke(D6);class A6 extends va{apply(e){return Te(()=>ge(e,Ic(Jd(e))))}}A6.className="mish";Ke(A6);class $6 extends va{apply(e,n=1){return Te(()=>ge(bo(ge(e,n)),e))}}$6.className="swish";Ke($6);function fl(t){return t.getClassName()}function $S(t,e={}){return bg(t,ii.getMap().classNameMap,e,"activation")}function dl(t){if(t==null){const e={};return e.className="linear",e.config={},$S(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},$S(e)}else return t instanceof va?t:$S(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Fde(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class k6 extends tp{}class I6 extends k6{constructor(e){super(),Fde(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Te(()=>{let n=Tr([1]);return this.hasL1&&(n=Ve(n,ht(ge(this.l1,Er(e))))),this.hasL2&&(n=Ve(n,ht(ge(this.l2,xg(e))))),be(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}I6.className="L1L2";Ke(I6);const w3={l1l2:"L1L2"};function Bn(t){return XD(t)}function x3(t,e={}){return bg(t,ii.getMap().classNameMap,e,"regularizer")}function Yn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in w3?w3[t]:t,config:{}};return x3(n)}else return t instanceof k6?t:x3(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class _6 extends on{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Pt(e);let r=$o(e);return this.maxValue!=null&&(r=ys(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}_6.className="ReLU";Ke(_6);class O6 extends on{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Pt(e);return K1(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}O6.className="LeakyReLU";Ke(O6);class F6 extends on{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Xn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Yn(e.alphaRegularizer),this.alphaConstraint=Ir(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new we(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=wn(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const a of this.sharedAxes)n[a-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let a=1;a<e.length;++a)r[a]=e[a];this.inputSpec=[new Ar({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Pt(e),tw(e,this.alpha.read())}getConfig(){const e={alphaInitializer:tr(this.alphaInitializer),alphaRegularizer:Bn(this.alphaRegularizer),alphaConstraint:kr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}F6.className="PReLU";Ke(F6);let R6=class extends on{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Jt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Pt(e);return fg(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};R6.className="ELU";Ke(R6);class M6 extends on{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Pt(e);return ge(r,ot(Ts(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}M6.className="ThresholdedReLU";Ke(M6);class P6 extends on{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new lA().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return Te(()=>{let r=Pt(e);const a=n.mask;if(a!=null){const s=ge(ft(ps(r.shape),ot(a,r.dtype)),Ct(-1e9));r=Ve(r,s)}return this.axis instanceof Array?this.axis.length>1?bs(ft(r,Y1(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}P6.className="Softmax";Ke(P6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function fd(t,e,n){if(typeof t=="number")return Rc(t,e);if(t.length!==e)throw new we(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const a=t[r];if(!mfe(a))throw new we(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${a}`)}return t}function Wi(t,e,n,r,a=1){if(t==null)return t;const s=e+(e-1)*(a-1);let i;return n==="same"?i=t:i=t-s+1,Math.floor((i+r-1)/r)}function po(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+cl([n-e,0]);else if(r==="same")t=t*e;else throw new we(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cA(t,e){return Te(()=>(hr(e),e==="channelsFirst"?pn(t,[0,2,3,1]):t))}function B6(t,e){return Te(()=>(hr(e),e==="channelsFirst"?pn(t,[0,2,3,4,1]):t))}function Rde(t,e,n,r=1,a="valid",s,i=1){return Te(()=>{if(s==null&&(s=ji()),hr(s),t.shape.length!==3)throw new we(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new we(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new we(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(s==="channelsFirst"&&(t=pn(t,[0,2,1])),a==="causal")throw new Jt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=LT(t,e,r,a==="same"?"same":"valid","NWC",i);return n!=null&&(o=Ki(o,n)),o})}function S3(t,e,n,r=[1,1],a="valid",s,i,o=null){return Te(()=>{if(s==null&&(s=ji()),hr(s),t.rank!==3&&t.rank!==4)throw new we(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new we(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let u=cA(t,s);if(a==="causal")throw new Jt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=Dz({x:u,filter:e,strides:r,pad:a==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:o}),s==="channelsFirst"&&(u=pn(u,[0,3,1,2])),u})}function Mde(t,e,n,r=[1,1,1],a="valid",s,i){return Te(()=>{if(s==null&&(s=ji()),hr(s),t.rank!==4&&t.rank!==5)throw new we(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new we(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let o=B6(t,s);if(a==="causal")throw new Jt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=GL(o,e,r,a==="same"?"same":"valid","NDHWC",i),n!=null&&(o=Ki(o,n)),s==="channelsFirst"&&(o=pn(o,[0,4,1,2,3])),o})}class ww extends on{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",ww.verifyArgs(n),this.rank=e,zr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Jt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=fd(n.kernelSize,e,"kernelSize"),this.strides=fd(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,zs(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,hr(this.dataFormat),this.activation=dl(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Xn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Ir(n.biasConstraint),this.biasRegularizer=Yn(n.biasRegularizer),this.activityRegularizer=Yn(n.activityRegularizer),this.dilationRate=fd(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new we(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new we(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new we(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(fo("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!YD(e.kernelSize,"number",1,3))throw new we(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:fl(this.activation),useBias:this.useBias,biasInitializer:tr(this.biasInitializer),biasRegularizer:Bn(this.biasRegularizer),activityRegularizer:Bn(this.activityRegularizer),biasConstraint:kr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class np extends ww{constructor(e,n){super(e,n),this.kernel=null,np.verifyArgs(n),this.filters=n.filters,zr(this.filters,"filters"),this.kernelInitializer=Xn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Ir(n.kernelConstraint),this.kernelRegularizer=Yn(n.kernelRegularizer)}build(e){e=wn(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new we(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],a=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return Te(()=>{e=Pt(e);let r;const a=this.bias==null?null:this.bias.read(),s=F5(this.activation.getClassName());if(s!=null&&this.rank===2)r=S3(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=Rde(e,this.kernel.read(),a,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=S3(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=Mde(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Jt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=wn(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const i=Wi(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(i)}let a=[e[0]];return this.dataFormat==="channelsLast"?(a=a.concat(n),a.push(this.filters)):(a.push(this.filters),a=a.concat(n)),a}getConfig(){const e={filters:this.filters,kernelInitializer:tr(this.kernelInitializer),kernelRegularizer:Bn(this.kernelRegularizer),kernelConstraint:kr(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new we(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class Eg extends np{constructor(e){super(2,e),Eg.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!YD(e.kernelSize,"number",1,2))throw new we(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}Eg.className="Conv2D";Ke(Eg);class Tg extends np{constructor(e){super(3,e),Tg.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new we(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Tg.className="Conv3D";Ke(Tg);class L6 extends Eg{constructor(e){if(super(e),this.inputSpec=[new Ar({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new we(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=wn(e),e.length!==4)throw new we("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new we("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],a=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ar({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return Te(()=>{let r=Pt(e);if(r.shape.length!==4)throw new we(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const a=r.shape,s=a[0];let i,o;this.dataFormat==="channelsFirst"?(i=2,o=3):(i=1,o=2);const u=a[i],l=a[o],c=this.kernelSize[0],f=this.kernelSize[1],d=this.strides[0],h=this.strides[1],m=po(u,d,c,this.padding),v=po(l,h,f,this.padding),y=[s,m,v,this.filters];this.dataFormat!=="channelsLast"&&(r=pn(r,[0,2,3,1]));let b=WT(r,this.kernel.read(),y,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(b=pn(b,[0,3,1,2])),this.bias!=null&&(b=Ki(b,this.bias.read(),this.dataFormat)),this.activation!=null&&(b=this.activation.apply(b)),b})}computeOutputShape(e){e=wn(e);const n=e.slice();let r,a,s;this.dataFormat==="channelsFirst"?(r=1,a=2,s=3):(r=3,a=1,s=2);const i=this.kernelSize[0],o=this.kernelSize[1],u=this.strides[0],l=this.strides[1];return n[r]=this.filters,n[a]=po(n[a],u,i,this.padding),n[s]=po(n[s],l,o,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}L6.className="Conv2DTranspose";Ke(L6);class z6 extends Tg{constructor(e){if(super(e),this.inputSpec=[new Ar({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new we(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=wn(e),e.length!==5)throw new we("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new we("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],a=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ar({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return Te(()=>{let r=Pt(e);if(r.shape.length!==5)throw new we(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const a=r.shape,s=a[0];let i,o,u;this.dataFormat==="channelsFirst"?(u=2,i=3,o=4):(u=1,i=2,o=3);const l=a[u],c=a[i],f=a[o],d=this.kernelSize[0],h=this.kernelSize[1],m=this.kernelSize[2],v=this.strides[0],y=this.strides[1],b=this.strides[2],x=po(l,v,d,this.padding),w=po(c,y,h,this.padding),N=po(f,b,m,this.padding),C=[s,x,w,N,this.filters];this.dataFormat!=="channelsLast"&&(r=pn(r,[0,2,3,4,1]));let E=XL(r,this.kernel.read(),C,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(E=pn(E,[0,4,1,2,3])),this.bias!==null&&(E=Ki(E,this.bias.read(),this.dataFormat)),this.activation!==null&&(E=this.activation.apply(E)),E})}computeOutputShape(e){e=wn(e);const n=e.slice();let r,a,s,i;this.dataFormat==="channelsFirst"?(r=1,a=2,s=3,i=4):(r=4,a=1,s=2,i=3);const o=this.kernelSize[0],u=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],f=this.strides[1],d=this.strides[2];return n[r]=this.filters,n[a]=po(n[a],c,o,this.padding),n[s]=po(n[s],f,u,this.padding),n[i]=po(n[i],d,l,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}z6.className="Conv3DTranspose";Ke(z6);class W6 extends np{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new we("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new we("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new we(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Xn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Yn(n.depthwiseRegularizer),this.depthwiseConstraint=Ir(n.depthwiseConstraint),this.pointwiseInitializer=Xn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Yn(n.pointwiseRegularizer),this.pointwiseConstraint=Ir(n.pointwiseConstraint)}build(e){if(e=wn(e),e.length<this.rank+2)throw new we(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new we(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],a=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let o=0;o<this.rank;++o)s.push(1);s.push(r*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new Ar({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return Te(()=>{e=Pt(e);let r;if(this.rank===1)throw new Jt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=pn(e,[0,2,3,1])),r=rD(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Ki(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=pn(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=tr(this.depthwiseInitializer),e.pointwiseInitializer=tr(this.pointwiseInitializer),e.depthwiseRegularizer=Bn(this.depthwiseRegularizer),e.pointwiseRegularizer=Bn(this.pointwiseRegularizer),e.depthwiseConstraint=kr(this.depthwiseConstraint),e.pointwiseConstraint=kr(this.pointwiseConstraint),e}}W6.className="SeparableConv";class U6 extends W6{constructor(e){super(2,e)}}U6.className="SeparableConv2D";Ke(U6);class xw extends np{constructor(e){super(1,e),xw.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!YD(e.kernelSize,"number",1,1))throw new we(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}xw.className="Conv1D";Ke(xw);class q6 extends on{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return Te(()=>{if(e=Pt(e),this.dataFormat==="channelsLast"){const r=Cy(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Cy(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Cy(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Cy(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}q6.className="Cropping2D";Ke(q6);class V6 extends on{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,hr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,dfe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return Te(()=>{let r=Pt(e);const a=r.shape;if(this.dataFormat==="channelsFirst"){r=pn(r,[0,2,3,1]);const s=this.size[0]*a[2],i=this.size[1]*a[3],o=this.interpolation==="nearest"?go.resizeNearestNeighbor(r,[s,i]):go.resizeBilinear(r,[s,i]);return pn(o,[0,3,1,2])}else{const s=this.size[0]*a[1],i=this.size[1]*a[2];return this.interpolation==="nearest"?go.resizeNearestNeighbor(r,[s,i]):go.resizeBilinear(r,[s,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}V6.className="UpSampling2D";Ke(V6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Pde(t,e,n=[1,1],r="valid",a,s){return Te(()=>{a==null&&(a=ji()),hr(a);let i=cA(t,a);if(t.rank!==4)throw new we(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new we(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return i=cg(i,e,n,r==="same"?"same":"valid","NHWC",s),a==="channelsFirst"&&(i=pn(i,[0,3,1,2])),i})}class j6 extends ww{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Xn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Ir(e.depthwiseConstraint),this.depthwiseRegularizer=Yn(e.depthwiseRegularizer)}build(e){if(e=wn(e),e.length<4)throw new we(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new we(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],a=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",a,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Te(()=>{e=Pt(e);let r=Pde(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Ki(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=wn(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],a=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=Wi(n,this.kernelSize[0],this.padding,this.strides[0]),i=Wi(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],a,s,i]:[e[0],s,i,a]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=tr(this.depthwiseInitializer),e.depthwiseRegularizer=Bn(this.depthwiseRegularizer),e.depthwiseConstraint=kr(this.depthwiseRegularizer),e}}j6.className="DepthwiseConv2D";Ke(j6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function H6(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new we("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function a(s){return s==null||Array.isArray(s)?s:[s]}return e=a(e),n=a(n),{inputs:t,initialState:e,constants:n}}function G6(t,e,n,r=!1,a,s,i=!1,o=!1){return Te(()=>{const u=e.shape.length;if(u<3)throw new we(`Input should be at least 3D, but is ${u}D.`);const l=[1,0].concat(Vi(2,u));e=pn(e,l),i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),a!=null&&(a=ot(ot(a,"bool"),"float32"),a.rank===u-1&&(a=$a(a,-1)),a=pn(a,l)),r&&(e=yi(e,0),a!=null&&(a=yi(a,0)));const c=[];let f,d=n;const h=e.shape[0],m=bi(e);let v;a!=null&&(v=bi(a));for(let b=0;b<h;++b){const x=m[b],w=Te(()=>t(x,d));if(a==null)f=w[0],d=w[1];else{const N=Te(()=>{const C=v[b],E=ft(Ps(C),C),$=Ve(ge(w[0],C),ge(d[0],E)),I=d.map((D,k)=>Ve(ge(w[1][k],C),ge(D,E)));return{output:$,newStates:I}});f=N.output,d=N.newStates}o&&c.push(f)}let y;return o&&(y=ws(c,1)),[f,y,d]})}class Al extends on{constructor(e){super(e);let n;if(e.cell==null)throw new we("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new pA({cells:e.cell}):n=e.cell,n.stateSize==null)throw new we("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Ar({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Vi(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){DC(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let a;if(this.returnSequences?a=[e[0],e[1],r]:a=[e[0],r],this.returnState){const s=[];for(const i of n)s.push([e[0],i]);return[a].concat(s)}else return a}computeMask(e,n){return Te(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const a=this.states.map(s=>null);return[r].concat(a)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Jt("Constants support is not implemented in RNN yet.");DC(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Ar({shape:[n,null,...r]});const a=[e[0]].concat(e.slice(2));this.cell.build(a);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!fn(this.stateSpec.map(i=>i.shape[i.shape.length-1]),s))throw new we(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(i=>new Ar({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){Te(()=>{if(!this.stateful)throw new co("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new we("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(a=>Tr([r,a])):this.states_=[Tr([r,this.cell.stateSize])];else if(e==null)rn(this.states_),this.keptStates!=null&&(rn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(a=>Tr([r,a])):this.states_[0]=Tr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new we(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):rn(this.states_);for(let a=0;a<this.states_.length;++a){const s=e[a],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[a]:this.cell.stateSize,o=[r,i];if(!fn(s.shape,o))throw new we(`State ${a} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${s.shape}`);this.states_[a]=s}}this.states_=this.states_.map(a=>Lr(a.clone()))})}apply(e,n){let r=n==null?null:n.initialState,a=n==null?null:n.constants;n==null&&(n={});const s=H6(e,r,a,this.numConstants);e=s.inputs,r=s.initialState,a=s.constants;let i=[],o=[];if(r!=null){n.initialState=r,i=i.concat(r),this.stateSpec=[];for(const l of r)this.stateSpec.push(new Ar({shape:l.shape}));o=o.concat(this.stateSpec)}if(a!=null&&(n.constants=a,i=i.concat(a),this.numConstants=a.length),i[0]instanceof Co){const l=[e].concat(i),c=this.inputSpec.concat(o),f=this.inputSpec;this.inputSpec=c;const d=super.apply(l,n);return this.inputSpec=f,d}else return super.apply(e,n)}call(e,n){return Te(()=>{const r=n==null?null:n.mask,a=n==null?null:n.training;let s=n==null?null:n.initialState;e=Pt(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==i)throw new we(`RNN Layer has ${i} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:a},l=G6((m,v)=>{const y=this.cell.call([m].concat(v),o);return[y[0],y.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),c=l[0],f=l[1],d=l[2];this.stateful&&this.resetStates(d,a);const h=this.returnSequences?f:c;return this.returnState?[h].concat(d):h})}getInitialState(e){return Te(()=>{let n=Tr(e.shape);return n=ht(n,[1,2]),n=wg(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?EC(n,[1,r]):n):this.cell.stateSize>1?[EC(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Al.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const a=n.cell,s=Zo(a,r);return new e(Object.assign(n,{cell:s}))}}Al.className="RNN";Ke(Al);class Sw extends on{}class fA extends Sw{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,zr(this.units,"units"),this.activation=dl(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Xn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Xn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Xn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Yn(e.kernelRegularizer),this.recurrentRegularizer=Yn(e.recurrentRegularizer),this.biasRegularizer=Yn(e.biasRegularizer),this.kernelConstraint=Ir(e.kernelConstraint),this.recurrentConstraint=Ir(e.recurrentConstraint),this.biasConstraint=Ir(e.biasConstraint),this.dropout=Ad([1,cl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Ad([1,cl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=wn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Te(()=>{if(e=e,e.length!==2)throw new we(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const a=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=pl({ones:()=>Ps(e),rate:this.dropout,training:a,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=pl({ones:()=>Ps(r),rate:this.recurrentDropout,training:a,dropoutFunc:this.dropoutFunc}));let s;const i=this.dropoutMask,o=this.recurrentDropoutMask;i!=null?s=So(ge(e,i),this.kernel.read()):s=So(e,this.kernel.read()),this.bias!=null&&(s=Ki(s,this.bias.read())),o!=null&&(r=ge(r,o));let u=Ve(s,So(r,this.recurrentKernel.read()));return this.activation!=null&&(u=this.activation.apply(u)),[u,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:fl(this.activation),useBias:this.useBias,kernelInitializer:tr(this.kernelInitializer),recurrentInitializer:tr(this.recurrentInitializer),biasInitializer:tr(this.biasInitializer),kernelRegularizer:Bn(this.kernelRegularizer),recurrentRegularizer:Bn(this.recurrentRegularizer),biasRegularizer:Bn(this.biasRegularizer),activityRegularizer:Bn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),recurrentConstraint:kr(this.recurrentConstraint),biasConstraint:kr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}fA.className="SimpleRNNCell";Ke(fA);class K6 extends Al{constructor(e){e.cell=new fA(e),super(e)}call(e,n){return Te(()=>{this.cell.dropoutMask!=null&&(rn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,a=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:s})})}static fromConfig(e,n){return new e(n)}}K6.className="SimpleRNN";Ke(K6);class dA extends Sw{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new we("GRUCell does not support reset_after parameter set to true.");this.units=e.units,zr(this.units,"units"),this.activation=dl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=dl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Xn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Xn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Xn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Yn(e.kernelRegularizer),this.recurrentRegularizer=Yn(e.recurrentRegularizer),this.biasRegularizer=Yn(e.biasRegularizer),this.kernelConstraint=Ir(e.kernelConstraint),this.recurrentConstraint=Ir(e.recurrentConstraint),this.biasConstraint=Ir(e.biasConstraint),this.dropout=Ad([1,cl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Ad([1,cl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=wn(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Te(()=>{if(e=e,e.length!==2)throw new we(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let a=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=pl({ones:()=>Ps(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=pl({ones:()=>Ps(a),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,i=this.recurrentDropoutMask;let o,u,l;0<this.dropout&&this.dropout<1&&(e=ge(e,s[0]));let c=So(e,this.kernel.read());this.useBias&&(c=Ki(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(a=ge(a,i[0]));const f=this.recurrentKernel.read(),[d,h]=hs(f,[2*this.units,this.units],f.rank-1),m=So(a,d),[v,y,b]=hs(c,3,c.rank-1),[x,w]=hs(m,2,m.rank-1);o=this.recurrentActivation.apply(Ve(v,x)),u=this.recurrentActivation.apply(Ve(y,w));const N=So(ge(u,a),h);l=this.activation.apply(Ve(b,N));const C=Ve(ge(o,a),ge(Ve(1,jn(o)),l));return[C,C]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:fl(this.activation),recurrentActivation:fl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:tr(this.kernelInitializer),recurrentInitializer:tr(this.recurrentInitializer),biasInitializer:tr(this.biasInitializer),kernelRegularizer:Bn(this.kernelRegularizer),recurrentRegularizer:Bn(this.recurrentRegularizer),biasRegularizer:Bn(this.biasRegularizer),activityRegularizer:Bn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),recurrentConstraint:kr(this.recurrentConstraint),biasConstraint:kr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}dA.className="GRUCell";Ke(dA);class X6 extends Al{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new dA(e),super(e)}call(e,n){return Te(()=>{this.cell.dropoutMask!=null&&(rn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,a=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}X6.className="GRU";Ke(X6);class Nw extends Sw{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,zr(this.units,"units"),this.activation=dl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=dl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Xn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Xn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Xn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Yn(e.kernelRegularizer),this.recurrentRegularizer=Yn(e.recurrentRegularizer),this.biasRegularizer=Yn(e.biasRegularizer),this.kernelConstraint=Ir(e.kernelConstraint),this.recurrentConstraint=Ir(e.recurrentConstraint),this.biasConstraint=Ir(e.biasConstraint),this.dropout=Ad([1,cl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Ad([1,cl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=wn(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let a;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,i=this.units;a=new(n=class extends Si{apply(u,l){const c=s.apply([i]),f=new JD().apply([i]),d=s.apply([i*2]);return s3(s3(c,f),d)}},n.className="CustomInit",n)}else a=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,a,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return Te(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new we(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let a=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=pl({ones:()=>Ps(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=pl({ones:()=>Ps(a),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let u,l,c,f;0<this.dropout&&this.dropout<1&&(e=ge(e,i[0]));let d=So(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(a=ge(a,o[0])),d=Ve(d,So(a,this.recurrentKernel.read())),this.useBias&&(d=Ki(d,this.bias.read()));const[h,m,v,y]=hs(d,4,d.rank-1);u=this.recurrentActivation.apply(h),l=this.recurrentActivation.apply(m),c=Ve(ge(l,s),ge(u,this.activation.apply(v))),f=this.recurrentActivation.apply(y);const b=ge(f,this.activation.apply(c));return[b,b,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:fl(this.activation),recurrentActivation:fl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:tr(this.kernelInitializer),recurrentInitializer:tr(this.recurrentInitializer),biasInitializer:tr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Bn(this.kernelRegularizer),recurrentRegularizer:Bn(this.recurrentRegularizer),biasRegularizer:Bn(this.biasRegularizer),activityRegularizer:Bn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),recurrentConstraint:kr(this.recurrentConstraint),biasConstraint:kr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}Nw.className="LSTMCell";Ke(Nw);class Y6 extends Al{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Nw(e),super(e)}call(e,n){return Te(()=>{this.cell.dropoutMask!=null&&(rn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,a=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Y6.className="LSTM";Ke(Y6);class pA extends Sw{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return Te(()=>{e=e;let r=e.slice(1);const a=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?a.push(r.splice(0,o.stateSize.length)):a.push(r.splice(0,1));a.reverse();const s=[];let i;for(let o=0;o<this.cells.length;++o){const u=this.cells[o];r=a[o],o===0?i=[e[0]].concat(r):i=[i[0]].concat(r),i=u.call(i,n),s.push(i.slice(1))}r=[];for(const o of s.slice().reverse())r.push(...o);return[i[0]].concat(r)})}build(e){DC(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,a)=>{wc(`RNNCell_${a}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),a={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),a)}static fromConfig(e,n,r={}){const a=[];for(const s of n.cells)a.push(Zo(s,r));return new e({cells:a})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return AC(e)}setWeights(e){const n=[];for(const r of this.cells){const a=r.weights.length,s=e.splice(a);for(let i=0;i<r.weights.length;++i)n.push([r.weights[i],s[i]])}sA(n)}}pA.className="StackedRNNCells";Ke(pA);function pl(t){const{ones:e,rate:n,training:r=!1,count:a=1,dropoutFunc:s}=t,i=()=>s!=null?s(e(),n):W5(e(),n),o=()=>Sg(i,e,r);return!a||a<=1?Lr(o().clone()):Array(a).fill(void 0).map(o).map(l=>Lr(l.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var Bde=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};class Q6 extends Al{constructor(e){if(e.unroll)throw new Jt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Jt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Ar({ndim:5})]}call(e,n){return Te(()=>{if(this.cell.dropoutMask!=null&&(rn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new we("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,a=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:s})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return Te(()=>{const{stateSize:n}=this.cell,r=e.shape,a=this.computeSingleOutputShape(r),s=[a[0],...a.slice(2)],i=Tr(s);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(e,n=!1){Te(()=>{if(!this.stateful)throw new co("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,a=this.computeSingleOutputShape(r),s=[a[0],...a.slice(2)];if(r[0]==null)throw new we("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Tr(s)):this.states_=[Tr(s)];else if(e==null)rn(this.states_),this.keptStates!=null&&(rn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Tr(s)):this.states_[0]=Tr(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new we(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):rn(this.states_);for(let o=0;o<this.states_.length;++o){const u=e[o],l=s;if(!fn(u.shape,l))throw new we(`State ${o} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${u.shape}`);this.states_[o]=u}}this.states_=this.states_.map(o=>Lr(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:a,padding:s,strides:i,dilationRate:o}=this.cell,u=n==="channelsFirst",l=e[u?3:2],c=e[u?4:3],f=Wi(l,a[0],s,i[0],o[0]),d=Wi(c,a[1],s,i[1],o[1]);return[...e.slice(0,2),...u?[r,f,d]:[f,d,r]]}}Q6.className="ConvRNN2D";class hA extends Nw{constructor(e){const{filters:n,kernelSize:r,strides:a,padding:s,dataFormat:i,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,zr(this.filters,"filters"),this.kernelSize=fd(r,2,"kernelSize"),this.kernelSize.forEach(u=>zr(u,"kernelSize")),this.strides=fd(a||1,2,"strides"),this.strides.forEach(u=>zr(u,"strides")),this.padding=s||"valid",zs(this.padding),this.dataFormat=i||"channelsLast",hr(this.dataFormat),this.dilationRate=fd(o||1,2,"dilationRate"),this.dilationRate.forEach(u=>zr(u,"dilationRate"))}build(e){var n;e=wn(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new we(`The channel dimension of the input should be defined. Found ${e[r]}`);const a=e[r],s=4,i=this.kernelSize.concat([a,this.filters*s]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let u;if(this.unitForgetBias){const l=this.biasInitializer,c=this.filters;u=new(n=class extends Si{apply(d,h){const m=l.apply([c]),v=ps([c]),y=l.apply([c*2]);return QD([m,v,y])}},n.className="CustomInit",n)}else u=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,u,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return Te(()=>{if(e.length!==3)throw new we(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,a=e[0],s=e[1],i=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=pl({ones:()=>Ps(a),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const u=this.dropoutMask,l=(G,V,H)=>!V||!V[H]?G:ge(V[H],G);let c=l(a,u,0),f=l(a,u,1),d=l(a,u,2),h=l(a,u,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=pl({ones:()=>Ps(s),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const m=this.recurrentDropoutMask;let v=l(s,m,0),y=l(s,m,1),b=l(s,m,2),x=l(s,m,3);const w=3,[N,C,E,$]=hs(this.kernel.read(),o,w),[I,D,k,A]=this.useBias?hs(this.bias.read(),o):[null,null,null,null];c=this.inputConv(c,N,I,this.padding),f=this.inputConv(f,C,D,this.padding),d=this.inputConv(d,E,k,this.padding),h=this.inputConv(h,$,A,this.padding);const[O,B,z,L]=hs(this.recurrentKernel.read(),o,w);v=this.recurrentConv(v,O),y=this.recurrentConv(y,B),b=this.recurrentConv(b,z),x=this.recurrentConv(x,L);const F=this.recurrentActivation.apply(Ve(c,v)),R=this.recurrentActivation.apply(Ve(f,y)),q=Ve(ge(R,i),ge(F,this.activation.apply(Ve(d,b)))),M=ge(this.recurrentActivation.apply(Ve(h,x)),this.activation.apply(q));return[M,M,q]})}getConfig(){const e=super.getConfig(),n=Bde(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,a){const s=ll(e,n,this.strides,a||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Ki(s,r,this.dataFormat):s}recurrentConv(e,n){return ll(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}hA.className="ConvLSTM2DCell";Ke(hA);class J6 extends Q6{constructor(e){const n=new hA(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}J6.className="ConvLSTM2D";Ke(J6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mA extends on{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let a=0;a<this.noiseShape.length;++a)r.push(this.noiseShape[a]==null?n[a]:this.noiseShape[a]);return r}call(e,n){return Te(()=>{this.invokeCallHook(e,n);const r=Pt(e);if(0<this.rate&&this.rate<1){const a=n.training==null?!1:n.training,s=this.getNoiseShape(r);return Sg(()=>W5(r,this.rate,s,this.seed),()=>r,a)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}mA.className="Dropout";Ke(mA);class Z6 extends mA{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}Z6.className="SpatialDropout1D";Ke(Z6);class e8 extends on{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,zr(this.units,"units"),this.activation=dl(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Xn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Xn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Ir(e.kernelConstraint),this.biasConstraint=Ir(e.biasConstraint),this.kernelRegularizer=Yn(e.kernelRegularizer),this.biasRegularizer=Yn(e.biasRegularizer),this.activityRegularizer=Yn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=wn(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=wn(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return Te(()=>{this.invokeCallHook(e,n);const r=Pt(e),a=F5(this.activation.getClassName());let s;return a!=null?s=So(r,this.kernel.read(),a,this.bias?this.bias.read():null):(s=So(r,this.kernel.read()),this.bias!=null&&(s=Ki(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:fl(this.activation),useBias:this.useBias,kernelInitializer:tr(this.kernelInitializer),biasInitializer:tr(this.biasInitializer),kernelRegularizer:Bn(this.kernelRegularizer),biasRegularizer:Bn(this.biasRegularizer),activityRegularizer:Bn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),biasConstraint:kr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}e8.className="Dense";Ke(e8);class t8 extends on{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=wn(e);for(const n of e.slice(1))if(n==null)throw new we(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],tl(e,1)]}call(e,n){return Te(()=>{this.invokeCallHook(e,n);let r=Pt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const a=[0];for(let s=2;s<r.rank;++s)a.push(s);a.push(1),r=pn(r,a)}return yfe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}t8.className="Flatten";Ke(t8);class n8 extends on{constructor(e){super(e),this.supportsMasking=!0,this.activation=dl(e.activation)}call(e,n){return Te(()=>{this.invokeCallHook(e,n);const r=Pt(e);return this.activation.apply(r)})}getConfig(){const e={activation:fl(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}n8.className="Activation";Ke(n8);class r8 extends on{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return Te(()=>(e=Pt(e),gfe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}r8.className="RepeatVector";Ke(r8);class a8 extends on{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",a=n.slice();let s=1,i=null;for(let u=0;u<a.length;++u){const l=a[u];if(this.isUnknown(l))if(i===null)i=u;else throw new we("Can only specifiy one unknown dimension.");else s*=l}const o=tl(e);if(i!==null){if(s===0||o%s!==0)throw new we(r);a[i]=o/s}else if(o!==s)throw new we(r);return a}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return Te(()=>{this.invokeCallHook(e,n);const r=Pt(e),a=r.shape,s=a.slice(0,1).concat(this.fixUnknownDimension(a.slice(1),this.targetShape));return be(r,s)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}a8.className="Reshape";Ke(a8);class s8 extends on{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Vi(1,e.dims.length+1);if(!fn(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Ar({ndim:this.dims.length+1})]}computeOutputShape(e){e=wn(e);const n=e.slice();return this.dims.forEach((r,a)=>{n[a+1]=e[r]}),n}call(e,n){return pn(Pt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}s8.className="Permute";Ke(s8);class i8 extends on{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Pt(e);return P0(Td(r,this.maskValue),-1)}call(e,n){return Te(()=>{this.invokeCallHook(e,n);const r=Pt(e),i=P0(Td(r,this.maskValue),-1,!0);return ge(r,ot(i,r.dtype))})}}i8.className="Masking";Ke(i8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class o8 extends on{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Dn(e.inputLength))}this.inputDim=e.inputDim,zr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,zr(this.outputDim,"outputDim"),this.embeddingsInitializer=Xn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Yn(e.embeddingsRegularizer),this.activityRegularizer=Yn(e.activityRegularizer),this.embeddingsConstraint=Ir(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return Te(()=>this.maskZero?(e=Pt(e),Td(e,mn(e))):null)}computeOutputShape(e){if(e=wn(e),this.inputLength==null)return[...e,this.outputDim];const n=Dn(this.inputLength);if(n.length!==e.length-1)throw new we(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let a=0;a<n.length;++a){const s=n[a],i=e[a+1];if(s!=null&&i!=null&&s!==i)throw new we(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(n[r]=i),r++}}return[e[0],...n,this.outputDim]}call(e,n){return Te(()=>{this.invokeCallHook(e,n);let r=Pt(e);r.dtype!=="int32"&&(r=xo(r,"int32"));const a=z5(this.embeddings.read(),be(r,[r.size]));return be(a,wn(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:tr(this.embeddingsInitializer),embeddingsRegularizer:Bn(this.embeddingsRegularizer),activityRegularizer:Bn(this.activityRegularizer),embeddingsConstraint:kr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}o8.className="Embedding";Ke(o8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Xc extends on{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Jt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let a=0;a<n.length;++a){const s=e[e.length-n.length+a],i=n[a];if(s==null||i==null||s<0||i<0)r.push(null);else if(s===1)r.push(i);else if(i===1)r.push(s);else{if(s!==i)throw new we("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[wn(e)]),e=e,e.length<2)throw new we(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const s of e)s!=null&&s[0]!==null&&n.push(s[0]);if(n=el(n),n.length>1)throw new we(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,i)}const a=e.map(s=>s.length);e.indexOf(null)===-1&&el(a).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return Te(()=>{if(e=e,this.reshapeRequired){const r=[],a=e.map(s=>s.rank);if(a.indexOf(null)===-1){const s=cl(a);for(let i of e){const o=i.rank;for(let u=0;u<s-o;++u)i=wg(i,1);r.push(i)}return this.mergeFunction(r)}else{let s=!1;for(const u of e){const l=u.rank;if(l==null){const c=u.shape,f=c[0],d=c.slice(1).concat([f]);let h=be(u,[f].concat(tl(c.slice(1))));h=pn(h,[1,0]),h=be(h,d),r.push(h),s=!0}else if(l>1){const c=Vi(1,l).concat([0]);r.push(pn(u,c)),s=!0}else r.push(u)}let i=this.mergeFunction(r);const o=i.rank;if(s){if(o==null){const u=i.shape,l=u.length,c=u[l-1],f=[c].concat(u.slice(0,u.length-1));i=be(pn(be(i,[-1,c]),[1,0]),f)}else if(o>1){const u=[o-1].concat(Vi(0,o-1));i=pn(i,u)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let a=1;a<e.length;++a){const s=e[a]==null?null:e[a].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const a of e)a!=null&&a[0]!==null&&r.push(a[0]);return r=el(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return Te(()=>{if(n==null)return null;if(!Array.isArray(n))throw new we("`mask` should be an Array");if(!Array.isArray(e))throw new we("`inputs` should be an Array");if(n.length!==e.length)throw new we(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(a=>a==null))return null;n=n.map(a=>a==null?a:$a(a,0));let r=n[0];for(let a=1;a<n.length-1;++a)r=No(r,n[a]);return r})}}class u8 extends Xc{constructor(e){super(e)}mergeFunction(e){return Te(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ve(n,e[r]);return n})}}u8.className="Add";Ke(u8);class l8 extends Xc{constructor(e){super(e)}mergeFunction(e){return Te(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ge(n,e[r]);return n})}}l8.className="Multiply";Ke(l8);class c8 extends Xc{constructor(e){super(e)}mergeFunction(e){return Te(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ve(n,e[r]);return ge(1/e.length,n)})}}c8.className="Average";Ke(c8);class f8 extends Xc{constructor(e){super(e)}mergeFunction(e){return Te(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=hu(n,e[r]);return n})}}f8.className="Maximum";Ke(f8);class d8 extends Xc{constructor(e){super(e)}mergeFunction(e){return Te(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=_c(n,e[r]);return n})}}d8.className="Minimum";Ke(d8);class p8 extends Xc{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new we("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const a of e)if(a!=null){n=!1;break}if(n)return;const r=[];for(let a=0;a<e.length;++a){const s=e[a].slice();s.splice(this.axis,1);let i=!1;for(const o of r)if(fn(o,s)){i=!0;break}i||r.push(s)}if(r.length>1)throw new we("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Te(()=>QD(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new we("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[a]==null||s[a]==null){r[a]=null;break}r[a]+=s[a]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new we("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new we("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new we(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return Te(()=>{let r=!0;if(n.forEach(i=>{if(i!=null){r=!1;return}}),r)return null;const a=[];for(let i=0;i<e.length;++i)n[i]==null?a.push(ot(Ps(e[i]),"bool")):n[i].rank<e[i].rank?a.push($a(n[i],-1)):a.push(n[i]);const s=wr(a,this.axis);return PT(s,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}p8.className="Concatenate";Ke(p8);function ph(t,e){for(;t<0;)t+=e;return t}function Lde(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Jt("batchDot is not implemented for tensors of 4D or higher rank yet");if(Y(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),Y(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Jt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,a=e.shape.length;n==null&&(n=[r-1,a-2]);const s=n;return Te(()=>{let i;if(r>a){i=r-a;const u=[];for(let l=0;l<i;++l)u.push(1);e=be(e,e.shape.concat(u))}else if(a>r){i=a-r;const u=[];for(let l=0;l<i;++l)u.push(1);t=be(t,t.shape.concat(u))}else i=0;let o;if(t.shape.length===2&&e.shape.length===2)s[0]===s[1]?o=ht(ge(t,e),s[0]):o=ht(ge(pn(t,[1,0]),e),s[1]);else{const u=s[0]!==t.shape.length-1,l=s[1]===e.shape.length-1;o=nn(t,e,u,l)}if(i>0){let u;r>a?u=r+a-3:u=r-1;const l=[];for(let c=u;c<u+i;++c)l.push(c);o=Hc(o,l)}return o.shape.length===1&&(o=$a(o,1)),o})}class h8 extends Xc{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){Y(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Jt("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(n,r);if(n[a[0]]!==r[a[1]])throw new we(`Dimension incompatibility: ${n[a[0]]} !== ${r[a[1]]}`)}mergeFunction(e){if(e.length!==2)throw new we(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],a;return Array.isArray(this.axes)?a=this.axes.map((s,i)=>ph(s,e[i].shape.length)):a=[ph(this.axes,n.shape.length),ph(this.axes,r.shape.length)],this.normalize&&(n=j0(n,a[0]),r=j0(r,a[1])),Lde(n,r,a)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[ph(this.axes,e.length),ph(this.axes,n.length)],r}computeOutputShape(e){Y(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Jt("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(n,r);n.splice(a[0],1),r.splice(a[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}h8.className="Dot";Ke(h8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class m8 extends on{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return Te(()=>{this.invokeCallHook(e,n);const r=Pt(e);return Sg(()=>Ve(gw(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}m8.className="GaussianNoise";Ke(m8);class g8 extends on{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Te(()=>{this.invokeCallHook(e,n);const r=Pt(e);return this.rate>0&&this.rate<1?Sg(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return ge(r,gw(r.shape,1,s))},()=>r,n.training||!1):r})}}g8.className="GaussianDropout";Ke(g8);class v8 extends on{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Pt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Te(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return Sg(()=>{const s=Pt(e),u=-1.6732632423543772*1.0507009873554805;let l=El(jc(r),this.rate);l=xo(l,"float32");const c=((1-this.rate)*(1+this.rate*u**2))**-.5,f=-c*u*this.rate,d=Ve(ge(s,l),ge(Ve(l,-1),u));return Ve(ge(d,c),f)},()=>Pt(e),n.training||!1)}return e})}}v8.className="AlphaDropout";Ke(v8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Qh(t,e,n,r,a,s=.001){let i;if(t.rank===2)i=BL(t,e,n,r,a,s);else if(t.rank===3)i=LL(t,e,n,r,a,s);else if(t.rank===4)i=zL(t,e,n,r,a,s);else throw new Jt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return i}function zde(t,e,n,r,a=.001){return Te(()=>{const s=Z1(t,r),i=s.mean,o=s.variance;return[Qh(t,i,o,n,e,a),i,o]})}function Wde(t,e,n,r,a=.001){return Te(()=>{const s=Z1(t,r),i=s.mean,o=s.variance,u=[];for(const m of Vi(0,t.rank))r.indexOf(m)!==-1?u.push(1):u.push(t.shape[m]);const l=be(i,u),c=be(o,u),f=e==null?null:be(e,u),d=n==null?null:be(n,u);return[Qh(t,l,c,d,f,a),i,o]})}function Ude(t,e,n,r,a=.001){return fn(r.slice().sort(),Vi(0,t.rank-1))?zde(t,e,n,r,a):Wde(t,e,n,r,a)}class y8 extends on{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Xn(e.betaInitializer||"zeros"),this.gammaInitializer=Xn(e.gammaInitializer||"ones"),this.movingMeanInitializer=Xn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Xn(e.movingVarianceInitializer||"ones"),this.betaConstraint=Ir(e.betaConstraint),this.gammaConstraint=Ir(e.gammaConstraint),this.betaRegularizer=Yn(e.betaRegularizer),this.gammaRegularizer=Yn(e.gammaRegularizer)}build(e){e=wn(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new we(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Ar({ndim:e.length,axes:{[n]:r}})];const a=[r];this.scale&&(this.gamma=this.addWeight("gamma",a,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",a,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",a,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",a,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return Te(()=>{const r=n.training==null?!1:n.training,a=Pt(e),s=a.shape,i=s.length,o=Vi(0,i),u=this.axis>=0?this.axis:this.axis+i;o.splice(u,1);const l=Rc(1,i);l[u]=s[u];const c=o.slice();c.sort();const f=!fn(c,Vi(0,i).slice(0,i-1)),d=()=>{if(f){const x=be(this.movingMean.read(),l),w=be(this.movingVariance.read(),l),N=this.center?be(this.beta.read(),l):null,C=this.scale?be(this.gamma.read(),l):null;return Qh(a,x,w,N,C,this.epsilon)}else return Qh(a,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return d();const[h,m,v]=Ude(a,this.gamma.read(),this.beta.read(),o,this.epsilon),y=(x,w,N)=>{Te(()=>{const C=1-N,E=x.read(),$=ge(ft(E,w),C);x.write(ft(E,$))})};return(()=>{y(this.movingMean,m,this.momentum),y(this.movingVariance,v,this.momentum)})(),h})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:tr(this.betaInitializer),gammaInitializer:tr(this.gammaInitializer),movingMeanInitializer:tr(this.movingMeanInitializer),movingVarianceInitializer:tr(this.movingVarianceInitializer),betaRegularizer:Bn(this.betaRegularizer),gammaRegularizer:Bn(this.gammaRegularizer),betaConstraint:kr(this.betaConstraint),gammaConstraint:kr(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}y8.className="BatchNormalization";Ke(y8);class b8 extends on{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Xn(e.betaInitializer||"zeros"),this.gammaInitializer=Xn(e.gammaInitializer||"ones"),this.betaRegularizer=Yn(e.betaRegularizer),this.gammaRegularizer=Yn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=wn(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==el(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),a=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,a):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,a):this.beta=null,this.built=!0}call(e,n){const r=Pt(e),a=r.shape,s=a.length;return Te(()=>{let{mean:o,variance:u}=Z1(r,this.axis,!0);const l=Rc(1,s);for(const v of this.axis)l[v]=a[v];const c=v=>v!=null&&v.shape.length!==s?be(v,l):v;let f=this.scale?c(this.gamma.read()):null,d=this.center?c(this.beta.read()):null;const h=[],m=[];for(let v=0;v<s;++v)this.axis.indexOf(v)!==-1?(h.push(a[v]),m.push(1)):(h.push(1),m.push(a[v]));return o=ui(o,h),u=ui(u,h),f!=null&&(f=ui(f,m)),d!=null&&(d=ui(d,m)),Qh(r,o,u,d,f,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:tr(this.betaInitializer),gammaInitializer:tr(this.gammaInitializer),betaRegularizer:Bn(this.betaRegularizer),gammaRegularizer:Bn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}b8.className="LayerNormalization";Ke(b8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qde(t,e,n){return Te(()=>{if(t.rank!==4)throw new we(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new we("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=ji()),n!=="channelsLast"&&n!=="channelsFirst")throw new we(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],Tl(t,r)})}class w8 extends on{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?ji():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new we(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new we(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new we(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Ar({ndim:4})]}computeOutputShape(e){e=wn(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return Te(()=>qde(Pt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}w8.className="ZeroPadding2D";Ke(w8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Cw(t,e,n,r,a,s){return Te(()=>{hr(a),M5(s),zs(r),n==null&&(n=[1,1]),r==null&&(r="valid"),a==null&&(a=ji()),s==null&&(s="max"),t=cA(t,a);let i;const o=r==="same"?"same":"valid";return s==="max"?i=J1(t,e,n,o):i=V1(t,e,n,o),a==="channelsFirst"&&(i=pn(i,[0,3,1,2])),i})}function x8(t,e,n,r,a,s){return Te(()=>{hr(a),M5(s),zs(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),a==null&&(a=ji()),s==null&&(s="max"),t=B6(t,a);let i;const o=r==="same"?"same":"valid";return s==="max"?i=cz(t,e,n,o):i=PL(t,e,n,o),a==="channelsFirst"&&(i=pn(i,[0,4,1,2,3])),i})}class S8 extends on{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new we(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(zr(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new we(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);zr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,zs(this.padding),this.inputSpec=[new Ar({ndim:3})]}computeOutputShape(e){e=wn(e);const n=Wi(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return Te(()=>{this.invokeCallHook(e,n),e=wg(Pt(e),2);const r=this.poolingFunction(Pt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Hc(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class N8 extends S8{constructor(e){super(e)}poolingFunction(e,n,r,a,s){return hr(s),zs(a),Cw(e,n,r,a,s,"max")}}N8.className="MaxPooling1D";Ke(N8);class C8 extends S8{constructor(e){super(e)}poolingFunction(e,n,r,a,s){return hr(s),zs(a),Cw(e,n,r,a,s,"avg")}}C8.className="AveragePooling1D";Ke(C8);class E8 extends on{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new we(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];zr(this.poolSize,"poolSize"),zr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,hr(this.dataFormat),zs(this.padding),this.inputSpec=[new Ar({ndim:4})]}computeOutputShape(e){e=wn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Wi(n,this.poolSize[0],this.padding,this.strides[0]),r=Wi(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return Te(()=>(this.invokeCallHook(e,n),this.poolingFunction(Pt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class T8 extends E8{constructor(e){super(e)}poolingFunction(e,n,r,a,s){return hr(s),zs(a),Cw(e,n,r,a,s,"max")}}T8.className="MaxPooling2D";Ke(T8);class D8 extends E8{constructor(e){super(e)}poolingFunction(e,n,r,a,s){return hr(s),zs(a),Cw(e,n,r,a,s,"avg")}}D8.className="AveragePooling2D";Ke(D8);class A8 extends on{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new we(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];zr(this.poolSize,"poolSize"),zr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,hr(this.dataFormat),zs(this.padding),this.inputSpec=[new Ar({ndim:5})]}computeOutputShape(e){e=wn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],a=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Wi(n,this.poolSize[0],this.padding,this.strides[0]),r=Wi(r,this.poolSize[1],this.padding,this.strides[1]),a=Wi(a,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,a]:[e[0],n,r,a,e[4]]}call(e,n){return Te(()=>(this.invokeCallHook(e,n),this.poolingFunction(Pt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class $8 extends A8{constructor(e){super(e)}poolingFunction(e,n,r,a,s){return hr(s),zs(a),x8(e,n,r,a,s,"max")}}$8.className="MaxPooling3D";Ke($8);class k8 extends A8{constructor(e){super(e)}poolingFunction(e,n,r,a,s){return hr(s),zs(a),x8(e,n,r,a,s,"avg")}}k8.className="AveragePooling3D";Ke(k8);class I8 extends on{constructor(e){super(e),this.inputSpec=[new Ar({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Jt}}class _8 extends I8{constructor(e){super(e||{})}call(e,n){return Te(()=>{const r=Pt(e);return or(r,1)})}}_8.className="GlobalAveragePooling1D";Ke(_8);class O8 extends I8{constructor(e){super(e||{})}call(e,n){return Te(()=>{const r=Pt(e);return pi(r,1)})}}O8.className="GlobalMaxPooling1D";Ke(O8);class F8 extends on{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,hr(this.dataFormat),this.inputSpec=[new Ar({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Jt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class R8 extends F8{call(e,n){return Te(()=>{const r=Pt(e);return this.dataFormat==="channelsLast"?or(r,[1,2]):or(r,[2,3])})}}R8.className="GlobalAveragePooling2D";Ke(R8);class M8 extends F8{call(e,n){return Te(()=>{const r=Pt(e);return this.dataFormat==="channelsLast"?pi(r,[1,2]):pi(r,[2,3])})}}M8.className="GlobalMaxPooling2D";Ke(M8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class P8 extends on{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const a=n.layer,s=Zo(a,r);delete n.layer;const i={layer:s};return Object.assign(i,n),new e(i)}}class B8 extends P8{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=wn(e),e.length<3)throw new we(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=wn(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),a=e[1];return[r[0],a].concat(r.slice(1))}call(e,n){return Te(()=>(e=Pt(e),G6((i,o)=>[Pt(this.layer.call(i,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}B8.className="TimeDistributed";Ke(B8);function Vde(t){Kc(ffe,"BidirectionalMergeMode",t)}const jde="concat";class L8 extends P8{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Zo(r),n.goBackwards=n.goBackwards!==!0;const a={};if(a.className=e.layer.getClassName(),a.config=n,this.backwardLayer=Zo(a),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?jde:e.mergeMode,Vde(this.mergeMode),e.weights)throw new Jt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,a,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,a=[r]):this.mergeMode==null?a=[r,r.slice()]:a=[r],this.returnState?this.mergeMode==null?a.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):qa(a)}apply(e,n){let r=n==null?null:n.initialState,a=n==null?null:n.constants;n==null&&(n={});const s=H6(e,r,a,this.numConstants);if(e=s.inputs,r=s.initialState,a=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&a==null)return super.apply(e,n);const i=[],o=[];if(r!=null){const l=r.length;if(l%2>0)throw new we("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,i.push(...r);const c=r.map(f=>new Ar({shape:f.shape}));this.forwardLayer.stateSpec=c.slice(0,l/2),this.backwardLayer.stateSpec=c.slice(l/2),o.push(...c)}if(a!=null)throw new Jt("Support for constants in Bidirectional layers is not implemented yet.");const u=i[0]instanceof Co;for(const l of i)if(l instanceof Co!==u)throw new we("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(u){const l=[e].concat(i),c=this.inputSpec.concat(o),f=this.inputSpec;this.inputSpec=c;const d=super.apply(l,n);return this.inputSpec=f,d}else return super.apply(e,n)}call(e,n){return Te(()=>{const r=n.initialState;let a,s;if(r==null)a=this.forwardLayer.call(e,n),s=this.backwardLayer.call(e,n);else{const u=r.slice(0,r.length/2),l=r.slice(r.length/2);a=this.forwardLayer.call(e,Object.assign(n,{initialState:u})),s=this.backwardLayer.call(e,Object.assign(n,{initialState:l}))}let i;this.returnState&&(Array.isArray(a)&&(i=a.slice(1).concat(s.slice(1))),a=a[0],s=s[0]),this.returnSequences&&(s=yi(s,1));let o;return this.mergeMode==="concat"?o=QD([a,s]):this.mergeMode==="sum"?o=Ve(a,s):this.mergeMode==="ave"?o=ge(.5,Ve(a,s)):this.mergeMode==="mul"?o=ge(a,s):this.mergeMode==null&&(o=[a,s]),this.returnState?this.mergeMode==null?o.concat(i):[o].concat(i):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){wc(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),wc(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(i=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Zo(n.layer);if(delete n.layer,n.numConstants!=null)throw new Jt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const a=n;return a.layer=r,new e(a)}}L8.className="Bidirectional";Ke(L8);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class z8 extends on{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Te(()=>(e=Pt(e),e.dtype!=="float32"&&(e=xo(e,"float32")),Ve(ge(e,this.scale),this.offset)))}}z8.className="Rescaling";Ke(z8);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:Hde,cropAndResize:Gde}=go;class W8 extends on{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,a,s,i,o,u){return Te(()=>{let l,c=!1;const f=n/i,d=r/o,h=(a+n)/i,m=(s+r)/o,v=[f,d,h,m],y=[];e.rank===3?(c=!0,l=ws([e])):l=e;for(let C=0;C<l.shape[0];C++)y.push(v);const b=zi(y,[y.length,4]),x=Dd(0,y.length,1,"int32"),N=Gde(l,b,x,[a,s],"nearest");return xo(c?Pt(bi(N)):N,u)})}upsize(e,n,r,a){return Te(()=>{const s=Hde(e,[n,r]);return xo(s,a)})}call(e,n){return Te(()=>{const r=Pt(e),a=r.dtype,s=r.shape,i=s[s.length-3],o=s[s.length-2];let u=0;i!==this.height&&(u=Math.floor((i-this.height)/2));let l=0;return o!==this.width&&(l=Math.floor((o-this.width)/2),l===0&&(l=1)),u>=0&&l>=0?this.centerCrop(r,u,l,this.height,this.width,i,o,a):this.upsize(e,this.height,this.width,a)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=wn(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}W8.className="CenterCrop";Ke(W8);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Kde(t,e,n,r){let a=Pt(t);if(a.dtype!=="int32"&&(a=xo(a,"int32")),e==="int")return a;const s=a.shape;if(a.rank===0&&(a=$a(a,-1)),e==="oneHot"&&a.shape[a.shape.length-1]!==1&&(a=$a(a,-1)),a.rank>2)throw new we(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${s} which would result in output rank ${a.rank}.`);const i=["multiHot","oneHot"].includes(e),o=a;let u;if(typeof r<"u"&&e==="count"?u=uC(o,r,n,i):u=uC(o,[],n,i),e!=="tfIdf")return u;if(r)return ge(u,r);throw new we("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class U8 extends on{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=wn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return Te(()=>{e=Pt(e),e.dtype!=="int32"&&(e=xo(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new we(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Pt(n.countWeights)}const a=pi(e),s=qh(e),i=Ts(this.numTokens,a).bufferSync().get(0),o=El(s,0).bufferSync().get(0);if(!(i&&o))throw new we(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return Kde(e,this.outputMode,this.numTokens,r)})}}U8.className="CategoryEncoding";Ke(U8);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Xde=["bilinear","nearest"],N3=new Set(Xde);class q8 extends on{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(N3.has(e.interpolation))this.interpolation=e.interpolation;else throw new we(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=wn(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Te(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return go.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return go.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...N3]} are supported`)})}}q8.className="Resizing";Ke(q8);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class V8{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}V8.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class j8 extends on{constructor(e){super(e),this.randomGenerator=new V8(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}j8.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Yde=["bilinear","nearest"],C3=new Set(Yde);class H8 extends j8{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new we(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new we(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new we(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(C3.has(r))this.interpolation=r;else throw new we(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=wn(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return Te(()=>{const r=Pt(e);this.imgHeight=r.shape[r.shape.length-3];const a=r.shape[r.shape.length-2];this.widthFactor=jc([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*a;s=Math.round(s);const i=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return go.resizeBilinear(e,i);case"nearest":return go.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...C3]} are supported`)}})}}H8.className="RandomWidth";Ke(H8);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var E3;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(E3||(E3={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mt(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Y(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qde=dD;class Ew extends EE{nextDataId(){return Ew.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new UB(this,uo())}write(e,n,r){this.firstUse&&(this.firstUse=!1,$e().get("IS_NODE")&&Os(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:r,refCount:1}),a}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&fm(r[0])){const s=r.map(i=>Zu(i));a=this.write(s,e,n)}else a=this.write(r,e,n);return{dataId:a,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,a,s){this.data.set(e,{values:n,dtype:a,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const a=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return ou(a,s)}return jJ(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>al(a));return tn(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return tn(e.shape,e.dtype,n)}makeOutput(e,n,r){return uo().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Ua();return e(),{kernelMs:Ua()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){mt([e],"where");const n=this.readSync(e.dataId);return Qde(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Ew.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G8(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const Jde=t=>{const{x:e}=t.inputs,n=t.backend;mt(e,"abs");let r=new Float32Array(Fe(e.shape));const a=n.data.get(e.dataId).values;return r=G8(a),n.makeOutput(r,e.shape,e.dtype)},Zde={kernelName:zb,backendName:"cpu",kernelFunc:Jde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mr(t){return(e,n,r,a,s)=>{const i=Ht(e,n),o=i.length,u=St(i),l=Fe(i),c=ta(s,l),f=e.length,d=n.length,h=St(e),m=St(n),v=Ed(e,i),y=Ed(n,i);if(v.length+y.length===0)for(let b=0;b<c.length;++b)c[b]=t(r[b%r.length],a[b%a.length]);else for(let b=0;b<c.length;++b){const x=Xd(b,o,u),w=x.slice(-f);v.forEach($=>w[$]=0);const N=yo(w,f,h),C=x.slice(-d);y.forEach($=>C[$]=0);const E=yo(C,d,m);c[b]=t(r[N],a[E])}return[c,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ds(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,s=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),u=n.data.get(o.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(a.shape,"float32",i)},o}const epe={kernelName:RE,backendName:"cpu",kernelFunc:ds};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y0(t,e,n="float32"){if(n==="complex64"){const a=Y0(t,e,"float32"),s=Y0(t,e,"float32");return ds({inputs:{real:a,imag:s},backend:t})}const r=ma(Fe(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eo(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const tpe={kernelName:_m,backendName:"cpu",kernelFunc:Eo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mc(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}const npe={kernelName:pT,backendName:"cpu",kernelFunc:Mc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8(t,e,n,r){if(r==="int32"){const a=Int32Array.from(t);return[e,"int32",a]}if(r==="bool"){const a=qc([0],n),[s,i]=mr((o,u)=>o!==u?1:0)(e,[],t,a,"bool");return[i,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function hl(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:s}=r;if(s==="complex64"){if(a.dtype==="complex64")return Eo({inputs:{x:a},backend:n});const c=Y0(n,a.shape,a.dtype),f=hl({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),d=ds({inputs:{real:f,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),d}if(a.dtype==="complex64"){const c=Mc({inputs:{input:a},backend:n}),f=hl({inputs:{x:c},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(c),f}if(!VB(a.dtype,s)){const c=Eo({inputs:{x:a},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:s}}const i=n.data.get(a.dataId).values,[o,u,l]=K8(i,a.shape,a.dtype,s);return n.makeTensorInfo(o,u,l)}const rpe={kernelName:bm,backendName:"cpu",kernelFunc:hl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Or(t,e,n,r){return n==null?({inputs:a,backend:s})=>{const{a:i,b:o}=a,u=s;mt([i,o],t);const l=u.data.get(i.dataId).values,c=u.data.get(o.dataId).values,f=i.dtype==="string"?uu(l):l,d=i.dtype==="string"?uu(c):c,h=r||i.dtype,[m,v]=e(i.shape,o.shape,f,d,h);return u.makeTensorInfo(v,h,m)}:({inputs:a,backend:s})=>{const{a:i,b:o}=a,u=s;if(i.dtype==="complex64"||o.dtype==="complex64"){const l=hl({inputs:{x:i},backend:u,attrs:{dtype:"complex64"}}),c=u.data.get(l.dataId),f=c.complexTensorInfos.real,d=c.complexTensorInfos.imag,h=u.data.get(f.dataId).values,m=u.data.get(d.dataId).values,v=hl({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),y=u.data.get(v.dataId),b=y.complexTensorInfos.real,x=y.complexTensorInfos.imag,w=u.data.get(b.dataId).values,N=u.data.get(x.dataId).values,[C,E,$]=n(i.shape,o.shape,h,m,w,N),I=u.makeTensorInfo($,"float32",C),D=u.makeTensorInfo($,"float32",E),k=ds({inputs:{real:I,imag:D},backend:u});return u.disposeIntermediateTensorInfo(l),u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(I),u.disposeIntermediateTensorInfo(D),k}else{const l=u.data.get(i.dataId).values,c=u.data.get(o.dataId).values,f=r||i.dtype,[d,h]=e(i.shape,o.shape,l,c,f);return u.makeTensorInfo(h,f,d)}}}function gA(t){return(e,n,r,a,s,i)=>{const o=Ht(e,n),u=Fe(o),l=o.length,c=St(o),f=ta("float32",u),d=ta("float32",u),h=Ed(e,o),m=Ed(n,o),v=ou(r,a),y=ou(s,i),b=e.length,x=St(e),w=n.length,N=St(n);if(h.length+m.length===0)for(let C=0;C<f.length;C++){const E=C%v.length,$=C%y.length,I=t(v[E*2],v[E*2+1],y[$*2],y[$*2+1]);f[C]=I.real,d[C]=I.imag}else for(let C=0;C<f.length;C++){const E=Xd(C,l,c),$=E.slice(-b);h.forEach(O=>$[O]=0);const I=yo($,b,x),D=E.slice(-w);m.forEach(O=>D[O]=0);const k=yo(D,w,N),A=t(v[I*2],v[I*2+1],y[k*2],y[k*2+1]);f[C]=A.real,d[C]=A.imag}return[f,d,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X8=mr((t,e)=>t+e),ape=gA((t,e,n,r)=>({real:t+n,imag:e+r})),$d=Or(Yd,X8,ape),spe={kernelName:Yd,backendName:"cpu",kernelFunc:$d};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vA(t,e,n,r,a){const s=Fe(r),i=ma(a,n);for(let o=0;o<t.length;o++){const u=t[o];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(s>0?i[u]+=e[o]:i[u]+=1)}return i}function Y8(t,e,n,r=!1){const a=t.shape[0],s=t.shape[1],i=tn([a,n],e.dtype);for(let o=0;o<a;o++)for(let u=0;u<s;u++){const l=t.get(o,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?i.set(1,o,l):e.size>0?i.set(i.get(o,l)+e.get(o,u),o,l):i.set(i.get(o,l)+1,o,l))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q8=mr((t,e)=>t&e),ipe=Or(Kb,Q8),ope={kernelName:Kb,backendName:"cpu",kernelFunc:ipe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ko(t){return(e,n,r)=>{const a=fr(n,e.length);for(let s=0;s<e.length;++s)a[s]=t(e[s],r);return a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kn(t,e,n){const r=ko(e);return $l(t,r,n)}function $l(t,e,n){return({inputs:r,attrs:a,backend:s})=>{const{x:i}=r;mt(i,t);const o=s,u=o.data.get(i.dataId).values;let l;if(i.dtype==="string"){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");l=uu(u)}else l=u;const c=n||i.dtype,f=e(l,c,a);return o.makeTensorInfo(i.shape,c,f)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J8=ko(t=>Math.ceil(t)),upe=$l(wm,J8),lpe={kernelName:wm,backendName:"cpu",kernelFunc:upe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z8(t,e,n,r){const a=fr(n,Fe(e));if(r&&n!=="string"){let s=0;t.forEach(i=>{const o=Fe(i.shape);a.set(i.vals,s),s+=o})}else{let s=0;t.forEach(i=>{const o=n==="string"?uu(i.vals):i.vals;let u=0;for(let l=0;l<i.shape[0];++l){const c=l*e[1]+s;for(let f=0;f<i.shape[1];++f)a[c+f]=o[u++]}s+=i.shape[1]})}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eW=mr((t,e)=>t===e?1:0),tW=Or(r1,eW,null,"bool"),cpe={kernelName:r1,backendName:"cpu",kernelFunc:tW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nW=ko(t=>Math.exp(t)),rW=$l(Dm,nW,"float32"),fpe={kernelName:Dm,backendName:"cpu",kernelFunc:rW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aW=ko(t=>Math.expm1(t)),dpe=$l(Am,aW),ppe={kernelName:Am,backendName:"cpu",kernelFunc:dpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sW=ko(t=>Math.floor(t)),hpe=$l($m,sW),mpe={kernelName:$m,backendName:"cpu",kernelFunc:hpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iW=mr((t,e)=>Math.floor(t/e)),gpe=Or(km,iW,null,"int32"),vpe={kernelName:km,backendName:"cpu",kernelFunc:gpe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oW(t,e,n,r,a,s,i,o,u){const l=tn([r,s],n);for(let c=0;c<r;c++){const f=[];let d=0;for(let h=0;h<a;h++){const m=t[c*a+h];d+=m*i[h],f.push(m)}if(d<0||d>=u/s)throw new Error(`Invalid indices: ${f} does not index into ${o}`);for(let h=0;h<s;h++)l.values[c*s+h]=e.get(...e.indexToLoc(d*s+h))}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uW(t,e,n){const r=tn(n,t.dtype);for(let a=0;a<r.size;++a){const i=r.indexToLoc(a).slice(),o=i[0],u=i[2],l=e.locToIndex([o,u]);i[2]=e.values[l];const c=t.locToIndex(i);0<=c&&c<t.values.length&&(r.values[a]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lW=mr((t,e)=>t>e?1:0),ype=Or(o1,lW,null,"bool"),bpe={kernelName:o1,backendName:"cpu",kernelFunc:ype};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cW=mr((t,e)=>t>=e?1:0),wpe=Or(Im,cW,null,"bool"),xpe={kernelName:Im,backendName:"cpu",kernelFunc:wpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fW=mr((t,e)=>t<e?1:0),Spe=Or(l1,fW,null,"bool"),Npe={kernelName:l1,backendName:"cpu",kernelFunc:Spe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dW=mr((t,e)=>t<=e?1:0),Cpe=Or(c1,dW,null,"bool"),Epe={kernelName:c1,backendName:"cpu",kernelFunc:Cpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pW(t,e,n){const r=(e-t)/(n-1),a=ma(n,"float32");a[0]=t;for(let s=1;s<a.length;s++)a[s]=a[s-1]+r;return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hW=ko(t=>Math.log(t)),Tpe=$l(Mm,hW),Dpe={kernelName:Mm,backendName:"cpu",kernelFunc:Tpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mW(t,e,n,r){const a=ta(r,Fe(n));for(let s=0;s<a.length;++s){const i=s*e;let o=t[i];for(let u=0;u<e;++u){const l=t[i+u];(Number.isNaN(l)||l>o)&&(o=l)}a[s]=o}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gW=mr((t,e)=>Math.max(t,e)),Ape=Or(Bm,gW),$pe={kernelName:Bm,backendName:"cpu",kernelFunc:Ape};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vW=mr((t,e)=>Math.min(t,e)),kpe=Or(Lm,vW),Ipe={kernelName:Lm,backendName:"cpu",kernelFunc:kpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yA=mr((t,e)=>t*e),_pe=gA((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),Tw=Or(Wm,yA,_pe),Ope={kernelName:Wm,backendName:"cpu",kernelFunc:Tw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yW(t,e,n){const r=wl(-1,n);return yA([],e,r,t,n)}function Fpe(t){const{inputs:e,backend:n}=t,{x:r}=e;mt(r,"neg");const a=n.data.get(r.dataId).values,[s,i]=yW(a,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,s)}const Rpe={kernelName:x1,backendName:"cpu",kernelFunc:Fpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bW=mr((t,e)=>t!==e?1:0),Mpe=Or(S1,bW,null,"bool"),Ppe={kernelName:S1,backendName:"cpu",kernelFunc:Mpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bA(t,e,n,r,a){const s=e.length,i=Fe(e),o=St(e),u=St(a),l=ta(n,Fe(a));for(let c=0;c<i;++c){const f=Xd(c,s,o),d=new Array(f.length);for(let m=0;m<d.length;m++)d[m]=f[r[m]];const h=yo(d,s,u);l[h]=t[c]}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ya(t){const{inputs:e,attrs:n,backend:r}=t,{x:a}=e,{perm:s}=n;mt(a,"transpose");const i=a.shape.length,o=new Array(i);for(let f=0;f<o.length;f++)o[f]=a.shape[s[f]];const u=r.data.get(a.dataId).values,l=bA(u,a.shape,a.dtype,s,o);return{dataId:r.write(l,o,a.dtype),shape:o,dtype:a.dtype}}const Bpe={kernelName:sd,backendName:"cpu",kernelFunc:Ya};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wW(t,e,n,r){const[a,s]=qr(t,r),i=vs(e,"int32"),o=ma(Fe(a),i),u=Fe(s);for(let l=0;l<o.length;++l){const c=l*u;let f=1;for(let d=0;d<u;++d)f*=n[c+d];o[l]=f}return{outVals:o,outShape:a,outDtype:i}}function Lpe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:i}=r;mt(a,"prod");const o=a.shape.length,u=sn(s,a.shape),l=nr(u,o);let c=u,f=a;const d=[];l!=null&&(f=Ya({inputs:{x:a},backend:n,attrs:{perm:l}}),d.push(f),c=pr(c.length,o));const h=n.data.get(f.dataId).values,{outVals:m,outShape:v,outDtype:y}=wW(f.shape,f.dtype,h,c);let b=v;return i&&(b=dr(v,u)),d.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(b,y,m)}const zpe={kernelName:A1,backendName:"cpu",kernelFunc:Lpe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wpe(t,e,n){t.forEach((r,a)=>{if(r<0||r>=n){const s=Xd(a,e.length,St(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function Upe(t,e){for(let n=0;n<t.length;++n){const r=t[n],a=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function qpe(t,e,n,r){const a=[];let s=0;const i=e.length-1+n.length,o=new Array(i).fill(null).map(()=>[0]);Upe(n,r);let u=1;for(let l=0;l<e.length-1;++l){u*=e[l];const c=e[l+1];for(let f=1;f<u+1;++f)o[l].push(f*c)}for(let l=0;l<t.length;++l){let c=t[l],f=t[l]+1;for(let d=0;d<n.length;++d){const h=n[d],m=d+e.length-1;if(m>=0){const v=o[m],y=v[v.length-1]-h[c];for(let b=c;b<f;++b)o[m].push(h[b+1]+y)}c=h[c],f=h[f]}f!==c&&(a.push([c,f]),s+=f-c)}return{outSplits:o,valueSlices:a,numValues:s}}function Vpe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,a=fr("int32",r);e.push(a),t[n].forEach((s,i)=>a[i]=s)}return e}function T3(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function jpe(t,e,n,r,a,s){const i=T3(e,2)[1],o=T3(s,2)[1];let u=0;for(const l of n)for(let c=l[0];c<l[1];++c){for(let f=0;f<r;++f)a[u*o+f]=t[c*i+f];++u}}function Hpe(t,e,n,r,a){const s=e.slice();s[0]=a;const i=fr(n,Fe(s)),o=t.length,u=o===0?0:o/e[0];return jpe(t,e,r,u,i,s),[i,s]}function xW(t,e,n,r,a,s,i,o){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const u=e[0][0]-1;if(Wpe(s,i,u),r.length===0)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:f,numValues:d}=qpe(s,i,t,l),h=Vpe(c),m=Hpe(n,r,a,f,d);return[h,m[0],m[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D3=2147483647;function SW(t,e,n,r,a,s,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const o=e.length===0,u=a.length===0,l=i.length===0,c=[];o||c.push(e[0]),u||c.push(a[0]),l||c.push(i[0]);for(let y=1;y<c.length;++y)if(c[y]!==c[y-1])throw new Error("starts, limits, and deltas must have the same shape");const f=c.length===0?1:c[0],d=fr("int32",f+1);d[0]=0;for(let y=0;y<f;++y){const b=o?t[0]:t[y],x=u?r[0]:r[y],w=l?s[0]:s[y];if(w===0)throw new Error("Requires delta != 0");let N;if(w>0&&x<b||w<0&&x>b)N=0;else if(N=Math.ceil(Math.abs((x-b)/w)),N>D3)throw new Error(`Requires ((limit - start) / delta) <= ${D3}`);d[y+1]=d[y]+N}const h=d[f],m=fr(n,h);let v=0;for(let y=0;y<f;++y){const b=d[y+1]-d[y];let x=o?t[0]:t[y];const w=l?s[0]:s[y];for(let N=0;N<b;++N)m[v++]=x,x+=w}return[d,m]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Js=Pi;class Q0{constructor(e,n,r,a,s,i,o,u,l,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=s,this.defaultValue=i,this.defaultValueShape=o,this.rowPartitionValues=u,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=r5(c),this.raggedRank=a5(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Js.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Js.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Js.VALUE_ROWIDS:return Q0.getMaxWidthValueRowID(n);case Js.ROW_SPLITS:return Q0.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Js[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let a=0;a<n-1;++a){const s=e[a+1]-e[a];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,a=e[0],s=0;for(let i=1;i<n;++i){const o=e[i];o!==a&&(a=o,s=Math.max(i-r,s),r=i)}return Math.max(n-r,s)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return $3(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;s5(r,n);const a=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=n5(this.raggedRank,a,n);i[0]<0&&(i[0]=e);for(let o=1;o<=this.raggedRank;++o)i[o]<0&&(i[o]=this.getMaxWidth(o));return i}calculateFirstParentOutputIndex(e,n,r){const a=Math.min(e,r),s=[];let i=0;for(let o=0;o<a;++o,i+=n)s.push(i);for(let o=a;o<e;++o)s.push(-1);return Y(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,n,r,a){const s=e.length,i=[];for(let o=0;o<s-1;++o){const u=e[o+1]-e[o];let l=Math.min(a,u),c=n[o];c===-1&&(l=0);for(let f=0;f<l;++f)i.push(c),c+=r;for(let f=0;f<u-l;++f)i.push(-1)}if(s>0&&i.length!==e[s-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,n,r,a){const s=e.length,i=[];if(s===0)return[];let o=0,u=e[0];if(u>=n.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${n.length}`);let l=n[u];i.push(l);for(let c=1;c<s;++c){const f=e[c];if(f===u)l>=0&&(++o,o<a?l+=r:l=-1);else{if(o=0,u=f,f>=n.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${n.length}`);l=n[f]}i.push(l)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,n,r,a){const s=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Js.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,a);case Js.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,a);default:throw new Error(`Unsupported partition type: ${Js[i]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Js.FIRST_DIM_SIZE:return e[0];case Js.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Js.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Js[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),a=new Array(this.raggedRank+1);a[a.length-1]=1;for(let u=a.length-2;u>=0;--u)a[u]=a[u+1]*r[u+1];const s=$3(r,!1),i=fr(this.valuesDType,Fe(s));if(a[0]*r[0]>0){let u=this.calculateFirstParentOutputIndex(n,a[0],r[0]);for(let l=1;l<=this.raggedRank;++l)u=this.calculateOutputIndex(l-1,u,a[l],r[l]);this.setOutput(this.raggedRank,u,i,s)}return[s,i]}setOutput(e,n,r,a){if(r.length===0)return;const s=this.values,i=r;let o=a.slice();o=o.slice(e+1);const u=Fe(o),l=n.length;let c=this.defaultValue;if(c.length!==u&&c.length!==1){const m=this.defaultValueShape;Te(()=>{const v=be(c,m);c=ud(v,o).dataSync()})}let f=0,d=0,h=0;for(let m=0;m<=l;++m){let v=m<l?n[m]:-1;if(v===h){++h;continue}if(d<h){const y=s.subarray(f*u),b=i.subarray(d*u),x=(h-d)*u;A3(b,y,x)}if(m>=l){const y=r.length;v=Math.floor(y/u)}if(v>h)if(this.defaultValue.length===1)i.subarray(h*u,v*u).fill(this.defaultValue[0]),h=v;else for(;v>h;){const y=i.slice(h*u);A3(y,c,u),++h}v<0?(f=m+1,d=h):(f=m,d=h,h=d+1)}}}function A3(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function $3(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function NW(t,e,n,r,a,s,i,o,u,l){return new Q0(t,e,n,r,a,s,i,o,u,l).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CW(t,e,n,r){const a=t===e,s=t<e&&n<0,i=e<t&&n>1;if(a||s||i)return ma(0,r);const o=Math.abs(Math.ceil((e-t)/n)),u=ma(o,r);e<t&&n===1&&(n=-1),u[0]=t;for(let l=1;l<u.length;l++)u[l]=u[l-1]+n;return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EW=ko(t=>1/Math.sqrt(t)),Gpe=$l(Gm,EW),Kpe={kernelName:Gm,backendName:"cpu",kernelFunc:Gpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gc(t,e,n,r,a,s,i,o,u,l){const c=[r/a,a],f=t.values,d=e.values;if(r===0)return tn(n,e.dtype);const h=u instanceof $r?u:tn(c,e.dtype);typeof u=="string"||typeof u=="number"?h.values.fill(u):typeof u=="boolean"&&h.values.fill(+u);for(let m=0;m<s;m++){const v=[];let y=0;for(let b=0;b<i;b++){const x=f[m*i+b];v.push(x),y+=x*o[b]}if(y<0||y>=r/a)throw new Error(`Invalid indices: ${v} does not index into ${n}`);for(let b=0;b<a;b++)l?h.values[y*a+b]+=d[m*a+b]:h.values[y*a+b]=e.rank===0?d[0]:d[m*a+b]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xpe=ko(t=>1/(1+Math.exp(-t))),TW=kn(Jm,t=>1/(1+Math.exp(-t))),Ype={kernelName:Jm,backendName:"cpu",kernelFunc:TW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DW(t,e,n,r,a){const s=ED(r,e,n),i=Fe(n),o=St(r);if(s){const f=TD(e,o);return a==="string"?t.slice(f,f+i):t.subarray(f,f+i)}const u=a==="string"?uu(t):t,l=tn(r,a,u),c=tn(n,a);for(let f=0;f<c.size;++f){const d=c.indexToLoc(f),h=d.map((m,v)=>m+e[v]);c.set(l.get(...h),...d)}return a==="string"?E5(c.values):c.values}function Pc(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:s,size:i}=r;mt(a,"slice");const[o,u]=fw(a,s,i);ND(a,o,u);const l=n.data.get(a.dataId).values,c=DW(l,o,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,c)}const Qpe={kernelName:F1,backendName:"cpu",kernelFunc:Pc};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AW(t,e,n,r,a,s,i){const o=e[0],u=s[0],l=new Array(u),c=new Array(o),f=e[1];if(u===0){if(o!==0)throw new Error(d5(o));const y=fr(n,0),b=fr(a,0);return[y,[0,f],b,l,c]}let d=!0,h=0;const m=new Array(u).fill(0);for(let y=0;y<o;++y){const b=t[y*f];if(b<0)throw new Error(p5(y,b));if(b>=u)throw new Error(h5(y,b,u));++m[b],d=d&&b>=h,h=b}let v=!0;for(let y=0;y<u;++y){const b=m[y]===0;l[y]=b,v=v&&!b,m[y]=Math.max(m[y],1),y>0&&(m[y]+=m[y-1])}if(v&&d){const y=t,b=r;for(let x=0;x<o;++x)c[x]=x;return[y,[o,f],b,l,c]}else{const y=m[u-1],b=fr(n,y*f),x=fr(a,y),w=new Array(u).fill(0);for(let N=0;N<o;++N){const C=t[N*f],E=w[C],$=(C===0?0:m[C-1])+E;w[C]++;for(let I=0;I<f;++I)b[$*f+I]=t[N*f+I];x[$]=r[N],c[N]=$}for(let N=0;N<u;++N)if(w[N]===0){const E=N===0?0:m[N-1];b[E*f+0]=N;for(let $=1;$<f;++$)b[E*f+$]=0;x[E]=i}return[b,[y,f],x,l,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $W(t,e,n,r,a){const s=Fe(r),i=e[0],o=a.length,u=[];let l=1,c=-1;for(let y=0;y<o;++y){const b=a[y];if(b===-1){if(c!==-1)throw new Error(m5(c,y));c=y,u.push(1)}else{if(b<0)throw new Error(g5(y,b));l*=b,u.push(b)}}if(c!==-1){if(l<=0)throw new Error(v5());const y=Math.trunc(s/l);if(l*y!==s)throw new Error(y5(r,u));u[c]=y}if(Fe(u)!==s)throw new Error(b5(r,u));const d=r.length,h=[];if(d>0){h[d-1]=1;for(let y=d-2;y>=0;--y)h[y]=h[y+1]*r[y+1]}const m=[];if(o>0){m[o-1]=1;for(let y=o-2;y>=0;--y)m[y]=m[y+1]*u[y+1]}const v=fr(n,i*o);for(let y=0;y<i;++y){let b=0;for(let x=0;x<d;++x)b+=t[y*d+x]*h[x];for(let x=0;x<o;++x)v[y*o+x]=Math.trunc(b/m[x]),b%=m[x]}return[v,[i,o],u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wA(t,e,n,r,a,s=!1,i=0){const o=r.length,u=[e[0],t.length/e[0]],l=u[1],f=o>0?a[o-1]+1:0;if(f<0)throw new Error(dC());const d=e.slice();d[0]=f;const h=d.reduce((w,N)=>w*N,1),m=fr(n,h);if(o===0)return f>0&&m.fill(i),[m,d];if(f<=0)throw new Error(dC());let v=0,y=1,b=0,x=a[v];for(;;){let w=0;if(y<o){if(w=a[y],x===w){++y;continue}if(x>=w)throw new Error(w5())}if(x<0||x>=f)throw new Error(x5(x,f));x>b&&m.fill(i,b*l,x*l);for(let N=v;N<y;++N){const C=r[N];if(C<0||C>=u[0])throw new Error(S5(N,r[N],u[0]));for(let E=0;E<l;E++)m[x*l+E]+=t[C*l+E]}if(s)for(let N=0;N<l;N++)m[x*l+N]/=y-v;if(v=y,++y,b=x+1,x=w,y>o)break}return b<f&&m.fill(i,b*l,f*l),[m,d]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jpe=ko(t=>Math.sqrt(t)),Zpe=kn(eg,t=>Math.sqrt(t)),ehe={kernelName:eg,backendName:"cpu",kernelFunc:Zpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kW=mr((t,e)=>{const n=t-e;return n*n}),the=Or(tg,kW),nhe={kernelName:tg,backendName:"cpu",kernelFunc:the};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IW=ko((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:a}=e;return t.replace(new RegExp(n,r?"g":""),a)}),rhe=$l(L1,IW),ahe={kernelName:L1,backendName:"cpu",kernelFunc:rhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _W(t,e,n,r){const a=tn(t,e.dtype);for(let s=0;s<a.size;s++){const i=a.indexToLoc(s),o=new Array(i.length);for(let u=0;u<o.length;u++)o[u]=i[u]*n[u]+r[u];a.set(e.get(...o),...i)}return a}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class she{constructor(e,n,r,a,s,i){this.separator=Zu(e),this.nGramWidths=n,this.leftPad=Zu(r),this.rightPad=Zu(a),this.padWidth=s,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,a,s,i){for(let o=0;o<s;++o){const u=this.getPadWidth(i),l=Math.max(0,u-o),c=Math.max(0,u-(s-(o+1))),f=i-(l+c),d=n+(l>0?0:o-u);let h=0;h+=l*this.leftPad.length;for(let x=0;x<f;++x)h+=e[d+x].length;h+=c*this.rightPad.length;const m=l+c+f-1;h+=m*this.separator.length,r[a+o]=new Uint8Array(h);const v=r[a+o];let y=0;const b=x=>x.forEach(w=>v[y++]=w);for(let x=0;x<l;++x)b(this.leftPad),b(this.separator);for(let x=0;x<f-1;++x)b(e[d+x]),b(this.separator);if(f>0){b(e[d+f-1]);for(let x=0;x<c;++x)b(this.separator),b(this.rightPad)}else{for(let x=0;x<c-1;++x)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(e,n){const r=e.length,a=n.length;if(a>0){let u=n[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let l=1;l<a;++l){let c=n[l]>=u;if(c=c&&n[l]<=r,!c)throw new Error(`Invalid split value ${n[l]}, must be in [${u}, ${r}]`);u=n[l]}if(u!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${u}`)}const s=a-1,i=fr("int32",a);if(r===0||a===0){const u=new Array(r);for(let l=0;l<=s;++l)i[l]=0;return[u,i]}i[0]=0;for(let u=1;u<=s;++u){const l=n[u]-n[u-1];let c=0;this.nGramWidths.forEach(f=>{c+=this.getNumNGrams(l,f)}),this.preserveShort&&l>0&&c===0&&(c=1),i[u]=i[u-1]+c}const o=new Array(i[s]);for(let u=0;u<s;++u){const l=n[u];let c=i[u];if(this.nGramWidths.forEach(f=>{const d=n[u+1]-n[u],h=this.getNumNGrams(d,f);this.createNGrams(e,l,o,c,h,f),c+=h}),this.preserveShort&&c===i[u]){const f=n[u+1]-n[u];if(f===0)continue;const d=f+2*this.padWidth;this.createNGrams(e,l,o,c,1,d)}}return[o,i]}}function OW(t,e,n,r,a,s,i,o){return new she(n,r,a,s,i,o).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ihe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(e.length===1){const s=e[0];let i=t.indexOf(s);for(;i!==-1;){const o=t.subarray(0,i);(!n||o.length!==0)&&r.push(o),t=t.subarray(i+1),i=t.indexOf(s)}(!n||t.length!==0)&&r.push(t);return}let a=0;for(let s=0;s<t.length+1;s++)if(s===t.length||e.indexOf(t[s])!==-1){const i=t.subarray(a,s);(!n||i.length!==0)&&r.push(i),a=s+1}}function FW(t,e,n){const r=t.length,a=[];let s=0,i=0;const o=new Array(r);for(let d=0;d<r;++d){const h=a.length;ihe(t[d],e,n,a);const m=a.length-h;o[d]=m,s+=m,i=Math.max(i,m)}const u=fr("int32",s*2),l=new Array(s),c=[r,i];let f=0;for(let d=0;d<r;++d)for(let h=0;h<o[d];++h)u[f*2]=d,u[f*2+1]=h,l[f]=a[f],++f;return[u,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RW(t,e){const n=fr("int32",t.length);for(let r=0;r<t.length;++r)n[r]=cZ(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MW=mr((t,e)=>t-e),ohe=gA((t,e,n,r)=>({real:t-n,imag:e-r})),xA=Or(ng,MW,ohe),uhe={kernelName:ng,backendName:"cpu",kernelFunc:xA};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PW(t,e){const n=new Array(t.rank);for(let a=0;a<n.length;a++)n[a]=t.shape[a]*e[a];const r=tn(n,t.dtype);for(let a=0;a<r.values.length;++a){const s=r.indexToLoc(a),i=new Array(t.rank);for(let u=0;u<i.length;u++)i[u]=s[u]%t.shape[u];const o=t.locToIndex(i);r.values[a]=t.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xh=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function BW(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,u=e-n+1,l=Math.log(o),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(o-c)/o)*Math.sign(u-o/2),d=Math.max(n,Math.floor(e-u*c/o+f)),h=Math.min(r,Math.floor(e+(o-u)*c/o+f));BW(t,e,d,h)}const a=t[e];let s=n,i=r;for(Kf(t,n,e),xh(t[r],a)>0&&Kf(t,n,r);s<i;){for(Kf(t,s,i),s++,i--;xh(t[s],a)<0;)s=s+1;for(;xh(t[i],a)>0;)i=i-1}xh(t[n],a)===0?Kf(t,n,i):(i=i+1,Kf(t,i,r)),i<=e&&(n=i+1),e<=i&&(r=i-1)}}function LW(t,e,n,r,a){const s=e[e.length-1],[i,o]=[t.length/s,s],u=ta(n,i*r),l=ta("int32",i*r);for(let f=0;f<i;f++){const d=f*o,h=t.subarray(d,d+o);let m=new Array(h.length);h.forEach((x,w)=>m[w]={value:x,index:w}),r<m.length&&(BW(m,r),m=m.slice(0,r)),a&&m.sort(xh);const v=f*r,y=u.subarray(v,v+r),b=l.subarray(v,v+r);for(let x=0;x<r;x++)y[x]=m[x].value,b[x]=m[x].index}const c=e.slice();return c[c.length-1]=r,[tn(c,n,u),tn(c,"int32",l)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zW(t,e,n,r){const a=sn(e,n)[0],s=[1,n[0],1];for(let m=0;m<a;m++)s[0]*=n[m];s[1]=n[a];for(let m=a+1;m<n.length;m++)s[2]*=n[m];const i=new Map,o=new Int32Array(n[a]),u=new $r(s,r,t),l=[],c=s[0]===1&&s[2]===1;for(let m=0;m<n[a];m++){let v;if(c)v=t[m].toString();else{const b=[];for(let x=0;x<s[0];x++)for(let w=0;w<s[2];w++)b.push(u.get(x,m,w));v=b.join(",")}const y=i.get(v);if(y!=null)o[m]=y;else{const b=i.size;i.set(v,b),o[m]=b,l.push(m)}}const f=s.slice();f[1]=i.size;const d=new $r(f,r);l.forEach((m,v)=>{for(let y=0;y<s[0];y++)for(let b=0;b<s[2];b++)d.set(u.get(y,m,b),y,v,b)});const h=n.slice();return h[a]=f[1],{outputValues:d.values,outputShape:h,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lhe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:X8,bincountImpl:vA,bincountReduceImpl:Y8,bitwiseAndImpl:Q8,castImpl:K8,ceilImpl:J8,concatImpl:Z8,equalImpl:eW,expImpl:nW,expm1Impl:aW,floorDivImpl:iW,floorImpl:sW,gatherNdImpl:oW,gatherV2Impl:uW,greaterEqualImpl:cW,greaterImpl:lW,lessEqualImpl:dW,lessImpl:fW,linSpaceImpl:pW,logImpl:hW,maxImpl:mW,maximumImpl:gW,minimumImpl:vW,multiplyImpl:yA,negImpl:yW,notEqualImpl:bW,prodImpl:wW,raggedGatherImpl:xW,raggedRangeImpl:SW,raggedTensorToTensorImpl:NW,rangeImpl:CW,rsqrtImpl:EW,scatterImpl:gc,sigmoidImpl:Xpe,simpleAbsImpl:G8,sliceImpl:DW,sparseFillEmptyRowsImpl:AW,sparseReshapeImpl:$W,sparseSegmentReductionImpl:wA,sqrtImpl:Jpe,squaredDifferenceImpl:kW,staticRegexReplaceImpl:IW,stridedSliceImpl:_W,stringNGramsImpl:OW,stringSplitImpl:FW,stringToHashBucketFastImpl:RW,subImpl:MW,tileImpl:PW,topKImpl:LW,transposeImpl:bA,uniqueImpl:zW},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dL("cpu",()=>new Ew,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WW=kn(Em,t=>t>=0?t:Math.exp(t)-1),che={kernelName:Em,backendName:"cpu",kernelFunc:WW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UW(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:s}=r;mt([a],"leakyRelu");const i=Fe(a.shape),o=n.data.get(a.dataId).values,u=ta("float32",i);for(let l=0;l<o.length;l++)u[l]=o[l]<0?s*o[l]:o[l];return n.makeTensorInfo(a.shape,"float32",u)}const fhe={kernelName:u1,backendName:"cpu",kernelFunc:UW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dhe=mr((t,e)=>t<0?e*t:t);function qW(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e;mt([r,a],"prelu");const s=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,[o,u]=dhe(r.shape,a.shape,s,i,"float32");return n.makeTensorInfo(u,"float32",o)}const phe={kernelName:D1,backendName:"cpu",kernelFunc:qW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VW=kn(Vm,t=>Math.max(0,t)),hhe={kernelName:Vm,backendName:"cpu",kernelFunc:VW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jW=kn(jm,t=>Math.min(Math.max(0,t),6)),mhe={kernelName:jm,backendName:"cpu",kernelFunc:jW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J0(t,e,n,r,a){if(n==="linear")return Eo({inputs:{x:e},backend:t});if(n==="relu")return VW({inputs:{x:e},backend:t});if(n==="elu")return WW({inputs:{x:e},backend:t});if(n==="relu6")return jW({inputs:{x:e},backend:t});if(n==="prelu")return qW({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return UW({inputs:{x:e},backend:t,attrs:{alpha:a}});if(n==="sigmoid")return TW({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qn(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:s}=r,i=Fe(a.shape),o=qB(s,i),u=Fe(o);Y(i===u,()=>`The new shape (${o}) has ${u} elements and the old shape (${a.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);const l=n.data.get(a.dataId);if(l.complexTensorInfos!=null){const c=l.complexTensorInfos.real,f=l.complexTensorInfos.imag;c.shape=o,f.shape=o}return{dataId:a.dataId,shape:o,dtype:a.dtype}}const ghe={kernelName:$1,backendName:"cpu",kernelFunc:qn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HW(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:s}=e,{transposeA:i,transposeB:o}=r;mt([a,s],"matMul");const u=a.shape.length,l=s.shape.length,c=i?a.shape[u-2]:a.shape[u-1],f=o?s.shape[l-1]:s.shape[l-2],d=i?a.shape[u-1]:a.shape[u-2],h=o?s.shape[l-2]:s.shape[l-1],m=a.shape.slice(0,-2),v=s.shape.slice(0,-2),y=Fe(m),b=Fe(v),w=Ht(a.shape.slice(0,-2),s.shape.slice(0,-2)).concat([d,h]);Y(c===f,()=>`Error in matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${a.shape} and ${s.shape} and transposeA=${i} and transposeB=${o} must match.`);const N=i?[y,c,d]:[y,d,c],C=o?[b,h,f]:[b,f,h],E=qn({inputs:{x:a},backend:n,attrs:{shape:N}}),$=qn({inputs:{x:s},backend:n,attrs:{shape:C}}),I=i?E.shape[1]:E.shape[2],D=i?E.shape[2]:E.shape[1],k=o?$.shape[1]:$.shape[2],A=Math.max(y,b),O=n.data.get(E.dataId).values,B=n.data.get($.dataId).values,z=St(E.shape),L=St($.shape),[F,R,q]=i?[z[0],1,z[1]]:[z[0],z[1],1],[M,G,V]=o?[1,L[1],L[0]]:[L[1],1,L[0]],H=D*k,j=tn([A,D,k],E.dtype),ne=j.values,ue=n.blockSize;for(let te=0;te<A;te++){const ie=te%y,Z=te%b;for(let X=0;X<D;X+=ue){const ae=Math.min(X+ue,D);for(let pe=0;pe<k;pe+=ue){const he=Math.min(pe+ue,k);for(let Ne=0;Ne<I;Ne+=ue){const Ee=Math.min(Ne+ue,I);for(let Q=X;Q<ae;Q++)for(let se=pe;se<he;se++){let ve=0;for(let xe=Ne;xe<Ee;xe++){const Re=O[ie*F+Q*R+xe*q],Me=B[xe*M+se*G+Z*V];ve+=Re*Me}ne[te*H+(Q*k+se)]+=ve}}}}}return n.disposeIntermediateTensorInfo(E),n.disposeIntermediateTensorInfo($),n.makeTensorInfo(w,j.dtype,j.values)}const vhe={kernelName:Hb,backendName:"cpu",kernelFunc:HW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yhe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:s,bias:i,preluActivationWeights:o}=e,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:f}=r;let d,h,m;const v=[];d=HW({inputs:{a,b:s},attrs:{transposeA:u,transposeB:l},backend:n}),i&&(h=$d({inputs:{a:d,b:i},backend:n}),v.push(d),d=h),c&&(m=J0(n,d,c,o,f),v.push(d),d=m);for(const b of v)n.disposeIntermediateTensorInfo(b);return d}const bhe={kernelName:I0,backendName:"cpu",kernelFunc:yhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const whe=kn(dm,t=>Math.acos(t)),xhe={kernelName:dm,backendName:"cpu",kernelFunc:whe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const She=kn(pm,t=>Math.acosh(t)),Nhe={kernelName:pm,backendName:"cpu",kernelFunc:She};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Che(t){const{inputs:e,backend:n}=t,r=e;mt(e,"addN");const a=r.map(o=>n.data.get(o.dataId).values),s=tn(r[0].shape,r[0].dtype),i=s.values;for(let o=0;o<r.length;o++){const u=a[o];for(let l=0;l<i.length;l++)i[l]+=u[l]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const Ehe={kernelName:Wb,backendName:"cpu",kernelFunc:Che};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function The(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:i}=r;mt(a,"all");const o=sn(s,a.shape);let u=o;const l=nr(u,a.shape.length);let c=a;l!=null&&(c=Ya({inputs:{x:a},backend:n,attrs:{perm:l}}),u=pr(u.length,a.shape.length)),sa("all",u,c.shape.length);const[f,d]=qr(c.shape,u),h=Fe(d),m=ma(Fe(f),c.dtype),v=n.data.get(c.dataId).values;for(let b=0;b<m.length;++b){const x=b*h;let w=v[x];for(let N=0;N<h;++N){const C=v[x+N];w=w&&C}m[b]=w}l!=null&&n.disposeIntermediateTensorInfo(c);const y=n.makeTensorInfo(f,c.dtype,m);if(i){const b=dr(f,o),x=qn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}const Dhe={kernelName:$E,backendName:"cpu",kernelFunc:The};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ahe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:i}=r;mt(a,"any");const o=sn(s,a.shape);let u=o;const l=nr(u,a.shape.length);let c=a;l!=null&&(c=Ya({inputs:{x:a},backend:n,attrs:{perm:l}}),u=pr(u.length,a.shape.length)),sa("any",u,c.shape.length);const[f,d]=qr(c.shape,u),h=Fe(d),m=ma(Fe(f),c.dtype),v=n.data.get(c.dataId).values;for(let b=0;b<m.length;++b){const x=b*h;let w=v[x];for(let N=0;N<h;++N){const C=v[x+N];w=w||C}m[b]=w}l!=null&&n.disposeIntermediateTensorInfo(c);const y=n.makeTensorInfo(f,c.dtype,m);if(i){const b=dr(f,o),x=qn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}const $he={kernelName:kE,backendName:"cpu",kernelFunc:Ahe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function khe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s}=r;mt(a,"argMax");let i=sn(s,a.shape);const o=nr(i,a.shape.length);let u=a;const l=[];o!=null&&(u=Ya({inputs:{x:a},backend:n,attrs:{perm:o}}),l.push(u),i=pr(i.length,u.shape.length)),i=[i[0]],sa("argMax",i,u.shape.length);const[c,f]=qr(u.shape,i),d=Fe(c),h=ma(d,"int32"),m=Fe(f),v=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){const b=y*m;let x=v[b],w=0;for(let N=0;N<m;++N){const C=v[b+N];C>x&&(x=C,w=N)}h[y]=w}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(c,"int32",h)}const Ihe={kernelName:Ub,backendName:"cpu",kernelFunc:khe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _he(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s}=r;mt(a,"argMin");let i=sn(s,a.shape);const o=nr(i,a.shape.length);let u=a;const l=[];o!=null&&(u=Ya({inputs:{x:a},backend:n,attrs:{perm:o}}),l.push(u),i=pr(i.length,u.shape.length)),i=[i[0]],sa("argMin",i,u.shape.length);const[c,f]=qr(u.shape,i),d=Fe(c),h=ma(d,"int32"),m=Fe(f),v=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){const b=y*m;let x=v[b],w=0;for(let N=0;N<m;++N){const C=v[b+N];C<x&&(x=C,w=N)}h[y]=w}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(c,"int32",h)}const Ohe={kernelName:qb,backendName:"cpu",kernelFunc:_he};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fhe=kn(hm,t=>Math.asin(t)),Rhe={kernelName:hm,backendName:"cpu",kernelFunc:Fhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mhe=kn(mm,t=>Math.asinh(t)),Phe={kernelName:mm,backendName:"cpu",kernelFunc:Mhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bhe=kn(gm,t=>Math.atan(t)),Lhe={kernelName:gm,backendName:"cpu",kernelFunc:Bhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zhe=mr((t,e)=>Math.atan2(t,e)),Whe=Or(ym,zhe),Uhe={kernelName:ym,backendName:"cpu",kernelFunc:Whe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qhe=kn(vm,t=>Math.atanh(t)),Vhe={kernelName:vm,backendName:"cpu",kernelFunc:qhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SA(t,e,n,r,a,s){const i=a.strideHeight,o=a.strideWidth,u=a.dilationHeight,l=a.dilationWidth,c=a.effectiveFilterHeight,f=a.effectiveFilterWidth,d=a.padInfo.top,h=a.padInfo.left,m=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=tn(a.outShape,n),y=v.values,b=a.outShape[1]*a.outShape[2]*a.outShape[3],x=a.outShape[2]*a.outShape[3],w=a.outShape[3];for(let N=0;N<a.batchSize;++N){const C=N*b,E=N*r[0];for(let $=0;$<a.inChannels;++$)for(let I=0;I<a.outHeight;++I){const D=I*i-d,k=Math.max(0,D),A=Math.min(a.inHeight,c+D),O=C+I*x;for(let B=0;B<a.outWidth;++B){const z=B*o-h,L=Math.max(0,z),F=Math.min(a.inWidth,f+z);let R=m,q=0,M=0;for(let V=k;V<A;V+=u){const H=E+V*r[1];for(let j=L;j<F;j+=l){const ne=H+j*r[2],ue=t[ne+$];s==="max"&&ue>R?R=ue:s==="avg"&&(q+=ue,M++)}if(isNaN(R))break}const G=O+B*w+$;y[G]=s==="avg"?q/M:R}}}return v}function GW(t,e,n,r,a=!1,s=!1){const i=tn(r.outShape,"int32"),o=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,m=r.padInfo.left,v=tn(e,n,t);for(let y=0;y<r.batchSize;++y)for(let b=0;b<r.inChannels;++b)for(let x=0;x<r.outHeight;++x){const w=x*o-h;let N=w;for(;N<0;)N+=l;const C=Math.min(r.inHeight,f+w);for(let E=0;E<r.outWidth;++E){const $=E*u-m;let I=$;for(;I<0;)I+=c;const D=Math.min(r.inWidth,d+$);let k=Number.NEGATIVE_INFINITY,A=-1;for(let O=N;O<C;O+=l){const B=O-w;for(let z=I;z<D;z+=c){const L=z-$,F=v.get(y,O,z,b);F>k&&(k=F,a?A=s?((y*r.inHeight+O)*r.inWidth+z)*r.inChannels+b:(O*r.inWidth+z)*r.inChannels+b:A=B*d+L)}}i.set(A,y,x,E,b)}}return i}function KW(t,e,n,r,a,s){const i=a.strideDepth,o=a.strideHeight,u=a.strideWidth,l=a.dilationDepth,c=a.dilationHeight,f=a.dilationWidth,d=a.effectiveFilterDepth,h=a.effectiveFilterHeight,m=a.effectiveFilterWidth,v=a.padInfo.front,y=a.padInfo.top,b=a.padInfo.left,x=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=tn(a.outShape,n),N=w.values,C=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],E=a.outShape[2]*a.outShape[3]*a.outShape[4],$=a.outShape[3]*a.outShape[4],I=a.outShape[4];for(let D=0;D<a.batchSize;++D){const k=D*C,A=D*r[0];for(let O=0;O<a.inChannels;++O)for(let B=0;B<a.outDepth;++B){const z=B*i-v;let L=z;for(;L<0;)L+=l;const F=Math.min(a.inDepth,d+z),R=k+B*E;for(let q=0;q<a.outHeight;++q){const M=q*o-y;let G=M;for(;G<0;)G+=c;const V=Math.min(a.inHeight,h+M),H=R+q*$;for(let j=0;j<a.outWidth;++j){const ne=j*u-b;let ue=ne;for(;ue<0;)ue+=f;const te=Math.min(a.inWidth,m+ne),ie=H+j*I;let Z=x,X=0,ae=0;for(let he=L;he<F;he+=l){const Ne=A+he*r[1];for(let Ee=G;Ee<V;Ee+=c){const Q=Ne+Ee*r[2];for(let se=ue;se<te;se+=f){const ve=Q+se*r[3],xe=t[ve+O];if(s==="max"&&xe>Z?Z=xe:s==="avg"&&(X+=xe,ae++),isNaN(Z))break}if(isNaN(Z))break}if(isNaN(Z))break}const pe=ie+O;N[pe]=s==="avg"?X/Math.max(ae,1):Z}}}}return w}function jhe(t,e){const n=tn(e.outShape,"int32"),r=e.strideDepth,a=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=e.padInfo.front,h=e.padInfo.top,m=e.padInfo.left;for(let v=0;v<e.batchSize;++v)for(let y=0;y<e.inChannels;++y)for(let b=0;b<e.outDepth;++b){const x=b*r-d;let w=x;for(;w<0;)w+=i;const N=Math.min(e.inDepth,l+x);for(let C=0;C<e.outHeight;++C){const E=C*a-h;let $=E;for(;$<0;)$+=o;const I=Math.min(e.inHeight,c+E);for(let D=0;D<e.outWidth;++D){const k=D*s-m;let A=k;for(;A<0;)A+=u;const O=Math.min(e.inWidth,f+k);let B=Number.NEGATIVE_INFINITY,z=-1;for(let L=w;L<N;L+=i){const F=L-x;for(let R=$;R<I;R+=o){const q=R-E;for(let M=A;M<O;M+=u){const G=M-k,V=t.get(v,L,R,M,y);V>=B&&(B=V,z=F*c*f+q*c+G)}}}n.set(z,v,b,C,D,y)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hhe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;mt(a,"avgPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:u}=r,l=1;Y(aa(i,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const c=xi(a.shape,s,i,l,o,u);let f;if(c.filterWidth===1&&c.filterHeight===1&&fn(c.inShape,c.outShape))f=Eo({inputs:{x:a},backend:n});else{const d=n.data.get(a.dataId).values,h=St(a.shape),m=SA(d,a.shape,a.dtype,h,c,"avg");f=n.makeTensorInfo(c.outShape,a.dtype,m.values)}return f}const Ghe={kernelName:Vb,backendName:"cpu",kernelFunc:Hhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Khe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:s,strides:i,pad:o,dimRoundingMode:u,dataFormat:l}=r;mt(a,"avgPool3d");const c=du(a.shape,s,i,1,o,u,l),f=n.data.get(a.dataId).values,d=KW(f,a.shape,a.dtype,St(a.shape),c,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}const Xhe={kernelName:jb,backendName:"cpu",kernelFunc:Khe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yhe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s}=e,{filterSize:i,strides:o,pad:u,dimRoundingMode:l}=r;mt([a,s],"avgPool3DGrad");const c=du(s.shape,i,o,1,u,l),f=c.strideDepth,d=c.strideHeight,h=c.strideWidth,m=c.filterDepth,v=c.filterHeight,y=c.filterWidth,b=c.dilationDepth,x=c.dilationHeight,w=c.dilationWidth,N=c.effectiveFilterDepth,C=c.effectiveFilterHeight,E=c.effectiveFilterWidth,$=N-1-c.padInfo.front,I=E-1-c.padInfo.left,D=C-1-c.padInfo.top,k=tn(s.shape,"float32"),A=1/(m*v*y),O=n.bufferSync(a);for(let B=0;B<c.batchSize;++B)for(let z=0;z<c.inChannels;++z)for(let L=0;L<c.inDepth;++L)for(let F=0;F<c.inHeight;++F)for(let R=0;R<c.inWidth;++R){const q=L-$,M=F-D,G=R-I;let V=0;for(let H=0;H<N;H+=b){const j=(q+H)/f;if(!(j<0||j>=c.outDepth||Math.floor(j)!==j))for(let ne=0;ne<C;ne+=x){const ue=(M+ne)/d;if(!(ue<0||ue>=c.outHeight||Math.floor(ue)!==ue))for(let te=0;te<E;te+=w){const ie=(G+te)/h;if(ie<0||ie>=c.outWidth||Math.floor(ie)!==ie)continue;const Z=O.get(B,j,ue,ie,z);V+=Z}}}k.set(V*A,B,L,F,R,z)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const Qhe={kernelName:_E,backendName:"cpu",kernelFunc:Yhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jhe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s}=e,i=s;mt([a,s],"avgPoolGrad");const{filterSize:o,strides:u,pad:l}=r,c=xi(i.shape,o,u,1,l),f=c.strideHeight,d=c.strideWidth,h=c.filterHeight,m=c.filterWidth,v=c.dilationHeight,y=c.dilationWidth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=x-1-c.padInfo.left,N=b-1-c.padInfo.top,C=tn(i.shape,"float32"),E=1/(h*m),$=n.data.get(a.dataId).values,I=tn(a.shape,"float32",$);for(let D=0;D<c.batchSize;++D)for(let k=0;k<c.inChannels;++k)for(let A=0;A<c.inHeight;++A)for(let O=0;O<c.inWidth;++O){const B=A-N,z=O-w;let L=0;for(let F=0;F<b;F+=v){const R=(B+F)/f;if(!(R<0||R>=c.outHeight||Math.floor(R)!==R))for(let q=0;q<x;q+=y){const M=(z+q)/d;if(M<0||M>=c.outWidth||Math.floor(M)!==M)continue;const G=I.get(D,R,M,k);L+=G}}C.set(L*E,D,A,O,k)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const Zhe={kernelName:IE,backendName:"cpu",kernelFunc:Jhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eme(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,scale:s,offset:i,mean:o,variance:u}=e;Y(o.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),mt([a,o,u,s,i],"batchNorm");let{varianceEpsilon:l}=r;l==null&&(l=.001);const c=n.data.get(a.dataId).values,f=n.data.get(o.dataId).values,d=n.data.get(u.dataId).values,h=s?n.data.get(s.dataId).values:new Float32Array([1]),m=i?n.data.get(i.dataId).values:new Float32Array([0]),v=new Float32Array(c.length),y=m.length,b=h.length,x=d.length,w=f.length;let N=0,C=0,E=0,$=0;for(let I=0;I<c.length;++I)v[I]=m[N++]+(c[I]-f[C++])*h[E++]/Math.sqrt(d[$++]+l),N>=y&&(N=0),C>=w&&(C=0),E>=b&&(E=0),$>=x&&($=0);return n.makeTensorInfo(a.shape,a.dtype,v)}const tme={kernelName:s1,backendName:"cpu",kernelFunc:eme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nme(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:s,crops:i}=r;mt([a],"batchToSpaceND");const o=s.reduce((b,x)=>b*x),u=gg(a.shape,s,o),l=vg(u.length,s.length),c=yg(a.shape,s,o),f=ID(i,s.length),d=_D(c,i,s.length),h=qn({inputs:{x:a},backend:n,attrs:{shape:u}}),m=Ya({inputs:{x:h},backend:n,attrs:{perm:l}}),v=qn({inputs:{x:m},backend:n,attrs:{shape:c}}),y=Pc({inputs:{x:v},backend:n,attrs:{begin:f,size:d}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),y}const rme={kernelName:Gb,backendName:"cpu",kernelFunc:nme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ame(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:s}=e,{size:i}=r,o=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,l=vA(o,u,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,l)}const sme={kernelName:OE,backendName:"cpu",kernelFunc:ame};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ime(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,s=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,o=Ht(Array.from(s),Array.from(i));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const ome={kernelName:FE,backendName:"cpu",kernelFunc:ime};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ume=kn(xm,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),lme={kernelName:xm,backendName:"cpu",kernelFunc:ume};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cme=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(Fe(e.shape)),a=n.data.get(e.dataId),s=a.complexTensorInfos.real,i=a.complexTensorInfos.imag,o=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values;for(let l=0;l<o.length;l++){const c=o[l],f=u[l];r[l]=Math.hypot(c,f)}return n.makeOutput(r,e.shape,"float32")},fme={kernelName:Xb,backendName:"cpu",kernelFunc:cme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kd(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}const dme={kernelName:ZE,backendName:"cpu",kernelFunc:kd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Id(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,s=sn(a,e[0].shape)[0],i=e.map(v=>v.shape);AD(i,s);let o=wo(e.map(v=>v.shape),s);if(Fe(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const u=e.filter(v=>Fe(v.shape)>0);if(u.length===1)return Eo({inputs:{x:u[0]},backend:n});if(u[0].dtype==="complex64"){const v=u.map(N=>Mc({inputs:{input:N},backend:n})),y=u.map(N=>kd({inputs:{input:N},backend:n})),b=Id({inputs:v,backend:n,attrs:{axis:s}}),x=Id({inputs:y,backend:n,attrs:{axis:s}}),w=ds({inputs:{real:b,imag:x},backend:n});return v.forEach(N=>n.disposeIntermediateTensorInfo(N)),y.forEach(N=>n.disposeIntermediateTensorInfo(N)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),w}const l=u.map(v=>{const b=[-1,Fe(v.shape.slice(s))];return qn({inputs:{x:v},backend:n,attrs:{shape:b}})}),c=l.map(v=>({vals:n.data.get(v.dataId).values,shape:v.shape}));o=wo(l.map(v=>v.shape),1);const f=l[0].shape[0]===1,d=Z8(c,o,e[0].dtype,f),h=wo(u.map(v=>v.shape),s),m=n.makeTensorInfo(h,e[0].dtype,d);return l.forEach(v=>n.disposeIntermediateTensorInfo(v)),m}const pme={kernelName:Yb,backendName:"cpu",kernelFunc:Id};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XW(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s}=e,{strides:i,pad:o,dataFormat:u,dilations:l,dimRoundingMode:c}=r;mt([a,s],"conv2d");const f=pu(u),d=Ur(a.shape,s.shape,i,l,o,c,!1,f),h=d.filterHeight,m=d.filterWidth,v=d.dilationHeight,y=d.dilationWidth,b=d.padInfo.left,x=d.padInfo.top,w=d.dataFormat==="channelsLast",N=new $r(d.outShape,a.dtype),C=St(a.shape),E=St(s.shape),$=C[0],I=w?C[1]:C[2],D=w?C[2]:1,k=w?1:C[1],A=N.strides[0],O=w?N.strides[1]:N.strides[2],B=w?N.strides[2]:1,z=w?1:N.strides[1],L=n.data.get(a.dataId).values,F=n.data.get(s.dataId).values,R=N.values;for(let q=0;q<d.batchSize;++q){const M=q*$,G=q*A;for(let V=0;V<d.outHeight;++V){const H=G+V*O,j=V*d.strideHeight-x;for(let ne=0;ne<h;++ne){const ue=j+ne*v;if(ue<0||ue>=d.inHeight)continue;const te=ne*E[0],ie=M+ue*I;for(let Z=0;Z<d.outWidth;++Z){const X=H+Z*B,ae=Z*d.strideWidth-b;for(let pe=0;pe<m;++pe){const he=ae+pe*y;if(he<0||he>=d.inWidth)continue;const Ne=te+pe*E[1],Ee=ie+he*D;let Q=Ne;for(let se=0;se<d.inChannels;++se){const ve=L[Ee+se*k];for(let xe=0;xe<d.outChannels;++xe)R[X+xe*z]+=ve*F[Q+xe];Q+=d.outChannels}}}}}}return n.makeTensorInfo(N.shape,N.dtype,R)}const hme={kernelName:Qb,backendName:"cpu",kernelFunc:XW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mme(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:s}=e,{strides:i,pad:o,dataFormat:u,dimRoundingMode:l,filterShape:c}=r;mt([a,s],"conv2dBackpropFilter");const f=pu(u),d=Ur(a.shape,c,i,1,o,l,!1,f),{strideHeight:h,strideWidth:m,filterHeight:v,filterWidth:y}=d,b=d.dataFormat==="channelsLast",x=new $r(d.filterShape,"float32"),w=d.padInfo.left,N=d.padInfo.top,C=n.data.get(a.dataId).values,E=n.data.get(s.dataId).values,$=new $r(a.shape,a.dtype,C),I=new $r(s.shape,s.dtype,E);for(let D=0;D<v;++D){const k=Math.max(0,Math.ceil((N-D)/h)),A=Math.min(d.outHeight,(d.inHeight+N-D)/h);for(let O=0;O<y;++O){const B=Math.max(0,Math.ceil((w-O)/m)),z=Math.min(d.outWidth,(d.inWidth+w-O)/m);for(let L=0;L<d.inChannels;++L)for(let F=0;F<d.outChannels;++F){let R=0;for(let q=0;q<d.batchSize;++q)for(let M=k;M<A;++M){const G=D+M*h-N;for(let V=B;V<z;++V){const H=O+V*m-w;b?R+=$.get(q,G,H,L)*I.get(q,M,V,F):R+=$.get(q,L,G,H)*I.get(q,F,M,V)}}x.set(R,D,O,L,F)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const gme={kernelName:ME,backendName:"cpu",kernelFunc:mme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vme(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:s}=e,{inputShape:i,strides:o,pad:u,dataFormat:l,dimRoundingMode:c}=r;mt([a,s],"conv2dBackpropInput");const f=St(s.shape),d=St(a.shape);let h=pu(l);const m=Ur(i,s.shape,o,1,u,c,!1,h),v=new $r(m.inShape,"float32"),y=v.values,b=n.data.get(a.dataId).values,x=n.data.get(s.dataId).values,[w,N,C]=f,{batchSize:E,filterHeight:$,filterWidth:I,inChannels:D,inHeight:k,inWidth:A,outChannels:O,outHeight:B,outWidth:z,strideHeight:L,strideWidth:F}=m;h=m.dataFormat;const R=$-1-m.padInfo.top,q=I-1-m.padInfo.left,M=h==="channelsLast",G=v.strides[0],V=M?v.strides[1]:v.strides[2],H=M?v.strides[2]:1,j=M?1:v.strides[1],ne=d[0],ue=M?d[1]:d[2],te=M?d[2]:1,ie=M?1:d[1];for(let Z=0;Z<E;++Z)for(let X=0;X<D;++X)for(let ae=0;ae<k;++ae){const pe=ae-R,he=Math.max(0,Math.ceil(pe/L)),Ne=Math.min(B,($+pe)/L);for(let Ee=0;Ee<A;++Ee){const Q=Ee-q,se=Math.max(0,Math.ceil(Q/F)),ve=Math.min(z,(I+Q)/F);let xe=0;for(let Me=he;Me<Ne;++Me){const He=Me*L-pe;for(let Je=se;Je<ve;++Je){const re=Je*F-Q,ce=ne*Z+ue*Me+te*Je,Ce=w*($-1-He)+N*(I-1-re)+C*X;for(let Ae=0;Ae<O;++Ae){const Le=b[ce+ie*Ae],Pe=x[Ce+Ae];xe+=Le*Pe}}}const Re=G*Z+V*ae+H*Ee+j*X;y[Re]=xe}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const yme={kernelName:Jb,backendName:"cpu",kernelFunc:vme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bme(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s}=e,{strides:i,pad:o,dilations:u}=r;mt([a,s],"conv3d");const l=Nl(a.shape,s.shape,i,u,o),{filterDepth:c,filterHeight:f,filterWidth:d,dilationDepth:h,dilationHeight:m,dilationWidth:v,padInfo:y}=l,b=y.front,x=y.left,w=y.top,N=new $r(l.outShape,a.dtype),C=n.data.get(a.dataId).values,E=n.data.get(s.dataId).values,$=N.values,I=St(a.shape),D=St(s.shape);for(let k=0;k<l.batchSize;++k){const A=k*I[0],O=k*N.strides[0];for(let B=0;B<l.outDepth;++B){const z=O+B*N.strides[1],L=B*l.strideDepth-b;for(let F=0;F<c;++F){const R=L+F*h;if(R<0||R>=l.inDepth)continue;const q=F*D[0],M=A+R*I[1];for(let G=0;G<l.outHeight;++G){const V=z+G*N.strides[2],H=G*l.strideHeight-w;for(let j=0;j<f;++j){const ne=H+j*m;if(ne<0||ne>=l.inHeight)continue;const ue=q+j*D[1],te=M+ne*I[2];for(let ie=0;ie<l.outWidth;++ie){const Z=V+ie*l.outChannels,X=ie*l.strideWidth-x;for(let ae=0;ae<d;++ae){const pe=X+ae*v;if(pe<0||pe>=l.inWidth)continue;const he=ue+ae*D[2],Ne=te+pe*l.inChannels;let Ee=he;for(let Q=0;Q<l.inChannels;++Q){const se=C[Ne+Q];for(let ve=0;ve<l.outChannels;++ve)$[Z+ve]+=se*E[Ee+ve];Ee+=l.outChannels}}}}}}}}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const wme={kernelName:Zb,backendName:"cpu",kernelFunc:bme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xme(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:s}=e,{strides:i,pad:o,filterShape:u}=r;mt([a,s],"conv3dBackpropFilterV2");const l=St(a.shape),c=St(s.shape),f=Nl(a.shape,u,i,1,o),d=f.strideDepth,h=f.strideHeight,m=f.strideWidth,v=f.filterDepth,y=f.filterHeight,b=f.filterWidth,x=new $r(f.filterShape,"float32"),w=x.values,[N,C,E,$]=x.strides,I=n.data.get(s.dataId).values,[D,k,A,O]=c,B=n.data.get(a.dataId).values,[z,L,F,R]=l,q=f.padInfo.front,M=f.padInfo.left,G=f.padInfo.top;for(let V=0;V<v;++V){const H=Math.max(0,Math.ceil((q-V)/d)),j=Math.min(f.outDepth,(f.inDepth+q-V)/d),ne=V*N;for(let ue=0;ue<y;++ue){const te=Math.max(0,Math.ceil((G-ue)/h)),ie=Math.min(f.outHeight,(f.inHeight+G-ue)/h),Z=ue*C+ne;for(let X=0;X<b;++X){const ae=Math.max(0,Math.ceil((M-X)/m)),pe=Math.min(f.outWidth,(f.inWidth+M-X)/m),he=X*E+Z;for(let Ne=0;Ne<f.inChannels;++Ne){const Ee=Ne*$+he;for(let Q=0;Q<f.outChannels;++Q){let se=0;for(let ve=0;ve<f.batchSize;++ve){const xe=ve*z,Re=ve*D;for(let Me=H;Me<j;++Me){const Je=(V+Me*d-q)*L+xe,re=Me*k+Re;for(let ce=te;ce<ie;++ce){const Ae=(ue+ce*h-G)*F+Je,Le=ce*A+re;for(let Pe=ae;Pe<pe;++Pe){const je=(X+Pe*m-M)*R+Ae,tt=Pe*O+Le;se+=B[je+Ne]*I[tt+Q]}}}}w[Ee+Q]=se}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const Sme={kernelName:PE,backendName:"cpu",kernelFunc:xme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nme(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:s}=e,{pad:i,strides:o,inputShape:u}=r;mt([a],"conv3dBackpropInputV2");const l=St(a.shape),c=St(s.shape),f=Nl(u,s.shape,o,1,i),d=new $r(f.inShape,"float32"),h=d.values,[m,v,y,b]=d.strides,x=n.data.get(a.dataId).values,[w,N,C,E]=l,$=n.data.get(s.dataId).values,[I,D,k,A]=c,{batchSize:O,filterDepth:B,filterHeight:z,filterWidth:L,inChannels:F,inDepth:R,inHeight:q,inWidth:M,outChannels:G,outDepth:V,outHeight:H,outWidth:j,strideDepth:ne,strideHeight:ue,strideWidth:te}=f,ie=B-1-f.padInfo.front,Z=z-1-f.padInfo.top,X=L-1-f.padInfo.left;for(let ae=0;ae<O;++ae)for(let pe=0;pe<F;++pe)for(let he=0;he<R;++he){const Ne=he-ie,Ee=Math.max(0,Math.ceil(Ne/ne)),Q=Math.min(V,(B+Ne)/ne);for(let se=0;se<q;++se){const ve=se-Z,xe=Math.max(0,Math.ceil(ve/ue)),Re=Math.min(H,(z+ve)/ue);for(let Me=0;Me<M;++Me){const He=Me-X,Je=Math.max(0,Math.ceil(He/te)),re=Math.min(j,(L+He)/te);let ce=0;for(let Ce=Ee;Ce<Q;++Ce){const Ae=Ce*ne-Ne;for(let Le=xe;Le<Re;++Le){const Pe=Le*ue-ve;for(let Ze=Je;Ze<re;++Ze){const je=Ze*te-He,tt=w*ae+N*Ce+C*Le+E*Ze,Qe=I*(B-1-Ae)+D*(z-1-Pe)+k*(L-1-je)+A*pe;for(let Xt=0;Xt<G;++Xt){const Nt=x[tt+Xt],Cn=$[Qe+Xt];ce+=Nt*Cn}}}}h[m*ae+v*he+y*se+b*Me+pe]=ce}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}const Cme={kernelName:BE,backendName:"cpu",kernelFunc:Nme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eme=kn(Sm,t=>Math.cos(t)),Tme={kernelName:Sm,backendName:"cpu",kernelFunc:Eme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dme=kn(Nm,t=>Math.cosh(t)),Ame={kernelName:Nm,backendName:"cpu",kernelFunc:Dme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $me(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:s,boxInd:i}=e,{cropSize:o,method:u,extrapolationValue:l}=r,[c,f,d,h]=a.shape,m=s.shape[0],[v,y]=o,b=tn([m,v,y,h],"float32"),x=n.data.get(s.dataId).values,w=n.data.get(i.dataId).values,N=n.data.get(a.dataId).values,C=St(a.shape),E=St(b.shape);for(let $=0;$<m;$++){const I=$*4,D=x[I],k=x[I+1],A=x[I+2],O=x[I+3],B=w[$];if(B>=c)continue;const z=v>1?(A-D)*(f-1)/(v-1):0,L=y>1?(O-k)*(d-1)/(y-1):0;for(let F=0;F<v;F++){const R=v>1?D*(f-1)+F*z:.5*(D+A)*(f-1);if(R<0||R>f-1){for(let q=0;q<y;q++)for(let M=0;M<h;M++){const G=M+q*E[2]+F*E[1]+$*E[0];b.values[G]=l}continue}if(u==="bilinear"){const q=Math.floor(R),M=Math.ceil(R),G=R-q;for(let V=0;V<y;V++){const H=y>1?k*(d-1)+V*L:.5*(k+O)*(d-1);if(H<0||H>d-1){for(let te=0;te<h;te++){const ie=te+V*E[2]+F*E[1]+$*E[0];b.values[ie]=l}continue}const j=Math.floor(H),ne=Math.ceil(H),ue=H-j;for(let te=0;te<h;te++){let ie=te+j*C[2]+q*C[1]+B*C[0];const Z=N[ie];ie=te+ne*C[2]+q*C[1]+B*C[0];const X=N[ie];ie=te+j*C[2]+M*C[1]+B*C[0];const ae=N[ie];ie=te+ne*C[2]+M*C[1]+B*C[0];const pe=N[ie],he=Z+(X-Z)*ue,Ne=ae+(pe-ae)*ue;ie=te+V*E[2]+F*E[1]+$*E[0],b.values[ie]=he+(Ne-he)*G}}}else for(let q=0;q<y;++q){const M=y>1?k*(d-1)+q*L:.5*(k+O)*(d-1);if(M<0||M>d-1){for(let H=0;H<h;H++){const j=H+q*E[2]+F*E[1]+$*E[0];b.values[j]=l}continue}const G=Math.round(M),V=Math.round(R);for(let H=0;H<h;H++){const j=H+G*C[2]+V*C[1]+B*C[0],ne=H+q*E[2]+F*E[1]+$*E[0];b.values[ne]=N[j]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const kme={kernelName:zE,backendName:"cpu",kernelFunc:$me};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ime(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,exclusive:i,reverse:o}=r;mt(a,"cumprod");const u=nr([s],a.shape.length);let l=a;u!=null&&(l=Ya({inputs:{x:a},backend:n,attrs:{perm:u}}));const c=pr(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);const f=vs(l.dtype,"int32"),d=DE(Fe(l.shape),f),h=n.data.get(l.dataId).values,m=l.shape[l.shape.length-1],v=o?(b,x)=>b+m-x-1:(b,x)=>b+x;for(let b=0;b<h.length;b+=m)for(let x=0;x<m;x++){const w=v(b,x);if(x===0)d[w]=i?1:h[w];else{const N=v(b,x-1);d[w]=i?h[N]*d[N]:h[w]*d[N]}}const y=n.makeTensorInfo(l.shape,f,d);if(u!=null){const b=Cl(u),x=Ya({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(l),x}return y}const _me={kernelName:LE,backendName:"cpu",kernelFunc:Ime};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ome(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,exclusive:i,reverse:o}=r;mt(a,"cumsum");const u=nr([s],a.shape.length);let l=a;u!=null&&(l=Ya({inputs:{x:a},backend:n,attrs:{perm:u}}));const c=pr(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);const f=vs(l.dtype,"int32"),d=ma(Fe(l.shape),f),h=n.data.get(l.dataId).values,m=l.shape[l.shape.length-1],v=o?(b,x)=>b+m-x-1:(b,x)=>b+x;for(let b=0;b<h.length;b+=m)for(let x=0;x<m;x++){const w=v(b,x);if(x===0)d[w]=i?0:h[w];else{const N=v(b,x-1);d[w]=i?h[N]+d[N]:h[w]+d[N]}}const y=n.makeTensorInfo(l.shape,f,d);if(u!=null){const b=Cl(u),x=Ya({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(l),x}return y}const Fme={kernelName:e1,backendName:"cpu",kernelFunc:Ome};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rme(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:s}=e,{size:i,binaryOutput:o}=r;if(a.shape.length===1){const u=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,c=vA(u,l,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,c)}else if(a.shape.length===2){const u=n.bufferSync(a),l=n.bufferSync(s),c=Y8(u,l,i,o);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const Mme={kernelName:WE,backendName:"cpu",kernelFunc:Rme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pme(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:s,dataFormat:i}=r;Y(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const o=a.shape[0],u=a.shape[1],l=a.shape[2],c=a.shape[3],f=u*s,d=l*s,h=c/(s*s),m=n.data.get(a.dataId).values,v=new Float32Array(o*f*d*h);let y=0;for(let b=0;b<o;++b)for(let x=0;x<f;++x){const w=Math.floor(x/s),N=x%s;for(let C=0;C<d;++C){const E=Math.floor(C/s),$=C%s,I=(N*s+$)*h;for(let D=0;D<h;++D){const A=D+I+c*(E+l*(w+u*b));v[y++]=m[A]}}}return n.makeTensorInfo([o,f,d,h],a.dtype,v)}const Bme={kernelName:UE,backendName:"cpu",kernelFunc:Pme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YW(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s}=e,{strides:i,pad:o,dilations:u,dimRoundingMode:l}=r;mt([a,s],"depthwiseConv2DNative");const c=St(a.shape),f=St(s.shape);let d=u;d==null&&(d=[1,1]),Y(aa(i,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${d}'`);const h=Ur(a.shape,s.shape,i,d,o,l,!0),{filterHeight:m,filterWidth:v,dilationHeight:y,dilationWidth:b,padInfo:x}=h,w=x.left,N=x.top,C=h.outChannels/h.inChannels,E=new $r(h.outShape,a.dtype),$=n.data.get(a.dataId).values,I=n.data.get(s.dataId).values,D=E.values;for(let k=0;k<h.batchSize;++k){const A=k*c[0],O=k*E.strides[0];for(let B=0;B<h.outHeight;++B){const z=O+B*E.strides[1],L=B*h.strideHeight-N;for(let F=0;F<m;++F){const R=L+F*y;if(R<0||R>=h.inHeight)continue;const q=F*f[0],M=A+R*c[1];for(let G=0;G<h.outWidth;++G){const V=z+G*E.strides[2],H=G*h.strideWidth-w;for(let j=0;j<v;++j){const ne=H+j*b;if(ne<0||ne>=h.inWidth)continue;const ue=q+j*f[1],te=M+ne*h.inChannels;let ie=V,Z=ue;for(let X=0;X<h.inChannels;++X){const ae=$[te+X];for(let pe=0;pe<C;++pe)D[ie+pe]+=ae*I[Z+pe];ie+=C,Z+=C}}}}}}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const Lme={kernelName:t1,backendName:"cpu",kernelFunc:YW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zme(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:s}=e,{strides:i,dilations:o,pad:u,dimRoundingMode:l,filterShape:c}=r;mt([a,s],"depthwiseConv2dNativeBackpropFilter");const f=Ur(a.shape,c,i,o,u,l,!0),{strideHeight:d,strideWidth:h,filterHeight:m,filterWidth:v}=f,y=new $r(f.filterShape,"float32"),b=f.padInfo.left,x=f.padInfo.top,w=f.outChannels/f.inChannels,N=n.data.get(a.dataId).values,C=new $r(a.shape,a.dtype,N),E=n.data.get(s.dataId).values,$=new $r(s.shape,s.dtype,E);for(let I=0;I<m;++I){const D=Math.max(0,Math.ceil((x-I)/d)),k=Math.min(f.outHeight,(f.inHeight+x-I)/d);for(let A=0;A<v;++A){const O=Math.max(0,Math.ceil((b-A)/h)),B=Math.min(f.outWidth,(f.inWidth+b-A)/h);for(let z=0;z<f.outChannels;++z){const L=Math.trunc(z/w),F=z%w;let R=0;for(let q=0;q<f.batchSize;++q)for(let M=D;M<k;++M){const G=I+M*d-x;for(let V=O;V<B;++V){const H=A+V*h-b;R+=C.get(q,G,H,L)*$.get(q,M,V,z)}}y.set(R,I,A,L,F)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const Wme={kernelName:qE,backendName:"cpu",kernelFunc:zme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ume(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:s}=e,{strides:i,dilations:o,pad:u,dimRoundingMode:l,inputShape:c}=r;mt([a,s],"depthwiseConv2DNativeBackpropInput");const f=St(a.shape),d=St(s.shape),h=Ur(c,s.shape,i,o,u,l,!0),m=new $r(h.inShape,"float32"),v=m.values,[y,b,x]=m.strides,w=n.data.get(a.dataId).values,[N,C,E]=f,$=n.data.get(s.dataId).values,[I,D,k]=d,{batchSize:A,filterHeight:O,filterWidth:B,inChannels:z,inHeight:L,inWidth:F,outChannels:R,outHeight:q,outWidth:M,strideHeight:G,strideWidth:V}=h,H=O-1-h.padInfo.top,j=B-1-h.padInfo.left,ne=R/z;for(let ue=0;ue<A;++ue)for(let te=0;te<z;++te)for(let ie=0;ie<L;++ie){const Z=ie-H,X=Math.max(0,Math.ceil(Z/G)),ae=Math.min(q,(O+Z)/G);for(let pe=0;pe<F;++pe){const he=pe-j,Ne=Math.max(0,Math.ceil(he/V)),Ee=Math.min(M,(B+he)/V);let Q=0;for(let se=X;se<ae;++se){const ve=se*G-Z;for(let xe=Ne;xe<Ee;++xe){const Re=xe*V-he,Me=N*ue+C*se+E*xe,He=I*(O-1-ve)+D*(B-1-Re)+k*te;for(let Je=0;Je<ne;++Je){const re=te*ne+Je,ce=w[Me+re],Ce=$[He+Je];Q+=ce*Ce}}}v[y*ue+b*ie+x*pe+te]=Q}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const qme={kernelName:VE,backendName:"cpu",kernelFunc:Ume};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vme(t){const{inputs:e,backend:n}=t,{x:r}=e,a=Fe(r.shape),s=n.data.get(r.dataId).values,i=tn([a,a],r.dtype),o=i.values;for(let l=0;l<s.length;l++)o[l*a+l]=s[l];const u=[...r.shape,...r.shape];return n.makeTensorInfo(u,i.dtype,i.values)}const jme={kernelName:jE,backendName:"cpu",kernelFunc:Vme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hme={kernelName:n1,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a}=t,{strides:s,pad:i,dilations:o}=n,u=e,l=u.data.get(r.dataId).values,c=r.shape.length,f=u.data.get(a.dataId).values,d=a.shape.length,{batchSize:h,inHeight:m,inWidth:v,inChannels:y,outHeight:b,outWidth:x,padInfo:w,strideHeight:N,strideWidth:C,filterHeight:E,filterWidth:$,dilationHeight:I,dilationWidth:D,outShape:k}=ug(r.shape,a.shape,s,i,"NHWC",o),A=Fe(k),O=k.length,B=fr(r.dtype,A);for(let L=0;L<h;++L)for(let F=0;F<b;++F){const R=F*N-w.top;for(let q=0;q<x;++q){const M=q*C-w.left;for(let G=0;G<y;++G){let V=Number.MIN_SAFE_INTEGER;for(let j=0;j<E;++j){const ne=R+j*I;if(ne>=0&&ne<m)for(let ue=0;ue<$;++ue){const te=M+ue*D;if(te>=0&&te<v){const ie=yo([L,ne,te,G],c,St(r.shape)),Z=yo([j,ue,G],d,St(a.shape)),X=l[ie]+f[Z];X>V&&(V=X)}}}const H=yo([L,F,q,G],O,St(k));B[H]=V}}}return{dataId:u.write(qc(B,r.dtype),k,r.dtype),shape:k,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gme={kernelName:XN,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:s}=t,{strides:i,pad:o,dilations:u}=n,l=e,c=di(r.shape,l.data.get(r.dataId).values),f=di(a.shape,l.data.get(a.dataId).values),{batchSize:d,inHeight:h,inWidth:m,inChannels:v,outHeight:y,outWidth:b,padInfo:x,strideHeight:w,strideWidth:N,filterHeight:C,filterWidth:E,dilationHeight:$,dilationWidth:I,outShape:D}=ug(r.shape,a.shape,i,o,"NHWC",u);Y(s.rank===D.length,()=>`Error in ${XN}, dy must have the same rank as output ${D.length}, but got ${s.rank}`);const k=di(D,l.data.get(s.dataId).values),A=HB(a.shape,a.dtype);for(let B=0;B<d;++B)for(let z=0;z<y;++z){const L=z*w-x.top;for(let F=0;F<b;++F){const R=F*N-x.left;for(let q=0;q<v;++q){let M=Number.MIN_SAFE_INTEGER,G=0,V=0;for(let H=0;H<C;++H){const j=L+H*$;if(j>=0&&j<h)for(let ne=0;ne<E;++ne){const ue=R+ne*I;if(ue>=0&&ue<m){const te=c[B][j][ue][q]+f[H][ne][q];te>M&&(M=te,G=H,V=ne)}}}A[G][V][q]+=k[B][z][F][q]}}}return{dataId:l.write(qc(A,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kme={kernelName:KN,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:s}=t,{strides:i,pad:o,dilations:u}=n,l=e,c=di(r.shape,l.data.get(r.dataId).values),f=di(a.shape,l.data.get(a.dataId).values),{batchSize:d,inHeight:h,inWidth:m,inChannels:v,outHeight:y,outWidth:b,padInfo:x,strideHeight:w,strideWidth:N,filterHeight:C,filterWidth:E,dilationHeight:$,dilationWidth:I,outShape:D}=ug(r.shape,a.shape,i,o,"NHWC",u);Y(s.rank===D.length,()=>`Error in ${KN}, dy must have the same rank as output ${D.length}, but got ${s.rank}`);const k=di(D,l.data.get(s.dataId).values),A=HB(r.shape,r.dtype);for(let B=0;B<d;++B)for(let z=0;z<y;++z){const L=z*w-x.top;for(let F=0;F<b;++F){const R=F*N-x.left;for(let q=0;q<v;++q){let M=Number.MIN_SAFE_INTEGER,G=L<0?0:L,V=R<0?0:R;for(let H=0;H<C;++H){const j=L+H*$;if(j>=0&&j<h)for(let ne=0;ne<E;++ne){const ue=R+ne*I;if(ue>=0&&ue<m){const te=c[B][j][ue][q]+f[H][ne][q];te>M&&(M=te,G=j,V=ue)}}}A[B][G][V][q]+=k[B][z][F][q]}}}return{dataId:l.write(qc(A,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xme(t){const{inputs:e,backend:n,attrs:r}=t,{image:a}=e,{canvas:s,options:i}=r,{contextOptions:o,imageOptions:u}=i||{},l=(u==null?void 0:u.alpha)||1,c=(o==null?void 0:o.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const f=s.getContext(c,(o==null?void 0:o.contextAttributes)||{});if(f==null)throw new Error(`Could not get the context with ${c} type.`);const[d,h]=a.shape.slice(0,2),m=a.shape.length===2?1:a.shape[2],v=n.data.get(a.dataId).values,y=a.dtype==="float32"?255:1,b=new Uint8ClampedArray(h*d*4);for(let w=0;w<d*h;++w){const N=[0,0,0,255*l];for(let E=0;E<m;E++){const $=v[w*m+E];if(a.dtype==="float32"){if($<0||$>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${$}.`)}else if(a.dtype==="int32"&&($<0||$>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${$}.`);m===1?(N[0]=$*y,N[1]=$*y,N[2]=$*y):N[E]=$*y}const C=w*4;b[C+0]=Math.round(N[0]),b[C+1]=Math.round(N[1]),b[C+2]=Math.round(N[2]),b[C+3]=Math.round(N[3])}s.width=h,s.height=d;const x=new ImageData(b,h,d);return f.putImageData(x,0,0),a}const Yme={kernelName:ZJ,backendName:"cpu",kernelFunc:Xme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dg(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:i}=r;mt(a,"sum");let o;a.dtype==="bool"?o=hl({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):o=Eo({inputs:{x:a},backend:n});const u=o.shape.length,l=sn(s,o.shape),c=nr(l,u);let f=l,d=o;c!=null&&(d=Ya({inputs:{x:o},backend:n,attrs:{perm:c}}),f=pr(f.length,u)),sa("sum",f,d.shape.length);const[h,m]=qr(d.shape,f),v=vs(d.dtype,"int32");let y=Y0(n,h,v);const b=Fe(m),x=n.data.get(y.dataId).values,w=n.data.get(d.dataId).values;for(let N=0;N<x.length;++N){const C=N*b;let E=0;for(let $=0;$<b;++$)E+=w[C+$];x[N]=E}if(i){const N=dr(y.shape,l),C=y;y=qn({inputs:{x:y},backend:n,attrs:{shape:N}}),n.disposeIntermediateTensorInfo(C)}return n.disposeIntermediateTensorInfo(o),c!=null&&n.disposeIntermediateTensorInfo(d),y}const Qme={kernelName:R1,backendName:"cpu",kernelFunc:Dg};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jme(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,s=e,{allDims:i,summedDims:o,idDims:u}=zD(a,s.length);UD(i.length,u,s);const{path:l,steps:c}=qD(o,u),f=c.length;let d=null,h=i.length;const m=[];for(let v=0;v<f;++v){for(const y of c[v]){const{permutationIndices:b,expandDims:x}=WD(h,u[y]);let w;VD(b)?w=s[y]:(w=Ya({inputs:{x:s[y]},backend:n,attrs:{perm:b}}),m.push(w));const N=w.shape.slice();for(let C=0;C<x.length;++C)N.splice(x[C],0,1);fn(w.shape,N)||(w=qn({inputs:{x:w},backend:n,attrs:{shape:N}}),m.push(w)),d===null?d=w:(d=Tw({inputs:{a:w,b:d},backend:n}),m.push(d))}v<f-1&&(l[v]>=0&&(d=Dg({inputs:{x:d},backend:n,attrs:{axis:l[v]-(i.length-h),keepDims:!1}}),m.push(d)),h--)}for(const v of m)v!==d&&n.disposeIntermediateTensorInfo(v);return d}const Zme={kernelName:HE,backendName:"cpu",kernelFunc:Jme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ege(t){const{inputs:e,backend:n}=t,{dy:r,y:a}=e;mt([r,a],"eluGrad");const s=new Float32Array(Fe(a.shape)),i=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values;for(let u=0;u<i.length;++u){const l=i[u];l>=0?s[u]=o[u]:s[u]=o[u]*(l+1)}return n.makeTensorInfo(a.shape,"float32",s)}const tge={kernelName:GE,backendName:"cpu",kernelFunc:ege};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nge=OD,rge=FD,age=RD,sge=MD,ige=PD,oge=BD,uge=kn(Tm,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+nge*n);return e*(1-((((oge*r+ige)*r+sge)*r+age)*r+rge)*r*Math.exp(-n*n))}),lge={kernelName:Tm,backendName:"cpu",kernelFunc:uge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z0(t){const{inputs:e,backend:n,attrs:r}=t,{input:a}=e,{dim:s}=r,i=a.shape.length,o=a.shape.slice();let u=s;return s<0&&(Y(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),u=i+s+1),o.splice(u,0,1),qn({inputs:{x:a},backend:n,attrs:{shape:o}})}const cge={kernelName:a1,backendName:"cpu",kernelFunc:Z0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fge=mr((t,e)=>t/e),NA=Or(Cm,fge),FC={kernelName:Cm,backendName:"cpu",kernelFunc:NA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QW(t,e,n){const r=t.shape,a=r[0],s=r[1],i=n.data.get(t.dataId),o=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,l=[a,s],c=Fe(l),f=ta("float32",c),d=ta("float32",c);for(let y=0;y<a;y++){const b=Pc({inputs:{x:o},backend:n,attrs:{begin:[y,0],size:[1,s]}}),x=Pc({inputs:{x:u},backend:n,attrs:{begin:[y,0],size:[1,s]}}),w=ds({inputs:{real:b,imag:x},backend:n}),{real:N,imag:C}=dge(w,e,n),E=ou(N,C);for(let $=0;$<s;$++){const I=LD(E,$);f[y*s+$]=I.real,d[y*s+$]=I.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w)}const h=n.makeTensorInfo(l,"float32",f),m=n.makeTensorInfo(l,"float32",d),v=ds({inputs:{real:h,imag:m},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}function dge(t,e,n){const r=Fe(t.shape),a=n.data.get(t.dataId),s=n.data.get(a.complexTensorInfos.real.dataId).values,i=n.data.get(a.complexTensorInfos.imag.dataId).values;if(pge(r)){const o=RC(s,i,r,e,n),u=[t.shape[0],t.shape[1]];if(e){const l=n.makeTensorInfo(u,"float32",o.real),c=n.makeTensorInfo(u,"float32",o.imag),f=n.makeTensorInfo([],"float32",wl(r,"float32")),d=Eo({inputs:{x:f},backend:n}),h=FC.kernelFunc({inputs:{a:l,b:f},backend:n}),m=FC.kernelFunc({inputs:{a:c,b:d},backend:n}),v=n.data.get(h.dataId).values,y=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),{real:v,imag:y}}return o}else{const o=ou(s,i),u=hge(o,r,e);return i5(u)}}function pge(t){return(t&t-1)===0}function RC(t,e,n,r,a){if(n===1)return{real:t,imag:e};const s=ou(t,e),i=n/2,o=o5(s),u=o.real,l=o.imag,c=[u.length],f=a.makeTensorInfo(c,"float32",u),d=a.makeTensorInfo(c,"float32",l),h=ds({inputs:{real:f,imag:d},backend:a}),m=u5(s),v=m.real,y=m.imag,b=[v.length],x=a.makeTensorInfo(b,"float32",v),w=a.makeTensorInfo(b,"float32",y),N=ds({inputs:{real:x,imag:w},backend:a}),C=RC(u,l,i,r,a),E=C.real,$=C.imag,I=[E.length],D=a.makeTensorInfo(I,"float32",E),k=a.makeTensorInfo(I,"float32",$),A=ds({inputs:{real:D,imag:k},backend:a}),O=RC(v,y,i,r,a),B=O.real,z=O.imag,L=[B.length],F=a.makeTensorInfo(L,"float32",B),R=a.makeTensorInfo(L,"float32",z),q=ds({inputs:{real:F,imag:R},backend:a}),M=c5(n,r),G=[M.real.length],V=a.makeTensorInfo(G,"float32",M.real),H=a.makeTensorInfo(G,"float32",M.imag),j=ds({inputs:{real:V,imag:H},backend:a}),ne=Tw({inputs:{a:j,b:q},backend:a}),ue=$d({inputs:{a:A,b:ne},backend:a}),te=xA({inputs:{a:A,b:ne},backend:a}),ie=Mc({inputs:{input:ue},backend:a}),Z=Mc({inputs:{input:te},backend:a}),X=kd({inputs:{input:ue},backend:a}),ae=kd({inputs:{input:te},backend:a}),pe=Id({inputs:[ie,Z],backend:a,attrs:{axis:0}}),he=Id({inputs:[X,ae],backend:a,attrs:{axis:0}}),Ne=a.data.get(pe.dataId).values,Ee=a.data.get(he.dataId).values;return a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(k),a.disposeIntermediateTensorInfo(A),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(ne),a.disposeIntermediateTensorInfo(ue),a.disposeIntermediateTensorInfo(te),a.disposeIntermediateTensorInfo(ie),a.disposeIntermediateTensorInfo(X),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(ae),a.disposeIntermediateTensorInfo(pe),a.disposeIntermediateTensorInfo(he),{real:Ne,imag:Ee}}function hge(t,e,n){const r=new Float32Array(e*2);for(let a=0;a<e;a++){let s=0,i=0;for(let o=0;o<e;o++){const u=f5(a*o,e,n),l=LD(t,o);s+=l.real*u.real-l.imag*u.imag,i+=l.real*u.imag+l.imag*u.real}n&&(s/=e,i/=e),l5(r,s,i,a)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mge(t){const{inputs:e,backend:n}=t,{input:r}=e,a=Fe(r.shape),s=r.shape[r.shape.length-1],i=a/s,o=qn({inputs:{x:r},backend:n,attrs:{shape:[i,s]}}),u=QW(o,!1,n),l=qn({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}const gge={kernelName:KE,backendName:"cpu",kernelFunc:mge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CA(t){const{backend:e,attrs:n}=t,{shape:r,value:a,dtype:s}=n,i=s||Kd(a),o=fr(i,Fe(r));return yge(o,a,i),e.makeTensorInfo(r,i,o)}const vge={kernelName:XE,backendName:"cpu",kernelFunc:CA};function yge(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bge={kernelName:YE,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,a=n,s=ta(r.dtype,Fe(r.shape)),[i,o,u,l]=r.shape,c=a.data.get(r.dataId).values;for(let d=0;d<i;d++){const h=d*u*o*l;for(let m=0;m<o;m++){const v=m*(u*l);for(let y=0;y<u;y++){const b=y*l;for(let x=0;x<l;x++){const w=Math.round(u-y-1),N=h+v+b+x;let C=c[N];if(w>=0&&w<u){const E=w*l,$=h+v+E+x;C=c[$]}s[N]=C}}}}return{dataId:a.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s,bias:i,preluActivationWeights:o}=e,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:m}=r;let v=XW({inputs:{x:a,filter:s},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d}});if(i){const y=v;if(c==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const b=qn({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});v=$d({inputs:{a:v,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else v=$d({inputs:{a:v,b:i},backend:n});n.disposeIntermediateTensorInfo(y)}if(h){const y=v;if(c==="NCHW"&&h==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const b=qn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=J0(n,v,h,b,m),n.disposeIntermediateTensorInfo(b)}else v=J0(n,v,h,o,m);n.disposeIntermediateTensorInfo(y)}return v}const xge={kernelName:_0,backendName:"cpu",kernelFunc:wge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s,bias:i,preluActivationWeights:o}=e,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:m}=r;let v=YW({inputs:{x:a,filter:s},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d}});if(i){const y=v;v=$d({inputs:{a:v,b:i},backend:n}),n.disposeIntermediateTensorInfo(y)}if(h){const y=v;v=J0(n,v,h,o,m),n.disposeIntermediateTensorInfo(y)}return v}const Nge={kernelName:O0,backendName:"cpu",kernelFunc:Sge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cge(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,s=Fe(r.shape),i=a.shape,o=i[i.length-1],[u,l,c,f]=SD(r,a);if(l===0)return n.makeTensorInfo(u,r.dtype,[]);const d=n.data.get(a.dataId).values,h=n.bufferSync(r),m=oW(d,h,r.dtype,l,o,c,f,r.shape,s);return n.makeTensorInfo(u,r.dtype,m.values)}const Ege={kernelName:QE,backendName:"cpu",kernelFunc:Cge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:s}=e,{axis:i,batchDims:o}=r;mt([a,s],"gatherV2");const u=sn(i,a.shape)[0],l=n.data.get(s.dataId).values,c=a.shape[u];for(let N=0;N<l.length;++N){const C=l[N];Y(C<=c-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${c-1}]`)}let f=o;o==null&&(f=0);const d=Fe(s.shape),h=HD(a,s,u,f),m=qn({inputs:{x:a},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),v=qn({inputs:{x:s},backend:n,attrs:{shape:[h.batchSize,d/h.batchSize]}}),y=[h.batchSize,h.outerSize,d/h.batchSize,h.sliceSize],b=n.bufferSync(v),x=n.bufferSync(m),w=uW(x,b,y);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.makeTensorInfo(h.outputShape,w.dtype,w.values)}const Dge={kernelName:i1,backendName:"cpu",kernelFunc:Tge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Age(t){const{inputs:e,backend:n}=t,{input:r}=e,a=Fe(r.shape),s=r.shape[r.shape.length-1],i=a/s,o=qn({inputs:{x:r},backend:n,attrs:{shape:[i,s]}}),u=QW(o,!0,n),l=qn({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}const $ge={kernelName:JE,backendName:"cpu",kernelFunc:Age};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kge=kn(Om,t=>Number.isFinite(t)?1:0,"bool"),Ige={kernelName:Om,backendName:"cpu",kernelFunc:kge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ge=kn(Fm,t=>Math.abs(t)===1/0?1:0,"bool"),Oge={kernelName:Fm,backendName:"cpu",kernelFunc:_ge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fge=kn(Rm,t=>Number.isNaN(t)?1:0,"bool"),Rge={kernelName:Rm,backendName:"cpu",kernelFunc:Fge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mge(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:s}=n,i=pW(r,a,s);return e.makeTensorInfo([i.length],"float32",i)}const Pge={kernelName:eT,backendName:"cpu",kernelFunc:Mge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bge=kn(Pm,t=>Math.log1p(t)),Lge={kernelName:Pm,backendName:"cpu",kernelFunc:Bge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zge=mr((t,e)=>t&&e),Wge=Or(f1,zge,null,"bool"),Uge={kernelName:f1,backendName:"cpu",kernelFunc:Wge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qge=kn(d1,t=>t?0:1,"bool"),Vge={kernelName:d1,backendName:"cpu",kernelFunc:qge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jge=mr((t,e)=>t||e),Hge=Or(p1,jge,null,"bool"),Gge={kernelName:p1,backendName:"cpu",kernelFunc:Hge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:s,bias:i,alpha:o,beta:u}=r;mt(a,"LRN");const l=a.shape[3],c=l-1,f=n.data.get(a.dataId).values,d=Fe(a.shape),h=new Float32Array(d);function m(v){const y=v%l;let b=v-y+Math.max(0,y-s);const x=v-y+Math.min(y+s,c);let w=0;for(;b<=x;b++){const N=f[b];w+=N*N}return w}for(let v=0;v<d;v++){const y=m(v),b=f[v]*Math.pow(i+o*y,-u);h[v]=b}return n.makeTensorInfo(a.shape,a.dtype,h)}const Xge={kernelName:h1,backendName:"cpu",kernelFunc:Kge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,y:s,dy:i}=e,{depthRadius:o,bias:u,alpha:l,beta:c}=r;mt(i,"LRNGrad");const f=Fe(i.shape),d=i.shape[3],h=n.data.get(i.dataId).values,m=n.data.get(a.dataId).values,v=n.data.get(s.dataId).values,y=new Float32Array(f),b=f;for(let x=0;x<b;x++){const w=x%d,N=x-w+Math.max(0,w-o),C=x-w+Math.min(d,w+o+1);let E=0;for(let $=N;$<C;$++)E+=Math.pow(m[$],2);E=l*E+u;for(let $=N;$<C;$++){let I=-2*l*c*m[$]*v[x]/E;x===$&&(I+=Math.pow(E,-c)),I*=h[x],y[$]+=I}}return n.makeTensorInfo(i.shape,a.dtype,y)}const Qge={kernelName:tT,backendName:"cpu",kernelFunc:Yge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JW(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:s,keepDims:i}=r,o=n;let u=a.shape;const l=u.length,c=sn(s,u);let f=c;const d=nr(f,l);let h=o.data.get(a.dataId).values;if(d!=null){const N=new Array(l);for(let C=0;C<N.length;C++)N[C]=u[d[C]];h=bA(h,u,a.dtype,d,N),f=pr(f.length,l),u=N}mt(a,"max"),sa("max",f,l);const[m,v]=qr(u,f),y=Fe(v),b=mW(h,y,m,a.dtype),x=o.write(b,m,a.dtype);let w=m;return i&&(w=dr(m,c)),{dataId:x,shape:w,dtype:a.dtype}}const Jge={kernelName:m1,backendName:"cpu",kernelFunc:JW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;mt(a,"maxPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:u}=r,l=1;Y(aa(i,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const c=xi(a.shape,s,i,l,o,u);let f;if(c.filterWidth===1&&c.filterHeight===1&&fn(c.inShape,c.outShape))f=Eo({inputs:{x:a},backend:n});else{const d=n.data.get(a.dataId).values,h=St(a.shape),m=SA(d,a.shape,a.dtype,h,c,"max");f=n.makeTensorInfo(c.outShape,a.dtype,m.values)}return f}const eve={kernelName:g1,backendName:"cpu",kernelFunc:Zge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:s,strides:i,pad:o,dimRoundingMode:u,dataFormat:l}=r;mt(a,"maxPool3d");const c=du(a.shape,s,i,1,o,u,l),f=n.data.get(a.dataId).values,d=KW(f,a.shape,a.dtype,St(a.shape),c,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}const nve={kernelName:v1,backendName:"cpu",kernelFunc:tve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rve(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s}=e,{filterSize:i,strides:o,pad:u,dimRoundingMode:l}=r;mt([a,s],"maxPool3DGrad");const c=du(s.shape,i,o,1,u,l),f=n.bufferSync(s),d=jhe(f,c),h=c.strideDepth,m=c.strideHeight,v=c.strideWidth,y=c.dilationDepth,b=c.dilationHeight,x=c.dilationWidth,w=c.effectiveFilterDepth,N=c.effectiveFilterHeight,C=c.effectiveFilterWidth,E=w-1-c.padInfo.front,$=C-1-c.padInfo.left,I=N-1-c.padInfo.top,D=tn(s.shape,"float32"),k=n.bufferSync(a);for(let A=0;A<c.batchSize;++A)for(let O=0;O<c.inChannels;++O)for(let B=0;B<c.inDepth;++B)for(let z=0;z<c.inHeight;++z)for(let L=0;L<c.inWidth;++L){const F=B-E,R=z-I,q=L-$;let M=0;for(let G=0;G<w;G+=y){const V=(F+G)/h;if(!(V<0||V>=c.outDepth||Math.floor(V)!==V))for(let H=0;H<N;H+=b){const j=(R+H)/m;if(!(j<0||j>=c.outHeight||Math.floor(j)!==j))for(let ne=0;ne<C;ne+=x){const ue=(q+ne)/v;if(ue<0||ue>=c.outWidth||Math.floor(ue)!==ue)continue;const te=w*N*C-1-d.get(A,V,j,ue,O),ie=G*N*C+H*C+ne,Z=te===ie?1:0;if(Z===0)continue;const X=k.get(A,V,j,ue,O);M+=X*Z}}}D.set(M,A,B,z,L,O)}return n.makeTensorInfo(D.shape,D.dtype,D.values)}const ave={kernelName:rT,backendName:"cpu",kernelFunc:rve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sve(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s,output:i}=e,o=s;mt([s,i],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:f}=r,d=xi(o.shape,u,l,1,c,f),h=n.data.get(o.dataId).values,m=tn(d.outShape,o.dtype,GW(h,o.shape,o.dtype,d).values),v=d.strideHeight,y=d.strideWidth,b=d.dilationHeight,x=d.dilationWidth,w=d.effectiveFilterHeight,N=d.effectiveFilterWidth,C=N-1-d.padInfo.left,E=w-1-d.padInfo.top,$=tn(o.shape,"float32"),I=n.data.get(a.dataId).values,D=tn(a.shape,"float32",I);for(let k=0;k<d.batchSize;++k)for(let A=0;A<d.inChannels;++A)for(let O=0;O<d.inHeight;++O)for(let B=0;B<d.inWidth;++B){const z=O-E,L=B-C;let F=0;for(let R=0;R<w;R+=b){const q=(z+R)/v;if(!(q<0||q>=d.outHeight||Math.floor(q)!==q))for(let M=0;M<N;M+=x){const G=(L+M)/y;if(G<0||G>=d.outWidth||Math.floor(G)!==G)continue;const V=w*N-1-m.get(k,q,G,A),H=R*N+M,j=V===H?1:0;if(j===0)continue;const ne=D.get(k,q,G,A);F+=ne*j}}$.set(F,k,O,B,A)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const ive={kernelName:nT,backendName:"cpu",kernelFunc:sve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ove(t,e,n,r,a){const s=St(e),i=SA(t,e,n,s,a,"max"),o=GW(t,e,n,a,!0,r);return[i.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uve={kernelName:aT,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:s,pad:i,includeBatchInIndex:o}=e,u=n;mt(r,"MaxPoolWithArgmax");const l=u.data.get(r.dataId).values,c=xi(r.shape,a,s,[1,1],i),[f,d]=ove(l,r.shape,r.dtype,o,c),h=u.write(f,c.outShape,r.dtype),m=u.write(d,c.outShape,r.dtype);return[{dataId:h,shape:c.outShape,dtype:r.dtype},{dataId:m,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:i}=r,o=sn(s,a.shape),l=qr(a.shape,o)[1],c=Fe(l),f=[],d=n.makeTensorInfo([],"float32",new Float32Array([c]));f.push(d);const h=hl({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});f.push(h);const m=NA({inputs:{a:h,b:d},backend:n});f.push(m);const v=Dg({inputs:{x:m},backend:n,attrs:{axis:s,keepDims:i}});return f.forEach(y=>n.disposeIntermediateTensorInfo(y)),v}const cve={kernelName:y1,backendName:"cpu",kernelFunc:lve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:i}=r;mt(a,"min");const o=sn(s,a.shape);let u=o;const l=nr(u,a.shape.length);let c=a;l!=null&&(c=Ya({inputs:{x:a},backend:n,attrs:{perm:l}}),u=pr(u.length,a.shape.length)),sa("min",u,c.shape.length);const[f,d]=qr(c.shape,u),h=Fe(d),m=ma(Fe(f),c.dtype),v=n.data.get(c.dataId).values;for(let b=0;b<m.length;++b){const x=b*h;let w=v[x];for(let N=0;N<h;++N){const C=v[x+N];(Number.isNaN(C)||C<w)&&(w=C)}m[b]=w}l!=null&&n.disposeIntermediateTensorInfo(c);const y=n.makeTensorInfo(f,c.dtype,m);if(i){const b=dr(f,o),x=qn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}const dve={kernelName:b1,backendName:"cpu",kernelFunc:fve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:s,mode:i}=r;mt(a,"mirrorPad");const o=s.map((w,N)=>w[0]+a.shape[N]+w[1]),u=s.map(w=>w[0]),l=s.map((w,N)=>w[0]+a.shape[N]),c=i==="reflect"?0:1,f=n.data.get(a.dataId).values,d=a.shape.length,h=St(a.shape),m=Fe(o),v=o.length,y=St(o),b=ta(a.dtype,m);for(let w=0;w<m;w++){let N=Xd(w,v,y);for(let E=0;E<v;E++)N[E]<u[E]?N[E]=u[E]*2-N[E]-c:N[E]>=l[E]&&(N[E]=(l[E]-1)*2-N[E]+c);N=N.map((E,$)=>E-u[$]);const C=yo(N,d,h);b[w]=f[C]}return{dataId:n.write(b,o,a.dtype),shape:o,dtype:a.dtype}}const hve={kernelName:w1,backendName:"cpu",kernelFunc:pve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mve=mr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),gve=Or(zm,mve),vve={kernelName:zm,backendName:"cpu",kernelFunc:gve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZW(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:s}=r,i=a.shape.length;let o=s;if(o===-1&&(o=i-1),o!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${o}`);const u=sn([o],a.shape),l=JW({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=dr(l.shape,u),f=qn({inputs:{x:l},backend:n,attrs:{shape:c}}),d=xA({inputs:{a,b:f},backend:n}),h=rW({inputs:{x:d},backend:n}),m=Dg({inputs:{x:h},backend:n,attrs:{axis:u,keepDims:!1}}),v=qn({inputs:{x:m},backend:n,attrs:{shape:c}}),y=NA({inputs:{a:h,b:v},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),y}const yve={kernelName:B1,backendName:"cpu",kernelFunc:ZW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bve(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:s,seed:i,normalized:o}=r;mt(a,"multinomial");const u=o?a:ZW({inputs:{logits:a},backend:n,attrs:{dim:-1}}),l=u.shape[0],c=u.shape[1],f=n.data.get(u.dataId).values,d=[l,s],h=ma(Fe(d),"int32");for(let m=0;m<l;++m){const v=m*c,y=new Float32Array(c-1);y[0]=f[v];for(let w=1;w<y.length;++w)y[w]=y[w-1]+f[v+w];const b=mg.alea(i.toString()),x=m*s;for(let w=0;w<s;++w){const N=b();h[x+w]=y.length;for(let C=0;C<y.length;C++)if(N<y[C]){h[x+w]=C;break}}}return o||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(d,"int32",h)}const wve={kernelName:sT,backendName:"cpu",kernelFunc:bve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xve=mD;function Sve(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:s}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:u}=r;mt(a,"NonMaxSuppression");const l=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,{selectedIndices:f}=xve(l,c,i,o,u);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const Nve={kernelName:iT,backendName:"cpu",kernelFunc:Sve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cve=gD;function Eve(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:s}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:u,padToMaxOutputSize:l}=r;mt(a,"NonMaxSuppressionPadded");const c=n.data.get(a.dataId).values,f=n.data.get(s.dataId).values,{selectedIndices:d,validOutputs:h}=Cve(c,f,i,o,u,l);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const Tve={kernelName:oT,backendName:"cpu",kernelFunc:Eve};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dve=vD;function Ave(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:s}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:u,softNmsSigma:l}=r;mt(a,"NonMaxSuppressionWithScore");const c=n.data.get(a.dataId).values,f=n.data.get(s.dataId).values,d=i,h=o,m=u,v=l,{selectedIndices:y,selectedScores:b}=Dve(c,f,d,h,m,v);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const $ve={kernelName:uT,backendName:"cpu",kernelFunc:Ave};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kve(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:s,depth:i,onValue:o,offValue:u}=r;mt(a,"oneHot");const l=Fe(a.shape),c=new Float32Array(l*i);c.fill(u);const f=n.data.get(a.dataId).values;for(let d=0;d<l;++d)f[d]>=0&&f[d]<i&&(c[d*i+f[d]]=o);return n.makeTensorInfo([...a.shape,i],s,c)}const Ive={kernelName:C1,backendName:"cpu",kernelFunc:kve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eb(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const a=Mc({inputs:{input:r},backend:n}),s=eb({inputs:{x:a},backend:n}),i=kd({inputs:{input:r},backend:n}),o=eb({inputs:{x:i},backend:n}),u=ds({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),u}else return CA({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const _ve={kernelName:U1,backendName:"cpu",kernelFunc:eb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eU(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const a=Mc({inputs:{input:r},backend:n}),s=eU({inputs:{x:a},backend:n}),i=kd({inputs:{input:r},backend:n}),o=eb({inputs:{x:i},backend:n}),u=ds({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),u}else return CA({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const Ove={kernelName:N1,backendName:"cpu",kernelFunc:eU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tU(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return Z0({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const s=e[0].shape,i=e[0].dtype;e.forEach(c=>{Es(s,c.shape,"All tensors passed to stack must have matching shapes"),Y(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],u=e.map(c=>{const f=Z0({inputs:{input:c},backend:n,attrs:{dim:a}});return o.push(f),f}),l=Id({inputs:u,backend:n,attrs:{axis:a}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),l}const Fve={kernelName:E1,backendName:"cpu",kernelFunc:tU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:s,constantValue:i}=r;mt(a,"pad");const o=s.map((x,w)=>x[0]+a.shape[w]+x[1]),u=s.map(x=>x[0]),l=n.data.get(a.dataId).values,c=Fe(a.shape),f=a.shape.length,d=St(a.shape),h=Fe(o),m=o.length,v=St(o),y=ta(a.dtype,h);i!==0&&y.fill(i);for(let x=0;x<c;x++){const N=Xd(x,f,d).map((E,$)=>E+u[$]),C=yo(N,m,v);y[C]=l[x]}return{dataId:n.write(y,o,a.dtype),shape:o,dtype:a.dtype}}const nU={kernelName:T1,backendName:"cpu",kernelFunc:Rve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mve=mr((t,e)=>Math.pow(t,e)),Pve=Or(Um,Mve),Bve={kernelName:Um,backendName:"cpu",kernelFunc:Pve};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lve(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:s,indices:i}=e,o=a.map(y=>n.data.get(y.dataId).values),u=a.map(y=>y.shape),l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,[f,d,h]=xW(o,u,l,s.shape,s.dtype,c,i.shape),m=f.map(y=>n.makeTensorInfo([y.length],"int32",y)),v=n.makeTensorInfo(h,s.dtype,d);return m.concat([v])}const zve={kernelName:lT,backendName:"cpu",kernelFunc:Lve};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wve(t){const{inputs:e,backend:n}=t,{starts:r,limits:a,deltas:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,[l,c]=SW(i,r.shape,r.dtype,o,a.shape,u,s.shape),f=n.makeTensorInfo([l.length],"int32",l),d=n.makeTensorInfo([c.length],r.dtype,c);return[f,d]}const Uve={kernelName:cT,backendName:"cpu",kernelFunc:Wve};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qve(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:s,defaultValue:i,rowPartitionTensors:o}=e,{rowPartitionTypes:u}=r,l=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,f=n.data.get(i.dataId).values,d=o.map(y=>n.data.get(y.dataId).values),h=o.map(y=>y.shape),[m,v]=NW(l,a.shape,c,s.shape,s.dtype,f,i.shape,d,h,u);return n.makeTensorInfo(m,s.dtype,v)}const Vve={kernelName:fT,backendName:"cpu",kernelFunc:qve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jve(t){const{backend:e,attrs:n}=t,{start:r,stop:a,dtype:s,step:i}=n,o=CW(r,a,i,s);return e.makeTensorInfo([o.length],s,o)}const Hve={kernelName:dT,backendName:"cpu",kernelFunc:jve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gve=kn(qm,t=>1/t),Kve={kernelName:qm,backendName:"cpu",kernelFunc:Gve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:s,halfPixelCenters:i,size:o}=r;mt(a,"resizeBilinear");const u=St(a.shape),[l,c]=o,[f,d,h,m]=a.shape,v=n.data.get(a.dataId).values,y=new Float32Array(Fe([f,l,c,m])),b=[s&&l>1?d-1:d,s&&c>1?h-1:h],x=[s&&l>1?l-1:l,s&&c>1?c-1:c];let w=0;const N=b[0]/x[0],C=b[1]/x[1];for(let E=0;E<f;E++)for(let $=0;$<l;$++){let I;i?I=N*($+.5)-.5:I=N*$;const D=Math.max(0,Math.floor(I)),k=I-D,A=Math.min(d-1,Math.ceil(I)),O=E*u[0]+D*u[1],B=E*u[0]+A*u[1];for(let z=0;z<c;z++){let L;i?L=C*(z+.5)-.5:L=C*z;const F=Math.max(0,Math.floor(L)),R=L-F,q=Math.min(h-1,Math.ceil(L)),M=O+F*u[2],G=B+F*u[2],V=O+q*u[2],H=B+q*u[2];for(let j=0;j<m;j++){const ne=v[M+j],ue=v[G+j],te=v[V+j],ie=v[H+j],Z=ne+(te-ne)*R,X=ue+(ie-ue)*R,ae=Z+(X-Z)*k;y[w++]=ae}}}return n.makeTensorInfo([f,l,c,m],"float32",y)}const Yve={kernelName:I1,backendName:"cpu",kernelFunc:Xve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:s}=e,{alignCorners:i}=r;mt([s,a],"resizeBilinearGrad");const o=St(a.shape),[u,l,c,f]=a.shape,[,d,h]=s.shape,m=new Float32Array(u*l*c*f),v=[i&&d>1?l-1:l,i&&h>1?c-1:c],y=[i&&d>1?d-1:d,i&&h>1?h-1:h],b=v[0]/y[0],x=v[1]/y[1],w=n.data.get(s.dataId).values;let N=0;for(let C=0;C<u;C++){const E=C*o[0];for(let $=0;$<d;$++){const I=$*b,D=Math.floor(I),k=Math.min(Math.ceil(I),l-1),A=E+D*o[1],O=E+k*o[1],B=I-D,z=1-B;for(let L=0;L<h;L++){const F=L*x,R=Math.floor(F),q=Math.min(Math.ceil(F),c-1),M=F-R,G=1-M,V=A+R*o[2],H=A+q*o[2],j=O+R*o[2],ne=O+q*o[2],ue=z*G,te=z*M,ie=B*G,Z=B*M;for(let X=0;X<f;X++){const ae=w[N++];m[V+X]+=ae*ue,m[H+X]+=ae*te,m[j+X]+=ae*ie,m[ne+X]+=ae*Z}}}}return n.makeTensorInfo([u,c,l,f],"float32",m)}const Jve={kernelName:mT,backendName:"cpu",kernelFunc:Qve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:s,halfPixelCenters:i,size:o}=r;mt(a,"resizeNearestNeighbor");const u=St(a.shape),[l,c]=o,[f,d,h,m]=a.shape,v=n.data.get(a.dataId).values,y=new Float32Array(f*l*c*m),b=[s&&l>1?d-1:d,s&&c>1?h-1:h],x=[s&&l>1?l-1:l,s&&c>1?c-1:c],w=b[0]/x[0],N=b[1]/x[1];let C=0;for(let E=0;E<f;E++){const $=E*u[0];for(let I=0;I<l;I++){const D=i?w*(I+.5):w*I;let k=Math.min(d-1,s?Math.round(D):Math.floor(D));i&&(k=Math.max(0,k));const A=$+k*u[1];for(let O=0;O<c;O++){const B=i?N*(O+.5):N*O;let z=Math.min(h-1,s?Math.round(B):Math.floor(B));i&&(z=Math.max(0,z));const L=A+z*u[2];for(let F=0;F<m;F++){const R=v[L+F];y[C++]=R}}}}return n.makeTensorInfo([f,l,c,m],a.dtype,y)}const eye={kernelName:k1,backendName:"cpu",kernelFunc:Zve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tye(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:s}=e,{alignCorners:i}=r;mt([s,a],"resizeNearestNeighborGrad");const o=St(a.shape),u=St(s.shape),[l,c,f,d]=a.shape,[,h,m]=s.shape,v=new Float32Array(l*c*f*d),y=n.data.get(s.dataId).values,b=[i&&h>1?c-1:c,i&&m>1?f-1:f],x=[i&&h>1?h-1:h,i&&m>1?m-1:m],w=b[0]/x[0],N=b[1]/x[1],C=1/w,E=1/N,$=Math.ceil(C)*2+2,I=Math.ceil(E)*2+2;for(let D=0;D<l;D++){const k=D*o[0];for(let A=0;A<c;A++){const O=k+A*o[1],B=Math.floor(A*C),z=Math.floor(B-$/2);for(let L=0;L<f;L++){const F=O+L*o[2],R=Math.floor(L*E),q=Math.floor(R-I/2);for(let M=0;M<d;M++){let G=0;for(let V=0;V<$;V++){const H=V+z;if(H<0||H>=h)continue;const j=k+H*u[1],ne=H*w,ue=Math.min(c-1,i?Math.round(ne):Math.floor(ne));if(A===ue)for(let te=0;te<I;te++){const ie=te+q;if(ie<0||ie>=m)continue;const Z=j+ie*u[2],X=ie*N,ae=Math.min(f-1,i?Math.round(X):Math.floor(X));L===ae&&(G+=y[Z+M])}}v[F+M]=G}}}}return n.makeTensorInfo(a.shape,a.dtype,v)}const nye={kernelName:hT,backendName:"cpu",kernelFunc:tye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:s}=r;mt(a,"reverse");const i=a.shape.length,o=sn(s,a.shape);if(i===0)return Eo({inputs:{x:a},backend:n});const u=new $r(a.shape,a.dtype),l=n.bufferSync(a);for(let c=0;c<u.size;c++){const f=u.indexToLoc(c),d=f.slice();o.forEach(h=>d[h]=a.shape[h]-1-d[h]),u.set(l.get(...d),...f)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}const aye={kernelName:_1,backendName:"cpu",kernelFunc:rye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sye={kernelName:_T,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:s,center:i}=e,o=n,u=ta(r.dtype,Fe(r.shape)),[l,c,f,d]=r.shape,[h,m]=kD(i,c,f),v=255,y=Math.sin(a),b=Math.cos(a),x=o.data.get(r.dataId).values;for(let N=0;N<l;N++){const C=N*f*c*d;for(let E=0;E<c;E++){const $=E*(f*d);for(let I=0;I<f;I++){const D=I*d;for(let k=0;k<d;k++){const A=[l,E,I,k],O=A[2],B=A[1];let z=(O-h)*b-(B-m)*y,L=(O-h)*y+(B-m)*b;z=Math.round(z+h),L=Math.round(L+m);let F=s;if(typeof s!="number"&&(k===3?F=v:F=s[k]),z>=0&&z<f&&L>=0&&L<c){const q=L*(f*d),M=z*d,G=C+q+M+k;F=x[G]}const R=C+$+D+k;u[R]=F}}}}return{dataId:o.write(u,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iye=kn(Hm,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),oye={kernelName:Hm,backendName:"cpu",kernelFunc:iye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uye(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:s}=e,{shape:i}=r,{sliceRank:o,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=Gc(s,a,i),d=!0,h=n.bufferSync(a),m=n.bufferSync(s),v=gc(h,m,i,f,l,u,o,c,0,d);return n.makeTensorInfo(i,v.dtype,v.values)}const lye={kernelName:gT,backendName:"cpu",kernelFunc:uye};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cye(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<e?n=a+1:r=a;return r}function fye(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<=e?n=a+1:r=a;return r}function dye(t,e,n,r,a,s){const i=fr("int32",n*a);for(let o=0;o<n;++o){const u=t.slice(o*r,(o+1)*r),l=o*a;for(let c=0;c<a;++c)i[l+c]=s==="left"?cye(u,e[c+l]):fye(u,e[c+l])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pye(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:s}=e,{side:i}=r,o=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,l=dye(o,u,a.shape[0],a.shape[1],s.shape[1],i);return n.makeTensorInfo(s.shape,"int32",l)}const hye={kernelName:yT,backendName:"cpu",kernelFunc:pye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mye(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:s}=e;mt([r,a,s],"select");const i=r.shape.length,o=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,c=vs(a.dtype,s.dtype),f=ma(Fe(a.shape),c);let d=0;const h=i===0||i>1||a.shape.length===1?1:Fe(a.shape.slice(1));for(let m=0;m<o.length;m++)for(let v=0;v<h;v++)o[m]===1?f[d++]=u[m]:f[d++]=l[m];return n.makeTensorInfo(a.shape,c,f)}const gye={kernelName:O1,backendName:"cpu",kernelFunc:mye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vye=pw,yye=hw,bye=kn(Km,t=>t>=0?yye*t:vye*(Math.exp(t)-1)),wye={kernelName:Km,backendName:"cpu",kernelFunc:bye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xye=kn(Qm,t=>t<0?-1:t>0?1:0),Sye={kernelName:Qm,backendName:"cpu",kernelFunc:xye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nye=kn(Xm,t=>Math.sin(t)),Cye={kernelName:Xm,backendName:"cpu",kernelFunc:Nye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eye=kn(Ym,t=>Math.sinh(t)),Tye={kernelName:Ym,backendName:"cpu",kernelFunc:Eye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dye=11920928955078125e-23,k3=Math.log(Dye)+2,Aye=kn(Zm,t=>{const e=t>-k3,n=t<k3,r=Math.exp(t);let a;return n?a=r:e?a=t:a=Math.log(1+r),a}),$ye={kernelName:Zm,backendName:"cpu",kernelFunc:Aye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:s,paddings:i}=r;mt([a],"spaceToBatchND");const o=Fe(s),u=[[0,0]];u.push(...i);for(let E=1+s.length;E<a.shape.length;++E)u.push([0,0]);const l=nU.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),c=gg(l.shape,s,o,!1),f=vg(c.length,s.length,!1),d=yg(l.shape,s,o,!1),v=qn({inputs:{x:l},backend:n,attrs:{shape:c}}),x=Ya({inputs:{x:v},backend:n,attrs:{perm:f}}),C=qn({inputs:{x},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),C}const Iye={kernelName:M1,backendName:"cpu",kernelFunc:kye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ye(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:s,defaultValue:i}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${a.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const o=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values[0],[f,d,h,m,v]=AW(o,r.shape,r.dtype,u,a.dtype,l,c);return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([d[0]],a.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const Oye={kernelName:bT,backendName:"cpu",kernelFunc:_ye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fye(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const i=Array.from(n.data.get(a.dataId).values),o=n.data.get(r.dataId).values,u=Array.from(n.data.get(s.dataId).values),[l,c,f]=$W(o,r.shape,r.dtype,i,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([f.length],s.dtype,new Int32Array(f))]}const Rye={kernelName:wT,backendName:"cpu",kernelFunc:Fye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mye(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${a.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(a.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,[l,c]=wA(i,r.shape,r.dtype,o,u,!0);return n.makeTensorInfo(c,r.dtype,l)}const Pye={kernelName:xT,backendName:"cpu",kernelFunc:Mye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bye(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${a.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(a.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,[l,c]=wA(i,r.shape,r.dtype,o,u);return n.makeTensorInfo(c,r.dtype,l)}const Lye={kernelName:ST,backendName:"cpu",kernelFunc:Bye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zye(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:s,defaultValue:i}=e,{outputShape:o}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:f,outputSize:d}=Gc(s,a,o),h=!1,m=n.bufferSync(a);let v;switch(s.dtype){case"bool":{const y=n.bufferSync(s),b=!!n.data.get(i.dataId).values[0];v=gc(m,y,o,d,c,l,u,f,b,h);break}case"float32":{const y=n.bufferSync(s),b=n.data.get(i.dataId).values[0];v=gc(m,y,o,d,c,l,u,f,b,h);break}case"int32":{const y=n.bufferSync(s),b=n.data.get(i.dataId).values[0];v=gc(m,y,o,d,c,l,u,f,b,h);break}case"string":{const y=n.bufferSync(s),b=al(n.data.get(i.dataId).values[0]);v=gc(m,y,o,d,c,l,u,f,b,h);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(o,v.dtype,v.values)}const Wye={kernelName:NT,backendName:"cpu",kernelFunc:zye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:s,axis:i}=r,o=sn(i,a.shape)[0],u=jD(a,s,o),l=new Array(a.shape.length).fill(0),c=a.shape.slice();return u.map(f=>{const d=[...c];d[o]=f;const h=Pc({inputs:{x:a},backend:n,attrs:{begin:l,size:d}});return l[o]+=f,h})}const qye={kernelName:P1,backendName:"cpu",kernelFunc:Uye};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vye={kernelName:CT,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;mt(n,"square");const a=r.data.get(n.dataId).values,s=new Float32Array(a.length);for(let o=0;o<a.length;++o){const u=a[o];s[o]=u*u}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jye=kn(ig,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),Hye={kernelName:ig,backendName:"cpu",kernelFunc:jye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:s,end:i,strides:o,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:d}=r;mt(a,"stridedSlice");const{finalShapeSparse:h,finalShape:m,isIdentity:v,sliceDim0:y,isSimpleSlice:b,begin:x,end:w,strides:N}=DD(a.shape,s,i,o,u,l,c,f,d);let C;if(v)C=qn({inputs:{x:a},backend:n,attrs:{shape:m}});else if(y||b){Y(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const E=CD(x,w,N),$=Pc({inputs:{x:a},backend:n,attrs:{begin:x,size:E}});C=qn({inputs:{x:$},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo($)}else{const E=n.bufferSync(a),$=_W(h,E,N,x);C=n.makeTensorInfo(m,$.dtype,$.values)}return C}const Kye={kernelName:ET,backendName:"cpu",kernelFunc:Gye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xye(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:s,leftPad:i,rightPad:o,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:f}=e,d=n.data.get(c.dataId).values,h=n.data.get(f.dataId).values,[m,v]=OW(d,h,a,s,i,o,u,l);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(f.shape,"int32",v)]}const Yye={kernelName:TT,backendName:"cpu",kernelFunc:Xye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qye(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:s,delimiter:i}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const o=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values[0],[l,c,f]=FW(o,u,a),d=c.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const Jye={kernelName:DT,backendName:"cpu",kernelFunc:Qye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zye(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(s.dataId).values,o=RW(i,a);return n.makeTensorInfo(s.shape,"int32",o)}const e0e={kernelName:AT,backendName:"cpu",kernelFunc:Zye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t0e=kn(rg,t=>Math.tan(t)),n0e={kernelName:rg,backendName:"cpu",kernelFunc:t0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r0e=kn(ag,t=>Math.tanh(t)),a0e={kernelName:ag,backendName:"cpu",kernelFunc:r0e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s0e(t){const{inputs:e,backend:n}=t,{tensor:r,indices:a,updates:s}=e,{sliceRank:i,numUpdates:o,sliceSize:u,strides:l,outputSize:c}=Gc(s,a,r.shape),f=!1,d=n.bufferSync(a),h=n.bufferSync(s),m=n.bufferSync(r),v=gc(d,h,r.shape,c,u,o,i,l,m,f);return n.makeTensorInfo(r.shape,v.dtype,v.values)}const i0e={kernelName:vT,backendName:"cpu",kernelFunc:s0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:s}=r;mt(a,"tile");const i=PW(n.bufferSync(a),s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const u0e={kernelName:sg,backendName:"cpu",kernelFunc:o0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:s,sorted:i}=r;mt(a,"topk");const o=n.data.get(a.dataId).values,[u,l]=LW(o,a.shape,a.dtype,s,i);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}const c0e={kernelName:$T,backendName:"cpu",kernelFunc:l0e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f0e(t){const{inputs:e,attrs:n,backend:r}=t,{image:a,transforms:s}=e,{interpolation:i,fillMode:o,fillValue:u,outputShape:l}=n,[c,f,d,h]=a.shape,[m,v]=l??[f,d],y=[c,m,v,h],b=St(a.shape),x=b[0],w=b[1],N=b[2],C=St(y),E=C[0],$=C[1],I=C[2],D=ta(a.dtype,Fe(y));D.fill(u);const k=r.data.get(a.dataId).values,A=r.data.get(s.dataId).values;for(let B=0;B<c;++B){const z=s.shape[0]===1?A:A.subarray(B*8,B*8+8);for(let L=0;L<m;++L)for(let F=0;F<v;++F)for(let R=0;R<h;++R){let q;const M=z[6]*F+z[7]*L+1;if(M===0)continue;const G=(z[0]*F+z[1]*L+z[2])/M,V=(z[3]*F+z[4]*L+z[5])/M,H=I3(G,d,o),j=I3(V,f,o);switch(i){case"nearest":q=v0e(k,f,d,x,w,N,B,j,H,R,u);break;case"bilinear":q=y0e(k,f,d,x,w,N,B,j,H,R,u);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const ne=B*E+L*$+F*I+R;D[ne]=q}return r.makeTensorInfo(y,a.dtype,D)}return{dataId:r.write(D,y,a.dtype),shape:a.shape,dtype:a.dtype}}const d0e={kernelName:kT,backendName:"cpu",kernelFunc:f0e};function I3(t,e,n){switch(n){case"reflect":return p0e(t,e);case"wrap":return h0e(t,e);case"nearest":return g0e(t,e);case"constant":default:return m0e(t)}}function p0e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Ec(0,n,e-1)}function h0e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Ec(0,n,e-1)}function m0e(t,e){return t}function g0e(t,e){return Ec(0,t,e-1)}function Sh(t,e,n,r,a,s,i,o,u,l,c){const f=i*r+o*a+u*s+l;return 0<=o&&o<e&&0<=u&&u<n?t[f]:c}function v0e(t,e,n,r,a,s,i,o,u,l,c){const f=Math.round(o),d=Math.round(u);return Sh(t,e,n,r,a,s,i,f,d,l,c)}function y0e(t,e,n,r,a,s,i,o,u,l,c){const f=Math.floor(o),d=Math.floor(u),h=f+1,m=d+1,v=(m-u)*Sh(t,e,n,r,a,s,i,f,d,l,c)+(u-d)*Sh(t,e,n,r,a,s,i,f,m,l,c),y=(m-u)*Sh(t,e,n,r,a,s,i,h,d,l,c)+(u-d)*Sh(t,e,n,r,a,s,i,h,m,l,c);return(h-o)*v+(o-f)*y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b0e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:s}=e;mt(s,"unique");const i=r.data.get(s.dataId).values,{outputValues:o,outputShape:u,indices:l}=zW(i,a,s.shape,s.dtype);return[r.makeTensorInfo(u,s.dtype,o),r.makeTensorInfo([l.length],"int32",l)]}const w0e={kernelName:IT,backendName:"cpu",kernelFunc:b0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x0e(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:s}=r;s<0&&(s+=a.shape.length);const i=a.shape.length,o=a.shape[s],u=new Array(i-1);let l=0;for(let h=0;h<i;h++)h!==s&&(u[l++]=a.shape[h]);const c=new Array(i).fill(0),f=a.shape.slice();f[s]=1;const d=new Array(o);for(let h=0;h<d.length;h++){c[s]=h;const m=Pc({inputs:{x:a},backend:n,attrs:{begin:c,size:f}});d[h]=qn({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return d}const S0e={kernelName:z1,backendName:"cpu",kernelFunc:x0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:s}=e,{numSegments:i}=r;mt(a,"unsortedSegmentSum");const o=a.shape.length,u=s.shape.length,l=[],c=[],f=o-u;let d=s;for(let m=0;m<f;++m){const v=Z0({inputs:{input:d},backend:n,attrs:{dim:m+1}});d=v,c.push(v)}for(let m=0;m<i;++m){const v=wl(m,"int32"),y=n.makeTensorInfo([],"int32",v),b=tW({inputs:{a:y,b:d},backend:n}),x=hl({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),w=Tw({inputs:{a:x,b:a},backend:n}),N=Dg({inputs:{x:w},backend:n,attrs:{axis:0,keepDims:!1}});l.push(N),c.push(y),c.push(b),c.push(x),c.push(w),c.push(N)}const h=tU({inputs:l,backend:n,attrs:{axis:0}});return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}const C0e={kernelName:W1,backendName:"cpu",kernelFunc:N0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E0e=[bhe,Zde,xhe,Nhe,spe,Ehe,Dhe,$he,Ihe,Ohe,Rhe,Phe,Lhe,Uhe,Vhe,Ghe,Xhe,Qhe,Zhe,vhe,tme,rme,sme,ope,ome,rpe,lpe,lme,epe,fme,pme,hme,gme,yme,wme,Sme,Cme,Tme,Ame,kme,_me,Fme,Mme,Bme,Lme,Wme,qme,jme,Hme,Gme,Kme,Yme,Zme,che,tge,cpe,lge,fpe,cge,ppe,gge,vge,bge,mpe,vpe,xge,Nge,Ege,Dge,bpe,xpe,tpe,$ge,dme,Ige,Oge,Rge,fhe,Npe,Epe,Pge,Dpe,Lge,Uge,Vge,Gge,Xge,Qge,Jge,$pe,eve,nve,ave,ive,uve,cve,dve,Ipe,hve,vve,wve,Ope,Rpe,Nve,Tve,$ve,Ppe,Ive,Ove,Fve,nU,Bve,phe,zpe,zve,Uve,Vve,Hve,npe,FC,Kve,hhe,mhe,ghe,Yve,Jve,eye,nye,aye,sye,oye,Kpe,lye,hye,gye,wye,Ype,Sye,Cye,Tye,Qpe,yve,$ye,Iye,Oye,Rye,Pye,Lye,Wye,qye,ehe,Vye,nhe,ahe,Hye,Kye,Yye,Jye,e0e,uhe,Qme,n0e,a0e,i0e,u0e,c0e,d0e,Bpe,w0e,S0e,C0e,_ve];for(const t of E0e)XB(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pc={},Ty={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function T0e(t,e){pc[t]=e}function Hi(t,e){if(!(t in pc)||e!=null){const r=A0e(t,e);if(r!==null)pc[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=pc[t];return n==null||n.isContextLost()?(delete pc[t],Hi(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),pc[t])}function D0e(t){if(!$e().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function A0e(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??D0e(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete pc[t]},!1),$e().getBool("SOFTWARE_WEBGL_ENABLED")&&(Ty.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Ty)||n.getContext("experimental-webgl",Ty):n.getContext("webgl2",Ty)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Jh;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Jh||(Jh={}));var Fs;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Fs||(Fs={}));var Zr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Zr||(Zr={}));function Ag(t,e){return[e,t]}function $0e(t,e){return t*e}function Dy(t){const e=Fe(t),n=Math.ceil(e/4);return VN(n)}function rp(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function k0e(t,e){const[n,r]=rp(t,e);return n*r*4}function EA(t,e){const n=t;let r,a,s,i,o,u,l,c,f,d;return $e().getNumber("WEBGL_VERSION")===2?(r=n.R32F,a=n.R16F,s=n.RGBA16F,i=n.RGBA32F,o=n.RED,l=4,c=1,f=n.HALF_FLOAT,d=n.FLOAT,u=n.RGBA8):(r=t.RGBA,a=t.RGBA,s=t.RGBA,i=n.RGBA,o=t.RGBA,l=4,c=4,f=e!=null?e.HALF_FLOAT_OES:null,d=t.FLOAT,u=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:u,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:d}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lt(t,e){const n=e();return $e().getBool("DEBUG")&&I0e(t),n}function I0e(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+R0e(t,e))}const _0e=596e-10,O0e=65504;function F0e(t){return!!($e().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||_0e<Math.abs(t)&&Math.abs(t)<O0e)}function R0e(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Ay(t,e){return gu(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function M0e(t,e){const n=gu(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(lt(t,()=>t.shaderSource(n,e)),lt(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function P0e(t,e){const n=gu(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(lt(t,()=>t.shaderSource(n,e)),lt(t,()=>t.compileShader(n)),$e().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw rU(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const B0e=/ERROR: [0-9]+:([0-9]+):/g;function rU(t,e){const n=B0e.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],a=t.split(`
`),s=a.length.toString().length+2,i=a.map((f,d)=>ad((d+1).toString(),s)+f);let o=0;for(let f=0;f<i.length;f++)o=Math.max(i[f].length,o);const u=i.slice(0,r-1),l=i.slice(r-1,r),c=i.slice(r);console.log(u.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${ad(l[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function L0e(t){return gu(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function z0e(t,e){if(lt(t,()=>t.linkProgram(e)),!$e().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function kS(t,e){if(lt(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function W0e(t,e){const n=gu(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return lt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),lt(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function U0e(t,e){const n=gu(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return lt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),lt(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function q0e(t){return gu(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function V0e(t,e){const n=$e().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,a=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}function j0e(t){return gu(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function _3(t,e,n,r,a,s,i){const o=t.getAttribLocation(e,n);return o===-1?!1:(lt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),lt(t,()=>t.vertexAttribPointer(o,a,t.FLOAT,!1,s,i)),lt(t,()=>t.enableVertexAttribArray(o)),!0)}function H0e(t,e,n){Q0e(t,n),lt(t,()=>t.activeTexture(t.TEXTURE0+n)),lt(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function G0e(t,e,n){return gu(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function K0e(t,e,n){return t.getUniformLocation(e,n)}function X0e(t,e,n,r){lt(t,()=>H0e(t,e,r)),lt(t,()=>t.uniform1i(n,r))}function IS(t,e,n){lt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),lt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function O3(t,e){lt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),lt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function $y(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Y0e(t,e))}function Y0e(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function gu(t,e,n){const r=lt(t,()=>e());if(r==null)throw new Error(n);return r}function Q0e(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const a=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${a}.`)}}function _d(t,e=2){return Fe(t.slice(0,t.length-e))}function Od(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function ky(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[_d(t),...Od(t)]),e}function J0e(t,e=!1){let n=$e().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=$e().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&$e().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((o,u)=>u>=t.length-2?TE(t[u]):t[u]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=bl(t).newShape);let a=Fe(t),s=null;t.length<=1&&a<=n?s=[1,a]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);const i=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||i)if(e){const o=_d(t);let u=2,l=2;t.length&&([u,l]=Od(t)),a=o*(u/2)*(l/2),s=VN(a).map(c=>c*2)}else s=VN(a);return s}function Iy(t){return t%2===0}function tb(t,e){if(t=t.slice(-2),e=e.slice(-2),fn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||Iy(n)&&Iy(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Iy(t[0])&&Iy(e[0])}let _S,OS;function Z0e(t){if(_S==null){const e=Hi(t);_S=e.getParameter(e.MAX_TEXTURE_SIZE)}return _S}function ebe(t){if(OS==null){const e=Hi(t);OS=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,OS)}function tbe(t){if(t===0)return 0;let e;const n=Hi(t);return ci(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:ci(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function ci(t,e){return t.getExtension(e)!=null}function F3(t){try{if(Hi(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function nbe(t){if(t===0)return!1;const e=Hi(t);if(t===1){if(!ci(e,"OES_texture_float"))return!1}else if(!ci(e,"EXT_color_buffer_float"))return!1;return MC(e)}function rbe(t){if(t===0)return!1;const e=Hi(t);if(t===1){if(!ci(e,"OES_texture_float")||!ci(e,"WEBGL_color_buffer_float"))return!1}else{if(ci(e,"EXT_color_buffer_float"))return MC(e);const r="EXT_color_buffer_half_float";if(ci(e,r)){const a=e.getExtension(r);return abe(e,a)}return!1}return MC(e)}function MC(t){const e=EA(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),i}function abe(t,e){const n=EA(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(i),o}function sbe(t){return t!==2?!1:Hi(t).fenceSync!=null}function $g(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Y(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vt=$e();vt.registerFlag("HAS_WEBGL",()=>vt.getNumber("WEBGL_VERSION")>0);vt.registerFlag("WEBGL_VERSION",()=>F3(2)?2:F3(1)?1:0);vt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);vt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>vt.get("WEBGL_VERSION")===2);vt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);vt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);vt.registerFlag("WEBGL_PACK",()=>vt.getBool("HAS_WEBGL"));vt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_CLIP",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_REDUCE",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_LAZILY_UNPACK",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_CONV_IM2COL",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>Z0e(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>ebe(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=vt.getNumber("WEBGL_VERSION");return t===0?0:tbe(t)});vt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>vt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!uL());vt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>nbe(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>vt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:vt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));vt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>rbe(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>sbe(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>vt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);vt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});vt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>uL()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});vt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);vt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);vt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);vt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);vt.registerFlag("WEBGL_EXP_CONV",()=>!1);vt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>vt.getBool("IS_TEST"));vt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);vt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);vt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);vt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pa(){let t,e,n,r,a,s,i,o,u,l;return $e().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",a="texture",s="outputColor",i="out vec4 outputColor;",o=$e().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",a="texture2D",s="gl_FragColor",i="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:a,output:s,defineOutput:i,defineSpecialNaN:o,defineSpecialInf:u,defineRound:l}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yc(t,e,n="index"){const r=St(e);return r.map((a,s)=>{const i=`int ${t[s]} = ${n} / ${a}`,o=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${a}`:`index -= ${t[s]} * ${a}`;return`${i}; ${o};`}).join("")}function Dw(t,e,n="index"){const r=St(e);return r.map((a,s)=>{const i=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,o=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${i}; ${o};`}).join("")}function ibe(t,e){const n=t.length,r=t.map(s=>`${e}[${s}]`),a=new Array(n-1);a[n-2]=r[n-1];for(let s=n-3;s>=0;--s)a[s]=`(${a[s+1]} * ${r[s+1]})`;return a}function obe(t,e,n="index"){const r=t.map((s,i)=>i),a=ibe(r,e);return a.map((s,i)=>{const o=`int ${t[i]} = ${n} / ${a[i]}`,u=i===a.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${a[i]}`:`index -= ${t[i]} * ${a[i]}`;return`${o}; ${u};`}).join("")}function TA(t){const e=St(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function DA(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const aU=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:sU}=goe;function ube(t,e,n){const r=[];if(t.forEach(h=>{const m=Fe(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${m>1?`[${m}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:v}=AA(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(v.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const a=r.join(`
`),s=t.map(h=>lbe(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=e.texShape,o=Pa(),u=dbe(o);let l,c,f=mbe(o);return e.isPacked?(l=cbe(e.logicalShape,i,n.enableShapeUniforms),c=hbe(o)):(l=fbe(e.logicalShape,i,n.enableShapeUniforms),c=pbe(o)),n.packedInputs&&(f+=bbe),[f,u,c,a,l,s,n.userCode].join(`
`)}function ap(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Ibe(t,e);case 1:return Obe(t,e);case 2:return Rbe(t,e);case 3:return Pbe(t,e);case 4:return Lbe(t,e);case 5:return zbe(t);case 6:return Wbe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function iU(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return kbe(t);case 1:return _be(t,e);case 2:return Fbe(t,e);case 3:return Mbe(t,e);default:return Bbe(t,e)}}function lbe(t,e,n=!1,r){let a="";n?a+=iU(t,r):a+=ap(t,r);const s=t.shapeInfo.logicalShape,i=e.logicalShape;return s.length<=i.length&&(n?a+=Ube(t,e):a+=qbe(t,e)),a}function cbe(t,e,n){switch(t.length){case 0:return oU();case 1:return wbe(t,e,n);case 2:return Abe(t,e,n);case 3:return Sbe(t,e,n);default:return Cbe(t,e,n)}}function fbe(t,e,n){switch(t.length){case 0:return oU();case 1:return xbe(t,e,n);case 2:return $be(t,e,n);case 3:return Nbe(t,e,n);case 4:return Ebe(t,e,n);case 5:return Tbe(t,e);case 6:return Dbe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function dbe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function pbe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function hbe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function mbe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${gbe}
    ${vbe}
    ${ybe}
  `}const gbe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,vbe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ybe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,bbe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function oU(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function wbe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function xbe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Sbe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[2]/2),s=a*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec3(b, r, c);
    }
  `}function Nbe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Dw(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Yc(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Cbe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[t.length-1]/2),s=a*Math.ceil(t[t.length-2]/2);let i=s,o="",u="b, r, c";for(let l=2;l<t.length-1;l++)i*=t[t.length-l-1],o=`
      int b${l} = index / ${i};
      index -= b${l} * ${i};
    `+o,u=`b${l}, `+u;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec${t.length}(${u});
    }
  `}function Ebe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Dw(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Yc(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Tbe(t,e){const n=Yc(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Dbe(t,e){const n=Yc(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Abe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(fn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const a=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec2(r, c);
    }
  `}function $be(t,e,n){return fn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Qc(t){return`offset${t}`}function kbe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Pa();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Ibe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[a,s]=t.shapeInfo.texShape;if(a===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=Qc(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[o,u]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${u}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function _be(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t.shapeInfo.texShape,s=Pa();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function Obe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${sp(t)}
      }
    `;const a=t.shapeInfo.texShape,s=a[0],i=a[1];if(i===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Qc(n);return i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${i}, index + ${o});
      return sampleTexture(${n}, uv);
    }
  `}function Fbe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,i=s[0],o=s[1],u=Pa();if(s!=null&&fn(n,s))return e?`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${u.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${i}.0);

        return ${u.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${a}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `;const l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${a}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${l[0]}, ${l[1]}, row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `}function Rbe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(s!=null&&fn(n,s)){if(e)return`
      float ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const d=s[0],h=s[1];return`
    float ${a}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:i,keptDims:o}=bl(n),u=i;if(u.length<n.length){const d=ip(t,u),h=["row","col"];return`
      ${ap(d,e)}
      float ${a}(int row, int col) {
        return ${a}(${op(h,o)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${sp(t)}
      }
    `;const l=s[0],c=s[1],f=Qc(r);return c===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
      return sampleTexture(${r}, uv);
    }
  `:l===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${a}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${a}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${f};
    vec2 uv = uvFromFlat(${l}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function Mbe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const d=n.slice(1),h=[1,2],m=ip(t,d),v=["b","row","col"];return`
        ${iU(m,e)}
        vec4 ${a}(int b, int row, int col) {
          return ${a}(${op(v,h)});
        }
      `}const o=Pa();if(e)return`
    vec4 ${a}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const u=i[0],l=i[1],c=Math.ceil(n[2]/2),f=c*Math.ceil(n[1]/2);return`
    vec4 ${a}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${l}, ${f}, ${c}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function Pbe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],i=n[2],{newShape:o,keptDims:u}=bl(n),l=o;if(l.length<n.length){const v=ip(t,l),y=["row","col","depth"];return`
        ${ap(v,e)}
        float ${a}(int row, int col, int depth) {
          return ${a}(${op(y,u)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${i}, 1)));
        ${sp(t)}
      }
    `;const c=t.shapeInfo.texShape,f=c[0],d=c[1],h=t.shapeInfo.flatOffset;if(d===s&&h==null)return e?`
      float ${a}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${a}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${d}.0, ${f}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(d===i&&h==null)return e?`
      float ${a}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `;const m=Qc(r);return e?`
    float ${a}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${a}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${i} + depth + ${m};
        vec2 uv = uvFromFlat(${f}, ${d}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Bbe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Pa();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${a.texture2D}(${n}, uv);
    }
  `;const s=t.shapeInfo.logicalShape,i=s.length,o=t.shapeInfo.texShape,u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],l=u[0],c=u[1],f=Math.ceil(s[i-1]/2);let d=f*Math.ceil(s[i-2]/2),h="int b, int row, int col",m=`b * ${d} + (row / 2) * ${f} + (col / 2)`;for(let v=2;v<i-1;v++)h=`int b${v}, `+h,d*=s[i-v-1],m=`b${v} * ${d} + `+m;return`
    vec4 ${r}(${h}) {
      int index = ${m};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${l});
      return ${a.texture2D}(${n}, uv);
    }
  `}function Lbe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],i=n[2]*s,o=n[1]*i,{newShape:u,keptDims:l}=bl(n);if(u.length<n.length){const x=ip(t,u),w=["row","col","depth","depth2"];return`
      ${ap(x,e)}
      float ${a}(int row, int col, int depth, int depth2) {
        return ${a}(${op(w,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${i}, ${s}, 1)));
        ${sp(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,d=f[0],h=f[1],m=`int stride2 = ${r}Shape[3];`,v=`int stride1 = ${r}Shape[2] * stride2;`,y=`int stride0 = ${r}Shape[1] * stride1;`;if(h===o&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        ${m}
        ${v}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===s&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;const b=Qc(r);return e?`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${v}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${b});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${i} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${d}, ${h}, index + ${b});
      return sampleTexture(${r}, uv);
    }
  `}function zbe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e[4],s=e[3]*a,i=e[2]*s,o=e[1]*i,{newShape:u,keptDims:l}=bl(e);if(u.length<e.length){const v=ip(t,u),y=["row","col","depth","depth2","depth3"];return`
      ${ap(v)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${op(y,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${i}, ${s}, ${a})) +
          depth3;
        ${sp(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,d=f[0],h=f[1];if(h===o&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${s}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=Qc(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${i} + depth * ${s} +
          depth2 * ${a} + depth3 + ${m};
      vec2 uv = uvFromFlat(${d}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Wbe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:s}=bl(e);if(a.length<e.length){const y=ip(t,a),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${ap(y)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${op(b,s)});
      }
    `}const i=e[5],o=e[4]*i,u=e[3]*o,l=e[2]*u,c=e[1]*l;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${l}, ${u}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${sp(t)}
      }
    `;const f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],m=d[1];if(m===c&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${l}, ${u}, ${o}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===i&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const v=Qc(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${l} + depth * ${u} +
          depth2 * ${o} + depth3 * ${i} + depth4 + ${v};
      vec2 uv = uvFromFlat(${h}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function sp(t){const e=t.name,n=Fe(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function Ube(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,o=sU(t.shapeInfo.logicalShape,e.logicalShape),u=Fn(i),l=i-s;let c;const f=["x","y","z","w","u","v"];s===0?c="":i<2&&o.length>=1?c="coords = 0;":c=o.map(x=>`coords.${f[x+l]} = 0;`).join(`
`);let d="";i<2&&s>0?d="coords":d=t.shapeInfo.logicalShape.map((x,w)=>`coords.${f[w+l]}`).join(", ");let h="return outputValue;";const v=Fe(t.shapeInfo.logicalShape)===1,b=Fe(e.logicalShape)===1;if(s===1&&!v&&!b)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(v&&!b)i===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(o.length){const x=s-2,w=s-1;o.indexOf(x)>-1&&o.indexOf(w)>-1?h="return vec4(outputValue.x);":o.indexOf(x)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(w)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${a}() {
      ${u} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${d});
      ${h}
    }
  `}function qbe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",s=e.texShape,i=t.shapeInfo.texShape,o=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===u&&t.shapeInfo.flatOffset==null&&fn(i,s))return`
      float ${a}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const l=Fn(u),c=sU(t.shapeInfo.logicalShape,e.logicalShape),f=u-o;let d;const h=["x","y","z","w","u","v"];o===0?d="":u<2&&c.length>=1?d="coords = 0;":d=c.map(v=>`coords.${h[v+f]} = 0;`).join(`
`);let m="";return u<2&&o>0?m="coords":m=t.shapeInfo.logicalShape.map((v,y)=>`coords.${h[y+f]}`).join(", "),`
    float ${a}() {
      ${l} coords = getOutputCoords();
      ${d}
      return get${r}(${m});
    }
  `}function Fn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function AA(t,e,n){const{newShape:r,keptDims:a}=bl(e),s=e.length,i=t&&s===3&&e[0]===1,o=i?e.slice(1):r,u=!t&&s>1&&!fn(e,n)&&r.length<s||i;return{useSqueezeShape:u,uniformShape:u?o:e,keptDims:a}}function ip(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function op(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vbe(t,e,n,r){const a=n.map((c,f)=>{const d={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(d.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[f],shapeInfo:d}}),s=a.map(c=>c.shapeInfo),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=ube(a,i,e),u=P0e(t.gl,o),l=t.createProgram(u);return $e().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:u,source:o,webGLProgram:l,inShapeInfos:s,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(l),Object.assign({program:e,fragmentShader:u,source:o,webGLProgram:l,inShapeInfos:s,outShapeInfo:i},uU(t,e,l)))}function uU(t,e,n){const r=[],a=[];let s,i,o,u=null,l=null;l=t.getUniformLocation(n,"NAN",!1),$e().getNumber("WEBGL_VERSION")===1&&(u=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const f of e.variableNames){const d={name:f,uniform:t.getUniformLocation(n,f,c),offset:t.getUniformLocation(n,`offset${f}`,c)};e.enableShapeUniforms&&(d.shape=t.getUniformLocation(n,`${f}Shape`,c),d.texShape=t.getUniformLocation(n,`${f}TexShape`,c)),r.push(d)}if(e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",c),o=t.getUniformLocation(n,"outShapeStrides",c),i=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const f of e.customUniforms)a.push(t.getUniformLocation(n,f.name,c));return{variablesLocations:r,customUniformLocations:a,infLoc:u,nanLoc:l,outShapeLocation:s,outShapeStridesLocation:o,outTexShapeLocation:i}}function R3(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const a=n.logicalShape,s=e[r],i=s.shape;if(!fn(a,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${a} and ${i} must match`);if(n.isUniform&&s.isUniform)return;const o=n.texShape,u=s.isUniform?null:s.texData.texShape;if(!fn(o,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${u} must match`)})}function jbe(t,e,n,r,a){e.program.enableShapeUniforms||(R3(e.inShapeInfos,n),R3([e.outShapeInfo],[r]));const s=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,i[0],i[1]):t.setOutputMatrixTexture(s.texture,i[0],i[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),$e().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let u=0;u<n.length;++u){const l=n[u],{uniform:c,offset:f,shape:d,texShape:h}=e.variablesLocations[u];if(d){const{uniformShape:m}=AA(e.program.packedInputs,l.shape,l.texData.texShape);switch(m.length){case 1:t.gl.uniform1iv(d,new Int32Array(m));break;case 2:t.gl.uniform2iv(d,new Int32Array(m));break;case 3:t.gl.uniform3iv(d,new Int32Array(m));break;case 4:t.gl.uniform4iv(d,new Int32Array(m));break}}if(h&&t.gl.uniform2i(h,l.texData.texShape[0],l.texData.texShape[1]),c!=null){if(l.isUniform){if(Fe(l.shape)<2)t.gl.uniform1f(c,l.uniformValues[0]);else{let m=l.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),t.gl.uniform1fv(c,m)}continue}l.texData.slice!=null&&f!=null&&t.gl.uniform1i(f,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,c,u)}}const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:t.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(o,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const u=St(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(u));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(u));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(u));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&a)for(let u=0;u<e.program.customUniforms.length;++u){const l=e.program.customUniforms[u],c=e.customUniformLocations[u],f=a[u];if(l.type==="float")t.gl.uniform1fv(c,f);else if(l.type==="vec2")t.gl.uniform2fv(c,f);else if(l.type==="vec3")t.gl.uniform3fv(c,f);else if(l.type==="vec4")t.gl.uniform4fv(c,f);else if(l.type==="int")t.gl.uniform1iv(c,f);else if(l.type==="ivec2")t.gl.uniform2iv(c,f);else if(l.type==="ivec3")t.gl.uniform3iv(c,f);else if(l.type==="ivec4")t.gl.uniform4iv(c,f);else throw Error(`uniform type ${l.type} is not supported yet.`)}t.executeProgram()}function Hbe(t,e,n){let r="";e.concat(n).forEach(i=>{const o=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!i.isUniform){const u=i.texData.texShape,{useSqueezeShape:l,uniformShape:c,keptDims:f}=AA(t.packedInputs,i.shape,u);let d="",h="",m="";if(c.length===1&&t.packedInputs){const C=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];d=`${C[0]>1}_${C[1]>1}`}else if(c.length===2&&!t.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const C=St(c);m=`${C[0]===u[1]}_${C[C.length-1]===u[1]}`}const v=i.shape.length,y=c.length===2&&fn(i.shape,u),b=Fe(i.shape)===1,x=Ed(i.shape,n.shape),w=!t.packedInputs&&v===n.shape.length&&fn(u,n.texData.texShape),N=t.packedInputs||c.length>2?"":`${u[0]>1}_${u[1]>1}`;r+=`${v}_${w}_${l?f:""}_${c.length}_${b}_${x}_${y}_${d}_${h}_${m}_${N}_${o}`}else{const u=i.isUniform?"uniform":i.texData.texShape;r+=`${i.shape}_${u}_${o}`}});const a=t.userCode;let s=t.constructor.name;return s+="_"+r+"_"+a+`${$e().getNumber("WEBGL_VERSION")}`,s}function ya(t){return $e().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gbe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Jh.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Pa();this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Dw(["r","c","d"],e):Yc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kbe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Jh.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Pa();this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Dw(["r","c","d"],e):Yc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xbe{constructor(e){this.variableNames=["A"],this.outTexUsage=Fs.DOWNLOAD;const n=Pa();this.outputShape=e,this.userCode=`
      ${aU}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ybe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Fs.DOWNLOAD;const n=Pa();this.outputShape=e,this.userCode=`
      ${aU}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qbe={R:0,G:1,B:2,A:3};class M3{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const a=Pa();this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let i="";for(let o=0;o<r.length;o++){const u=r[o];i+=`
          if(offset == ${o}) {
            result = values[${Qbe[u]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?DA():TA(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${a.texture2D}(A, uv);
          ${i}
        }
        ${a.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jbe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Pa();this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length);let a="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let o=0;o<=1;o++){const u=i*2+o;a+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${u}] = values[0];
            } else if (offset == 1) {
              result[${u}] = values[1];
            } else if (offset == 2) {
              result[${u}] = values[2];
            } else {
              result[${u}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?DA():TA(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${a}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zbe(t){const e=Pa(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return M0e(t,n)}function e1e(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return W0e(t,e)}function t1e(t){const e=new Uint16Array([0,1,2,2,1,3]);return U0e(t,e)}function kg(t,e,n,r,a,s){V0e(e,n);const i=q0e(t),o=t.TEXTURE_2D;return lt(t,()=>t.bindTexture(o,i)),lt(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),lt(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),lt(t,()=>t.texParameteri(o,t.TEXTURE_MIN_FILTER,t.NEAREST)),lt(t,()=>t.texParameteri(o,t.TEXTURE_MAG_FILTER,t.NEAREST)),$e().getNumber("WEBGL_VERSION")===1?lt(t,()=>t.texImage2D(o,0,r,e,n,0,a,s,null)):lt(t,()=>t.texStorage2D(o,1,r,e,n)),lt(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:i,texShape:[n,e]}}function lU(t){return t.internalFormatFloat}function n1e(t,e,n,r){const[a,s]=Ag(e,n);return kg(t,a,s,lU(r),r.textureFormatFloat,t.FLOAT)}function cU(t){return t.internalFormatHalfFloat}function r1e(t,e,n,r){const[a,s]=Ag(e,n);return kg(t,a,s,cU(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function fU(t){return t.downloadTextureFormat}function a1e(t,e,n,r){const[a,s]=Ag(e,n);return kg(t,a,s,fU(r),t.RGBA,t.UNSIGNED_BYTE)}function dU(t){return t.internalFormatPackedFloat}function s1e(t,e,n,r){const[a,s]=rp(e,n);return kg(t,a,s,dU(r),t.RGBA,t.FLOAT)}function pU(t){return t.internalFormatPackedHalfFloat}function i1e(t,e,n,r){const[a,s]=rp(e,n);return kg(t,a,s,pU(r),t.RGBA,r.textureTypeHalfFloat)}function o1e(t,e,n){return lt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),_3(t,e,"clipSpacePos",n,3,20,0)&&_3(t,e,"uv",n,2,20,12)}function u1e(t,e,n,r,a,s){lt(t,()=>t.bindTexture(t.TEXTURE_2D,e));let i,o,u;a instanceof Uint8Array?(i=new Uint8Array(n*r*4),o=t.UNSIGNED_BYTE,u=t.RGBA):(i=new Float32Array(n*r*4),o=t.FLOAT,u=s.internalFormatPackedFloat),i.set(a),$e().getNumber("WEBGL_VERSION")===2?lt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,o,i)):lt(t,()=>t.texImage2D(t.TEXTURE_2D,0,u,n,r,0,t.RGBA,o,i)),lt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function l1e(t,e,n){lt(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?$e().getNumber("WEBGL_VERSION")===2?lt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):lt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):$e().getNumber("WEBGL_VERSION")===2?lt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):lt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),lt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function c1e(t,e,n,r){const a=t.createBuffer();lt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,a));const o=4*4*e*n;return lt(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)),lt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),lt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),a}function f1e(t,e,n){const r=t,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function d1e(t,e,n,r){const[a,s]=Ag(e,n),i=4,o=new Uint8Array($0e(e*n,i));return lt(t,()=>t.readPixels(0,0,a,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function p1e(t,e,n,r,a,s,i,o){const u=t,l=new Float32Array(k0e(s,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function h1e(t,e,n){const r=new Float32Array(e*n*4);return lt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FS{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=$e().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,T0e(n,e)):this.gl=Hi(n),e=this.gl,$e().getNumber("WEBGL_VERSION")===2){const s=e;this.createVertexArray=()=>lt(s,()=>s.createVertexArray()),this.bindVertexArray=i=>lt(s,()=>s.bindVertexArray(i)),this.deleteVertexArray=i=>lt(s,()=>s.deleteVertexArray(i)),this.getVertexArray=()=>lt(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(e!=null){const s=e.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>lt(e,()=>s.createVertexArrayOES()),this.bindVertexArray=i=>lt(e,()=>s.bindVertexArrayOES(i)),this.deleteVertexArray=i=>lt(e,()=>s.deleteVertexArrayOES(i)),this.getVertexArray=()=>lt(e,()=>e.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),$e().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=Ay(this.gl,s),ci(this.gl,i))this.textureHalfFloatExtension=Ay(this.gl,i);else if($e().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),ci(this.gl,a))this.colorBufferHalfFloatExtension=Ay(this.gl,a);else if($e().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",ci(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(ci(this.gl,a))this.colorBufferHalfFloatExtension=this.gl.getExtension(a);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=e1e(this.gl),this.indexBuffer=t1e(this.gl),this.framebuffer=j0e(this.gl),this.textureConfig=EA(this.gl,this.textureHalfFloatExtension)}get debug(){return $e().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;lt(e,()=>e.finish()),lt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),lt(e,()=>e.deleteFramebuffer(this.framebuffer)),lt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),lt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),lt(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),n1e(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),r1e(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),a1e(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),l1e(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,a){this.throwIfDisposed(),u1e(this.gl,e,n,r,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),i1e(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),s1e(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(O3(this.gl,this.framebuffer),this.outputTexture=null),lt(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>d1e(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,a,s,i){return p1e(this.gl,e,n,r,a,s,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return f1e(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const a=c1e(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if($e().getBool("WEBGL_FENCE_API_ENABLED")){const a=e,s=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const i=a.clientWaitSync(s,0,0);return i===a.ALREADY_SIGNALED||i===a.CONDITION_SATISFIED},n=s}else $e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,$e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>h1e(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=Zbe(n));const r=L0e(n);lt(n,()=>n.attachShader(r,this.vertexShader)),lt(n,()=>n.attachShader(r,e)),z0e(n,r);const a=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&kS(n,a),a}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;lt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),o1e(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(lt(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&kS(this.gl,this.program),lt(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?G0e(this.gl,e,n):K0e(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),lt(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),X0e(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[a,s]=rp(n,r);this.setOutputMatrixTextureDriver(e,a,s)}setOutputMatrixWriteRegion(e,n,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,n)}setOutputPackedMatrixWriteRegion(e,n,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&kS(this.gl,this.program),$y(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}lt(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),lt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Ay(this.gl,$e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if($e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(a.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if($e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await lO(()=>this.disposed||this.isQueryAvailable(e,$e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,$e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),a=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=m1e(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in $e().platform&&(r=$e().platform.setTimeoutCustom.bind($e().platform)),lO(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),IS(this.gl,e,this.framebuffer),this.debug&&$y(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(IS(this.gl,this.outputTexture,this.framebuffer),this.debug&&$y(this.gl)):O3(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const a=this.gl;IS(a,e,this.framebuffer),this.debug&&$y(a),this.outputTexture=e,lt(a,()=>a.viewport(0,0,n,r)),lt(a,()=>a.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,a){this.throwIfDisposed(),lt(this.gl,()=>this.gl.scissor(e,n,r,a))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function m1e(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:g1e,bincountImpl:hU,bincountReduceImpl:v1e,bitwiseAndImpl:y1e,castImpl:b1e,ceilImpl:w1e,concatImpl:x1e,equalImpl:S1e,expImpl:N1e,expm1Impl:C1e,floorImpl:E1e,gatherNdImpl:T1e,gatherV2Impl:D1e,greaterImpl:A1e,greaterEqualImpl:$1e,lessImpl:k1e,lessEqualImpl:I1e,linSpaceImpl:_1e,logImpl:O1e,maxImpl:F1e,maximumImpl:R1e,minimumImpl:M1e,multiplyImpl:P1e,negImpl:B1e,notEqualImpl:L1e,prodImpl:z1e,raggedGatherImpl:W1e,raggedRangeImpl:U1e,raggedTensorToTensorImpl:q1e,rangeImpl:V1e,rsqrtImpl:j1e,scatterImpl:H1e,sigmoidImpl:G1e,simpleAbsImpl:mU,sliceImpl:K1e,sparseFillEmptyRowsImpl:X1e,sparseReshapeImpl:Y1e,sparseSegmentReductionImpl:gU,sqrtImpl:Q1e,staticRegexReplaceImpl:J1e,stridedSliceImpl:Z1e,stringNGramsImpl:ewe,stringSplitImpl:twe,stringToHashBucketFastImpl:nwe,subImpl:rwe,tileImpl:awe,topKImpl:swe,transposeImpl:$A,uniqueImpl:iwe}=lhe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vU(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Ia(t,e){return e===1?[t]:vU(t,e)}function owe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uwe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ya(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Ia("rc",this.rank),r=Fn(this.rank),a=this.getOutOfBoundsCondition(n),s=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${a}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let s=`${r===0?"r":"rp1"}, ${a===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)s=`${e[e.length-1-i]},`+s;n.push(s)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],a=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${a};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yU{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length);let r="";for(let a=0;a<4;a++){let s="thisRC = rc;";a%2===1&&(s+="thisRC.z += 1;"),a>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${a>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${a}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${a>0?"}":""}
      `}this.userCode=`
      ${lwe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?DA():TA(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function lwe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?obe(["r","c","d"],"inputShape"):Yc(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cwe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const a=B3(n,r),s=L3(e,a,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const i=P3(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const u=this.freeTextures[s].pop();return this.usedTextures[s].push(u),u}let o;return a===Zr.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===Zr.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===Zr.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===Zr.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===Zr.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}releaseTexture(e,n,r,a){if(this.freeTextures==null)return;const s=B3(r,a),i=L3(n,s,a);i in this.freeTextures||(this.freeTextures[i]=[]);const o=P3(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,a),u=$e().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const l=this.usedTextures[i],c=l&&l.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function fwe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function P3(t,e,n,r,a){const s=dwe(e,r);let i;if(a){const[u,l]=rp(t[0],t[1]);i=u*l}else{const[u,l]=Ag(t[0],t[1]);i=u*l}const o=fwe(n,s);return i*o}function dwe(t,e){switch(t){case Zr.PACKED_2X2_FLOAT32:return dU(e);case Zr.PACKED_2X2_FLOAT16:return pU(e);case Zr.UNPACKED_FLOAT32:return lU(e);case Zr.UNPACKED_FLOAT16:return cU(e);case Zr.PACKED_4X1_UNSIGNED_BYTE:return fU(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function pwe(t){return $e().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Zr.PACKED_2X2_FLOAT32:Zr.UNPACKED_FLOAT32:t?Zr.PACKED_2X2_FLOAT16:Zr.UNPACKED_FLOAT16}function B3(t,e){if(t===Fs.UPLOAD)return Zr.PACKED_2X2_FLOAT32;if(t===Fs.RENDER||t==null)return pwe(e);if(t===Fs.DOWNLOAD||t===Fs.PIXELS)return Zr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function L3(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vo{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Ni="if (isnan(x)) return x;",hwe="return x;",z3="return abs(x);",mwe="return (x >= 0.0) ? x : (exp(x) - 1.0);",gwe=Ni+`
  return (x < 0.0) ? 0.0 : x;
`,vwe=Ni+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Lu="return x;",ywe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bwe="return x;",wwe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,xwe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Swe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Nwe="return 1.0 / (1.0 + exp(-1.0 * x));";class Hu{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cwe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length);const n=e.length,r=Ia("rc",n),a=Fn(n),s=owe(n,r),i=r.slice(-2),o=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${a} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ewe=dD,Twe=1e-7,Dwe=1e-4,_y={};function Awe(t){return t in _y||(_y[t]={}),_y[t]}const $we=$e().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),kwe=600;function Iwe(){return $e().global.screen==null?1024:$e().global.screen.height*$e().global.screen.width*window.devicePixelRatio*kwe/1024/1024}class Aw extends EE{nextDataId(){return Aw.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!$e().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof FS)n=e;else{const r=Hi($e().getNumber("WEBGL_VERSION"),e);n=new FS(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Hi($e().getNumber("WEBGL_VERSION"));n=new FS(r),this.binaryCache=Awe($e().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new cwe(this.gpgpu),this.numMBBeforeWarning=Iwe(),this.texData=new UB(this,uo())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,a,s,i){const o=this.makeTensorInfo(n,r),u=this.texData.get(o.dataId);u.isPacked=!1,u.texture={texture:e,texShape:[a,s]},u.texShape=[a,s];const l=ky(n),c=new M3(l,!1,i),f=this.runWebGLProgram(c,[o],r,[[a,s]]);return f.shape=n,u.texture=null,this.disposeIntermediateTensorInfo(o),f.dataId}write(e,n,r){if(($e().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||$e().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:n,dtype:r,values:e,usage:Fs.UPLOAD,refCount:1}),a}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,a,s){if($e().getBool("DEBUG")&&this.checkNumericalProblems(n),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:a,values:n,usage:Fs.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:a,complexTensorInfos:s,slice:i,shape:o,isPacked:u}=n;if(i!=null){let d;u?d=new Hu(o,Lu):d=new vo(o,Lu);const h=this.runWebGLProgram(d,[{dataId:e,shape:o,dtype:a}],a),m=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(a==="string")return r;const l=this.activeTimers!=null;let c;l&&(c=Ua());let f;if(a==="complex64"){const d=this.readSync(s.real.dataId),h=this.readSync(s.imag.dataId);f=ou(d,h)}else f=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=Ua()-c),this.convertAndCacheOnCPU(e,f)}async read(e){if(this.pendingRead.has(e)){const m=this.pendingRead.get(e);return new Promise(v=>m.push(v))}const n=this.texData.get(e),{values:r,shape:a,slice:s,dtype:i,complexTensorInfos:o,isPacked:u}=n;if(s!=null){let m;u?m=new Hu(a,Lu):m=new vo(a,Lu);const v=this.runWebGLProgram(m,[{dataId:e,shape:a,dtype:i}],i),y=this.read(v.dataId);return this.disposeIntermediateTensorInfo(v),y}if(r!=null)return this.convertAndCacheOnCPU(e);if($e().getBool("DEBUG")&&!$e().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&$e().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l=null,c;if(i!=="complex64"&&$e().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const m=this.texData.get(c.dataId);l=this.gpgpu.createBufferFromTexture(m.texture.texture,...Dy(a))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(i==="complex64"){const m=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),v=m[0],y=m[1];f=ou(v,y)}else if(l==null)f=this.getValuesFromTexture(e);else{const m=Fe(a);f=this.gpgpu.downloadFloat32MatrixFromBuffer(l,m)}if(c!=null&&this.disposeIntermediateTensorInfo(c),l!=null){const m=this.gpgpu.gl;lt(m,()=>m.deleteBuffer(l))}const d=this.convertAndCacheOnCPU(e,f),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(m=>m(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&uo().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e,n={}){const r=this.texData.get(e),{values:a,shape:s,slice:i,dtype:o,isPacked:u,texture:l}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let h;u?h=new Hu(s,Lu):h=new vo(s,Lu);const m=this.runWebGLProgram(h,[{dataId:e,shape:s,dtype:o}],o),v=this.readToGPU(m,n);return this.disposeIntermediateTensorInfo(m),v}if(l==null)throw a!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),f=uo().makeTensorFromTensorInfo(c),d=this.texData.get(c.dataId);return Object.assign({tensorRef:f},d.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>al(a));return tn(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return tn(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!F0e(r))throw $e().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:a}=this.texData.get(e),s=Fe(n);if($e().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const d=this.decode(e),h=this.texData.get(d.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...Dy(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(d),m}const i=$e().getBool("WEBGL_PACK")&&a===!0,o=i?ky(n):n,u=i?new Ybe(o):new Xbe(o),l=this.runWebGLProgram(u,[{shape:o,dtype:r,dataId:e}],"float32"),c=this.texData.get(l.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(l),f}timerAvailable(){return $e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let a=!1;this.programTimersStack==null?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=sl(this.activeTimers.map(u=>u.query)).filter(u=>u!=null),i=sl(this.activeTimers.map(u=>u.name)).filter(u=>u!=null);this.activeTimers=n,a&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if($e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const u=await Promise.all(s);o.kernelMs=LJ(u),o.getExtraProfileInfo=()=>u.map((l,c)=>({name:i[c],ms:l})).map(l=>`${l.name}: ${l.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return $e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ua(),endMs:null}}endTimer(e){return $e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ua(),e)}async getQueryTime(e){if($e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:a,usage:s,isPacked:i,slice:o}=this.texData.get(e),u=o&&o.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),n!=null&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,s,i)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=$we){return $e().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&Fe(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Os("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Ewe(e.shape,n)}packedUnaryOp(e,n,r){const a=new Hu(e.shape,n),s=this.compileAndRun(a,[e],r);return uo().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const a=mU(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,a)}if($e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,z3,e.dtype);const n=new vo(e.shape,z3),r=this.compileAndRun(n,[e]);return uo().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&fm(r[0])){const s=r.map(i=>Zu(i));a=this.write(s,e,n)}else a=this.write(r,e,n);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:n}}makeOutput(e,n,r){return uo().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new Cwe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new uwe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[_d(e.shape),...Od(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},s=[_d(n),...Od(n)],i=new yU(s,r),o=!0,u=[r],l=this.runWebGLProgram(i,[a],e.dtype,u,o);return{dataId:l.dataId,shape:n,dtype:l.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:a,shape:s,dtype:i}=r;if(n!=null){const d=Fe(s),h=n[0]*n[1]*4;Y(d<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=ky(s);let u;a?u=new Kbe(o):u=new Gbe(o);const l=!0,c=[n??Dy(o)],f=this.runWebGLProgram(u,[{shape:o,dtype:i,dataId:e}],i,c,l,n);return{dtype:i,shape:s,dataId:f.dataId}}runWebGLProgram(e,n,r,a,s=!1,i){const o=this.makeTensorInfo(e.outputShape,r),u=this.texData.get(o.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===Jh.DENSE){const b=i??Dy(e.outputShape);u.texShape=b.map(x=>x*2)}if(e.outTexUsage!=null&&(u.usage=e.outTexUsage),Fe(o.shape)===0)return u.values=ta(o.dtype,0),o;const l=[],c=n.map(b=>{if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(b.dataId);if(x.texture==null){if(!e.packedInputs&&Fe(b.shape)<=$e().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=b.shape)}if(this.uploadToGPU(b.dataId),!!x.isPacked!=!!e.packedInputs)b=x.isPacked?this.unpackTensor(b):this.packTensor(b),l.push(b),x=this.texData.get(b.dataId);else if(x.isPacked&&!tb(x.shape,b.shape)){const w=b,N=b.shape;b.shape=x.shape,b=this.packedReshape(b,N),l.push(b),x=this.texData.get(b.dataId),w.shape=N}return{shape:b.shape,texData:x,isUniform:!1}});this.uploadToGPU(o.dataId);const f={shape:o.shape,texData:u,isUniform:!1},d=Hbe(e,c,f),h=this.getAndSaveBinary(d,()=>Vbe(this.gpgpu,e,c,f)),m=this.activeTimers!=null;let v;m&&(v=this.startTimer()),$e().get("ENGINE_COMPILE_ONLY")||jbe(this.gpgpu,h,c,f,a),l.forEach(b=>this.disposeIntermediateTensorInfo(b)),m&&(v=this.endTimer(v),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(v)}));const y=$e().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){const b=Ua();b-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!$e().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&s===!1){const b=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),b}return o}compileAndRun(e,n,r,a,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,a,s)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||($e().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Te(()=>{if(!$e().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=$e().getBool("DEBUG");$e().set("DEBUG",!1);const n=this.abs(Ct(1e-8)).dataSync()[0];if($e().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Twe:Dwe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:a,values:s,texture:i,usage:o,isPacked:u}=n;if(i!=null)return;const l=this.activeTimers!=null;let c;l&&(c=Ua());let f=n.texShape;if(f==null&&(f=J0e(r,u),n.texShape=f),s!=null){const d=ky(r);let h,m=f[1],v=f[0];const y=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(u||!y)&&([m,v]=rp(f[0],f[1])),u?h=new Jbe(d,y):h=new M3(d,y);const b=y?[v,m]:f,x=this.makeTensorInfo(b,a),w=this.texData.get(x.dataId);y?w.usage=Fs.PIXELS:w.usage=Fs.UPLOAD,w.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),m,v,s);const N=[[v,m]],E=this.runWebGLProgram(h,[x],a,N,!0),$=this.texData.get(E.dataId);n.texShape=$.texShape,n.isPacked=$.isPacked,n.usage=$.usage,$e().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(n.texture=$.texture,n.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(x),l&&(this.uploadWaitMs+=Ua()-c)}else{const d=this.acquireTexture(f,o,a,u);n.texture=d}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:a}=r;return n!=null&&(r.values=_we(n,a)),r.values}acquireTexture(e,n,r,a){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,a)}computeBytes(e,n){return e[0]*e[1]*k0(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(a=>{try{this.checkCompletion_(n),a(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await t5(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(rU(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:a,nanLoc:s,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:u}=uU(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=a,e.nanLoc=s,e.outShapeLocation=i,e.outShapeStridesLocation=o,e.outTexShapeLocation=u}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:a,height:s,width:i,channels:o}=e,u=uo().backend;if(!u.gpgpu.gl.isTexture(a))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=u.writeTexture(a,n,r,s,i,o);return uo().makeTensorFromDataId(l,n,r,u)}}Aw.nextDataId=0;function _we(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */lL()&&dL("webgl",()=>new Aw,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kA=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Bc{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Ht(n,r),this.enableShapeUniforms=ya(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jc=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class up{constructor(e,n,r,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ht(n,r);const s=this.outputShape.length;this.enableShapeUniforms=ya(s);let i="";if(a)if(s===0||Fe(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${Fn(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const u=Ia("coords",s);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${u[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${u[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${u[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${u[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ss(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Owe={kernelName:_m,backendName:"webgl",kernelFunc:Ss};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kl(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,s=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(s.dataId),o=Ss({inputs:{x:r},backend:n}),u=Ss({inputs:{x:a},backend:n});return i.complexTensorInfos={real:o,imag:u},s}const Fwe={kernelName:RE,backendName:"webgl",kernelFunc:kl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bU="return (a < 0.) ? b * a : a;",wU=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Rwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:s}=r,i=n.makeTensorInfo([],"float32",wl(s,"float32")),o=$e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new up(wU,a.shape,i.shape):new Bc(bU,a.shape,i.shape),u=n.runWebGLProgram(o,[a,i],"float32");return n.disposeIntermediateTensorInfo(i),u}const Mwe={kernelName:u1,backendName:"webgl",kernelFunc:Rwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xU="return (a < 0.) ? b * a : a;",SU=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Pwe(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e,s=$e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new up(SU,r.shape,a.shape):new Bc(xU,r.shape,a.shape);return n.runWebGLProgram(s,[r,a],"float32")}const Bwe={kernelName:D1,backendName:"webgl",kernelFunc:Pwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lp="if (isnan(x)) return x;";function bn({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:s})=>{const{x:i}=a,o=s,u=r||i.dtype;if(o.shouldExecuteOnCPU([i])&&n!=null){const f=o.texData.get(i.dataId),d=n(f.values,u);return o.makeTensorInfo(i.shape,u,d)}const l=$e().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return l?c=new Hu(i.shape,e):c=new vo(i.shape,t),o.runWebGLProgram(c,[i],u)}}function oa({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:s}){return({inputs:i,backend:o})=>{const{a:u,b:l}=i,c=o;if(r&&u.dtype==="complex64"){const m=c.texData.get(u.dataId),v=c.texData.get(l.dataId),[y,b]=[[m.complexTensorInfos.real,v.complexTensorInfos.real],[m.complexTensorInfos.imag,v.complexTensorInfos.imag]].map(w=>{const[N,C]=w,E={dataId:N.dataId,dtype:N.dtype,shape:u.shape},$={dataId:C.dataId,dtype:C.dtype,shape:l.shape},I=new Bc(t,u.shape,l.shape);return c.runWebGLProgram(I,[E,$],vs(N.dtype,C.dtype))}),x=kl({inputs:{real:y,imag:b},backend:c});return c.disposeIntermediateTensorInfo(y),c.disposeIntermediateTensorInfo(b),x}const f=s||vs(u.dtype,l.dtype);if((u.dtype==="string"||l.dtype==="string"||c.shouldExecuteOnCPU([u,l]))&&a!=null){const m=c.texData.get(u.dataId).values,v=c.texData.get(l.dataId).values,y=u.dtype==="string"?uu(m):m,b=u.dtype==="string"?uu(v):v,[x,w]=a(u.shape,l.shape,y,b,f),N=c.makeTensorInfo(w,f),C=c.texData.get(N.dataId);return C.values=x,N}const d=$e().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return d?h=new up(e,u.shape,l.shape,n):h=new Bc(t,u.shape,l.shape),c.runWebGLProgram(h,[u,l],f)}}function Zh(t,e=!1){if(t==="linear")return e?bwe:hwe;if(t==="relu")return e?xwe:gwe;if(t==="elu")return e?wwe:mwe;if(t==="relu6")return e?Swe:vwe;if(t==="prelu")return e?SU:xU;if(t==="leakyrelu")return e?wU:bU;if(t==="sigmoid")return e?Nwe:ywe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NU{constructor(e,n,r,a=!1,s=!1,i=!1,o=null,u=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=ya(this.outputShape.length);const c=a?e[1]:e[2],f=Math.ceil(c/2),d=a?"i * 2, rc.y":"rc.y, i * 2",h=s?"rc.z, i * 2":"i * 2, rc.z",m=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let y="",b="";o&&(u?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:l?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:y=`vec4 activation(vec4 x) {
          ${o}
        }`,b="result = activation(result);");const x=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let w="rc.x",N="rc.x";e[0]<n[0]?w=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(N=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${y}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${w};
        int batchB = ${N};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${v[0]});
          result += (${m[1]} * ${v[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${b}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W3={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class U3{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ht(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q3="return a * b;";function IA(t){const{inputs:e,backend:n}=t,{a:r,b:a}=e,s=vs(r.dtype,a.dtype);if(r.dtype==="complex64"){const o=n.texData.get(r.dataId),u=n.texData.get(a.dataId),l=new U3(W3.REAL,r.shape,a.shape),c=new U3(W3.IMAG,r.shape,a.shape),f=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:a.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:a.shape}],d=n.runWebGLProgram(l,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),m=kl({inputs:{real:d,imag:h},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),m}if(n.shouldExecuteOnCPU([r,a])){const o=n.texData.get(r.dataId),u=n.texData.get(a.dataId),[l,c]=P1e(r.shape,a.shape,o.values,u.values,s),f=n.makeTensorInfo(c,s),d=n.texData.get(f.dataId);return d.values=l,f}let i;return $e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new up(q3,r.shape,a.shape):i=new Bc(q3,r.shape,a.shape),n.runWebGLProgram(i,[r,a],s)}const Lwe={kernelName:Wm,backendName:"webgl",kernelFunc:IA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zwe(t,e,n){const r=[_d(t.shape),...Od(t.shape)],a={dtype:t.dtype,shape:r,dataId:t.dataId},s=[_d(e),...Od(e)],i=new yU(s,r),o=!0,u=[r],l=n.runWebGLProgram(i,[a],t.dtype,u,o);return{dataId:l.dataId,shape:e,dtype:l.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function it(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:s}=r,i=n,o=Fe(a.shape),u=qB(s,o),l=Fe(u);Y(o===l,()=>`The new shape (${u}) has ${l} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const c=i.texData.get(a.dataId);return c.isPacked&&!tb(a.shape,u)&&!(c.texture!==null&&tb(c.shape,u))?zwe(a,u,i):(i.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype})}const Wwe={kernelName:$1,backendName:"webgl",kernelFunc:it};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V3{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:s,outSize:i}=e;this.outputShape=[a,i];const o=Math.floor(r/4)*4,u=r%4;let l="sumValue += dot(values, ones);";if(n!=null){const f=1/n;l=`sumValue += dot(values * ${Sd(f)?f.toPrecision(2):f}, ones);`}let c="";s%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${l}
        }

        int inIdx = inOffset + ${o};
        if (${u===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${l}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${l}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${l}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uwe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:s,outSize:i}=e;this.outputShape=[a,i];let o="0.0",u="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",u="min"):n==="max"&&(o="-1.0 / 1e-20",u="max");let l=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?l="sumValue":n==="prod"?l="prodValue":n==="all"?l="allValue":n==="any"&&(l="anyValue");const c=Math.floor(r/4)*4,f=r%4;let d=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${u}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${u}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(o="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(o="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let m="";s%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qwe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=dw(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Zc(t,e,n,r){const a=qwe(t.shape);let s=t;for(let i=0;i<a.length;i++){const{inSize:o,windowSize:u,outSize:l}=a[i];let c,f;n==="mean"?c=i===0?new V3({windowSize:u,inSize:o,batchSize:t.shape[0],outSize:l},o):new V3({windowSize:u,inSize:o,batchSize:t.shape[0],outSize:l}):c=new Uwe({windowSize:u,inSize:o,batchSize:t.shape[0],outSize:l},n),f=s,s=r.runWebGLProgram(c,[s],e),f.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(f)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vwe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[n[i]];this.outputShape=r,this.rank=r.length;const a=Fn(this.rank),s=jwe(n);this.userCode=`
    void main() {
      ${a} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function jwe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let a=0;a<t.length;a++)r[t[a]]=n[a];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hwe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=Fn(this.rank),s=vU("rc",this.rank),i=new Array(this.rank);for(let c=0;c<n.length;c++)i[n[c]]=s[c];const o=`vec2(${i.slice(-2).join()})`,u=`++${s[this.rank-1]} < ${r[this.rank-1]}`,l=`getChannel(getA(${i.join()}), ${o})`;this.userCode=`
    void main() {
      ${a} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${l};
      if(${u}) {
        result[1] = ${l};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${l};
        if(${u}) {
          result[3] = ${l};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $w(t,e,n){const r=$e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Hwe(t.shape,e):new Vwe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gwe(t,e,n,r){const a=e,s=t.shape.length,i=sn(a,t.shape);let o=i;const u=nr(o,s),l=u!=null;let c=t;l&&(c=$w(t,u,r),o=pr(o.length,s)),sa("sum",o,s);const[f,d]=qr(c.shape,o);let h=f;n&&(h=dr(f,i));const m=Fe(d),y=Fe(t.shape)/m,b=it({inputs:{x:c},attrs:{shape:[y,m]},backend:r}),x=OT(t.dtype),w=Zc(b,x,"sum",r),N=it({inputs:{x:w},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(w),l&&r.disposeIntermediateTensorInfo(c),N}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kw(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:i}=r;return Gwe(a,s,i,n)}const Kwe={kernelName:R1,backendName:"webgl",kernelFunc:kw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oa(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{perm:s}=r,i=n,o=a.shape.length,u=new Array(o);for(let c=0;c<u.length;c++)u[c]=a.shape[s[c]];let l;if(i.shouldExecuteOnCPU([a])){const f=i.texData.get(a.dataId).values,d=$A(f,a.shape,a.dtype,s,u);l=i.makeTensorInfo(u,a.dtype);const h=i.texData.get(l.dataId);h.values=d}else l=$w(a,s,i);return l}const Xwe={kernelName:sd,backendName:"webgl",kernelFunc:Oa};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CU=1e3;function nb({a:t,b:e,transposeA:n,transposeB:r,backend:a,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:u=null}){const l=t.shape.length,c=e.shape.length,f=n?t.shape[l-2]:t.shape[l-1],d=r?e.shape[c-1]:e.shape[c-2],h=n?t.shape[l-1]:t.shape[l-2],m=r?e.shape[c-2]:e.shape[c-1],v=t.shape.slice(0,-2),y=e.shape.slice(0,-2),b=Fe(v),x=Fe(y),N=Ht(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([h,m]);Y(f===d,()=>`Error in matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const C=n?[b,f,h]:[b,h,f],E=r?[x,m,d]:[x,d,m],$=it({inputs:{x:t},backend:a,attrs:{shape:C}}),I=it({inputs:{x:e},backend:a,attrs:{shape:E}}),D=[$,I],k=Math.max(b,x),A=n?$.shape[1]:$.shape[2],O=s!=null,B=i!=null,z=u==="leakyrelu",L=u!=null?Zh(u,!0):null,F=O||B||z||L!=null;let R;if((h===1||m===1)&&A>CU&&F===!1){let M=$,G=I;n&&(M=Oa({inputs:{x:$},backend:a,attrs:{perm:[0,2,1]}}),D.push(M)),r&&(G=Oa({inputs:{x:I},backend:a,attrs:{perm:[0,2,1]}}),D.push(G));const V=m!==1,H=m===1;let j=M;V&&(j=it({inputs:{x:M},backend:a,attrs:{shape:[k,A,1]}}),D.push(j));const ne=m===1?2:1;let ue=G;H&&(ue=it({inputs:{x:G},backend:a,attrs:{shape:[k,1,A]}}),D.push(ue));const te=IA({inputs:{a:j,b:ue},backend:a});R=kw({inputs:{x:te},backend:a,attrs:{axis:ne,keepDims:!0}}),D.push(te)}else{const M=vs(t.dtype,e.dtype),G=new NU(C,E,[k,h,m],n,r,O,L,B,z),V=[$,I];if(s!=null&&V.push(s),B&&V.push(i),z){const H=a.makeTensorInfo([],"float32",wl(o,"float32"));V.push(H),D.push(H)}R=a.runWebGLProgram(G,V,M)}const q=it({inputs:{x:R},backend:a,attrs:{shape:N}});D.push(R);for(const M of D)a.disposeIntermediateTensorInfo(M);return q}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ywe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:s,bias:i,preluActivationWeights:o}=e,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:f}=r;return nb({a,b:s,transposeA:u,transposeB:l,backend:n,bias:i,preluActivationWeights:o,leakyreluAlpha:f,activation:c})}const Qwe={kernelName:I0,backendName:"webgl",kernelFunc:Ywe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j3="return abs(x);";function Jwe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),i=mU(s.values);return n.makeTensorInfo(r.shape,r.dtype,i)}let a;return $e().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new Hu(r.shape,j3):a=new vo(r.shape,j3),n.runWebGLProgram(a,[r],r.dtype)}const Zwe={kernelName:zb,backendName:"webgl",kernelFunc:Jwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const exe=Ni+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,txe=bn({opSnippet:exe}),nxe={kernelName:dm,backendName:"webgl",kernelFunc:txe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rxe=Ni+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,axe=bn({opSnippet:rxe}),sxe={kernelName:pm,backendName:"webgl",kernelFunc:axe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H3="return a + b;",ixe=oa({opSnippet:H3,packedOpSnippet:H3,supportsComplex:!0,cpuKernelImpl:g1e}),oxe={kernelName:Yd,backendName:"webgl",kernelFunc:ixe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uxe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((s,i)=>`T${i}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const a=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${a};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lxe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((s,i)=>`T${i}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const a=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${a};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p0(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Ss({inputs:{x:r[0]},backend:n});if(r.length>$e().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const u=Math.floor(r.length/2),l=p0({inputs:r.slice(0,u),backend:n}),c=p0({inputs:r.slice(u),backend:n});return p0({inputs:[l,c],backend:n})}const a=r.map(u=>u.dtype).reduce((u,l)=>vs(u,l)),s=r.map(u=>u.shape),o=$e().getBool("WEBGL_PACK")?new lxe(r[0].shape,s):new uxe(r[0].shape,s);return n.runWebGLProgram(o,r,a)}const cxe={kernelName:Wb,backendName:"webgl",kernelFunc:p0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:i}=r,o=a.shape.length,u=sn(s,a.shape);let l=u;const c=nr(l,o);let f=a;c!=null&&(f=Oa({inputs:{x:a},backend:n,attrs:{perm:c}}),l=pr(l.length,o)),sa("all",l,o);const[d,h]=qr(f.shape,l),m=Fe(h),v=it({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),y=Zc(v,v.dtype,"all",n);let b;if(i){const x=dr(d,u);b=it({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=it({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(f),b}const dxe={kernelName:$E,backendName:"webgl",kernelFunc:fxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:i}=r,o=a.shape.length,u=sn(s,a.shape);let l=u;const c=nr(l,o);let f=a;c!=null&&(f=Oa({inputs:{x:a},backend:n,attrs:{perm:c}}),l=pr(l.length,o)),sa("any",l,o);const[d,h]=qr(f.shape,l),m=Fe(h),v=it({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),y=Zc(v,v.dtype,"any",n);let b;if(i){const x=dr(d,u);b=it({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=it({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(f),b}const hxe={kernelName:kE,backendName:"webgl",kernelFunc:pxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mxe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:a,batchSize:s,outSize:i}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,i];const o=n==="max"?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${a};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${a}; i++) {
          int inIdx = ${u};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gxe{constructor(e,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Y(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],i=Math.ceil(s/n);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),a||this.variableNames.push("bestIndicesA");const o=this.outputShape,u=o.length,l=Fn(u),c=Ia("coords",u);let f,d;if(i===1){d=u+1;const I=Fn(d);f=`
        ${I} sourceLocR = ${I}(${c.join()}, 0);
        ++${c[u-1]};
        ${I} sourceLocG = ${I}(${c.join()}, 0);
        ++${c[u-2]};
        ${I} sourceLocA = ${I}(${c.join()}, 0);
        --${c[u-1]};
        ${I} sourceLocB = ${I}(${c.join()}, 0);
        --${c[u-2]};`}else d=u,f=`
        ${l} sourceLocR = coords;
        ++${c[u-1]};
        ${l} sourceLocG = coords;
        ++${c[u-2]};
        ${l} sourceLocA = coords;
        --${c[u-1]};
        ${l} sourceLocB = coords;
        --${c[u-2]};`;const h=["x","y","z","w","u","v"].slice(0,d),m="."+h[d-1],v=h.map(I=>"int "+I),y=Ia("sourceLocR",d-1).concat("inIdx.r"),b=Ia("sourceLocG",d-1).concat("inIdx.g"),x=Ia("sourceLocB",d-1).concat("inIdx.b"),w=Ia("sourceLocA",d-1).concat("inIdx.a"),N=r==="max"?"greaterThan":"lessThan",C=a?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${w.join()})));`,E=`vec4(
            getAChannel(${y.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${w.join()}) : 0.)`,$=a?"":`
      float getBestIndicesAChannel(${v.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${v.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${$}
      void main() {
        ${l} coords = getOutputCoords();
        bool hasNextCol = ${c[u-1]} < ${o[u-1]-1};
        bool hasNextRow = ${c[u-2]} < ${o[u-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${E};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${C}
          vec4 candidate = ${E};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${N}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EU(t,e,n,r=null){let a=e.shape[0],s=e.shape[1];r!=null&&(a=r.shape[0],s=r.shape[1]);const i=dw(s),o={windowSize:i,inSize:s,batchSize:a,outSize:Math.ceil(s/i)},u=new mxe(o,n,r==null),l=[e];r!=null&&l.push(r);const c=t.runWebGLProgram(u,l,"int32");if(c.shape[1]===1)return c;const f=EU(t,e,n,c);return t.disposeIntermediateTensorInfo(c),f}function TU(t,e,n,r=null){const a=r!=null?r.shape:e.shape,s=a[a.length-1],i=dw(s),o=new gxe(a,i,n,r==null),u=r==null?[e]:[e,r],l=t.runWebGLProgram(o,u,"int32");if(l.shape.length===e.shape.length){const c=TU(t,e,n,l);return t.disposeIntermediateTensorInfo(l),c}return l}function DU(t,e,n,r){const a=[n];if(sa("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,e.shape.length),!$e().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],i=t.texData.get(e.dataId),o=i!==null&&i.isPacked;let u=e;o&&(u=t.unpackTensor(e),s.push(u));const[l,c]=qr(u.shape,a),f=Fe(c),d=it({inputs:{x:u},backend:t,attrs:{shape:[-1,f]}});s.push(d);const h=EU(t,d,r);s.push(h);const m=it({inputs:{x:h},backend:t,attrs:{shape:l}});return s.forEach(v=>t.disposeIntermediateTensorInfo(v)),m}return TU(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s}=r;let i=sn(s,a.shape);const o=nr(i,a.shape.length);let u=a;const l=[];o!=null&&(u=Oa({inputs:{x:a},backend:n,attrs:{perm:o}}),l.push(u),i=pr(i.length,u.shape.length)),sa("argMax",[i[0]],u.shape.length);const c=DU(n,u,i[0],"max");return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const yxe={kernelName:Ub,backendName:"webgl",kernelFunc:vxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s}=r;let i=sn(s,a.shape);const o=nr(i,a.shape.length);let u=a;const l=[];o!=null&&(u=Oa({inputs:{x:a},backend:n,attrs:{perm:o}}),l.push(u),i=pr(i.length,u.shape.length)),sa("argMin",[i[0]],u.shape.length);const c=DU(n,u,i[0],"min");return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const wxe={kernelName:qb,backendName:"webgl",kernelFunc:bxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xxe=Ni+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Sxe=bn({opSnippet:xxe}),Nxe={kernelName:hm,backendName:"webgl",kernelFunc:Sxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cxe=Ni+"return log(x + sqrt(x * x + 1.0));",Exe=bn({opSnippet:Cxe}),Txe={kernelName:mm,backendName:"webgl",kernelFunc:Exe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dxe=Ni+`
  return atan(x);
`,Axe=bn({opSnippet:Dxe}),$xe={kernelName:gm,backendName:"webgl",kernelFunc:Axe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kxe=kA+`
  return atan(a, b);
`,Ixe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Jc+`
  return result;
`,_xe=oa({opSnippet:kxe,packedOpSnippet:Ixe}),Oxe={kernelName:ym,backendName:"webgl",kernelFunc:_xe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fxe=Ni+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Rxe=bn({opSnippet:Fxe}),Mxe={kernelName:vm,backendName:"webgl",kernelFunc:Rxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class em{constructor(e,n,r,a=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,o=e.strideHeight,u=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;const v=n==="avg",y=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,b=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let x="0.0";if(v||(x="-1.0 / 1e-20"),r){const I=">=";this.userCode=`
        const ivec2 strides = ivec2(${o}, ${u});
        const ivec2 pads = ivec2(${h}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${l}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${I} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${a?s?y:b:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let N=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(N="avgValue / max(count, 1.0)");const C=Math.floor(i/4)*4,E=i%4,$=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${u});
      const ivec2 pads = ivec2(${h}, ${m});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${l}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${C}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${$}
          }

          int xC = xCCorner + ${C};
          if (${E===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${$}
          } else if (${E===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${$}
          } else if (${E===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${$}
          }
        }
        setOutput(${N});
      }
    `}}class _A{constructor(e,n,r,a=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,o=e.strideDepth,u=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,f=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterDepth,m=e.effectiveFilterHeight,v=e.effectiveFilterWidth,y=e.padInfo.front,b=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const w=n==="avg";let N="0.0";if(w||(N="-1.0 / 1e-20"),r){const k=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${u}, ${l});
        const ivec3 pads = ivec3(${y}, ${b}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${v};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${k} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${a?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${m} * ${v} +
                      wR * ${v} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const C="max";let E=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(E="avgValue / max(count, 1.0)");const $=Math.floor(i/4)*4,I=i%4,D=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${u}, ${l});
      const ivec3 pads = ivec3(${y}, ${b}, ${x});
      const float initializationValue = ${N};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${N});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${$}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${D}
            }

            int xC = xCCorner + ${$};
            if (${I===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${D}
            } else if (${I===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${D}
            } else if (${I===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${D}
            }
          }
        }
        setOutput(${E});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;$g(a,"avgPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:u}=r,l=1;Y(aa(i,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const c=xi(a.shape,s,i,l,o,u);if(c.filterWidth===1&&c.filterHeight===1&&fn(c.inShape,c.outShape))return Ss({inputs:{x:a},backend:n});const f=new em(c,"avg",!1);return n.runWebGLProgram(f,[a],"float32")}const Bxe={kernelName:Vb,backendName:"webgl",kernelFunc:Pxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:s,strides:i,pad:o,dimRoundingMode:u,dataFormat:l}=r,c=[1,1,1],f=du(a.shape,s,i,c,o,u,l),d=new _A(f,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}const zxe={kernelName:jb,backendName:"webgl",kernelFunc:Lxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wxe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,s=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=u-1-e.padInfo.top,f=l-1-e.padInfo.left,d=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${f});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${l};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class Uxe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,m=f-1-e.padInfo.front,v=d-1-e.padInfo.top,y=h-1-e.padInfo.left,b=1/(n*r*a);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${v}, ${y});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${u}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${l}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qxe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s}=e,i=s,{filterSize:o,strides:u,pad:l,dimRoundingMode:c}=r,f=[1,1,1],d=du(i.shape,o,u,f,l,c),h=new Uxe(d);return n.runWebGLProgram(h,[a],i.dtype)}const Vxe={kernelName:_E,backendName:"webgl",kernelFunc:qxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jxe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s}=e,i=s;$g([a,s],"avgPoolGrad");const{filterSize:o,strides:u,pad:l}=r,c=xi(i.shape,o,u,1,l),f=new Wxe(c);return n.runWebGLProgram(f,[a],i.dtype)}const Hxe={kernelName:IE,backendName:"webgl",kernelFunc:jxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gxe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:s}=e,{transposeA:i,transposeB:o}=r;return nb({a,b:s,transposeA:i,transposeB:o,backend:n})}const Kxe={kernelName:Hb,backendName:"webgl",kernelFunc:Gxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xxe{constructor(e,n,r,a,s,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Ht(e,n),Ht(e,r);let o="0.0";a!=null&&(Ht(e,a),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let u="1.0";s!=null&&(Ht(e,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${u};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yxe{constructor(e,n,r,a,s,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ht(e,n),Ht(e,r);let o="vec4(0.0)";a!=null&&(Ht(e,a),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let u="vec4(1.0)";s!=null&&(Ht(e,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${u};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qxe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:a,variance:s,offset:i,scale:o}=t;Y(a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;u==null&&(u=.001);const l=[r,a,s];let c=null;i!=null&&(c=i.shape,l.push(i));let f=null;o!=null&&(f=o.shape,l.push(o));const d=$e().getBool("WEBGL_PACK_NORMALIZATION")?new Yxe(r.shape,a.shape,s.shape,c,f,u):new Xxe(r.shape,a.shape,s.shape,c,f,u);return e.runWebGLProgram(d,l,l[0].dtype)},Jxe={kernelName:s1,backendName:"webgl",kernelFunc:Qxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zxe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Fn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=e2e(this.rank);let a;const s=e.map((i,o)=>`sourceLoc.${PC[o]} = start[${o}] + coords.${PC[o]};`);a=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${a}
        setOutput(getSource(${r}));
      }
    `}}const PC=["x","y","z","w","u","v"];function e2e(t){if(t===1)return"sourceLoc";if(t<=6)return PC.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t2e{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Fn(this.rank),r=Ia("coords",this.rank),a=Ia("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${a.slice(-2).join()})`,i=`getChannel(getSource(${a.join()}), ${s})`,o=`
      result.x = ${i};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${a[this.rank-1]};
        result.y = ${i};
        --${a[this.rank-1]};
      }
    `,u=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${a[this.rank-2]};
        result.z = ${i};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${a[this.rank-1]};
          result.w = ${i};
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,f)=>`start[${f}]`).join()});`:e.map((c,f)=>`${a[f]} = ${r[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${l}
        vec4 result = vec4(0.);
        ${o}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n2e(t,e,n,r){const a=r.texData.get(t.dataId),s=r.makeTensorInfo(n,t.dtype),i=r.texData.get(s.dataId);Object.assign(i,a),i.refCount=1,i.shape=n,i.dtype=t.dtype;let o=TD(e,St(t.shape));a.slice&&(o+=a.slice.flatOffset),i.slice={flatOffset:o,origDataId:a.slice&&a.slice.origDataId||t.dataId};const u=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,u+1),s}function cp(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:s,size:i}=r,[o,u]=fw(a,s,i);if(ND(a,o,u),Fe(u)===0)return n.makeTensorInfo(u,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||a.dtype==="string"){const f=n.texData.get(a.dataId),d=K1e(f.values,o,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,d)}const{isPacked:l}=n.texData.get(a.dataId),c=ED(a.shape,o,u);if(l||!c){const f=$e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new t2e(u):new Zxe(u),d=[o];return n.runWebGLProgram(f,[a],a.dtype,d)}return n.uploadToGPU(a.dataId),n2e(a,o,u,n)}const r2e={kernelName:F1,backendName:"webgl",kernelFunc:cp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a2e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:s,crops:i}=r;Y(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((x,w)=>x*w),u=gg(a.shape,s,o),l=vg(u.length,s.length),c=yg(a.shape,s,o),f=ID(i,s.length),d=_D(c,i,s.length),h=[],m=it({inputs:{x:a},backend:n,attrs:{shape:u}}),v=Oa({inputs:{x:m},backend:n,attrs:{perm:l}}),y=it({inputs:{x:v},backend:n,attrs:{shape:c}}),b=cp({inputs:{x:y},backend:n,attrs:{begin:f,size:d}});return h.push(m),h.push(v),h.push(y),h.forEach(x=>n.disposeIntermediateTensorInfo(x)),b},s2e={kernelName:Gb,backendName:"webgl",kernelFunc:a2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:s}=e,{size:i}=r,o=n.readSync(a.dataId),u=n.readSync(s.dataId),l=hU(o,u,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,l)}const o2e={kernelName:OE,backendName:"webgl",kernelFunc:i2e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u2e=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,l2e=`
  return float(int(a.r) & int(b.r));
`;function c2e(t){const{inputs:e,backend:n}=t,{a:r,b:a}=e,s=$e().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=$e().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,a])||i===1){const u=n.texData.get(r.dataId).values,l=n.texData.get(a.dataId).values,[c,f]=y1e(r.shape,a.shape,u,l,r.dtype),d=n.makeTensorInfo(f,r.dtype),h=n.texData.get(d.dataId);return h.values=c,d}let o;return s?o=new up(u2e,r.shape,a.shape,!1):o=new Bc(l2e,r.shape,a.shape),n.runWebGLProgram(o,[r,a],r.dtype)}const f2e={kernelName:Kb,backendName:"webgl",kernelFunc:c2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d2e(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,s=n.readSync(r.dataId),i=n.readSync(a.dataId),o=Ht(Array.from(s),Array.from(i));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const p2e={kernelName:FE,backendName:"webgl",kernelFunc:d2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h2e="return float(a != b);",AU=oa({opSnippet:h2e,cpuKernelImpl:L1e,dtype:"bool"}),m2e={kernelName:S1,backendName:"webgl",kernelFunc:AU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ig(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return Ss({inputs:{x:a.complexTensorInfos.real},backend:n})}const g2e={kernelName:pT,backendName:"webgl",kernelFunc:Ig};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v2e="return float(int(x));";function y2e(t,e){const n=new vo(t.shape,v2e),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BC(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:s}=r;if(s==="complex64"){if(a.dtype==="complex64")return Ss({inputs:{x:a},backend:n});const i=Tr(a.shape),o=BC({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=kl({inputs:{real:o,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(o),u}if(a.dtype==="complex64"){const i=Ig({inputs:{input:a},backend:n}),o=BC({inputs:{x:i},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(i),o}if(!VB(a.dtype,s)){const i=Ss({inputs:{x:a},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:s}}if(n.shouldExecuteOnCPU([a])){const i=n.texData.get(a.dataId).values,[o,u,l]=b1e(i,a.shape,a.dtype,s);return n.makeTensorInfo(o,u,l)}if(s==="int32")return y2e(a,n);if(s==="bool"){const i=n.makeTensorInfo([],"bool",ta("bool",1)),u=AU({inputs:{a,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),u}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${s}`)}const b2e={kernelName:bm,backendName:"webgl",kernelFunc:BC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G3="return ceil(x);",w2e=bn({opSnippet:G3,packedOpSnippet:G3,cpuKernelImpl:w1e}),x2e={kernelName:wm,backendName:"webgl",kernelFunc:w2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S2e{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N2e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{clipValueMin:s,clipValueMax:i}=r;let o;$e().getBool("WEBGL_PACK_CLIP")?o=new N2e(a.shape):o=new S2e(a.shape);const u=[[s],[i]];return n.runWebGLProgram(o,[a],a.dtype,u)}const E2e={kernelName:xm,backendName:"webgl",kernelFunc:C2e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T2e{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K3(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function D2e(t){const{inputs:e,backend:n}=t,{x:r}=e,a=n.texData.get(r.dataId),s=new T2e(r.shape),i=[K3(r,a.complexTensorInfos.real),K3(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(s,i,i[0].dtype)}const A2e={kernelName:Xb,backendName:"webgl",kernelFunc:D2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $2e{constructor(e){this.outputShape=[],this.outputShape=wo(e,1),this.variableNames=e.map((i,o)=>`T${o}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+e[i][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const o=n[i-1];r.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${o}));`)}const a=n.length,s=n[n.length-1];r.push(`else setOutput(getT${a}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k2e{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=wo(e,n);const r=this.outputShape,a=r.length,s=Fn(a),i=Ia("coords",a),o=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map((v,y)=>`T${y}`);const u=new Array(e.length-1);u[0]=e[0][n];for(let v=1;v<u.length;v++)u[v]=u[v-1]+e[v][n];const l=o[n],c=o.slice(-2),f=o.join();let d=`if (${l} < ${u[0]}) {
        return getChannel(
            getT0(${f}), vec2(${c.join()}));
        }`;for(let v=1;v<u.length;v++){const y=u[v-1];d+=`
        if (${l} < ${u[v]}  && ${l} >= ${u[v-1]}) {
          return getChannel(
            getT${v}(${Oy(o,l,y)}),
            vec2(${Oy(c,l,y)}));
        }`}const h=u.length,m=u[u.length-1];d+=`
        return getChannel(
          getT${h}(${Oy(o,l,m)}),
          vec2(${Oy(c,l,m)}));`,this.userCode=`
      float getValue(${o.map(v=>"int "+v)}) {
        ${d}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[a-1]} = ${i[a-1]} + 1;
        if (${i[a-1]} < ${r[a-1]}) {
          result.g = getValue(${i});
        }

        ${i[a-2]} = ${i[a-2]} + 1;
        if (${i[a-2]} < ${r[a-2]}) {
          result.a = getValue(${i});
        }

        ${i[a-1]} = ${i[a-1]} - 1;
        if (${i[a-2]} < ${r[a-2]} &&
            ${i[a-1]} < ${r[a-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function Oy(t,e,n){const r=t.indexOf(e);return t.map((s,i)=>i===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iw(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return Ss({inputs:{x:a.complexTensorInfos.imag},backend:n})}const I2e={kernelName:ZE,backendName:"webgl",kernelFunc:Iw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nh(t,e,n){const r=t[0].dtype;if(r==="complex64"){const h=t.map(x=>Ig({inputs:{input:x},backend:n})),m=t.map(x=>Iw({inputs:{input:x},backend:n})),v=Nh(h,e,n),y=Nh(m,e,n),b=kl({inputs:{real:v,imag:y},backend:n});return h.forEach(x=>n.disposeIntermediateTensorInfo(x)),m.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),b}let a=n.shouldExecuteOnCPU(t);if(r==="string"&&(a=!0),a){const h=t.map(N=>{const E=[-1,Fe(N.shape.slice(e))];return it({inputs:{x:N},backend:n,attrs:{shape:E}})}),m=h.map(N=>({vals:n.readSync(N.dataId),shape:N.shape})),v=wo(h.map(N=>N.shape),1),y=h[0].shape[0]===1,b=x1e(m,v,r,y),x=wo(t.map(N=>N.shape),e),w=n.makeTensorInfo(x,r,b);return h.forEach(N=>n.disposeIntermediateTensorInfo(N)),w}const s=t.filter(h=>Fe(h.shape)>0),i=$e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const h=i?new vo(t[0].shape,Lu):new Hu(t[0].shape,Lu);return n.runWebGLProgram(h,t,r)}const o=$e().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>o){const h=[];for(let v=0;v<s.length;v+=o){const y=s.slice(v,v+o);h.push(Nh(y,e,n))}const m=Nh(h,e,n);for(const v of h)n.disposeIntermediateTensorInfo(v);return m}if(i){const h=new k2e(s.map(m=>m.shape),e);return n.runWebGLProgram(h,s,r)}const{tensors2D:u,outShape:l}=_2e(s,e,n),c=new $2e(u.map(h=>h.shape)),f=n.runWebGLProgram(c,u,r);u.forEach(h=>n.disposeIntermediateTensorInfo(h));const d=it({inputs:{x:f},attrs:{shape:l},backend:n});return n.disposeIntermediateTensorInfo(f),d}function _2e(t,e,n){const r=wo(t.map(s=>s.shape),e);return{tensors2D:t.map(s=>it({inputs:{x:s},attrs:{shape:[-1,Fe(s.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $U(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,s=sn(a,e[0].shape)[0],i=e.map(l=>l.shape);AD(i,s);const o=wo(e.map(l=>l.shape),s);if(Fe(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const u=e.filter(l=>Fe(l.shape)>0);return u.length===1?Ss({inputs:{x:u[0]},backend:n}):Nh(u,s,n)}const O2e={kernelName:Yb,backendName:"webgl",kernelFunc:$U};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kU{constructor(e,n=!1,r=null,a=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,o=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,m=Math.floor(e.inChannels/4)*4,v=e.inChannels%4,y=e.dataFormat==="channelsLast",b=y?1:2,x=y?2:3,w=y?3:1;let N="",C="";r&&(a?N=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?N=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:N=`
          float activation(float x) {
            ${r}
          }
        `,C="result = activation(result);");const E=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${N}

      const ivec2 strides = ivec2(${u}, ${l});
      const ivec2 pads = ivec2(${i}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${w}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${y}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${v===1}) {

              if (${y}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${v===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${y}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${v===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${y}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${E}
        ${C}
        setOutput(result);
      }
    `}}class F2e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,a=e.padInfo.left,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,f=e.filterDepth,d=e.filterHeight,h=e.filterWidth,m=Math.floor(e.inChannels/4)*4,v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${i}, ${o});
      const ivec3 pads = ivec3(${n}, ${r}, ${a});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${u};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${l};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${v===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${v===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${v===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IU{constructor(e,n=!1,r=null,a=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ya(this.outputShape.length);const i=e.padInfo.left,o=e.strideWidth,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,f=c;let d=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<c;y++)d+=`
           vec4 xTexelC${y*2};
           int xTexelC${y*2}Ready;
           vec4 xTexelC${y*2+1};
           int xTexelC${y*2+1}Ready;
           vec4 xC${y};`;d+=`
     for (int r = 0; r < ${l}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let y=0;y<c;y++)d+=`
           xTexelC${y*2} = vec4(0.0);
           xTexelC${y*2}Ready = 0;
           xTexelC${y*2+1} = vec4(0.0);
           xTexelC${y*2+1}Ready = 0;
           xC${y} = vec4(0.0);`;d+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let y=0;y<(f+1)/2;y++){const b=y*2;if(d+=`
           xC = xCCorner + ${b*u};
           `,o===1){if(b<c&&(i%2===1?(d+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,u===1&&b>0?d+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:d+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):d+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<c)){const x=i%2===0?TE(u):u;u%2===0&&i%2===1||u%2!==0&&i%2!==1?(d+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,u>1?d+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:d+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):x===1?d+=`
                     xC${b+1} = xTexelC${b};
                     `:d+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<c&&(i%2===1?(d+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<c&&(d+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(d+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<c&&(d+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<c&&(d+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<c&&(d+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}d+=`
     }
   `,d+=`
     }
   `,d+=`
     }
   `;let h="",m="";r&&(a?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,m="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${d}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${v}
         ${m}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R2e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length);const{dataFormat:r}=n,a=Pa(),s=r==="channelsLast",i=s?1:2,o=s?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let l="";for(let c=0;c<=1;c++)for(let f=0;f<=1;f++)l+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${c};

          ${u}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${l}

        ${a.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rb(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function _U({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:o=null}){const u=t.shape,l=r.texData.get(t.dataId),c=n.inChannels,f=u[0]*u[1]*u[2],d=n.outChannels,h=n.dataFormat==="channelsLast",m=!1,v=!1;let y;const b=[];if(s!=null){const N=rb(s.shape,h);N!=null&&(s=it({inputs:{x:s},backend:r,attrs:{shape:N}}),b.push(s))}if(a!=null){const N=rb(a.shape,h);N!=null&&(a=it({inputs:{x:a},backend:r,attrs:{shape:N}}),b.push(a))}if(!((f===1||d===1)&&c>CU)&&l.isPacked&&h&&l.texture!=null&&u[2]%2!==0&&fn(l.shape.slice(-3),u.slice(-3))){const N=u[0]*u[1]*(u[2]+1),C={dataId:t.dataId,shape:[1,N,n.inChannels],dtype:t.dtype},E=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,Y(tb(l.shape,C.shape),()=>`packed reshape ${l.shape} to ${C.shape} isn't free`);const $=it({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push($);const I=nb({a:C,b:$,backend:r,transposeA:m,transposeB:v,bias:a,activation:o,preluActivationWeights:s,leakyreluAlpha:i}),D=r.texData.get(I.dataId);Y(D.isPacked,()=>"batchMatMul result is expected to be packed"),l.shape=E,D.shape=n.outShape,y=Ss({inputs:{x:I},backend:r}),y.shape=n.outShape,b.push(I)}else{const N=n.outHeight*n.outWidth,C=it({inputs:{x:t},backend:r,attrs:{shape:h?[n.batchSize,N,n.inChannels]:[n.batchSize,n.inChannels,N]}}),E=it({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),$=nb({a:h?C:E,b:h?E:C,transposeA:!h,transposeB:v,backend:r,bias:a,activation:o,preluActivationWeights:s,leakyreluAlpha:i});y=it({inputs:{x:$},backend:r,attrs:{shape:n.outShape}}),b.push(C),b.push(E),b.push($)}for(const N of b)r.disposeIntermediateTensorInfo(N);return y}function OU({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:o=null}){const{filterWidth:u,filterHeight:l,inChannels:c,outWidth:f,outHeight:d,dataFormat:h}=n,m=h==="channelsLast",v=u*l*c,y=d*f,b=[n.batchSize,v,y],x=!0,w=!1,N=[];if(s!=null){const q=rb(s.shape,m);q!=null&&(s=it({inputs:{x:s},backend:r,attrs:{shape:q}}),N.push(s))}if(a!=null){const q=rb(a.shape,m);q!=null&&(a=it({inputs:{x:a},backend:r,attrs:{shape:q}}),N.push(a))}const C=it({inputs:{x:e},backend:r,attrs:{shape:[1,v,Fe(e.shape)/v]}});N.push(C);const E=new R2e(b,n),$=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],I=r.runWebGLProgram(E,[t],"float32",$),D=it({inputs:{x:I},backend:r,attrs:{shape:b}});N.push(I),N.push(D);const k=a!=null,A=s!=null,O=o==="leakyrelu",B=o?Zh(o,!0):null,z=new NU(m?D.shape:C.shape,m?C.shape:D.shape,m?[n.batchSize,y,n.outChannels]:[n.batchSize,n.outChannels,y],x,w,k,B,A,O),L=m?[D,C]:[C,D];if(a&&L.push(a),A&&L.push(s),O){const q=r.makeTensorInfo([],"float32",wl(i,"float32"));L.push(q),N.push(q)}const F=r.runWebGLProgram(z,L,"float32"),R=it({inputs:{x:F},backend:r,attrs:{shape:n.outShape}});N.push(F);for(const q of N)r.disposeIntermediateTensorInfo(q);return R}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s}=e,{strides:i,pad:o,dataFormat:u,dilations:l,dimRoundingMode:c}=r,f=pu(u),d=Ur(a.shape,s.shape,i,l,o,c,!1,f);let h;if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))h=_U({x:a,filter:s,convInfo:d,backend:n});else if(d.strideWidth<=2&&f==="channelsLast"&&$e().getBool("WEBGL_EXP_CONV")){const v=new IU(d),y=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];h=n.runWebGLProgram(v,[a,s],"float32",y)}else if($e().getBool("WEBGL_CONV_IM2COL"))h=OU({x:a,filter:s,convInfo:d,backend:n});else{const v=new kU(d);h=n.runWebGLProgram(v,[a,s],"float32")}const m=it({inputs:{x:h},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(h),m}const P2e={kernelName:Qb,backendName:"webgl",kernelFunc:M2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B2e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,s=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class L2e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,s=e.strideWidth,i=e.dataFormat==="channelsLast",o=n-1-e.padInfo.top,u=r-1-e.padInfo.left,l=i?1:2,c=i?2:3,f=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${l}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class z2e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,s=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${a} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class W2e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,u=n-1-e.padInfo.front,l=r-1-e.padInfo.top,c=a-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${l}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${a}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${a} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:s}=e,{strides:i,pad:o,dataFormat:u,dimRoundingMode:l,filterShape:c}=r,f=pu(u),d=Ur(a.shape,c,i,1,o,l,!1,f),h=new B2e(d);return n.runWebGLProgram(h,[a,s],"float32")}const q2e={kernelName:ME,backendName:"webgl",kernelFunc:U2e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V2e{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=ya(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,a=n-1-e.padInfo.top,s=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j2e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:s}=e,{inputShape:i,strides:o,pad:u,dataFormat:l,dimRoundingMode:c}=r,f=pu(l),d=Ur(i,s.shape,o,1,u,c,!1,f);if($e().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&f==="channelsLast"){const h=[[d.strideHeight,d.strideWidth]],m=new V2e(d);return n.runWebGLProgram(m,[a,s],"float32",h)}else{const h=new L2e(d);return n.runWebGLProgram(h,[a,s],"float32")}}const H2e={kernelName:Jb,backendName:"webgl",kernelFunc:j2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s}=e,{strides:i,pad:o,dilations:u}=r,l=Nl(a.shape,s.shape,i,u,o),c=new F2e(l);return n.runWebGLProgram(c,[a,s],"float32")}const K2e={kernelName:Zb,backendName:"webgl",kernelFunc:G2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:s}=e,{strides:i,pad:o,filterShape:u}=r,l=Nl(a.shape,u,i,1,o),c=new z2e(l);return n.runWebGLProgram(c,[a,s],"float32")}const Y2e={kernelName:PE,backendName:"webgl",kernelFunc:X2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:s}=e,{pad:i,strides:o,inputShape:u}=r,l=Nl(u,s.shape,o,1,i),c=new W2e(l);return n.runWebGLProgram(c,[a,s],"float32")}const J2e={kernelName:BE,backendName:"webgl",kernelFunc:Q2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z2e=lp+`
  return cos(x);
`,eSe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Jc}
  return result;
`,tSe=bn({opSnippet:Z2e,packedOpSnippet:eSe}),nSe={kernelName:Sm,backendName:"webgl",kernelFunc:tSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rSe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,aSe=bn({opSnippet:rSe}),sSe={kernelName:Nm,backendName:"webgl",kernelFunc:aSe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iSe{constructor(e,n,r,a,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,o,u,l]=e,[c]=n,[f,d]=r;this.outputShape=[c,f,d,l];const h=a==="bilinear"?1:0,[m,v]=[`${o-1}.0`,`${u-1}.0`],[y,b,x]=f>1?[`${(o-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[w,N,C]=d>1?[`${(u-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${v} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${v}`];this.userCode=`
      const float height_ratio = float(${y});
      const float width_ratio = float(${w});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${N};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${C};
        if( in_x < 0.0 || in_x > ${v} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oSe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:s,boxInd:i}=e,{cropSize:o,method:u,extrapolationValue:l}=r,c=new iSe(a.shape,s.shape,o,u,l);return n.runWebGLProgram(c,[a,s,i],"float32")},uSe={kernelName:zE,backendName:"webgl",kernelFunc:oSe};var tm;(function(t){t.Prod="*",t.Sum="+"})(tm||(tm={}));class X3{constructor(e,n,r,a){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,i=this.op===tm.Prod?"1.0":"0.0",o=r?i:`getX(${Y3(s,"coords",this.op)})`,u=this.outputShape[this.outputShape.length-1];let l="",c="";r?(l=a?`end != ${u-1}`:"end != 0",c=a?"end + 1":"end - 1"):(l=a?`end + pow2 < ${u}`:"end >= pow2",c=a?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Fn(s)} coords = getOutputCoords();
        int end = ${Q3(s,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${l}) {
          int idx = ${c};
          ${Q3(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${Y3(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function Y3(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function Q3(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FU(t,e,n,r,a,s){const i=e.shape.length,o=nr([r],i);let u=e;o!=null&&(u=Oa({inputs:{x:e},backend:n,attrs:{perm:o}}));const l=pr(1,i)[0];if(l!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=u.shape[l];let f=Ss({inputs:{x:u},backend:n});for(let d=0;d<=Math.ceil(Math.log2(c))-1;d++){const h=new X3(t,u.shape,!1,s),m=[[d]],v=f;f=n.runWebGLProgram(h,[f],f.dtype,m),n.disposeIntermediateTensorInfo(v)}if(a){const d=new X3(t,u.shape,a,s),h=f;f=n.runWebGLProgram(d,[f],f.dtype),n.disposeIntermediateTensorInfo(h)}if(o!=null){const d=Cl(o),h=Oa({inputs:{x:f},backend:n,attrs:{perm:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(u),h}return f}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,exclusive:i,reverse:o}=r;return FU(tm.Prod,a,n,s,i,o)}const cSe={kernelName:LE,backendName:"webgl",kernelFunc:lSe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,exclusive:i,reverse:o}=r;return FU(tm.Sum,a,n,s,i,o)}const dSe={kernelName:e1,backendName:"webgl",kernelFunc:fSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:s}=e,{size:i,binaryOutput:o}=r;if(a.shape.length===1){const u=n.readSync(a.dataId),l=n.readSync(s.dataId),c=hU(u,l,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,c)}else if(a.shape.length===2){const u=n.bufferSync(a),l=n.bufferSync(s),c=v1e(u,l,i,o);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const hSe={kernelName:WE,backendName:"webgl",kernelFunc:pSe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mSe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:s,dataFormat:i}=r,o=a.shape[0],u=i==="NHWC"?a.shape[1]:a.shape[2],l=i==="NHWC"?a.shape[2]:a.shape[3],c=i==="NHWC"?a.shape[3]:a.shape[1],f=u*s,d=l*s,h=c/(s*s),m=i==="NHWC"?[o,f,d,h]:[o,h,f,d],v=new mSe(m,s,i);return n.runWebGLProgram(v,[a],a.dtype)}const vSe={kernelName:UE,backendName:"webgl",kernelFunc:gSe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RU{constructor(e,n=!1,r=null,a=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ya(this.outputShape.length);const i=e.filterHeight,o=e.filterWidth,u=e.outChannels/e.inChannels;let l="",c="";r&&(a?l=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?l=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:l=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${l}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${u};
        int q = d2 - d1 * ${u};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MU{constructor(e,n=!1,r=null,a=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ya(this.outputShape.length);const i=e.outChannels/e.inChannels,o=e.padInfo.left,u=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,d=f;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<f;b++)h+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;h+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let b=0;b<f;b++)h+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(d+1)/2;b++){const x=b*2;if(h+=`
          xC = xCCorner + ${x*l};
          `,u===1){if(x<f&&(o%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,l===1&&x>0?h+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<f)){const w=o%2===0?TE(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${w};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,l>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:h+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):w===1?h+=`
                    xC${x+1} = xTexelC${x};
                    `:h+=`
                    xCOffset = xC + ${w};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<f&&(o%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<f&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<f&&(h+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<f&&(h+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<f&&(h+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let m="",v="";r&&(a?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:m=`vec4 activation(vec4 x) {
          ${r}
        }`,v="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${y}
        ${v}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ySe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s}=e,{strides:i,pad:o,dilations:u,dimRoundingMode:l}=r;let c=u;c==null&&(c=[1,1]),Y(aa(i,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const f=Ur(a.shape,s.shape,i,c,o,l,!0);let d;$e().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?d=new MU(f):d=new RU(f);const h=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(d,[a,s],"float32",h)}const bSe={kernelName:t1,backendName:"webgl",kernelFunc:ySe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wSe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,s=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class xSe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,s=e.strideWidth,i=n-1-e.padInfo.top,o=r-1-e.padInfo.left,u=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${u}; dm++) {
              int d2 = d1 * ${u} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:s}=e,{strides:i,dilations:o,pad:u,dimRoundingMode:l,filterShape:c}=r,f=Ur(a.shape,c,i,o,u,l,!0),d=new wSe(f);return n.runWebGLProgram(d,[a,s],"float32")}const NSe={kernelName:qE,backendName:"webgl",kernelFunc:SSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CSe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:s}=e,{strides:i,dilations:o,pad:u,dimRoundingMode:l,inputShape:c}=r,f=Ur(c,s.shape,i,o,u,l,!0),d=new xSe(f);return n.runWebGLProgram(d,[a,s],"float32")}const ESe={kernelName:VE,backendName:"webgl",kernelFunc:CSe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TSe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DSe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=[...r.shape,...r.shape],s=Fe(r.shape),i=it({inputs:{x:r},backend:n,attrs:{shape:[s]}}),o=new TSe(s),u=n.runWebGLProgram(o,[i],i.dtype),l=it({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),l}const ASe={kernelName:jE,backendName:"webgl",kernelFunc:DSe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Se{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:a,strideHeight:s,strideWidth:i,filterHeight:o,filterWidth:u,dilationHeight:l,dilationWidth:c}=e,{top:f,left:d}=a;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${i});
      const ivec2 pads = ivec2(${f}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${l};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${u}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s}=e,{strides:i,pad:o,dilations:u}=r,l=ug(a.shape,s.shape,i,o,"NHWC",u);let c;const f=new $Se(l);c=n.runWebGLProgram(f,[a,s],"float32");const d=it({inputs:{x:c},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(c),d}const ISe={kernelName:n1,backendName:"webgl",kernelFunc:kSe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Se(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,s=e,{allDims:i,summedDims:o,idDims:u}=zD(a,s.length);UD(i.length,u,s);const{path:l,steps:c}=qD(o,u),f=c.length;let d=null,h=i.length;const m=[];for(let v=0;v<f;++v){for(const y of c[v]){const{permutationIndices:b,expandDims:x}=WD(h,u[y]);let w;VD(b)?w=s[y]:(w=Oa({inputs:{x:s[y]},backend:n,attrs:{perm:b}}),m.push(w));const N=w.shape.slice();for(let C=0;C<x.length;++C)N.splice(x[C],0,1);fn(w.shape,N)||(w=it({inputs:{x:w},backend:n,attrs:{shape:N}}),m.push(w)),d===null?d=w:(d=IA({inputs:{a:w,b:d},backend:n}),m.push(d))}v<f-1&&(l[v]>=0&&(d=kw({inputs:{x:d},backend:n,attrs:{axis:l[v]-(i.length-h),keepDims:!1}}),m.push(d)),h--)}for(const v of m)v!==d&&n.disposeIntermediateTensorInfo(v);return d}const OSe={kernelName:HE,backendName:"webgl",kernelFunc:_Se};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FSe="return (x >= 0.0) ? x : (exp(x) - 1.0);",RSe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,MSe=bn({opSnippet:FSe,packedOpSnippet:RSe}),PSe={kernelName:Em,backendName:"webgl",kernelFunc:MSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BSe="return (b >= 0.0) ? a : a * (b + 1.0);",LSe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,zSe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:a}=e,s=$e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new up(LSe,r.shape,a.shape):new Bc(BSe,r.shape,a.shape);return n.runWebGLProgram(s,[r,a],r.dtype)},WSe={kernelName:GE,backendName:"webgl",kernelFunc:zSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const USe=`
  return vec4(equal(a, b));
`,qSe="return float(a == b);",VSe=oa({opSnippet:qSe,packedOpSnippet:USe,dtype:"bool",cpuKernelImpl:S1e}),jSe={kernelName:r1,backendName:"webgl",kernelFunc:VSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HSe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${OD};
  float a1 = ${FD};
  float a2 = ${RD};
  float a3 = ${MD};
  float a4 = ${PD};
  float a5 = ${BD};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,GSe=bn({opSnippet:HSe}),KSe={kernelName:Tm,backendName:"webgl",kernelFunc:GSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XSe=lp+`
  return exp(x);
`,YSe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,PU=bn({opSnippet:XSe,packedOpSnippet:YSe,cpuKernelImpl:N1e,dtype:"float32"}),QSe={kernelName:Dm,backendName:"webgl",kernelFunc:PU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LC(t){const{inputs:e,attrs:n,backend:r}=t,{dim:a}=n,{input:s}=e,i=s.shape.length,o=s.shape.slice();let u=a;return a<0&&(Y(-(i+1)<=a,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),u=i+a+1),o.splice(u,0,1),it({inputs:{x:s},backend:r,attrs:{shape:o}})}const JSe={kernelName:a1,backendName:"webgl",kernelFunc:LC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J3="return exp(x) - 1.0;",ZSe=bn({opSnippet:J3,packedOpSnippet:J3,cpuKernelImpl:C1e}),eNe={kernelName:Am,backendName:"webgl",kernelFunc:ZSe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z3{constructor(e,n,r){this.variableNames=["real","imag"];const a=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=r?`${a}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${a});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${a}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BU(t,e,n){const r=n.texData.get(t.dataId),a=Fe(t.shape),s=t.shape[t.shape.length-1],i=a/s,o=it({inputs:{x:t},backend:n,attrs:{shape:[i,s]}}),u=o.shape,l=new Z3("real",u,e),c=new Z3("imag",u,e),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],d=n.runWebGLProgram(l,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),m=kl({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);const v=it({inputs:{x:m},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(m),v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tNe(t){const{inputs:e,backend:n}=t,{input:r}=e;return BU(r,!1,n)}const nNe={kernelName:KE,backendName:"webgl",kernelFunc:tNe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rNe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _g(t){const{backend:e,attrs:n}=t,{shape:r,value:a}=n;let{dtype:s}=n;if(s=s||Kd(a),s==="string"){const i=fr(s,Fe(r));return i.fill(a),e.makeTensorInfo(r,s,i)}else{const i=new rNe(r,a),o=[[a]];return e.runWebGLProgram(i,[],s,o)}}const aNe={kernelName:XE,backendName:"webgl",kernelFunc:_g};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sNe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iNe={kernelName:YE,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,a=new sNe(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eF="return floor(x);",oNe=bn({opSnippet:eF,packedOpSnippet:eF,cpuKernelImpl:E1e}),uNe={kernelName:$m,backendName:"webgl",kernelFunc:oNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lNe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,cNe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,fNe=oa({opSnippet:lNe,packedOpSnippet:cNe,dtype:"int32"}),dNe={kernelName:km,backendName:"webgl",kernelFunc:fNe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pNe{constructor(e){this.variableNames=["A"];const n=Pa(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hNe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Pa(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${a}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mNe={kernelName:tZ,backendName:"webgl",kernelFunc:gNe};let zf,RS=$e().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function gNe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:a}=e;const{numChannels:s}=r,i=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,[u,l]=i?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=[l,u],f=[l,u,s];if(o||i){const v=$e().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(zf==null||v!==RS)&&(RS=v,zf=document.createElement("canvas").getContext("2d",{willReadFrequently:RS})),zf.canvas.width=u,zf.canvas.height=l,zf.drawImage(a,0,0,u,l),a=zf.canvas}const d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=Fs.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),a);const h=$e().getBool("WEBGL_PACK")?new hNe(f):new pNe(f),m=n.runWebGLProgram(h,[d],"int32");return n.disposeData(d.dataId),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s,bias:i,preluActivationWeights:o}=e,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:m}=r,v=pu(c),y=Ur(a.shape,s.shape,u,f,l,d,!1,v);let b;const x=[],w=i!=null,N=o!=null,C=h==="leakyrelu",E=()=>{const I=[a,s],D=(k,A)=>{if(A==="NCHW"&&k.shape.length===1&&k.shape[0]!==1){const O=it({inputs:{x:k},backend:n,attrs:{shape:[k.shape[0],1,1]}});return x.push(O),O}return k};if(w&&I.push(D(i,c)),N&&I.push(D(o,c)),C){const k=n.makeTensorInfo([],"float32",wl(m,"float32"));I.push(k),x.push(k)}return I};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))b=_U({x:a,filter:s,convInfo:y,backend:n,bias:i,activation:h,preluActivationWeights:o,leakyreluAlpha:m});else if(y.strideWidth<=2&&v==="channelsLast"&&$e().getBool("WEBGL_EXP_CONV")){const I=h?Zh(h,!0):null,D=new IU(y,w,I,N,C),k=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],A=E();b=n.runWebGLProgram(D,A,"float32",k)}else if($e().getBool("WEBGL_CONV_IM2COL"))b=OU({x:a,filter:s,convInfo:y,backend:n,bias:i,activation:h,preluActivationWeights:o,leakyreluAlpha:m});else{const I=h?Zh(h,!1):null,D=new kU(y,w,I,N,C),k=E();b=n.runWebGLProgram(D,k,"float32")}const $=it({inputs:{x:b},backend:n,attrs:{shape:y.outShape}});return x.push(b),x.forEach(I=>n.disposeIntermediateTensorInfo(I)),$}const yNe={kernelName:_0,backendName:"webgl",kernelFunc:vNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:s,bias:i,preluActivationWeights:o}=e,{strides:u,pad:l,dilations:c,dimRoundingMode:f,activation:d,leakyreluAlpha:h}=r,m=[];let v=c;v==null&&(v=[1,1]),Y(aa(u,v),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${v}'`);const y=Ur(a.shape,s.shape,u,v,l,f,!0),b=$e().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,x=d?Zh(d,b):null,w=[a,s],N=i!=null,C=o!=null,E=d==="leakyrelu";if(N&&w.push(i),C&&w.push(o),E){const k=n.makeTensorInfo([],"float32",wl(h,"float32"));w.push(k),m.push(k)}let $;b?$=new MU(y,N,x,C,E):$=new RU(y,N,x,C,E);const I=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],D=n.runWebGLProgram($,w,"float32",I);return m.forEach(k=>n.disposeIntermediateTensorInfo(k)),D}const wNe={kernelName:O0,backendName:"webgl",kernelFunc:bNe};class xNe{constructor(e,n,r,a){this.sliceDim=e,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;const s=Fn(r.length);let i=`
    int index;`;for(let o=0;o<this.sliceDim;o++)i+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SNe(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,s=a.shape,i=s[s.length-1],o=Fe(r.shape),[u,l,c,f]=SD(r,a),d=it({inputs:{x:a},backend:n,attrs:{shape:[l,i]}}),h=it({inputs:{x:r},backend:n,attrs:{shape:[Fe(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,a])||r.dtype==="string"){const b=n.readSync(a.dataId),x=n.bufferSync(r),w=T1e(b,x,r.dtype,l,i,c,f,r.shape,o);return n.makeTensorInfo(u,r.dtype,w.values)}const m=new xNe(i,f,[l,c],r.shape),v=n.runWebGLProgram(m,[h,d],h.dtype),y=it({inputs:{x:v},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(v),y}const NNe={kernelName:QE,backendName:"webgl",kernelFunc:SNe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CNe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Fn(this.rank),a=ENe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${a}));
      }
    `}}function ENe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let a=0;a<t.length;a++)a===2?r.push("index"):r.push(`${n[a]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LU(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:s}=e,{axis:i,batchDims:o}=r,u=sn(i,a.shape)[0];if($e().get("DEBUG")){const x=n.readSync(s.dataId),w=a.shape[u];for(let N=0;N<x.length;++N){const C=x[N];Y(C<=w-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${w-1}]`)}}const l=HD(a,s,u,o),c=Fe(s.shape),f=[],d=it({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),h=it({inputs:{x:s},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}});f.push(d),f.push(h);const m=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([a,s])||a.dtype==="string"){const x=n.bufferSync(h),w=n.bufferSync(d),N=D1e(w,x,m);return f.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(l.outputShape,N.dtype,N.values)}const v=new CNe(d.shape,m),y=n.runWebGLProgram(v,[d,h],d.dtype);f.push(y);const b=it({inputs:{x:y},backend:n,attrs:{shape:l.outputShape}});return f.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const TNe={kernelName:i1,backendName:"webgl",kernelFunc:LU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DNe="return float(a > b);",ANe=`
  return vec4(greaterThan(a, b));
`,$Ne=oa({opSnippet:DNe,packedOpSnippet:ANe,cpuKernelImpl:A1e,dtype:"bool"}),kNe={kernelName:o1,backendName:"webgl",kernelFunc:$Ne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const INe="return float(a >= b);",_Ne=`
  return vec4(greaterThanEqual(a, b));
`,ONe=oa({opSnippet:INe,packedOpSnippet:_Ne,dtype:"bool",cpuKernelImpl:$1e}),FNe={kernelName:Im,backendName:"webgl",kernelFunc:ONe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RNe(t){const{inputs:e,backend:n}=t,{input:r}=e;return BU(r,!0,n)}const MNe={kernelName:JE,backendName:"webgl",kernelFunc:RNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PNe="return float(!isnan(x) && !isinf(x));",BNe=bn({opSnippet:PNe,dtype:"bool"}),LNe={kernelName:Om,backendName:"webgl",kernelFunc:BNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zNe="return float(isinf(x));",WNe=bn({opSnippet:zNe,dtype:"bool"}),UNe={kernelName:Fm,backendName:"webgl",kernelFunc:WNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qNe="return float(isnan(x));",VNe=bn({opSnippet:qNe,dtype:"bool"}),jNe={kernelName:Rm,backendName:"webgl",kernelFunc:VNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HNe="return float(a < b);",GNe=`
  return vec4(lessThan(a, b));
`,KNe=oa({opSnippet:HNe,packedOpSnippet:GNe,cpuKernelImpl:k1e,dtype:"bool"}),XNe={kernelName:l1,backendName:"webgl",kernelFunc:KNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YNe="return float(a <= b);",QNe=`
  return vec4(lessThanEqual(a, b));
`,JNe=oa({opSnippet:YNe,packedOpSnippet:QNe,cpuKernelImpl:I1e,dtype:"bool"}),ZNe={kernelName:c1,backendName:"webgl",kernelFunc:JNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eCe(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:s}=n,i=_1e(r,a,s);return e.makeTensorInfo([i.length],"float32",i)}const tCe={kernelName:eT,backendName:"webgl",kernelFunc:eCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nCe=lp+`
  return x < 0.0 ? 0./0. : log(x);
`,rCe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,aCe=bn({opSnippet:nCe,packedOpSnippet:rCe,cpuKernelImpl:O1e}),sCe={kernelName:Mm,backendName:"webgl",kernelFunc:aCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iCe=lp+`
  return log(1.0 + x);
`,oCe=bn({opSnippet:iCe}),uCe={kernelName:Pm,backendName:"webgl",kernelFunc:oCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lCe="return float(a >= 1.0 && b >= 1.0);",cCe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,fCe=oa({opSnippet:lCe,packedOpSnippet:cCe,dtype:"bool"}),dCe={kernelName:f1,backendName:"webgl",kernelFunc:fCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pCe="return float(!(x >= 1.0));",hCe=bn({opSnippet:pCe}),mCe={kernelName:d1,backendName:"webgl",kernelFunc:hCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gCe="return float(a >= 1.0 || b >= 1.0);",vCe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,yCe=oa({opSnippet:gCe,packedOpSnippet:vCe,dtype:"bool"}),bCe={kernelName:p1,backendName:"webgl",kernelFunc:yCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wCe{constructor(e,n,r,a,s){this.variableNames=["x"],this.outputShape=[];const i=n,o=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${a}) * sum`;s===.5?u=`inversesqrt(${l})`:s===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${u};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xCe{constructor(e,n,r,a,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,o=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${a}) * sum`;s===.5?u=`inversesqrt(${l})`:s===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${u};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SCe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:s,bias:i,alpha:o,beta:u}=r,l=$e().getBool("WEBGL_PACK_NORMALIZATION")?new xCe(a.shape,s,i,o,u):new wCe(a.shape,s,i,o,u);return n.runWebGLProgram(l,[a],a.dtype)},NCe={kernelName:h1,backendName:"webgl",kernelFunc:SCe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CCe{constructor(e,n,r,a,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${a}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${a})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ECe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a,y:s,dy:i}=e,{depthRadius:o,bias:u,alpha:l,beta:c}=r,f=new CCe(a.shape,o,u,l,c);return n.runWebGLProgram(f,[a,s,i],a.dtype)},TCe={kernelName:tT,backendName:"webgl",kernelFunc:ECe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DCe(t,e,n,r){const a=Fe(e),i=Fe(t.shape)/a,o=it({inputs:{x:t},attrs:{shape:[i,a]},backend:r}),u=Zc(o,t.dtype,"max",r),l=it({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zU(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:s,keepDims:i}=r,o=a.shape.length,u=sn(s,a.shape);let l=u;const c=nr(l,o),f=c!=null,d=n.shouldExecuteOnCPU([a]);let h=a;if(f){if(d){const w=n.texData.get(h.dataId).values,N=new Array(o);for(let $=0;$<N.length;$++)N[$]=a.shape[c[$]];const C=$A(w,a.shape,a.dtype,c,N);h=n.makeTensorInfo(N,a.dtype);const E=n.texData.get(h.dataId);E.values=C}else h=$w(a,c,n);l=pr(l.length,o)}sa("max",l,o);const[m,v]=qr(h.shape,l);let y=m;i&&(y=dr(m,u));let b;if(d){const w=n.texData.get(h.dataId).values,N=F1e(w,Fe(v),y,a.dtype);b=n.makeTensorInfo(y,a.dtype);const C=n.texData.get(b.dataId);C.values=N}else b=DCe(h,v,y,n);return f&&n.disposeIntermediateTensorInfo(h),b}const ACe={kernelName:m1,backendName:"webgl",kernelFunc:zU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ce=kA+`
  return max(a, b);
`,kCe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Jc+`
  return result;
`,ICe=oa({opSnippet:$Ce,packedOpSnippet:kCe,cpuKernelImpl:R1e}),_Ce={kernelName:Bm,backendName:"webgl",kernelFunc:ICe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;$g(a,"maxPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:u}=r,l=1;Y(aa(i,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const c=xi(a.shape,s,i,l,o,u);if(c.filterWidth===1&&c.filterHeight===1&&fn(c.inShape,c.outShape))return Ss({inputs:{x:a},backend:n});const f=new em(c,"max",!1);return n.runWebGLProgram(f,[a],a.dtype)}const FCe={kernelName:g1,backendName:"webgl",kernelFunc:OCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:s,strides:i,pad:o,dataFormat:u,dimRoundingMode:l}=r,c=[1,1,1],f=du(a.shape,s,i,c,o,l,u),d=new _A(f,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}const MCe={kernelName:v1,backendName:"webgl",kernelFunc:RCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PCe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,a=e.dilationHeight,s=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=s-1-e.padInfo.top,u=i-1-e.padInfo.left,l=s*i-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class BCe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,u=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=u-1-e.padInfo.front,d=l-1-e.padInfo.top,h=c-1-e.padInfo.left,m=u*l*c-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${d}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${l};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${l} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LCe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s}=e,i=s,{filterSize:o,strides:u,pad:l,dimRoundingMode:c}=r,f=[1,1,1],d=du(i.shape,o,u,f,l,c),h=new _A(d,"max",!0),m=n.runWebGLProgram(h,[i],i.dtype),v=new BCe(d),y=n.runWebGLProgram(v,[a,m],i.dtype);return n.disposeIntermediateTensorInfo(m),y}const zCe={kernelName:rT,backendName:"webgl",kernelFunc:LCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WCe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:s,output:i}=e,o=s;$g([s,i],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:f}=r,d=xi(o.shape,u,l,1,c,f),h=!0,m=new em(d,"max",h),v=n.runWebGLProgram(m,[o],o.dtype),y=new PCe(d),b=n.runWebGLProgram(y,[a,v],o.dtype);return n.disposeIntermediateTensorInfo(v),b}const UCe={kernelName:nT,backendName:"webgl",kernelFunc:WCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qCe(t,e,n,r){let a=new em(n,"max",!1);const s=r.runWebGLProgram(a,[t],"float32");a=new em(n,"max",!0,!0,e);const i=r.runWebGLProgram(a,[t],"float32");return[s,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VCe={kernelName:aT,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:s,pad:i,includeBatchInIndex:o}=e,u=n;Y(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const l=[1,1];Y(aa(s,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${l}'`);const c=xi(r.shape,a,s,l,i),[f,d]=qCe(r,o,c,u);return[f,d]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jCe(t,e,n,r){const a=Fe(e),i=Fe(t.shape)/a,o=it({inputs:{x:t},attrs:{shape:[i,a]},backend:r}),u=Zc(o,"float32","mean",r),l=it({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HCe={kernelName:y1,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:a,axis:s}=e,i=n,o=r.shape.length,u=sn(s,r.shape);let l=u;const c=nr(l,o),f=c!=null,d=i.shouldExecuteOnCPU([r]),h=[];let m=r;if(f){if(d){const N=i.texData.get(m.dataId).values,C=new Array(o);for(let I=0;I<C.length;I++)C[I]=r.shape[c[I]];const E=$A(N,r.shape,r.dtype,c,C);m=i.makeTensorInfo(C,r.dtype);const $=i.texData.get(m.dataId);$.values=E}else m=$w(r,c,i);h.push(m),l=pr(l.length,o)}sa("sum",l,o);const[v,y]=qr(m.shape,l);let b=v;a&&(b=dr(v,u));const x=jCe(m,y,b,i);for(const w of h)i.disposeIntermediateTensorInfo(w);return x}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:i}=r,o=a.shape.length,u=sn(s,a.shape);let l=u;const c=nr(l,o);let f=a;c!=null&&(f=Oa({inputs:{x:a},backend:n,attrs:{perm:c}}),l=pr(l.length,a.shape.length)),sa("min",l,o);const[d,h]=qr(f.shape,l),m=Fe(h),v=it({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),y=Zc(v,v.dtype,"min",n);let b;if(i){const x=dr(d,u);b=it({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=it({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(f),b}const KCe={kernelName:b1,backendName:"webgl",kernelFunc:GCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XCe=kA+`
  return min(a, b);
`,YCe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Jc+`
  return result;
`,QCe=oa({opSnippet:XCe,packedOpSnippet:YCe,cpuKernelImpl:M1e}),JCe={kernelName:Lm,backendName:"webgl",kernelFunc:QCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZCe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,f)=>c[0]+e[f]+c[1]);const a=e.length,s=Fn(a),i=n.map(c=>c[0]).join(","),o=n.map((c,f)=>c[0]+e[f]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),l=r==="reflect"?0:1;if(a===1){this.userCode=`
        int start = ${i};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${l};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${l};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${i});
      ${s} end = ${s}(${o});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${a}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${l};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${u}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eEe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((m,v)=>m[0]+e[v]+m[1]);const a=e.length,s=Fn(a),i=n.map(m=>m[0]).join(","),o=n.map((m,v)=>m[0]+e[v]).join(","),u=Ia("rc",a),l=Ia("source",a),c=`${u[a-1]} < ${this.outputShape[a-1]}`,f=a===1?"source":`vec2(${l.slice(-2).join()})`,d=r==="reflect"?0:1;let h="";if(a===1){const m=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${l.join()}), ${f});
        ${u[a-1]} += 1;
        if(${c}) {
          ${m}
          result[1] = getChannel(getX(${l.join()}), ${f});
        }
      `}else{const m=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${l.join()}), ${f});
        ${u[a-1]} += 1;
        if(${c}) {
          ${m}
          result[1] = getChannel(getX(${l.join()}), ${f});
        }
        rc = outputLoc;
        ${u[a-2]} += 1;
        if(${u[a-2]} < ${this.outputShape[a-2]}) {
          ${m}
          result[2] = getChannel(getX(${l.join()}), ${f});
          ${u[a-1]} += 1;
          if(${c}) {
            ${m}
            result[3] = getChannel(getX(${l.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${i});
      const ${s} end = ${s}(${o});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tEe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:a,mode:s}=n,i=$e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new eEe(r.shape,a,s):new ZCe(r.shape,a,s);return e.runWebGLProgram(i,[r],r.dtype)},nEe={kernelName:w1,backendName:"webgl",kernelFunc:tEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rEe=`if (b == 0.0) return NAN;
  return mod(a, b);`,aEe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Jc+`
  return result;
`,sEe=oa({opSnippet:rEe,packedOpSnippet:aEe}),iEe={kernelName:zm,backendName:"webgl",kernelFunc:sEe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oEe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uEe=`
if (a == b) {
  return 1.0;
};
return a / b;`,lEe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,WU=oa({opSnippet:uEe,packedOpSnippet:lEe,checkOutOfBounds:!0}),cEe={kernelName:Cm,backendName:"webgl",kernelFunc:WU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tF="return a - b;",UU=oa({opSnippet:tF,packedOpSnippet:tF,supportsComplex:!0,cpuKernelImpl:rwe}),fEe={kernelName:ng,backendName:"webgl",kernelFunc:UU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qU(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:s}=r,i=sn([s],a.shape),o=zU({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),u=dr(o.shape,i),l=it({inputs:{x:o},backend:n,attrs:{shape:u}}),c=UU({inputs:{a,b:l},backend:n}),f=PU({inputs:{x:c},backend:n}),d=kw({inputs:{x:f},backend:n,attrs:{axis:i,keepDims:!1}}),h=it({inputs:{x:d},backend:n,attrs:{shape:u}}),m=WU({inputs:{a:f,b:h},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),m}const dEe={kernelName:B1,backendName:"webgl",kernelFunc:qU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pEe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:s,seed:i,normalized:o}=r,u=o?a:qU({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),l=u.shape[0],c=u.shape[1],f=new oEe(l,c,s),d=[[i]],h=n.runWebGLProgram(f,[u],"int32",d);return o||n.disposeIntermediateTensorInfo(u),h}const hEe={kernelName:sT,backendName:"webgl",kernelFunc:pEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mEe=Ni+`
  return -x;
`,gEe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function vEe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[i,o]=B1e(s.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}let a;return $e().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new Hu(r.shape,gEe):a=new vo(r.shape,mEe),n.runWebGLProgram(a,[r],r.dtype)}const yEe={kernelName:x1,backendName:"webgl",kernelFunc:vEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bEe=mD;function wEe(t){Os("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:s}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:u}=r,l=n.readSync(a.dataId),c=n.readSync(s.dataId),{selectedIndices:f}=bEe(l,c,i,o,u);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const xEe={kernelName:iT,backendName:"webgl",kernelFunc:wEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SEe=gD;function NEe(t){Os("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:s}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:u,padToMaxOutputSize:l}=r,c=n.readSync(a.dataId),f=n.readSync(s.dataId),{selectedIndices:d,validOutputs:h}=SEe(c,f,i,o,u,l);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const CEe={kernelName:oT,backendName:"webgl",kernelFunc:NEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EEe=vD;function TEe(t){Os("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:s}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:u,softNmsSigma:l}=r,c=n.readSync(a.dataId),f=n.readSync(s.dataId),d=i,h=o,m=u,v=l,{selectedIndices:y,selectedScores:b}=EEe(c,f,d,h,m,v);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const DEe={kernelName:uT,backendName:"webgl",kernelFunc:TEe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AEe{constructor(e,n,r,a){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${a}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ee=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:s,depth:i,onValue:o,offValue:u}=r,l=Fe(a.shape),c=new AEe(l,i,o,u),f=it({inputs:{x:a},backend:n,attrs:{shape:[l]}}),d=n.runWebGLProgram(c,[f],s);n.disposeIntermediateTensorInfo(f);const h=[...a.shape,i],m=it({inputs:{x:d},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(d),m},kEe={kernelName:C1,backendName:"webgl",kernelFunc:$Ee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ab(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const a=Ig({inputs:{input:r},backend:n}),s=ab({inputs:{x:a},backend:n}),i=Iw({inputs:{input:r},backend:n}),o=ab({inputs:{x:i},backend:n}),u=kl({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),u}else return _g({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const IEe={kernelName:U1,backendName:"webgl",kernelFunc:ab};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VU(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const a=Ig({inputs:{input:r},backend:n}),s=VU({inputs:{x:a},backend:n}),i=Iw({inputs:{input:r},backend:n}),o=ab({inputs:{x:i},backend:n}),u=kl({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),u}else return _g({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const _Ee={kernelName:N1,backendName:"webgl",kernelFunc:VU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OEe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return LC({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const s=e[0].shape,i=e[0].dtype;e.forEach(c=>{Es(s,c.shape,"All tensors passed to stack must have matching shapes"),Y(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],u=e.map(c=>{const f=LC({inputs:{input:c},backend:n,attrs:{dim:a}});return o.push(f),f}),l=$U({inputs:u,backend:n,attrs:{axis:a}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),l}const FEe={kernelName:E1,backendName:"webgl",kernelFunc:OEe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class REe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((l,c)=>l[0]+e[c]+l[1]);const a=e.length,s=Fn(a),i=n.map(l=>l[0]).join(","),o=n.map((l,c)=>l[0]+e[c]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);if(a===1){this.userCode=`
        int start = ${i};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${i});
      ${s} end = ${s}(${o});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${u}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MEe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((v,y)=>v[0]+e[y]+v[1]);const a=e.length,s=Fn(a),i=n.map(v=>v[0]).join(","),o=n.map((v,y)=>v[0]+e[y]).join(","),u=Ia("rc",a),l=Ia("source",a),c=`${u[a-1]} < ${this.outputShape[a-1]}`,f=a===1?"source":`vec2(${l.slice(-2).join()})`,d=[`${s} rc = outputLoc;`,`${u[a-1]} += 1;
       if(${c}) {
      `,a===1?"":`}
       rc = outputLoc;
       ${u[a-2]} += 1;
       if(${u[a-2]} < ${this.outputShape[a-2]}) {`,a===1?"":`  ${u[a-1]} += 1;
         if(${c}) {`],h=a===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let m="";for(let v=0,y=a===1?2:4;v<y;v++)m+=`
        ${d[v]}
        if (${h}) {
          result[${v}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${v}] = getChannel(getX(${l.join()}), ${f});
        }
      `;m+=a===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${i});
      const ${s} end = ${s}(${o});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jU=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:s,constantValue:i}=r;if(Fe(a.shape)===0){const l=s.map((c,f)=>c[0]+a.shape[f]+c[1]);return _g({backend:n,attrs:{shape:l,value:i,dtype:a.dtype}})}const o=$e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new MEe(a.shape,s,i):new REe(a.shape,s,i),u=[[i]];return n.runWebGLProgram(o,[a],a.dtype,u)},PEe={kernelName:T1,backendName:"webgl",kernelFunc:jU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BEe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,LEe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Jc+`
  return result;
`,zEe=oa({opSnippet:BEe,packedOpSnippet:LEe}),WEe={kernelName:Um,backendName:"webgl",kernelFunc:zEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:s,keepDims:i}=r,o=a.shape.length,u=[],l=sn(s,a.shape);let c=l;const f=nr(c,o);let d=a;f!=null&&(d=Oa({inputs:{x:a},backend:n,attrs:{perm:f}}),c=pr(c.length,o),u.push(d)),sa("prod",c,o);let h;if(n.shouldExecuteOnCPU([d])){const m=n.texData.get(d.dataId).values,{outVals:v,outShape:y,outDtype:b}=z1e(d.shape,d.dtype,m,c);h=n.makeTensorInfo(y,b,v)}else{const[m,v]=qr(d.shape,c),y=Fe(v),b=it({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),x=OT(a.dtype),w=Zc(b,x,"prod",n);h=it({inputs:{x:w},backend:n,attrs:{shape:m}}),u.push(b),u.push(w)}if(i){u.push(h);const m=dr(h.shape,l);h=it({inputs:{x:h},backend:n,attrs:{shape:m}})}return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}const qEe={kernelName:A1,backendName:"webgl",kernelFunc:UEe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VEe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:s,indices:i}=e,{outputRaggedRank:o}=r,u=a.map(b=>n.readSync(b.dataId)),l=a.map(b=>b.shape),c=n.readSync(s.dataId),f=n.readSync(i.dataId),[d,h,m]=W1e(u,l,c,s.shape,s.dtype,f,i.shape,o),v=d.map(b=>n.makeTensorInfo([b.length],"int32",b)),y=n.makeTensorInfo(m,s.dtype,h);return v.concat([y])}const jEe={kernelName:lT,backendName:"webgl",kernelFunc:VEe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HEe(t){const{inputs:e,backend:n}=t,{starts:r,limits:a,deltas:s}=e,i=n.readSync(r.dataId),o=n.readSync(a.dataId),u=n.readSync(s.dataId),[l,c]=U1e(i,r.shape,r.dtype,o,a.shape,u,s.shape),f=n.makeTensorInfo([l.length],"int32",l),d=n.makeTensorInfo([c.length],r.dtype,c);return[f,d]}const GEe={kernelName:cT,backendName:"webgl",kernelFunc:HEe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KEe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:s,defaultValue:i,rowPartitionTensors:o}=e,{rowPartitionTypes:u}=r,l=n.readSync(a.dataId),c=n.readSync(s.dataId),f=n.readSync(i.dataId),d=o.map(y=>n.readSync(y.dataId)),h=o.map(y=>y.shape),[m,v]=q1e(l,a.shape,c,s.shape,s.dtype,f,i.shape,d,h,u);return n.makeTensorInfo(m,s.dtype,v)}const XEe={kernelName:fT,backendName:"webgl",kernelFunc:KEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HU=t=>{const{backend:e,attrs:n}=t,{start:r,stop:a,step:s,dtype:i}=n,o=V1e(r,a,s,i);return e.makeTensorInfo([o.length],i,o)},YEe={kernelName:dT,backendName:"webgl",kernelFunc:HU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QEe="return 1.0 / x;",JEe=bn({opSnippet:QEe}),ZEe={kernelName:qm,backendName:"webgl",kernelFunc:JEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eTe=Ni+`
  return (x < 0.0) ? 0.0 : x;
`,tTe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,nTe=bn({opSnippet:eTe,packedOpSnippet:tTe}),rTe={kernelName:Vm,backendName:"webgl",kernelFunc:nTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aTe=Ni+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,sTe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,iTe=bn({opSnippet:aTe,packedOpSnippet:sTe}),oTe={kernelName:jm,backendName:"webgl",kernelFunc:iTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uTe{constructor(e,n,r,a,s){this.variableNames=["A"],this.outputShape=[];const[i,o,u,l]=e;this.outputShape=[i,n,r,l];const c=[a&&n>1?o-1:o,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r];let d;s?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lTe{constructor(e,n,r,a,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,o,u,l]=e;this.outputShape=[i,n,r,l];const c=[a&&n>1?o-1:o,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r];let d;s?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cTe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:s,halfPixelCenters:i,size:o}=r,[u,l]=o,c=$e().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new lTe(a.shape,u,l,s,i):new uTe(a.shape,u,l,s,i);return n.runWebGLProgram(c,[a],"float32")}const fTe={kernelName:I1,backendName:"webgl",kernelFunc:cTe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dTe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,s]=n,[,i,o]=e,u=[r&&i>1?a-1:a,r&&o>1?s-1:s],l=[r&&i>1?i-1:i,r&&o>1?o-1:o],c=u[0]/l[0],f=u[1]/l[1],d=1/c,h=1/f,m=Math.ceil(d)*2+2,v=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${a-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pTe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:s}=e,{alignCorners:i}=r,o=new dTe(s.shape,a.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}const hTe={kernelName:mT,backendName:"webgl",kernelFunc:pTe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mTe{constructor(e,n,r,a,s){this.variableNames=["A"],this.outputShape=[];const[i,o,u,l]=e;this.outputShape=[i,n,r,l];const c=[a&&n>1?o-1:o,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r],d=a?"0.5":"0.0";let h;s?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gTe{constructor(e,n,r,a,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,o,u,l]=e;this.outputShape=[i,n,r,l];const c=[a&&n>1?o-1:o,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r],d=a?"0.5":"0.0";let h;s?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vTe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:s,halfPixelCenters:i,size:o}=r,[u,l]=o,c=$e().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new gTe(a.shape,u,l,s,i):new mTe(a.shape,u,l,s,i);return n.runWebGLProgram(c,[a],a.dtype)}const yTe={kernelName:k1,backendName:"webgl",kernelFunc:vTe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bTe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,s]=n,[,i,o]=e,u=[r&&i>1?a-1:a,r&&o>1?s-1:s],l=[r&&i>1?i-1:i,r&&o>1?o-1:o],c=u[0]/l[0],f=u[1]/l[1],d=1/c,h=1/f,m=Math.ceil(d)*2+2,v=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${u[0]}) *
                (float(dyR) / float(${l[0]}));

            float sourceFracCol =
                float(${u[1]}) *
                  (float(dyC) / float(${l[1]}));

            int sourceNearestRow = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wTe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:s}=e,{alignCorners:i}=r,o=new bTe(s.shape,a.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}const xTe={kernelName:hT,backendName:"webgl",kernelFunc:wTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class STe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const a=o=>n.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,s=e.map((o,u)=>a(u)).join(","),i=Fn(r);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NTe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const a=Ia("rc",r),s=`${a[r-1]} + 1 < ${this.outputShape[r-1]}`,i=`${a[r-2]} + 1 < ${this.outputShape[r-2]}`,o=Fn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${u(a.slice())};
          if(${s}){
            result.g = ${l(a.slice())};
          }
          if(${i}) {
            result.b = ${c(a.slice())};
            if(${s}) {
              result.a = ${f(a.slice())};
            }
          }
          setOutput(result);
        }
    `;function u(m){return d(m)}function l(m){return m[r-1]="("+m[r-1]+" + 1)",d(m)}function c(m){return m[r-2]="("+m[r-2]+" + 1)",d(m)}function f(m){return m[r-1]="("+m[r-1]+" + 1)",m[r-2]="("+m[r-2]+" + 1)",d(m)}function d(m){const v=e.map((x,w)=>h(w,m)),y=v.join(","),b=v.slice(-2).join(",");return`getChannel(getX(${y}), vec2(${b}))`}function h(m,v){return n.indexOf(m)!==-1&&e[m]!==1?`${e[m]} - ${v[m]} - 1`:`${v[m]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:s}=r,i=a.shape.length,o=sn(s,a.shape);if(i===0)return Ss({inputs:{x:a},backend:n});const u=$e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new NTe(a.shape,o):new STe(a.shape,o);return n.runWebGLProgram(u,[a],a.dtype)}const ETe={kernelName:_1,backendName:"webgl",kernelFunc:CTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TTe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],a=e[2];this.outputShape=e;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${a} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DTe={kernelName:_T,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:s,center:i}=e,o=n,u=new TTe(r.shape,s),[l,c]=kD(i,r.shape[1],r.shape[2]),f=[[l,c,Math.sin(a),Math.cos(a)]];return o.runWebGLProgram(u,[r],r.dtype,f)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,$Te=bn({opSnippet:ATe}),kTe={kernelName:Hm,backendName:"webgl",kernelFunc:$Te};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ITe="return inversesqrt(x);",_Te=bn({opSnippet:ITe,cpuKernelImpl:j1e}),OTe={kernelName:Gm,backendName:"webgl",kernelFunc:_Te};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OA{constructor(e,n,r,a,s,i,o=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const l=Fn(s.length),c=Fn(i.length);let f="";r===1?f="i":r===2&&(f="i, j");const d=`getIndices(${f})`;let h="";a===1?h="i":a===2&&(h="i, coords[1]");const m=`getUpdates(${h})`;let v="";u&&(v="coords[0], coords[1]");const y=`getDefaultValue(${v})`,b=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${b};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${m};
              found = true;
            }
          }
          setOutput(mix(${y}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FTe{constructor(e,n,r,a,s,i,o=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const l=Fn(s.length),c=Fn(i.length);let f="";r===1?f="i":r===2&&(f="i, j");const d=`getIndices(${f})`;let h="";a===1?h="i":a===2&&(h="i, coords[1]");const m=`getUpdates(${h})`;let v="";u&&(v="coords[0], coords[1]");const y=`getDefaultValue(${v})`,b=n>1?"strides[j]":"strides",x=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${l} strides = ${l}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${d});
              flattenedIndex += index.xz * ${b};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${x};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${m};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${y}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RTe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:s}=e,{shape:i}=r,{sliceRank:o,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=Gc(s,a,i),d=[f/l,l];if(f===0)return n.makeTensorInfo(i,a.dtype);const h=it({inputs:{x:a},backend:n,attrs:{shape:[u,o]}}),m=it({inputs:{x:s},backend:n,attrs:{shape:[u,l]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0]));let y;$e().getBool("WEBGL_PACK")?y=new FTe(u,o,h.shape.length,m.shape.length,c,d):y=new OA(u,o,h.shape.length,m.shape.length,c,d);const b=n.runWebGLProgram(y,[m,h,v],m.dtype),x=it({inputs:{x:b},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(v),x}const MTe={kernelName:gT,backendName:"webgl",kernelFunc:RTe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PTe{constructor(e,n,r,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,o=$e().getNumber("WEBGL_VERSION")===2?s:i,u=a==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${u} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BTe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:s}=e,{side:i}=r,o=new PTe(a.shape[0],a.shape[1],s.shape[1],i),u=[[a.shape[1]]];return n.runWebGLProgram(o,[a,s],"int32",u)}const LTe={kernelName:yT,backendName:"webgl",kernelFunc:BTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zTe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let a,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",a="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],l=[];for(let c=0;c<n.length;c++)l.push(`${o[c]}`),c<e&&u.push(`${o[c]}`);a=u.join(),s=l.join()}const i=Fn(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${a});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WTe(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:s}=e,i=new zTe(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(i,[r,a,s],vs(a.dtype,s.dtype))}const UTe={kernelName:O1,backendName:"webgl",kernelFunc:WTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qTe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${pw};
  float scale = ${hw};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,VTe=bn({opSnippet:qTe}),jTe={kernelName:Km,backendName:"webgl",kernelFunc:VTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HTe=lp+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,GTe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,KTe=bn({opSnippet:HTe,packedOpSnippet:GTe,cpuKernelImpl:G1e}),XTe={kernelName:Jm,backendName:"webgl",kernelFunc:KTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YTe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,QTe=bn({opSnippet:YTe}),JTe={kernelName:Qm,backendName:"webgl",kernelFunc:QTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZTe=lp+`
  return sin(x);
`,eDe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Jc}
  return result;
`,tDe=bn({opSnippet:ZTe,packedOpSnippet:eDe}),nDe={kernelName:Xm,backendName:"webgl",kernelFunc:tDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rDe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,aDe=bn({opSnippet:rDe}),sDe={kernelName:Ym,backendName:"webgl",kernelFunc:aDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iDe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,oDe=bn({opSnippet:iDe}),uDe={kernelName:Zm,backendName:"webgl",kernelFunc:oDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lDe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:s,paddings:i}=r;Y(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((b,x)=>b*x),u=[[0,0]];u.push(...i);for(let b=1+s.length;b<a.shape.length;++b)u.push([0,0]);const l=[],c=jU({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=gg(c.shape,s,o,!1),d=vg(f.length,s.length,!1),h=yg(c.shape,s,o,!1),m=it({inputs:{x:c},backend:n,attrs:{shape:f}}),v=Oa({inputs:{x:m},backend:n,attrs:{perm:d}}),y=it({inputs:{x:v},backend:n,attrs:{shape:h}});return l.push(c),l.push(m),l.push(v),l.forEach(b=>n.disposeIntermediateTensorInfo(b)),y},cDe={kernelName:M1,backendName:"webgl",kernelFunc:lDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fDe(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:s,defaultValue:i}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${a.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const o=n.readSync(r.dataId),u=n.readSync(a.dataId),l=n.readSync(s.dataId),c=n.readSync(i.dataId)[0],[f,d,h,m,v]=X1e(o,r.shape,r.dtype,u,a.dtype,l,c);return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([d[0]],a.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const dDe={kernelName:bT,backendName:"webgl",kernelFunc:fDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pDe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${a.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const i=Array.from(n.readSync(a.dataId)),o=n.readSync(r.dataId),u=Array.from(n.readSync(s.dataId)),[l,c,f]=Y1e(o,r.shape,r.dtype,i,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([f.length],s.dtype,new Int32Array(f))]}const hDe={kernelName:wT,backendName:"webgl",kernelFunc:pDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mDe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${a.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const i=n.readSync(r.dataId),o=n.readSync(a.dataId),u=n.readSync(s.dataId),[l,c]=gU(i,r.shape,r.dtype,o,u,!0);return n.makeTensorInfo(c,r.dtype,l)}const gDe={kernelName:xT,backendName:"webgl",kernelFunc:mDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vDe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${a.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const i=n.readSync(r.dataId),o=n.readSync(a.dataId),u=n.readSync(s.dataId),[l,c]=gU(i,r.shape,r.dtype,o,u);return n.makeTensorInfo(c,r.dtype,l)}const yDe={kernelName:ST,backendName:"webgl",kernelFunc:vDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bDe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:s,defaultValue:i}=e,{outputShape:o}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:f,outputSize:d}=Gc(s,a,o),h=!1;if(s.dtype==="string"){const b=n.bufferSync(a),x=n.bufferSync(s),w=al(n.readSync(i.dataId)[0]),N=H1e(b,x,o,d,c,l,u,f,w,h);return n.makeTensorInfo(o,N.dtype,N.values)}const m=new OA(l,u,a.shape.length,s.shape.length,f,[d,1],h),v=n.runWebGLProgram(m,[s,a,i],s.dtype),y=it({inputs:{x:v},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(v),y}const wDe={kernelName:NT,backendName:"webgl",kernelFunc:bDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:s,axis:i}=r,o=sn(i,a.shape)[0],u=jD(a,s,o),l=a.shape.length,c=new Array(l).fill(0),f=a.shape.slice();return u.map(d=>{const h=[...f];h[o]=d;const m=cp({inputs:{x:a},backend:n,attrs:{begin:c,size:h}});return c[o]+=d,m})}const SDe={kernelName:P1,backendName:"webgl",kernelFunc:xDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nF="return sqrt(x);",NDe=bn({opSnippet:nF,packedOpSnippet:nF,cpuKernelImpl:Q1e}),CDe={kernelName:eg,backendName:"webgl",kernelFunc:NDe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EDe="return x * x;",TDe=bn({opSnippet:EDe}),DDe={kernelName:CT,backendName:"webgl",kernelFunc:TDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rF="return (a - b) * (a - b);",ADe=oa({opSnippet:rF,packedOpSnippet:rF}),$De={kernelName:tg,backendName:"webgl",kernelFunc:ADe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");const s=n.readSync(a.dataId),i=uu(s),o=J1e(i,"string",r);return n.makeTensorInfo(a.shape,"string",o)}const IDe={kernelName:L1,backendName:"webgl",kernelFunc:kDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _De({inputs:t,attrs:e,backend:n}){const{x:r}=t,a=Ni+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new vo(r.shape,a);return n.runWebGLProgram(s,[r],r.dtype)}const ODe={kernelName:ig,backendName:"webgl",kernelFunc:_De};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FDe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const a=r.length,s=Fn(r.length),i=Fn(r.length);let o="";if(a===1)o="coords * strides + begin";else{let u=0;o=r.map((l,c)=>(u++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${u-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:s,end:i,strides:o,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:d}=r,{finalShapeSparse:h,finalShape:m,isIdentity:v,sliceDim0:y,isSimpleSlice:b,begin:x,end:w,strides:N}=DD(a.shape,s,i,o,u,l,c,f,d);let C;if(v)C=it({inputs:{x:a},backend:n,attrs:{shape:m}});else if(y||b){Y(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const $=CD(x,w,N),I=cp({inputs:{x:a},backend:n,attrs:{begin:x,size:$}});C=it({inputs:{x:I},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(I)}else if(n.shouldExecuteOnCPU([a])){const I=n.readSync(a.dataId),D=tn(a.shape,a.dtype,I),k=Z1e(h,D,N,x);C=n.makeTensorInfo(m,a.dtype,k.values)}else{const I=new FDe(x,N,h);C=n.runWebGLProgram(I,[a],a.dtype)}const E=it({inputs:{x:C},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(C),E}const MDe={kernelName:ET,backendName:"webgl",kernelFunc:RDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PDe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:s,leftPad:i,rightPad:o,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:f}=e,d=n.readSync(c.dataId),h=n.readSync(f.dataId),[m,v]=ewe(d,h,a,s,i,o,u,l);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(f.shape,"int32",v)]}const BDe={kernelName:TT,backendName:"webgl",kernelFunc:PDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LDe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:s,delimiter:i}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const o=n.readSync(s.dataId),u=n.readSync(i.dataId)[0],[l,c,f]=twe(o,u,a),d=c.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const zDe={kernelName:DT,backendName:"webgl",kernelFunc:LDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WDe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(s.dataId),o=nwe(i,a);return n.makeTensorInfo(s.shape,"int32",o)}const UDe={kernelName:AT,backendName:"webgl",kernelFunc:WDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qDe="return tan(x);",VDe=bn({opSnippet:qDe}),jDe={kernelName:rg,backendName:"webgl",kernelFunc:VDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HDe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,GDe=bn({opSnippet:HDe}),KDe={kernelName:ag,backendName:"webgl",kernelFunc:GDe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XDe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:a,indices:s,updates:i}=e,{sliceRank:o,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=Gc(i,s,a.shape),d=[f/l,l];if(f===0)return n.makeTensorInfo(a.shape,s.dtype);const h=it({inputs:{x:s},backend:n,attrs:{shape:[u,o]}}),m=it({inputs:{x:i},backend:n,attrs:{shape:[u,l]}}),v=it({inputs:{x:a},backend:n,attrs:{shape:d}}),y=new OA(u,o,h.shape.length,m.shape.length,c,d,!1,!0),b=n.runWebGLProgram(y,[m,h,v],v.dtype),x=it({inputs:{x:b},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),x}const YDe={kernelName:vT,backendName:"webgl",kernelFunc:XDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QDe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[i]*n[i];this.outputShape=r,this.rank=r.length;const a=Fn(this.rank),s=JDe(e);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function JDe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<t.length;a++)r.push(`imod(${n[a]}, ${t[a]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GU(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:s}=r;if(a.dtype==="string"||a.shape.length>5){const u=n.readSync(a.dataId),l=a.dtype==="string"?u.map(d=>al(d)):u,c=tn(a.shape,a.dtype,l),f=awe(c,s);return n.makeTensorInfo(f.shape,f.dtype,f.values)}const i=new QDe(a.shape,s);return n.runWebGLProgram(i,[a],a.dtype)}const ZDe={kernelName:sg,backendName:"webgl",kernelFunc:GU};class eAe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class tAe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sc(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function aF(t){let e=1;for(;e<t;)e*=2;return e}function nAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:s,sorted:i}=r,o=$e().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=$e().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=a.shape,c=l[l.length-1];if(n.shouldExecuteOnCPU([a])||c<o||s>u){const k=n.readSync(a.dataId),[A,O]=swe(k,l,a.dtype,s,i);return[n.makeTensorInfo(A.shape,A.dtype,A.values),n.makeTensorInfo(O.shape,O.dtype,O.values)]}if(s===0)return l[l.length-1]=0,[n.makeTensorInfo(l,a.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(c===1)return[a,_g({attrs:{shape:l,dtype:"int32",value:0},backend:n})];const f=n.texData.get(a.dataId),d=f!==null&&f.isPacked,h=d?n.unpackTensor(a):a,v=Fe(l)/c,y=it({inputs:{x:h},attrs:{shape:[v,c]},backend:n});d&&sc(n,h);const b=aF(s),x=aF(c);let w=null;const N=()=>w===null?[y,y]:[y,w],C=(k,A,O)=>{const B=N(),z=new eAe(O),F=[[c],[w===null?1:0],[Number.NEGATIVE_INFINITY],[k],[A]],R=w;w=n.runWebGLProgram(z,B,"int32",F),sc(n,R)};for(let k=1;k<b;k*=2){const A=k*2;for(let O=k;O>=1;O/=2)C(A,O,[v,x])}for(let k=x;k>b;k/=2){const A=N(),O=new tAe([v,k/2]),z=[[c],[w===null?1:0],[b]],L=w;w=n.runWebGLProgram(O,A,"int32",z),sc(n,L);const F=b/2,R=F*2;for(let q=F;q>=1;q/=2)C(R,q,w.shape)}let E=w;w=cp({inputs:{x:w},backend:n,attrs:{begin:0,size:[v,s]}}),sc(n,E);let $=LU({inputs:{x:y,indices:w},backend:n,attrs:{axis:1,batchDims:1}});sc(n,y);const I=l.slice(0,-1);I.push(s),E=w,w=it({inputs:{x:w},attrs:{shape:I},backend:n}),sc(n,E);const D=$;return $=it({inputs:{x:$},attrs:{shape:I},backend:n}),sc(n,D),[$,w]}const rAe={kernelName:$T,backendName:"webgl",kernelFunc:nAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aAe{constructor(e,n,r,a,s,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const o=r==="nearest"?1:2;let u;switch(a){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${u} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sAe(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,transforms:s}=e,{interpolation:i,fillMode:o,fillValue:u,outputShape:l}=r,[c,f,d,h]=a.shape,[m,v]=l??[f,d],y=[c,m,v,h],b=new aAe(f,d,i,o,u,y);return n.runWebGLProgram(b,[a,s],"float32")}const iAe={kernelName:kT,backendName:"webgl",kernelFunc:sAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oAe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:s}=e;$g(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(s.dataId),{outputValues:o,outputShape:u,indices:l}=iwe(i,a,s.shape,s.dtype);return[r.makeTensorInfo(u,s.dtype,o),r.makeTensorInfo([l.length],"int32",l)]}const uAe={kernelName:IT,backendName:"webgl",kernelFunc:oAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lAe(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:s}=r;s<0&&(s+=a.shape.length);const i=a,o=i.shape.length,u=a.shape[s],l=new Array(o-1);let c=0;for(let v=0;v<o;v++)v!==s&&(l[c++]=i.shape[v]);const f=[],d=new Array(o).fill(0),h=i.shape.slice();h[s]=1;const m=new Array(u);for(let v=0;v<m.length;v++){d[s]=v;const y=cp({inputs:{x:i},backend:n,attrs:{begin:d,size:h}}),b=it({inputs:{x:y},backend:n,attrs:{shape:l}});m[v]=b,f.push(y)}return f.forEach(v=>n.disposeIntermediateTensorInfo(v)),m}const cAe={kernelName:z1,backendName:"webgl",kernelFunc:lAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fAe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,a=e.batchSize,s=e.inSize,i=e.numSegments,o=i*Math.ceil(s/r);this.outputShape=[a,o];const u="0.0",l="sumValue",c=Math.floor(r/4)*4,f=r%4,d=`
        sumValue += dot(values, segFilter);
    `;let h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let m="";s%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${u};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:s}=e,{numSegments:i}=r,o=a.shape.length,u=[];let l=0;const c=nr([l],o);let f=a;c!=null&&(f=Oa({inputs:{x:a},backend:n,attrs:{perm:c}}),u.push(f),l=pr(1,o)[0]);const d=C5(f.shape,l,i),h=Fe([f.shape[l]]),m=it({inputs:{x:f},backend:n,attrs:{shape:[-1,h]}});u.push(m);const v=OT(a.dtype),y=(N,C,E,$,I)=>{const D=N.shape[0],k=N.shape[1],A=N5(k,I),O={windowSize:A,inSize:k,batchSize:D,numSegments:I},B=new fAe(O,C),z=n.compileAndRun(B,[N,E],$);if(u.push(z),z.shape[1]===I)return z;const L=HU({backend:n,attrs:{start:0,stop:I,step:1,dtype:"float32"}}),F=GU({inputs:{x:L},backend:n,attrs:{reps:[k/A]}});return u.push(L),u.push(F),y(z,C,F,$,I)},b=y(m,"unsortedSegmentSum",s,v,i),x=it({inputs:{x:b},backend:n,attrs:{shape:d}});let w=x;if(c!=null){u.push(x);const N=Cl(c);w=Oa({inputs:{x:w},backend:n,attrs:{perm:N}})}return u.forEach(N=>n.disposeIntermediateTensorInfo(N)),w}const pAe={kernelName:W1,backendName:"webgl",kernelFunc:dAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hAe=[Qwe,Zwe,nxe,sxe,oxe,cxe,dxe,hxe,yxe,wxe,Nxe,Txe,$xe,Oxe,Mxe,Bxe,zxe,Vxe,Hxe,Kxe,Jxe,s2e,o2e,f2e,p2e,b2e,x2e,E2e,Fwe,A2e,O2e,P2e,q2e,H2e,K2e,Y2e,J2e,nSe,sSe,uSe,cSe,dSe,hSe,vSe,bSe,NSe,ESe,ASe,ISe,OSe,PSe,WSe,jSe,KSe,QSe,JSe,eNe,nNe,aNe,iNe,uNe,dNe,mNe,yNe,wNe,NNe,TNe,kNe,FNe,Owe,MNe,I2e,LNe,UNe,jNe,Mwe,XNe,ZNe,tCe,sCe,uCe,dCe,mCe,bCe,NCe,TCe,ACe,_Ce,FCe,MCe,zCe,UCe,VCe,HCe,KCe,JCe,nEe,iEe,hEe,Lwe,yEe,xEe,CEe,DEe,m2e,kEe,_Ee,FEe,PEe,WEe,Bwe,qEe,jEe,GEe,XEe,YEe,g2e,cEe,ZEe,rTe,oTe,Wwe,fTe,hTe,yTe,xTe,ETe,DTe,kTe,OTe,MTe,LTe,UTe,jTe,XTe,JTe,nDe,sDe,r2e,dEe,uDe,cDe,dDe,hDe,gDe,yDe,wDe,SDe,CDe,DDe,$De,IDe,ODe,MDe,BDe,zDe,UDe,fEe,Kwe,jDe,KDe,YDe,ZDe,rAe,iAe,Xwe,uAe,cAe,pAe,IEe];for(const t of hAe)XB(t);const sF=[{question:"Hola",answer:"Hola! Puedo ayudarte en preguntas sobre JavaScript, Python, Libros y Musica. En qu te puedo ayudar?"},{question:"Buenas noches",answer:"Buenas noches! Tienes alguna pregunta sobre JavaScript, Python, Libros o Musica?"},{question:"Buenos das",answer:"Buenos das! Te gustara aprender algo nuevo de JavaScript, Python, Libros o Musica?"},{question:"Cmo ests?",answer:"Estoy listo para ayudarte! Qu necesitas saber sobre JavaScript, Python, Libros o Musica?"},{question:"Qu haces?",answer:"Soy un asistente virtual diseado para responder preguntas sobre JavaScript, Python, Libros y Musica. Cmo puedo ayudarte?"},{question:"Quin eres?",answer:"Soy un asistente virtual aqu para ayudarte con dudas sobre JavaScript, Python, Libros y Musica."},{question:"Qu puedes hacer?",answer:"Puedo responder preguntas sobre JavaScript, Python, Libros y Musica, desde conceptos bsicos hasta temas ms avanzados. Qu necesitas saber?"},{question:"Qu es JavaScript?",answer:"JavaScript es un lenguaje de programacin que se utiliza principalmente para crear pginas web dinmicas e interactivas."},{question:"que es javaScript?",answer:"JavaScript es un lenguaje de programacin que se utiliza principalmente para crear pginas web dinmicas e interactivas."},{question:"Que es javaScript?",answer:"JavaScript es un lenguaje de programacin que se utiliza principalmente para crear pginas web dinmicas e interactivas."},{question:"Para qu sirve JavaScript?",answer:"JavaScript sirve para desarrollar sitios web interactivos, crear aplicaciones web, manejar eventos en navegadores y mucho ms. Quieres aprender algn concepto especfico?"},{question:"Para que sirve javaScript?",answer:"JavaScript sirve para desarrollar sitios web interactivos, crear aplicaciones web, manejar eventos en navegadores y mucho ms. Quieres aprender algn concepto especfico?"},{question:"Para qu sirve JavaScript?",answer:"JavaScript sirve para desarrollar sitios web interactivos, crear aplicaciones web, manejar eventos en navegadores y mucho ms. Quieres aprender algn concepto especfico?"},{question:"para que sirve javaScript?",answer:"JavaScript sirve para desarrollar sitios web interactivos, crear aplicaciones web, manejar eventos en navegadores y mucho ms. Quieres aprender algn concepto especfico?"},{question:"Qu es el DOM en JavaScript?",answer:"El DOM (Document Object Model) es una interfaz que permite a JavaScript interactuar y modificar el contenido, la estructura y los estilos de una pgina web. Necesitas ejemplos prcticos?"},{question:"Qu es el DOM?",answer:"El DOM (Document Object Model) es una interfaz que permite a JavaScript interactuar y modificar el contenido, la estructura y los estilos de una pgina web. Necesitas ejemplos prcticos?"},{question:"Qu son las promesas en JavaScript?",answer:"Las promesas son una forma de manejar operaciones asncronas en JavaScript. Te permiten trabajar con tareas que toman tiempo, como solicitudes a servidores. Quieres un ejemplo?"},{question:"Que son las promesas en JavaScript?",answer:"Las promesas son una forma de manejar operaciones asncronas en JavaScript. Te permiten trabajar con tareas que toman tiempo, como solicitudes a servidores. Quieres un ejemplo?"},{question:"Que son las promesas en javaScript?",answer:"Las promesas son una forma de manejar operaciones asncronas en JavaScript. Te permiten trabajar con tareas que toman tiempo, como solicitudes a servidores. Quieres un ejemplo?"},{question:"que son las promesas en javaScript?",answer:"Las promesas son una forma de manejar operaciones asncronas en JavaScript. Te permiten trabajar con tareas que toman tiempo, como solicitudes a servidores. Quieres un ejemplo?"},{question:"Qu es async/await en JavaScript?",answer:"Async/await es una forma ms sencilla de trabajar con promesas, haciendo que el cdigo asncrono parezca ms lineal. Te gustara ver un ejemplo?"},{question:"Cul es la diferencia entre var, let y const?",answer:"En JavaScript, la diferencia entre var, let y const es que var es una palabra clave que define variables mutables, let define variables mutables con un alcance de bloque, y const define variables inmutables"},{question:"Cual es la diferencia entre var, let y const?",answer:"En JavaScript, la diferencia entre var, let y const es que var es una palabra clave que define variables mutables, let define variables mutables con un alcance de bloque, y const define variables inmutables"},{question:"cual es la diferencia entre var, let y const?",answer:"En JavaScript, la diferencia entre var, let y const es que var es una palabra clave que define variables mutables, let define variables mutables con un alcance de bloque, y const define variables inmutables"},{question:"cual es la diferencia entre var y const?",answer:"En JavaScript, la diferencia entre var, let y const es que var es una palabra clave que define variables mutables, let define variables mutables con un alcance de bloque, y const define variables inmutables"},{question:"cual es la diferencia entre var y let?",answer:"En JavaScript, la diferencia entre var, let y const es que var es una palabra clave que define variables mutables, let define variables mutables con un alcance de bloque, y const define variables inmutables"},{question:"Qu son los tipos de datos en JavaScript?",answer:"Los tipos de datos en JavaScript son una forma de categorizar los datos en funcin de su uso y comportamiento, deseas un ejemplo?"},{question:"que son los tipos de datos en JavaScript?",answer:"Los tipos de datos en JavaScript son una forma de categorizar los datos en funcin de su uso y comportamiento, deseas un ejemplo?"},{question:"Tipos de datos en javascript",answer:"String, Number, Boolean"},{question:"Dame los tipos de datos en javascript",answer:"String, Number, Boolean"},{question:"datos en javascript",answer:"String, Number, Boolean"},{question:"Qu es una funcin en JavaScript?",answer:"Una funcin en JavaScript es un conjunto de instrucciones que se define una vez y se puede ejecutar varias veces, quieres un ejemplo?"},{question:"Qu es un objeto en JavaScript?",answer:"Un objeto en JavaScript es una coleccin de propiedades que se utiliza para almacenar datos y entidades complejas"},{question:"ejemplo de datos en javascript",answer:`numero = 10
    nombre = "variable Cadena"
    es_activo = True
    `},{question:"como se define una variable en Javascript?",answer:`numero = 10
    nombre = "variable Cadena"
    es_activo = True
    `},{question:"Si, dame un ejemplo de promesas",answer:`const promesa = new Promise((resolve, reject) => {
  setTimeout(() => resolve("xito!"), 1000);
});`},{question:"claro, dame un ejemplo de promesas",answer:`const promesa = new Promise((resolve, reject) => {
  setTimeout(() => resolve("xito!"), 1000);
});`},{question:"Claro, dame un ejemplo de promesas",answer:`const promesa = new Promise((resolve, reject) => {
  setTimeout(() => resolve("xito!"), 1000);
});`},{question:"si, dame un ejemplo de promesas",answer:`const promesa = new Promise((resolve, reject) => {
  setTimeout(() => resolve("xito!"), 1000);
});`},{question:"dame un ejemplo de promesas",answer:`const promesa = new Promise((resolve, reject) => {
  setTimeout(() => resolve("xito!"), 1000);
});`},{question:"ejemplo de promesas",answer:`const promesa = new Promise((resolve, reject) => {
  setTimeout(() => resolve("xito!"), 1000);
});`},{question:"Ejemplo de Funcion en javascript",answer:`function areaCuadrado(lado) {
    return lado * lado;
  }`},{question:"si, Ejemplo de funcion en javascript",answer:`function areaCuadrado(lado) {
    return lado * lado;
    }`},{question:"Qu es Python?",answer:"Python es un lenguaje de programacin fcil de aprender, popular por su simplicidad y versatilidad. Se utiliza en ciencia de datos, inteligencia artificial, desarrollo web y ms."},{question:"que es Python?",answer:"Python es un lenguaje de programacin fcil de aprender, popular por su simplicidad y versatilidad. Se utiliza en ciencia de datos, inteligencia artificial, desarrollo web y ms."},{question:"Que es Python?",answer:"Python es un lenguaje de programacin fcil de aprender, popular por su simplicidad y versatilidad. Se utiliza en ciencia de datos, inteligencia artificial, desarrollo web y ms."},{question:"python?",answer:"Python es un lenguaje de programacin fcil de aprender, popular por su simplicidad y versatilidad. Se utiliza en ciencia de datos, inteligencia artificial, desarrollo web y ms."},{question:"Para qu sirve Python?",answer:"Python se utiliza para crear scripts, anlisis de datos, inteligencia artificial, desarrollo web y ms."},{question:"para que sirve Python?",answer:"Python se utiliza para crear scripts, anlisis de datos, inteligencia artificial, desarrollo web y ms."},{question:"para qu sirve python?",answer:"Python se utiliza para crear scripts, anlisis de datos, inteligencia artificial, desarrollo web y ms."},{question:"Qu son las listas en Python?",answer:"Las listas en Python son colecciones ordenadas y mutables que permiten almacenar elementos heterogneos. Te gustara saber cmo se usan?"},{question:"Que son las listas en Python?",answer:"Las listas en Python son colecciones ordenadas y mutables que permiten almacenar elementos heterogneos. Te gustara saber cmo se usan?"},{question:"que son las listas en python?",answer:"Las listas en Python son colecciones ordenadas y mutables que permiten almacenar elementos heterogneos. Te gustara saber cmo se usan?"},{question:"Qu son los diccionarios en Python?",answer:"Los diccionarios son estructuras de datos que almacenan pares clave-valor, ideales para buscar datos rpidamente."},{question:"Qu es un bucle for en Python?",answer:"El bucle for en Python se utiliza para iterar sobre secuencias como listas, cadenas o rangos. Quieres un ejemplo?"},{question:"Qu son los tipos de datos en Python?",answer:"int, float, str, bool, list..."},{question:"Que son los tipos de datos en Python?",answer:"int, float, str, bool, list..."},{question:"que son los tipos de datos en python?",answer:"int, float, str, bool, list..."},{question:"tipos de datos en python",answer:"int, float, str, bool, list..."},{question:"Qu es un diccionario en Python?",answer:"Es una estructura de datos que almacena pares clave-valor"},{question:"ejemplo datos en Python",answer:`numero = 10
        nombre = "variable Cadena"
        es_activo = True
    `},{question:"como se define una variable en Python?",answer:`numero = 10
        nombre = "variable Cadena"
        es_activo = True
    `},{question:"dame ejemplo for en Python",answer:`for i in range(5): 
    print(i)`},{question:"for en Python",answer:`for i in range(5): 
    print(i)`},{question:"dame un ejemplo diccionarios en Python",answer:`diccionario = {"nombre": "Jhon", "edad": 25}
        print(diccionario["nombre"]) 
    `},{question:"dame ejemplo lista en python",answer:"lista = [1, 2, 3]"},{question:"Cul es mejor, JavaScript o Python?",answer:"Depende de tus objetivos. JavaScript es ideal para desarrollo web interactivo, mientras que Python es excelente para tareas de anlisis de datos, inteligencia artificial y scripting. Quieres saber cundo usar cada uno?"},{question:"Se puede usar Python para web como JavaScript?",answer:"S, con frameworks como Django o Flask puedes usar Python para desarrollo web. Sin embargo, JavaScript es esencial para crear interactividad en navegadores. Te interesa aprender alguno de estos frameworks?"},{question:"Qu es un closure en JavaScript?",answer:"Un closure es una funcin que recuerda el mbito donde se cre, incluso despus de que ese mbito haya terminado. Quieres un ejemplo para entenderlo mejor?"},{question:"Cmo funciona la herencia en JavaScript?",answer:"La herencia en JavaScript funciona a travs de prototipos. Cada objeto puede heredar propiedades y mtodos de otro objeto. Te gustara un ejemplo prctico?"},{question:"Qu es un callback en JavaScript?",answer:"Un callback es una funcin que se pasa como argumento a otra funcin y se ejecuta despus de que esta ltima termine. Necesitas un ejemplo sencillo?"},{question:"Qu son los decoradores en Python?",answer:"Los decoradores son funciones que modifican el comportamiento de otras funciones o mtodos. Son tiles para reutilizar cdigo. Te gustara saber cmo se usan?"},{question:"Cmo manejar errores en Python?",answer:"Puedes manejar errores en Python con bloques try-except. Esto te permite capturar y gestionar excepciones. Quieres un ejemplo bsico?"},{question:"Qu es un generador en Python?",answer:"Un generador es una funcin que devuelve un iterador y utiliza la palabra clave 'yield' en lugar de 'return'. Te gustara ver un ejemplo prctico?"},{question:"Cmo aprender JavaScript?",answer:"Te recomiendo empezar con los conceptos bsicos como variables, funciones y eventos en el DOM. Luego puedes avanzar hacia temas como promesas y async/await. Quieres recursos especficos?"},{question:"Cmo aprender Python?",answer:"Puedes empezar con los fundamentos como variables, listas y bucles, y luego explorar bibliotecas como NumPy o Django segn tus intereses. Quieres ejemplos bsicos?"},{question:"Cules son las mejores prcticas en JavaScript?",answer:"Algunas mejores prcticas son: mantener el cdigo limpio, usar funciones puras, evitar variables globales y escribir pruebas unitarias. Quieres que te explique alguna en detalle?"},{question:"Cules son las mejores prcticas en Python?",answer:"Algunas mejores prcticas en Python incluyen: usar nombres de variables descriptivos, seguir PEP 8, manejar excepciones correctamente y escribir pruebas. Te interesa algn tema en particular?"},{question:"Me puedes ayudar con JavaScript?",answer:"Claro que s! Dime, qu necesitas aprender o resolver en JavaScript?"},{question:"Me puedes ayudar con Python?",answer:"Por supuesto! Qu duda tienes sobre Python?"},{question:"Tienes ejemplos de cdigo en JavaScript?",answer:"S! Dime qu necesitas, y te proporcionar ejemplos en JavaScript."},{question:"Tienes ejemplos de cdigo en Python?",answer:"Claro! Dime qu tema necesitas, y te proporcionar ejemplos en Python."},{question:"Adis",answer:"Hasta pronto! Que tengas un buen da."},{question:"Gracias",answer:"De nada! Estoy aqu para ayudarte siempre que lo necesites."},{question:"Nos vemos",answer:"Claro! Espero verte de nuevo."},{question:"Chao",answer:"Adis! Cudate."},{question:"Dame un dato curioso sobre Python",answer:"Python fue nombrado as en honor al grupo cmico britnico 'Monty Python', no por la serpiente."},{question:"Dame un dato curioso sobre JavaScript",answer:"JavaScript fue creado en solo 10 das por Brendan Eich en 1995."},{question:"Sabes algo interesante sobre Python?",answer:"Python se utiliza en muchas pelculas para efectos visuales, como en 'Avatar'."},{question:"Sabes algo interesante sobre JavaScript?",answer:"JavaScript no tiene relacin con Java, a pesar de su nombre."},{question:"Qu da es hoy?",answer:`Hoy es ${new Date().toLocaleDateString()}.`},{question:"Qu hora es?",answer:`Son aproximadamente las ${new Date().toLocaleTimeString()}.`},{question:"Qu hago si estoy aburrido?",answer:"Puedes aprender algo nuevo como JavaScript o Python. Te interesa?"},{question:"Qu me recomiendas para ver?",answer:"Qu tal un tutorial sobre JavaScript o Python? Es divertido y til!"},{question:"Hello?",answer:"Hi! I can help you with questions about JavaScript, Python, books and Music. How can I assist you?"},{question:"Good evening?",answer:"Good evening! Do you have any questions about JavaScript, Python, books or Music?"},{question:"Good morning?",answer:"Good morning! Would you like to learn something new about JavaScript, Python, books or Music?"},{question:"How are you?",answer:"I'm ready to help! What do you need to know about JavaScript, Python, books or Music?"},{question:"What are you doing?",answer:"I'm a virtual assistant designed to answer questions about JavaScript, Python, books and Music. How can I help you?"},{question:"Who are you?",answer:"I am a virtual assistant here to help you with questions about JavaScript, Python, books and Music."},{question:"What can you do?",answer:"I can answer questions about JavaScript, Python, books and Music, from basic concepts to more advanced topics. What do you need to know?"},{question:"What is JavaScript?",answer:"JavaScript is a programming language primarily used to create dynamic and interactive web pages."},{question:"what is JavaScript?",answer:"JavaScript is a programming language primarily used to create dynamic and interactive web pages."},{question:"What is javaScript?",answer:"JavaScript is a programming language primarily used to create dynamic and interactive web pages."},{question:"What is JavaScript used for?",answer:"JavaScript is used to develop interactive websites, build web applications, handle browser events, and much more. Would you like to learn about any specific concept?"},{question:"what is javaScript used for?",answer:"JavaScript is used to develop interactive websites, build web applications, handle browser events, and much more. Would you like to learn about any specific concept?"},{question:"What is the DOM in JavaScript?",answer:"The DOM (Document Object Model) is an interface that allows JavaScript to interact with and modify the content, structure, and styles of a web page. Do you need practical examples?"},{question:"What is the DOM?",answer:"The DOM (Document Object Model) is an interface that allows JavaScript to interact with and modify the content, structure, and styles of a web page. Do you need practical examples?"},{question:"What are promises in JavaScript?",answer:"Promises are a way to handle asynchronous operations in JavaScript. They allow you to work with tasks that take time, such as server requests. Would you like an example?"},{question:"what are promises in JavaScript?",answer:"Promises are a way to handle asynchronous operations in JavaScript. They allow you to work with tasks that take time, such as server requests. Would you like an example?"},{question:"What are promises in javaScript?",answer:"Promises are a way to handle asynchronous operations in JavaScript. They allow you to work with tasks that take time, such as server requests. Would you like an example?"},{question:"What is async/await in JavaScript?",answer:"Async/await is a simpler way to work with promises, making asynchronous code look more linear. Would you like to see an example?"},{question:"What is the difference between var, let, and const?",answer:"In JavaScript, the difference is that var defines mutable variables, let defines block-scoped mutable variables, and const defines immutable variables."},{question:"what is the difference between var, let, and const?",answer:"In JavaScript, the difference is that var defines mutable variables, let defines block-scoped mutable variables, and const defines immutable variables."},{question:"What is the difference between var and const?",answer:"In JavaScript, var defines mutable variables while const defines immutable variables."},{question:"What is the difference between var and let?",answer:"In JavaScript, var defines mutable variables while let defines block-scoped mutable variables."},{question:"What are data types in JavaScript?",answer:"Data types in JavaScript are ways to categorize data based on their use and behavior."},{question:"what are data types in JavaScript?",answer:"Data types in JavaScript are ways to categorize data based on their use and behavior."},{question:"Data types in JavaScript",answer:"String, Number, Boolean"},{question:"Give me the data types in JavaScript",answer:"String, Number, Boolean"},{question:"Data in JavaScript",answer:"String, Number, Boolean"},{question:"What is a function in JavaScript?",answer:"A function in JavaScript is a set of instructions that is defined once and can be executed multiple times."},{question:"What is an object in JavaScript?",answer:"An object in JavaScript is a collection of properties used to store data and complex entities."},{question:"Example of data in JavaScript",answer:`number = 10
    name = "String variable"
    isActive = true
    `},{question:"How do you define a variable in JavaScript?",answer:`number = 10
    name = "String variable"
    isActive = true
    `},{question:"Yes, give me an example of promises",answer:`const promise = new Promise((resolve, reject) => {
  setTimeout(() => resolve("Success!"), 1000);
});`},{question:"Sure, give me an example of promises",answer:`const promise = new Promise((resolve, reject) => {
  setTimeout(() => resolve("Success!"), 1000);
});`},{question:"sure, give me an example of promises",answer:`const promise = new Promise((resolve, reject) => {
  setTimeout(() => resolve("Success!"), 1000);
});`},{question:"Give me an example of promises",answer:`const promise = new Promise((resolve, reject) => {
  setTimeout(() => resolve("Success!"), 1000);
});`},{question:"example of promises",answer:`const promise = new Promise((resolve, reject) => {
  setTimeout(() => resolve("Success!"), 1000);
});`},{question:"Example of a function in JavaScript",answer:`function squareArea(side) {
    return side * side;
  }`},{question:"Yes, example of a function in JavaScript",answer:`function squareArea(side) {
    return side * side;
    }`},{question:"What is Python?",answer:"Python is an easy-to-learn programming language, popular for its simplicity and versatility. It is used in data science, artificial intelligence, web development, and more."},{question:"what is Python?",answer:"Python is an easy-to-learn programming language, popular for its simplicity and versatility. It is used in data science, artificial intelligence, web development, and more."},{question:"What is python?",answer:"Python is an easy-to-learn programming language, popular for its simplicity and versatility. It is used in data science, artificial intelligence, web development, and more."},{question:"python?",answer:"Python is an easy-to-learn programming language, popular for its simplicity and versatility. It is used in data science, artificial intelligence, web development, and more."},{question:"What is Python used for?",answer:"Python is used for scripting, data analysis, artificial intelligence, web development, and more. What would you like to focus on?"},{question:"what is Python used for?",answer:"Python is used for scripting, data analysis, artificial intelligence, web development, and more. What would you like to focus on?"},{question:"What is Python for?",answer:"Python is used for scripting, data analysis, artificial intelligence, web development, and more. What would you like to focus on?"},{question:"What are lists in Python?",answer:"Lists in Python are ordered and mutable collections that allow you to store heterogeneous elements. Would you like to know how to use them?"},{question:"What are dictionaries in Python?",answer:"Dictionaries are data structures that store key-value pairs, ideal for quickly looking up data."},{question:"What is a for loop in Python?",answer:"The for loop in Python is used to iterate over sequences such as lists, strings, or ranges. Would you like an example?"},{question:"What are data types in Python?",answer:"int, float, str, bool, list..."},{question:"What is a dictionary in Python?",answer:"A dictionary in Python is a data structure that stores key-value pairs, ideal for fast lookups."},{question:"example of data in Python",answer:`number = 10
            name = "string variable"
            is_active = True
        `},{question:"how to define a variable in Python?",answer:`number = 10
            name = "string variable"
            is_active = True
        `},{question:"example of for loop in Python",answer:`for i in range(5): 
        print(i)`},{question:"for loop in Python",answer:`for i in range(5): 
        print(i)`},{question:"Yes, give me an example of dictionaries in Python",answer:`dictionary = {"name": "John", "age": 25}
            print(dictionary["name"]) 
        `},{question:"example of list in Python",answer:"list = [1, 2, 3]"},{question:"Which is better, JavaScript or Python?",answer:"It depends on your goals. JavaScript is great for interactive web development, while Python excels in data analysis, artificial intelligence, and scripting. Would you like to know when to use each?"},{question:"Can Python be used for the web like JavaScript?",answer:"Yes, with frameworks like Django or Flask, you can use Python for web development. However, JavaScript is essential for creating interactivity in browsers. Are you interested in learning any of these frameworks?"},{question:"What is a closure in JavaScript?",answer:"A closure is a function that remembers the scope where it was created, even after that scope has ended. Would you like an example to understand it better?"},{question:"How does inheritance work in JavaScript?",answer:"Inheritance in JavaScript works through prototypes. Each object can inherit properties and methods from another object. Would you like a practical example?"},{question:"What is a callback in JavaScript?",answer:"A callback is a function passed as an argument to another function and executed after the latter finishes. Do you need a simple example?"},{question:"What are decorators in Python?",answer:"Decorators are functions that modify the behavior of other functions or methods. They're useful for reusing code. Would you like to know how they work?"},{question:"How to handle errors in Python?",answer:"You can handle errors in Python using try-except blocks. This allows you to capture and manage exceptions. Would you like a basic example?"},{question:"What is a generator in Python?",answer:"A generator is a function that returns an iterator and uses the 'yield' keyword instead of 'return'. Would you like a practical example?"},{question:"How to learn JavaScript?",answer:"I recommend starting with basic concepts like variables, functions, and DOM events. Then you can move on to topics like promises and async/await. Do you want specific resources?"},{question:"How to learn Python?",answer:"You can start with fundamentals like variables, lists, and loops, then explore libraries like NumPy or Django based on your interests. Do you want basic examples?"},{question:"What are the best practices in JavaScript?",answer:"Some best practices include: keeping code clean, using pure functions, avoiding global variables, and writing unit tests. Would you like me to explain one in detail?"},{question:"What are the best practices in Python?",answer:"Some best practices in Python include: using descriptive variable names, following PEP 8, handling exceptions properly, and writing tests. Are you interested in any specific topic?"},{question:"Can you help me with JavaScript?",answer:"Of course! Tell me, what do you need to learn or solve in JavaScript?"},{question:"Can you help me with Python?",answer:"Absolutely! What question do you have about Python?"},{question:"Do you have code examples in JavaScript?",answer:"Yes! Let me know what you need, and I'll provide examples in JavaScript."},{question:"Do you have code examples in Python?",answer:"Sure! Let me know what topic you need, and I'll provide examples in Python."},{question:"Goodbye",answer:"See you soon! Have a great day."},{question:"Thanks",answer:"You're welcome! I'm here to help whenever you need."},{question:"See you",answer:"Sure! I hope to see you again."},{question:"Bye",answer:"Goodbye! Take care."},{question:"Tell me an interesting fact about Python",answer:"Python was named after the British comedy group 'Monty Python', not the snake."},{question:"Tell me an interesting fact about JavaScript",answer:"JavaScript was created in just 10 days by Brendan Eich in 1995."},{question:"Did you know something interesting about Python?",answer:"Python is used in many movies for visual effects, such as in 'Avatar'."},{question:"Did you know something interesting about JavaScript?",answer:"JavaScript has no relation to Java, despite its name."},{question:"What day is it today?",answer:`Today is ${new Date().toLocaleDateString()}.`},{question:"What time is it?",answer:`It's approximately ${new Date().toLocaleTimeString()}.`},{question:"What should I do if I'm bored?",answer:"You can learn something new like JavaScript or Python. Are you interested?"},{question:"What do you recommend to watch?",answer:"How about a tutorial on JavaScript or Python? It's fun and useful!"},{question:"Qu libro me recomiendas?",answer:"Si te gusta la ficcin, prueba 'Cien aos de soledad' de Gabriel Garca Mrquez o 'El Principito' de Antoine de Saint-Exupry."},{question:"Qu es un libro?",answer:"Un libro es una coleccin de hojas impresas o digitales que transmiten informacin, historias o conocimientos. Quieres que te recomiende uno, o prefieres saber ms sobre los tipos de libros?"},{question:"De qu trata 'Cien aos de soledad'?",answer:"Este libro narra la historia de la familia Buenda en el pueblo ficticio de Macondo, explorando temas como el amor, la soledad y la historia de Amrica Latina. Te interesa saber ms sobre Macondo o el autor Gabriel Garca Mrquez?"},{question:"Qu otros libros escribi Gabriel Garca Mrquez?",answer:"Adems de 'Cien aos de soledad', escribi 'El amor en los tiempos del clera', 'Crnica de una muerte anunciada' y 'El coronel no tiene quien le escriba'. Te gustara saber ms sobre alguno de estos libros o su estilo de escritura?"},{question:"Qu es el realismo mgico?",answer:"El realismo mgico es un estilo literario que combina elementos mgicos con una narrativa realista. Gabriel Garca Mrquez es uno de sus principales exponentes. Te gustara explorar otros autores o libros de este gnero?"},{question:"De qu trata 'El Principito'?",answer:"El libro narra la historia de un nio, el principito, que viaja por el universo y conoce a diferentes personajes, cada uno representando aspectos de la vida adulta. A travs de sus encuentros, el principito nos invita a reflexionar sobre la amistad, el amor y la importancia de ver el mundo con los ojos de un nio. Te gustara conocer ms sobre alguno de los personajes o las lecciones que nos deja?"},{question:"Quin es el autor de 'El Principito'?",answer:"El autor de 'El Principito' es Antoine de Saint-Exupry, un escritor y aviador francs. La obra fue publicada en 1943 y es uno de los libros ms traducidos del mundo. Te gustara saber ms sobre la vida del autor o el contexto en el que escribi esta obra?"},{question:"Cul es el mensaje principal de 'El Principito'?",answer:"El mensaje central de 'El Principito' es la importancia de lo invisible, lo esencial que no se ve con los ojos, sino con el corazn. A travs de su amistad con el zorro y sus encuentros con distintos personajes, el principito nos ensea a valorar las cosas que realmente importan. Te interesa saber ms sobre el zorro o los otros personajes simblicos?"},{question:"Qu simboliza el zorro en 'El Principito'?",answer:"El zorro simboliza la amistad, la conexin profunda y el acto de domesticar, que es un proceso de crear vnculos significativos. Le ensea al principito la idea de que lo esencial es invisible a los ojos y que es necesario ver con el corazn. Te gustara explorar ms sobre la relacin entre el principito y el zorro o su mensaje?"},{question:"Qu otros libros me recomiendas?",answer:"Adems de 'Cien aos de soledad', te recomiendo 'Crimen y castigo' de Fidor Dostoyevski, 'El resplandor' de Stephen King, y 'Narraciones extraordinarias' de Edgar Allan Poe. Quieres saber ms sobre alguno de estos libros o autores?"},{question:"Quin es Edgar Allan Poe?",answer:"Edgar Allan Poe fue un escritor estadounidense conocido por sus cuentos de terror, misterio y poesa. Obras como 'El cuervo' y 'El corazn delator' son clsicos. Quieres recomendaciones especficas de sus cuentos?"},{question:"Qu cuentos de Edgar Allan Poe me recomiendas?",answer:"Te recomiendo 'El pozo y el pndulo', 'La cada de la Casa Usher', y 'El gato negro'. Cada uno es un ejemplo de su estilo oscuro y atmosfrico. Te interesa aprender ms sobre su influencia literaria?"},{question:"Quin es Fidor Dostoyevski?",answer:"Fidor Dostoyevski fue un novelista ruso considerado uno de los ms grandes escritores de la literatura universal. Obras como 'Crimen y castigo' y 'Los hermanos Karamazov' exploran la psicologa humana. Quieres saber ms sobre sus libros?"},{question:"Qu libros de Fidor Dostoyevski me recomiendas?",answer:"Te recomiendo 'Crimen y castigo', 'Los hermanos Karamazov', y 'El idiota'. Cada uno aborda temas como la moralidad, la fe y la lucha interna del ser humano. Te gustara explorar un resumen de alguno de ellos?"},{question:"Quin es Stephen King?",answer:"Stephen King es un autor estadounidense conocido como el maestro del terror. Ha escrito ms de 60 novelas, muchas de las cuales se han adaptado al cine. Te interesa recomendaciones de sus mejores obras?"},{question:"Qu libros de Stephen King me recomiendas?",answer:"Algunas de sus mejores obras son 'El resplandor', 'It', 'Carrie', y 'Cementerio de animales'. Cada una ofrece una experiencia nica de terror. Quieres saber ms sobre alguno de ellos?"},{question:"Qu es 'El resplandor' de Stephen King?",answer:"Es una novela de terror psicolgico que sigue a una familia aislada en un hotel embrujado. Es famosa por sus personajes y su atmsfera inquietante. Quieres saber ms sobre su adaptacin al cine?"},{question:"Qu otros clsicos literarios me recomiendas?",answer:"Te recomiendo '1984' de George Orwell, 'Matar a un ruiseor' de Harper Lee, y 'Orgullo y prejuicio' de Jane Austen. Te interesa saber de qu trata alguno de estos libros?"},{question:"Quin es Jane Austen?",answer:"Jane Austen fue una escritora inglesa conocida por sus novelas que exploran el amor, la sociedad y la condicin humana. Obras como 'Orgullo y prejuicio' y 'Emma' son clsicos de la literatura. Quieres recomendaciones de sus libros?"},{question:"Qu libros de misterio me recomiendas?",answer:"Te recomiendo 'El nombre de la rosa' de Umberto Eco, 'Diez negritos' de Agatha Christie, y 'El sabueso de los Baskerville' de Arthur Conan Doyle. Te interesa explorar ms sobre algn autor?"},{question:"Quin es Agatha Christie?",answer:"Agatha Christie fue una escritora britnica conocida como la Reina del Misterio. Cre personajes icnicos como Hercule Poirot y Miss Marple. Quieres recomendaciones de sus libros ms famosos?"},{question:"Qu libros de Agatha Christie me recomiendas?",answer:"Te recomiendo 'Diez negritos', 'Asesinato en el Orient Express', y 'El misterio de la gua de ferrocarriles'. Cada uno es un clsico del gnero de misterio. Te gustara aprender sobre sus adaptaciones al cine?"},{question:"Qu libros de terror me recomiendas?",answer:"Te recomiendo 'Drcula' de Bram Stoker, 'Frankenstein' de Mary Shelley, y 'La llamada de Cthulhu' de H.P. Lovecraft. Te interesa aprender ms sobre alguno de ellos?"},{question:"Quin es Mary Shelley?",answer:"Mary Shelley fue una escritora inglesa conocida por 'Frankenstein', una de las primeras obras de ciencia ficcin y terror gtico. Quieres explorar ms sobre su vida o el impacto de su obra?"},{question:"Qu es 'Crimen y castigo'?",answer:"Es una novela de Fidor Dostoyevski que sigue a un joven que comete un crimen y enfrenta las consecuencias morales y psicolgicas de sus actos. Quieres saber ms sobre sus temas o personajes?"},{question:"Qu libros de fantasa me recomiendas?",answer:"Te recomiendo 'El seor de los anillos' de J.R.R. Tolkien, 'Las crnicas de Narnia' de C.S. Lewis, y 'Harry Potter' de J.K. Rowling. Te interesa explorar ms sobre alguno de estos mundos?"},{question:"Quin es J.R.R. Tolkien?",answer:"J.R.R. Tolkien fue un escritor britnico conocido por crear el universo de 'El seor de los anillos' y 'El hobbit'. Es considerado el padre de la fantasa moderna. Te gustara explorar sus libros o su mundo fantstico?"},{question:"Qu es 'El cuervo'?",answer:"Es un poema narrativo de Edgar Allan Poe que cuenta la historia de un hombre atormentado por la visita de un cuervo que repite 'Nunca ms'. Es una obra maestra del simbolismo y el tono oscuro. Quieres aprender ms sobre su interpretacin o el simbolismo del cuervo?"},{question:"Qu es 'El corazn delator'?",answer:"Es un cuento de Edgar Allan Poe que narra la historia de un hombre que, atormentado por su culpa, confiesa un asesinato que haba intentado ocultar. Es un ejemplo perfecto del estilo psicolgico de Poe. Te interesa saber ms sobre sus temas o su impacto literario?"},{question:"Qu es 'La cada de la Casa Usher'?",answer:"Es un cuento de Edgar Allan Poe que describe la visita de un narrador a una casa misteriosa y decadente habitada por los gemelos Usher. La historia explora temas de locura, decadencia y muerte. Quieres aprender ms sobre sus simbolismos o adaptaciones?"},{question:"Qu es 'El gato negro'?",answer:"Es un cuento de Edgar Allan Poe que narra la historia de un hombre que, impulsado por la culpa y la locura, comete actos violentos contra su gato y su esposa. Es un relato oscuro sobre el remordimiento. Quieres explorar ms sobre este tipo de narrativas?"},{question:"Qu es 'El pozo y el pndulo'?",answer:"Es un cuento de Edgar Allan Poe que sigue a un prisionero durante la Inquisicin Espaola mientras enfrenta una tortura psicolgica. Es famoso por su atmsfera claustrofbica y suspenso. Quieres aprender ms sobre la tcnica narrativa de Poe?"},{question:"Qu es 'Narraciones extraordinarias'?",answer:"Es una coleccin de cuentos de Edgar Allan Poe que incluye relatos icnicos como 'El cuervo', 'El corazn delator', 'El gato negro' y 'La cada de la Casa Usher'. Cada historia explora temas de terror, locura y misterio. Quieres recomendaciones de cuentos especficos?"},{question:"Quin es Edgar Allan Poe?",answer:"Edgar Allan Poe fue un escritor estadounidense conocido como el maestro del terror y el misterio. Su obra abarca cuentos, poemas y ensayos que influyeron enormemente en la literatura moderna. Quieres explorar sus cuentos ms famosos o aprender sobre su vida?"},{question:"What book do you recommend?",answer:"If you like fiction, try 'One Hundred Years of Solitude' by Gabriel Garca Mrquez or 'The Little Prince' by Antoine de Saint-Exupry."},{question:"What is a book?",answer:"A book is a collection of printed or digital pages that convey information, stories, or knowledge. Would you like me to recommend one, or would you prefer to learn more about the types of books?"},{question:"What is 'One Hundred Years of Solitude' about?",answer:"This book tells the story of the Buenda family in the fictional town of Macondo, exploring themes like love, solitude, and Latin American history. Would you like to learn more about Macondo or the author Gabriel Garca Mrquez?"},{question:"What other books did Gabriel Garca Mrquez write?",answer:"In addition to 'One Hundred Years of Solitude', he wrote 'Love in the Time of Cholera', 'Chronicle of a Death Foretold', and 'No One Writes to the Colonel'. Would you like to know more about any of these books or his writing style?"},{question:"What is magical realism?",answer:"Magical realism is a literary style that blends magical elements with a realistic narrative. Gabriel Garca Mrquez is one of its main exponents. Would you like to explore other authors or books in this genre?"},{question:"What is 'The Little Prince' about?",answer:"The book tells the story of a boy, the little prince, who travels through the universe and meets various characters, each representing aspects of adult life. Through his encounters, the little prince invites us to reflect on friendship, love, and the importance of seeing the world with the eyes of a child. Would you like to learn more about any of the characters or the lessons it teaches?"},{question:"Who is the author of 'The Little Prince'?",answer:"The author of 'The Little Prince' is Antoine de Saint-Exupry, a French writer and aviator. The book was published in 1943 and is one of the most translated books in the world. Would you like to know more about the author's life or the context in which he wrote this work?"},{question:"What is the main message of 'The Little Prince'?",answer:"The central message of 'The Little Prince' is the importance of the invisible, the essential that is not seen with the eyes, but with the heart. Through his friendship with the fox and his encounters with various characters, the little prince teaches us to value the things that truly matter. Would you like to know more about the fox or the other symbolic characters?"},{question:"What does the fox symbolize in 'The Little Prince'?",answer:"The fox symbolizes friendship, deep connection, and the act of taming, which is a process of creating meaningful bonds. It teaches the little prince that the essential is invisible to the eyes and that one must see with the heart. Would you like to explore more about the relationship between the little prince and the fox or its message?"},{question:"What other books do you recommend?",answer:"In addition to 'One Hundred Years of Solitude', I recommend 'Crime and Punishment' by Fyodor Dostoevsky, 'The Shining' by Stephen King, and 'Extraordinary Tales' by Edgar Allan Poe. Would you like to know more about any of these books or authors?"},{question:"Who is Edgar Allan Poe?",answer:"Edgar Allan Poe was an American writer known for his horror, mystery tales, and poetry. Works like 'The Raven' and 'The Tell-Tale Heart' are classics. Would you like specific recommendations for his stories?"},{question:"What stories by Edgar Allan Poe do you recommend?",answer:"I recommend 'The Pit and the Pendulum', 'The Fall of the House of Usher', and 'The Black Cat'. Each one is an example of his dark and atmospheric style. Would you like to learn more about his literary influence?"},{question:"Who is Fyodor Dostoevsky?",answer:"Fyodor Dostoevsky was a Russian novelist considered one of the greatest writers of world literature. Works like 'Crime and Punishment' and 'The Brothers Karamazov' explore human psychology. Would you like to know more about his books?"},{question:"What books by Fyodor Dostoevsky do you recommend?",answer:"I recommend 'Crime and Punishment', 'The Brothers Karamazov', and 'The Idiot'. Each one tackles themes like morality, faith, and the internal struggle of the human soul. Would you like to explore a summary of any of them?"},{question:"Who is Stephen King?",answer:"Stephen King is an American author known as the master of horror. He has written more than 60 novels, many of which have been adapted into films. Would you like recommendations for his best works?"},{question:"What books by Stephen King do you recommend?",answer:"Some of his best works are 'The Shining', 'It', 'Carrie', and 'Pet Sematary'. Each offers a unique horror experience. Would you like to know more about any of them?"},{question:"What is 'The Shining' by Stephen King?",answer:"It is a psychological horror novel that follows a family isolated in a haunted hotel. It is famous for its characters and eerie atmosphere. Would you like to know more about its film adaptation?"},{question:"What other classic books do you recommend?",answer:"I recommend '1984' by George Orwell, 'To Kill a Mockingbird' by Harper Lee, and 'Pride and Prejudice' by Jane Austen. Would you like to know what any of these books are about?"},{question:"Who is Jane Austen?",answer:"Jane Austen was an English writer known for her novels that explore love, society, and the human condition. Works like 'Pride and Prejudice' and 'Emma' are classics of literature. Would you like recommendations for her books?"},{question:"What mystery books do you recommend?",answer:"I recommend 'The Name of the Rose' by Umberto Eco, 'And Then There Were None' by Agatha Christie, and 'The Hound of the Baskervilles' by Arthur Conan Doyle. Would you like to explore more about any of the authors?"},{question:"Who is Agatha Christie?",answer:"Agatha Christie was a British writer known as the Queen of Mystery. She created iconic characters like Hercule Poirot and Miss Marple. Would you like recommendations for her most famous books?"},{question:"What books by Agatha Christie do you recommend?",answer:"I recommend 'And Then There Were None', 'Murder on the Orient Express', and 'The Mystery of the Railway Guide'. Each one is a classic of the mystery genre. Would you like to learn about their film adaptations?"},{question:"What horror books do you recommend?",answer:"I recommend 'Dracula' by Bram Stoker, 'Frankenstein' by Mary Shelley, and 'The Call of Cthulhu' by H.P. Lovecraft. Would you like to learn more about any of them?"},{question:"Who is Mary Shelley?",answer:"Mary Shelley was an English writer known for 'Frankenstein', one of the first works of science fiction and gothic horror. Would you like to explore more about her life or the impact of her work?"},{question:"What is 'Crime and Punishment'?",answer:"It is a novel by Fyodor Dostoevsky that follows a young man who commits a crime and faces the moral and psychological consequences of his actions. Would you like to learn more about its themes or characters?"},{question:"What fantasy books do you recommend?",answer:"I recommend 'The Lord of the Rings' by J.R.R. Tolkien, 'The Chronicles of Narnia' by C.S. Lewis, and 'Harry Potter' by J.K. Rowling. Would you like to explore more about any of these worlds?"},{question:"Who is J.R.R. Tolkien?",answer:"J.R.R. Tolkien was a British writer known for creating the universe of 'The Lord of the Rings' and 'The Hobbit'. He is considered the father of modern fantasy. Would you like to explore his books or his fantastic world?"},{question:"What is 'The Raven'?",answer:"It is a narrative poem by Edgar Allan Poe that tells the story of a man tormented by the visit of a raven that repeatedly says 'Nevermore'. It is a masterpiece of symbolism and dark tone. Would you like to learn more about its interpretation or the symbolism of the raven?"},{question:"What is 'The Tell-Tale Heart'?",answer:"It is a short story by Edgar Allan Poe that tells the story of a man who, tormented by his guilt, confesses a murder he had tried to hide. It is a perfect example of Poe's psychological style. Would you like to know more about its themes or literary impact?"},{question:"What is 'The Fall of the House of Usher'?",answer:"It is a short story by Edgar Allan Poe that describes a narrator's visit to a mysterious and decaying house inhabited by the Usher twins. The story explores themes of madness, decay, and death. Would you like to learn more about its symbolism or adaptations?"},{question:"What is 'The Black Cat'?",answer:"It is a short story by Edgar Allan Poe that tells the story of a man who, driven by guilt and madness, commits violent acts against his cat and wife. It is a dark tale about remorse. Would you like to explore more about this type of narrative?"},{question:"What is 'The Pit and the Pendulum'?",answer:"It is a short story by Edgar Allan Poe that follows a prisoner during the Spanish Inquisition as he faces psychological torture. It is famous for its claustrophobic atmosphere and suspense. Would you like to learn more about Poe's narrative technique?"},{question:"What is 'Extraordinary Tales'?",answer:"It is a collection of short stories by Edgar Allan Poe that includes iconic tales like 'The Raven', 'The Tell-Tale Heart', 'The Black Cat', and 'The Fall of the House of Usher'. Each story explores themes of horror, madness, and mystery. Would you like recommendations for specific stories?"},{question:"Who is Edgar Allan Poe?",answer:"Edgar Allan Poe was an American writer known as the master of horror and mystery. His work includes tales, poems, and essays that greatly influenced modern literature. Would you like to explore his most famous stories or learn about his life?"},{question:"Qu msica puedo escuchar?",answer:"Depende de tu estilo. Si buscas algo tranquilo, prueba msica instrumental o jazz. Si quieres algo animado, prueba pop, rock o reguetn. Te gustara recomendaciones de artistas o canciones especficas?"},{question:"Qu es la msica?",answer:"La msica es una forma de arte que combina sonidos y silencios organizados en el tiempo. Puede transmitir emociones, contar historias o simplemente entretener. Te gustara aprender sobre gneros musicales o sus beneficios?"},{question:"Qu gneros musicales son populares?",answer:"Algunos gneros populares son pop, rock, jazz, msica clsica, hip-hop y electrnica. Quieres recomendaciones de artistas o explorar un gnero especfico?"},{question:"Quin es Michael Jackson?",answer:"Michael Jackson, conocido como el Rey del Pop, fue un cantante, compositor y bailarn estadounidense. Es famoso por lbumes como 'Thriller', 'Bad' y 'Dangerous'. Quieres saber ms sobre sus canciones icnicas?"},{question:"Cules son las canciones ms famosas de Michael Jackson?",answer:"Algunas de sus canciones ms icnicas son 'Billie Jean', 'Thriller', 'Beat It', y 'Smooth Criminal'. Quieres recomendaciones de otros artistas de pop?"},{question:"Quin es Elvis Presley?",answer:"Elvis Presley, conocido como el Rey del Rock and Roll, fue un cantante y actor estadounidense. Es famoso por canciones como 'Jailhouse Rock' y 'Suspicious Minds'. Te interesa conocer ms sobre su vida o su msica?"},{question:"Qu canciones son icnicas de Elvis Presley?",answer:"Algunas canciones destacadas de Elvis Presley son 'Hound Dog', 'Love Me Tender', y 'Can't Help Falling in Love'. Te gustara recomendaciones de otros artistas de rock?"},{question:"Qu es el jazz?",answer:"El jazz es un gnero musical nacido en Nueva Orleans a finales del siglo XIX, caracterizado por la improvisacin y los ritmos sincopados. Grandes exponentes incluyen a Louis Armstrong, Miles Davis y Ella Fitzgerald. Te gustara recomendaciones de lbumes de jazz?"},{question:"Qu canciones de jazz son recomendadas?",answer:"Recomiendo 'What a Wonderful World' de Louis Armstrong, 'So What' de Miles Davis, y 'Summertime' interpretada por Ella Fitzgerald. Quieres explorar otros gneros como el blues o el soul?"},{question:"Qu es la msica clsica?",answer:"La msica clsica abarca un amplio periodo histrico, desde el barroco hasta el romanticismo. Compositores famosos incluyen a Mozart, Beethoven y Bach. Te interesa conocer obras clsicas recomendadas?"},{question:"Qu obras clsicas son populares?",answer:"Recomiendo 'La Novena Sinfona' de Beethoven, 'El Requiem' de Mozart, y 'El Clave Bien Temperado' de Bach. Te gustara aprender sobre los instrumentos de la msica clsica?"},{question:"Qu es el pop?",answer:"El pop es un gnero musical orientado al pblico general, caracterizado por melodas pegajosas y producciones modernas. Artistas como Madonna, Taylor Swift y The Weeknd son conos del pop. Quieres recomendaciones de canciones o artistas emergentes?"},{question:"Cules son las canciones icnicas del pop?",answer:"Algunas canciones icnicas del pop son 'Like a Prayer' de Madonna, 'Shake It Off' de Taylor Swift, y 'Blinding Lights' de The Weeknd. Quieres explorar subgneros del pop como el synth-pop o el electro-pop?"},{question:"Qu es la msica electrnica?",answer:"La msica electrnica utiliza tecnologa y sintetizadores para crear sonidos. Tiene subgneros como techno, house y trance. DJs como David Guetta, Tisto y Armin van Buuren son referentes. Te interesa recomendaciones de canciones o festivales?"},{question:"Qu canciones electrnicas son recomendadas?",answer:"Recomiendo 'Titanium' de David Guetta, 'Adagio for Strings' de Tisto, y 'In and Out of Love' de Armin van Buuren. Quieres aprender sobre cmo se crean estas canciones?"},{question:"Qu es el reguetn?",answer:"El reguetn es un gnero musical nacido en Puerto Rico en los aos 90, influenciado por el reggae y el hip-hop. Artistas populares incluyen a Daddy Yankee, Bad Bunny y Karol G. Quieres recomendaciones de canciones o aprender sobre sus orgenes?"},{question:"Cules son las canciones ms escuchadas del reguetn?",answer:"Algunas canciones populares son 'Gasolina' de Daddy Yankee, 'Tusa' de Karol G y Nicki Minaj, y 'Dkiti' de Bad Bunny. Quieres explorar otros gneros latinos como la salsa o la bachata?"},{question:"Qu es el hip-hop?",answer:"El hip-hop es un movimiento cultural y gnero musical nacido en los aos 70 en Nueva York. Combina el rap, el DJing, el breakdance y el graffiti. Artistas icnicos incluyen a Tupac, Eminem y Kendrick Lamar. Te interesa saber ms sobre sus subgneros o canciones?"},{question:"Qu canciones de hip-hop son recomendadas?",answer:"Recomiendo 'California Love' de Tupac, 'Lose Yourself' de Eminem, y 'HUMBLE.' de Kendrick Lamar. Quieres explorar la historia del hip-hop o aprender sobre las batallas de freestyle?"},{question:"Quin es Michael Jackson?",answer:"Michael Jackson, conocido como el Rey del Pop, fue un cantante, compositor y bailarn estadounidense. Transform la msica pop con lbumes icnicos como 'Thriller' y su estilo innovador. Quieres saber sobre sus canciones ms famosas o su legado?"},{question:"Cules son las canciones ms famosas de Michael Jackson?",answer:"Algunas de sus canciones icnicas son 'Billie Jean', 'Thriller', 'Beat It', 'Smooth Criminal' y 'Man in the Mirror'. Te gustara explorar lbumes como 'Bad' o 'Dangerous'?"},{question:"Quin es Elvis Presley?",answer:"Elvis Presley, conocido como el Rey del Rock and Roll, fue un cantante y actor estadounidense. Innov el rock con su carisma y estilo nico, dejando una huella imborrable en la msica. Te gustara conocer ms sobre sus canciones famosas o su vida?"},{question:"Cules son las canciones ms famosas de Elvis Presley?",answer:"Algunas de sus canciones ms conocidas son 'Jailhouse Rock', 'Hound Dog', 'Love Me Tender', 'Suspicious Minds' y 'Can't Help Falling in Love'. "},{question:"Quin es Madonna?",answer:"Madonna, conocida como la Reina del Pop, es una cantante, compositora y actriz estadounidense. Es famosa por reinventar constantemente su imagen y estilo musical. Te gustara conocer ms sobre sus xitos o su impacto cultural?"},{question:"Cules son las canciones ms famosas de Madonna?",answer:"Entre sus canciones ms icnicas estn 'Like a Prayer', 'Vogue', 'Material Girl', 'La Isla Bonita' y 'Hung Up'. Quieres explorar sus lbumes ms influyentes como 'Like a Virgin'?"},{question:"Quin es Louis Armstrong?",answer:"Louis Armstrong fue un trompetista, cantante y una de las figuras ms influyentes en la historia del jazz. Es conocido por su carisma y su tcnica innovadora. Te gustara escuchar recomendaciones de su msica?"},{question:"Cules son las canciones ms famosas de Louis Armstrong?",answer:"Sus canciones ms populares incluyen 'What a Wonderful World', 'La Vie en Rose', 'Hello, Dolly!' y 'When the Saints Go Marching In'. Te gustara aprender ms sobre su legado en el jazz?"},{question:"Quin es Miles Davis?",answer:"Miles Davis fue un trompetista y compositor estadounidense, y una de las figuras ms influyentes del jazz moderno. Transform el gnero con lbumes como 'Kind of Blue'. Quieres recomendaciones de sus mejores trabajos?"},{question:"Cules son las canciones ms famosas de Miles Davis?",answer:"Entre sus temas ms destacados estn 'So What', 'Freddie Freeloader', 'Blue in Green', y 'All Blues'. Quieres aprender sobre cmo innov en el jazz?"},{question:"Quin es Tupac?",answer:"Tupac Shakur, conocido como 2Pac, fue un rapero, actor y activista estadounidense. Es considerado una de las figuras ms importantes del hip-hop gracias a sus letras profundas y su impacto cultural. Quieres saber ms sobre su legado?"},{question:"Cules son las canciones ms famosas de Tupac?",answer:"Algunas de sus canciones icnicas son 'California Love', 'Dear Mama', 'Changes', 'Hail Mary' y 'Keep Ya Head Up'. Te gustara explorar ms sobre el impacto del hip-hop en los aos 90?"},{question:"Quin es Eminem?",answer:"Eminem es un rapero, compositor y productor estadounidense, conocido por su habilidad lrica y su impacto en la cultura pop. Es uno de los artistas ms vendidos de todos los tiempos. Quieres conocer sus mejores canciones o lbumes?"},{question:"Cules son las canciones ms famosas de Eminem?",answer:"Entre sus xitos se encuentran 'Lose Yourself', 'Stan', 'The Real Slim Shady', 'Without Me' y 'Love the Way You Lie'. Te gustara explorar su carrera o sus colaboraciones?"},{question:"Quin es Taylor Swift?",answer:"Taylor Swift es una cantante y compositora estadounidense conocida por sus letras personales y su transicin del country al pop. Es una de las artistas ms influyentes de su generacin. Te interesa explorar sus lbumes o canciones ms populares?"},{question:"Cules son las canciones ms famosas de Taylor Swift?",answer:"Algunas de sus canciones ms destacadas son 'Love Story', 'Shake It Off', 'Blank Space', 'All Too Well' y 'Anti-Hero'. Quieres recomendaciones de sus lbumes ms recientes?"},{question:"Quin es Bad Bunny?",answer:"Bad Bunny es un cantante y compositor puertorriqueo, conocido como uno de los artistas ms importantes del reguetn y la msica latina. Su estilo innovador ha redefinido el gnero. Quieres recomendaciones de sus canciones?"},{question:"Cules son las canciones ms famosas de Bad Bunny?",answer:"Algunos de sus xitos incluyen 'Dkiti', 'Yonaguni', 'Callata', 'Moscow Mule' y 'Titi Me Pregunt'. Te gustara saber ms sobre su impacto en la msica urbana?"},{question:"Quin es David Guetta?",answer:"David Guetta es un DJ y productor francs, considerado uno de los pioneros de la msica electrnica moderna. Es conocido por sus colaboraciones con artistas de pop y hip-hop. Te interesa recomendaciones de sus canciones?"},{question:"Cules son las canciones ms famosas de David Guetta?",answer:"Entre sus xitos estn 'Titanium', 'When Love Takes Over', 'Sexy Bitch', 'Memories' y 'Turn Me On'. Quieres aprender sobre otros DJs influyentes?"},{question:"Qu es el rock?",answer:"El rock es un gnero musical que surgi en los aos 50 en los Estados Unidos, combinando elementos del rhythm and blues, el country y otros estilos. Es conocido por su energa, guitarras elctricas y letras expresivas. Quieres aprender sobre sus subgneros o artistas icnicos como Nirvana, Elvis Presley, The Beatles, Led Zepelin, o Pink Floyd?"},{question:"Cules son los subgneros del rock?",answer:"El rock tiene muchos subgneros, como el rock clsico, hard rock, punk rock, rock progresivo, grunge y ms. Te interesa saber ms sobre alguno en particular o recomendaciones de canciones?"},{question:"Quin es Elvis Presley?",answer:"Elvis Presley, conocido como el Rey del Rock and Roll, es considerado uno de los pioneros del gnero. Aunque sus canciones mezclan elementos de rock, pop y country, dej una marca profunda en la msica. Te gustara conocer ms sobre sus canciones o su impacto?"},{question:"Quin es The Beatles?",answer:"The Beatles fue una banda britnica formada en los aos 60, conocida como una de las bandas ms influyentes de todos los tiempos. Innovaron en el rock y experimentaron con mltiples estilos musicales. Te gustara recomendaciones de sus canciones o aprender sobre sus lbumes?"},{question:"Cules son las canciones ms famosas de The Beatles?",answer:"Algunas de sus canciones icnicas son 'Hey Jude', 'Let It Be', 'Yesterday', 'Come Together' y 'Here Comes the Sun'. Quieres explorar ms sobre sus lbumes clsicos como 'Abbey Road'?"},{question:"Quin es Queen?",answer:"Queen es una banda britnica formada en los aos 70, conocida por su estilo verstil y su carismtico vocalista Freddie Mercury. Mezclaron rock con elementos de pera, funk y pop. Te gustara recomendaciones de sus canciones?"},{question:"Cules son las canciones ms famosas de Queen?",answer:"Entre sus canciones ms famosas estn 'Bohemian Rhapsody', 'We Will Rock You', 'Another One Bites the Dust', 'Somebody to Love' y 'Don't Stop Me Now'. Te gustara aprender sobre su legado?"},{question:"Quin es Led Zeppelin?",answer:"Led Zeppelin fue una banda britnica formada en los aos 60, considerada una de las pioneras del hard rock y el heavy metal. Es famosa por su virtuosismo musical y su influencia en el rock. Te gustara recomendaciones de sus canciones o aprender sobre su impacto?"},{question:"Cules son las canciones ms famosas de Led Zeppelin?",answer:"Entre sus canciones ms destacadas estn 'Stairway to Heaven', 'Whole Lotta Love', 'Immigrant Song', 'Kashmir' y 'Black Dog'. Te interesa explorar sus lbumes como 'Led Zeppelin IV'?"},{question:"Qu es el rock progresivo?",answer:"El rock progresivo es un subgnero del rock que mezcla estructuras musicales complejas, letras profundas y elementos de otros estilos como la msica clsica. Bandas como Pink Floyd y Genesis son representativas. Te gustara recomendaciones de bandas o canciones?"},{question:"Quin es Pink Floyd?",answer:"Pink Floyd es una banda britnica de rock progresivo conocida por su msica experimental y sus letras filosficas. lbumes como 'The Dark Side of the Moon' y 'The Wall' son clsicos. Quieres saber ms sobre sus canciones o sus espectaculares conciertos?"},{question:"Cules son las canciones ms famosas de Pink Floyd?",answer:"Entre sus canciones ms famosas estn 'Wish You Were Here', 'Comfortably Numb', 'Another Brick in the Wall', 'Time' y 'Money'. Te gustara explorar ms de su discografa?"},{question:"Qu es el grunge?",answer:"El grunge es un subgnero del rock que surgi en los aos 90 en Seattle. Es conocido por su sonido crudo y letras introspectivas. Bandas como Nirvana y Pearl Jam lideraron este movimiento. Quieres recomendaciones de canciones o aprender ms sobre su historia?"},{question:"Quin es Nirvana?",answer:"Nirvana fue una banda estadounidense liderada por Kurt Cobain, considerada la banda ms influyente del grunge. Su lbum 'Nevermind' cambi el panorama del rock en los aos 90. Quieres escuchar canciones recomendadas o aprender ms sobre Kurt Cobain?"},{question:"Cules son las canciones ms famosas de Nirvana?",answer:"Algunas de sus canciones ms populares son 'Smells Like Teen Spirit', 'Come as You Are', 'Lithium', 'In Bloom' y 'Heart-Shaped Box'. Te interesa explorar su lbum 'Nevermind'?"},{question:"Quin es Pearl Jam?",answer:"Pearl Jam es una banda estadounidense de grunge formada en los aos 90. Son conocidos por su autenticidad y por ser pioneros del rock alternativo. Te gustara recomendaciones de sus canciones?"},{question:"Cules son las canciones ms famosas de Pearl Jam?",answer:"Entre sus canciones ms destacadas estn 'Alive', 'Jeremy', 'Black', 'Even Flow' y 'Better Man'. Quieres aprender ms sobre su impacto en el grunge?"},{question:"Qu es el punk rock?",answer:"El punk rock es un subgnero del rock que surgi en los aos 70, conocido por su energa cruda, letras polticas y actitud rebelde. Bandas como The Ramones y The Sex Pistols lideraron el movimiento. Te gustara explorar ms sobre el punk o sus artistas icnicos?"},{question:"Quines son The Ramones?",answer:"The Ramones fue una banda estadounidense considerada pionera del punk rock. Su estilo rpido y directo influy en generaciones de msicos. Quieres escuchar canciones recomendadas o aprender ms sobre el punk rock?"},{question:"Cules son las canciones ms famosas de The Ramones?",answer:"Entre sus canciones ms populares estn 'Blitzkrieg Bop', 'I Wanna Be Sedated', 'Sheena Is a Punk Rocker' y 'Rockaway Beach'. Te interesa explorar ms de su discografa?"},{question:"What music can I listen to?",answer:"It depends on your style. If you're looking for something calm, try instrumental music or jazz. If you want something upbeat, try pop, rock, or reggaeton. Would you like recommendations for specific artists or songs?"},{question:"What is music?",answer:"Music is an art form that combines sounds and silences organized in time. It can convey emotions, tell stories, or simply entertain. Would you like to learn about musical genres or their benefits?"},{question:"What are popular music genres?",answer:"Some popular genres are pop, rock, jazz, classical music, hip-hop, and electronic. Would you like recommendations for artists or to explore a specific genre?"},{question:"Who is Michael Jackson?",answer:"Michael Jackson, known as the King of Pop, was an American singer, songwriter, and dancer. He is famous for albums like 'Thriller,' 'Bad,' and 'Dangerous.' Would you like to know more about his iconic songs?"},{question:"What are Michael Jackson's most famous songs?",answer:"Some of his most iconic songs are 'Billie Jean,' 'Thriller,' 'Beat It,' and 'Smooth Criminal.' Would you like recommendations for other pop artists?"},{question:"Who is Elvis Presley?",answer:"Elvis Presley, known as the King of Rock and Roll, was an American singer and actor. He is famous for songs like 'Jailhouse Rock' and 'Suspicious Minds.' Are you interested in learning more about his life or music?"},{question:"What are Elvis Presley's iconic songs?",answer:"Some of Elvis Presley's standout songs are 'Hound Dog,' 'Love Me Tender,' and 'Can't Help Falling in Love.' Would you like recommendations for other rock artists?"},{question:"What is jazz?",answer:"Jazz is a musical genre born in New Orleans in the late 19th century, characterized by improvisation and syncopated rhythms. Great exponents include Louis Armstrong, Miles Davis, and Ella Fitzgerald. Would you like recommendations for jazz albums?"},{question:"What are recommended jazz songs?",answer:"I recommend 'What a Wonderful World' by Louis Armstrong, 'So What' by Miles Davis, and 'Summertime' performed by Ella Fitzgerald. Would you like to explore other genres like blues or soul?"},{question:"What is classical music?",answer:"Classical music encompasses a wide historical period, from the Baroque to the Romantic era. Famous composers include Mozart, Beethoven, and Bach. Would you like to know about recommended classical works?"},{question:"What are popular classical works?",answer:"I recommend 'The Ninth Symphony' by Beethoven, 'Requiem' by Mozart, and 'The Well-Tempered Clavier' by Bach. Would you like to learn about classical music instruments?"},{question:"What is pop?",answer:"Pop is a musical genre aimed at the general public, characterized by catchy melodies and modern productions. Artists like Madonna, Taylor Swift, and The Weeknd are pop icons. Would you like song recommendations or emerging artist suggestions?"},{question:"What are iconic pop songs?",answer:"Some iconic pop songs are 'Like a Prayer' by Madonna, 'Shake It Off' by Taylor Swift, and 'Blinding Lights' by The Weeknd. Would you like to explore subgenres of pop like synth-pop or electro-pop?"},{question:"What is electronic music?",answer:"Electronic music uses technology and synthesizers to create sounds. It has subgenres like techno, house, and trance. DJs like David Guetta, Tisto, and Armin van Buuren are key figures. Would you be interested in song recommendations or information about festivals?"},{question:"What are recommended electronic songs?",answer:"I recommend 'Titanium' by David Guetta, 'Adagio for Strings' by Tisto, and 'In and Out of Love' by Armin van Buuren. Would you like to learn how these songs are created?"},{question:"What is reggaeton?",answer:"Reggaeton is a musical genre born in Puerto Rico in the 90s, influenced by reggae and hip-hop. Popular artists include Daddy Yankee, Bad Bunny, and Karol G. Would you like song recommendations or learn about its origins?"},{question:"What are the most popular reggaeton songs?",answer:"Some popular songs are 'Gasolina' by Daddy Yankee, 'Tusa' by Karol G and Nicki Minaj, and 'Dkiti' by Bad Bunny. Would you like to explore other Latin genres like salsa or bachata?"},{question:"What is hip-hop?",answer:"Hip-hop is a cultural movement and musical genre born in the 70s in New York. It combines rap, DJing, breakdancing, and graffiti. Iconic artists include Tupac, Eminem, and Kendrick Lamar. Would you like to learn more about its subgenres or songs?"},{question:"What are recommended hip-hop songs?",answer:"I recommend 'California Love' by Tupac, 'Lose Yourself' by Eminem, and 'HUMBLE.' by Kendrick Lamar. Would you like to explore the history of hip-hop or learn about freestyle battles?"},{question:"Who is Michael Jackson?",answer:"Michael Jackson, known as the King of Pop, was an American singer, songwriter, and dancer. He transformed pop music with iconic albums like 'Thriller' and his innovative style. Would you like to learn about his most famous songs or his legacy?"},{question:"What are Michael Jackson's most famous songs?",answer:"Some of his iconic songs are 'Billie Jean', 'Thriller', 'Beat It', 'Smooth Criminal', and 'Man in the Mirror'. Would you like to explore albums like 'Bad' or 'Dangerous'?"},{question:"Who is Elvis Presley?",answer:"Elvis Presley, known as the King of Rock and Roll, was an American singer and actor. He revolutionized rock with his charisma and unique style, leaving an indelible mark on music. Would you like to learn more about his famous songs or his life?"},{question:"What are Elvis Presley's most famous songs?",answer:"Some of his most well-known songs are 'Jailhouse Rock', 'Hound Dog', 'Love Me Tender', 'Suspicious Minds', and 'Can't Help Falling in Love'."},{question:"Who is Madonna?",answer:"Madonna, known as the Queen of Pop, is an American singer, songwriter, and actress. She is famous for constantly reinventing her image and musical style. Would you like to know more about her hits or cultural impact?"},{question:"What are Madonna's most famous songs?",answer:"Some of her iconic songs are 'Like a Prayer', 'Vogue', 'Material Girl', 'La Isla Bonita', and 'Hung Up'. Would you like to explore her most influential albums like 'Like a Virgin'?"},{question:"Who is Louis Armstrong?",answer:"Louis Armstrong was a trumpeter, singer, and one of the most influential figures in the history of jazz. He is known for his charisma and innovative technique. Would you like to hear recommendations for his music?"},{question:"What are Louis Armstrong's most famous songs?",answer:"Some of his most popular songs include 'What a Wonderful World', 'La Vie en Rose', 'Hello, Dolly!', and 'When the Saints Go Marching In'. Would you like to learn more about his legacy in jazz?"},{question:"Who is Miles Davis?",answer:"Miles Davis was an American trumpeter and composer, and one of the most influential figures in modern jazz. He transformed the genre with albums like 'Kind of Blue'. Would you like recommendations for his best works?"},{question:"What are Miles Davis' most famous songs?",answer:"Some of his standout tracks are 'So What', 'Freddie Freeloader', 'Blue in Green', and 'All Blues'. Would you like to learn about how he innovated jazz?"},{question:"Who is Tupac?",answer:"Tupac Shakur, known as 2Pac, was an American rapper, actor, and activist. He is considered one of the most important figures in hip-hop due to his deep lyrics and cultural impact. Would you like to learn more about his legacy?"},{question:"What are Tupac's most famous songs?",answer:"Some of his iconic songs are 'California Love', 'Dear Mama', 'Changes', 'Hail Mary', and 'Keep Ya Head Up'. Would you like to explore more about hip-hop's impact in the 90s?"},{question:"Who is Eminem?",answer:"Eminem is an American rapper, songwriter, and producer, known for his lyrical skill and impact on pop culture. He is one of the best-selling artists of all time. Would you like to know his best songs or albums?"},{question:"What are Eminem's most famous songs?",answer:"Some of his hits include 'Lose Yourself', 'Stan', 'The Real Slim Shady', 'Without Me', and 'Love the Way You Lie'. Would you like to explore his career or collaborations?"},{question:"Who is Taylor Swift?",answer:"Taylor Swift is an American singer and songwriter, known for her personal lyrics and her transition from country to pop. She is one of the most influential artists of her generation. Would you like to explore her albums or most popular songs?"},{question:"What are Taylor Swift's most famous songs?",answer:"Some of her most notable songs are 'Love Story', 'Shake It Off', 'Blank Space', 'All Too Well', and 'Anti-Hero'. Would you like recommendations from her most recent albums?"},{question:"Who is Bad Bunny?",answer:"Bad Bunny is a Puerto Rican singer and songwriter, known as one of the most important artists in reggaeton and Latin music. His innovative style has redefined the genre. Would you like recommendations for his songs?"},{question:"What are Bad Bunny's most famous songs?",answer:"Some of his hits include 'Dkiti', 'Yonaguni', 'Callata', 'Moscow Mule', and 'Titi Me Pregunt'. Would you like to know more about his impact on urban music?"},{question:"Who is David Guetta?",answer:"David Guetta is a French DJ and producer, considered one of the pioneers of modern electronic music. He is known for his collaborations with pop and hip-hop artists. Would you like recommendations for his songs?"},{question:"What are David Guetta's most famous songs?",answer:"Some of his hits include 'Titanium', 'When Love Takes Over', 'Sexy Bitch', 'Memories', and 'Turn Me On'. Would you like to learn about other influential DJs?"},{question:"What is rock?",answer:"Rock is a musical genre that emerged in the 1950s in the United States, combining elements of rhythm and blues, country, and other styles. It is known for its energy, electric guitars, and expressive lyrics. Would you like to learn about its subgenres or iconic artists like Nirvana, Elvis Presley, The Beatles, Led Zeppelin, or Pink Floyd?"},{question:"What are the subgenres of rock?",answer:"Rock has many subgenres, such as classic rock, hard rock, punk rock, progressive rock, grunge, and more. Are you interested in learning more about any specific one or recommendations for songs?"},{question:"Who is Elvis Presley?",answer:"Elvis Presley, known as the King of Rock and Roll, is considered one of the pioneers of the genre. Although his songs mix elements of rock, pop, and country, he left a deep mark on music. Would you like to know more about his songs or his impact?"},{question:"Who are The Beatles?",answer:"The Beatles were a British band formed in the 1960s, known as one of the most influential bands of all time. They innovated rock and experimented with multiple musical styles. Would you like recommendations for their songs or learn about their albums?"},{question:"What are The Beatles' most famous songs?",answer:"Some of their iconic songs are 'Hey Jude', 'Let It Be', 'Yesterday', 'Come Together', and 'Here Comes the Sun'. Would you like to explore more about their classic albums like 'Abbey Road'?"},{question:"Who is Queen?",answer:"Queen is a British band formed in the 1970s, known for their versatile style and charismatic lead singer Freddie Mercury. They mixed rock with elements of opera, funk, and pop. Would you like recommendations for their songs?"},{question:"What are Queen's most famous songs?",answer:"Some of their most famous songs are 'Bohemian Rhapsody', 'We Will Rock You', 'Another One Bites the Dust', 'Somebody to Love', and 'Don't Stop Me Now'. Would you like to learn about their legacy?"},{question:"Who is Led Zeppelin?",answer:"Led Zeppelin was a British band formed in the 1960s, considered one of the pioneers of hard rock and heavy metal. They are famous for their musical virtuosity and influence on rock. Would you like recommendations for their songs or learn about their impact?"},{question:"What are Led Zeppelin's most famous songs?",answer:"Some of their most notable songs are 'Stairway to Heaven', 'Whole Lotta Love', 'Immigrant Song', 'Kashmir', and 'Black Dog'. Are you interested in exploring albums like 'Led Zeppelin IV'?"},{question:"What is progressive rock?",answer:"Progressive rock is a subgenre of rock that blends complex musical structures, deep lyrics, and elements from other styles like classical music. Bands like Pink Floyd and Genesis are representative. Would you like recommendations for bands or songs?"},{question:"Who is Pink Floyd?",answer:"Pink Floyd is a British progressive rock band known for their experimental music and philosophical lyrics. Albums like 'The Dark Side of the Moon' and 'The Wall' are classics. Would you like to learn more about their songs or their spectacular concerts?"},{question:"What are Pink Floyd's most famous songs?",answer:"Some of their most famous songs are 'Wish You Were Here', 'Comfortably Numb', 'Another Brick in the Wall', 'Time', and 'Money'. Would you like to explore more of their discography?"},{question:"What is grunge?",answer:"Grunge is a subgenre of rock that emerged in the 1990s in Seattle. It is known for its raw sound and introspective lyrics. Bands like Nirvana and Pearl Jam led this movement. Would you like recommendations for songs or learn more about its history?"},{question:"Who is Nirvana?",answer:"Nirvana was an American band led by Kurt Cobain, considered the most influential band of grunge. Their album 'Nevermind' changed the rock landscape in the 1990s. Would you like to listen to recommended songs or learn more about Kurt Cobain?"},{question:"What are Nirvana's most famous songs?",answer:"Some of their most popular songs are 'Smells Like Teen Spirit', 'Come as You Are', 'Lithium', 'In Bloom', and 'Heart-Shaped Box'. Are you interested in exploring their album 'Nevermind'?"},{question:"Who is Pearl Jam?",answer:"Pearl Jam is an American grunge band formed in the 1990s. They are known for their authenticity and for being pioneers of alternative rock. Would you like recommendations for their songs?"},{question:"What are Pearl Jam's most famous songs?",answer:"Some of their most notable songs are 'Alive', 'Jeremy', 'Black', 'Even Flow', and 'Better Man'. Would you like to learn more about their impact on grunge?"},{question:"What is punk rock?",answer:"Punk rock is a subgenre of rock that emerged in the 1970s, known for its raw energy, political lyrics, and rebellious attitude. Bands like The Ramones and The Sex Pistols led the movement. Would you like to explore more about punk or its iconic artists?"},{question:"Who are The Ramones?",answer:"The Ramones were an American band considered pioneers of punk rock. Their fast and direct style influenced generations of musicians. Would you like to listen to recommended songs or learn more about punk rock?"},{question:"What are The Ramones' most famous songs?",answer:"Some of their most popular songs are 'Blitzkrieg Bop', 'I Wanna Be Sedated', 'Sheena Is a Punk Rocker', and 'Rockaway Beach'. Would you like to explore more of their discography?"}];function Br(){return Br=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Br.apply(null,arguments)}var KU={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function Ha(t,e){if(sb(t,e))return t[e];throw typeof t[e]=="function"&&FA(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Fd(t,e,n){if(sb(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}function sb(t,e){return!gAe(t)&&!Array.isArray(t)?!1:pt(vAe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function mAe(t,e){if(!FA(t,e))throw new Error('No access to method "'+e+'"');return t[e]}function FA(t,e){return t==null||typeof t[e]!="function"||pt(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:pt(yAe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function gAe(t){return typeof t=="object"&&t&&t.constructor===Object}var vAe={length:!0,name:!0},yAe={toString:!0,valueOf:!0,toLocaleString:!0};class _w{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return Ha(this.wrappedObject,e)}set(e,n){return Fd(this.wrappedObject,e,n),this}has(e){return sb(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return YU(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){sb(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class XU{constructor(e,n,r){this.a=e,this.b=n,this.bKeys=r,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,n){return this.bKeys.has(e)?this.b.set(e,n):this.a.set(e,n),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return YU(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function YU(t,e){return{next:()=>{var n=t.next();return n.done?n:{value:e(n.value),done:!1}}}}function nm(){return new Map}function dd(t){if(!t)return nm();if(JU(t))return t;if(Fw(t))return new _w(t);throw new Error("createMap can create maps from objects or Maps")}function bAe(t){if(t instanceof _w)return t.wrappedObject;var e={};for(var n of t.keys()){var r=t.get(n);Fd(e,n,r)}return e}function jt(t){return typeof t=="number"}function Gt(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function wAe(t){return typeof t=="bigint"}function eu(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function Og(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function si(t){return t&&t.constructor.prototype.isUnit===!0||!1}function ka(t){return typeof t=="string"}var An=Array.isArray;function $t(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function wi(t){return Array.isArray(t)||$t(t)}function ib(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function vc(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function RA(t){return t&&t.constructor.prototype.isRange===!0||!1}function Ow(t){return t&&t.constructor.prototype.isIndex===!0||!1}function xAe(t){return typeof t=="boolean"}function SAe(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function QU(t){return t&&t.constructor.prototype.isHelp===!0||!1}function NAe(t){return typeof t=="function"}function CAe(t){return t instanceof Date}function EAe(t){return t instanceof RegExp}function Fw(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!eu(t)&&!Og(t))}function JU(t){return t?t instanceof Map||t instanceof _w||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function TAe(t){return t===null}function DAe(t){return t===void 0}function Lc(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function ai(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function AAe(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function $Ae(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function kAe(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function cn(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function zC(t){return cn(t)||br(t)&&t.args.length===1&&cn(t.args[0])&&"-+~".includes(t.op)}function Fg(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function ml(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function fp(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function $n(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function Rw(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function br(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function lu(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function IAe(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function _Ae(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function ea(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function ZU(t){return t&&t.constructor.prototype.isChain===!0||!1}function Ln(t){var e=typeof t;return e==="object"?t===null?"null":Gt(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Wt(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(n){return Wt(n)});if(t instanceof Date)return new Date(t.valueOf());if(Gt(t))return t;if(Fw(t))return OAe(t,Wt);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function OAe(t,e){var n={};for(var r in t)pt(t,r)&&(n[r]=e(t[r]));return n}function eq(t,e){for(var n in e)pt(e,n)&&(t[n]=e[n]);return t}function cu(t,e){var n,r,a;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(r=0,a=t.length;r<a;r++)if(!cu(t[r],e[r]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!cu(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}else return t===e}}function FAe(t,e,n){var r=!0,a;Object.defineProperty(t,e,{get:function(){return r&&(a=n(),r=!1),a},set:function(i){a=i,r=!1},configurable:!0,enumerable:!0})}function pt(t,e){return t&&Object.hasOwnProperty.call(t,e)}function RAe(t,e){for(var n={},r=0;r<e.length;r++){var a=e[r],s=t[a];s!==void 0&&(n[a]=s)}return n}var MAe=["Matrix","Array"],PAe=["number","BigNumber","Fraction"],Ue=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(KU)};Br(Ue,KU,{MATRIX_OPTIONS:MAe,NUMBER_OPTIONS:PAe});function iF(){return!0}function Zs(){return!1}function Wf(){}const oF="Argument is not a typed-function.";function tq(){function t(re){return typeof re=="object"&&re!==null&&re.constructor===Object}const e=[{name:"number",test:function(re){return typeof re=="number"}},{name:"string",test:function(re){return typeof re=="string"}},{name:"boolean",test:function(re){return typeof re=="boolean"}},{name:"Function",test:function(re){return typeof re=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(re){return re instanceof Date}},{name:"RegExp",test:function(re){return re instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(re){return re===null}},{name:"undefined",test:function(re){return re===void 0}}],n={name:"any",test:iF,isAny:!0};let r,a,s=0,i={createCount:0};function o(re){const ce=r.get(re);if(ce)return ce;let Ce='Unknown type "'+re+'"';const Ae=re.toLowerCase();let Le;for(Le of a)if(Le.toLowerCase()===Ae){Ce+='. Did you mean "'+Le+'" ?';break}throw new TypeError(Ce)}function u(re){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const Ce=ce?o(ce).index:a.length,Ae=[];for(let Pe=0;Pe<re.length;++Pe){if(!re[Pe]||typeof re[Pe].name!="string"||typeof re[Pe].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Ze=re[Pe].name;if(r.has(Ze))throw new TypeError('Duplicate type name "'+Ze+'"');Ae.push(Ze),r.set(Ze,{name:Ze,test:re[Pe].test,isAny:re[Pe].isAny,index:Ce+Pe,conversionsTo:[]})}const Le=a.slice(Ce);a=a.slice(0,Ce).concat(Ae).concat(Le);for(let Pe=Ce+Ae.length;Pe<a.length;++Pe)r.get(a[Pe]).index=Pe}function l(){r=new Map,a=[],s=0,u([n],!1)}l(),u(e);function c(){let re;for(re of a)r.get(re).conversionsTo=[];s=0}function f(re){const ce=a.filter(Ce=>{const Ae=r.get(Ce);return!Ae.isAny&&Ae.test(re)});return ce.length?ce:["any"]}function d(re){return re&&typeof re=="function"&&"_typedFunctionData"in re}function h(re,ce,Ce){if(!d(re))throw new TypeError(oF);const Ae=Ce&&Ce.exact,Le=Array.isArray(ce)?ce.join(","):ce,Pe=N(Le),Ze=y(Pe);if(!Ae||Ze in re.signatures){const Xt=re._typedFunctionData.signatureMap.get(Ze);if(Xt)return Xt}const je=Pe.length;let tt;if(Ae){tt=[];let Xt;for(Xt in re.signatures)tt.push(re._typedFunctionData.signatureMap.get(Xt))}else tt=re._typedFunctionData.signatures;for(let Xt=0;Xt<je;++Xt){const Nt=Pe[Xt],Cn=[];let U;for(U of tt){const fe=I(U.params,Xt);if(!(!fe||Nt.restParam&&!fe.restParam)){if(!fe.hasAny){const Ie=w(fe);if(Nt.types.some(qe=>!Ie.has(qe.name)))continue}Cn.push(U)}}if(tt=Cn,tt.length===0)break}let Qe;for(Qe of tt)if(Qe.params.length<=je)return Qe;throw new TypeError("Signature not found (signature: "+(re.name||"unnamed")+"("+y(Pe,", ")+"))")}function m(re,ce,Ce){return h(re,ce,Ce).implementation}function v(re,ce){const Ce=o(ce);if(Ce.test(re))return re;const Ae=Ce.conversionsTo;if(Ae.length===0)throw new Error("There are no conversions to "+ce+" defined.");for(let Le=0;Le<Ae.length;Le++)if(o(Ae[Le].from).test(re))return Ae[Le].convert(re);throw new Error("Cannot convert "+re+" to "+ce)}function y(re){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return re.map(Ce=>Ce.name).join(ce)}function b(re){const ce=re.indexOf("...")===0,Ae=(ce?re.length>3?re.slice(3):"any":re).split("|").map(je=>o(je.trim()));let Le=!1,Pe=ce?"...":"";return{types:Ae.map(function(je){return Le=je.isAny||Le,Pe+=je.name+"|",{name:je.name,typeIndex:je.index,test:je.test,isAny:je.isAny,conversion:null,conversionIndex:-1}}),name:Pe.slice(0,-1),hasAny:Le,hasConversion:!1,restParam:ce}}function x(re){const ce=re.types.map(Ze=>Ze.name),Ce=R(ce);let Ae=re.hasAny,Le=re.name;const Pe=Ce.map(function(Ze){const je=o(Ze.from);return Ae=je.isAny||Ae,Le+="|"+Ze.from,{name:Ze.from,typeIndex:je.index,test:je.test,isAny:je.isAny,conversion:Ze,conversionIndex:Ze.index}});return{types:re.types.concat(Pe),name:Le,hasAny:Ae,hasConversion:Pe.length>0,restParam:re.restParam}}function w(re){return re.typeSet||(re.typeSet=new Set,re.types.forEach(ce=>re.typeSet.add(ce.name))),re.typeSet}function N(re){const ce=[];if(typeof re!="string")throw new TypeError("Signatures must be strings");const Ce=re.trim();if(Ce==="")return ce;const Ae=Ce.split(",");for(let Le=0;Le<Ae.length;++Le){const Pe=b(Ae[Le].trim());if(Pe.restParam&&Le!==Ae.length-1)throw new SyntaxError('Unexpected rest parameter "'+Ae[Le]+'": only allowed for the last parameter');if(Pe.types.length===0)return null;ce.push(Pe)}return ce}function C(re){const ce=X(re);return ce?ce.restParam:!1}function E(re){if(!re||re.types.length===0)return iF;if(re.types.length===1)return o(re.types[0].name).test;if(re.types.length===2){const ce=o(re.types[0].name).test,Ce=o(re.types[1].name).test;return function(Le){return ce(Le)||Ce(Le)}}else{const ce=re.types.map(function(Ce){return o(Ce.name).test});return function(Ae){for(let Le=0;Le<ce.length;Le++)if(ce[Le](Ae))return!0;return!1}}}function $(re){let ce,Ce,Ae;if(C(re)){ce=Z(re).map(E);const Le=ce.length,Pe=E(X(re)),Ze=function(je){for(let tt=Le;tt<je.length;tt++)if(!Pe(je[tt]))return!1;return!0};return function(tt){for(let Qe=0;Qe<ce.length;Qe++)if(!ce[Qe](tt[Qe]))return!1;return Ze(tt)&&tt.length>=Le+1}}else return re.length===0?function(Pe){return Pe.length===0}:re.length===1?(Ce=E(re[0]),function(Pe){return Ce(Pe[0])&&Pe.length===1}):re.length===2?(Ce=E(re[0]),Ae=E(re[1]),function(Pe){return Ce(Pe[0])&&Ae(Pe[1])&&Pe.length===2}):(ce=re.map(E),function(Pe){for(let Ze=0;Ze<ce.length;Ze++)if(!ce[Ze](Pe[Ze]))return!1;return Pe.length===ce.length})}function I(re,ce){return ce<re.length?re[ce]:C(re)?X(re):null}function D(re,ce){const Ce=I(re,ce);return Ce?w(Ce):new Set}function k(re){return re.conversion===null||re.conversion===void 0}function A(re,ce){const Ce=new Set;return re.forEach(Ae=>{const Le=D(Ae.params,ce);let Pe;for(Pe of Le)Ce.add(Pe)}),Ce.has("any")?["any"]:Array.from(Ce)}function O(re,ce,Ce){let Ae,Le;const Pe=re||"unnamed";let Ze=Ce,je;for(je=0;je<ce.length;je++){const Nt=[];if(Ze.forEach(Cn=>{const U=I(Cn.params,je),fe=E(U);(je<Cn.params.length||C(Cn.params))&&fe(ce[je])&&Nt.push(Cn)}),Nt.length===0){if(Le=A(Ze,je),Le.length>0){const Cn=f(ce[je]);return Ae=new TypeError("Unexpected type of argument in function "+Pe+" (expected: "+Le.join(" or ")+", actual: "+Cn.join(" | ")+", index: "+je+")"),Ae.data={category:"wrongType",fn:Pe,index:je,actual:Cn,expected:Le},Ae}}else Ze=Nt}const tt=Ze.map(function(Nt){return C(Nt.params)?1/0:Nt.params.length});if(ce.length<Math.min.apply(null,tt))return Le=A(Ze,je),Ae=new TypeError("Too few arguments in function "+Pe+" (expected: "+Le.join(" or ")+", index: "+ce.length+")"),Ae.data={category:"tooFewArgs",fn:Pe,index:ce.length,expected:Le},Ae;const Qe=Math.max.apply(null,tt);if(ce.length>Qe)return Ae=new TypeError("Too many arguments in function "+Pe+" (expected: "+Qe+", actual: "+ce.length+")"),Ae.data={category:"tooManyArgs",fn:Pe,index:ce.length,expectedLength:Qe},Ae;const Xt=[];for(let Nt=0;Nt<ce.length;++Nt)Xt.push(f(ce[Nt]).join("|"));return Ae=new TypeError('Arguments of type "'+Xt.join(", ")+'" do not match any of the defined signatures of function '+Pe+"."),Ae.data={category:"mismatch",actual:Xt},Ae}function B(re){let ce=a.length+1;for(let Ce=0;Ce<re.types.length;Ce++)k(re.types[Ce])&&(ce=Math.min(ce,re.types[Ce].typeIndex));return ce}function z(re){let ce=s+1;for(let Ce=0;Ce<re.types.length;Ce++)k(re.types[Ce])||(ce=Math.min(ce,re.types[Ce].conversionIndex));return ce}function L(re,ce){if(re.hasAny){if(!ce.hasAny)return 1}else if(ce.hasAny)return-1;if(re.restParam){if(!ce.restParam)return 1}else if(ce.restParam)return-1;if(re.hasConversion){if(!ce.hasConversion)return 1}else if(ce.hasConversion)return-1;const Ce=B(re)-B(ce);if(Ce<0)return-1;if(Ce>0)return 1;const Ae=z(re)-z(ce);return Ae<0?-1:Ae>0?1:0}function F(re,ce){const Ce=re.params,Ae=ce.params,Le=X(Ce),Pe=X(Ae),Ze=C(Ce),je=C(Ae);if(Ze&&Le.hasAny){if(!je||!Pe.hasAny)return 1}else if(je&&Pe.hasAny)return-1;let tt=0,Qe=0,Xt;for(Xt of Ce)Xt.hasAny&&++tt,Xt.hasConversion&&++Qe;let Nt=0,Cn=0;for(Xt of Ae)Xt.hasAny&&++Nt,Xt.hasConversion&&++Cn;if(tt!==Nt)return tt-Nt;if(Ze&&Le.hasConversion){if(!je||!Pe.hasConversion)return 1}else if(je&&Pe.hasConversion)return-1;if(Qe!==Cn)return Qe-Cn;if(Ze){if(!je)return 1}else if(je)return-1;const U=(Ce.length-Ae.length)*(Ze?-1:1);if(U!==0)return U;const fe=[];let Ie=0;for(let At=0;At<Ce.length;++At){const kt=L(Ce[At],Ae[At]);fe.push(kt),Ie+=kt}if(Ie!==0)return Ie;let qe;for(qe of fe)if(qe!==0)return qe;return 0}function R(re){if(re.length===0)return[];const ce=re.map(o);re.length>1&&ce.sort((Le,Pe)=>Le.index-Pe.index);let Ce=ce[0].conversionsTo;if(re.length===1)return Ce;Ce=Ce.concat([]);const Ae=new Set(re);for(let Le=1;Le<ce.length;++Le){let Pe;for(Pe of ce[Le].conversionsTo)Ae.has(Pe.from)||(Ce.push(Pe),Ae.add(Pe.from))}return Ce}function q(re,ce){let Ce=ce;if(re.some(Le=>Le.hasConversion)){const Le=C(re),Pe=re.map(M);Ce=function(){const je=[],tt=Le?arguments.length-1:arguments.length;for(let Qe=0;Qe<tt;Qe++)je[Qe]=Pe[Qe](arguments[Qe]);return Le&&(je[tt]=arguments[tt].map(Pe[tt])),ce.apply(this,je)}}let Ae=Ce;if(C(re)){const Le=re.length-1;Ae=function(){return Ce.apply(this,ae(arguments,0,Le).concat([ae(arguments,Le)]))}}return Ae}function M(re){let ce,Ce,Ae,Le;const Pe=[],Ze=[];switch(re.types.forEach(function(je){je.conversion&&(Pe.push(o(je.conversion.from).test),Ze.push(je.conversion.convert))}),Ze.length){case 0:return function(tt){return tt};case 1:return ce=Pe[0],Ae=Ze[0],function(tt){return ce(tt)?Ae(tt):tt};case 2:return ce=Pe[0],Ce=Pe[1],Ae=Ze[0],Le=Ze[1],function(tt){return ce(tt)?Ae(tt):Ce(tt)?Le(tt):tt};default:return function(tt){for(let Qe=0;Qe<Ze.length;Qe++)if(Pe[Qe](tt))return Ze[Qe](tt);return tt}}}function G(re){function ce(Ce,Ae,Le){if(Ae<Ce.length){const Pe=Ce[Ae];let Ze=[];if(Pe.restParam){const je=Pe.types.filter(k);je.length<Pe.types.length&&Ze.push({types:je,name:"..."+je.map(tt=>tt.name).join("|"),hasAny:je.some(tt=>tt.isAny),hasConversion:!1,restParam:!0}),Ze.push(Pe)}else Ze=Pe.types.map(function(je){return{types:[je],name:je.name,hasAny:je.isAny,hasConversion:je.conversion,restParam:!1}});return he(Ze,function(je){return ce(Ce,Ae+1,Le.concat([je]))})}else return[Le]}return ce(re,0,[])}function V(re,ce){const Ce=Math.max(re.length,ce.length);for(let je=0;je<Ce;je++){const tt=D(re,je),Qe=D(ce,je);let Xt=!1,Nt;for(Nt of Qe)if(tt.has(Nt)){Xt=!0;break}if(!Xt)return!1}const Ae=re.length,Le=ce.length,Pe=C(re),Ze=C(ce);return Pe?Ze?Ae===Le:Le>=Ae:Ze?Ae>=Le:Ae===Le}function H(re){return re.map(ce=>ve(ce)?Q(ce.referToSelf.callback):se(ce)?Ee(ce.referTo.references,ce.referTo.callback):ce)}function j(re,ce,Ce){const Ae=[];let Le;for(Le of re){let Pe=Ce[Le];if(typeof Pe!="number")throw new TypeError('No definition for referenced signature "'+Le+'"');if(Pe=ce[Pe],typeof Pe!="function")return!1;Ae.push(Pe)}return Ae}function ne(re,ce,Ce){const Ae=H(re),Le=new Array(Ae.length).fill(!1);let Pe=!0;for(;Pe;){Pe=!1;let Ze=!0;for(let je=0;je<Ae.length;++je){if(Le[je])continue;const tt=Ae[je];if(ve(tt))Ae[je]=tt.referToSelf.callback(Ce),Ae[je].referToSelf=tt.referToSelf,Le[je]=!0,Ze=!1;else if(se(tt)){const Qe=j(tt.referTo.references,Ae,ce);Qe?(Ae[je]=tt.referTo.callback.apply(this,Qe),Ae[je].referTo=tt.referTo,Le[je]=!0,Ze=!1):Pe=!0}}if(Ze&&Pe)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return Ae}function ue(re){const ce=/\bthis(\(|\.signatures\b)/;Object.keys(re).forEach(Ce=>{const Ae=re[Ce];if(ce.test(Ae.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function te(re,ce){if(i.createCount++,Object.keys(ce).length===0)throw new SyntaxError("No signatures provided");i.warnAgainstDeprecatedThis&&ue(ce);const Ce=[],Ae=[],Le={},Pe=[];let Ze;for(Ze in ce){if(!Object.prototype.hasOwnProperty.call(ce,Ze))continue;const Rt=N(Ze);if(!Rt)continue;Ce.forEach(function(no){if(V(no,Rt))throw new TypeError('Conflicting signatures "'+y(no)+'" and "'+y(Rt)+'".')}),Ce.push(Rt);const xa=Ae.length;Ae.push(ce[Ze]);const $p=Rt.map(x);let Vl;for(Vl of G($p)){const no=y(Vl);Pe.push({params:Vl,name:no,fn:xa}),Vl.every(dx=>!dx.hasConversion)&&(Le[no]=xa)}}Pe.sort(F);const je=ne(Ae,Le,ql);let tt;for(tt in Le)Object.prototype.hasOwnProperty.call(Le,tt)&&(Le[tt]=je[Le[tt]]);const Qe=[],Xt=new Map;for(tt of Pe)Xt.has(tt.name)||(tt.fn=je[tt.fn],Qe.push(tt),Xt.set(tt.name,tt));const Nt=Qe[0]&&Qe[0].params.length<=2&&!C(Qe[0].params),Cn=Qe[1]&&Qe[1].params.length<=2&&!C(Qe[1].params),U=Qe[2]&&Qe[2].params.length<=2&&!C(Qe[2].params),fe=Qe[3]&&Qe[3].params.length<=2&&!C(Qe[3].params),Ie=Qe[4]&&Qe[4].params.length<=2&&!C(Qe[4].params),qe=Qe[5]&&Qe[5].params.length<=2&&!C(Qe[5].params),At=Nt&&Cn&&U&&fe&&Ie&&qe;for(let Rt=0;Rt<Qe.length;++Rt)Qe[Rt].test=$(Qe[Rt].params);const kt=Nt?E(Qe[0].params[0]):Zs,lr=Cn?E(Qe[1].params[0]):Zs,pf=U?E(Qe[2].params[0]):Zs,Zg=fe?E(Qe[3].params[0]):Zs,ev=Ie?E(Qe[4].params[0]):Zs,tv=qe?E(Qe[5].params[0]):Zs,nv=Nt?E(Qe[0].params[1]):Zs,Tp=Cn?E(Qe[1].params[1]):Zs,rv=U?E(Qe[2].params[1]):Zs,zl=fe?E(Qe[3].params[1]):Zs,Dp=Ie?E(Qe[4].params[1]):Zs,Wl=qe?E(Qe[5].params[1]):Zs;for(let Rt=0;Rt<Qe.length;++Rt)Qe[Rt].implementation=q(Qe[Rt].params,Qe[Rt].fn);const ix=Nt?Qe[0].implementation:Wf,Ul=Cn?Qe[1].implementation:Wf,hf=U?Qe[2].implementation:Wf,mf=fe?Qe[3].implementation:Wf,Ap=Ie?Qe[4].implementation:Wf,ox=qe?Qe[5].implementation:Wf,ux=Nt?Qe[0].params.length:-1,lx=Cn?Qe[1].params.length:-1,Ro=U?Qe[2].params.length:-1,av=fe?Qe[3].params.length:-1,sv=Ie?Qe[4].params.length:-1,cx=qe?Qe[5].params.length:-1,iv=At?6:0,ov=Qe.length,uv=Qe.map(Rt=>Rt.test),lv=Qe.map(Rt=>Rt.implementation),fx=function(){for(let xa=iv;xa<ov;xa++)if(uv[xa](arguments))return lv[xa].apply(this,arguments);return i.onMismatch(re,arguments,Qe)};function ql(Rt,xa){return arguments.length===ux&&kt(Rt)&&nv(xa)?ix.apply(this,arguments):arguments.length===lx&&lr(Rt)&&Tp(xa)?Ul.apply(this,arguments):arguments.length===Ro&&pf(Rt)&&rv(xa)?hf.apply(this,arguments):arguments.length===av&&Zg(Rt)&&zl(xa)?mf.apply(this,arguments):arguments.length===sv&&ev(Rt)&&Dp(xa)?Ap.apply(this,arguments):arguments.length===cx&&tv(Rt)&&Wl(xa)?ox.apply(this,arguments):fx.apply(this,arguments)}try{Object.defineProperty(ql,"name",{value:re})}catch{}return ql.signatures=Le,ql._typedFunctionData={signatures:Qe,signatureMap:Xt},ql}function ie(re,ce,Ce){throw O(re,ce,Ce)}function Z(re){return ae(re,0,re.length-1)}function X(re){return re[re.length-1]}function ae(re,ce,Ce){return Array.prototype.slice.call(re,ce,Ce)}function pe(re,ce){for(let Ce=0;Ce<re.length;Ce++)if(ce(re[Ce]))return re[Ce]}function he(re,ce){return Array.prototype.concat.apply([],re.map(ce))}function Ne(){const re=Z(arguments).map(Ce=>y(N(Ce))),ce=X(arguments);if(typeof ce!="function")throw new TypeError("Callback function expected as last argument");return Ee(re,ce)}function Ee(re,ce){return{referTo:{references:re,callback:ce}}}function Q(re){if(typeof re!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:re}}}function se(re){return re&&typeof re.referTo=="object"&&Array.isArray(re.referTo.references)&&typeof re.referTo.callback=="function"}function ve(re){return re&&typeof re.referToSelf=="object"&&typeof re.referToSelf.callback=="function"}function xe(re,ce){if(!re)return ce;if(ce&&ce!==re){const Ce=new Error("Function names do not match (expected: "+re+", actual: "+ce+")");throw Ce.data={actual:ce,expected:re},Ce}return re}function Re(re){let ce;for(const Ce in re)Object.prototype.hasOwnProperty.call(re,Ce)&&(d(re[Ce])||typeof re[Ce].signature=="string")&&(ce=xe(ce,re[Ce].name));return ce}function Me(re,ce){let Ce;for(Ce in ce)if(Object.prototype.hasOwnProperty.call(ce,Ce)){if(Ce in re&&ce[Ce]!==re[Ce]){const Ae=new Error('Signature "'+Ce+'" is defined twice');throw Ae.data={signature:Ce,sourceFunction:ce[Ce],destFunction:re[Ce]},Ae}re[Ce]=ce[Ce]}}const He=i;i=function(re){const ce=typeof re=="string",Ce=ce?1:0;let Ae=ce?re:"";const Le={};for(let Pe=Ce;Pe<arguments.length;++Pe){const Ze=arguments[Pe];let je={},tt;if(typeof Ze=="function"?(tt=Ze.name,typeof Ze.signature=="string"?je[Ze.signature]=Ze:d(Ze)&&(je=Ze.signatures)):t(Ze)&&(je=Ze,ce||(tt=Re(Ze))),Object.keys(je).length===0){const Qe=new TypeError("Argument to 'typed' at index "+Pe+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Qe.data={index:Pe,argument:Ze},Qe}ce||(Ae=xe(Ae,tt)),Me(Le,je)}return te(Ae||"",Le)},i.create=tq,i.createCount=He.createCount,i.onMismatch=ie,i.throwMismatchError=ie,i.createError=O,i.clear=l,i.clearConversions=c,i.addTypes=u,i._findType=o,i.referTo=Ne,i.referToSelf=Q,i.convert=v,i.findSignature=h,i.find=m,i.isTypedFunction=d,i.warnAgainstDeprecatedThis=!0,i.addType=function(re,ce){let Ce="any";ce!==!1&&r.has("Object")&&(Ce="Object"),i.addTypes([re],Ce)};function Je(re){if(!re||typeof re.from!="string"||typeof re.to!="string"||typeof re.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(re.to===re.from)throw new SyntaxError('Illegal to define conversion from "'+re.from+'" to itself.')}return i.addConversion=function(re){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Je(re);const Ce=o(re.to),Ae=Ce.conversionsTo.find(Le=>Le.from===re.from);if(Ae)if(ce&&ce.override)i.removeConversion({from:Ae.from,to:re.to,convert:Ae.convert});else throw new Error('There is already a conversion from "'+re.from+'" to "'+Ce.name+'"');Ce.conversionsTo.push({from:re.from,convert:re.convert,index:s++})},i.addConversions=function(re,ce){re.forEach(Ce=>i.addConversion(Ce,ce))},i.removeConversion=function(re){Je(re);const ce=o(re.to),Ce=pe(ce.conversionsTo,Le=>Le.from===re.from);if(!Ce)throw new Error("Attempt to remove nonexistent conversion from "+re.from+" to "+re.to);if(Ce.convert!==re.convert)throw new Error("Conversion to remove does not match existing conversion");const Ae=ce.conversionsTo.indexOf(Ce);ce.conversionsTo.splice(Ae,1)},i.resolve=function(re,ce){if(!d(re))throw new TypeError(oF);const Ce=re._typedFunctionData.signatures;for(let Ae=0;Ae<Ce.length;++Ae)if(Ce[Ae].test(ce))return Ce[Ae];return null},i}const ob=tq();function ee(t,e,n,r){function a(s){var i=RAe(s,e.map(zAe));return BAe(t,e,s),n(i)}return a.isFactory=!0,a.fn=t,a.dependencies=e.slice().sort(),r&&(a.meta=r),a}function BAe(t,e,n){var r=e.filter(s=>!LAe(s)).every(s=>n[s]!==void 0);if(!r){var a=e.filter(s=>n[s]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(a.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function LAe(t){return t&&t[0]==="?"}function zAe(t){return t&&t[0]==="?"?t.slice(1):t}function wt(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function WAe(t){return/^-?\d+$/.test(t)}function Il(t,e){return e.number==="bigint"&&!WAe(t)?e.numberFallback:e.number}var Gu=Math.sign||function(t){return t>0?1:t<0?-1:0},UAe=Math.log2||function(e){return Math.log(e)/Math.LN2},qAe=Math.log10||function(e){return Math.log(e)/Math.LN10},VAe=Math.log1p||function(t){return Math.log(t+1)},jAe=Math.cbrt||function(e){if(e===0)return e;var n=e<0,r;return n&&(e=-e),isFinite(e)?(r=Math.exp(Math.log(e)/3),r=(e/(r*r)+2*r)/3):r=e,n?-r:r},HAe=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function MS(t,e,n){var r={2:"0b",8:"0o",16:"0x"},a=r[e],s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!wt(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!wt(t))throw new Error("Value must be an integer");t<0&&(t=t+2**n),s="i".concat(n)}var i="";return t<0&&(t=-t,i="-"),"".concat(i).concat(a).concat(t.toString(e)).concat(s)}function Sc(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:n,precision:r,wordSize:a}=nq(e);switch(n){case"fixed":return rq(t,r);case"exponential":return aq(t,r);case"engineering":return GAe(t,r);case"bin":return MS(t,2,a);case"oct":return MS(t,8,a);case"hex":return MS(t,16,a);case"auto":return KAe(t,r,e).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],i=arguments[4];return s!=="."?s+i:i});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function nq(t){var e="auto",n,r;if(t!==void 0)if(jt(t))n=t;else if(Gt(t))n=t.toNumber();else if(Fw(t))t.precision!==void 0&&(n=uF(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(r=uF(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:n,wordSize:r}}function Rg(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],a=parseFloat(e[4]||"0"),s=r.indexOf(".");a+=s!==-1?s-1:r.length-1;var i=r.replace(".","").replace(/^0*/,function(o){return a-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return i.length===0&&(i.push(0),a++),{sign:n,coefficients:i,exponent:a}}function GAe(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=Rg(t),r=Mw(n,e),a=r.exponent,s=r.coefficients,i=a%3===0?a:a<0?a-3-a%3:a-a%3;if(jt(e))for(;e>s.length||a-i+1>s.length;)s.push(0);else for(var o=Math.abs(a-i)-(s.length-1),u=0;u<o;u++)s.push(0);for(var l=Math.abs(a-i),c=1;l>0;)c++,l--;var f=s.slice(c).join(""),d=jt(e)&&f.length||f.match(/[1-9]/)?"."+f:"",h=s.slice(0,c).join("")+d+"e"+(a>=0?"+":"")+i.toString();return r.sign+h}function rq(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=Rg(t),r=typeof e=="number"?Mw(n,n.exponent+1+e):n,a=r.coefficients,s=r.exponent+1,i=s+(e||0);return a.length<i&&(a=a.concat(pd(i-a.length))),s<0&&(a=pd(-s+1).concat(a),s=1),s<a.length&&a.splice(s,0,s===0?"0.":"."),r.sign+a.join("")}function aq(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=Rg(t),r=e?Mw(n,e):n,a=r.coefficients,s=r.exponent;a.length<e&&(a=a.concat(pd(e-a.length)));var i=a.shift();return r.sign+i+(a.length>0?"."+a.join(""):"")+"e"+(s>=0?"+":"")+s}function KAe(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var r=lF(n==null?void 0:n.lowerExp,-3),a=lF(n==null?void 0:n.upperExp,5),s=Rg(t),i=e?Mw(s,e):s;if(i.exponent<r||i.exponent>=a)return aq(t,e);var o=i.coefficients,u=i.exponent;o.length<e&&(o=o.concat(pd(e-o.length))),o=o.concat(pd(u-o.length+1+(o.length<e?e-o.length:0))),o=pd(-u).concat(o);var l=u>0?u:0;return l<o.length-1&&o.splice(l+1,0,"."),i.sign+o.join("")}function Mw(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e){var a=r.splice(e,r.length-e);if(a[0]>=5){var s=e-1;for(r[s]++;r[s]===10;)r.pop(),s===0&&(r.unshift(0),n.exponent++,s++),s--,r[s]++}}return n}function pd(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function XAe(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function ga(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!isFinite(t)||!isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(n*Math.max(Math.abs(t),Math.abs(e)),r)}var YAe=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},QAe=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},JAe=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},ZAe=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},e$e=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},t$e=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};function n$e(t,e){var n=t>0?!0:t<0?!1:1/t===1/0,r=e>0?!0:e<0?!1:1/e===1/0;return n^r?-t:t}function uF(t,e){if(jt(t))return t;if(Gt(t))return t.toNumber();e()}function lF(t,e){return jt(t)?t:Gt(t)?t.toNumber():e}var sq=function(){return sq=ob.create,ob},r$e=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],a$e=ee("typed",r$e,function(e){var{BigNumber:n,Complex:r,DenseMatrix:a,Fraction:s}=e,i=sq();return i.clear(),i.addTypes([{name:"number",test:jt},{name:"Complex",test:eu},{name:"BigNumber",test:Gt},{name:"bigint",test:wAe},{name:"Fraction",test:Og},{name:"Unit",test:si},{name:"identifier",test:o=>ka&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:ka},{name:"Chain",test:ZU},{name:"Array",test:An},{name:"Matrix",test:$t},{name:"DenseMatrix",test:ib},{name:"SparseMatrix",test:vc},{name:"Range",test:RA},{name:"Index",test:Ow},{name:"boolean",test:xAe},{name:"ResultSet",test:SAe},{name:"Help",test:QU},{name:"function",test:NAe},{name:"Date",test:CAe},{name:"RegExp",test:EAe},{name:"null",test:TAe},{name:"undefined",test:DAe},{name:"AccessorNode",test:Lc},{name:"ArrayNode",test:ai},{name:"AssignmentNode",test:AAe},{name:"BlockNode",test:$Ae},{name:"ConditionalNode",test:kAe},{name:"ConstantNode",test:cn},{name:"FunctionNode",test:ml},{name:"FunctionAssignmentNode",test:Fg},{name:"IndexNode",test:fp},{name:"Node",test:$n},{name:"ObjectNode",test:Rw},{name:"OperatorNode",test:br},{name:"ParenthesisNode",test:lu},{name:"RangeNode",test:IAe},{name:"RelationalNode",test:_Ae},{name:"SymbolNode",test:ea},{name:"Map",test:JU},{name:"Object",test:Fw}]),i.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(n||Fy(u),XAe(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new n(u)}},{from:"number",to:"Complex",convert:function(u){return r||Ry(u),new r(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return r||Ry(u),new r(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return n||Fy(u),new n(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return s||My(u),new s(u)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return r||Ry(u),new r(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){s||My(u);var l=new s(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){n||Fy(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){s||My(u);try{return new s(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){r||Ry(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return n||Fy(u),new n(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return s||My(u),new s(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return a||s$e(),new a(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),i.onMismatch=(o,u,l)=>{var c=i.createError(o,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&wi(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},i.onMismatch=(o,u,l)=>{var c=i.createError(o,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&wi(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},i});function Fy(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Ry(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function s$e(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function My(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var i$e="ResultSet",o$e=[],u$e=ee(i$e,o$e,()=>{function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0});/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var td=9e15,_l=1e9,WC="0123456789abcdef",ub="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",lb="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",UC={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-td,maxE:td,crypto:!1},iq,Yo,Ut=!0,Pw="[DecimalError] ",gl=Pw+"Invalid argument: ",oq=Pw+"Precision limit exceeded",uq=Pw+"crypto unavailable",lq="[object Decimal]",Fa=Math.floor,Mr=Math.pow,l$e=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,c$e=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,f$e=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,cq=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ui=1e7,Mt=7,d$e=9007199254740991,p$e=ub.length-1,qC=lb.length-1,Ge={toStringTag:lq};Ge.absoluteValue=Ge.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Dt(t)};Ge.ceil=function(){return Dt(new this.constructor(this),this.e+1,2)};Ge.clampedTo=Ge.clamp=function(t,e){var n,r=this,a=r.constructor;if(t=new a(t),e=new a(e),!t.s||!e.s)return new a(NaN);if(t.gt(e))throw Error(gl+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new a(r)};Ge.comparedTo=Ge.cmp=function(t){var e,n,r,a,s=this,i=s.d,o=(t=new s.constructor(t)).d,u=s.s,l=t.s;if(!i||!o)return!u||!l?NaN:u!==l?u:i===o?0:!i^u<0?1:-1;if(!i[0]||!o[0])return i[0]?u:o[0]?-l:0;if(u!==l)return u;if(s.e!==t.e)return s.e>t.e^u<0?1:-1;for(r=i.length,a=o.length,e=0,n=r<a?r:a;e<n;++e)if(i[e]!==o[e])return i[e]>o[e]^u<0?1:-1;return r===a?0:r>a^u<0?1:-1};Ge.cosine=Ge.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Mt,r.rounding=1,n=h$e(r,mq(r,n)),r.precision=t,r.rounding=e,Dt(Yo==2||Yo==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};Ge.cubeRoot=Ge.cbrt=function(){var t,e,n,r,a,s,i,o,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(Ut=!1,s=c.s*Mr(c.s*c,1/3),!s||Math.abs(s)==1/0?(n=fa(c.d),t=c.e,(s=(t-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=Mr(n,1/3),t=Fa((t+1)/3)-(t%3==(t<0?-1:2)),s==1/0?n="5e"+t:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new f(n),r.s=c.s):r=new f(s.toString()),i=(t=f.precision)+3;;)if(o=r,u=o.times(o).times(o),l=u.plus(c),r=Un(l.plus(c).times(o),l.plus(u),i+2,1),fa(o.d).slice(0,i)===(n=fa(r.d)).slice(0,i))if(n=n.slice(i-3,i+1),n=="9999"||!a&&n=="4999"){if(!a&&(Dt(o,t+1,0),o.times(o).times(o).eq(c))){r=o;break}i+=4,a=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Dt(r,t+1,1),e=!r.times(r).times(r).eq(c));break}return Ut=!0,Dt(r,t,f.rounding,e)};Ge.decimalPlaces=Ge.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Fa(this.e/Mt))*Mt,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};Ge.dividedBy=Ge.div=function(t){return Un(this,new this.constructor(t))};Ge.dividedToIntegerBy=Ge.divToInt=function(t){var e=this,n=e.constructor;return Dt(Un(e,new n(t),0,1,1),n.precision,n.rounding)};Ge.equals=Ge.eq=function(t){return this.cmp(t)===0};Ge.floor=function(){return Dt(new this.constructor(this),this.e+1,3)};Ge.greaterThan=Ge.gt=function(t){return this.cmp(t)>0};Ge.greaterThanOrEqualTo=Ge.gte=function(t){var e=this.cmp(t);return e==1||e===0};Ge.hyperbolicCosine=Ge.cosh=function(){var t,e,n,r,a,s=this,i=s.constructor,o=new i(1);if(!s.isFinite())return new i(s.s?1/0:NaN);if(s.isZero())return o;n=i.precision,r=i.rounding,i.precision=n+Math.max(s.e,s.sd())+4,i.rounding=1,a=s.d.length,a<32?(t=Math.ceil(a/3),e=(1/Lw(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),s=Rd(i,1,s.times(e),new i(1),!0);for(var u,l=t,c=new i(8);l--;)u=s.times(s),s=o.minus(u.times(c.minus(u.times(c))));return Dt(s,i.precision=n,i.rounding=r,!0)};Ge.hyperbolicSine=Ge.sinh=function(){var t,e,n,r,a=this,s=a.constructor;if(!a.isFinite()||a.isZero())return new s(a);if(e=s.precision,n=s.rounding,s.precision=e+Math.max(a.e,a.sd())+4,s.rounding=1,r=a.d.length,r<3)a=Rd(s,2,a,a,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,a=a.times(1/Lw(5,t)),a=Rd(s,2,a,a,!0);for(var i,o=new s(5),u=new s(16),l=new s(20);t--;)i=a.times(a),a=a.times(o.plus(i.times(u.times(i).plus(l))))}return s.precision=e,s.rounding=n,Dt(a,e,n,!0)};Ge.hyperbolicTangent=Ge.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,Un(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};Ge.inverseCosine=Ge.acos=function(){var t,e=this,n=e.constructor,r=e.abs().cmp(1),a=n.precision,s=n.rounding;return r!==-1?r===0?e.isNeg()?Li(n,a,s):new n(0):new n(NaN):e.isZero()?Li(n,a+4,s).times(.5):(n.precision=a+6,n.rounding=1,e=e.asin(),t=Li(n,a+4,s).times(.5),n.precision=a,n.rounding=s,t.minus(e))};Ge.inverseHyperbolicCosine=Ge.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Ut=!1,n=n.times(n).minus(1).sqrt().plus(n),Ut=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};Ge.inverseHyperbolicSine=Ge.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Ut=!1,n=n.times(n).plus(1).sqrt().plus(n),Ut=!0,r.precision=t,r.rounding=e,n.ln())};Ge.inverseHyperbolicTangent=Ge.atanh=function(){var t,e,n,r,a=this,s=a.constructor;return a.isFinite()?a.e>=0?new s(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(t=s.precision,e=s.rounding,r=a.sd(),Math.max(r,t)<2*-a.e-1?Dt(new s(a),t,e,!0):(s.precision=n=r-a.e,a=Un(a.plus(1),new s(1).minus(a),n+t,1),s.precision=t+4,s.rounding=1,a=a.ln(),s.precision=t,s.rounding=e,a.times(.5))):new s(NaN)};Ge.inverseSine=Ge.asin=function(){var t,e,n,r,a=this,s=a.constructor;return a.isZero()?new s(a):(e=a.abs().cmp(1),n=s.precision,r=s.rounding,e!==-1?e===0?(t=Li(s,n+4,r).times(.5),t.s=a.s,t):new s(NaN):(s.precision=n+6,s.rounding=1,a=a.div(new s(1).minus(a.times(a)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,a.times(2)))};Ge.inverseTangent=Ge.atan=function(){var t,e,n,r,a,s,i,o,u,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=qC)return i=Li(c,f+4,d).times(.25),i.s=l.s,i}else{if(!l.s)return new c(NaN);if(f+4<=qC)return i=Li(c,f+4,d).times(.5),i.s=l.s,i}for(c.precision=o=f+10,c.rounding=1,n=Math.min(28,o/Mt+2|0),t=n;t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(Ut=!1,e=Math.ceil(o/Mt),r=1,u=l.times(l),i=new c(l),a=l;t!==-1;)if(a=a.times(u),s=i.minus(a.div(r+=2)),a=a.times(u),i=s.plus(a.div(r+=2)),i.d[e]!==void 0)for(t=e;i.d[t]===s.d[t]&&t--;);return n&&(i=i.times(2<<n-1)),Ut=!0,Dt(i,c.precision=f,c.rounding=d,!0)};Ge.isFinite=function(){return!!this.d};Ge.isInteger=Ge.isInt=function(){return!!this.d&&Fa(this.e/Mt)>this.d.length-2};Ge.isNaN=function(){return!this.s};Ge.isNegative=Ge.isNeg=function(){return this.s<0};Ge.isPositive=Ge.isPos=function(){return this.s>0};Ge.isZero=function(){return!!this.d&&this.d[0]===0};Ge.lessThan=Ge.lt=function(t){return this.cmp(t)<0};Ge.lessThanOrEqualTo=Ge.lte=function(t){return this.cmp(t)<1};Ge.logarithm=Ge.log=function(t){var e,n,r,a,s,i,o,u,l=this,c=l.constructor,f=c.precision,d=c.rounding,h=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)s=!0;else{for(a=n[0];a%10===0;)a/=10;s=a!==1}if(Ut=!1,o=f+h,i=Ku(l,o),r=e?cb(c,o+10):Ku(t,o),u=Un(i,r,o,1),rm(u.d,a=f,d))do if(o+=10,i=Ku(l,o),r=e?cb(c,o+10):Ku(t,o),u=Un(i,r,o,1),!s){+fa(u.d).slice(a+1,a+15)+1==1e14&&(u=Dt(u,f+1,0));break}while(rm(u.d,a+=10,d));return Ut=!0,Dt(u,f,d)};Ge.minus=Ge.sub=function(t){var e,n,r,a,s,i,o,u,l,c,f,d,h=this,m=h.constructor;if(t=new m(t),!h.d||!t.d)return!h.s||!t.s?t=new m(NaN):h.d?t.s=-t.s:t=new m(t.d||h.s!==t.s?h:NaN),t;if(h.s!=t.s)return t.s=-t.s,h.plus(t);if(l=h.d,d=t.d,o=m.precision,u=m.rounding,!l[0]||!d[0]){if(d[0])t.s=-t.s;else if(l[0])t=new m(h);else return new m(u===3?-0:0);return Ut?Dt(t,o,u):t}if(n=Fa(t.e/Mt),c=Fa(h.e/Mt),l=l.slice(),s=c-n,s){for(f=s<0,f?(e=l,s=-s,i=d.length):(e=d,n=c,i=l.length),r=Math.max(Math.ceil(o/Mt),i)+2,s>r&&(s=r,e.length=1),e.reverse(),r=s;r--;)e.push(0);e.reverse()}else{for(r=l.length,i=d.length,f=r<i,f&&(i=r),r=0;r<i;r++)if(l[r]!=d[r]){f=l[r]<d[r];break}s=0}for(f&&(e=l,l=d,d=e,t.s=-t.s),i=l.length,r=d.length-i;r>0;--r)l[i++]=0;for(r=d.length;r>s;){if(l[--r]<d[r]){for(a=r;a&&l[--a]===0;)l[a]=Ui-1;--l[a],l[r]+=Ui}l[r]-=d[r]}for(;l[--i]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=Bw(l,n),Ut?Dt(t,o,u):t):new m(u===3?-0:0)};Ge.modulo=Ge.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Dt(new r(n),r.precision,r.rounding):(Ut=!1,r.modulo==9?(e=Un(n,t.abs(),0,3,1),e.s*=t.s):e=Un(n,t,0,r.modulo,1),e=e.times(t),Ut=!0,n.minus(e))};Ge.naturalExponential=Ge.exp=function(){return VC(this)};Ge.naturalLogarithm=Ge.ln=function(){return Ku(this)};Ge.negated=Ge.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Dt(t)};Ge.plus=Ge.add=function(t){var e,n,r,a,s,i,o,u,l,c,f=this,d=f.constructor;if(t=new d(t),!f.d||!t.d)return!f.s||!t.s?t=new d(NaN):f.d||(t=new d(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(l=f.d,c=t.d,o=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(t=new d(f)),Ut?Dt(t,o,u):t;if(s=Fa(f.e/Mt),r=Fa(t.e/Mt),l=l.slice(),a=s-r,a){for(a<0?(n=l,a=-a,i=c.length):(n=c,r=s,i=l.length),s=Math.ceil(o/Mt),i=s>i?s+1:i+1,a>i&&(a=i,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(i=l.length,a=c.length,i-a<0&&(a=i,n=c,c=l,l=n),e=0;a;)e=(l[--a]=l[a]+c[a]+e)/Ui|0,l[a]%=Ui;for(e&&(l.unshift(e),++r),i=l.length;l[--i]==0;)l.pop();return t.d=l,t.e=Bw(l,r),Ut?Dt(t,o,u):t};Ge.precision=Ge.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(gl+t);return n.d?(e=fq(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};Ge.round=function(){var t=this,e=t.constructor;return Dt(new e(t),t.e+1,e.rounding)};Ge.sine=Ge.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Mt,r.rounding=1,n=g$e(r,mq(r,n)),r.precision=t,r.rounding=e,Dt(Yo>2?n.neg():n,t,e,!0)):new r(NaN)};Ge.squareRoot=Ge.sqrt=function(){var t,e,n,r,a,s,i=this,o=i.d,u=i.e,l=i.s,c=i.constructor;if(l!==1||!o||!o[0])return new c(!l||l<0&&(!o||o[0])?NaN:o?i:1/0);for(Ut=!1,l=Math.sqrt(+i),l==0||l==1/0?(e=fa(o),(e.length+u)%2==0&&(e+="0"),l=Math.sqrt(e),u=Fa((u+1)/2)-(u<0||u%2),l==1/0?e="5e"+u:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),r=new c(e)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(s=r,r=s.plus(Un(i,s,n+2,1)).times(.5),fa(s.d).slice(0,n)===(e=fa(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!a&&e=="4999"){if(!a&&(Dt(s,u+1,0),s.times(s).eq(i))){r=s;break}n+=4,a=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Dt(r,u+1,1),t=!r.times(r).eq(i));break}return Ut=!0,Dt(r,u,c.rounding,t)};Ge.tangent=Ge.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=Un(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Dt(Yo==2||Yo==4?n.neg():n,t,e,!0)):new r(NaN)};Ge.times=Ge.mul=function(t){var e,n,r,a,s,i,o,u,l,c=this,f=c.constructor,d=c.d,h=(t=new f(t)).d;if(t.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!t.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?t.s/0:t.s*0);for(n=Fa(c.e/Mt)+Fa(t.e/Mt),u=d.length,l=h.length,u<l&&(s=d,d=h,h=s,i=u,u=l,l=i),s=[],i=u+l,r=i;r--;)s.push(0);for(r=l;--r>=0;){for(e=0,a=u+r;a>r;)o=s[a]+h[r]*d[a-r-1]+e,s[a--]=o%Ui|0,e=o/Ui|0;s[a]=(s[a]+e)%Ui|0}for(;!s[--i];)s.pop();return e?++n:s.shift(),t.d=s,t.e=Bw(s,n),Ut?Dt(t,f.precision,f.rounding):t};Ge.toBinary=function(t,e){return MA(this,2,t,e)};Ge.toDecimalPlaces=Ge.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ns(t,0,_l),e===void 0?e=r.rounding:Ns(e,0,8),Dt(n,t+n.e+1,e))};Ge.toExponential=function(t,e){var n,r=this,a=r.constructor;return t===void 0?n=To(r,!0):(Ns(t,0,_l),e===void 0?e=a.rounding:Ns(e,0,8),r=Dt(new a(r),t+1,e),n=To(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};Ge.toFixed=function(t,e){var n,r,a=this,s=a.constructor;return t===void 0?n=To(a):(Ns(t,0,_l),e===void 0?e=s.rounding:Ns(e,0,8),r=Dt(new s(a),t+a.e+1,e),n=To(r,!1,t+r.e+1)),a.isNeg()&&!a.isZero()?"-"+n:n};Ge.toFraction=function(t){var e,n,r,a,s,i,o,u,l,c,f,d,h=this,m=h.d,v=h.constructor;if(!m)return new v(h);if(l=n=new v(1),r=u=new v(0),e=new v(r),s=e.e=fq(m)-h.e-1,i=s%Mt,e.d[0]=Mr(10,i<0?Mt+i:i),t==null)t=s>0?e:l;else{if(o=new v(t),!o.isInt()||o.lt(l))throw Error(gl+o);t=o.gt(e)?s>0?e:l:o}for(Ut=!1,o=new v(fa(m)),c=v.precision,v.precision=s=m.length*Mt*2;f=Un(o,e,0,1,1),a=n.plus(f.times(r)),a.cmp(t)!=1;)n=r,r=a,a=l,l=u.plus(f.times(a)),u=a,a=e,e=o.minus(f.times(a)),o=a;return a=Un(t.minus(n),r,0,1,1),u=u.plus(a.times(l)),n=n.plus(a.times(r)),u.s=l.s=h.s,d=Un(l,r,s,1).minus(h).abs().cmp(Un(u,n,s,1).minus(h).abs())<1?[l,r]:[u,n],v.precision=c,Ut=!0,d};Ge.toHexadecimal=Ge.toHex=function(t,e){return MA(this,16,t,e)};Ge.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:Ns(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(Ut=!1,n=Un(n,t,0,e,1).times(t),Ut=!0,Dt(n)):(t.s=n.s,n=t),n};Ge.toNumber=function(){return+this};Ge.toOctal=function(t,e){return MA(this,8,t,e)};Ge.toPower=Ge.pow=function(t){var e,n,r,a,s,i,o=this,u=o.constructor,l=+(t=new u(t));if(!o.d||!t.d||!o.d[0]||!t.d[0])return new u(Mr(+o,l));if(o=new u(o),o.eq(1))return o;if(r=u.precision,s=u.rounding,t.eq(1))return Dt(o,r,s);if(e=Fa(t.e/Mt),e>=t.d.length-1&&(n=l<0?-l:l)<=d$e)return a=dq(u,o,n,r),t.s<0?new u(1).div(a):Dt(a,r,s);if(i=o.s,i<0){if(e<t.d.length-1)return new u(NaN);if(t.d[e]&1||(i=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=i,o}return n=Mr(+o,l),e=n==0||!isFinite(n)?Fa(l*(Math.log("0."+fa(o.d))/Math.LN10+o.e+1)):new u(n+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?i/0:0):(Ut=!1,u.rounding=o.s=1,n=Math.min(12,(e+"").length),a=VC(t.times(Ku(o,r+n)),r),a.d&&(a=Dt(a,r+5,1),rm(a.d,r,s)&&(e=r+10,a=Dt(VC(t.times(Ku(o,e+n)),e),e+5,1),+fa(a.d).slice(r+1,r+15)+1==1e14&&(a=Dt(a,r+1,0)))),a.s=i,Ut=!0,u.rounding=s,Dt(a,r,s))};Ge.toPrecision=function(t,e){var n,r=this,a=r.constructor;return t===void 0?n=To(r,r.e<=a.toExpNeg||r.e>=a.toExpPos):(Ns(t,1,_l),e===void 0?e=a.rounding:Ns(e,0,8),r=Dt(new a(r),t,e),n=To(r,t<=r.e||r.e<=a.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};Ge.toSignificantDigits=Ge.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ns(t,1,_l),e===void 0?e=r.rounding:Ns(e,0,8)),Dt(new r(n),t,e)};Ge.toString=function(){var t=this,e=t.constructor,n=To(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};Ge.truncated=Ge.trunc=function(){return Dt(new this.constructor(this),this.e+1,1)};Ge.valueOf=Ge.toJSON=function(){var t=this,e=t.constructor,n=To(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function fa(t){var e,n,r,a=t.length-1,s="",i=t[0];if(a>0){for(s+=i,e=1;e<a;e++)r=t[e]+"",n=Mt-r.length,n&&(s+=zu(n)),s+=r;i=t[e],r=i+"",n=Mt-r.length,n&&(s+=zu(n))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}function Ns(t,e,n){if(t!==~~t||t<e||t>n)throw Error(gl+t)}function rm(t,e,n,r){var a,s,i,o;for(s=t[0];s>=10;s/=10)--e;return--e<0?(e+=Mt,a=0):(a=Math.ceil((e+1)/Mt),e%=Mt),s=Mr(10,Mt-e),o=t[a]%s|0,r==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),i=n<4&&o==99999||n>3&&o==49999||o==5e4||o==0):i=(n<4&&o+1==s||n>3&&o+1==s/2)&&(t[a+1]/s/100|0)==Mr(10,e-2)-1||(o==s/2||o==0)&&(t[a+1]/s/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),i=(r||n<4)&&o==9999||!r&&n>3&&o==4999):i=((r||n<4)&&o+1==s||!r&&n>3&&o+1==s/2)&&(t[a+1]/s/1e3|0)==Mr(10,e-3)-1,i}function h0(t,e,n){for(var r,a=[0],s,i=0,o=t.length;i<o;){for(s=a.length;s--;)a[s]*=e;for(a[0]+=WC.indexOf(t.charAt(i++)),r=0;r<a.length;r++)a[r]>n-1&&(a[r+1]===void 0&&(a[r+1]=0),a[r+1]+=a[r]/n|0,a[r]%=n)}return a.reverse()}function h$e(t,e){var n,r,a;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),a=(1/Lw(4,n)).toString()):(n=16,a="2.3283064365386962890625e-10"),t.precision+=n,e=Rd(t,1,e.times(a),new t(1));for(var s=n;s--;){var i=e.times(e);e=i.times(i).minus(i).times(8).plus(1)}return t.precision-=n,e}var Un=function(){function t(r,a,s){var i,o=0,u=r.length;for(r=r.slice();u--;)i=r[u]*a+o,r[u]=i%s|0,o=i/s|0;return o&&r.unshift(o),r}function e(r,a,s,i){var o,u;if(s!=i)u=s>i?1:-1;else for(o=u=0;o<s;o++)if(r[o]!=a[o]){u=r[o]>a[o]?1:-1;break}return u}function n(r,a,s,i){for(var o=0;s--;)r[s]-=o,o=r[s]<a[s]?1:0,r[s]=o*i+r[s]-a[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,s,i,o,u){var l,c,f,d,h,m,v,y,b,x,w,N,C,E,$,I,D,k,A,O,B=r.constructor,z=r.s==a.s?1:-1,L=r.d,F=a.d;if(!L||!L[0]||!F||!F[0])return new B(!r.s||!a.s||(L?F&&L[0]==F[0]:!F)?NaN:L&&L[0]==0||!F?z*0:z/0);for(u?(h=1,c=r.e-a.e):(u=Ui,h=Mt,c=Fa(r.e/h)-Fa(a.e/h)),A=F.length,D=L.length,b=new B(z),x=b.d=[],f=0;F[f]==(L[f]||0);f++);if(F[f]>(L[f]||0)&&c--,s==null?(E=s=B.precision,i=B.rounding):o?E=s+(r.e-a.e)+1:E=s,E<0)x.push(1),m=!0;else{if(E=E/h+2|0,f=0,A==1){for(d=0,F=F[0],E++;(f<D||d)&&E--;f++)$=d*u+(L[f]||0),x[f]=$/F|0,d=$%F|0;m=d||f<D}else{for(d=u/(F[0]+1)|0,d>1&&(F=t(F,d,u),L=t(L,d,u),A=F.length,D=L.length),I=A,w=L.slice(0,A),N=w.length;N<A;)w[N++]=0;O=F.slice(),O.unshift(0),k=F[0],F[1]>=u/2&&++k;do d=0,l=e(F,w,A,N),l<0?(C=w[0],A!=N&&(C=C*u+(w[1]||0)),d=C/k|0,d>1?(d>=u&&(d=u-1),v=t(F,d,u),y=v.length,N=w.length,l=e(v,w,y,N),l==1&&(d--,n(v,A<y?O:F,y,u))):(d==0&&(l=d=1),v=F.slice()),y=v.length,y<N&&v.unshift(0),n(w,v,N,u),l==-1&&(N=w.length,l=e(F,w,A,N),l<1&&(d++,n(w,A<N?O:F,N,u))),N=w.length):l===0&&(d++,w=[0]),x[f++]=d,l&&w[0]?w[N++]=L[I]||0:(w=[L[I]],N=1);while((I++<D||w[0]!==void 0)&&E--);m=w[0]!==void 0}x[0]||x.shift()}if(h==1)b.e=c,iq=m;else{for(f=1,d=x[0];d>=10;d/=10)f++;b.e=f+c*h-1,Dt(b,o?s+b.e+1:s,i,m)}return b}}();function Dt(t,e,n,r){var a,s,i,o,u,l,c,f,d,h=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(a=1,o=f[0];o>=10;o/=10)a++;if(s=e-a,s<0)s+=Mt,i=e,c=f[d=0],u=c/Mr(10,a-i-1)%10|0;else if(d=Math.ceil((s+1)/Mt),o=f.length,d>=o)if(r){for(;o++<=d;)f.push(0);c=u=0,a=1,s%=Mt,i=s-Mt+1}else break e;else{for(c=o=f[d],a=1;o>=10;o/=10)a++;s%=Mt,i=s-Mt+a,u=i<0?0:c/Mr(10,a-i-1)%10|0}if(r=r||e<0||f[d+1]!==void 0||(i<0?c:c%Mr(10,a-i-1)),l=n<4?(u||r)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(s>0?i>0?c/Mr(10,a-i):0:f[d-1])%10&1||n==(t.s<0?8:7)),e<1||!f[0])return f.length=0,l?(e-=t.e+1,f[0]=Mr(10,(Mt-e%Mt)%Mt),t.e=-e||0):f[0]=t.e=0,t;if(s==0?(f.length=d,o=1,d--):(f.length=d+1,o=Mr(10,Mt-s),f[d]=i>0?(c/Mr(10,a-i)%Mr(10,i)|0)*o:0),l)for(;;)if(d==0){for(s=1,i=f[0];i>=10;i/=10)s++;for(i=f[0]+=o,o=1;i>=10;i/=10)o++;s!=o&&(t.e++,f[0]==Ui&&(f[0]=1));break}else{if(f[d]+=o,f[d]!=Ui)break;f[d--]=0,o=1}for(s=f.length;f[--s]===0;)f.pop()}return Ut&&(t.e>h.maxE?(t.d=null,t.e=NaN):t.e<h.minE&&(t.e=0,t.d=[0])),t}function To(t,e,n){if(!t.isFinite())return hq(t);var r,a=t.e,s=fa(t.d),i=s.length;return e?(n&&(r=n-i)>0?s=s.charAt(0)+"."+s.slice(1)+zu(r):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(t.e<0?"e":"e+")+t.e):a<0?(s="0."+zu(-a-1)+s,n&&(r=n-i)>0&&(s+=zu(r))):a>=i?(s+=zu(a+1-i),n&&(r=n-a-1)>0&&(s=s+"."+zu(r))):((r=a+1)<i&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-i)>0&&(a+1===i&&(s+="."),s+=zu(r))),s}function Bw(t,e){var n=t[0];for(e*=Mt;n>=10;n/=10)e++;return e}function cb(t,e,n){if(e>p$e)throw Ut=!0,n&&(t.precision=n),Error(oq);return Dt(new t(ub),e,1,!0)}function Li(t,e,n){if(e>qC)throw Error(oq);return Dt(new t(lb),e,n,!0)}function fq(t){var e=t.length-1,n=e*Mt+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function zu(t){for(var e="";t--;)e+="0";return e}function dq(t,e,n,r){var a,s=new t(1),i=Math.ceil(r/Mt+4);for(Ut=!1;;){if(n%2&&(s=s.times(e),fF(s.d,i)&&(a=!0)),n=Fa(n/2),n===0){n=s.d.length-1,a&&s.d[n]===0&&++s.d[n];break}e=e.times(e),fF(e.d,i)}return Ut=!0,s}function cF(t){return t.d[t.d.length-1]&1}function pq(t,e,n){for(var r,a=new t(e[0]),s=0;++s<e.length;)if(r=new t(e[s]),r.s)a[n](r)&&(a=r);else{a=r;break}return a}function VC(t,e){var n,r,a,s,i,o,u,l=0,c=0,f=0,d=t.constructor,h=d.rounding,m=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(Ut=!1,u=m):u=e,o=new d(.03125);t.e>-2;)t=t.times(o),f+=5;for(r=Math.log(Mr(2,f))/Math.LN10*2+5|0,u+=r,n=s=i=new d(1),d.precision=u;;){if(s=Dt(s.times(t),u,1),n=n.times(++c),o=i.plus(Un(s,n,u,1)),fa(o.d).slice(0,u)===fa(i.d).slice(0,u)){for(a=f;a--;)i=Dt(i.times(i),u,1);if(e==null)if(l<3&&rm(i.d,u-r,h,l))d.precision=u+=10,n=s=o=new d(1),c=0,l++;else return Dt(i,d.precision=m,h,Ut=!0);else return d.precision=m,i}i=o}}function Ku(t,e){var n,r,a,s,i,o,u,l,c,f,d,h=1,m=10,v=t,y=v.d,b=v.constructor,x=b.rounding,w=b.precision;if(v.s<0||!y||!y[0]||!v.e&&y[0]==1&&y.length==1)return new b(y&&!y[0]?-1/0:v.s!=1?NaN:y?0:v);if(e==null?(Ut=!1,c=w):c=e,b.precision=c+=m,n=fa(y),r=n.charAt(0),Math.abs(s=v.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=fa(v.d),r=n.charAt(0),h++;s=v.e,r>1?(v=new b("0."+n),s++):v=new b(r+"."+n.slice(1))}else return l=cb(b,c+2,w).times(s+""),v=Ku(new b(r+"."+n.slice(1)),c-m).plus(l),b.precision=w,e==null?Dt(v,w,x,Ut=!0):v;for(f=v,u=i=v=Un(v.minus(1),v.plus(1),c,1),d=Dt(v.times(v),c,1),a=3;;){if(i=Dt(i.times(d),c,1),l=u.plus(Un(i,new b(a),c,1)),fa(l.d).slice(0,c)===fa(u.d).slice(0,c))if(u=u.times(2),s!==0&&(u=u.plus(cb(b,c+2,w).times(s+""))),u=Un(u,new b(h),c,1),e==null)if(rm(u.d,c-m,x,o))b.precision=c+=m,l=i=v=Un(f.minus(1),f.plus(1),c,1),d=Dt(v.times(v),c,1),a=o=1;else return Dt(u,b.precision=w,x,Ut=!0);else return b.precision=w,u;u=l,a+=2}}function hq(t){return String(t.s*t.s/0)}function jC(t,e){var n,r,a;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(a=e.length;e.charCodeAt(a-1)===48;--a);if(e=e.slice(r,a),e){if(a-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%Mt,n<0&&(r+=Mt),r<a){for(r&&t.d.push(+e.slice(0,r)),a-=Mt;r<a;)t.d.push(+e.slice(r,r+=Mt));e=e.slice(r),r=Mt-e.length}else r-=a;for(;r--;)e+="0";t.d.push(+e),Ut&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function m$e(t,e){var n,r,a,s,i,o,u,l,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),cq.test(e))return jC(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(c$e.test(e))n=16,e=e.toLowerCase();else if(l$e.test(e))n=2;else if(f$e.test(e))n=8;else throw Error(gl+e);for(s=e.search(/p/i),s>0?(u=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),i=s>=0,r=t.constructor,i&&(e=e.replace(".",""),o=e.length,s=o-s,a=dq(r,new r(n),s,s*2)),l=h0(e,n,Ui),c=l.length-1,s=c;l[s]===0;--s)l.pop();return s<0?new r(t.s*0):(t.e=Bw(l,c),t.d=l,Ut=!1,i&&(t=Un(t,a,o*4)),u&&(t=t.times(Math.abs(u)<54?Mr(2,u):vl.pow(2,u))),Ut=!0,t)}function g$e(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:Rd(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/Lw(5,n)),e=Rd(t,2,e,e);for(var a,s=new t(5),i=new t(16),o=new t(20);n--;)a=e.times(e),e=e.times(s.plus(a.times(i.times(a).minus(o))));return e}function Rd(t,e,n,r,a){var s,i,o,u,l=t.precision,c=Math.ceil(l/Mt);for(Ut=!1,u=n.times(n),o=new t(r);;){if(i=Un(o.times(u),new t(e++*e++),l,1),o=a?r.plus(i):r.minus(i),r=Un(i.times(u),new t(e++*e++),l,1),i=o.plus(r),i.d[c]!==void 0){for(s=c;i.d[s]===o.d[s]&&s--;);if(s==-1)break}s=o,o=r,r=i,i=s}return Ut=!0,i.d.length=c+1,i}function Lw(t,e){for(var n=t;--e;)n*=t;return n}function mq(t,e){var n,r=e.s<0,a=Li(t,t.precision,1),s=a.times(.5);if(e=e.abs(),e.lte(s))return Yo=r?4:1,e;if(n=e.divToInt(a),n.isZero())Yo=r?3:2;else{if(e=e.minus(n.times(a)),e.lte(s))return Yo=cF(n)?r?2:3:r?4:1,e;Yo=cF(n)?r?1:4:r?3:2}return e.minus(a).abs()}function MA(t,e,n,r){var a,s,i,o,u,l,c,f,d,h=t.constructor,m=n!==void 0;if(m?(Ns(n,1,_l),r===void 0?r=h.rounding:Ns(r,0,8)):(n=h.precision,r=h.rounding),!t.isFinite())c=hq(t);else{for(c=To(t),i=c.indexOf("."),m?(a=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):a=e,i>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-i,d.d=h0(To(d),10,a),d.e=d.d.length),f=h0(c,10,a),s=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=m?"0p+0":"0";else{if(i<0?s--:(t=new h(t),t.d=f,t.e=s,t=Un(t,d,n,r,0,a),f=t.d,s=t.e,l=iq),i=f[n],o=a/2,l=l||f[n+1]!==void 0,l=r<4?(i!==void 0||l)&&(r===0||r===(t.s<0?3:2)):i>o||i===o&&(r===4||l||r===6&&f[n-1]&1||r===(t.s<0?8:7)),f.length=n,l)for(;++f[--n]>a-1;)f[n]=0,n||(++s,f.unshift(1));for(u=f.length;!f[u-1];--u);for(i=0,c="";i<u;i++)c+=WC.charAt(f[i]);if(m){if(u>1)if(e==16||e==8){for(i=e==16?4:3,--u;u%i;u++)c+="0";for(f=h0(c,a,e),u=f.length;!f[u-1];--u);for(i=1,c="1.";i<u;i++)c+=WC.charAt(f[i])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>u)for(s-=u;s--;)c+="0";else s<u&&(c=c.slice(0,s)+"."+c.slice(s))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function fF(t,e){if(t.length>e)return t.length=e,!0}function v$e(t){return new this(t).abs()}function y$e(t){return new this(t).acos()}function b$e(t){return new this(t).acosh()}function w$e(t,e){return new this(t).plus(e)}function x$e(t){return new this(t).asin()}function S$e(t){return new this(t).asinh()}function N$e(t){return new this(t).atan()}function C$e(t){return new this(t).atanh()}function E$e(t,e){t=new this(t),e=new this(e);var n,r=this.precision,a=this.rounding,s=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=Li(this,s,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?Li(this,r,a):new this(0),n.s=t.s):!t.d||e.isZero()?(n=Li(this,s,1).times(.5),n.s=t.s):e.s<0?(this.precision=s,this.rounding=1,n=this.atan(Un(t,e,s,1)),e=Li(this,s,1),this.precision=r,this.rounding=a,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(Un(t,e,s,1)),n}function T$e(t){return new this(t).cbrt()}function D$e(t){return Dt(t=new this(t),t.e+1,2)}function A$e(t,e,n){return new this(t).clamp(e,n)}function $$e(t){if(!t||typeof t!="object")throw Error(Pw+"Object expected");var e,n,r,a=t.defaults===!0,s=["precision",1,_l,"rounding",0,8,"toExpNeg",-td,0,"toExpPos",0,td,"maxE",0,td,"minE",-td,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(n=s[e],a&&(this[n]=UC[n]),(r=t[n])!==void 0)if(Fa(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(gl+n+": "+r);if(n="crypto",a&&(this[n]=UC[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(uq);else this[n]=!1;else throw Error(gl+n+": "+r);return this}function k$e(t){return new this(t).cos()}function I$e(t){return new this(t).cosh()}function gq(t){var e,n,r;function a(s){var i,o,u,l=this;if(!(l instanceof a))return new a(s);if(l.constructor=a,dF(s)){l.s=s.s,Ut?!s.d||s.e>a.maxE?(l.e=NaN,l.d=null):s.e<a.minE?(l.e=0,l.d=[0]):(l.e=s.e,l.d=s.d.slice()):(l.e=s.e,l.d=s.d?s.d.slice():s.d);return}if(u=typeof s,u==="number"){if(s===0){l.s=1/s<0?-1:1,l.e=0,l.d=[0];return}if(s<0?(s=-s,l.s=-1):l.s=1,s===~~s&&s<1e7){for(i=0,o=s;o>=10;o/=10)i++;Ut?i>a.maxE?(l.e=NaN,l.d=null):i<a.minE?(l.e=0,l.d=[0]):(l.e=i,l.d=[s]):(l.e=i,l.d=[s]);return}else if(s*0!==0){s||(l.s=NaN),l.e=NaN,l.d=null;return}return jC(l,s.toString())}else if(u!=="string")throw Error(gl+s);return(o=s.charCodeAt(0))===45?(s=s.slice(1),l.s=-1):(o===43&&(s=s.slice(1)),l.s=1),cq.test(s)?jC(l,s):m$e(l,s)}if(a.prototype=Ge,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=$$e,a.clone=gq,a.isDecimal=dF,a.abs=v$e,a.acos=y$e,a.acosh=b$e,a.add=w$e,a.asin=x$e,a.asinh=S$e,a.atan=N$e,a.atanh=C$e,a.atan2=E$e,a.cbrt=T$e,a.ceil=D$e,a.clamp=A$e,a.cos=k$e,a.cosh=I$e,a.div=_$e,a.exp=O$e,a.floor=F$e,a.hypot=R$e,a.ln=M$e,a.log=P$e,a.log10=L$e,a.log2=B$e,a.max=z$e,a.min=W$e,a.mod=U$e,a.mul=q$e,a.pow=V$e,a.random=j$e,a.round=H$e,a.sign=G$e,a.sin=K$e,a.sinh=X$e,a.sqrt=Y$e,a.sub=Q$e,a.sum=J$e,a.tan=Z$e,a.tanh=eke,a.trunc=tke,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return a.config(t),a}function _$e(t,e){return new this(t).div(e)}function O$e(t){return new this(t).exp()}function F$e(t){return Dt(t=new this(t),t.e+1,3)}function R$e(){var t,e,n=new this(0);for(Ut=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return Ut=!0,new this(1/0);n=e}return Ut=!0,n.sqrt()}function dF(t){return t instanceof vl||t&&t.toStringTag===lq||!1}function M$e(t){return new this(t).ln()}function P$e(t,e){return new this(t).log(e)}function B$e(t){return new this(t).log(2)}function L$e(t){return new this(t).log(10)}function z$e(){return pq(this,arguments,"lt")}function W$e(){return pq(this,arguments,"gt")}function U$e(t,e){return new this(t).mod(e)}function q$e(t,e){return new this(t).mul(e)}function V$e(t,e){return new this(t).pow(e)}function j$e(t){var e,n,r,a,s=0,i=new this(1),o=[];if(t===void 0?t=this.precision:Ns(t,1,_l),r=Math.ceil(t/Mt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));s<r;)a=e[s],a>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=a%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);s<r;)a=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),a>=214e7?crypto.randomBytes(4).copy(e,s):(o.push(a%1e7),s+=4);s=r/4}else throw Error(uq);else for(;s<r;)o[s++]=Math.random()*1e7|0;for(r=o[--s],t%=Mt,r&&t&&(a=Mr(10,Mt-t),o[s]=(r/a|0)*a);o[s]===0;s--)o.pop();if(s<0)n=0,o=[0];else{for(n=-1;o[0]===0;n-=Mt)o.shift();for(r=1,a=o[0];a>=10;a/=10)r++;r<Mt&&(n-=Mt-r)}return i.e=n,i.d=o,i}function H$e(t){return Dt(t=new this(t),t.e+1,this.rounding)}function G$e(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function K$e(t){return new this(t).sin()}function X$e(t){return new this(t).sinh()}function Y$e(t){return new this(t).sqrt()}function Q$e(t,e){return new this(t).sub(e)}function J$e(){var t=0,e=arguments,n=new this(e[t]);for(Ut=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return Ut=!0,Dt(n,this.precision,this.rounding)}function Z$e(t){return new this(t).tan()}function eke(t){return new this(t).tanh()}function tke(t){return Dt(t=new this(t),t.e+1,1)}Ge[Symbol.for("nodejs.util.inspect.custom")]=Ge.toString;Ge[Symbol.toStringTag]="Decimal";var vl=Ge.constructor=gq(UC);ub=new vl(ub);lb=new vl(lb);var nke="BigNumber",rke=["?on","config"],ake=ee(nke,rke,t=>{var{on:e,config:n}=t,r=vl.clone({precision:n.precision,modulo:vl.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(a){return new r(a.value)},e&&e("config",function(a,s){a.precision!==s.precision&&r.config({precision:a.precision})}),r},{isClass:!0});const Ta=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},ei=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},ske=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const n=t*t;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},PS=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},Uf=function(){throw SyntaxError("Invalid Param")};function BS(t,e){const n=Math.abs(t),r=Math.abs(e);return t===0?Math.log(r):e===0?Math.log(n):n<3e3&&r<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const ike={re:0,im:0},lc=function(t,e){const n=ike;if(t==null)n.re=n.im=0;else if(e!==void 0)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return We.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return We.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else t.length===2?(n.re=t[0],n.im=t[1]):Uf();break;case"string":n.im=n.re=0;const r=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let a=1,s=0;r===null&&Uf();for(let i=0;i<r.length;i++){const o=r[i];o===" "||o==="	"||o===`
`||(o==="+"?a++:o==="-"?s++:o==="i"||o==="I"?(a+s===0&&Uf(),r[i+1]!==" "&&!isNaN(r[i+1])?(n.im+=parseFloat((s%2?"-":"")+r[i+1]),i++):n.im+=parseFloat((s%2?"-":"")+"1"),a=s=0):((a+s===0||isNaN(o))&&Uf(),r[i+1]==="i"||r[i+1]==="I"?(n.im+=parseFloat((s%2?"-":"")+o),i++):n.re+=parseFloat((s%2?"-":"")+o),a=s=0))}a+s>0&&Uf();break;case"number":n.im=0,n.re=t;break;default:Uf()}return isNaN(n.re)||isNaN(n.im),n};function We(t,e){if(!(this instanceof We))return new We(t,e);const n=lc(t,e);this.re=n.re,this.im=n.im}We.prototype={re:0,im:0,sign:function(){const t=PS(this.re,this.im);return new We(this.re/t,this.im/t)},add:function(t,e){const n=lc(t,e),r=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im));return r||a?r&&a?We.NAN:We.INFINITY:new We(this.re+n.re,this.im+n.im)},sub:function(t,e){const n=lc(t,e),r=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im));return r||a?r&&a?We.NAN:We.INFINITY:new We(this.re-n.re,this.im-n.im)},mul:function(t,e){const n=lc(t,e),r=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,i=n.re===0&&n.im===0;return r&&i||a&&s?We.NAN:r||a?We.INFINITY:n.im===0&&this.im===0?new We(this.re*n.re,0):new We(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){const n=lc(t,e),r=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,i=n.re===0&&n.im===0;if(s&&i||r&&a)return We.NAN;if(i||r)return We.INFINITY;if(s||a)return We.ZERO;if(n.im===0)return new We(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const o=n.re/n.im,u=n.re*o+n.im;return new We((this.re*o+this.im)/u,(this.im*o-this.re)/u)}else{const o=n.im/n.re,u=n.im*o+n.re;return new We((this.re+this.im*o)/u,(this.im-this.re*o)/u)}},pow:function(t,e){const n=lc(t,e),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return We.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new We(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new We(Math.pow(this.im,n.re),0);case 1:return new We(0,Math.pow(this.im,n.re));case 2:return new We(-Math.pow(this.im,n.re),0);case 3:return new We(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return We.ZERO;const s=Math.atan2(this.im,this.re),i=BS(this.re,this.im);let o=Math.exp(n.re*i-n.im*s),u=n.im*i+n.re*s;return new We(o*Math.cos(u),o*Math.sin(u))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new We(Math.sqrt(t),0):new We(0,Math.sqrt(-t));const n=PS(t,e);let r=Math.sqrt(.5*(n+Math.abs(t))),a=Math.abs(e)/(2*r);return t>=0?new We(r,e<0?-a:a):new We(a,e<0?-r:r)},exp:function(){const t=Math.exp(this.re);return this.im===0?new We(t,0):new We(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new We(Math.expm1(t)*Math.cos(e)+ske(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new We(Math.log(t),0):new We(BS(t,e),Math.atan2(e,t))},abs:function(){return PS(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new We(Math.sin(t)*Ta(e),Math.cos(t)*ei(e))},cos:function(){const t=this.re,e=this.im;return new We(Math.cos(t)*Ta(e),-Math.sin(t)*ei(e))},tan:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)+Ta(e);return new We(Math.sin(t)/n,ei(e)/n)},cot:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)-Ta(e);return new We(-Math.sin(t)/n,ei(e)/n)},sec:function(){const t=this.re,e=this.im,n=.5*Ta(2*e)+.5*Math.cos(2*t);return new We(Math.cos(t)*Ta(e)/n,Math.sin(t)*ei(e)/n)},csc:function(){const t=this.re,e=this.im,n=.5*Ta(2*e)-.5*Math.cos(2*t);return new We(Math.sin(t)*Ta(e)/n,-Math.cos(t)*ei(e)/n)},asin:function(){const t=this.re,e=this.im,n=new We(e*e-t*t+1,-2*t*e).sqrt(),r=new We(n.re-e,n.im+t).log();return new We(r.im,-r.re)},acos:function(){const t=this.re,e=this.im,n=new We(e*e-t*t+1,-2*t*e).sqrt(),r=new We(n.re-e,n.im+t).log();return new We(Math.PI/2-r.im,r.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new We(0,1/0);if(e===-1)return new We(0,-1/0)}const n=t*t+(1-e)*(1-e),r=new We((1-e*e-t*t)/n,-2*t/n).log();return new We(-.5*r.im,.5*r.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new We(Math.atan2(1,t),0);const n=t*t+e*e;return n!==0?new We(t/n,-e/n).atan():new We(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new We(0,1/0);const n=t*t+e*e;return n!==0?new We(t/n,-e/n).acos():new We(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new We(Math.PI/2,1/0);const n=t*t+e*e;return n!==0?new We(t/n,-e/n).asin():new We(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new We(ei(t)*Math.cos(e),Ta(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new We(Ta(t)*Math.cos(e),ei(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,n=Ta(t)+Math.cos(e);return new We(ei(t)/n,Math.sin(e)/n)},coth:function(){const t=2*this.re,e=2*this.im,n=Ta(t)-Math.cos(e);return new We(ei(t)/n,-Math.sin(e)/n)},csch:function(){const t=this.re,e=this.im,n=Math.cos(2*e)-Ta(2*t);return new We(-2*ei(t)*Math.cos(e)/n,2*Ta(t)*Math.sin(e)/n)},sech:function(){const t=this.re,e=this.im,n=Math.cos(2*e)+Ta(2*t);return new We(2*Ta(t)*Math.cos(e)/n,-2*ei(t)*Math.sin(e)/n)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,n=t>1&&e===0,r=1-t,a=1+t,s=r*r+e*e,i=s!==0?new We((a*r-e*e)/s,(e*r+a*e)/s):new We(t!==-1?t/0:0,e!==0?e/0:0),o=i.re;return i.re=BS(i.re,i.im)/2,i.im=Math.atan2(i.im,o)/2,n&&(i.im=-i.im),i},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new We(0,Math.PI/2);const n=t*t+e*e;return n!==0?new We(t/n,-e/n).atanh():new We(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new We(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const n=t*t+e*e;return n!==0?new We(t/n,-e/n).asinh():new We(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return We.INFINITY;const n=t*t+e*e;return n!==0?new We(t/n,-e/n).acosh():new We(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return We.INFINITY;if(this.isInfinite())return We.ZERO;const t=this.re,e=this.im,n=t*t+e*e;return new We(t/n,-e/n)},conjugate:function(){return new We(this.re,-this.im)},neg:function(){return new We(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new We(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new We(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new We(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const n=lc(t,e);return Math.abs(n.re-this.re)<=We.EPSILON&&Math.abs(n.im-this.im)<=We.EPSILON},clone:function(){return new We(this.re,this.im)},toString:function(){let t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<We.EPSILON&&(t=0),Math.abs(e)<We.EPSILON&&(e=0),e===0?n+t:(t!==0?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),e!==1&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};We.ZERO=new We(0,0);We.ONE=new We(1,0);We.I=new We(0,1);We.PI=new We(Math.PI,0);We.E=new We(Math.E,0);We.INFINITY=new We(1/0,1/0);We.NAN=new We(NaN,NaN);We.EPSILON=1e-15;var oke="Complex",uke=[],lke=ee(oke,uke,()=>(Object.defineProperty(We,"name",{value:"Complex"}),We.prototype.constructor=We,We.prototype.type="Complex",We.prototype.isComplex=!0,We.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},We.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},We.prototype.format=function(t){var e="",n=this.im,r=this.re,a=Sc(this.re,t),s=Sc(this.im,t),i=jt(t)?t:t?t.precision:null;if(i!==null){var o=Math.pow(10,-i);Math.abs(r/n)<o&&(r=0),Math.abs(n/r)<o&&(n=0)}return n===0?e=a:r===0?n===1?e="i":n===-1?e="-i":e=s+"i":n<0?n===-1?e=a+" - i":e=a+" - "+s.substring(1)+"i":n===1?e=a+" + i":e=a+" + "+s+"i",e},We.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return We(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(jt(n)){if(si(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),jt(r))return new We({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},We.prototype.valueOf=We.prototype.toString,We.fromJSON=function(t){return new We(t)},We.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},We),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const Et=BigInt(0),Yt=BigInt(1),am=BigInt(2),HC=BigInt(5),cs=BigInt(10),cke=2e3,ut={s:Yt,n:Et,d:Yt};function Vo(t,e){try{t=BigInt(t)}catch{throw Bu()}return t*e}function Fi(t){return typeof t=="bigint"?t:Math.floor(t)}function Jn(t,e){if(e===Et)throw PA();const n=Object.create(ni.prototype);n.s=t<Et?-Yt:Yt,t=t<Et?-t:t;const r=hc(t,e);return n.n=t/r,n.d=e/r,n}function qf(t){const e={};let n=t,r=am,a=HC-Yt;for(;a<=n;){for(;n%r===Et;)n/=r,e[r]=(e[r]||Et)+Yt;a+=Yt+am*r++}return n!==t?n>1&&(e[n]=(e[n]||Et)+Yt):e[t]=(e[t]||Et)+Yt,e}const Qr=function(t,e){let n=Et,r=Yt,a=Yt;if(t!=null)if(e!==void 0){if(typeof t=="bigint")n=t;else{if(isNaN(t))throw Bu();if(t%1!==0)throw pF();n=BigInt(t)}if(typeof e=="bigint")r=e;else{if(isNaN(e))throw Bu();if(e%1!==0)throw pF();r=BigInt(e)}a=n*r}else if(typeof t=="object"){if("d"in t&&"n"in t)n=BigInt(t.n),r=BigInt(t.d),"s"in t&&(n*=BigInt(t.s));else if(0 in t)n=BigInt(t[0]),1 in t&&(r=BigInt(t[1]));else if(typeof t=="bigint")n=t;else throw Bu();a=n*r}else if(typeof t=="number"){if(isNaN(t))throw Bu();if(t<0&&(a=-Yt,t=-t),t%1===0)n=BigInt(t);else if(t>0){let s=1,i=0,o=1,u=1,l=1,c=1e7;for(t>=1&&(s=10**Math.floor(1+Math.log10(t)),t/=s);o<=c&&l<=c;){let f=(i+u)/(o+l);if(t===f){o+l<=c?(n=i+u,r=o+l):l>o?(n=u,r=l):(n=i,r=o);break}else t>f?(i+=u,o+=l):(u+=i,l+=o),o>c?(n=u,r=l):(n=i,r=o)}n=BigInt(n)*BigInt(s),r=BigInt(r)}}else if(typeof t=="string"){let s=0,i=Et,o=Et,u=Et,l=Yt,c=Yt,f=t.replace(/_/g,"").match(/\d+|./g);if(f===null)throw Bu();if(f[s]==="-"?(a=-Yt,s++):f[s]==="+"&&s++,f.length===s+1?o=Vo(f[s++],a):f[s+1]==="."||f[s]==="."?(f[s]!=="."&&(i=Vo(f[s++],a)),s++,(s+1===f.length||f[s+1]==="("&&f[s+3]===")"||f[s+1]==="'"&&f[s+3]==="'")&&(o=Vo(f[s],a),l=cs**BigInt(f[s].length),s++),(f[s]==="("&&f[s+2]===")"||f[s]==="'"&&f[s+2]==="'")&&(u=Vo(f[s+1],a),c=cs**BigInt(f[s+1].length)-Yt,s+=3)):f[s+1]==="/"||f[s+1]===":"?(o=Vo(f[s],a),l=Vo(f[s+2],Yt),s+=3):f[s+3]==="/"&&f[s+1]===" "&&(i=Vo(f[s],a),o=Vo(f[s+2],a),l=Vo(f[s+4],Yt),s+=5),f.length<=s)r=l*c,a=n=u+r*i+c*o;else throw Bu()}else if(typeof t=="bigint")n=t,a=t,r=Yt;else throw Bu();if(r===Et)throw PA();ut.s=a<Et?-Yt:Yt,ut.n=n<Et?-n:n,ut.d=r<Et?-r:r};function fke(t,e,n){let r=Yt;for(;e>Et;t=t*t%n,e>>=Yt)e&Yt&&(r=r*t%n);return r}function dke(t,e){for(;e%am===Et;e/=am);for(;e%HC===Et;e/=HC);if(e===Yt)return Et;let n=cs%e,r=1;for(;n!==Yt;r++)if(n=n*cs%e,r>cke)return Et;return BigInt(r)}function pke(t,e,n){let r=Yt,a=fke(cs,n,e);for(let s=0;s<300;s++){if(r===a)return BigInt(s);r=r*cs%e,a=a*cs%e}return 0}function hc(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function ni(t,e){if(Qr(t,e),this instanceof ni)t=hc(ut.d,ut.n),this.s=ut.s,this.n=ut.n/t,this.d=ut.d/t;else return Jn(ut.s*ut.n,ut.d)}var PA=function(){return new Error("Division by Zero")},Bu=function(){return new Error("Invalid argument")},pF=function(){return new Error("Parameters must be integer")};ni.prototype={s:Yt,n:Et,d:Yt,abs:function(){return Jn(this.n,this.d)},neg:function(){return Jn(-this.s*this.n,this.d)},add:function(t,e){return Qr(t,e),Jn(this.s*this.n*ut.d+ut.s*this.d*ut.n,this.d*ut.d)},sub:function(t,e){return Qr(t,e),Jn(this.s*this.n*ut.d-ut.s*this.d*ut.n,this.d*ut.d)},mul:function(t,e){return Qr(t,e),Jn(this.s*ut.s*this.n*ut.n,this.d*ut.d)},div:function(t,e){return Qr(t,e),Jn(this.s*ut.s*this.n*ut.d,this.d*ut.n)},clone:function(){return Jn(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return Jn(this.s*this.n%this.d,Yt);if(Qr(t,e),Et===ut.n*this.d)throw PA();return Jn(this.s*(ut.d*this.n)%(ut.n*this.d),ut.d*this.d)},gcd:function(t,e){return Qr(t,e),Jn(hc(ut.n,this.n)*hc(ut.d,this.d),ut.d*this.d)},lcm:function(t,e){return Qr(t,e),ut.n===Et&&this.n===Et?Jn(Et,Yt):Jn(ut.n*this.n,hc(ut.n,this.n)*hc(ut.d,this.d))},inverse:function(){return Jn(this.s*this.d,this.n)},pow:function(t,e){if(Qr(t,e),ut.d===Yt)return ut.s<Et?Jn((this.s*this.d)**ut.n,this.n**ut.n):Jn((this.s*this.n)**ut.n,this.d**ut.n);if(this.s<Et)return null;let n=qf(this.n),r=qf(this.d),a=Yt,s=Yt;for(let i in n)if(i!=="1"){if(i==="0"){a=Et;break}if(n[i]*=ut.n,n[i]%ut.d===Et)n[i]/=ut.d;else return null;a*=BigInt(i)**n[i]}for(let i in r)if(i!=="1"){if(r[i]*=ut.n,r[i]%ut.d===Et)r[i]/=ut.d;else return null;s*=BigInt(i)**r[i]}return ut.s<Et?Jn(s,a):Jn(a,s)},log:function(t,e){if(Qr(t,e),this.s<=Et||ut.s<=Et)return null;const n={},r=qf(ut.n),a=qf(ut.d),s=qf(this.n),i=qf(this.d);for(const l in a)r[l]=(r[l]||Et)-a[l];for(const l in i)s[l]=(s[l]||Et)-i[l];for(const l in r)l!=="1"&&(n[l]=!0);for(const l in s)l!=="1"&&(n[l]=!0);let o=null,u=null;for(const l in n){const c=r[l]||Et,f=s[l]||Et;if(c===Et){if(f!==Et)return null;continue}let d=f,h=c;const m=hc(d,h);if(d/=m,h/=m,o===null&&u===null)o=d,u=h;else if(d*u!==o*h)return null}return o!==null&&u!==null?Jn(o,u):null},equals:function(t,e){return Qr(t,e),this.s*this.n*ut.d===ut.s*ut.n*this.d},lt:function(t,e){return Qr(t,e),this.s*this.n*ut.d<ut.s*ut.n*this.d},lte:function(t,e){return Qr(t,e),this.s*this.n*ut.d<=ut.s*ut.n*this.d},gt:function(t,e){return Qr(t,e),this.s*this.n*ut.d>ut.s*ut.n*this.d},gte:function(t,e){return Qr(t,e),this.s*this.n*ut.d>=ut.s*ut.n*this.d},compare:function(t,e){Qr(t,e);let n=this.s*this.n*ut.d-ut.s*ut.n*this.d;return(Et<n)-(n<Et)},ceil:function(t){return t=cs**BigInt(t||0),Jn(Fi(this.s*t*this.n/this.d)+(t*this.n%this.d>Et&&this.s>=Et?Yt:Et),t)},floor:function(t){return t=cs**BigInt(t||0),Jn(Fi(this.s*t*this.n/this.d)-(t*this.n%this.d>Et&&this.s<Et?Yt:Et),t)},round:function(t){return t=cs**BigInt(t||0),Jn(Fi(this.s*t*this.n/this.d)+this.s*((this.s>=Et?Yt:Et)+am*(t*this.n%this.d)>this.d?Yt:Et),t)},roundTo:function(t,e){Qr(t,e);const n=this.n*ut.d,r=this.d*ut.n,a=n%r;let s=Fi(n/r);return a+a>=r&&s++,Jn(this.s*s*ut.n,ut.d)},divisible:function(t,e){return Qr(t,e),!(!(ut.n*this.d)||this.n*ut.d%(ut.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t){let e=this.n,n=this.d;t=t||15;let r=dke(e,n),a=pke(e,n,r),s=this.s<Et?"-":"";if(s+=Fi(e/n),e%=n,e*=cs,e&&(s+="."),r){for(let i=a;i--;)s+=Fi(e/n),e%=n,e*=cs;s+="(";for(let i=r;i--;)s+=Fi(e/n),e%=n,e*=cs;s+=")"}else for(let i=t;e&&i--;)s+=Fi(e/n),e%=n,e*=cs;return s},toFraction:function(t){let e=this.n,n=this.d,r=this.s<Et?"-":"";if(n===Yt)r+=e;else{let a=Fi(e/n);t&&a>Et&&(r+=a,r+=" ",e%=n),r+=e,r+="/",r+=n}return r},toLatex:function(t){let e=this.n,n=this.d,r=this.s<Et?"-":"";if(n===Yt)r+=e;else{let a=Fi(e/n);t&&a>Et&&(r+=a,e%=n),r+="\\frac{",r+=e,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let t=this.n,e=this.d,n=[];do{n.push(Fi(t/e));let r=t%e;t=e,e=r}while(t!==Yt);return n},simplify:function(t){const e=BigInt(1/(t||.001)|0),n=this.abs(),r=n.toContinued();for(let a=1;a<r.length;a++){let s=Jn(r[a-1],Yt);for(let o=a-2;o>=0;o--)s=s.inverse().add(r[o]);let i=s.sub(n);if(i.n*e<i.d)return s.mul(this.s)}return this}};var hke="Fraction",mke=[],gke=ee(hke,mke,()=>(Object.defineProperty(ni,"name",{value:"Fraction"}),ni.prototype.constructor=ni,ni.prototype.type="Fraction",ni.prototype.isFraction=!0,ni.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},ni.fromJSON=function(t){return new ni(t)},ni),{isClass:!0}),vke="Range",yke=[],bke=ee(vke,yke,()=>{function t(e,n,r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var a=e!=null,s=n!=null,i=r!=null;if(a){if(Gt(e))e=e.toNumber();else if(typeof e!="number")throw new TypeError("Parameter start must be a number")}if(s){if(Gt(n))n=n.toNumber();else if(typeof n!="number")throw new TypeError("Parameter end must be a number")}if(i){if(Gt(r))r=r.toNumber();else if(typeof r!="number")throw new TypeError("Parameter step must be a number")}this.start=a?parseFloat(e):0,this.end=s?parseFloat(n):0,this.step=i?parseFloat(r):1}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if(typeof e!="string")return null;var n=e.split(":"),r=n.map(function(s){return parseFloat(s)}),a=r.some(function(s){return isNaN(s)});if(a)return null;switch(r.length){case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[2],r[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var e=0,n=this.start,r=this.step,a=this.end,s=a-n;return Gu(r)===Gu(s)?e=Math.ceil(s/r):s===0&&(e=0),isNaN(e)&&(e=0),[e]},t.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},t.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},t.prototype.forEach=function(e){var n=this.start,r=this.step,a=this.end,s=0;if(r>0)for(;n<a;)e(n,[s],this),n+=r,s++;else if(r<0)for(;n>a;)e(n,[s],this),n+=r,s++},t.prototype.map=function(e){var n=[];return this.forEach(function(r,a,s){n[a[0]]=e(r,a,s)}),n},t.prototype.toArray=function(){var e=[];return this.forEach(function(n,r){e[r[0]]=n}),e},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(e){var n=Sc(this.start,e);return this.step!==1&&(n+=":"+Sc(this.step,e)),n+=":"+Sc(this.end,e),n},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t},{isClass:!0}),wke="Matrix",xke=[],Ske=ee(wke,xke,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,n,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function LS(t,e,n){var r=t.constructor,a=new r(2),s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!wt(n))throw new Error("size must be an integer");if(t.greaterThan(a.pow(n-1).sub(1))||t.lessThan(a.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(a.pow(n))),s="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(s);case 8:return"".concat(t.toOctal()).concat(s);case 16:return"".concat(t.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(e," not supported "))}}function Nke(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:a}=nq(e);switch(n){case"fixed":return Eke(t,r);case"exponential":return hF(t,r);case"engineering":return Cke(t,r);case"bin":return LS(t,2,a);case"oct":return LS(t,8,a);case"hex":return LS(t,16,a);case"auto":{var s=mF(e==null?void 0:e.lowerExp,-3),i=mF(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var o,u=t.toSignificantDigits(r),l=u.e;return l>=s&&l<i?o=u.toFixed():o=hF(t,r),o.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Cke(t,e){var n=t.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,a=t.mul(Math.pow(10,-r)),s=a.toPrecision(e);if(s.includes("e")){var i=t.constructor;s=new i(s).toFixed()}return s+"e"+(n>=0?"+":"")+r.toString()}function hF(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function Eke(t,e){return t.toFixed(e)}function mF(t,e){return jt(t)?t:Gt(t)?t.toNumber():e}function Tke(t,e){var n=t.length-e.length,r=t.length;return t.substring(n,r)===e}function Qt(t,e){var n=Dke(t,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function Dke(t,e){if(typeof t=="number")return Sc(t,e);if(Gt(t))return Nke(t,e);if(Ake(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return vq(t,e);if(ka(t))return nd(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var n=Object.keys(t).map(r=>nd(r)+": "+Qt(t[r],e));return"{"+n.join(", ")+"}"}return String(t)}function nd(t){for(var e=String(t),n="",r=0;r<e.length;){var a=e.charAt(r);n+=a in gF?gF[a]:a,r++}return'"'+n+'"'}var gF={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function oi(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function vq(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,a=0;a<r;a++)a!==0&&(n+=", "),n+=vq(t[a],e);return n+="]",n}else return Qt(t,e)}function Ake(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function GC(t,e){if(!ka(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Ln(t)+", index: 0)");if(!ka(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Ln(e)+", index: 1)");return t===e?0:t>e?1:-1}function Zt(t,e,n){if(!(this instanceof Zt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Zt.prototype=new RangeError;Zt.prototype.constructor=RangeError;Zt.prototype.name="DimensionError";Zt.prototype.isDimensionError=!0;function Xi(t,e,n){if(!(this instanceof Xi))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Xi.prototype=new RangeError;Xi.prototype.constructor=RangeError;Xi.prototype.name="IndexError";Xi.prototype.isIndexError=!0;function Lt(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function yq(t,e,n){var r,a=t.length;if(a!==e[n])throw new Zt(a,e[n]);if(n<e.length-1){var s=n+1;for(r=0;r<a;r++){var i=t[r];if(!Array.isArray(i))throw new Zt(e.length-1,e.length,"<");yq(t[r],e,s)}}else for(r=0;r<a;r++)if(Array.isArray(t[r]))throw new Zt(e.length+1,e.length,">")}function vF(t,e){var n=e.length===0;if(n){if(Array.isArray(t))throw new Zt(t.length,0)}else yq(t,e,0)}function fb(t,e){var n=t.isMatrix?t._size:Lt(t),r=e._sourceSize;r.forEach((a,s)=>{if(a!==null&&a!==n[s])throw new Zt(a,n[s])})}function Mn(t,e){if(t!==void 0){if(!jt(t)||!wt(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Xi(t,e)}}function Md(t){for(var e=0;e<t._dimensions.length;++e){var n=t._dimensions[e];if(n._data&&An(n._data)){if(n._size[0]===0)return!0}else if(n.isRange){if(n.start===n.end)return!0}else if(ka(n)&&n.length===0)return!0}return!1}function Pd(t,e,n){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(a){if(!jt(a)||!wt(a)||a<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Qt(e)+")")}),(jt(t)||Gt(t))&&(t=[t]);var r=n!==void 0?n:0;return KC(t,e,0,r),t}function KC(t,e,n,r){var a,s,i=t.length,o=e[n],u=Math.min(i,o);if(t.length=o,n<e.length-1){var l=n+1;for(a=0;a<u;a++)s=t[a],Array.isArray(s)||(s=[s],t[a]=s),KC(s,e,l,r);for(a=u;a<o;a++)s=[],t[a]=s,KC(s,e,l,r)}else{for(a=0;a<u;a++)for(;Array.isArray(t[a]);)t[a]=t[a][0];for(a=u;a<o;a++)t[a]=r}}function BA(t,e){var n=yn(t),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Zt(0,r,"!=");e=LA(e,r);var a=bq(e);if(r!==a)throw new Zt(a,r,"!=");try{return $ke(n,e)}catch(s){throw s instanceof Zt?new Zt(a,r,"!="):s}}function LA(t,e){var n=bq(t),r=t.slice(),a=-1,s=t.indexOf(a),i=t.indexOf(a,s+1)>=0;if(i)throw new Error("More than one wildcard in sizes");var o=s>=0,u=e%n===0;if(o)if(u)r[s]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return r}function bq(t){return t.reduce((e,n)=>e*n,1)}function $ke(t,e){for(var n=t,r,a=e.length-1;a>0;a--){var s=e[a];r=[];for(var i=n.length/s,o=0;o<i;o++)r.push(n.slice(o*s,(o+1)*s));n=r}return n}function db(t,e){for(var n=Lt(t);Array.isArray(t)&&t.length===1;)t=t[0],n.shift();for(var r=n.length;n[r-1]===1;)r--;return r<n.length&&(t=wq(t,r,0),n.length=r),t}function wq(t,e,n){var r,a;if(n<e){var s=n+1;for(r=0,a=t.length;r<a;r++)t[r]=wq(t[r],e,s)}else for(;Array.isArray(t);)t=t[0];return t}function xq(t,e,n,r){var a=r||Lt(t);if(n)for(var s=0;s<n;s++)t=[t],a.unshift(1);for(t=Sq(t,e,0);a.length<e;)a.push(1);return t}function Sq(t,e,n){var r,a;if(Array.isArray(t)){var s=n+1;for(r=0,a=t.length;r<a;r++)t[r]=Sq(t[r],e,s)}else for(var i=n;i<e;i++)t=[t];return t}function yn(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function n(r){Array.isArray(r)?r.forEach(n):e.push(r)}),e}function nl(t,e){return Array.prototype.map.call(t,e)}function Nq(t,e){Array.prototype.forEach.call(t,e)}function kke(t,e){if(Lt(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function yF(t,e){if(Lt(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,n=>e.test(n))}function bF(t,e){return Array.prototype.join.call(t,e)}function Bd(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;var e=[],n=0;e[0]={value:t[0],identifier:0};for(var r=1;r<t.length;r++)t[r]===t[r-1]?n++:n=0,e.push({value:t[r],identifier:n});return e}function pb(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;for(var e=[],n=0;n<t.length;n++)e.push(t[n].value);return e}function zw(t,e){for(var n,r=0,a=0;a<t.length;a++){var s=t[a],i=Array.isArray(s);if(a===0&&i&&(r=s.length),i&&s.length!==r)return;var o=i?zw(s,e):e(s);if(n===void 0)n=o;else if(n!==o)return"mixed"}return n}function Cq(t,e,n,r){if(r<n){if(t.length!==e.length)throw new Zt(t.length,e.length);for(var a=[],s=0;s<t.length;s++)a[s]=Cq(t[s],e[s],n,r+1);return a}else return t.concat(e)}function Eq(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(n,r){return Cq(n,r,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function zA(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.map(d=>d.length),a=Math.max(...r),s=new Array(a).fill(null),i=0;i<e.length;i++)for(var o=e[i],u=r[i],l=0;l<u;l++){var c=a-u+l;o[l]>s[c]&&(s[c]=o[l])}for(var f=0;f<e.length;f++)Tq(e[f],s);return s}function Tq(t,e){for(var n=e.length,r=t.length,a=0;a<r;a++){var s=n-r+a;if(t[a]<e[s]&&t[a]>1||t[a]>e[s])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(r," with size ").concat(t[a]," to size ").concat(e[s]))}}function yc(t,e){var n=Lt(t);if(cu(n,e))return t;Tq(n,e);var r=zA(n,e),a=r.length,s=[...Array(a-n.length).fill(1),...n],i=_ke(t);n.length<a&&(i=BA(i,s),n=Lt(i));for(var o=0;o<a;o++)n[o]<r[o]&&(i=Ike(i,r[o],o),n=Lt(i));return i}function Ike(t,e,n){return Eq(...Array(e).fill(t),n)}function WA(t,e){if(!Array.isArray(t))throw new Error("Array expected");var n=Lt(t);if(e.length!==n.length)throw new Zt(e.length,n.length);for(var r=0;r<e.length;r++)Mn(e[r],n[r]);return e.reduce((a,s)=>a[s],t)}function UA(t,e,n,r){return Array.isArray(t)?t.map(function(a,s){return UA(a,e.concat(s),n,r)}):r(t,e,n)}function _ke(t){return Br([],t)}function zc(t,e,n){if(ob.isTypedFunction(t)){var r=(e.isMatrix?e.size():Lt(e)).map(()=>0),a=e.isMatrix?e.get(r):WA(e,r),s=Object.keys(t.signatures).length===1,i=Oke(t,a,r,e),o=s?Object.values(t.signatures)[0]:t;return i>=1&&i<=3?function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return wF(o,l.slice(0,i),n,t.name)}:function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return wF(o,l,n,t.name)}}return t}function Oke(t,e,n,r){for(var a=[e,n,r],s=3;s>0;s--){var i=a.slice(0,s);if(ob.resolve(t,i)!==null)return s}}function wF(t,e,n,r){try{return t(...e)}catch(a){Fke(a,e,n,r)}}function Fke(t,e,n,r){var a;if(t instanceof TypeError&&((a=t.data)===null||a===void 0?void 0:a.category)==="wrongType"){var s=[];throw s.push("value: ".concat(Ln(e[0]))),e.length>=2&&s.push("index: ".concat(Ln(e[1]))),e.length>=3&&s.push("array: ".concat(Ln(e[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(s.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(t.message))}var Rke="DenseMatrix",Mke=["Matrix"],Pke=ee(Rke,Mke,t=>{var{Matrix:e}=t;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!ka(f))throw new Error("Invalid datatype: "+f);if($t(c))c.type==="DenseMatrix"?(this._data=Wt(c._data),this._size=Wt(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&An(c.data)&&An(c.size))this._data=c.data,this._size=c.size,vF(this._data,this._size),this._datatype=f||c.datatype;else if(An(c))this._data=l(c),this._size=Lt(this._data),vF(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+Ln(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new e,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return zw(this._data,Ln)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return s(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){return WA(this._data,c)},n.prototype.set=function(c,f,d){if(!An(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new Zt(c.length,this._size.length,"<");var h,m,v,y=c.map(function(x){return x+1});u(this,y,d);var b=this._data;for(h=0,m=c.length-1;h<m;h++)v=c[h],Mn(v,b.length),b=b[v];return v=c[c.length-1],Mn(v,b.length),b[v]=f,this};function r(c,f){if(!Ow(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new Zt(h.length,c._size.length);for(var m=f.min(),v=f.max(),y=0,b=c._size.length;y<b;y++)Mn(m[y],c._size[y]),Mn(v[y],c._size[y]);return new n(a(c._data,f,h.length,0),c._datatype)}function a(c,f,d,h){var m=h===d-1,v=f.dimension(h);return m?v.map(function(y){return Mn(y,c.length),c[y]}).valueOf():v.map(function(y){Mn(y,c.length);var b=c[y];return a(b,f,d,h+1)}).valueOf()}function s(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var m=f.size(),v=f.isScalar(),y;if($t(d)?(y=d.size(),d=d.valueOf()):y=Lt(d),v){if(y.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!cu(y,m))try{y.length===0?d=yc([d],m):d=yc(d,m),y=Lt(d)}catch{}if(m.length<c._size.length)throw new Zt(m.length,c._size.length,"<");if(y.length<m.length){for(var b=0,x=0;m[b]===1&&y[b]===1;)b++;for(;m[b]===1;)x++,b++;d=xq(d,m.length,x,y)}if(!cu(m,y))throw new Zt(m,y,">");var w=f.max().map(function(E){return E+1});u(c,w,h);var N=m.length,C=0;i(c._data,f,d,N,C)}return c}function i(c,f,d,h,m){var v=m===h-1,y=f.dimension(m);v?y.forEach(function(b,x){Mn(b),c[b]=d[x[0]]}):y.forEach(function(b,x){Mn(b),i(c[b],f,d[x[0]],h,m+1)})}n.prototype.resize=function(c,f,d){if(!wi(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),m=d?this.clone():this;return o(m,h,f)};function o(c,f,d){if(f.length===0){for(var h=c._data;An(h);)h=h[0];return h}return c._size=f.slice(0),c._data=Pd(c._data,c._size,d),c}n.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=BA(d._data,c);var h=d._size.reduce((m,v)=>m*v);return d._size=LA(c,h),d};function u(c,f,d){for(var h=c._size.slice(0),m=!1;h.length<f.length;)h.push(0),m=!0;for(var v=0,y=f.length;v<y;v++)f[v]>h[v]&&(h[v]=f[v],m=!0);m&&o(c,h,d)}n.prototype.clone=function(){var c=new n({data:Wt(this._data),size:Wt(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype._forEach=function(c){var f=this,d=f.size();if(d.length===1){for(var h=0;h<d[0];h++)c(f._data,h,[h]);return}var m=Array(d.length).fill(0),v=Array(d.length-1),y=v.length-1;v[0]=f._data[0];for(var b=0;b<y;b++)v[b+1]=v[b][0];for(m[y]=-1;;){var x=void 0;for(x=y;x>=0;x--){if(m[x]++,m[x]===d[x]){m[x]=0;continue}v[x]=x===0?f._data[m[x]]:v[x-1][m[x]];for(var w=x;w<y;w++)v[w+1]=v[w][0];for(var N=0;N<d[v.length];N++)m[v.length]=N,c(v[y],N,m.slice(0));break}if(x===-1)break}},n.prototype.map=function(c){var f=this,d=new n(f),h=zc(c,f._data,"map");return d._forEach(function(m,v,y){m[v]=h(m[v],y,f)}),d},n.prototype.forEach=function(c){var f=this,d=zc(c,f._data,"map");f._forEach(function(h,m,v){d(h[m],v,f)})},n.prototype[Symbol.iterator]=function*(){var c=function*(d,h){if(An(d))for(var m=0;m<d.length;m++)yield*c(d[m],h.concat(m));else yield{value:d,index:h}};yield*c(this._data,[])},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new n([h],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,m=function(b){var x=h.map(w=>[w[b]]);f.push(new n(x,c._datatype))},v=0;v<d[1];v++)m(v);return f},n.prototype.toArray=function(){return Wt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return Qt(this._data,c)},n.prototype.toString=function(){return Qt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(Gt(c)&&(c=c.toNumber()),!jt(c)||!wt(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],m=this._size[1],v=Math.min(h-d,m-f),y=[],b=0;b<v;b++)y[b]=this._data[b+d][b+f];return new n({data:y,size:[v],datatype:this._datatype})},n.diagonal=function(c,f,d,h){if(!An(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function($){if(Gt($)&&($=$.toNumber()),!jt($)||!wt($)||$<1)throw new Error("Size values must be positive integers");return $}),d){if(Gt(d)&&(d=d.toNumber()),!jt(d)||!wt(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var m=d>0?d:0,v=d<0?-d:0,y=c[0],b=c[1],x=Math.min(y-v,b-m),w;if(An(f)){if(f.length!==x)throw new Error("Invalid value array length");w=function(I){return f[I]}}else if($t(f)){var N=f.size();if(N.length!==1||N[0]!==x)throw new Error("Invalid matrix length");w=function(I){return f.get([I])}}else w=function(){return f};h||(h=Gt(w(0))?w(0).mul(0):0);var C=[];if(c.length>0){C=Pd(C,c,h);for(var E=0;E<x;E++)C[E+v][E+m]=w(E)}return new n({data:C,size:[y,b]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!jt(c)||!wt(c)||!jt(f)||!wt(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Mn(c,this._size[0]),Mn(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function l(c){return $t(c)?l(c.valueOf()):An(c)?c.map(l):c}return n},{isClass:!0}),xF="clone",Bke=["typed"],Lke=ee(xF,Bke,t=>{var{typed:e}=t;return e(xF,{any:Wt})});function Dq(t){var e=t.length,n=t[0].length,r,a,s=[];for(a=0;a<n;a++){var i=[];for(r=0;r<e;r++)i.push(t[r][a]);s.push(i)}return s}function dp(t){for(var e=0;e<t.length;e++)if(wi(t[e]))return!0;return!1}function fu(t,e){$t(t)&&(t=t.valueOf());for(var n=0,r=t.length;n<r;n++){var a=t[n];Array.isArray(a)?fu(a,e):e(a)}}function qt(t,e,n){return t&&typeof t.map=="function"?t.map(function(r){return qt(r,e)}):e(t)}function Ww(t,e,n){var r=Array.isArray(t)?Lt(t):t.size();if(e<0||e>=r.length)throw new Xi(e,r.length);return $t(t)?t.create(hb(t.valueOf(),e,n),t.datatype()):hb(t,e,n)}function hb(t,e,n){var r,a,s,i;if(e<=0)if(Array.isArray(t[0])){for(i=Dq(t),a=[],r=0;r<i.length;r++)a[r]=hb(i[r],e-1,n);return a}else{for(s=t[0],r=1;r<t.length;r++)s=n(s,t[r]);return s}else{for(a=[],r=0;r<t.length;r++)a[r]=hb(t[r],e-1,n);return a}}function SF(t,e,n,r,a,s,i,o,u,l,c){var f=t._values,d=t._index,h=t._ptr,m,v,y,b;if(r)for(v=h[e],y=h[e+1],m=v;m<y;m++)b=d[m],n[b]!==s?(n[b]=s,i.push(b),r[b]=f[m]):(r[b]=o(r[b],f[m]),a[b]=s);else for(v=h[e],y=h[e+1],m=v;m<y;m++)b=d[m],n[b]!==s?(n[b]=s,i.push(b)):a[b]=s}var NF="isInteger",zke=["typed"],Wke=ee(NF,zke,t=>{var{typed:e}=t;return e(NF,{number:wt,BigNumber:function(r){return r.isInt()},bigint:function(r){return!0},Fraction:function(r){return r.d===1n},"Array | Matrix":e.referToSelf(n=>r=>qt(r,n))})}),Yi="number",pp="number, number";function Aq(t){return Math.abs(t)}Aq.signature=Yi;function $q(t,e){return t+e}$q.signature=pp;function kq(t,e){return t-e}kq.signature=pp;function Iq(t,e){return t*e}Iq.signature=pp;function _q(t){return-t}_q.signature=Yi;function Oq(t){return t}Oq.signature=Yi;function Ch(t){return jAe(t)}Ch.signature=Yi;function Fq(t){return t*t*t}Fq.signature=Yi;function Rq(t){return Math.exp(t)}Rq.signature=Yi;function Mq(t){return HAe(t)}Mq.signature=Yi;function Pq(t,e){if(!wt(t)||!wt(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var n,r=t*e;e!==0;)n=e,e=t%n,t=n;return Math.abs(r/t)}Pq.signature=pp;function Uke(t,e){return Math.log(t)}function Bq(t){return qAe(t)}Bq.signature=Yi;function Lq(t){return UAe(t)}Lq.signature=Yi;function CF(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=e<0;if(n&&(e=-e),e===0)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(t===0)return n?1/0:0;if(!isFinite(t))return n?0:t;var r=Math.pow(Math.abs(t),1/e);return r=t<0?-r:r,n?1/r:r}function XC(t){return Gu(t)}XC.signature=Yi;function zq(t){return t*t}zq.signature=Yi;function Wq(t,e){var n,r,a,s=0,i=1,o=1,u=0;if(!wt(t)||!wt(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)r=Math.floor(t/e),a=t-r*e,n=s,s=i-r*s,i=n,n=o,o=u-r*o,u=n,t=e,e=a;var l;return t<0?l=[-t,-i,-u]:l=[t,t?i:0,u],l}Wq.signature=pp;function Uq(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}Uq.signature=pp;function hh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!wt(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(rq(t,e))}var qke="number",hp="number, number";function qq(t,e){if(!wt(t)||!wt(e))throw new Error("Integers expected in function bitAnd");return t&e}qq.signature=hp;function Vq(t){if(!wt(t))throw new Error("Integer expected in function bitNot");return~t}Vq.signature=qke;function jq(t,e){if(!wt(t)||!wt(e))throw new Error("Integers expected in function bitOr");return t|e}jq.signature=hp;function Hq(t,e){if(!wt(t)||!wt(e))throw new Error("Integers expected in function bitXor");return t^e}Hq.signature=hp;function Gq(t,e){if(!wt(t)||!wt(e))throw new Error("Integers expected in function leftShift");return t<<e}Gq.signature=hp;function Kq(t,e){if(!wt(t)||!wt(e))throw new Error("Integers expected in function rightArithShift");return t>>e}Kq.signature=hp;function Xq(t,e){if(!wt(t)||!wt(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}Xq.signature=hp;function Qo(t,e){if(e<t)return 1;if(e===t)return e;var n=e+t>>1;return Qo(t,n)*Qo(n+1,e)}function Yq(t,e){if(!wt(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!wt(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var n=t-e,r=1,a=e<n?n+1:e+1,s=2,i=e<n?e:n,o=a;o<=t;++o)for(r*=o;s<=i&&r%s===0;)r/=s,++s;return s<=i&&(r/=Qo(s,i)),r}Yq.signature="number, number";var Vke=Math.PI,jke=2*Math.PI,Hke=Math.E,Gke=1.618033988749895,Kke="number",qA="number, number";function Qq(t){return!t}Qq.signature=Kke;function YC(t,e){return!!(t||e)}YC.signature=qA;function QC(t,e){return!!t!=!!e}QC.signature=qA;function JC(t,e){return!!(t&&e)}JC.signature=qA;function mb(t){var e;if(wt(t))return t<=0?isFinite(t)?1/0:NaN:t>171?1/0:Qo(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*mb(1-t));if(t>=171.35)return 1/0;if(t>85){var n=t*t,r=n*t,a=r*t,s=a*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*n)-139/(51840*r)-571/(2488320*a)+163879/(209018880*s)+5246819/(75246796800*s*t))}--t,e=hd[0];for(var i=1;i<hd.length;++i)e+=hd[i]/(t+i);var o=t+Jq+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,t+.5)*Math.exp(-o)*e}mb.signature="number";var Jq=4.7421875,hd=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Zq=.9189385332046728,Xke=5,Yke=7,EF=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function gb(t){if(t<0)return NaN;if(t===0)return 1/0;if(!isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-gb(1-t);t=t-1;for(var e=t+Xke+.5,n=EF[0],r=Yke-1;r>=1;r--)n+=EF[r]/(t+r);return Zq+(t+.5)*Math.log(e)-e+Math.log(n)}gb.signature="number";var Ba="number";function eV(t){return YAe(t)}eV.signature=Ba;function tV(t){return Math.atan(1/t)}tV.signature=Ba;function nV(t){return isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}nV.signature=Ba;function rV(t){return Math.asin(1/t)}rV.signature=Ba;function aV(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}aV.signature=Ba;function sV(t){return Math.acos(1/t)}sV.signature=Ba;function iV(t){var e=1/t,n=Math.sqrt(e*e-1);return Math.log(n+e)}iV.signature=Ba;function oV(t){return QAe(t)}oV.signature=Ba;function uV(t){return JAe(t)}uV.signature=Ba;function lV(t){return 1/Math.tan(t)}lV.signature=Ba;function cV(t){var e=Math.exp(2*t);return(e+1)/(e-1)}cV.signature=Ba;function fV(t){return 1/Math.sin(t)}fV.signature=Ba;function dV(t){return t===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*Gu(t)}dV.signature=Ba;function pV(t){return 1/Math.cos(t)}pV.signature=Ba;function hV(t){return 2/(Math.exp(t)+Math.exp(-t))}hV.signature=Ba;function mV(t){return e$e(t)}mV.signature=Ba;var VA="number";function gV(t){return t<0}gV.signature=VA;function vV(t){return t>0}vV.signature=VA;function yV(t){return Number.isNaN(t)}yV.signature=VA;function Cs(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(n),r))}var TF="isNegative",Qke=["typed","config"],Jke=ee(TF,Qke,t=>{var{typed:e,config:n}=t;return e(TF,{number:r=>ga(r,0,n.relTol,n.absTol)?!1:gV(r),BigNumber:r=>Cs(r,new r.constructor(0),n.relTol,n.absTol)?!1:r.isNeg()&&!r.isZero()&&!r.isNaN(),bigint:r=>r<0n,Fraction:r=>r.s<0n,Unit:e.referToSelf(r=>a=>e.find(r,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(r=>a=>qt(a,r))})}),DF="isNumeric",Zke=["typed"],eIe=ee(DF,Zke,t=>{var{typed:e}=t;return e(DF,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(n=>r=>qt(r,n))})}),AF="hasNumericValue",tIe=["typed","isNumeric"],nIe=ee(AF,tIe,t=>{var{typed:e,isNumeric:n}=t;return e(AF,{boolean:()=>!0,string:function(a){return a.trim().length>0&&!isNaN(Number(a))},any:function(a){return n(a)}})}),$F="isPositive",rIe=["typed","config"],aIe=ee($F,rIe,t=>{var{typed:e,config:n}=t;return e($F,{number:r=>ga(r,0,n.relTol,n.absTol)?!1:vV(r),BigNumber:r=>Cs(r,new r.constructor(0),n.relTol,n.absTol)?!1:!r.isNeg()&&!r.isZero()&&!r.isNaN(),bigint:r=>r>0n,Fraction:r=>r.s>0n&&r.n>0n,Unit:e.referToSelf(r=>a=>e.find(r,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(r=>a=>qt(a,r))})}),kF="isZero",sIe=["typed","equalScalar"],iIe=ee(kF,sIe,t=>{var{typed:e,equalScalar:n}=t;return e(kF,{"number | BigNumber | Complex | Fraction":r=>n(r,0),bigint:r=>r===0n,Unit:e.referToSelf(r=>a=>e.find(r,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(r=>a=>qt(a,r))})}),IF="isNaN",oIe=["typed"],uIe=ee(IF,oIe,t=>{var{typed:e}=t;return e(IF,{number:yV,BigNumber:function(r){return r.isNaN()},bigint:function(r){return!1},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":e.referToSelf(n=>r=>qt(r,n))})}),_F="typeOf",lIe=["typed"],cIe=ee(_F,lIe,t=>{var{typed:e}=t;return e(_F,{any:Ln})});function fIe(t,e,n,r){return ga(t.re,e.re,n,r)&&ga(t.im,e.im,n,r)}var mp=ee("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(n=>(r,a)=>{if(!r.equalBase(a))throw new Error("Cannot compare units with different base");return e.find(n,[r.valueType(),a.valueType()])(r.value,a.value)})}}),vb="equalScalar",dIe=["typed","config"],pIe=ee(vb,dIe,t=>{var{typed:e,config:n}=t,r=mp({typed:e});return e(vb,{"boolean, boolean":function(s,i){return s===i},"number, number":function(s,i){return ga(s,i,n.relTol,n.absTol)},"BigNumber, BigNumber":function(s,i){return s.eq(i)||Cs(s,i,n.relTol,n.absTol)},"bigint, bigint":function(s,i){return s===i},"Fraction, Fraction":function(s,i){return s.equals(i)},"Complex, Complex":function(s,i){return fIe(s,i,n.relTol,n.absTol)}},r)});ee(vb,["typed","config"],t=>{var{typed:e,config:n}=t;return e(vb,{"number, number":function(a,s){return ga(a,s,n.relTol,n.absTol)}})});var hIe="SparseMatrix",mIe=["typed","equalScalar","Matrix"],gIe=ee(hIe,mIe,t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function a(v,y){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(y&&!ka(y))throw new Error("Invalid datatype: "+y);if($t(v))s(this,v,y);else if(v&&An(v.index)&&An(v.ptr)&&An(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=y||v.datatype;else if(An(v))i(this,v,y);else{if(v)throw new TypeError("Unsupported type of data ("+Ln(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=y}}function s(v,y,b){y.type==="SparseMatrix"?(v._values=y._values?Wt(y._values):void 0,v._index=Wt(y._index),v._ptr=Wt(y._ptr),v._size=Wt(y._size),v._datatype=b||y._datatype):i(v,y.valueOf(),b||y._datatype)}function i(v,y,b){v._values=[],v._index=[],v._ptr=[],v._datatype=b;var x=y.length,w=0,N=n,C=0;if(ka(b)&&(N=e.find(n,[b,b])||n,C=e.convert(0,b)),x>0){var E=0;do{v._ptr.push(v._index.length);for(var $=0;$<x;$++){var I=y[$];if(An(I)){if(E===0&&w<I.length&&(w=I.length),E<I.length){var D=I[E];N(D,C)||(v._values.push(D),v._index.push($))}}else E===0&&w<1&&(w=1),N(I,C)||(v._values.push(I),v._index.push($))}E++}while(E<w)}v._ptr.push(v._index.length),v._size=[x,w]}a.prototype=new r,a.prototype.createSparseMatrix=function(v,y){return new a(v,y)},Object.defineProperty(a,"name",{value:"SparseMatrix"}),a.prototype.constructor=a,a.prototype.type="SparseMatrix",a.prototype.isSparseMatrix=!0,a.prototype.getDataType=function(){return zw(this._values,Ln)},a.prototype.storage=function(){return"sparse"},a.prototype.datatype=function(){return this._datatype},a.prototype.create=function(v,y){return new a(v,y)},a.prototype.density=function(){var v=this._size[0],y=this._size[1];return v!==0&&y!==0?this._index.length/(v*y):0},a.prototype.subset=function(v,y,b){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,v);case 2:case 3:return u(this,v,y,b);default:throw new SyntaxError("Wrong number of arguments")}};function o(v,y){if(!Ow(y))throw new TypeError("Invalid index");var b=y.isScalar();if(b)return v.get(y.min());var x=y.size();if(x.length!==v._size.length)throw new Zt(x.length,v._size.length);var w,N,C,E,$=y.min(),I=y.max();for(w=0,N=v._size.length;w<N;w++)Mn($[w],v._size[w]),Mn(I[w],v._size[w]);var D=v._values,k=v._index,A=v._ptr,O=y.dimension(0),B=y.dimension(1),z=[],L=[];O.forEach(function(M,G){L[M]=G[0],z[M]=!0});var F=D?[]:void 0,R=[],q=[];return B.forEach(function(M){for(q.push(R.length),C=A[M],E=A[M+1];C<E;C++)w=k[C],z[w]===!0&&(R.push(L[w]),F&&F.push(D[C]))}),q.push(R.length),new a({values:F,index:R,ptr:q,size:x,datatype:v._datatype})}function u(v,y,b,x){if(!y||y.isIndex!==!0)throw new TypeError("Invalid index");var w=y.size(),N=y.isScalar(),C;if($t(b)?(C=b.size(),b=b.toArray()):C=Lt(b),N){if(C.length!==0)throw new TypeError("Scalar expected");v.set(y.min(),b,x)}else{if(w.length!==1&&w.length!==2)throw new Zt(w.length,v._size.length,"<");if(C.length<w.length){for(var E=0,$=0;w[E]===1&&C[E]===1;)E++;for(;w[E]===1;)$++,E++;b=xq(b,w.length,$,C)}if(!cu(w,C))throw new Zt(w,C,">");if(w.length===1){var I=y.dimension(0);I.forEach(function(A,O){Mn(A),v.set([A,0],b[O[0]],x)})}else{var D=y.dimension(0),k=y.dimension(1);D.forEach(function(A,O){Mn(A),k.forEach(function(B,z){Mn(B),v.set([A,B],b[O[0]][z[0]],x)})})}}return v}a.prototype.get=function(v){if(!An(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Zt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var y=v[0],b=v[1];Mn(y,this._size[0]),Mn(b,this._size[1]);var x=l(y,this._ptr[b],this._ptr[b+1],this._index);return x<this._ptr[b+1]&&this._index[x]===y?this._values[x]:0},a.prototype.set=function(v,y,b){if(!An(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Zt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var x=v[0],w=v[1],N=this._size[0],C=this._size[1],E=n,$=0;ka(this._datatype)&&(E=e.find(n,[this._datatype,this._datatype])||n,$=e.convert(0,this._datatype)),(x>N-1||w>C-1)&&(d(this,Math.max(x+1,N),Math.max(w+1,C),b),N=this._size[0],C=this._size[1]),Mn(x,N),Mn(w,C);var I=l(x,this._ptr[w],this._ptr[w+1],this._index);return I<this._ptr[w+1]&&this._index[I]===x?E(y,$)?c(I,w,this._values,this._index,this._ptr):this._values[I]=y:E(y,$)||f(I,x,w,y,this._values,this._index,this._ptr),this};function l(v,y,b,x){if(b-y===0)return b;for(var w=y;w<b;w++)if(x[w]===v)return w;return y}function c(v,y,b,x,w){b.splice(v,1),x.splice(v,1);for(var N=y+1;N<w.length;N++)w[N]--}function f(v,y,b,x,w,N,C){w.splice(v,0,x),N.splice(v,0,y);for(var E=b+1;E<C.length;E++)C[E]++}a.prototype.resize=function(v,y,b){if(!wi(v))throw new TypeError("Array or Matrix expected");var x=v.valueOf().map(N=>Array.isArray(N)&&N.length===1?N[0]:N);if(x.length!==2)throw new Error("Only two dimensions matrix are supported");x.forEach(function(N){if(!jt(N)||!wt(N)||N<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Qt(x)+")")});var w=b?this.clone():this;return d(w,x[0],x[1],y)};function d(v,y,b,x){var w=x||0,N=n,C=0;ka(v._datatype)&&(N=e.find(n,[v._datatype,v._datatype])||n,C=e.convert(0,v._datatype),w=e.convert(w,v._datatype));var E=!N(w,C),$=v._size[0],I=v._size[1],D,k,A;if(b>I){for(k=I;k<b;k++)if(v._ptr[k]=v._values.length,E)for(D=0;D<$;D++)v._values.push(w),v._index.push(D);v._ptr[b]=v._values.length}else b<I&&(v._ptr.splice(b+1,I-b),v._values.splice(v._ptr[b],v._values.length),v._index.splice(v._ptr[b],v._index.length));if(I=b,y>$){if(E){var O=0;for(k=0;k<I;k++){v._ptr[k]=v._ptr[k]+O,A=v._ptr[k+1]+O;var B=0;for(D=$;D<y;D++,B++)v._values.splice(A+B,0,w),v._index.splice(A+B,0,D),O++}v._ptr[I]=v._values.length}}else if(y<$){var z=0;for(k=0;k<I;k++){v._ptr[k]=v._ptr[k]-z;var L=v._ptr[k],F=v._ptr[k+1]-z;for(A=L;A<F;A++)D=v._index[A],D>y-1&&(v._values.splice(A,1),v._index.splice(A,1),z++)}v._ptr[k]=v._values.length}return v._size[0]=y,v._size[1]=b,v}a.prototype.reshape=function(v,y){if(!An(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(M){if(!jt(M)||!wt(M)||M<=-2||M===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Qt(v)+")")});var b=this._size[0]*this._size[1];v=LA(v,b);var x=v[0]*v[1];if(b!==x)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=y?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return w;for(var N=[],C=0;C<w._ptr.length;C++)for(var E=0;E<w._ptr[C+1]-w._ptr[C];E++)N.push(C);for(var $=w._values.slice(),I=w._index.slice(),D=0;D<w._index.length;D++){var k=I[D],A=N[D],O=k*w._size[1]+A;N[D]=O%v[1],I[D]=Math.floor(O/v[1])}w._values.length=0,w._index.length=0,w._ptr.length=v[1]+1,w._size=v.slice();for(var B=0;B<w._ptr.length;B++)w._ptr[B]=0;for(var z=0;z<$.length;z++){var L=I[z],F=N[z],R=$[z],q=l(L,w._ptr[F],w._ptr[F+1],w._index);f(q,L,F,R,w._values,w._index,w._ptr)}return w},a.prototype.clone=function(){var v=new a({values:this._values?Wt(this._values):void 0,index:Wt(this._index),ptr:Wt(this._ptr),size:Wt(this._size),datatype:this._datatype});return v},a.prototype.size=function(){return this._size.slice(0)},a.prototype.map=function(v,y){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var b=this,x=this._size[0],w=this._size[1],N=zc(v,b,"map"),C=function($,I,D){return N($,[I,D],b)};return h(this,0,x-1,0,w-1,C,y)};function h(v,y,b,x,w,N,C){var E=[],$=[],I=[],D=n,k=0;ka(v._datatype)&&(D=e.find(n,[v._datatype,v._datatype])||n,k=e.convert(0,v._datatype));for(var A=function(j,ne,ue){var te=N(j,ne,ue);D(te,k)||(E.push(te),$.push(ne))},O=x;O<=w;O++){I.push(E.length);var B=v._ptr[O],z=v._ptr[O+1];if(C)for(var L=B;L<z;L++){var F=v._index[L];F>=y&&F<=b&&A(v._values[L],F-y,O-x)}else{for(var R={},q=B;q<z;q++){var M=v._index[q];R[M]=v._values[q]}for(var G=y;G<=b;G++){var V=G in R?R[G]:0;A(V,G-y,O-x)}}}return I.push(E.length),new a({values:E,index:$,ptr:I,size:[b-y+1,w-x+1]})}a.prototype.forEach=function(v,y){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var b=this,x=this._size[0],w=this._size[1],N=zc(v,b,"forEach"),C=0;C<w;C++){var E=this._ptr[C],$=this._ptr[C+1];if(y)for(var I=E;I<$;I++){var D=this._index[I];N(this._values[I],[D,C],b)}else{for(var k={},A=E;A<$;A++){var O=this._index[A];k[O]=this._values[A]}for(var B=0;B<x;B++){var z=B in k?k[B]:0;N(z,[B,C],b)}}}},a.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],y=0;y<v;y++)for(var b=this._ptr[y],x=this._ptr[y+1],w=b;w<x;w++){var N=this._index[w];yield{value:this._values[w],index:[N,y]}}},a.prototype.toArray=function(){return m(this._values,this._index,this._ptr,this._size,!0)},a.prototype.valueOf=function(){return m(this._values,this._index,this._ptr,this._size,!1)};function m(v,y,b,x,w){var N=x[0],C=x[1],E=[],$,I;for($=0;$<N;$++)for(E[$]=[],I=0;I<C;I++)E[$][I]=0;for(I=0;I<C;I++)for(var D=b[I],k=b[I+1],A=D;A<k;A++)$=y[A],E[$][I]=v?w?Wt(v[A]):v[A]:1;return E}return a.prototype.format=function(v){for(var y=this._size[0],b=this._size[1],x=this.density(),w="Sparse Matrix ["+Qt(y,v)+" x "+Qt(b,v)+"] density: "+Qt(x,v)+`
`,N=0;N<b;N++)for(var C=this._ptr[N],E=this._ptr[N+1],$=C;$<E;$++){var I=this._index[$];w+=`
    (`+Qt(I,v)+", "+Qt(N,v)+") ==> "+(this._values?Qt(this._values[$],v):"X")}return w},a.prototype.toString=function(){return Qt(this.toArray())},a.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},a.prototype.diagonal=function(v){if(v){if(Gt(v)&&(v=v.toNumber()),!jt(v)||!wt(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var y=v>0?v:0,b=v<0?-v:0,x=this._size[0],w=this._size[1],N=Math.min(x-b,w-y),C=[],E=[],$=[];$[0]=0;for(var I=y;I<w&&C.length<N;I++)for(var D=this._ptr[I],k=this._ptr[I+1],A=D;A<k;A++){var O=this._index[A];if(O===I-y+b){C.push(this._values[A]),E[C.length-1]=O-b;break}}return $.push(C.length),new a({values:C,index:E,ptr:$,size:[N,1]})},a.fromJSON=function(v){return new a(v)},a.diagonal=function(v,y,b,x,w){if(!An(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(M){if(Gt(M)&&(M=M.toNumber()),!jt(M)||!wt(M)||M<1)throw new Error("Size values must be positive integers");return M}),b){if(Gt(b)&&(b=b.toNumber()),!jt(b)||!wt(b))throw new TypeError("The parameter k must be an integer number")}else b=0;var N=n,C=0;ka(w)&&(N=e.find(n,[w,w])||n,C=e.convert(0,w));var E=b>0?b:0,$=b<0?-b:0,I=v[0],D=v[1],k=Math.min(I-$,D-E),A;if(An(y)){if(y.length!==k)throw new Error("Invalid value array length");A=function(G){return y[G]}}else if($t(y)){var O=y.size();if(O.length!==1||O[0]!==k)throw new Error("Invalid matrix length");A=function(G){return y.get([G])}}else A=function(){return y};for(var B=[],z=[],L=[],F=0;F<D;F++){L.push(B.length);var R=F-E;if(R>=0&&R<k){var q=A(R);N(q,C)||(z.push(R+$),B.push(q))}}return L.push(B.length),new a({values:B,index:z,ptr:L,size:[I,D]})},a.prototype.swapRows=function(v,y){if(!jt(v)||!wt(v)||!jt(y)||!wt(y))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Mn(v,this._size[0]),Mn(y,this._size[0]),a._swapRows(v,y,this._size[1],this._values,this._index,this._ptr),this},a._forEachRow=function(v,y,b,x,w){for(var N=x[v],C=x[v+1],E=N;E<C;E++)w(b[E],y[E])},a._swapRows=function(v,y,b,x,w,N){for(var C=0;C<b;C++){var E=N[C],$=N[C+1],I=l(v,E,$,w),D=l(y,E,$,w);if(I<$&&D<$&&w[I]===v&&w[D]===y){if(x){var k=x[I];x[I]=x[D],x[D]=k}continue}if(I<$&&w[I]===v&&(D>=$||w[D]!==y)){var A=x?x[I]:void 0;w.splice(D,0,y),x&&x.splice(D,0,A),w.splice(D<=I?I+1:I,1),x&&x.splice(D<=I?I+1:I,1);continue}if(D<$&&w[D]===y&&(I>=$||w[I]!==v)){var O=x?x[D]:void 0;w.splice(I,0,v),x&&x.splice(I,0,O),w.splice(I<=D?D+1:D,1),x&&x.splice(I<=D?D+1:D,1)}}},a},{isClass:!0}),vIe="number",yIe=["typed"];function bIe(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var n={"0b":2,"0o":8,"0x":16}[e[1]],r=e[2],a=e[3];return{input:t,radix:n,integerPart:r,fractionalPart:a}}else return null}function wIe(t){for(var e=parseInt(t.integerPart,t.radix),n=0,r=0;r<t.fractionalPart.length;r++){var a=parseInt(t.fractionalPart[r],t.radix);n+=a/Math.pow(t.radix,r+1)}var s=e+n;if(isNaN(s))throw new SyntaxError('String "'+t.input+'" is not a valid number');return s}var xIe=ee(vIe,yIe,t=>{var{typed:e}=t,n=e("number",{"":function(){return 0},number:function(a){return a},string:function(a){if(a==="NaN")return NaN;var s=bIe(a);if(s)return wIe(s);var i=0,o=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(i=Number(o[2]),a=o[1]);var u=Number(a);if(isNaN(u))throw new SyntaxError('String "'+a+'" is not a valid number');if(o){if(u>2**i-1)throw new SyntaxError('String "'.concat(a,'" is out of range'));u>=2**(i-1)&&(u=u-2**i)}return u},BigNumber:function(a){return a.toNumber()},bigint:function(a){return Number(a)},Fraction:function(a){return a.valueOf()},Unit:e.referToSelf(r=>a=>{var s=a.clone();return s.value=r(a.value),s}),null:function(a){return 0},"Unit, string | Unit":function(a,s){return a.toNumber(s)},"Array | Matrix":e.referToSelf(r=>a=>qt(a,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),SIe="bigint",NIe=["typed"],CIe=ee(SIe,NIe,t=>{var{typed:e}=t,n=e("bigint",{"":function(){return 0n},bigint:function(a){return a},number:function(a){return BigInt(a.toFixed())},BigNumber:function(a){return BigInt(a.round().toString())},Fraction:function(a){return BigInt(a.valueOf().toFixed())},"string | boolean":function(a){return BigInt(a)},null:function(a){return 0n},"Array | Matrix":e.referToSelf(r=>a=>qt(a,r))});return n.fromJSON=function(r){return BigInt(r.value)},n}),OF="string",EIe=["typed"],TIe=ee(OF,EIe,t=>{var{typed:e}=t;return e(OF,{"":function(){return""},number:Sc,null:function(r){return"null"},boolean:function(r){return r+""},string:function(r){return r},"Array | Matrix":e.referToSelf(n=>r=>qt(r,n)),any:function(r){return String(r)}})}),FF="boolean",DIe=["typed"],AIe=ee(FF,DIe,t=>{var{typed:e}=t;return e(FF,{"":function(){return!1},boolean:function(r){return r},number:function(r){return!!r},null:function(r){return!1},BigNumber:function(r){return!r.isZero()},string:function(r){var a=r.toLowerCase();if(a==="true")return!0;if(a==="false")return!1;var s=Number(r);if(r!==""&&!isNaN(s))return!!s;throw new Error('Cannot convert "'+r+'" to a boolean')},"Array | Matrix":e.referToSelf(n=>r=>qt(r,n))})}),$Ie="bignumber",kIe=["typed","BigNumber"],IIe=ee($Ie,kIe,t=>{var{typed:e,BigNumber:n}=t;return e("bignumber",{"":function(){return new n(0)},number:function(a){return new n(a+"")},string:function(a){var s=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var i=s[2],o=n(s[1]),u=new n(2).pow(Number(i));if(o.gt(u.sub(1)))throw new SyntaxError('String "'.concat(a,'" is out of range'));var l=new n(2).pow(Number(i)-1);return o.gte(l)?o.sub(u):o}return new n(a)},BigNumber:function(a){return a},bigint:function(a){return new n(a.toString())},Unit:e.referToSelf(r=>a=>{var s=a.clone();return s.value=r(a.value),s}),Fraction:function(a){return new n(String(a.n)).div(String(a.d)).times(String(a.s))},null:function(a){return new n(0)},"Array | Matrix":e.referToSelf(r=>a=>qt(a,r))})}),_Ie="complex",OIe=["typed","Complex"],FIe=ee(_Ie,OIe,t=>{var{typed:e,Complex:n}=t;return e("complex",{"":function(){return n.ZERO},number:function(a){return new n(a,0)},"number, number":function(a,s){return new n(a,s)},"BigNumber, BigNumber":function(a,s){return new n(a.toNumber(),s.toNumber())},Fraction:function(a){return new n(a.valueOf(),0)},Complex:function(a){return a.clone()},string:function(a){return n(a)},null:function(a){return n(0)},Object:function(a){if("re"in a&&"im"in a)return new n(a.re,a.im);if("r"in a&&"phi"in a||"abs"in a&&"arg"in a)return new n(a);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(r=>a=>qt(a,r))})}),RIe="fraction",MIe=["typed","Fraction"],PIe=ee(RIe,MIe,t=>{var{typed:e,Fraction:n}=t;return e("fraction",{number:function(a){if(!isFinite(a)||isNaN(a))throw new Error(a+" cannot be represented as a fraction");return new n(a)},string:function(a){return new n(a)},"number, number":function(a,s){return new n(a,s)},"bigint, bigint":function(a,s){return new n(a,s)},null:function(a){return new n(0)},BigNumber:function(a){return new n(a.toString())},bigint:function(a){return new n(a.toString())},Fraction:function(a){return a},Unit:e.referToSelf(r=>a=>{var s=a.clone();return s.value=r(a.value),s}),Object:function(a){return new n(a)},"Array | Matrix":e.referToSelf(r=>a=>qt(a,r))})}),RF="matrix",BIe=["typed","Matrix","DenseMatrix","SparseMatrix"],LIe=ee(RF,BIe,t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:a}=t;return e(RF,{"":function(){return s([])},string:function(o){return s([],o)},"string, string":function(o,u){return s([],o,u)},Array:function(o){return s(o)},Matrix:function(o){return s(o,o.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(i,o,u){if(o==="dense"||o==="default"||o===void 0)return new r(i,u);if(o==="sparse")return new a(i,u);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),MF="matrixFromFunction",zIe=["typed","matrix","isZero"],WIe=ee(MF,zIe,t=>{var{typed:e,matrix:n,isZero:r}=t;return e(MF,{"Array | Matrix, function, string, string":function(i,o,u,l){return a(i,o,u,l)},"Array | Matrix, function, string":function(i,o,u){return a(i,o,u)},"Matrix, function":function(i,o){return a(i,o,"dense")},"Array, function":function(i,o){return a(i,o,"dense").toArray()},"Array | Matrix, string, function":function(i,o,u){return a(i,u,o)},"Array | Matrix, string, string, function":function(i,o,u,l){return a(i,l,o,u)}});function a(s,i,o,u){var l;return u!==void 0?l=n(o,u):l=n(o),l.resize(s),l.forEach(function(c,f){var d=i(f);r(d)||l.set(f,d)}),l}}),PF="matrixFromRows",UIe=["typed","matrix","flatten","size"],qIe=ee(PF,UIe,t=>{var{typed:e,matrix:n,flatten:r,size:a}=t;return e(PF,{"...Array":function(u){return s(u)},"...Matrix":function(u){return n(s(u.map(l=>l.toArray())))}});function s(o){if(o.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var u=i(o[0]),l=[];for(var c of o){var f=i(c);if(f!==u)throw new TypeError("The vectors had different length: "+(u|0)+"  "+(f|0));l.push(r(c))}return l}function i(o){var u=a(o);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),BF="matrixFromColumns",VIe=["typed","matrix","flatten","size"],jIe=ee(BF,VIe,t=>{var{typed:e,matrix:n,flatten:r,size:a}=t;return e(BF,{"...Array":function(u){return s(u)},"...Matrix":function(u){return n(s(u.map(l=>l.toArray())))}});function s(o){if(o.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var u=i(o[0]),l=[],c=0;c<u;c++)l[c]=[];for(var f of o){var d=i(f);if(d!==u)throw new TypeError("The vectors had different length: "+(u|0)+"  "+(d|0));for(var h=r(f),m=0;m<u;m++)l[m].push(h[m])}return l}function i(o){var u=a(o);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),LF="splitUnit",HIe=["typed"],GIe=ee(LF,HIe,t=>{var{typed:e}=t;return e(LF,{"Unit, Array":function(r,a){return r.splitUnit(a)}})}),zF="unaryMinus",KIe=["typed"],XIe=ee(zF,KIe,t=>{var{typed:e}=t;return e(zF,{number:_q,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:e.referToSelf(n=>r=>{var a=r.clone();return a.value=e.find(n,a.valueType())(r.value),a}),"Array | Matrix":e.referToSelf(n=>r=>qt(r,n))})}),WF="unaryPlus",YIe=["typed","config","numeric"],QIe=ee(WF,YIe,t=>{var{typed:e,config:n,numeric:r}=t;return e(WF,{number:Oq,Complex:function(s){return s},BigNumber:function(s){return s},bigint:function(s){return s},Fraction:function(s){return s},Unit:function(s){return s.clone()},"Array | Matrix":e.referToSelf(a=>s=>qt(s,a)),boolean:function(s){return r(s?1:0,n.number)},string:function(s){return r(s,Il(s,n))}})}),UF="abs",JIe=["typed"],ZIe=ee(UF,JIe,t=>{var{typed:e}=t;return e(UF,{number:Aq,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":e.referToSelf(n=>r=>qt(r,n))})}),qF="apply",e_e=["typed","isInteger"],jA=ee(qF,e_e,t=>{var{typed:e,isInteger:n}=t;return e(qF,{"Array | Matrix, number | BigNumber, function":function(a,s,i){if(!n(s))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(a)?Lt(a):a.size();if(s<0||s>=o.length)throw new Xi(s,o.length);return $t(a)?a.create(yb(a.valueOf(),s,i),a.datatype()):yb(a,s,i)}})});function yb(t,e,n){var r,a,s;if(e<=0)if(Array.isArray(t[0])){for(s=t_e(t),a=[],r=0;r<s.length;r++)a[r]=yb(s[r],e-1,n);return a}else return n(t);else{for(a=[],r=0;r<t.length;r++)a[r]=yb(t[r],e-1,n);return a}}function t_e(t){var e=t.length,n=t[0].length,r,a,s=[];for(a=0;a<n;a++){var i=[];for(r=0;r<e;r++)i.push(t[r][a]);s.push(i)}return s}var VF="addScalar",n_e=["typed"],r_e=ee(VF,n_e,t=>{var{typed:e}=t;return e(VF,{"number, number":$q,"Complex, Complex":function(r,a){return r.add(a)},"BigNumber, BigNumber":function(r,a){return r.plus(a)},"bigint, bigint":function(r,a){return r+a},"Fraction, Fraction":function(r,a){return r.add(a)},"Unit, Unit":e.referToSelf(n=>(r,a)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(a))throw new Error("Units do not match");var s=r.clone();return s.value=e.find(n,[s.valueType(),a.valueType()])(s.value,a.value),s.fixPrefix=!1,s})})}),jF="subtractScalar",a_e=["typed"],s_e=ee(jF,a_e,t=>{var{typed:e}=t;return e(jF,{"number, number":kq,"Complex, Complex":function(r,a){return r.sub(a)},"BigNumber, BigNumber":function(r,a){return r.minus(a)},"bigint, bigint":function(r,a){return r-a},"Fraction, Fraction":function(r,a){return r.sub(a)},"Unit, Unit":e.referToSelf(n=>(r,a)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(a))throw new Error("Units do not match");var s=r.clone();return s.value=e.find(n,[s.valueType(),a.valueType()])(s.value,a.value),s.fixPrefix=!1,s})})}),HF="cbrt",i_e=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],o_e=ee(HF,i_e,t=>{var{config:e,typed:n,isNegative:r,unaryMinus:a,matrix:s,Complex:i,BigNumber:o,Fraction:u}=t;return n(HF,{number:Ch,Complex:l,"Complex, boolean":l,BigNumber:function(d){return d.cbrt()},Unit:c});function l(f,d){var h=f.arg()/3,m=f.abs(),v=new i(Ch(m),0).mul(new i(0,h).exp());if(d){var y=[v,new i(Ch(m),0).mul(new i(0,h+Math.PI*2/3).exp()),new i(Ch(m),0).mul(new i(0,h-Math.PI*2/3).exp())];return e.matrix==="Array"?y:s(y)}else return v}function c(f){if(f.value&&eu(f.value)){var d=f.clone();return d.value=1,d=d.pow(1/3),d.value=l(f.value),d}else{var h=r(f.value);h&&(f.value=a(f.value));var m;Gt(f.value)?m=new o(1).div(3):Og(f.value)?m=new u(1,3):m=1/3;var v=f.pow(m);return h&&(v.value=a(v.value)),v}}}),u_e="matAlgo11xS0s",l_e=["typed","equalScalar"],ba=ee(u_e,l_e,t=>{var{typed:e,equalScalar:n}=t;return function(a,s,i,o){var u=a._values,l=a._index,c=a._ptr,f=a._size,d=a._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,y=n,b=0,x=i;typeof d=="string"&&(v=d,y=e.find(n,[v,v]),b=e.convert(0,v),s=e.convert(s,v),x=e.find(i,[v,v]));for(var w=[],N=[],C=[],E=0;E<m;E++){C[E]=N.length;for(var $=c[E],I=c[E+1],D=$;D<I;D++){var k=l[D],A=o?x(s,u[D]):x(u[D],s);y(A,b)||(N.push(k),w.push(A))}}return C[m]=N.length,a.createSparseMatrix({values:w,index:N,ptr:C,size:[h,m],datatype:v})}}),c_e="matAlgo12xSfs",f_e=["typed","DenseMatrix"],Vr=ee(c_e,f_e,t=>{var{typed:e,DenseMatrix:n}=t;return function(a,s,i,o){var u=a._values,l=a._index,c=a._ptr,f=a._size,d=a._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,y=i;typeof d=="string"&&(v=d,s=e.convert(s,v),y=e.find(i,[v,v]));for(var b=[],x=[],w=[],N=0;N<m;N++){for(var C=N+1,E=c[N],$=c[N+1],I=E;I<$;I++){var D=l[I];x[D]=u[I],w[D]=C}for(var k=0;k<h;k++)N===0&&(b[k]=[]),w[k]===C?b[k][N]=o?y(s,x[k]):y(x[k],s):b[k][N]=o?y(s,0):y(0,s)}return new n({data:b,size:[h,m],datatype:v})}}),d_e="matAlgo14xDs",p_e=["typed"],Qi=ee(d_e,p_e,t=>{var{typed:e}=t;return function(a,s,i,o){var u=a._data,l=a._size,c=a._datatype,f,d=i;typeof c=="string"&&(f=c,s=e.convert(s,f),d=e.find(i,[f,f]));var h=l.length>0?n(d,0,l,l[0],u,s,o):[];return a.createDenseMatrix({data:h,size:Wt(l),datatype:f})};function n(r,a,s,i,o,u,l){var c=[];if(a===s.length-1)for(var f=0;f<i;f++)c[f]=l?r(u,o[f]):r(o[f],u);else for(var d=0;d<i;d++)c[d]=n(r,a+1,s,s[a+1],o[d],u,l);return c}}),ZC="ceil",h_e=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],m_e=ee(ZC,["typed","config","round"],t=>{var{typed:e,config:n,round:r}=t;return e(ZC,{number:function(s){return ga(s,r(s),n.relTol,n.absTol)?r(s):Math.ceil(s)},"number, number":function(s,i){if(ga(s,r(s,i),n.relTol,n.absTol))return r(s,i);var[o,u]="".concat(s,"e").split("e"),l=Math.ceil(Number("".concat(o,"e").concat(Number(u)+i)));return[o,u]="".concat(l,"e").split("e"),Number("".concat(o,"e").concat(Number(u)-i))}})}),g_e=ee(ZC,h_e,t=>{var{typed:e,config:n,round:r,matrix:a,equalScalar:s,zeros:i,DenseMatrix:o}=t,u=ba({typed:e,equalScalar:s}),l=Vr({typed:e,DenseMatrix:o}),c=Qi({typed:e}),f=m_e({typed:e,config:n,round:r});return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.ceil()},"Complex, number":function(h,m){return h.ceil(m)},"Complex, BigNumber":function(h,m){return h.ceil(m.toNumber())},BigNumber:function(h){return Cs(h,r(h),n.relTol,n.absTol)?r(h):h.ceil()},"BigNumber, BigNumber":function(h,m){return Cs(h,r(h,m),n.relTol,n.absTol)?r(h,m):h.toDecimalPlaces(m.toNumber(),vl.ROUND_CEIL)},Fraction:function(h){return h.ceil()},"Fraction, number":function(h,m){return h.ceil(m)},"Fraction, BigNumber":function(h,m){return h.ceil(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(h,m,v){var y=h.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>qt(h,y=>d(y,m,v))),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>qt(h,d)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>qt(h,v=>d(v,m))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>u(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(a(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>s(h,0)?i(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):l(m,h,d,!0))})}),GF="cube",v_e=["typed"],y_e=ee(GF,v_e,t=>{var{typed:e}=t;return e(GF,{number:Fq,Complex:function(r){return r.mul(r).mul(r)},BigNumber:function(r){return r.times(r).times(r)},bigint:function(r){return r*r*r},Fraction:function(r){return r.pow(3)},Unit:function(r){return r.pow(3)}})}),KF="exp",b_e=["typed"],w_e=ee(KF,b_e,t=>{var{typed:e}=t;return e(KF,{number:Rq,Complex:function(r){return r.exp()},BigNumber:function(r){return r.exp()}})}),XF="expm1",x_e=["typed","Complex"],S_e=ee(XF,x_e,t=>{var{typed:e,Complex:n}=t;return e(XF,{number:Mq,Complex:function(a){var s=Math.exp(a.re);return new n(s*Math.cos(a.im)-1,s*Math.sin(a.im))},BigNumber:function(a){return a.exp().minus(1)}})}),eE="fix",N_e=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],C_e=ee(eE,["typed","ceil","floor"],t=>{var{typed:e,ceil:n,floor:r}=t;return e(eE,{number:function(s){return s>0?r(s):n(s)},"number, number":function(s,i){return s>0?r(s,i):n(s,i)}})}),E_e=ee(eE,N_e,t=>{var{typed:e,Complex:n,matrix:r,ceil:a,floor:s,equalScalar:i,zeros:o,DenseMatrix:u}=t,l=Vr({typed:e,DenseMatrix:u}),c=Qi({typed:e}),f=C_e({typed:e,ceil:a,floor:s});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(h){return new n(h.re>0?Math.floor(h.re):Math.ceil(h.re),h.im>0?Math.floor(h.im):Math.ceil(h.im))},"Complex, number":function(h,m){return new n(h.re>0?s(h.re,m):a(h.re,m),h.im>0?s(h.im,m):a(h.im,m))},"Complex, BigNumber":function(h,m){var v=m.toNumber();return new n(h.re>0?s(h.re,v):a(h.re,v),h.im>0?s(h.im,v):a(h.im,v))},BigNumber:function(h){return h.isNegative()?a(h):s(h)},"BigNumber, number | BigNumber":function(h,m){return h.isNegative()?a(h,m):s(h,m)},Fraction:function(h){return h.s<0n?h.ceil():h.floor()},"Fraction, number | BigNumber":function(h,m){return h.s<0n?a(h,m):s(h,m)},"Unit, number, Unit":e.referToSelf(d=>function(h,m,v){var y=h.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>qt(h,y=>d(y,m,v))),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>qt(h,d)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(h,m)=>qt(h,v=>d(v,m))),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(r(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>i(h,0)?o(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):l(m,h,d,!0))})}),tE="floor",T_e=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],D_e=ee(tE,["typed","config","round"],t=>{var{typed:e,config:n,round:r}=t;return e(tE,{number:function(s){return ga(s,r(s),n.relTol,n.absTol)?r(s):Math.floor(s)},"number, number":function(s,i){if(ga(s,r(s,i),n.relTol,n.absTol))return r(s,i);var[o,u]="".concat(s,"e").split("e"),l=Math.floor(Number("".concat(o,"e").concat(Number(u)+i)));return[o,u]="".concat(l,"e").split("e"),Number("".concat(o,"e").concat(Number(u)-i))}})}),bV=ee(tE,T_e,t=>{var{typed:e,config:n,round:r,matrix:a,equalScalar:s,zeros:i,DenseMatrix:o}=t,u=ba({typed:e,equalScalar:s}),l=Vr({typed:e,DenseMatrix:o}),c=Qi({typed:e}),f=D_e({typed:e,config:n,round:r});return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.floor()},"Complex, number":function(h,m){return h.floor(m)},"Complex, BigNumber":function(h,m){return h.floor(m.toNumber())},BigNumber:function(h){return Cs(h,r(h),n.relTol,n.absTol)?r(h):h.floor()},"BigNumber, BigNumber":function(h,m){return Cs(h,r(h,m),n.relTol,n.absTol)?r(h,m):h.toDecimalPlaces(m.toNumber(),vl.ROUND_FLOOR)},Fraction:function(h){return h.floor()},"Fraction, number":function(h,m){return h.floor(m)},"Fraction, BigNumber":function(h,m){return h.floor(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(h,m,v){var y=h.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>qt(h,y=>d(y,m,v))),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>qt(h,d)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>qt(h,v=>d(v,m))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>u(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(a(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>s(h,0)?i(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):l(m,h,d,!0))})}),A_e="matAlgo02xDS0",$_e=["typed","equalScalar"],Ji=ee(A_e,$_e,t=>{var{typed:e,equalScalar:n}=t;return function(a,s,i,o){var u=a._data,l=a._size,c=a._datatype||a.getDataType(),f=s._values,d=s._index,h=s._ptr,m=s._size,v=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==m.length)throw new Zt(l.length,m.length);if(l[0]!==m[0]||l[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+m+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var y=l[0],b=l[1],x,w=n,N=0,C=i;typeof c=="string"&&c===v&&c!=="mixed"&&(x=c,w=e.find(n,[x,x]),N=e.convert(0,x),C=e.find(i,[x,x]));for(var E=[],$=[],I=[],D=0;D<b;D++){I[D]=$.length;for(var k=h[D],A=h[D+1],O=k;O<A;O++){var B=d[O],z=o?C(f[O],u[B][D]):C(u[B][D],f[O]);w(z,N)||($.push(B),E.push(z))}}return I[b]=$.length,s.createSparseMatrix({values:E,index:$,ptr:I,size:[y,b],datatype:c===a._datatype&&v===s._datatype?x:void 0})}}),k_e="matAlgo03xDSf",I_e=["typed"],Ja=ee(k_e,I_e,t=>{var{typed:e}=t;return function(r,a,s,i){var o=r._data,u=r._size,l=r._datatype||r.getDataType(),c=a._values,f=a._index,d=a._ptr,h=a._size,m=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==h.length)throw new Zt(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=u[0],y=u[1],b,x=0,w=s;typeof l=="string"&&l===m&&l!=="mixed"&&(b=l,x=e.convert(0,b),w=e.find(s,[b,b]));for(var N=[],C=0;C<v;C++)N[C]=[];for(var E=[],$=[],I=0;I<y;I++){for(var D=I+1,k=d[I],A=d[I+1],O=k;O<A;O++){var B=f[O];E[B]=i?w(c[O],o[B][I]):w(o[B][I],c[O]),$[B]=D}for(var z=0;z<v;z++)$[z]===D?N[z][I]=E[z]:N[z][I]=i?w(x,o[z][I]):w(o[z][I],x)}return r.createDenseMatrix({data:N,size:[v,y],datatype:l===r._datatype&&m===a._datatype?b:void 0})}}),__e="matAlgo05xSfSf",O_e=["typed","equalScalar"],Uw=ee(__e,O_e,t=>{var{typed:e,equalScalar:n}=t;return function(a,s,i){var o=a._values,u=a._index,l=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=s._values,h=s._index,m=s._ptr,v=s._size,y=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==v.length)throw new Zt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var b=c[0],x=c[1],w,N=n,C=0,E=i;typeof f=="string"&&f===y&&f!=="mixed"&&(w=f,N=e.find(n,[w,w]),C=e.convert(0,w),E=e.find(i,[w,w]));var $=o&&d?[]:void 0,I=[],D=[],k=$?[]:void 0,A=$?[]:void 0,O=[],B=[],z,L,F,R;for(L=0;L<x;L++){D[L]=I.length;var q=L+1;for(F=l[L],R=l[L+1];F<R;F++)z=u[F],I.push(z),O[z]=q,k&&(k[z]=o[F]);for(F=m[L],R=m[L+1];F<R;F++)z=h[F],O[z]!==q&&I.push(z),B[z]=q,A&&(A[z]=d[F]);if($)for(F=D[L];F<I.length;){z=I[F];var M=O[z],G=B[z];if(M===q||G===q){var V=M===q?k[z]:C,H=G===q?A[z]:C,j=E(V,H);N(j,C)?I.splice(F,1):($.push(j),F++)}}}return D[x]=I.length,a.createSparseMatrix({values:$,index:I,ptr:D,size:[b,x],datatype:f===a._datatype&&y===s._datatype?w:void 0})}}),F_e="matAlgo13xDD",R_e=["typed"],M_e=ee(F_e,R_e,t=>{var{typed:e}=t;return function(a,s,i){var o=a._data,u=a._size,l=a._datatype,c=s._data,f=s._size,d=s._datatype,h=[];if(u.length!==f.length)throw new Zt(u.length,f.length);for(var m=0;m<u.length;m++){if(u[m]!==f[m])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");h[m]=u[m]}var v,y=i;typeof l=="string"&&l===d&&(v=l,y=e.find(i,[v,v]));var b=h.length>0?n(y,0,h,h[0],o,c):[];return a.createDenseMatrix({data:b,size:h,datatype:v})};function n(r,a,s,i,o,u){var l=[];if(a===s.length-1)for(var c=0;c<i;c++)l[c]=r(o[c],u[c]);else for(var f=0;f<i;f++)l[f]=n(r,a+1,s,s[a+1],o[f],u[f]);return l}});function Yr(t,e){if(cu(t.size(),e.size()))return[t,e];var n=zA(t.size(),e.size());return[t,e].map(r=>P_e(r,n))}function P_e(t,e){return cu(t.size(),e)?t:t.create(yc(t.valueOf(),e),t.datatype())}var B_e="matrixAlgorithmSuite",L_e=["typed","matrix"],zn=ee(B_e,L_e,t=>{var{typed:e,matrix:n}=t,r=M_e({typed:e}),a=Qi({typed:e});return function(i){var o=i.elop,u=i.SD||i.DS,l;o?(l={"DenseMatrix, DenseMatrix":(h,m)=>r(...Yr(h,m),o),"Array, Array":(h,m)=>r(...Yr(n(h),n(m)),o).valueOf(),"Array, DenseMatrix":(h,m)=>r(...Yr(n(h),m),o),"DenseMatrix, Array":(h,m)=>r(...Yr(h,n(m)),o)},i.SS&&(l["SparseMatrix, SparseMatrix"]=(h,m)=>i.SS(...Yr(h,m),o,!1)),i.DS&&(l["DenseMatrix, SparseMatrix"]=(h,m)=>i.DS(...Yr(h,m),o,!1),l["Array, SparseMatrix"]=(h,m)=>i.DS(...Yr(n(h),m),o,!1)),u&&(l["SparseMatrix, DenseMatrix"]=(h,m)=>u(...Yr(m,h),o,!0),l["SparseMatrix, Array"]=(h,m)=>u(...Yr(n(m),h),o,!0))):(l={"DenseMatrix, DenseMatrix":e.referToSelf(h=>(m,v)=>r(...Yr(m,v),h)),"Array, Array":e.referToSelf(h=>(m,v)=>r(...Yr(n(m),n(v)),h).valueOf()),"Array, DenseMatrix":e.referToSelf(h=>(m,v)=>r(...Yr(n(m),v),h)),"DenseMatrix, Array":e.referToSelf(h=>(m,v)=>r(...Yr(m,n(v)),h))},i.SS&&(l["SparseMatrix, SparseMatrix"]=e.referToSelf(h=>(m,v)=>i.SS(...Yr(m,v),h,!1))),i.DS&&(l["DenseMatrix, SparseMatrix"]=e.referToSelf(h=>(m,v)=>i.DS(...Yr(m,v),h,!1)),l["Array, SparseMatrix"]=e.referToSelf(h=>(m,v)=>i.DS(...Yr(n(m),v),h,!1))),u&&(l["SparseMatrix, DenseMatrix"]=e.referToSelf(h=>(m,v)=>u(...Yr(v,m),h,!0)),l["SparseMatrix, Array"]=e.referToSelf(h=>(m,v)=>u(...Yr(n(v),m),h,!0))));var c=i.scalar||"any",f=i.Ds||i.Ss;f&&(o?(l["DenseMatrix,"+c]=(h,m)=>a(h,m,o,!1),l[c+", DenseMatrix"]=(h,m)=>a(m,h,o,!0),l["Array,"+c]=(h,m)=>a(n(h),m,o,!1).valueOf(),l[c+", Array"]=(h,m)=>a(n(m),h,o,!0).valueOf()):(l["DenseMatrix,"+c]=e.referToSelf(h=>(m,v)=>a(m,v,h,!1)),l[c+", DenseMatrix"]=e.referToSelf(h=>(m,v)=>a(v,m,h,!0)),l["Array,"+c]=e.referToSelf(h=>(m,v)=>a(n(m),v,h,!1).valueOf()),l[c+", Array"]=e.referToSelf(h=>(m,v)=>a(n(v),m,h,!0).valueOf())));var d=i.sS!==void 0?i.sS:i.Ss;return o?(i.Ss&&(l["SparseMatrix,"+c]=(h,m)=>i.Ss(h,m,o,!1)),d&&(l[c+", SparseMatrix"]=(h,m)=>d(m,h,o,!0))):(i.Ss&&(l["SparseMatrix,"+c]=e.referToSelf(h=>(m,v)=>i.Ss(m,v,h,!1))),d&&(l[c+", SparseMatrix"]=e.referToSelf(h=>(m,v)=>d(v,m,h,!0)))),o&&o.signatures&&eq(l,o.signatures),l}}),YF="mod",z_e=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],wV=ee(YF,z_e,t=>{var{typed:e,config:n,round:r,matrix:a,equalScalar:s,zeros:i,DenseMatrix:o,concat:u}=t,l=bV({typed:e,config:n,round:r,matrix:a,equalScalar:s,zeros:i,DenseMatrix:o}),c=Ji({typed:e,equalScalar:s}),f=Ja({typed:e}),d=Uw({typed:e,equalScalar:s}),h=ba({typed:e,equalScalar:s}),m=Vr({typed:e,DenseMatrix:o}),v=zn({typed:e,matrix:a,concat:u});return e(YF,{"number, number":y,"BigNumber, BigNumber":function(x,w){return w.isZero()?x:x.sub(w.mul(l(x.div(w))))},"bigint, bigint":function(x,w){if(w===0n)return x;if(x<0){var N=x%w;return N===0n?N:N+w}return x%w},"Fraction, Fraction":function(x,w){return w.equals(0)?x:x.sub(w.mul(l(x.div(w))))}},v({SS:d,DS:f,SD:c,Ss:h,sS:m}));function y(b,x){return x===0?b:b-x*l(b/x)}}),W_e="matAlgo01xDSid",U_e=["typed"],Ol=ee(W_e,U_e,t=>{var{typed:e}=t;return function(r,a,s,i){var o=r._data,u=r._size,l=r._datatype||r.getDataType(),c=a._values,f=a._index,d=a._ptr,h=a._size,m=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==h.length)throw new Zt(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=u[0],y=u[1],b=typeof l=="string"&&l!=="mixed"&&l===m?l:void 0,x=b?e.find(s,[b,b]):s,w,N,C=[];for(w=0;w<v;w++)C[w]=[];var E=[],$=[];for(N=0;N<y;N++){for(var I=N+1,D=d[N],k=d[N+1],A=D;A<k;A++)w=f[A],E[w]=i?x(c[A],o[w][N]):x(o[w][N],c[A]),$[w]=I;for(w=0;w<v;w++)$[w]===I?C[w][N]=E[w]:C[w][N]=o[w][N]}return r.createDenseMatrix({data:C,size:[v,y],datatype:l===r._datatype&&m===a._datatype?b:void 0})}}),q_e="matAlgo04xSidSid",V_e=["typed","equalScalar"],HA=ee(q_e,V_e,t=>{var{typed:e,equalScalar:n}=t;return function(a,s,i){var o=a._values,u=a._index,l=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=s._values,h=s._index,m=s._ptr,v=s._size,y=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==v.length)throw new Zt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var b=c[0],x=c[1],w,N=n,C=0,E=i;typeof f=="string"&&f===y&&f!=="mixed"&&(w=f,N=e.find(n,[w,w]),C=e.convert(0,w),E=e.find(i,[w,w]));var $=o&&d?[]:void 0,I=[],D=[],k=o&&d?[]:void 0,A=o&&d?[]:void 0,O=[],B=[],z,L,F,R,q;for(L=0;L<x;L++){D[L]=I.length;var M=L+1;for(R=l[L],q=l[L+1],F=R;F<q;F++)z=u[F],I.push(z),O[z]=M,k&&(k[z]=o[F]);for(R=m[L],q=m[L+1],F=R;F<q;F++)if(z=h[F],O[z]===M){if(k){var G=E(k[z],d[F]);N(G,C)?O[z]=null:k[z]=G}}else I.push(z),B[z]=M,A&&(A[z]=d[F]);if(k&&A)for(F=D[L];F<I.length;)z=I[F],O[z]===M?($[F]=k[z],F++):B[z]===M?($[F]=A[z],F++):I.splice(F,1)}return D[x]=I.length,a.createSparseMatrix({values:$,index:I,ptr:D,size:[b,x],datatype:f===a._datatype&&y===s._datatype?w:void 0})}}),j_e="matAlgo10xSids",H_e=["typed","DenseMatrix"],ef=ee(j_e,H_e,t=>{var{typed:e,DenseMatrix:n}=t;return function(a,s,i,o){var u=a._values,l=a._index,c=a._ptr,f=a._size,d=a._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,y=i;typeof d=="string"&&(v=d,s=e.convert(s,v),y=e.find(i,[v,v]));for(var b=[],x=[],w=[],N=0;N<m;N++){for(var C=N+1,E=c[N],$=c[N+1],I=E;I<$;I++){var D=l[I];x[D]=u[I],w[D]=C}for(var k=0;k<h;k++)N===0&&(b[k]=[]),w[k]===C?b[k][N]=o?y(s,x[k]):y(x[k],s):b[k][N]=s}return new n({data:b,size:[h,m],datatype:v})}});function tf(t,e,n,r){if(!(this instanceof tf))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+n+(r!=null?"-"+r:"")+" expected)",this.stack=new Error().stack}tf.prototype=new Error;tf.prototype.constructor=Error;tf.prototype.name="ArgumentsError";tf.prototype.isArgumentsError=!0;var QF="gcd",G_e=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],zS="number | BigNumber | Fraction | Matrix | Array",K_e="".concat(zS,", ").concat(zS,", ...").concat(zS);function JF(t){return!t.some(e=>Array.isArray(e))}var X_e=ee(QF,G_e,t=>{var{typed:e,matrix:n,config:r,round:a,equalScalar:s,zeros:i,BigNumber:o,DenseMatrix:u,concat:l}=t,c=wV({typed:e,config:r,round:a,matrix:n,equalScalar:s,zeros:i,DenseMatrix:u,concat:l}),f=Ol({typed:e}),d=HA({typed:e,equalScalar:s}),h=ef({typed:e,DenseMatrix:u}),m=zn({typed:e,matrix:n,concat:l});return e(QF,{"number, number":v,"BigNumber, BigNumber":y,"Fraction, Fraction":(b,x)=>b.gcd(x)},m({SS:d,DS:f,Ss:h}),{[K_e]:e.referToSelf(b=>(x,w,N)=>{for(var C=b(x,w),E=0;E<N.length;E++)C=b(C,N[E]);return C}),Array:e.referToSelf(b=>x=>{if(x.length===1&&Array.isArray(x[0])&&JF(x[0]))return b(...x[0]);if(JF(x))return b(...x);throw new tf("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(b=>x=>b(x.toArray()))});function v(b,x){if(!wt(b)||!wt(x))throw new Error("Parameters in function gcd must be integer numbers");for(var w;x!==0;)w=c(b,x),b=x,x=w;return b<0?-b:b}function y(b,x){if(!b.isInt()||!x.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var w=new o(0);!x.isZero();){var N=c(b,x);b=x,x=N}return b.lt(w)?b.neg():b}}),Y_e="matAlgo06xS0S0",Q_e=["typed","equalScalar"],qw=ee(Y_e,Q_e,t=>{var{typed:e,equalScalar:n}=t;return function(a,s,i){var o=a._values,u=a._size,l=a._datatype||a._data===void 0?a._datatype:a.getDataType(),c=s._values,f=s._size,d=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(u.length!==f.length)throw new Zt(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var h=u[0],m=u[1],v,y=n,b=0,x=i;typeof l=="string"&&l===d&&l!=="mixed"&&(v=l,y=e.find(n,[v,v]),b=e.convert(0,v),x=e.find(i,[v,v]));for(var w=o&&c?[]:void 0,N=[],C=[],E=w?[]:void 0,$=[],I=[],D=0;D<m;D++){C[D]=N.length;var k=D+1;if(SF(a,D,$,E,I,k,N,x),SF(s,D,$,E,I,k,N,x),E)for(var A=C[D];A<N.length;){var O=N[A];if(I[O]===k){var B=E[O];y(B,b)?N.splice(A,1):(w.push(B),A++)}else N.splice(A,1)}else for(var z=C[D];z<N.length;){var L=N[z];I[L]!==k?N.splice(z,1):z++}}return C[m]=N.length,a.createSparseMatrix({values:w,index:N,ptr:C,size:[h,m],datatype:l===a._datatype&&d===s._datatype?v:void 0})}}),ZF="lcm",J_e=["typed","matrix","equalScalar","concat"],Z_e=ee(ZF,J_e,t=>{var{typed:e,matrix:n,equalScalar:r,concat:a}=t,s=Ji({typed:e,equalScalar:r}),i=qw({typed:e,equalScalar:r}),o=ba({typed:e,equalScalar:r}),u=zn({typed:e,matrix:n,concat:a}),l="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(l,", ").concat(l,", ...").concat(l)]=e.referToSelf(d=>(h,m,v)=>{for(var y=d(h,m),b=0;b<v.length;b++)y=d(y,v[b]);return y}),e(ZF,{"number, number":Pq,"BigNumber, BigNumber":f,"Fraction, Fraction":(d,h)=>d.lcm(h)},u({SS:i,DS:s,Ss:o}),c);function f(d,h){if(!d.isInt()||!h.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(h.isZero())return h;for(var m=d.times(h);!h.isZero();){var v=h;h=d.mod(v),d=v}return m.div(d).abs()}}),eR="log10",eOe=["typed","config","Complex"],tOe=ee(eR,eOe,t=>{var{typed:e,config:n,Complex:r}=t;return e(eR,{number:function(s){return s>=0||n.predictable?Bq(s):new r(s,0).log().div(Math.LN10)},Complex:function(s){return new r(s).log().div(Math.LN10)},BigNumber:function(s){return!s.isNegative()||n.predictable?s.log():new r(s.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":e.referToSelf(a=>s=>qt(s,a))})}),tR="log2",nOe=["typed","config","Complex"],rOe=ee(tR,nOe,t=>{var{typed:e,config:n,Complex:r}=t;return e(tR,{number:function(i){return i>=0||n.predictable?Lq(i):a(new r(i,0))},Complex:a,BigNumber:function(i){return!i.isNegative()||n.predictable?i.log(2):a(new r(i.toNumber(),0))},"Array | Matrix":e.referToSelf(s=>i=>qt(i,s))});function a(s){var i=Math.sqrt(s.re*s.re+s.im*s.im);return new r(Math.log2?Math.log2(i):Math.log(i)/Math.LN2,Math.atan2(s.im,s.re)/Math.LN2)}}),aOe="multiplyScalar",sOe=["typed"],iOe=ee(aOe,sOe,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":Iq,"Complex, Complex":function(r,a){return r.mul(a)},"BigNumber, BigNumber":function(r,a){return r.times(a)},"bigint, bigint":function(r,a){return r*a},"Fraction, Fraction":function(r,a){return r.mul(a)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),nR="multiply",oOe=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],uOe=ee(nR,oOe,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:a,equalScalar:s,dot:i}=t,o=ba({typed:e,equalScalar:s}),u=Qi({typed:e});function l(C,E){switch(C.length){case 1:switch(E.length){case 1:if(C[0]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(C[0]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+C[0]+") must match Matrix rows ("+E[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+E.length+" dimensions)")}break;case 2:switch(E.length){case 1:if(C[1]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+C[1]+") must match Vector length ("+E[0]+")");break;case 2:if(C[1]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+C[1]+") must match Matrix B rows ("+E[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+E.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+C.length+" dimensions)")}}function c(C,E,$){if($===0)throw new Error("Cannot multiply two empty vectors");return i(C,E)}function f(C,E){if(E.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(C,E)}function d(C,E){var $=C._data,I=C._size,D=C._datatype||C.getDataType(),k=E._data,A=E._size,O=E._datatype||E.getDataType(),B=I[0],z=A[1],L,F=r,R=a;D&&O&&D===O&&typeof D=="string"&&D!=="mixed"&&(L=D,F=e.find(r,[L,L]),R=e.find(a,[L,L]));for(var q=[],M=0;M<z;M++){for(var G=R($[0],k[0][M]),V=1;V<B;V++)G=F(G,R($[V],k[V][M]));q[M]=G}return C.createDenseMatrix({data:q,size:[z],datatype:D===C._datatype&&O===E._datatype?L:void 0})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":x}),m=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":y,"DenseMatrix, SparseMatrix":b,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":N});function v(C,E){var $=C._data,I=C._size,D=C._datatype||C.getDataType(),k=E._data,A=E._datatype||E.getDataType(),O=I[0],B=I[1],z,L=r,F=a;D&&A&&D===A&&typeof D=="string"&&D!=="mixed"&&(z=D,L=e.find(r,[z,z]),F=e.find(a,[z,z]));for(var R=[],q=0;q<O;q++){for(var M=$[q],G=F(M[0],k[0]),V=1;V<B;V++)G=L(G,F(M[V],k[V]));R[q]=G}return C.createDenseMatrix({data:R,size:[O],datatype:D===C._datatype&&A===E._datatype?z:void 0})}function y(C,E){var $=C._data,I=C._size,D=C._datatype||C.getDataType(),k=E._data,A=E._size,O=E._datatype||E.getDataType(),B=I[0],z=I[1],L=A[1],F,R=r,q=a;D&&O&&D===O&&typeof D=="string"&&D!=="mixed"&&D!=="mixed"&&(F=D,R=e.find(r,[F,F]),q=e.find(a,[F,F]));for(var M=[],G=0;G<B;G++){var V=$[G];M[G]=[];for(var H=0;H<L;H++){for(var j=q(V[0],k[0][H]),ne=1;ne<z;ne++)j=R(j,q(V[ne],k[ne][H]));M[G][H]=j}}return C.createDenseMatrix({data:M,size:[B,L],datatype:D===C._datatype&&O===E._datatype?F:void 0})}function b(C,E){var $=C._data,I=C._size,D=C._datatype||C.getDataType(),k=E._values,A=E._index,O=E._ptr,B=E._size,z=E._datatype||E._data===void 0?E._datatype:E.getDataType();if(!k)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var L=I[0],F=B[1],R,q=r,M=a,G=s,V=0;D&&z&&D===z&&typeof D=="string"&&D!=="mixed"&&(R=D,q=e.find(r,[R,R]),M=e.find(a,[R,R]),G=e.find(s,[R,R]),V=e.convert(0,R));for(var H=[],j=[],ne=[],ue=E.createSparseMatrix({values:H,index:j,ptr:ne,size:[L,F],datatype:D===C._datatype&&z===E._datatype?R:void 0}),te=0;te<F;te++){ne[te]=j.length;var ie=O[te],Z=O[te+1];if(Z>ie)for(var X=0,ae=0;ae<L;ae++){for(var pe=ae+1,he=void 0,Ne=ie;Ne<Z;Ne++){var Ee=A[Ne];X!==pe?(he=M($[ae][Ee],k[Ne]),X=pe):he=q(he,M($[ae][Ee],k[Ne]))}X===pe&&!G(he,V)&&(j.push(ae),H.push(he))}}return ne[F]=j.length,ue}function x(C,E){var $=C._values,I=C._index,D=C._ptr,k=C._datatype||C._data===void 0?C._datatype:C.getDataType();if(!$)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var A=E._data,O=E._datatype||E.getDataType(),B=C._size[0],z=E._size[0],L=[],F=[],R=[],q,M=r,G=a,V=s,H=0;k&&O&&k===O&&typeof k=="string"&&k!=="mixed"&&(q=k,M=e.find(r,[q,q]),G=e.find(a,[q,q]),V=e.find(s,[q,q]),H=e.convert(0,q));var j=[],ne=[];R[0]=0;for(var ue=0;ue<z;ue++){var te=A[ue];if(!V(te,H))for(var ie=D[ue],Z=D[ue+1],X=ie;X<Z;X++){var ae=I[X];ne[ae]?j[ae]=M(j[ae],G(te,$[X])):(ne[ae]=!0,F.push(ae),j[ae]=G(te,$[X]))}}for(var pe=F.length,he=0;he<pe;he++){var Ne=F[he];L[he]=j[Ne]}return R[1]=F.length,C.createSparseMatrix({values:L,index:F,ptr:R,size:[B,1],datatype:k===C._datatype&&O===E._datatype?q:void 0})}function w(C,E){var $=C._values,I=C._index,D=C._ptr,k=C._datatype||C._data===void 0?C._datatype:C.getDataType();if(!$)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var A=E._data,O=E._datatype||E.getDataType(),B=C._size[0],z=E._size[0],L=E._size[1],F,R=r,q=a,M=s,G=0;k&&O&&k===O&&typeof k=="string"&&k!=="mixed"&&(F=k,R=e.find(r,[F,F]),q=e.find(a,[F,F]),M=e.find(s,[F,F]),G=e.convert(0,F));for(var V=[],H=[],j=[],ne=C.createSparseMatrix({values:V,index:H,ptr:j,size:[B,L],datatype:k===C._datatype&&O===E._datatype?F:void 0}),ue=[],te=[],ie=0;ie<L;ie++){j[ie]=H.length;for(var Z=ie+1,X=0;X<z;X++){var ae=A[X][ie];if(!M(ae,G))for(var pe=D[X],he=D[X+1],Ne=pe;Ne<he;Ne++){var Ee=I[Ne];te[Ee]!==Z?(te[Ee]=Z,H.push(Ee),ue[Ee]=q(ae,$[Ne])):ue[Ee]=R(ue[Ee],q(ae,$[Ne]))}}for(var Q=j[ie],se=H.length,ve=Q;ve<se;ve++){var xe=H[ve];V[ve]=ue[xe]}}return j[L]=H.length,ne}function N(C,E){var $=C._values,I=C._index,D=C._ptr,k=C._datatype||C._data===void 0?C._datatype:C.getDataType(),A=E._values,O=E._index,B=E._ptr,z=E._datatype||E._data===void 0?E._datatype:E.getDataType(),L=C._size[0],F=E._size[1],R=$&&A,q,M=r,G=a;k&&z&&k===z&&typeof k=="string"&&k!=="mixed"&&(q=k,M=e.find(r,[q,q]),G=e.find(a,[q,q]));for(var V=R?[]:void 0,H=[],j=[],ne=C.createSparseMatrix({values:V,index:H,ptr:j,size:[L,F],datatype:k===C._datatype&&z===E._datatype?q:void 0}),ue=R?[]:void 0,te=[],ie,Z,X,ae,pe,he,Ne,Ee,Q=0;Q<F;Q++){j[Q]=H.length;var se=Q+1;for(pe=B[Q],he=B[Q+1],ae=pe;ae<he;ae++)if(Ee=O[ae],R)for(Z=D[Ee],X=D[Ee+1],ie=Z;ie<X;ie++)Ne=I[ie],te[Ne]!==se?(te[Ne]=se,H.push(Ne),ue[Ne]=G(A[ae],$[ie])):ue[Ne]=M(ue[Ne],G(A[ae],$[ie]));else for(Z=D[Ee],X=D[Ee+1],ie=Z;ie<X;ie++)Ne=I[ie],te[Ne]!==se&&(te[Ne]=se,H.push(Ne));if(R)for(var ve=j[Q],xe=H.length,Re=ve;Re<xe;Re++){var Me=H[Re];V[Re]=ue[Me]}}return j[F]=H.length,ne}return e(nR,a,{"Array, Array":e.referTo("Matrix, Matrix",C=>(E,$)=>{l(Lt(E),Lt($));var I=C(n(E),n($));return $t(I)?I.valueOf():I}),"Matrix, Matrix":function(E,$){var I=E.size(),D=$.size();return l(I,D),I.length===1?D.length===1?c(E,$,I[0]):f(E,$):D.length===1?h(E,$):m(E,$)},"Matrix, Array":e.referTo("Matrix,Matrix",C=>(E,$)=>C(E,n($))),"Array, Matrix":e.referToSelf(C=>(E,$)=>C(n(E,$.storage()),$)),"SparseMatrix, any":function(E,$){return o(E,$,a,!1)},"DenseMatrix, any":function(E,$){return u(E,$,a,!1)},"any, SparseMatrix":function(E,$){return o($,E,a,!0)},"any, DenseMatrix":function(E,$){return u($,E,a,!0)},"Array, any":function(E,$){return u(n(E),$,a,!1).valueOf()},"any, Array":function(E,$){return u(n($),E,a,!0).valueOf()},"any, any":a,"any, any, ...any":e.referToSelf(C=>(E,$,I)=>{for(var D=C(E,$),k=0;k<I.length;k++)D=C(D,I[k]);return D})})}),rR="nthRoot",lOe=["typed","matrix","equalScalar","BigNumber","concat"],cOe=ee(rR,lOe,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:a,concat:s}=t,i=Ol({typed:e}),o=Ji({typed:e,equalScalar:r}),u=qw({typed:e,equalScalar:r}),l=ba({typed:e,equalScalar:r}),c=zn({typed:e,matrix:n,concat:s});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(rR,{number:CF,"number, number":CF,BigNumber:h=>d(h,new a(2)),"BigNumber, BigNumber":d,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",h=>m=>h(n(m),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",h=>m=>h(m,2)),SparseMatrix:e.referTo("SparseMatrix,number",h=>m=>h(m,2)),"SparseMatrix, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return u(m,v,h);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return i(m,v,h,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",h=>(m,v)=>h(n(m),v)),"number | BigNumber, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return l(v,m,h,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:o,Ss:l,sS:!1}));function d(h,m){var v=a.precision,y=a.clone({precision:v+2}),b=new a(0),x=new y(1),w=m.isNegative();if(w&&(m=m.neg()),m.isZero())throw new Error("Root must be non-zero");if(h.isNegative()&&!m.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(h.isZero())return w?new y(1/0):0;if(!h.isFinite())return w?b:h;var N=h.abs().pow(x.div(m));return N=h.isNeg()?N.neg():N,new a((w?x.div(N):N).toPrecision(v))}}),aR="sign",fOe=["typed","BigNumber","Fraction","complex"],dOe=ee(aR,fOe,t=>{var{typed:e,BigNumber:n,complex:r,Fraction:a}=t;return e(aR,{number:XC,Complex:function(i){return i.im===0?r(XC(i.re)):i.sign()},BigNumber:function(i){return new n(i.cmp(0))},bigint:function(i){return i>0n?1n:i<0n?-1n:0n},Fraction:function(i){return new a(i.s)},"Array | Matrix":e.referToSelf(s=>i=>qt(i,s)),Unit:e.referToSelf(s=>i=>{if(!i._isDerived()&&i.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(s,i.valueType())(i.value)})})}),pOe="sqrt",hOe=["config","typed","Complex"],mOe=ee(pOe,hOe,t=>{var{config:e,typed:n,Complex:r}=t;return n("sqrt",{number:a,Complex:function(i){return i.sqrt()},BigNumber:function(i){return!i.isNegative()||e.predictable?i.sqrt():a(i.toNumber())},Unit:function(i){return i.pow(.5)}});function a(s){return isNaN(s)?NaN:s>=0||e.predictable?Math.sqrt(s):new r(s,0).sqrt()}}),sR="square",gOe=["typed"],vOe=ee(sR,gOe,t=>{var{typed:e}=t;return e(sR,{number:zq,Complex:function(r){return r.mul(r)},BigNumber:function(r){return r.times(r)},bigint:function(r){return r*r},Fraction:function(r){return r.mul(r)},Unit:function(r){return r.pow(2)}})}),iR="subtract",yOe=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],bOe=ee(iR,yOe,t=>{var{typed:e,matrix:n,equalScalar:r,subtractScalar:a,unaryMinus:s,DenseMatrix:i,concat:o}=t,u=Ol({typed:e}),l=Ja({typed:e}),c=Uw({typed:e,equalScalar:r}),f=ef({typed:e,DenseMatrix:i}),d=Vr({typed:e,DenseMatrix:i}),h=zn({typed:e,matrix:n,concat:o});return e(iR,{"any, any":a},h({elop:a,SS:c,DS:u,SD:l,Ss:d,sS:f}))}),oR="xgcd",wOe=["typed","config","matrix","BigNumber"],xOe=ee(oR,wOe,t=>{var{typed:e,config:n,matrix:r,BigNumber:a}=t;return e(oR,{"number, number":function(o,u){var l=Wq(o,u);return n.matrix==="Array"?l:r(l)},"BigNumber, BigNumber":s});function s(i,o){var u,l,c,f=new a(0),d=new a(1),h=f,m=d,v=d,y=f;if(!i.isInt()||!o.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!o.isZero();)l=i.div(o).floor(),c=i.mod(o),u=h,h=m.minus(l.times(h)),m=u,u=v,v=y.minus(l.times(v)),y=u,i=o,o=c;var b;return i.lt(f)?b=[i.neg(),m.neg(),y.neg()]:b=[i,i.isZero()?0:m,y],n.matrix==="Array"?b:r(b)}}),uR="invmod",SOe=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],NOe=ee(uR,SOe,t=>{var{typed:e,config:n,BigNumber:r,xgcd:a,equal:s,smaller:i,mod:o,add:u,isInteger:l}=t;return e(uR,{"number, number":c,"BigNumber, BigNumber":c});function c(f,d){if(!l(f)||!l(d))throw new Error("Parameters in function invmod must be integer numbers");if(f=o(f,d),s(d,0))throw new Error("Divisor must be non zero");var h=a(f,d);h=h.valueOf();var[m,v]=h;return s(m,r(1))?(v=o(v,d),i(v,r(0))&&(v=u(v,d)),v):NaN}}),COe="matAlgo09xS0Sf",EOe=["typed","equalScalar"],xV=ee(COe,EOe,t=>{var{typed:e,equalScalar:n}=t;return function(a,s,i){var o=a._values,u=a._index,l=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=s._values,h=s._index,m=s._ptr,v=s._size,y=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==v.length)throw new Zt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var b=c[0],x=c[1],w,N=n,C=0,E=i;typeof f=="string"&&f===y&&f!=="mixed"&&(w=f,N=e.find(n,[w,w]),C=e.convert(0,w),E=e.find(i,[w,w]));var $=o&&d?[]:void 0,I=[],D=[],k=$?[]:void 0,A=[],O,B,z,L,F;for(B=0;B<x;B++){D[B]=I.length;var R=B+1;if(k)for(L=m[B],F=m[B+1],z=L;z<F;z++)O=h[z],A[O]=R,k[O]=d[z];for(L=l[B],F=l[B+1],z=L;z<F;z++)if(O=u[z],k){var q=A[O]===R?k[O]:C,M=E(o[z],q);N(M,C)||(I.push(O),$.push(M))}else I.push(O)}return D[x]=I.length,a.createSparseMatrix({values:$,index:I,ptr:D,size:[b,x],datatype:f===a._datatype&&y===s._datatype?w:void 0})}}),lR="dotMultiply",TOe=["typed","matrix","equalScalar","multiplyScalar","concat"],DOe=ee(lR,TOe,t=>{var{typed:e,matrix:n,equalScalar:r,multiplyScalar:a,concat:s}=t,i=Ji({typed:e,equalScalar:r}),o=xV({typed:e,equalScalar:r}),u=ba({typed:e,equalScalar:r}),l=zn({typed:e,matrix:n,concat:s});return e(lR,l({elop:a,SS:o,DS:i,Ss:u}))});function AOe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new n(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new n(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new n(0):t}return GA(t,e,function(r,a){return r&a})}function sm(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,n=e.precision;e.config({precision:1e9});var r=t.plus(new e(1));return r.s=-r.s||null,e.config({precision:n}),r}function $Oe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);var r=new n(-1);return t.isZero()||e.eq(r)||t.eq(e)?e:e.isZero()||t.eq(r)?t:!t.isFinite()||!e.isFinite()?!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?r:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t:GA(t,e,function(a,s){return a|s})}function GA(t,e,n){var r=t.constructor,a,s,i=+(t.s<0),o=+(e.s<0);if(i){a=Py(sm(t));for(var u=0;u<a.length;++u)a[u]^=1}else a=Py(t);if(o){s=Py(sm(e));for(var l=0;l<s.length;++l)s[l]^=1}else s=Py(e);var c,f,d;a.length<=s.length?(c=a,f=s,d=i):(c=s,f=a,d=o);var h=c.length,m=f.length,v=n(i,o)^1,y=new r(v^1),b=new r(1),x=new r(2),w=r.precision;for(r.config({precision:1e9});h>0;)n(c[--h],f[--m])===v&&(y=y.plus(b)),b=b.times(x);for(;m>0;)n(d,f[--m])===v&&(y=y.plus(b)),b=b.times(x);return r.config({precision:w}),v===0&&(y.s=-y.s),y}function Py(t){for(var e=t.d,n=e[0]+"",r=1;r<e.length;++r){for(var a=e[r]+"",s=7-a.length;s--;)a="0"+a;n+=a}for(var i=n.length;n.charAt(i)==="0";)i--;var o=t.e,u=n.slice(0,i+1||1),l=u.length;if(o>0)if(++o>l)for(o-=l;o--;)u+="0";else o<l&&(u=u.slice(0,o)+"."+u.slice(o));for(var c=[0],f=0;f<u.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(u.charAt(f++));for(var h=0;h<c.length;++h)c[h]>1&&((c[h+1]===null||c[h+1]===void 0)&&(c[h+1]=0),c[h+1]+=c[h]>>1,c[h]&=1)}return c.reverse()}function kOe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new n(0);var r=new n(-1);return t.eq(r)?sm(e):e.eq(r)?sm(t):!t.isFinite()||!e.isFinite()?!t.isFinite()&&!e.isFinite()?r:new n(t.isNegative()===e.isNegative()?1/0:-1/0):GA(t,e,function(a,s){return a^s})}function IOe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:!t.isFinite()&&!e.isFinite()?new n(NaN):e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new n(2).pow(e))}function _Oe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new n(2).pow(e)).floor():t.isNegative()?new n(-1):t.isFinite()?new n(0):new n(NaN)}var cR="bitAnd",OOe=["typed","matrix","equalScalar","concat"],SV=ee(cR,OOe,t=>{var{typed:e,matrix:n,equalScalar:r,concat:a}=t,s=Ji({typed:e,equalScalar:r}),i=qw({typed:e,equalScalar:r}),o=ba({typed:e,equalScalar:r}),u=zn({typed:e,matrix:n,concat:a});return e(cR,{"number, number":qq,"BigNumber, BigNumber":AOe,"bigint, bigint":(l,c)=>l&c},u({SS:i,DS:s,Ss:o}))}),fR="bitNot",FOe=["typed"],ROe=ee(fR,FOe,t=>{var{typed:e}=t;return e(fR,{number:Vq,BigNumber:sm,bigint:n=>~n,"Array | Matrix":e.referToSelf(n=>r=>qt(r,n))})}),dR="bitOr",MOe=["typed","matrix","equalScalar","DenseMatrix","concat"],NV=ee(dR,MOe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:s}=t,i=Ol({typed:e}),o=HA({typed:e,equalScalar:r}),u=ef({typed:e,DenseMatrix:a}),l=zn({typed:e,matrix:n,concat:s});return e(dR,{"number, number":jq,"BigNumber, BigNumber":$Oe,"bigint, bigint":(c,f)=>c|f},l({SS:o,DS:i,Ss:u}))}),POe="matAlgo07xSSf",BOe=["typed","SparseMatrix"],Io=ee(POe,BOe,t=>{var{typed:e,SparseMatrix:n}=t;return function(s,i,o){var u=s._size,l=s._datatype||s._data===void 0?s._datatype:s.getDataType(),c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==c.length)throw new Zt(u.length,c.length);if(u[0]!==c[0]||u[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+c+")");var d=u[0],h=u[1],m,v=0,y=o;typeof l=="string"&&l===f&&l!=="mixed"&&(m=l,v=e.convert(0,m),y=e.find(o,[m,m]));for(var b=[],x=[],w=new Array(h+1).fill(0),N=[],C=[],E=[],$=[],I=0;I<h;I++){var D=I+1,k=0;r(s,I,E,N,D),r(i,I,$,C,D);for(var A=0;A<d;A++){var O=E[A]===D?N[A]:v,B=$[A]===D?C[A]:v,z=y(O,B);z!==0&&z!==!1&&(x.push(A),b.push(z),k++)}w[I+1]=w[I]+k}return new n({values:b,index:x,ptr:w,size:[d,h],datatype:l===s._datatype&&f===i._datatype?m:void 0})};function r(a,s,i,o,u){for(var l=a._values,c=a._index,f=a._ptr,d=f[s],h=f[s+1];d<h;d++){var m=c[d];i[m]=u,o[m]=l[d]}}}),pR="bitXor",LOe=["typed","matrix","DenseMatrix","concat","SparseMatrix"],zOe=ee(pR,LOe,t=>{var{typed:e,matrix:n,DenseMatrix:r,concat:a,SparseMatrix:s}=t,i=Ja({typed:e}),o=Io({typed:e,SparseMatrix:s}),u=Vr({typed:e,DenseMatrix:r}),l=zn({typed:e,matrix:n,concat:a});return e(pR,{"number, number":Hq,"BigNumber, BigNumber":kOe,"bigint, bigint":(c,f)=>c^f},l({SS:o,DS:i,Ss:u}))}),hR="arg",WOe=["typed"],UOe=ee(hR,WOe,t=>{var{typed:e}=t;return e(hR,{number:function(r){return Math.atan2(0,r)},BigNumber:function(r){return r.constructor.atan2(0,r)},Complex:function(r){return r.arg()},"Array | Matrix":e.referToSelf(n=>r=>qt(r,n))})}),mR="conj",qOe=["typed"],VOe=ee(mR,qOe,t=>{var{typed:e}=t;return e(mR,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":e.referToSelf(n=>r=>qt(r,n))})}),gR="im",jOe=["typed"],HOe=ee(gR,jOe,t=>{var{typed:e}=t;return e(gR,{number:()=>0,"BigNumber | Fraction":n=>n.mul(0),Complex:n=>n.im,"Array | Matrix":e.referToSelf(n=>r=>qt(r,n))})}),vR="re",GOe=["typed"],KOe=ee(vR,GOe,t=>{var{typed:e}=t;return e(vR,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.re,"Array | Matrix":e.referToSelf(n=>r=>qt(r,n))})}),yR="not",XOe=["typed"],YOe=ee(yR,XOe,t=>{var{typed:e}=t;return e(yR,{"null | undefined":()=>!0,number:Qq,Complex:function(r){return r.re===0&&r.im===0},BigNumber:function(r){return r.isZero()||r.isNaN()},bigint:n=>!n,Unit:e.referToSelf(n=>r=>e.find(n,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(n=>r=>qt(r,n))})}),bR="or",QOe=["typed","matrix","equalScalar","DenseMatrix","concat"],CV=ee(bR,QOe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:s}=t,i=Ja({typed:e}),o=Uw({typed:e,equalScalar:r}),u=Vr({typed:e,DenseMatrix:a}),l=zn({typed:e,matrix:n,concat:s});return e(bR,{"number, number":YC,"Complex, Complex":function(f,d){return f.re!==0||f.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(f,d){return!f.isZero()&&!f.isNaN()||!d.isZero()&&!d.isNaN()},"bigint, bigint":YC,"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},l({SS:o,DS:i,Ss:u}))}),wR="xor",JOe=["typed","matrix","DenseMatrix","concat","SparseMatrix"],ZOe=ee(wR,JOe,t=>{var{typed:e,matrix:n,DenseMatrix:r,concat:a,SparseMatrix:s}=t,i=Ja({typed:e}),o=Io({typed:e,SparseMatrix:s}),u=Vr({typed:e,DenseMatrix:r}),l=zn({typed:e,matrix:n,concat:a});return e(wR,{"number, number":QC,"Complex, Complex":function(f,d){return(f.re!==0||f.im!==0)!=(d.re!==0||d.im!==0)},"bigint, bigint":QC,"BigNumber, BigNumber":function(f,d){return(!f.isZero()&&!f.isNaN())!=(!d.isZero()&&!d.isNaN())},"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},l({SS:o,DS:i,Ss:u}))}),xR="concat",e3e=["typed","matrix","isInteger"],EV=ee(xR,e3e,t=>{var{typed:e,matrix:n,isInteger:r}=t;return e(xR,{"...Array | Matrix | number | BigNumber":function(s){var i,o=s.length,u=-1,l,c=!1,f=[];for(i=0;i<o;i++){var d=s[i];if($t(d)&&(c=!0),jt(d)||Gt(d)){if(i!==o-1)throw new Error("Dimension must be specified as last argument");if(l=u,u=d.valueOf(),!r(u))throw new TypeError("Integer number expected for dimension");if(u<0||i>0&&u>l)throw new Xi(u,l+1)}else{var h=Wt(d).valueOf(),m=Lt(h);if(f[i]=h,l=u,u=m.length-1,i>0&&u!==l)throw new Zt(l+1,u+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var v=f.shift();f.length;)v=Eq(v,f.shift(),u);return c?n(v):v},"...string":function(s){return s.join("")}})}),SR="column",t3e=["typed","Index","matrix","range"],TV=ee(SR,t3e,t=>{var{typed:e,Index:n,matrix:r,range:a}=t;return e(SR,{"Matrix, number":s,"Array, number":function(o,u){return s(r(Wt(o)),u).valueOf()}});function s(i,o){if(i.size().length!==2)throw new Error("Only two dimensional matrix is supported");Mn(o,i.size()[1]);var u=a(0,i.size()[0]),l=new n(u,o),c=i.subset(l);return $t(c)?c:r([[c]])}}),NR="count",n3e=["typed","size","prod"],r3e=ee(NR,n3e,t=>{var{typed:e,size:n,prod:r}=t;return e(NR,{string:function(s){return s.length},"Matrix | Array":function(s){return r(n(s))}})}),CR="cross",a3e=["typed","matrix","subtract","multiply"],s3e=ee(CR,a3e,t=>{var{typed:e,matrix:n,subtract:r,multiply:a}=t;return e(CR,{"Matrix, Matrix":function(o,u){return n(s(o.toArray(),u.toArray()))},"Matrix, Array":function(o,u){return n(s(o.toArray(),u))},"Array, Matrix":function(o,u){return n(s(o,u.toArray()))},"Array, Array":s});function s(i,o){var u=Math.max(Lt(i).length,Lt(o).length);i=db(i),o=db(o);var l=Lt(i),c=Lt(o);if(l.length!==1||c.length!==1||l[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+l.join(", ")+"], B = ["+c.join(", ")+"])");var f=[r(a(i[1],o[2]),a(i[2],o[1])),r(a(i[2],o[0]),a(i[0],o[2])),r(a(i[0],o[1]),a(i[1],o[0]))];return u>1?[f]:f}}),ER="diag",i3e=["typed","matrix","DenseMatrix","SparseMatrix"],o3e=ee(ER,i3e,t=>{var{typed:e,matrix:n,DenseMatrix:r,SparseMatrix:a}=t;return e(ER,{Array:function(l){return s(l,0,Lt(l),null)},"Array, number":function(l,c){return s(l,c,Lt(l),null)},"Array, BigNumber":function(l,c){return s(l,c.toNumber(),Lt(l),null)},"Array, string":function(l,c){return s(l,0,Lt(l),c)},"Array, number, string":function(l,c,f){return s(l,c,Lt(l),f)},"Array, BigNumber, string":function(l,c,f){return s(l,c.toNumber(),Lt(l),f)},Matrix:function(l){return s(l,0,l.size(),l.storage())},"Matrix, number":function(l,c){return s(l,c,l.size(),l.storage())},"Matrix, BigNumber":function(l,c){return s(l,c.toNumber(),l.size(),l.storage())},"Matrix, string":function(l,c){return s(l,0,l.size(),c)},"Matrix, number, string":function(l,c,f){return s(l,c,l.size(),f)},"Matrix, BigNumber, string":function(l,c,f){return s(l,c.toNumber(),l.size(),f)}});function s(u,l,c,f){if(!wt(l))throw new TypeError("Second parameter in function diag must be an integer");var d=l>0?l:0,h=l<0?-l:0;switch(c.length){case 1:return i(u,l,f,c[0],h,d);case 2:return o(u,l,f,c,h,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function i(u,l,c,f,d,h){var m=[f+d,f+h];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var v=c==="sparse"?a.diagonal(m,u,l):r.diagonal(m,u,l);return c!==null?v:v.valueOf()}function o(u,l,c,f,d,h){if($t(u)){var m=u.diagonal(l);return c!==null?c!==m.storage()?n(m,c):m:m.valueOf()}for(var v=Math.min(f[0]-d,f[1]-h),y=[],b=0;b<v;b++)y[b]=u[b+d][b+h];return c!==null?n(y):y}}),u3e="filter",l3e=["typed"],DV=ee(u3e,l3e,t=>{var{typed:e}=t;return e("filter",{"Array, function":TR,"Matrix, function":function(r,a){return r.create(TR(r.valueOf(),a),r.datatype())},"Array, RegExp":yF,"Matrix, RegExp":function(r,a){return r.create(yF(r.valueOf(),a),r.datatype())}})});function TR(t,e){var n=zc(e,t,"filter");return kke(t,function(r,a,s){return n(r,[a],s)})}var DR="flatten",c3e=["typed"],f3e=ee(DR,c3e,t=>{var{typed:e}=t;return e(DR,{Array:function(r){return yn(r)},Matrix:function(r){return r.create(yn(r.toArray()),r.datatype())}})}),nE="forEach",d3e=["typed"],AV=ee(nE,d3e,t=>{var{typed:e}=t;return e(nE,{"Array, function":p3e,"Matrix, function":function(r,a){r.forEach(a)}})});function p3e(t,e){UA(t,[],t,zc(e,t,nE))}var AR="getMatrixDataType",h3e=["typed"],m3e=ee(AR,h3e,t=>{var{typed:e}=t;return e(AR,{Array:function(r){return zw(r,Ln)},Matrix:function(r){return r.getDataType()}})}),$R="identity",g3e=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],v3e=ee($R,g3e,t=>{var{typed:e,config:n,matrix:r,BigNumber:a,DenseMatrix:s,SparseMatrix:i}=t;return e($R,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return u(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return o(c)},"Array, string":function(c,f){return o(c,f)},Matrix:function(c){return o(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return o(c.valueOf(),f)}});function o(l,c){switch(l.length){case 0:return c?r(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var d=Gt(l)||Gt(c)?a:null;if(Gt(l)&&(l=l.toNumber()),Gt(c)&&(c=c.toNumber()),!wt(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!wt(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new a(1):1,m=d?new d(0):0,v=[l,c];if(f){if(f==="sparse")return i.diagonal(v,h,0,m);if(f==="dense")return s.diagonal(v,h,0,m);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var y=Pd([],v,m),b=l<c?l:c,x=0;x<b;x++)y[x][x]=h;return y}}),kR="kron",y3e=["typed","matrix","multiplyScalar"],b3e=ee(kR,y3e,t=>{var{typed:e,matrix:n,multiplyScalar:r}=t;return e(kR,{"Matrix, Matrix":function(i,o){return n(a(i.toArray(),o.toArray()))},"Matrix, Array":function(i,o){return n(a(i.toArray(),o))},"Array, Matrix":function(i,o){return n(a(i,o.toArray()))},"Array, Array":a});function a(s,i){if(Lt(s).length===1&&(s=[s]),Lt(i).length===1&&(i=[i]),Lt(s).length>2||Lt(i).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(s.length)+", y = "+JSON.stringify(i.length)+")");var o=[],u=[];return s.map(function(l){return i.map(function(c){return u=[],o.push(u),l.map(function(f){return c.map(function(d){return u.push(r(f,d))})})})})&&o}}),WS="map",w3e=["typed"],$V=ee(WS,w3e,t=>{var{typed:e}=t;return e(WS,{"Array, function":r,"Matrix, function":function(s,i){return s.map(i)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(a,s,i)=>n([a,s,...i.slice(0,i.length-1)],i[i.length-1])});function n(a,s){if(typeof s!="function")throw new Error("Last argument must be a callback function");var i=a[0].isMatrix,o=zA(...a.map(N=>N.isMatrix?N.size():Lt(N))),u=i?(N,C)=>N.get(C):WA,l=i?a.map(N=>N.isMatrix?N.create(yc(N.toArray(),o),N.datatype()):a[0].create(yc(N.valueOf(),o))):a.map(N=>N.isMatrix?yc(N.toArray(),o):yc(N,o)),c;if(e.isTypedFunction(s)){var f=o.map(()=>0),d=l.map(N=>u(N,f)),h=w(s,d,f,l);c=b(h)}else{var m=a.length,v=x(s,m);c=b(v)}var y=(N,C)=>c([N,...l.slice(1).map(E=>u(E,C))],C);if(i)return l[0].map(y);return r(l[0],y);function b(N){switch(N){case 0:return C=>s(...C);case 1:return(C,E)=>s(...C,E);case 2:return(C,E)=>s(...C,E,...l)}}function x(N,C){return N.length>C+1?2:N.length===C+1?1:0}function w(N,C,E,$){return e.resolve(N,[...C,E,...$])!==null?2:e.resolve(N,[...C,E])!==null?1:(e.resolve(N,C)!==null,0)}}function r(a,s){return UA(a,[],a,zc(s,a,WS))}}),IR="diff",x3e=["typed","matrix","subtract","number"],kV=ee(IR,x3e,t=>{var{typed:e,matrix:n,subtract:r,number:a}=t;return e(IR,{"Array | Matrix":function(c){return $t(c)?n(i(c.toArray())):i(c)},"Array | Matrix, number":function(c,f){if(!wt(f))throw new RangeError("Dimension must be a whole number");return $t(c)?n(s(c.toArray(),f)):s(c,f)},"Array, BigNumber":e.referTo("Array,number",l=>(c,f)=>l(c,a(f))),"Matrix, BigNumber":e.referTo("Matrix,number",l=>(c,f)=>l(c,a(f)))});function s(l,c){if($t(l)&&(l=l.toArray()),!Array.isArray(l))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return l.forEach(d=>{f.push(s(d,c-1))}),f}else{if(c===0)return i(l);throw RangeError("Cannot have negative dimension")}}function i(l){for(var c=[],f=l.length,d=1;d<f;d++)c.push(o(l[d-1],l[d]));return c}function o(l,c){$t(l)&&(l=l.toArray()),$t(c)&&(c=c.toArray());var f=Array.isArray(l),d=Array.isArray(c);if(f&&d)return u(l,c);if(!f&&!d)return r(c,l);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function u(l,c){if(l.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],d=l.length,h=0;h<d;h++)f.push(o(l[h],c[h]));return f}}),S3e="ones",N3e=["typed","config","matrix","BigNumber"],C3e=ee(S3e,N3e,t=>{var{typed:e,config:n,matrix:r,BigNumber:a}=t;return e("ones",{"":function(){return n.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return s(l,f)}else return n.matrix==="Array"?s(l):s(l,"default")},Array:s,Matrix:function(l){var c=l.storage();return s(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return s(l.valueOf(),c)}});function s(u,l){var c=i(u),f=c?new a(1):1;if(o(u),l){var d=r(l);return u.length>0?d.resize(u,f):d}else{var h=[];return u.length>0?Pd(h,u,f):h}}function i(u){var l=!1;return u.forEach(function(c,f,d){Gt(c)&&(l=!0,d[f]=c.toNumber())}),l}function o(u){u.forEach(function(l){if(typeof l!="number"||!wt(l)||l<0)throw new Error("Parameters in function ones must be positive integers")})}});function KA(){throw new Error('No "bignumber" implementation available')}function IV(){throw new Error('No "fraction" implementation available')}function _V(){throw new Error('No "matrix" implementation available')}var _R="range",E3e=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],OV=ee(_R,E3e,t=>{var{typed:e,config:n,matrix:r,bignumber:a,smaller:s,smallerEq:i,larger:o,largerEq:u,add:l,isPositive:c}=t;return e(_R,{string:d,"string, boolean":d,"number, number":function(y,b){return f(h(y,b,1,!1))},"number, number, number":function(y,b,x){return f(h(y,b,x,!1))},"number, number, boolean":function(y,b,x){return f(h(y,b,1,x))},"number, number, number, boolean":function(y,b,x,w){return f(h(y,b,x,w))},"BigNumber, BigNumber":function(y,b){var x=y.constructor;return f(h(y,b,new x(1),!1))},"BigNumber, BigNumber, BigNumber":function(y,b,x){return f(h(y,b,x,!1))},"BigNumber, BigNumber, boolean":function(y,b,x){var w=y.constructor;return f(h(y,b,new w(1),x))},"BigNumber, BigNumber, BigNumber, boolean":function(y,b,x,w){return f(h(y,b,x,w))},"Unit, Unit, Unit":function(y,b,x){return f(h(y,b,x,!1))},"Unit, Unit, Unit, boolean":function(y,b,x,w){return f(h(y,b,x,w))}});function f(v){return n.matrix==="Matrix"?r?r(v):_V():v}function d(v,y){var b=m(v);if(!b)throw new SyntaxError('String "'+v+'" is no valid range');return n.number==="BigNumber"?(a===void 0&&KA(),f(h(a(b.start),a(b.end),a(b.step)))):f(h(b.start,b.end,b.step,y))}function h(v,y,b,x){for(var w=[],N=c(b)?x?i:s:x?u:o,C=v;N(C,y);)w.push(C),C=l(C,b);return w}function m(v){var y=v.split(":"),b=y.map(function(w){return Number(w)}),x=b.some(function(w){return isNaN(w)});if(x)return null;switch(b.length){case 2:return{start:b[0],end:b[1],step:1};case 3:return{start:b[0],end:b[2],step:b[1]};default:return null}}}),OR="reshape",T3e=["typed","isInteger","matrix"],D3e=ee(OR,T3e,t=>{var{typed:e,isInteger:n}=t;return e(OR,{"Matrix, Array":function(a,s){return a.reshape(s,!0)},"Array, Array":function(a,s){return s.forEach(function(i){if(!n(i))throw new TypeError("Invalid size for dimension: "+i)}),BA(a,s)}})}),A3e="resize",$3e=["config","matrix"],k3e=ee(A3e,$3e,t=>{var{config:e,matrix:n}=t;return function(s,i,o){if(arguments.length!==2&&arguments.length!==3)throw new tf("resize",arguments.length,2,3);if($t(i)&&(i=i.valueOf()),Gt(i[0])&&(i=i.map(function(c){return Gt(c)?c.toNumber():c})),$t(s))return s.resize(i,o,!0);if(typeof s=="string")return r(s,i,o);var u=Array.isArray(s)?!1:e.matrix!=="Array";if(i.length===0){for(;Array.isArray(s);)s=s[0];return Wt(s)}else{Array.isArray(s)||(s=[s]),s=Wt(s);var l=Pd(s,i,o);return u?n(l):l}};function r(a,s,i){if(i!==void 0){if(typeof i!="string"||i.length!==1)throw new TypeError("Single character expected as defaultValue")}else i=" ";if(s.length!==1)throw new Zt(s.length,1);var o=s[0];if(typeof o!="number"||!wt(o))throw new TypeError("Invalid size, must contain positive integers (size: "+Qt(s)+")");if(a.length>o)return a.substring(0,o);if(a.length<o){for(var u=a,l=0,c=o-a.length;l<c;l++)u+=i;return u}else return a}}),FR="rotate",I3e=["typed","multiply","rotationMatrix"],_3e=ee(FR,I3e,t=>{var{typed:e,multiply:n,rotationMatrix:r}=t;return e(FR,{"Array , number | BigNumber | Complex | Unit":function(i,o){a(i,2);var u=n(r(o),i);return u.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(i,o){return a(i,2),n(r(o),i)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(i,o,u){a(i,3);var l=n(r(o,u),i);return l},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(i,o,u){return a(i,3),n(r(o,u),i)}});function a(s,i){var o=Array.isArray(s)?Lt(s):s.size();if(o.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(i));if(o.length===2&&o[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(i));if(o[0]!==i)throw new RangeError("Vector must be of dimensions 1x".concat(i))}}),RR="rotationMatrix",O3e=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],F3e=ee(RR,O3e,t=>{var{typed:e,config:n,multiplyScalar:r,addScalar:a,unaryMinus:s,norm:i,BigNumber:o,matrix:u,DenseMatrix:l,SparseMatrix:c,cos:f,sin:d}=t;return e(RR,{"":function(){return n.matrix==="Matrix"?u([]):[]},string:function(w){return u(w)},"number | BigNumber | Complex | Unit":function(w){return h(w,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(w,N){return h(w,N)},"number | BigNumber | Complex | Unit, Array":function(w,N){var C=u(N);return m(C),b(w,C,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(w,N){m(N);var C=N.storage()||(n.matrix==="Matrix"?"dense":void 0);return b(w,N,C)},"number | BigNumber | Complex | Unit, Array, string":function(w,N,C){var E=u(N);return m(E),b(w,E,C)},"number | BigNumber | Complex | Unit, Matrix, string":function(w,N,C){return m(N),b(w,N,C)}});function h(x,w){var N=Gt(x),C=N?new o(-1):-1,E=f(x),$=d(x),I=[[E,r(C,$)],[$,E]];return y(I,w)}function m(x){var w=x.size();if(w.length<1||w[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function v(x){return x.reduce((w,N)=>r(w,N))}function y(x,w){if(w){if(w==="sparse")return new c(x);if(w==="dense")return new l(x);throw new TypeError('Unknown matrix type "'.concat(w,'"'))}return x}function b(x,w,N){var C=i(w);if(C===0)throw new RangeError("Rotation around zero vector");var E=Gt(x)?o:null,$=E?new E(1):1,I=E?new E(-1):-1,D=E?new E(w.get([0])/C):w.get([0])/C,k=E?new E(w.get([1])/C):w.get([1])/C,A=E?new E(w.get([2])/C):w.get([2])/C,O=f(x),B=a($,s(O)),z=d(x),L=a(O,v([D,D,B])),F=a(v([D,k,B]),v([I,A,z])),R=a(v([D,A,B]),v([k,z])),q=a(v([D,k,B]),v([A,z])),M=a(O,v([k,k,B])),G=a(v([k,A,B]),v([I,D,z])),V=a(v([D,A,B]),v([I,k,z])),H=a(v([k,A,B]),v([D,z])),j=a(O,v([A,A,B])),ne=[[L,F,R],[q,M,G],[V,H,j]];return y(ne,N)}}),MR="row",R3e=["typed","Index","matrix","range"],FV=ee(MR,R3e,t=>{var{typed:e,Index:n,matrix:r,range:a}=t;return e(MR,{"Matrix, number":s,"Array, number":function(o,u){return s(r(Wt(o)),u).valueOf()}});function s(i,o){if(i.size().length!==2)throw new Error("Only two dimensional matrix is supported");Mn(o,i.size()[0]);var u=a(0,i.size()[1]),l=new n(o,u),c=i.subset(l);return $t(c)?c:r([[c]])}}),PR="size",M3e=["typed","config","?matrix"],P3e=ee(PR,M3e,t=>{var{typed:e,config:n,matrix:r}=t;return e(PR,{Matrix:function(s){return s.create(s.size(),"number")},Array:Lt,string:function(s){return n.matrix==="Array"?[s.length]:r([s.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(s){return n.matrix==="Array"?[]:r?r([],"dense","number"):_V()}})}),BR="squeeze",B3e=["typed"],L3e=ee(BR,B3e,t=>{var{typed:e}=t;return e(BR,{Array:function(r){return db(Wt(r))},Matrix:function(r){var a=db(r.toArray());return Array.isArray(a)?r.create(a,r.datatype()):a},any:function(r){return Wt(r)}})}),LR="subset",z3e=["typed","matrix","zeros","add"],RV=ee(LR,z3e,t=>{var{typed:e,matrix:n,zeros:r,add:a}=t;return e(LR,{"Matrix, Index":function(o,u){return Md(u)?n():(fb(o,u),o.subset(u))},"Array, Index":e.referTo("Matrix, Index",function(i){return function(o,u){var l=i(n(o),u);return u.isScalar()?l:l.valueOf()}}),"Object, Index":U3e,"string, Index":W3e,"Matrix, Index, any, any":function(o,u,l,c){return Md(u)?o:(fb(o,u),o.clone().subset(u,s(l,u),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(i){return function(o,u,l,c){var f=i(n(o),u,l,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(i){return function(o,u,l){return i(n(o),u,l,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(i){return function(o,u,l){return i(o,u,l,void 0)}}),"string, Index, string":zR,"string, Index, string, string":zR,"Object, Index, any":q3e});function s(i,o){if(typeof i=="string")throw new Error("can't boradcast a string");if(o._isScalar)return i;var u=o.size();if(u.every(l=>l>0))try{return a(i,r(u))}catch{return i}else return i}});function W3e(t,e){if(!Ow(e))throw new TypeError("Index expected");if(Md(e))return"";if(fb(Array.from(t),e),e.size().length!==1)throw new Zt(e.size().length,1);var n=t.length;Mn(e.min()[0],n),Mn(e.max()[0],n);var r=e.dimension(0),a="";return r.forEach(function(s){a+=t.charAt(s)}),a}function zR(t,e,n,r){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(Md(e))return t;if(fb(Array.from(t),e),e.size().length!==1)throw new Zt(e.size().length,1);if(r!==void 0){if(typeof r!="string"||r.length!==1)throw new TypeError("Single character expected as defaultValue")}else r=" ";var a=e.dimension(0),s=a.size()[0];if(s!==n.length)throw new Zt(a.size()[0],n.length);var i=t.length;Mn(e.min()[0]),Mn(e.max()[0]);for(var o=[],u=0;u<i;u++)o[u]=t.charAt(u);if(a.forEach(function(f,d){o[f]=n.charAt(d[0])}),o.length>i)for(var l=i-1,c=o.length;l<c;l++)o[l]||(o[l]=r);return o.join("")}function U3e(t,e){if(!Md(e)){if(e.size().length!==1)throw new Zt(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");return Ha(t,n)}}function q3e(t,e,n){if(Md(e))return t;if(e.size().length!==1)throw new Zt(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");var a=Wt(t);return Fd(a,r,n),a}var WR="transpose",V3e=["typed","matrix"],j3e=ee(WR,V3e,t=>{var{typed:e,matrix:n}=t;return e(WR,{Array:i=>r(n(i)).valueOf(),Matrix:r,any:Wt});function r(i){var o=i.size(),u;switch(o.length){case 1:u=i.clone();break;case 2:{var l=o[0],c=o[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Qt(o)+")");switch(i.storage()){case"dense":u=a(i,l,c);break;case"sparse":u=s(i,l,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Qt(o)+")")}return u}function a(i,o,u){for(var l=i._data,c=[],f,d=0;d<u;d++){f=c[d]=[];for(var h=0;h<o;h++)f[h]=Wt(l[h][d])}return i.createDenseMatrix({data:c,size:[u,o],datatype:i._datatype})}function s(i,o,u){for(var l=i._values,c=i._index,f=i._ptr,d=l?[]:void 0,h=[],m=[],v=[],y=0;y<o;y++)v[y]=0;var b,x,w;for(b=0,x=c.length;b<x;b++)v[c[b]]++;for(var N=0,C=0;C<o;C++)m.push(N),N+=v[C],v[C]=m[C];for(m.push(N),w=0;w<u;w++)for(var E=f[w],$=f[w+1],I=E;I<$;I++){var D=v[c[I]]++;h[D]=w,l&&(d[D]=Wt(l[I]))}return i.createSparseMatrix({values:d,index:h,ptr:m,size:[u,o],datatype:i._datatype})}}),UR="ctranspose",H3e=["typed","transpose","conj"],G3e=ee(UR,H3e,t=>{var{typed:e,transpose:n,conj:r}=t;return e(UR,{any:function(s){return r(n(s))}})}),qR="zeros",K3e=["typed","config","matrix","BigNumber"],X3e=ee(qR,K3e,t=>{var{typed:e,config:n,matrix:r,BigNumber:a}=t;return e(qR,{"":function(){return n.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return s(l,f)}else return n.matrix==="Array"?s(l):s(l,"default")},Array:s,Matrix:function(l){var c=l.storage();return s(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return s(l.valueOf(),c)}});function s(u,l){var c=i(u),f=c?new a(0):0;if(o(u),l){var d=r(l);return u.length>0?d.resize(u,f):d}else{var h=[];return u.length>0?Pd(h,u,f):h}}function i(u){var l=!1;return u.forEach(function(c,f,d){Gt(c)&&(l=!0,d[f]=c.toNumber())}),l}function o(u){u.forEach(function(l){if(typeof l!="number"||!wt(l)||l<0)throw new Error("Parameters in function zeros must be positive integers")})}}),VR="fft",Y3e=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],Q3e=ee(VR,Y3e,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:a,divideScalar:s,exp:i,tau:o,i:u,dotDivide:l,conj:c,pow:f,ceil:d,log2:h}=t;return e(VR,{Array:m,Matrix:function(w){return w.create(m(w.valueOf()),w.datatype())}});function m(x){var w=Lt(x);return w.length===1?b(x,w[0]):v(x.map(N=>m(N,w.slice(1))),0)}function v(x,w){var N=Lt(x);if(w!==0)return new Array(N[0]).fill(0).map((E,$)=>v(x[$],w-1));if(N.length===1)return b(x);function C(E){var $=Lt(E);return new Array($[1]).fill(0).map((I,D)=>new Array($[0]).fill(0).map((k,A)=>E[A][D]))}return C(v(C(x),1))}function y(x){for(var w=x.length,N=i(s(a(-1,a(u,o)),w)),C=[],E=1-w;E<w;E++)C.push(f(N,s(f(E,2),2)));for(var $=f(2,d(h(w+w-1))),I=[...new Array(w).fill(0).map((F,R)=>a(x[R],C[w-1+R])),...new Array($-w).fill(0)],D=[...new Array(w+w-1).fill(0).map((F,R)=>s(1,C[R])),...new Array($-(w+w-1)).fill(0)],k=b(I),A=b(D),O=new Array($).fill(0).map((F,R)=>a(k[R],A[R])),B=l(c(m(c(O))),$),z=[],L=w-1;L<w+w-1;L++)z.push(a(B[L],C[L]));return z}function b(x){var w=x.length;if(w===1)return[x[0]];if(w%2===0){for(var N=[...b(x.filter((I,D)=>D%2===0)),...b(x.filter((I,D)=>D%2===1))],C=0;C<w/2;C++){var E=N[C],$=a(N[C+w/2],i(a(a(o,u),s(-C,w))));N[C]=r(E,$),N[C+w/2]=r(E,a(-1,$))}return N}else return y(x)}}),jR="ifft",J3e=["typed","fft","dotDivide","conj"],Z3e=ee(jR,J3e,t=>{var{typed:e,fft:n,dotDivide:r,conj:a}=t;return e(jR,{"Array | Matrix":function(i){var o=$t(i)?i.size():Lt(i);return r(a(n(a(i))),o.reduce((u,l)=>u*l,1))}})});function im(t){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},im(t)}function eFe(t,e){if(im(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tFe(t){var e=eFe(t,"string");return im(e)=="symbol"?e:e+""}function Wr(t,e,n){return(e=tFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function nFe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HR(Object(n),!0).forEach(function(r){Wr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var rFe="solveODE",aFe=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],sFe=ee(rFe,aFe,t=>{var{typed:e,add:n,subtract:r,multiply:a,divide:s,max:i,map:o,abs:u,isPositive:l,isNegative:c,larger:f,smaller:d,matrix:h,bignumber:m,unaryMinus:v}=t;function y(I){return function(D,k,A,O){var B=!(k.length===2&&(k.every(E)||k.every(si)));if(B)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var z=k[0],L=k[1],F=f(L,z),R=O.firstStep;if(R!==void 0&&!l(R))throw new Error('"firstStep" must be positive');var q=O.maxStep;if(q!==void 0&&!l(q))throw new Error('"maxStep" must be positive');var M=O.minStep;if(M&&c(M))throw new Error('"minStep" must be positive or zero');var G=[z,L,R,M,q].filter(re=>re!==void 0);if(!(G.every(E)||G.every(si)))throw new Error('Inconsistent type of "t" dependant variables');for(var V=1,H=O.tol?O.tol:1e-4,j=O.minDelta?O.minDelta:.2,ne=O.maxDelta?O.maxDelta:5,ue=O.maxIter?O.maxIter:1e4,te=[z,L,...A,q,M].some(Gt),[ie,Z,X,ae]=te?[m(I.a),m(I.c),m(I.b),m(I.bp)]:[I.a,I.c,I.b,I.bp],pe=R?F?R:v(R):s(r(L,z),V),he=[z],Ne=[A],Ee=r(X,ae),Q=0,se=0,ve=N(F),xe=C(F);ve(he[Q],L);){var Re=[];pe=xe(he[Q],L,pe),Re.push(D(he[Q],Ne[Q]));for(var Me=1;Me<Z.length;++Me)Re.push(D(n(he[Q],a(Z[Me],pe)),n(Ne[Q],a(pe,ie[Me],Re))));var He=i(u(o(a(Ee,Re),re=>si(re)?re.value:re)));He<H&&H/He>1/4&&(he.push(n(he[Q],pe)),Ne.push(n(Ne[Q],a(pe,X,Re))),Q++);var Je=.84*(H/He)**(1/5);if(d(Je,j)?Je=j:f(Je,ne)&&(Je=ne),Je=te?m(Je):Je,pe=a(pe,Je),q&&f(u(pe),q)?pe=F?q:v(q):M&&d(u(pe),M)&&(pe=F?M:v(M)),se++,se>ue)throw new Error("Maximum number of iterations reached, try changing options")}return{t:he,y:Ne}}}function b(I,D,k,A){var O=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],B=[null,1/2,3/4,1],z=[2/9,1/3,4/9,0],L=[7/24,1/4,1/3,1/8],F={a:O,c:B,b:z,bp:L};return y(F)(I,D,k,A)}function x(I,D,k,A){var O=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],B=[null,1/5,3/10,4/5,8/9,1,1],z=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],L=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],F={a:O,c:B,b:z,bp:L};return y(F)(I,D,k,A)}function w(I,D,k,A){var O=A.method?A.method:"RK45",B={RK23:b,RK45:x};if(O.toUpperCase()in B){var z=nFe({},A);return delete z.method,B[O.toUpperCase()](I,D,k,z)}else{var L=Object.keys(B).map(R=>'"'.concat(R,'"')),F="".concat(L.slice(0,-1).join(", ")," and ").concat(L.slice(-1));throw new Error('Unavailable method "'.concat(O,'". Available methods are ').concat(F))}}function N(I){return I?d:f}function C(I){var D=I?f:d;return function(k,A,O){var B=n(k,O);return D(B,A)?r(A,k):O}}function E(I){return Gt(I)||jt(I)}function $(I,D,k,A){var O=w(I,D.toArray(),k.toArray(),A);return{t:h(O.t),y:h(O.y)}}return e("solveODE",{"function, Array, Array, Object":w,"function, Matrix, Matrix, Object":$,"function, Array, Array":(I,D,k)=>w(I,D,k,{}),"function, Matrix, Matrix":(I,D,k)=>$(I,D,k,{}),"function, Array, number | BigNumber | Unit":(I,D,k)=>{var A=w(I,D,[k],{});return{t:A.t,y:A.y.map(O=>O[0])}},"function, Matrix, number | BigNumber | Unit":(I,D,k)=>{var A=w(I,D.toArray(),[k],{});return{t:h(A.t),y:h(A.y.map(O=>O[0]))}},"function, Array, number | BigNumber | Unit, Object":(I,D,k,A)=>{var O=w(I,D,[k],A);return{t:O.t,y:O.y.map(B=>B[0])}},"function, Matrix, number | BigNumber | Unit, Object":(I,D,k,A)=>{var O=w(I,D.toArray(),[k],A);return{t:h(O.t),y:h(O.y.map(B=>B[0]))}}})}),iFe="erf",oFe=["typed"],uFe=ee(iFe,oFe,t=>{var{typed:e}=t;return e("name",{number:function(i){var o=Math.abs(i);return o>=fFe?Gu(i):o<=lFe?Gu(i)*n(o):o<=4?Gu(i)*(1-r(o)):Gu(i)*(1-a(o))},"Array | Matrix":e.referToSelf(s=>i=>qt(i,s))});function n(s){var i=s*s,o=jo[0][4]*i,u=i,l;for(l=0;l<3;l+=1)o=(o+jo[0][l])*i,u=(u+Vf[0][l])*i;return s*(o+jo[0][3])/(u+Vf[0][3])}function r(s){var i=jo[1][8]*s,o=s,u;for(u=0;u<7;u+=1)i=(i+jo[1][u])*s,o=(o+Vf[1][u])*s;var l=(i+jo[1][7])/(o+Vf[1][7]),c=parseInt(s*16)/16,f=(s-c)*(s+c);return Math.exp(-c*c)*Math.exp(-f)*l}function a(s){var i=1/(s*s),o=jo[2][5]*i,u=i,l;for(l=0;l<4;l+=1)o=(o+jo[2][l])*i,u=(u+Vf[2][l])*i;var c=i*(o+jo[2][4])/(u+Vf[2][4]);c=(cFe-c)/s,i=parseInt(s*16)/16;var f=(s-i)*(s+i);return Math.exp(-i*i)*Math.exp(-f)*c}}),lFe=.46875,cFe=.5641895835477563,jo=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Vf=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],fFe=Math.pow(2,53),GR="zeta",dFe=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],pFe=ee(GR,dFe,t=>{var{typed:e,config:n,multiply:r,pow:a,divide:s,factorial:i,equal:o,smallerEq:u,isNegative:l,gamma:c,sin:f,subtract:d,add:h,Complex:m,BigNumber:v,pi:y}=t;return e(GR,{number:E=>b(E,$=>$,()=>20),BigNumber:E=>b(E,$=>new v($),()=>Math.abs(Math.log10(n.relTol))),Complex:x});function b(E,$,I){return o(E,0)?$(-.5):o(E,1)?$(NaN):isFinite(E)?w(E,$,I,D=>D):l(E)?$(NaN):$(1)}function x(E){return E.re===0&&E.im===0?new m(-.5):E.re===1?new m(NaN,NaN):E.re===1/0&&E.im===0?new m(1):E.im===1/0||E.re===-1/0?new m(NaN,NaN):w(E,$=>$,$=>Math.round(1.3*15+.9*Math.abs($.im)),$=>$.re)}function w(E,$,I,D){var k=I(E);if(D(E)>-(k-1)/2)return C(E,$(k),$);var A=r(a(2,E),a($(y),d(E,1)));return A=r(A,f(r(s($(y),2),E))),A=r(A,c(d(1,E))),r(A,w(d(1,E),$,I,D))}function N(E,$){for(var I=E,D=E;u(D,$);D=h(D,1)){var k=s(r(i(h($,d(D,1))),a(4,D)),r(i(d($,D)),i(r(2,D))));I=h(I,k)}return r($,I)}function C(E,$,I){for(var D=s(1,r(N(I(0),$),d(1,a(2,d(1,E))))),k=I(0),A=I(1);u(A,$);A=h(A,1))k=h(k,s(r((-1)**(A-1),N(A,$)),a(A,E)));return r(D,k)}}),KR="mode",hFe=["typed","isNaN","isNumeric"],mFe=ee(KR,hFe,t=>{var{typed:e,isNaN:n,isNumeric:r}=t;return e(KR,{"Array | Matrix":a,"...":function(i){return a(i)}});function a(s){s=yn(s.valueOf());var i=s.length;if(i===0)throw new Error("Cannot calculate mode of an empty array");for(var o={},u=[],l=0,c=0;c<s.length;c++){var f=s[c];if(r(f)&&n(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in o||(o[f]=0),o[f]++,o[f]===l?u.push(f):o[f]>l&&(l=o[f],u=[f])}return u}});function Qa(t,e,n){var r;return String(t).includes("Unexpected type")?(r=arguments.length>2?" (type: "+Ln(n)+", value: "+JSON.stringify(n)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):String(t).includes("complex numbers")?(r=arguments.length>2?" (type: "+Ln(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):t}var XR="prod",gFe=["typed","config","multiplyScalar","numeric"],vFe=ee(XR,gFe,t=>{var{typed:e,config:n,multiplyScalar:r,numeric:a}=t;return e(XR,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(o,u){throw new Error("prod(A, dim) is not yet supported")},"...":function(o){return s(o)}});function s(i){var o;if(fu(i,function(u){try{o=o===void 0?u:r(o,u)}catch(l){throw Qa(l,"prod",u)}}),typeof o=="string"&&(o=a(o,Il(o,n))),o===void 0)throw new Error("Cannot calculate prod of an empty array");return o}}),YR="format",yFe=["typed"],bFe=ee(YR,yFe,t=>{var{typed:e}=t;return e(YR,{any:Qt,"any, Object | function | number | BigNumber":Qt})}),QR="bin",wFe=["typed","format"],xFe=ee(QR,wFe,t=>{var{typed:e,format:n}=t;return e(QR,{"number | BigNumber":function(a){return n(a,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(a,s){return n(a,{notation:"bin",wordSize:s})}})}),JR="oct",SFe=["typed","format"],NFe=ee(JR,SFe,t=>{var{typed:e,format:n}=t;return e(JR,{"number | BigNumber":function(a){return n(a,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(a,s){return n(a,{notation:"oct",wordSize:s})}})}),ZR="hex",CFe=["typed","format"],EFe=ee(ZR,CFe,t=>{var{typed:e,format:n}=t;return e(ZR,{"number | BigNumber":function(a){return n(a,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(a,s){return n(a,{notation:"hex",wordSize:s})}})}),MV=/\$([\w.]+)/g,eM="print",TFe=["typed"],PV=ee(eM,TFe,t=>{var{typed:e}=t;return e(eM,{"string, Object | Array":tM,"string, Object | Array, number | Object":tM})});function tM(t,e,n){return t.replace(MV,function(r,a){var s=a.split("."),i=e[s.shift()];for(i!==void 0&&i.isMatrix&&(i=i.toArray());s.length&&i!==void 0;){var o=s.shift();i=o?i[o]:i+"."}return i!==void 0?ka(i)?i:Qt(i,n):r})}var nM="to",DFe=["typed","matrix","concat"],AFe=ee(nM,DFe,t=>{var{typed:e,matrix:n,concat:r}=t,a=zn({typed:e,matrix:n,concat:r});return e(nM,{"Unit, Unit | string":(s,i)=>s.to(i)},a({Ds:!0}))}),rM="isPrime",$Fe=["typed"],kFe=ee(rM,$Fe,t=>{var{typed:e}=t;return e(rM,{number:function(r){if(r<=3)return r>1;if(r%2===0||r%3===0)return!1;for(var a=5;a*a<=r;a+=6)if(r%a===0||r%(a+2)===0)return!1;return!0},bigint:function(r){if(r<=3n)return r>1n;if(r%2n===0n||r%3n===0n)return!1;for(var a=5n;a*a<=r;a+=6n)if(r%a===0n||r%(a+2n)===0n)return!1;return!0},BigNumber:function(r){if(r.lte(3))return r.gt(1);if(r.mod(2).eq(0)||r.mod(3).eq(0))return!1;if(r.lt(Math.pow(2,32))){for(var a=r.toNumber(),s=5;s*s<=a;s+=6)if(a%s===0||a%(s+2)===0)return!1;return!0}function i(x,w,N){for(var C=1;!w.eq(0);)w.mod(2).eq(0)?(w=w.div(2),x=x.mul(x).mod(N)):(w=w.sub(1),C=x.mul(C).mod(N));return C}var o=r.constructor.clone({precision:r.toFixed(0).length*2});r=new o(r);for(var u=0,l=r.sub(1);l.mod(2).eq(0);)l=l.div(2),u+=1;var c=null;if(r.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(x=>x<r);else{var f=Math.min(r.toNumber()-2,Math.floor(2*Math.pow(r.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=f;d+=1)c.push(f)}for(var h=0;h<c.length;h+=1){var m=c[h],v=i(r.sub(r).add(m),l,r);if(!v.eq(1)){for(var y=0,b=v;!b.eq(r.sub(1));y+=1,b=b.mul(b).mod(r))if(y===u-1)return!1}}return!0},"Array | Matrix":e.referToSelf(n=>r=>qt(r,n))})}),IFe="numeric",_Fe=["number","?bignumber","?fraction"],OFe=ee(IFe,_Fe,t=>{var{number:e,bignumber:n,fraction:r}=t,a={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:i=>e(i),BigNumber:n?i=>n(i):KA,bigint:i=>BigInt(i),Fraction:r?i=>r(i):IV};return function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Ln(o);if(!(c in a))throw new TypeError("Cannot convert "+o+' of type "'+c+'"; valid input types are '+Object.keys(a).join(", "));if(!(u in s))throw new TypeError("Cannot convert "+o+' to type "'+u+'"; valid output types are '+Object.keys(s).join(", "));return u===c?o:s[u](o)}}),aM="divideScalar",FFe=["typed","numeric"],RFe=ee(aM,FFe,t=>{var{typed:e,numeric:n}=t;return e(aM,{"number, number":function(a,s){return a/s},"Complex, Complex":function(a,s){return a.div(s)},"BigNumber, BigNumber":function(a,s){return a.div(s)},"bigint, bigint":function(a,s){return a/s},"Fraction, Fraction":function(a,s){return a.div(s)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,a)=>r.divide(a),"number | Fraction | Complex | BigNumber, Unit":(r,a)=>a.divideInto(r)})}),sM="pow",MFe=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],PFe=ee(sM,MFe,t=>{var{typed:e,config:n,identity:r,multiply:a,matrix:s,inv:i,number:o,fraction:u,Complex:l}=t;return e(sM,{"number, number":c,"Complex, Complex":function(m,v){return m.pow(v)},"BigNumber, BigNumber":function(m,v){return v.isInteger()||m>=0||n.predictable?m.pow(v):new l(m.toNumber(),0).pow(v.toNumber(),0)},"bigint, bigint":(h,m)=>h**m,"Fraction, Fraction":function(m,v){var y=m.pow(v);if(y!=null)return y;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(m.valueOf(),v.valueOf())},"Array, number":f,"Array, BigNumber":function(m,v){return f(m,v.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(m,v){return d(m,v.toNumber())},"Unit, number | BigNumber":function(m,v){return m.pow(v)}});function c(h,m){if(n.predictable&&!wt(m)&&h<0)try{var v=u(m),y=o(v);if((m===y||Math.abs((m-y)/m)<1e-14)&&v.d%2n===1n)return(v.n%2n===0n?1:-1)*Math.pow(-h,m)}catch{}return n.predictable&&(h<-1&&m===1/0||h>-1&&h<0&&m===-1/0)?NaN:wt(m)||h>=0||n.predictable?Uq(h,m):h*h<1&&m===1/0||h*h>1&&m===-1/0?0:new l(h,0).pow(m,0)}function f(h,m){if(!wt(m))throw new TypeError("For A^b, b must be an integer (value is "+m+")");var v=Lt(h);if(v.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+v.length+" dimensions)");if(v[0]!==v[1])throw new Error("For A^b, A must be square (size is "+v[0]+"x"+v[1]+")");if(m<0)try{return f(i(h),-m)}catch(x){throw x.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+m+")"):x}for(var y=r(v[0]).valueOf(),b=h;m>=1;)(m&1)===1&&(y=a(b,y)),m>>=1,b=a(b,b);return y}function d(h,m){return s(f(h.valueOf(),m))}}),jf="Number of decimals in function round must be an integer",iM="round",BFe=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],LFe=ee(iM,BFe,t=>{var{typed:e,config:n,matrix:r,equalScalar:a,zeros:s,BigNumber:i,DenseMatrix:o}=t,u=ba({typed:e,equalScalar:a}),l=Vr({typed:e,DenseMatrix:o}),c=Qi({typed:e});function f(d){return Math.abs(Rg(d).exponent)}return e(iM,{number:function(h){var m=hh(h,f(n.relTol)),v=ga(h,m,n.relTol,n.absTol)?m:h;return hh(v)},"number, number":function(h,m){var v=f(n.relTol);if(m>=v)return hh(h,m);var y=hh(h,v),b=ga(h,y,n.relTol,n.absTol)?y:h;return hh(b,m)},"number, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(jf);return new i(h).toDecimalPlaces(m.toNumber())},Complex:function(h){return h.round()},"Complex, number":function(h,m){if(m%1)throw new TypeError(jf);return h.round(m)},"Complex, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(jf);var v=m.toNumber();return h.round(v)},BigNumber:function(h){var m=new i(h).toDecimalPlaces(f(n.relTol)),v=Cs(h,m,n.relTol,n.absTol)?m:h;return v.toDecimalPlaces(0)},"BigNumber, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(jf);var v=f(n.relTol);if(m>=v)return h.toDecimalPlaces(m.toNumber());var y=h.toDecimalPlaces(v),b=Cs(h,y,n.relTol,n.absTol)?y:h;return b.toDecimalPlaces(m.toNumber())},Fraction:function(h){return h.round()},"Fraction, number":function(h,m){if(m%1)throw new TypeError(jf);return h.round(m)},"Fraction, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(jf);return h.round(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(h,m,v){var y=h.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>qt(h,y=>d(y,m,v))),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>qt(h,d)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>u(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>c(r(h),m,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(h,m)=>a(h,0)?s(m.size(),m.storage()):l(m,h,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(h,m)=>a(h,0)?s(m.size(),m.storage()):c(m,h,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(h,m)=>c(r(m),h,d,!0).valueOf())})}),oM="log",zFe=["config","typed","typeOf","divideScalar","Complex"],WFe=ee(oM,zFe,t=>{var{typed:e,typeOf:n,config:r,divideScalar:a,Complex:s}=t;return e(oM,{number:function(o){return o>=0||r.predictable?Uke(o):new s(o,0).log()},Complex:function(o){return o.log()},BigNumber:function(o){return!o.isNegative()||r.predictable?o.ln():new s(o.toNumber(),0).log()},"any, any":e.referToSelf(i=>(o,u)=>{if(n(o)==="Fraction"&&n(u)==="Fraction"){var l=o.log(u);if(l!==null)return l}return a(i(o),i(u))})})}),uM="log1p",UFe=["typed","config","divideScalar","log","Complex"],qFe=ee(uM,UFe,t=>{var{typed:e,config:n,divideScalar:r,log:a,Complex:s}=t;return e(uM,{number:function(u){return u>=-1||n.predictable?VAe(u):i(new s(u,0))},Complex:i,BigNumber:function(u){var l=u.plus(1);return!l.isNegative()||n.predictable?l.ln():i(new s(u.toNumber(),0))},"Array | Matrix":e.referToSelf(o=>u=>qt(u,o)),"any, any":e.referToSelf(o=>(u,l)=>r(o(u),a(l)))});function i(o){var u=o.re+1;return new s(Math.log(Math.sqrt(u*u+o.im*o.im)),Math.atan2(o.im,u))}}),lM="nthRoots",VFe=["config","typed","divideScalar","Complex"],jFe=ee(lM,VFe,t=>{var{typed:e,config:n,divideScalar:r,Complex:a}=t,s=[function(u){return new a(u,0)},function(u){return new a(0,u)},function(u){return new a(-u,0)},function(u){return new a(0,-u)}];function i(o,u){if(u<0)throw new Error("Root must be greater than zero");if(u===0)throw new Error("Root must be non-zero");if(u%1!==0)throw new Error("Root must be an integer");if(o===0||o.abs()===0)return[new a(0,0)];var l=typeof o=="number",c;(l||o.re===0||o.im===0)&&(l?c=2*+(o<0):o.im===0?c=2*+(o.re<0):c=2*+(o.im<0)+1);for(var f=o.arg(),d=o.abs(),h=[],m=Math.pow(d,1/u),v=0;v<u;v++){var y=(c+4*v)/u;if(y===Math.round(y)){h.push(s[y%4](m));continue}h.push(new a({r:m,phi:(f+2*Math.PI*v)/u}))}return h}return e(lM,{Complex:function(u){return i(u,2)},"Complex, number":i})}),cM="dotPow",HFe=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],GFe=ee(cM,HFe,t=>{var{typed:e,equalScalar:n,matrix:r,pow:a,DenseMatrix:s,concat:i,SparseMatrix:o}=t,u=Ja({typed:e}),l=Io({typed:e,SparseMatrix:o}),c=ba({typed:e,equalScalar:n}),f=Vr({typed:e,DenseMatrix:s}),d=zn({typed:e,matrix:r,concat:i}),h={};for(var m in a.signatures)Object.prototype.hasOwnProperty.call(a.signatures,m)&&!m.includes("Matrix")&&!m.includes("Array")&&(h[m]=a.signatures[m]);var v=e(h);return e(cM,d({elop:v,SS:l,DS:u,Ss:c,sS:f}))}),fM="dotDivide",KFe=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],XFe=ee(fM,KFe,t=>{var{typed:e,matrix:n,equalScalar:r,divideScalar:a,DenseMatrix:s,concat:i,SparseMatrix:o}=t,u=Ji({typed:e,equalScalar:r}),l=Ja({typed:e}),c=Io({typed:e,SparseMatrix:o}),f=ba({typed:e,equalScalar:r}),d=Vr({typed:e,DenseMatrix:s}),h=zn({typed:e,matrix:n,concat:i});return e(fM,h({elop:a,SS:c,DS:l,SD:u,Ss:f,sS:d}))});function Mg(t){var{DenseMatrix:e}=t;return function(r,a,s){var i=r.size();if(i.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+Qt(i)+")");var o=i[0],u=i[1];if(o!==u)throw new RangeError("Matrix must be square (size: "+Qt(i)+")");var l=[];if($t(a)){var c=a.size(),f=a._data;if(c.length===1){if(c[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<o;d++)l[d]=[f[d]];return new e({data:l,size:[o,1],datatype:a._datatype})}if(c.length===2){if(c[0]!==o||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(ib(a)){if(s){l=[];for(var h=0;h<o;h++)l[h]=[f[h][0]];return new e({data:l,size:[o,1],datatype:a._datatype})}return a}if(vc(a)){for(var m=0;m<o;m++)l[m]=[0];for(var v=a._values,y=a._index,b=a._ptr,x=b[1],w=b[0];w<x;w++){var N=y[w];l[N][0]=v[w]}return new e({data:l,size:[o,1],datatype:a._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(An(a)){var C=Lt(a);if(C.length===1){if(C[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var E=0;E<o;E++)l[E]=[a[E]];return new e({data:l,size:[o,1]})}if(C.length===2){if(C[0]!==o||C[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var $=0;$<o;$++)l[$]=[a[$][0]];return new e({data:l,size:[o,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var dM="lsolve",YFe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],QFe=ee(dM,YFe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:s,equalScalar:i,DenseMatrix:o}=t,u=Mg({DenseMatrix:o});return e(dM,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.valueOf()}});function l(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=[],b=f._data,x=0;x<v;x++){var w=h[x][0]||0,N=void 0;if(i(w,0))N=0;else{var C=b[x][x];if(i(C,0))throw new Error("Linear system cannot be solved since matrix is singular");N=r(w,C);for(var E=x+1;E<m;E++)h[E]=[s(h[E][0]||0,a(N,b[E][x]))]}y[x]=[N]}return new o({data:y,size:[m,1]})}function c(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=f._values,b=f._index,x=f._ptr,w=[],N=0;N<v;N++){var C=h[N][0]||0;if(i(C,0))w[N]=[0];else{for(var E=0,$=[],I=[],D=x[N],k=x[N+1],A=D;A<k;A++){var O=b[A];O===N?E=y[A]:O>N&&($.push(y[A]),I.push(O))}if(i(E,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var B=r(C,E),z=0,L=I.length;z<L;z++){var F=I[z];h[F]=[s(h[F][0]||0,a(B,$[z]))]}w[N]=[B]}}return new o({data:w,size:[m,1]})}}),pM="usolve",JFe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],ZFe=ee(pM,JFe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:s,equalScalar:i,DenseMatrix:o}=t,u=Mg({DenseMatrix:o});return e(pM,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.valueOf()}});function l(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=[],b=f._data,x=v-1;x>=0;x--){var w=h[x][0]||0,N=void 0;if(i(w,0))N=0;else{var C=b[x][x];if(i(C,0))throw new Error("Linear system cannot be solved since matrix is singular");N=r(w,C);for(var E=x-1;E>=0;E--)h[E]=[s(h[E][0]||0,a(N,b[E][x]))]}y[x]=[N]}return new o({data:y,size:[m,1]})}function c(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=f._values,b=f._index,x=f._ptr,w=[],N=v-1;N>=0;N--){var C=h[N][0]||0;if(i(C,0))w[N]=[0];else{for(var E=0,$=[],I=[],D=x[N],k=x[N+1],A=k-1;A>=D;A--){var O=b[A];O===N?E=y[A]:O<N&&($.push(y[A]),I.push(O))}if(i(E,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var B=r(C,E),z=0,L=I.length;z<L;z++){var F=I[z];h[F]=[s(h[F][0],a(B,$[z]))]}w[N]=[B]}}return new o({data:w,size:[m,1]})}}),hM="lsolveAll",eRe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],tRe=ee(hM,eRe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:s,equalScalar:i,DenseMatrix:o}=t,u=Mg({DenseMatrix:o});return e(hM,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.map(y=>y.valueOf())}});function l(f,d){for(var h=[u(f,d,!0)._data.map(I=>I[0])],m=f._data,v=f._size[0],y=f._size[1],b=0;b<y;b++)for(var x=h.length,w=0;w<x;w++){var N=h[w];if(i(m[b][b],0))if(i(N[b],0)){if(w===0){var E=[...N];E[b]=1;for(var $=b+1;$<y;$++)E[$]=s(E[$],m[$][b]);h.push(E)}}else{if(w===0)return[];h.splice(w,1),w-=1,x-=1}else{N[b]=r(N[b],m[b][b]);for(var C=b+1;C<y;C++)N[C]=s(N[C],a(N[b],m[C][b]))}}return h.map(I=>new o({data:I.map(D=>[D]),size:[v,1]}))}function c(f,d){for(var h=[u(f,d,!0)._data.map(V=>V[0])],m=f._size[0],v=f._size[1],y=f._values,b=f._index,x=f._ptr,w=0;w<v;w++)for(var N=h.length,C=0;C<N;C++){for(var E=h[C],$=[],I=[],D=x[w],k=x[w+1],A=0,O=D;O<k;O++){var B=b[O];B===w?A=y[O]:B>w&&($.push(y[O]),I.push(B))}if(i(A,0))if(i(E[w],0)){if(C===0){var R=[...E];R[w]=1;for(var q=0,M=I.length;q<M;q++){var G=I[q];R[G]=s(R[G],$[q])}h.push(R)}}else{if(C===0)return[];h.splice(C,1),C-=1,N-=1}else{E[w]=r(E[w],A);for(var z=0,L=I.length;z<L;z++){var F=I[z];E[F]=s(E[F],a(E[w],$[z]))}}}return h.map(V=>new o({data:V.map(H=>[H]),size:[m,1]}))}}),mM="usolveAll",nRe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],rRe=ee(mM,nRe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:s,equalScalar:i,DenseMatrix:o}=t,u=Mg({DenseMatrix:o});return e(mM,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.map(y=>y.valueOf())}});function l(f,d){for(var h=[u(f,d,!0)._data.map(I=>I[0])],m=f._data,v=f._size[0],y=f._size[1],b=y-1;b>=0;b--)for(var x=h.length,w=0;w<x;w++){var N=h[w];if(i(m[b][b],0))if(i(N[b],0)){if(w===0){var E=[...N];E[b]=1;for(var $=b-1;$>=0;$--)E[$]=s(E[$],m[$][b]);h.push(E)}}else{if(w===0)return[];h.splice(w,1),w-=1,x-=1}else{N[b]=r(N[b],m[b][b]);for(var C=b-1;C>=0;C--)N[C]=s(N[C],a(N[b],m[C][b]))}}return h.map(I=>new o({data:I.map(D=>[D]),size:[v,1]}))}function c(f,d){for(var h=[u(f,d,!0)._data.map(V=>V[0])],m=f._size[0],v=f._size[1],y=f._values,b=f._index,x=f._ptr,w=v-1;w>=0;w--)for(var N=h.length,C=0;C<N;C++){for(var E=h[C],$=[],I=[],D=x[w],k=x[w+1],A=0,O=k-1;O>=D;O--){var B=b[O];B===w?A=y[O]:B<w&&($.push(y[O]),I.push(B))}if(i(A,0))if(i(E[w],0)){if(C===0){var R=[...E];R[w]=1;for(var q=0,M=I.length;q<M;q++){var G=I[q];R[G]=s(R[G],$[q])}h.push(R)}}else{if(C===0)return[];h.splice(C,1),C-=1,N-=1}else{E[w]=r(E[w],A);for(var z=0,L=I.length;z<L;z++){var F=I[z];E[F]=s(E[F],a(E[w],$[z]))}}}return h.map(V=>new o({data:V.map(H=>[H]),size:[m,1]}))}}),aRe="matAlgo08xS0Sid",sRe=["typed","equalScalar"],XA=ee(aRe,sRe,t=>{var{typed:e,equalScalar:n}=t;return function(a,s,i){var o=a._values,u=a._index,l=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=s._values,h=s._index,m=s._ptr,v=s._size,y=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==v.length)throw new Zt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");if(!o||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var b=c[0],x=c[1],w,N=n,C=0,E=i;typeof f=="string"&&f===y&&f!=="mixed"&&(w=f,N=e.find(n,[w,w]),C=e.convert(0,w),E=e.find(i,[w,w]));for(var $=[],I=[],D=[],k=[],A=[],O,B,z,L,F=0;F<x;F++){D[F]=I.length;var R=F+1;for(B=l[F],z=l[F+1],O=B;O<z;O++)L=u[O],A[L]=R,k[L]=o[O],I.push(L);for(B=m[F],z=m[F+1],O=B;O<z;O++)L=h[O],A[L]===R&&(k[L]=E(k[L],d[O]));for(O=D[F];O<I.length;){L=I[O];var q=k[L];N(q,C)?I.splice(O,1):($.push(q),O++)}}return D[x]=I.length,a.createSparseMatrix({values:$,index:I,ptr:D,size:[b,x],datatype:f===a._datatype&&y===s._datatype?w:void 0})}}),YA=ee("useMatrixForArrayScalar",["typed","matrix"],t=>{var{typed:e,matrix:n}=t;return{"Array, number":e.referTo("DenseMatrix, number",r=>(a,s)=>r(n(a),s).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",r=>(a,s)=>r(n(a),s).valueOf()),"number, Array":e.referTo("number, DenseMatrix",r=>(a,s)=>r(a,n(s)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",r=>(a,s)=>r(a,n(s)).valueOf())}}),gM="leftShift",iRe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],oRe=ee(gM,iRe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,DenseMatrix:s,concat:i}=t,o=Ol({typed:e}),u=Ji({typed:e,equalScalar:r}),l=XA({typed:e,equalScalar:r}),c=ef({typed:e,DenseMatrix:s}),f=ba({typed:e,equalScalar:r}),d=Qi({typed:e}),h=zn({typed:e,matrix:n,concat:i}),m=YA({typed:e,matrix:n});return e(gM,{"number, number":Gq,"BigNumber, BigNumber":IOe,"bigint, bigint":(v,y)=>v<<y,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():f(y,b,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():d(y,b,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):c(b,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):d(b,y,v,!0))},m,h({SS:l,DS:o,SD:u}))}),vM="rightArithShift",uRe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],lRe=ee(vM,uRe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,DenseMatrix:s,concat:i}=t,o=Ol({typed:e}),u=Ji({typed:e,equalScalar:r}),l=XA({typed:e,equalScalar:r}),c=ef({typed:e,DenseMatrix:s}),f=ba({typed:e,equalScalar:r}),d=Qi({typed:e}),h=zn({typed:e,matrix:n,concat:i}),m=YA({typed:e,matrix:n});return e(vM,{"number, number":Kq,"BigNumber, BigNumber":_Oe,"bigint, bigint":(v,y)=>v>>y,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():f(y,b,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():d(y,b,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):c(b,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):d(b,y,v,!0))},m,h({SS:l,DS:o,SD:u}))}),yM="rightLogShift",cRe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],fRe=ee(yM,cRe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,DenseMatrix:s,concat:i}=t,o=Ol({typed:e}),u=Ji({typed:e,equalScalar:r}),l=XA({typed:e,equalScalar:r}),c=ef({typed:e,DenseMatrix:s}),f=ba({typed:e,equalScalar:r}),d=Qi({typed:e}),h=zn({typed:e,matrix:n,concat:i}),m=YA({typed:e,matrix:n});return e(yM,{"number, number":Xq,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():f(y,b,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():d(y,b,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):c(b,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):d(b,y,v,!0))},m,h({SS:l,DS:o,SD:u}))}),bM="and",dRe=["typed","matrix","equalScalar","zeros","not","concat"],BV=ee(bM,dRe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,not:s,concat:i}=t,o=Ji({typed:e,equalScalar:r}),u=qw({typed:e,equalScalar:r}),l=ba({typed:e,equalScalar:r}),c=Qi({typed:e}),f=zn({typed:e,matrix:n,concat:i});return e(bM,{"number, number":JC,"Complex, Complex":function(h,m){return(h.re!==0||h.im!==0)&&(m.re!==0||m.im!==0)},"BigNumber, BigNumber":function(h,m){return!h.isZero()&&!m.isZero()&&!h.isNaN()&&!m.isNaN()},"bigint, bigint":JC,"Unit, Unit":e.referToSelf(d=>(h,m)=>d(h.value||0,m.value||0)),"SparseMatrix, any":e.referToSelf(d=>(h,m)=>s(m)?a(h.size(),h.storage()):l(h,m,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(h,m)=>s(m)?a(h.size(),h.storage()):c(h,m,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(h,m)=>s(h)?a(h.size(),h.storage()):l(m,h,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(h,m)=>s(h)?a(h.size(),h.storage()):c(m,h,d,!0)),"Array, any":e.referToSelf(d=>(h,m)=>d(n(h),m).valueOf()),"any, Array":e.referToSelf(d=>(h,m)=>d(h,n(m)).valueOf())},f({SS:u,DS:o}))}),bb="compare",pRe=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],hRe=ee(bb,pRe,t=>{var{typed:e,config:n,equalScalar:r,matrix:a,BigNumber:s,Fraction:i,DenseMatrix:o,concat:u}=t,l=Ja({typed:e}),c=Uw({typed:e,equalScalar:r}),f=Vr({typed:e,DenseMatrix:o}),d=zn({typed:e,matrix:a,concat:u}),h=mp({typed:e});return e(bb,mRe({typed:e,config:n}),{"boolean, boolean":function(v,y){return v===y?0:v>y?1:-1},"BigNumber, BigNumber":function(v,y){return Cs(v,y,n.relTol,n.absTol)?new s(0):new s(v.cmp(y))},"bigint, bigint":function(v,y){return v===y?0n:v>y?1n:-1n},"Fraction, Fraction":function(v,y){return new i(v.compare(y))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,d({SS:c,DS:l,Ss:f}))}),mRe=ee(bb,["typed","config"],t=>{var{typed:e,config:n}=t;return e(bb,{"number, number":function(a,s){return ga(a,s,n.relTol,n.absTol)?0:a>s?1:-1}})}),US,wM;function gRe(){return wM||(wM=1,US=function t(e,n){var r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,i=/^0x[0-9a-f]+$/i,o=/^0/,u=function(w){return t.insensitive&&(""+w).toLowerCase()||""+w},l=u(e).replace(a,"")||"",c=u(n).replace(a,"")||"",f=l.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(l.match(i),16)||f.length!==1&&l.match(s)&&Date.parse(l),m=parseInt(c.match(i),16)||h&&c.match(s)&&Date.parse(c)||null,v,y;if(m){if(h<m)return-1;if(h>m)return 1}for(var b=0,x=Math.max(f.length,d.length);b<x;b++){if(v=!(f[b]||"").match(o)&&parseFloat(f[b])||f[b]||0,y=!(d[b]||"").match(o)&&parseFloat(d[b])||d[b]||0,isNaN(v)!==isNaN(y))return isNaN(v)?1:-1;if(typeof v!=typeof y&&(v+="",y+=""),v<y)return-1;if(v>y)return 1}return 0}),US}var vRe=gRe();const Hf=Uc(vRe);var xM="compareNatural",yRe=["typed","compare"],bRe=ee(xM,yRe,t=>{var{typed:e,compare:n}=t,r=n.signatures["boolean,boolean"];return e(xM,{"any, any":a});function a(u,l){var c=Ln(u),f=Ln(l),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return d=n(u,l),d.toString()!=="0"?d>0?1:-1:Hf(c,f);var h=["Array","DenseMatrix","SparseMatrix"];if(h.includes(c)||h.includes(f))return d=s(a,u,l),d!==0?d:Hf(c,f);if(c!==f)return Hf(c,f);if(c==="Complex")return wRe(u,l);if(c==="Unit")return u.equalBase(l)?a(u.value,l.value):i(a,u.formatUnits(),l.formatUnits());if(c==="boolean")return r(u,l);if(c==="string")return Hf(u,l);if(c==="Object")return o(a,u,l);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function s(u,l,c){return vc(l)&&vc(c)?i(u,l.toJSON().values,c.toJSON().values):vc(l)?s(u,l.toArray(),c):vc(c)?s(u,l,c.toArray()):ib(l)?s(u,l.toJSON().data,c):ib(c)?s(u,l,c.toJSON().data):Array.isArray(l)?Array.isArray(c)?i(u,l,c):s(u,l,[c]):s(u,[l],c)}function i(u,l,c){for(var f=0,d=Math.min(l.length,c.length);f<d;f++){var h=u(l[f],c[f]);if(h!==0)return h}return l.length>c.length?1:l.length<c.length?-1:0}function o(u,l,c){var f=Object.keys(l),d=Object.keys(c);f.sort(Hf),d.sort(Hf);var h=i(u,f,d);if(h!==0)return h;for(var m=0;m<f.length;m++){var v=u(l[f[m]],c[d[m]]);if(v!==0)return v}return 0}});function wRe(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}var SM="compareText",xRe=["typed","matrix","concat"];GC.signature="any, any";var SRe=ee(SM,xRe,t=>{var{typed:e,matrix:n,concat:r}=t,a=zn({typed:e,matrix:n,concat:r});return e(SM,GC,a({elop:GC,Ds:!0}))}),wb="equal",NRe=["typed","matrix","equalScalar","DenseMatrix","concat","SparseMatrix"],CRe=ee(wb,NRe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:s,SparseMatrix:i}=t,o=Ja({typed:e}),u=Io({typed:e,SparseMatrix:i}),l=Vr({typed:e,DenseMatrix:a}),c=zn({typed:e,matrix:n,concat:s});return e(wb,ERe({typed:e,equalScalar:r}),c({elop:r,SS:u,DS:o,Ss:l}))}),ERe=ee(wb,["typed","equalScalar"],t=>{var{typed:e,equalScalar:n}=t;return e(wb,{"any, any":function(a,s){return a===null?s===null:s===null?a===null:a===void 0?s===void 0:s===void 0?a===void 0:n(a,s)}})}),NM="equalText",TRe=["typed","compareText","isZero"],DRe=ee(NM,TRe,t=>{var{typed:e,compareText:n,isZero:r}=t;return e(NM,{"any, any":function(s,i){return r(n(s,i))}})}),xb="smaller",ARe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],$Re=ee(xb,ARe,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:a,concat:s,SparseMatrix:i}=t,o=Ja({typed:e}),u=Io({typed:e,SparseMatrix:i}),l=Vr({typed:e,DenseMatrix:a}),c=zn({typed:e,matrix:r,concat:s}),f=mp({typed:e});return e(xb,kRe({typed:e,config:n}),{"boolean, boolean":(d,h)=>d<h,"BigNumber, BigNumber":function(h,m){return h.lt(m)&&!Cs(h,m,n.relTol,n.absTol)},"bigint, bigint":(d,h)=>d<h,"Fraction, Fraction":(d,h)=>d.compare(h)===-1,"Complex, Complex":function(h,m){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:o,Ss:l}))}),kRe=ee(xb,["typed","config"],t=>{var{typed:e,config:n}=t;return e(xb,{"number, number":function(a,s){return a<s&&!ga(a,s,n.relTol,n.absTol)}})}),Sb="smallerEq",IRe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],_Re=ee(Sb,IRe,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:a,concat:s,SparseMatrix:i}=t,o=Ja({typed:e}),u=Io({typed:e,SparseMatrix:i}),l=Vr({typed:e,DenseMatrix:a}),c=zn({typed:e,matrix:r,concat:s}),f=mp({typed:e});return e(Sb,ORe({typed:e,config:n}),{"boolean, boolean":(d,h)=>d<=h,"BigNumber, BigNumber":function(h,m){return h.lte(m)||Cs(h,m,n.relTol,n.absTol)},"bigint, bigint":(d,h)=>d<=h,"Fraction, Fraction":(d,h)=>d.compare(h)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:o,Ss:l}))}),ORe=ee(Sb,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Sb,{"number, number":function(a,s){return a<=s||ga(a,s,n.relTol,n.absTol)}})}),Nb="larger",FRe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],RRe=ee(Nb,FRe,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:a,concat:s,SparseMatrix:i}=t,o=Ja({typed:e}),u=Io({typed:e,SparseMatrix:i}),l=Vr({typed:e,DenseMatrix:a}),c=zn({typed:e,matrix:r,concat:s}),f=mp({typed:e});return e(Nb,MRe({typed:e,config:n}),{"boolean, boolean":(d,h)=>d>h,"BigNumber, BigNumber":function(h,m){return h.gt(m)&&!Cs(h,m,n.relTol,n.absTol)},"bigint, bigint":(d,h)=>d>h,"Fraction, Fraction":(d,h)=>d.compare(h)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:o,Ss:l}))}),MRe=ee(Nb,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Nb,{"number, number":function(a,s){return a>s&&!ga(a,s,n.relTol,n.absTol)}})}),Cb="largerEq",PRe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],BRe=ee(Cb,PRe,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:a,concat:s,SparseMatrix:i}=t,o=Ja({typed:e}),u=Io({typed:e,SparseMatrix:i}),l=Vr({typed:e,DenseMatrix:a}),c=zn({typed:e,matrix:r,concat:s}),f=mp({typed:e});return e(Cb,LRe({typed:e,config:n}),{"boolean, boolean":(d,h)=>d>=h,"BigNumber, BigNumber":function(h,m){return h.gte(m)||Cs(h,m,n.relTol,n.absTol)},"bigint, bigint":function(h,m){return h>=m},"Fraction, Fraction":(d,h)=>d.compare(h)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:o,Ss:l}))}),LRe=ee(Cb,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Cb,{"number, number":function(a,s){return a>=s||ga(a,s,n.relTol,n.absTol)}})}),CM="deepEqual",zRe=["typed","equal"],WRe=ee(CM,zRe,t=>{var{typed:e,equal:n}=t;return e(CM,{"any, any":function(s,i){return r(s.valueOf(),i.valueOf())}});function r(a,s){if(Array.isArray(a))if(Array.isArray(s)){var i=a.length;if(i!==s.length)return!1;for(var o=0;o<i;o++)if(!r(a[o],s[o]))return!1;return!0}else return!1;else return Array.isArray(s)?!1:n(a,s)}}),Eb="unequal",URe=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],qRe=ee(Eb,URe,t=>{var{typed:e,config:n,equalScalar:r,matrix:a,DenseMatrix:s,concat:i,SparseMatrix:o}=t,u=Ja({typed:e}),l=Io({typed:e,SparseMatrix:o}),c=Vr({typed:e,DenseMatrix:s}),f=zn({typed:e,matrix:a,concat:i});return e(Eb,VRe({typed:e,equalScalar:r}),f({elop:d,SS:l,DS:u,Ss:c}));function d(h,m){return!r(h,m)}}),VRe=ee(Eb,["typed","equalScalar"],t=>{var{typed:e,equalScalar:n}=t;return e(Eb,{"any, any":function(a,s){return a===null?s!==null:s===null?a!==null:a===void 0?s!==void 0:s===void 0?a!==void 0:!n(a,s)}})}),EM="partitionSelect",jRe=["typed","isNumeric","isNaN","compare"],HRe=ee(EM,jRe,t=>{var{typed:e,isNumeric:n,isNaN:r,compare:a}=t,s=a,i=(l,c)=>-a(l,c);return e(EM,{"Array | Matrix, number":function(c,f){return o(c,f,s)},"Array | Matrix, number, string":function(c,f,d){if(d==="asc")return o(c,f,s);if(d==="desc")return o(c,f,i);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":o});function o(l,c,f){if(!wt(c)||c<0)throw new Error("k must be a non-negative integer");if($t(l)){var d=l.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return u(l.valueOf(),c,f)}if(Array.isArray(l))return u(l,c,f)}function u(l,c,f){if(c>=l.length)throw new Error("k out of bounds");for(var d=0;d<l.length;d++)if(n(l[d])&&r(l[d]))return l[d];for(var h=0,m=l.length-1;h<m;){for(var v=h,y=m,b=l[Math.floor(Math.random()*(m-h+1))+h];v<y;)if(f(l[v],b)>=0){var x=l[y];l[y]=l[v],l[v]=x,--y}else++v;f(l[v],b)>0&&--v,c<=v?m=v:h=v+1}return l[c]}}),TM="sort",GRe=["typed","matrix","compare","compareNatural"],KRe=ee(TM,GRe,t=>{var{typed:e,matrix:n,compare:r,compareNatural:a}=t,s=r,i=(c,f)=>-r(c,f);return e(TM,{Array:function(f){return u(f),f.sort(s)},Matrix:function(f){return l(f),n(f.toArray().sort(s),f.storage())},"Array, function":function(f,d){return u(f),f.sort(d)},"Matrix, function":function(f,d){return l(f),n(f.toArray().sort(d),f.storage())},"Array, string":function(f,d){return u(f),f.sort(o(d))},"Matrix, string":function(f,d){return l(f),n(f.toArray().sort(o(d)),f.storage())}});function o(c){if(c==="asc")return s;if(c==="desc")return i;if(c==="natural")return a;throw new Error('String "asc", "desc", or "natural" expected')}function u(c){if(Lt(c).length!==1)throw new Error("One dimensional array expected")}function l(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),DM="max",XRe=["typed","config","numeric","larger"],LV=ee(DM,XRe,t=>{var{typed:e,config:n,numeric:r,larger:a}=t;return e(DM,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":function(u,l){return Ww(u,l.valueOf(),s)},"...":function(u){if(dp(u))throw new TypeError("Scalar values expected in function max");return i(u)}});function s(o,u){try{return a(o,u)?o:u}catch(l){throw Qa(l,"max",u)}}function i(o){var u;if(fu(o,function(l){try{isNaN(l)&&typeof l=="number"?u=NaN:(u===void 0||a(l,u))&&(u=l)}catch(c){throw Qa(c,"max",l)}}),u===void 0)throw new Error("Cannot calculate max of an empty array");return typeof u=="string"&&(u=r(u,Il(u,n))),u}}),AM="min",YRe=["typed","config","numeric","smaller"],zV=ee(AM,YRe,t=>{var{typed:e,config:n,numeric:r,smaller:a}=t;return e(AM,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":function(u,l){return Ww(u,l.valueOf(),s)},"...":function(u){if(dp(u))throw new TypeError("Scalar values expected in function min");return i(u)}});function s(o,u){try{return a(o,u)?o:u}catch(l){throw Qa(l,"min",u)}}function i(o){var u;if(fu(o,function(l){try{isNaN(l)&&typeof l=="number"?u=NaN:(u===void 0||a(l,u))&&(u=l)}catch(c){throw Qa(c,"min",l)}}),u===void 0)throw new Error("Cannot calculate min of an empty array");return typeof u=="string"&&(u=r(u,Il(u,n))),u}}),QRe="ImmutableDenseMatrix",JRe=["smaller","DenseMatrix"],ZRe=ee(QRe,JRe,t=>{var{smaller:e,DenseMatrix:n}=t;function r(a,s){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(s&&!ka(s))throw new Error("Invalid datatype: "+s);if($t(a)||An(a)){var i=new n(a,s);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(a&&An(a.data)&&An(a.size))this._data=a.data,this._size=a.size,this._datatype=a.datatype,this._min=typeof a.min<"u"?a.min:null,this._max=typeof a.max<"u"?a.max:null;else{if(a)throw new TypeError("Unsupported type of data ("+Ln(a)+")");this._data=[],this._size=[0],this._datatype=s,this._min=null,this._max=null}}return r.prototype=new n,r.prototype.type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(a){switch(arguments.length){case 1:{var s=n.prototype.subset.call(this,a);return $t(s)?new r({data:s._data,size:s._size,datatype:s._datatype}):s}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:Wt(this._data),size:Wt(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(a){return new r(a)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(this._min===null){var a=null;this.forEach(function(s){(a===null||e(s,a))&&(a=s)}),this._min=a!==null?a:void 0}return this._min},r.prototype.max=function(){if(this._max===null){var a=null;this.forEach(function(s){(a===null||e(a,s))&&(a=s)}),this._max=a!==null?a:void 0}return this._max},r},{isClass:!0}),eMe="Index",tMe=["ImmutableDenseMatrix","getMatrixDataType"],nMe=ee(eMe,tMe,t=>{var{ImmutableDenseMatrix:e,getMatrixDataType:n}=t;function r(s){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var i=0,o=arguments.length;i<o;i++){var u=arguments[i],l=An(u),c=$t(u),f=null;if(RA(u))this._dimensions.push(u),this._isScalar=!1;else if(l||c){var d=void 0;n(u)==="boolean"?(l&&(d=a($M(u).valueOf())),c&&(d=a($M(u._data).valueOf())),f=u.valueOf().length):d=a(u.valueOf()),this._dimensions.push(d);var h=d.size();(h.length!==1||h[0]!==1||f!==null)&&(this._isScalar=!1)}else if(typeof u=="number")this._dimensions.push(a([u]));else if(typeof u=="string")this._dimensions.push(u);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(f)}}r.prototype.type="Index",r.prototype.isIndex=!0;function a(s){for(var i=0,o=s.length;i<o;i++)if(typeof s[i]!="number"||!wt(s[i]))throw new TypeError("Index parameters must be positive integer numbers");return new e(s)}return r.prototype.clone=function(){var s=new r;return s._dimensions=Wt(this._dimensions),s._isScalar=this._isScalar,s._sourceSize=this._sourceSize,s},r.create=function(s){var i=new r;return r.apply(i,s),i},r.prototype.size=function(){for(var s=[],i=0,o=this._dimensions.length;i<o;i++){var u=this._dimensions[i];s[i]=typeof u=="string"?1:u.size()[0]}return s},r.prototype.max=function(){for(var s=[],i=0,o=this._dimensions.length;i<o;i++){var u=this._dimensions[i];s[i]=typeof u=="string"?u:u.max()}return s},r.prototype.min=function(){for(var s=[],i=0,o=this._dimensions.length;i<o;i++){var u=this._dimensions[i];s[i]=typeof u=="string"?u:u.min()}return s},r.prototype.forEach=function(s){for(var i=0,o=this._dimensions.length;i<o;i++)s(this._dimensions[i],i,this)},r.prototype.dimension=function(s){return typeof s!="number"?null:this._dimensions[s]||null},r.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var s=[],i=0,o=this._dimensions.length;i<o;i++){var u=this._dimensions[i];s.push(typeof u=="string"?u:u.toArray())}return s},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var s=[],i=0,o=this._dimensions.length;i<o;i++){var u=this._dimensions[i];typeof u=="string"?s.push(JSON.stringify(u)):s.push(u.toString())}return"["+s.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(s){return r.create(s.dimensions)},r},{isClass:!0});function $M(t){var e=[];return t.forEach((n,r)=>{n&&e.push(r)}),e}var rMe="FibonacciHeap",aMe=["smaller","larger"],sMe=ee(rMe,aMe,t=>{var{smaller:e,larger:n}=t,r=1/Math.log((1+Math.sqrt(5))/2);function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}a.prototype.type="FibonacciHeap",a.prototype.isFibonacciHeap=!0,a.prototype.insert=function(c,f){var d={key:c,value:f,degree:0};if(this._minimum){var h=this._minimum;d.left=h,d.right=h.right,h.right=d,d.right.left=d,e(c,h.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},a.prototype.size=function(){return this._size},a.prototype.clear=function(){this._minimum=null,this._size=0},a.prototype.isEmpty=function(){return this._size===0},a.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,d=c.degree,h=c.child;d>0;){var m=h.right;h.left.right=h.right,h.right.left=h.left,h.left=f,h.right=f.right,f.right=h,h.right.left=h,h.parent=null,h=m,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=l(f,this._size)),this._size--,this._minimum=f,c},a.prototype.remove=function(c){this._minimum=s(this._minimum,c,-1),this.extractMinimum()};function s(c,f,d){f.key=d;var h=f.parent;return h&&e(f.key,h.key)&&(i(c,f,h),o(c,h)),e(f.key,c.key)&&(c=f),c}function i(c,f,d){f.left.right=f.right,f.right.left=f.left,d.degree--,d.child===f&&(d.child=f.right),d.degree===0&&(d.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function o(c,f){var d=f.parent;d&&(f.mark?(i(c,f,d),o(d)):f.mark=!0)}var u=function(f,d){f.left.right=f.right,f.right.left=f.left,f.parent=d,d.child?(f.left=d.child,f.right=d.child.right,d.child.right=f,f.right.left=f):(d.child=f,f.right=f,f.left=f),d.degree++,f.mark=!1};function l(c,f){var d=Math.floor(Math.log(f)*r)+1,h=new Array(d),m=0,v=c;if(v)for(m++,v=v.right;v!==c;)m++,v=v.right;for(var y;m>0;){for(var b=v.degree,x=v.right;y=h[b],!!y;){if(n(v.key,y.key)){var w=y;y=v,v=w}u(y,v),h[b]=null,b++}h[b]=v,v=x,m--}c=null;for(var N=0;N<d;N++)y=h[N],y&&(c?(y.left.right=y.right,y.right.left=y.left,y.left=c,y.right=c.right,c.right=y,y.right.left=y,e(y.key,c.key)&&(c=y)):c=y);return c}return a},{isClass:!0}),iMe="Spa",oMe=["addScalar","equalScalar","FibonacciHeap"],uMe=ee(iMe,oMe,t=>{var{addScalar:e,equalScalar:n,FibonacciHeap:r}=t;function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return a.prototype.type="Spa",a.prototype.isSpa=!0,a.prototype.set=function(s,i){if(this._values[s])this._values[s].value=i;else{var o=this._heap.insert(s,i);this._values[s]=o}},a.prototype.get=function(s){var i=this._values[s];return i?i.value:0},a.prototype.accumulate=function(s,i){var o=this._values[s];o?o.value=e(o.value,i):(o=this._heap.insert(s,i),this._values[s]=o)},a.prototype.forEach=function(s,i,o){var u=this._heap,l=this._values,c=[],f=u.extractMinimum();for(f&&c.push(f);f&&f.key<=i;)f.key>=s&&(n(f.value,0)||o(f.key,f.value,this)),f=u.extractMinimum(),f&&c.push(f);for(var d=0;d<c.length;d++){var h=c[d];f=u.insert(h.key,h.value),l[f.key]=f}},a.prototype.swap=function(s,i){var o=this._values[s],u=this._values[i];if(!o&&u)o=this._heap.insert(s,u.value),this._heap.remove(u),this._values[s]=o,this._values[i]=void 0;else if(o&&!u)u=this._heap.insert(i,o.value),this._heap.remove(o),this._values[i]=u,this._values[s]=void 0;else if(o&&u){var l=o.value;o.value=u.value,u.value=l}},a},{isClass:!0});function lMe(t){var e=0,n=1,r=Object.create(null),a=Object.create(null),s=0,i=function(u){var l=a[u];if(l&&(delete r[l],delete a[u],--e,n===l)){if(!e){s=0,n=1;return}for(;!Object.prototype.hasOwnProperty.call(r,++n););}};return t=Math.abs(t),{hit:function(u){var l=a[u],c=++s;if(r[c]=u,a[u]=c,!l)return++e,e<=t?void 0:(u=r[n],i(u),u);if(delete r[l],n===l)for(;!Object.prototype.hasOwnProperty.call(r,++n););},delete:i,clear:function(){e=s=0,n=1,r=Object.create(null),a=Object.create(null)}}}function Pg(t){var{hasher:e,limit:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=n??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function r(){typeof r.cache!="object"&&(r.cache={values:new Map,lru:lMe(n||Number.POSITIVE_INFINITY)});for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var i=e(a);if(r.cache.values.has(i))return r.cache.lru.hit(i),r.cache.values.get(i);var o=t.apply(t,a);return r.cache.values.set(i,o),r.cache.values.delete(r.cache.lru.hit(i)),o}}var cMe=Pg(function(t){return new t(1).exp()},{hasher:Vw}),fMe=Pg(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:Vw}),QA=Pg(function(t){return t.acos(-1)},{hasher:Vw}),dMe=Pg(function(t){return QA(t).times(2)},{hasher:Vw});function Vw(t){return t[0].precision}function kM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function qS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kM(Object(n),!0).forEach(function(r){Wr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var pMe="Unit",hMe=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],mMe=ee(pMe,hMe,t=>{var{on:e,config:n,addScalar:r,subtractScalar:a,multiplyScalar:s,divideScalar:i,pow:o,abs:u,fix:l,round:c,equal:f,isNumeric:d,format:h,number:m,Complex:v,BigNumber:y,Fraction:b}=t,x=m;function w(Q,se){if(!(this instanceof w))throw new Error("Constructor must be called with the new operator");if(!(Q==null||d(Q)||eu(Q)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,se===void 0)this.units=[],this.dimensions=q.map(xe=>0);else if(typeof se=="string"){var ve=w.parse(se);this.units=ve.units,this.dimensions=ve.dimensions}else if(si(se)&&se.value===null)this.fixPrefix=se.fixPrefix,this.skipAutomaticSimplification=se.skipAutomaticSimplification,this.dimensions=se.dimensions.slice(0),this.units=se.units.map(xe=>Br({},xe));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(Q)}Object.defineProperty(w,"name",{value:"Unit"}),w.prototype.constructor=w,w.prototype.type="Unit",w.prototype.isUnit=!0;var N,C,E;function $(){for(;E===" "||E==="	";)k()}function I(Q){return Q>="0"&&Q<="9"||Q==="."}function D(Q){return Q>="0"&&Q<="9"}function k(){C++,E=N.charAt(C)}function A(Q){C=Q,E=N.charAt(C)}function O(){var Q="",se=C;if(E==="+"?k():E==="-"&&(Q+=E,k()),!I(E))return A(se),null;if(E==="."){if(Q+=E,k(),!D(E))return A(se),null}else{for(;D(E);)Q+=E,k();E==="."&&(Q+=E,k())}for(;D(E);)Q+=E,k();if(E==="E"||E==="e"){var ve="",xe=C;if(ve+=E,k(),(E==="+"||E==="-")&&(ve+=E,k()),!D(E))return A(xe),Q;for(Q=Q+ve;D(E);)Q+=E,k()}return Q}function B(){for(var Q="";D(E)||w.isValidAlpha(E);)Q+=E,k();var se=Q.charAt(0);return w.isValidAlpha(se)?Q:null}function z(Q){return E===Q?(k(),Q):null}w.parse=function(Q,se){if(se=se||{},N=Q,C=-1,E="",typeof N!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var ve=new w;ve.units=[];var xe=1,Re=!1;k(),$();var Me=O(),He=null;if(Me){if(n.number==="BigNumber")He=new y(Me);else if(n.number==="Fraction")try{He=new b(Me)}catch{He=parseFloat(Me)}else He=parseFloat(Me);$(),z("*")?(xe=1,Re=!0):z("/")&&(xe=-1,Re=!0)}for(var Je=[],re=1;;){for($();E==="(";)Je.push(xe),re*=xe,xe=1,k(),$();var ce=void 0;if(E){var Ce=E;if(ce=B(),ce===null)throw new SyntaxError('Unexpected "'+Ce+'" in "'+N+'" at index '+C.toString())}else break;var Ae=L(ce);if(Ae===null)throw new SyntaxError('Unit "'+ce+'" not found.');var Le=xe*re;if($(),z("^")){$();var Pe=O();if(Pe===null)throw new SyntaxError('In "'+Q+'", "^" must be followed by a floating-point number');Le*=Pe}ve.units.push({unit:Ae.unit,prefix:Ae.prefix,power:Le});for(var Ze=0;Ze<q.length;Ze++)ve.dimensions[Ze]+=(Ae.unit.dimensions[Ze]||0)*Le;for($();E===")";){if(Je.length===0)throw new SyntaxError('Unmatched ")" in "'+N+'" at index '+C.toString());re/=Je.pop(),k(),$()}if(Re=!1,z("*")?(xe=1,Re=!0):z("/")?(xe=-1,Re=!0):xe=1,Ae.unit.base){var je=Ae.unit.base.key;te.auto[je]={unit:Ae.unit,prefix:Ae.prefix}}}if($(),E)throw new SyntaxError('Could not parse: "'+Q+'"');if(Re)throw new SyntaxError('Trailing characters: "'+Q+'"');if(Je.length!==0)throw new SyntaxError('Unmatched "(" in "'+N+'"');if(ve.units.length===0&&!se.allowNoUnits)throw new SyntaxError('"'+Q+'" contains no units');return ve.value=He!==void 0?ve._normalize(He):null,ve},w.prototype.clone=function(){var Q=new w;Q.fixPrefix=this.fixPrefix,Q.skipAutomaticSimplification=this.skipAutomaticSimplification,Q.value=Wt(this.value),Q.dimensions=this.dimensions.slice(0),Q.units=[];for(var se=0;se<this.units.length;se++){Q.units[se]={};for(var ve in this.units[se])pt(this.units[se],ve)&&(Q.units[se][ve]=this.units[se][ve])}return Q},w.prototype.valueType=function(){return Ln(this.value)},w.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},w.prototype._normalize=function(Q){if(Q==null||this.units.length===0)return Q;for(var se=Q,ve=w._getNumberConverter(Ln(Q)),xe=0;xe<this.units.length;xe++){var Re=ve(this.units[xe].unit.value),Me=ve(this.units[xe].prefix.value),He=ve(this.units[xe].power);se=s(se,o(s(Re,Me),He))}return se},w.prototype._denormalize=function(Q,se){if(Q==null||this.units.length===0)return Q;for(var ve=Q,xe=w._getNumberConverter(Ln(Q)),Re=0;Re<this.units.length;Re++){var Me=xe(this.units[Re].unit.value),He=xe(this.units[Re].prefix.value),Je=xe(this.units[Re].power);ve=i(ve,o(s(Me,He),Je))}return ve};var L=Pg(Q=>{if(pt(j,Q)){var se=j[Q],ve=se.prefixes[""];return{unit:se,prefix:ve}}for(var xe in j)if(pt(j,xe)&&Tke(Q,xe)){var Re=j[xe],Me=Q.length-xe.length,He=Q.substring(0,Me),Je=pt(Re.prefixes,He)?Re.prefixes[He]:void 0;if(Je!==void 0)return{unit:Re,prefix:Je}}return null},{hasher:Q=>Q[0],limit:100});w.isValuelessUnit=function(Q){return L(Q)!==null},w.prototype.hasBase=function(Q){if(typeof Q=="string"&&(Q=M[Q]),!Q)return!1;for(var se=0;se<q.length;se++)if(Math.abs((this.dimensions[se]||0)-(Q.dimensions[se]||0))>1e-12)return!1;return!0},w.prototype.equalBase=function(Q){for(var se=0;se<q.length;se++)if(Math.abs((this.dimensions[se]||0)-(Q.dimensions[se]||0))>1e-12)return!1;return!0},w.prototype.equals=function(Q){return this.equalBase(Q)&&f(this.value,Q.value)},w.prototype.multiply=function(Q){for(var se=this.clone(),ve=si(Q)?Q:new w(Q),xe=0;xe<q.length;xe++)se.dimensions[xe]=(this.dimensions[xe]||0)+(ve.dimensions[xe]||0);for(var Re=0;Re<ve.units.length;Re++){var Me=qS({},ve.units[Re]);se.units.push(Me)}if(this.value!==null||ve.value!==null){var He=this.value===null?this._normalize(1):this.value,Je=ve.value===null?ve._normalize(1):ve.value;se.value=s(He,Je)}else se.value=null;return si(Q)&&(se.skipAutomaticSimplification=!1),F(se)},w.prototype.divideInto=function(Q){return new w(Q).divide(this)},w.prototype.divide=function(Q){for(var se=this.clone(),ve=si(Q)?Q:new w(Q),xe=0;xe<q.length;xe++)se.dimensions[xe]=(this.dimensions[xe]||0)-(ve.dimensions[xe]||0);for(var Re=0;Re<ve.units.length;Re++){var Me=qS(qS({},ve.units[Re]),{},{power:-ve.units[Re].power});se.units.push(Me)}if(this.value!==null||ve.value!==null){var He=this.value===null?this._normalize(1):this.value,Je=ve.value===null?ve._normalize(1):ve.value;se.value=i(He,Je)}else se.value=null;return si(Q)&&(se.skipAutomaticSimplification=!1),F(se)},w.prototype.pow=function(Q){for(var se=this.clone(),ve=0;ve<q.length;ve++)se.dimensions[ve]=(this.dimensions[ve]||0)*Q;for(var xe=0;xe<se.units.length;xe++)se.units[xe].power*=Q;return se.value!==null?se.value=o(se.value,Q):se.value=null,se.skipAutomaticSimplification=!1,F(se)};function F(Q){return Q.equalBase(M.NONE)&&Q.value!==null&&!n.predictable?Q.value:Q}w.prototype.abs=function(){var Q=this.clone();if(Q.value!==null)if(Q._isDerived()||Q.units.length===0||Q.units[0].unit.offset===0)Q.value=u(Q.value);else{var se=Q._numberConverter(),ve=se(Q.units[0].unit.value),xe=se(Q.units[0].unit.offset),Re=s(ve,xe);Q.value=a(u(r(Q.value,Re)),Re)}for(var Me in Q.units)(Q.units[Me].unit.name==="VA"||Q.units[Me].unit.name==="VAR")&&(Q.units[Me].unit=j.W);return Q},w.prototype.to=function(Q){var se=this.value===null?this._normalize(1):this.value,ve;if(typeof Q=="string")ve=w.parse(Q);else if(si(Q))ve=Q.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(ve))throw new Error("Units do not match ('".concat(ve.toString(),"' != '").concat(this.toString(),"')"));if(ve.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||ve.units.length===0||this.units[0].unit.offset===ve.units[0].unit.offset)ve.value=Wt(se);else{var xe=w._getNumberConverter(Ln(se)),Re=this.units[0].unit.value,Me=this.units[0].unit.offset,He=s(Re,Me),Je=ve.units[0].unit.value,re=ve.units[0].unit.offset,ce=s(Je,re);ve.value=r(se,xe(a(He,ce)))}return ve.fixPrefix=!0,ve.skipAutomaticSimplification=!0,ve},w.prototype.toNumber=function(Q){return x(this.toNumeric(Q))},w.prototype.toNumeric=function(Q){var se;return Q?se=this.to(Q):se=this.clone(),se._isDerived()||se.units.length===0?se._denormalize(se.value):se._denormalize(se.value,se.units[0].prefix.value)},w.prototype.toString=function(){return this.format()},w.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},w.fromJSON=function(Q){var se,ve=new w(Q.value,(se=Q.unit)!==null&&se!==void 0?se:void 0);return ve.fixPrefix=Q.fixPrefix||!1,ve},w.prototype.valueOf=w.prototype.toString,w.prototype.simplify=function(){var Q=this.clone(),se=[],ve;for(var xe in ie)if(pt(ie,xe)&&Q.hasBase(M[xe])){ve=xe;break}if(ve==="NONE")Q.units=[];else{var Re;if(ve&&pt(ie,ve)&&(Re=ie[ve]),Re)Q.units=[{unit:Re.unit,prefix:Re.prefix,power:1}];else{for(var Me=!1,He=0;He<q.length;He++){var Je=q[He];Math.abs(Q.dimensions[He]||0)>1e-12&&(pt(ie,Je)?se.push({unit:ie[Je].unit,prefix:ie[Je].prefix,power:Q.dimensions[He]||0}):Me=!0)}se.length<Q.units.length&&!Me&&(Q.units=se)}}return Q},w.prototype.toSI=function(){for(var Q=this.clone(),se=[],ve=0;ve<q.length;ve++){var xe=q[ve];if(Math.abs(Q.dimensions[ve]||0)>1e-12)if(pt(te.si,xe))se.push({unit:te.si[xe].unit,prefix:te.si[xe].prefix,power:Q.dimensions[ve]||0});else throw new Error("Cannot express custom unit "+xe+" in SI units")}return Q.units=se,Q.fixPrefix=!0,Q.skipAutomaticSimplification=!0,this.value!==null?(Q.value=null,this.to(Q)):Q},w.prototype.formatUnits=function(){for(var Q="",se="",ve=0,xe=0,Re=0;Re<this.units.length;Re++)this.units[Re].power>0?(ve++,Q+=" "+this.units[Re].prefix.name+this.units[Re].unit.name,Math.abs(this.units[Re].power-1)>1e-15&&(Q+="^"+this.units[Re].power)):this.units[Re].power<0&&xe++;if(xe>0)for(var Me=0;Me<this.units.length;Me++)this.units[Me].power<0&&(ve>0?(se+=" "+this.units[Me].prefix.name+this.units[Me].unit.name,Math.abs(this.units[Me].power+1)>1e-15&&(se+="^"+-this.units[Me].power)):(se+=" "+this.units[Me].prefix.name+this.units[Me].unit.name,se+="^"+this.units[Me].power));Q=Q.substr(1),se=se.substr(1),ve>1&&xe>0&&(Q="("+Q+")"),xe>1&&ve>0&&(se="("+se+")");var He=Q;return ve>0&&xe>0&&(He+=" / "),He+=se,He},w.prototype.format=function(Q){var se=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),ve=!1;typeof se.value<"u"&&se.value!==null&&eu(se.value)&&(ve=Math.abs(se.value.re)<1e-14);for(var xe in se.units)pt(se.units,xe)&&se.units[xe].unit&&(se.units[xe].unit.name==="VA"&&ve?se.units[xe].unit=j.VAR:se.units[xe].unit.name==="VAR"&&!ve&&(se.units[xe].unit=j.VA));se.units.length===1&&!se.fixPrefix&&Math.abs(se.units[0].power-Math.round(se.units[0].power))<1e-14&&(se.units[0].prefix=se._bestPrefix());var Re=se._denormalize(se.value),Me=se.value!==null?h(Re,Q||{}):"",He=se.formatUnits();return se.value&&eu(se.value)&&(Me="("+Me+")"),He.length>0&&Me.length>0&&(Me+=" "),Me+=He,Me},w.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var Q=this.value!==null?u(this.value):0,se=u(this.units[0].unit.value),ve=this.units[0].prefix;if(Q===0)return ve;var xe=this.units[0].power,Re=Math.log(Q/Math.pow(ve.value*se,xe))/Math.LN10-1.2;if(Re>-2.200001&&Re<1.800001)return ve;Re=Math.abs(Re);var Me=this.units[0].unit.prefixes;for(var He in Me)if(pt(Me,He)){var Je=Me[He];if(Je.scientific){var re=Math.abs(Math.log(Q/Math.pow(Je.value*se,xe))/Math.LN10-1.2);(re<Re||re===Re&&Je.name.length<ve.name.length)&&(ve=Je,Re=re)}}return ve},w.prototype.splitUnit=function(Q){for(var se=this.clone(),ve=[],xe=0;xe<Q.length&&(se=se.to(Q[xe]),xe!==Q.length-1);xe++){var Re=se.toNumeric(),Me=c(Re),He=void 0,Je=f(Me,Re);Je?He=Me:He=l(se.toNumeric());var re=new w(He,Q[xe].toString());ve.push(re),se=a(se,re)}for(var ce=0,Ce=0;Ce<ve.length;Ce++)ce=r(ce,ve[Ce].value);return f(ce,this.value)&&(se.value=0),ve.push(se),ve};var R={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};R.SHORTLONG=Br({},R.SHORT,R.LONG),R.BINARY_SHORT=Br({},R.BINARY_SHORT_SI,R.BINARY_SHORT_IEC),R.BINARY_LONG=Br({},R.BINARY_LONG_SI,R.BINARY_LONG_IEC);var q=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],M={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var G in M)pt(M,G)&&(M[G].key=G);var V={},H={name:"",base:V,value:1,offset:0,dimensions:q.map(Q=>0)},j={meter:{name:"meter",base:M.LENGTH,prefixes:R.LONG,value:1,offset:0},inch:{name:"inch",base:M.LENGTH,prefixes:R.NONE,value:.0254,offset:0},foot:{name:"foot",base:M.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yard:{name:"yard",base:M.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mile:{name:"mile",base:M.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},link:{name:"link",base:M.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rod:{name:"rod",base:M.LENGTH,prefixes:R.NONE,value:5.0292,offset:0},chain:{name:"chain",base:M.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:M.LENGTH,prefixes:R.NONE,value:1e-10,offset:0},m:{name:"m",base:M.LENGTH,prefixes:R.SHORT,value:1,offset:0},in:{name:"in",base:M.LENGTH,prefixes:R.NONE,value:.0254,offset:0},ft:{name:"ft",base:M.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yd:{name:"yd",base:M.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mi:{name:"mi",base:M.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},li:{name:"li",base:M.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rd:{name:"rd",base:M.LENGTH,prefixes:R.NONE,value:5.02921,offset:0},ch:{name:"ch",base:M.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},mil:{name:"mil",base:M.LENGTH,prefixes:R.NONE,value:254e-7,offset:0},m2:{name:"m2",base:M.SURFACE,prefixes:R.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:M.SURFACE,prefixes:R.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:M.SURFACE,prefixes:R.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:M.SURFACE,prefixes:R.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:M.SURFACE,prefixes:R.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:M.SURFACE,prefixes:R.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:M.SURFACE,prefixes:R.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:M.SURFACE,prefixes:R.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:M.SURFACE,prefixes:R.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:M.SURFACE,prefixes:R.NONE,value:1e4,offset:0},m3:{name:"m3",base:M.VOLUME,prefixes:R.CUBIC,value:1,offset:0},L:{name:"L",base:M.VOLUME,prefixes:R.SHORT,value:.001,offset:0},l:{name:"l",base:M.VOLUME,prefixes:R.SHORT,value:.001,offset:0},litre:{name:"litre",base:M.VOLUME,prefixes:R.LONG,value:.001,offset:0},cuin:{name:"cuin",base:M.VOLUME,prefixes:R.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:M.VOLUME,prefixes:R.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:M.VOLUME,prefixes:R.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:M.VOLUME,prefixes:R.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:M.VOLUME,prefixes:R.NONE,value:15e-6,offset:0},drop:{name:"drop",base:M.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:M.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},minim:{name:"minim",base:M.VOLUME,prefixes:R.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:M.VOLUME,prefixes:R.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:M.VOLUME,prefixes:R.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:M.VOLUME,prefixes:R.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:M.VOLUME,prefixes:R.NONE,value:1e-6,offset:0},cup:{name:"cup",base:M.VOLUME,prefixes:R.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:M.VOLUME,prefixes:R.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:M.VOLUME,prefixes:R.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:M.VOLUME,prefixes:R.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:M.VOLUME,prefixes:R.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:M.VOLUME,prefixes:R.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:M.VOLUME,prefixes:R.NONE,value:.238480942392,offset:0},g:{name:"g",base:M.MASS,prefixes:R.SHORT,value:.001,offset:0},gram:{name:"gram",base:M.MASS,prefixes:R.LONG,value:.001,offset:0},ton:{name:"ton",base:M.MASS,prefixes:R.SHORT,value:907.18474,offset:0},t:{name:"t",base:M.MASS,prefixes:R.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:M.MASS,prefixes:R.LONG,value:1e3,offset:0},grain:{name:"grain",base:M.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:M.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:M.MASS,prefixes:R.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:M.MASS,prefixes:R.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:M.MASS,prefixes:R.NONE,value:45.359237,offset:0},stick:{name:"stick",base:M.MASS,prefixes:R.NONE,value:.115,offset:0},stone:{name:"stone",base:M.MASS,prefixes:R.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:M.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:M.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:M.MASS,prefixes:R.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:M.MASS,prefixes:R.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:M.MASS,prefixes:R.NONE,value:45.359237,offset:0},s:{name:"s",base:M.TIME,prefixes:R.SHORT,value:1,offset:0},min:{name:"min",base:M.TIME,prefixes:R.NONE,value:60,offset:0},h:{name:"h",base:M.TIME,prefixes:R.NONE,value:3600,offset:0},second:{name:"second",base:M.TIME,prefixes:R.LONG,value:1,offset:0},sec:{name:"sec",base:M.TIME,prefixes:R.LONG,value:1,offset:0},minute:{name:"minute",base:M.TIME,prefixes:R.NONE,value:60,offset:0},hour:{name:"hour",base:M.TIME,prefixes:R.NONE,value:3600,offset:0},day:{name:"day",base:M.TIME,prefixes:R.NONE,value:86400,offset:0},week:{name:"week",base:M.TIME,prefixes:R.NONE,value:7*86400,offset:0},month:{name:"month",base:M.TIME,prefixes:R.NONE,value:2629800,offset:0},year:{name:"year",base:M.TIME,prefixes:R.NONE,value:31557600,offset:0},decade:{name:"decade",base:M.TIME,prefixes:R.NONE,value:315576e3,offset:0},century:{name:"century",base:M.TIME,prefixes:R.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:M.TIME,prefixes:R.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:M.FREQUENCY,prefixes:R.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:M.FREQUENCY,prefixes:R.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:M.ANGLE,prefixes:R.SHORT,value:1,offset:0},radian:{name:"radian",base:M.ANGLE,prefixes:R.LONG,value:1,offset:0},deg:{name:"deg",base:M.ANGLE,prefixes:R.SHORT,value:null,offset:0},degree:{name:"degree",base:M.ANGLE,prefixes:R.LONG,value:null,offset:0},grad:{name:"grad",base:M.ANGLE,prefixes:R.SHORT,value:null,offset:0},gradian:{name:"gradian",base:M.ANGLE,prefixes:R.LONG,value:null,offset:0},cycle:{name:"cycle",base:M.ANGLE,prefixes:R.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:M.ANGLE,prefixes:R.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:M.ANGLE,prefixes:R.NONE,value:null,offset:0},A:{name:"A",base:M.CURRENT,prefixes:R.SHORT,value:1,offset:0},ampere:{name:"ampere",base:M.CURRENT,prefixes:R.LONG,value:1,offset:0},K:{name:"K",base:M.TEMPERATURE,prefixes:R.SHORT,value:1,offset:0},degC:{name:"degC",base:M.TEMPERATURE,prefixes:R.SHORT,value:1,offset:273.15},degF:{name:"degF",base:M.TEMPERATURE,prefixes:R.SHORT,value:new b(5,9),offset:459.67},degR:{name:"degR",base:M.TEMPERATURE,prefixes:R.SHORT,value:new b(5,9),offset:0},kelvin:{name:"kelvin",base:M.TEMPERATURE,prefixes:R.LONG,value:1,offset:0},celsius:{name:"celsius",base:M.TEMPERATURE,prefixes:R.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:M.TEMPERATURE,prefixes:R.LONG,value:new b(5,9),offset:459.67},rankine:{name:"rankine",base:M.TEMPERATURE,prefixes:R.LONG,value:new b(5,9),offset:0},mol:{name:"mol",base:M.AMOUNT_OF_SUBSTANCE,prefixes:R.SHORT,value:1,offset:0},mole:{name:"mole",base:M.AMOUNT_OF_SUBSTANCE,prefixes:R.LONG,value:1,offset:0},cd:{name:"cd",base:M.LUMINOUS_INTENSITY,prefixes:R.SHORT,value:1,offset:0},candela:{name:"candela",base:M.LUMINOUS_INTENSITY,prefixes:R.LONG,value:1,offset:0},N:{name:"N",base:M.FORCE,prefixes:R.SHORT,value:1,offset:0},newton:{name:"newton",base:M.FORCE,prefixes:R.LONG,value:1,offset:0},dyn:{name:"dyn",base:M.FORCE,prefixes:R.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:M.FORCE,prefixes:R.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:M.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:M.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:M.FORCE,prefixes:R.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:M.FORCE,prefixes:R.NONE,value:9.80665,offset:0},J:{name:"J",base:M.ENERGY,prefixes:R.SHORT,value:1,offset:0},joule:{name:"joule",base:M.ENERGY,prefixes:R.LONG,value:1,offset:0},erg:{name:"erg",base:M.ENERGY,prefixes:R.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:M.ENERGY,prefixes:R.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:M.ENERGY,prefixes:R.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:M.ENERGY,prefixes:R.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:M.ENERGY,prefixes:R.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:M.POWER,prefixes:R.SHORT,value:1,offset:0},watt:{name:"watt",base:M.POWER,prefixes:R.LONG,value:1,offset:0},hp:{name:"hp",base:M.POWER,prefixes:R.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:M.POWER,prefixes:R.SHORT,value:v.I,offset:0},VA:{name:"VA",base:M.POWER,prefixes:R.SHORT,value:1,offset:0},Pa:{name:"Pa",base:M.PRESSURE,prefixes:R.SHORT,value:1,offset:0},psi:{name:"psi",base:M.PRESSURE,prefixes:R.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:M.PRESSURE,prefixes:R.NONE,value:101325,offset:0},bar:{name:"bar",base:M.PRESSURE,prefixes:R.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:M.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:M.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:M.PRESSURE,prefixes:R.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:M.PRESSURE,prefixes:R.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:M.ELECTRIC_CHARGE,prefixes:R.LONG,value:1,offset:0},C:{name:"C",base:M.ELECTRIC_CHARGE,prefixes:R.SHORT,value:1,offset:0},farad:{name:"farad",base:M.ELECTRIC_CAPACITANCE,prefixes:R.LONG,value:1,offset:0},F:{name:"F",base:M.ELECTRIC_CAPACITANCE,prefixes:R.SHORT,value:1,offset:0},volt:{name:"volt",base:M.ELECTRIC_POTENTIAL,prefixes:R.LONG,value:1,offset:0},V:{name:"V",base:M.ELECTRIC_POTENTIAL,prefixes:R.SHORT,value:1,offset:0},ohm:{name:"ohm",base:M.ELECTRIC_RESISTANCE,prefixes:R.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:M.ELECTRIC_INDUCTANCE,prefixes:R.LONG,value:1,offset:0},H:{name:"H",base:M.ELECTRIC_INDUCTANCE,prefixes:R.SHORT,value:1,offset:0},siemens:{name:"siemens",base:M.ELECTRIC_CONDUCTANCE,prefixes:R.LONG,value:1,offset:0},S:{name:"S",base:M.ELECTRIC_CONDUCTANCE,prefixes:R.SHORT,value:1,offset:0},weber:{name:"weber",base:M.MAGNETIC_FLUX,prefixes:R.LONG,value:1,offset:0},Wb:{name:"Wb",base:M.MAGNETIC_FLUX,prefixes:R.SHORT,value:1,offset:0},tesla:{name:"tesla",base:M.MAGNETIC_FLUX_DENSITY,prefixes:R.LONG,value:1,offset:0},T:{name:"T",base:M.MAGNETIC_FLUX_DENSITY,prefixes:R.SHORT,value:1,offset:0},b:{name:"b",base:M.BIT,prefixes:R.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:M.BIT,prefixes:R.BINARY_LONG,value:1,offset:0},B:{name:"B",base:M.BIT,prefixes:R.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:M.BIT,prefixes:R.BINARY_LONG,value:8,offset:0}},ne={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function ue(Q){if(Q.number==="BigNumber"){var se=QA(y);j.rad.value=new y(1),j.deg.value=se.div(180),j.grad.value=se.div(200),j.cycle.value=se.times(2),j.arcsec.value=se.div(648e3),j.arcmin.value=se.div(10800)}else j.rad.value=1,j.deg.value=Math.PI/180,j.grad.value=Math.PI/200,j.cycle.value=Math.PI*2,j.arcsec.value=Math.PI/648e3,j.arcmin.value=Math.PI/10800;j.radian.value=j.rad.value,j.degree.value=j.deg.value,j.gradian.value=j.grad.value}ue(n),e&&e("config",function(Q,se){Q.number!==se.number&&ue(Q)});var te={si:{NONE:{unit:H,prefix:R.NONE[""]},LENGTH:{unit:j.m,prefix:R.SHORT[""]},MASS:{unit:j.g,prefix:R.SHORT.k},TIME:{unit:j.s,prefix:R.SHORT[""]},CURRENT:{unit:j.A,prefix:R.SHORT[""]},TEMPERATURE:{unit:j.K,prefix:R.SHORT[""]},LUMINOUS_INTENSITY:{unit:j.cd,prefix:R.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:j.mol,prefix:R.SHORT[""]},ANGLE:{unit:j.rad,prefix:R.SHORT[""]},BIT:{unit:j.bits,prefix:R.SHORT[""]},FORCE:{unit:j.N,prefix:R.SHORT[""]},ENERGY:{unit:j.J,prefix:R.SHORT[""]},POWER:{unit:j.W,prefix:R.SHORT[""]},PRESSURE:{unit:j.Pa,prefix:R.SHORT[""]},ELECTRIC_CHARGE:{unit:j.C,prefix:R.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:j.F,prefix:R.SHORT[""]},ELECTRIC_POTENTIAL:{unit:j.V,prefix:R.SHORT[""]},ELECTRIC_RESISTANCE:{unit:j.ohm,prefix:R.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:j.H,prefix:R.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:j.S,prefix:R.SHORT[""]},MAGNETIC_FLUX:{unit:j.Wb,prefix:R.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:j.T,prefix:R.SHORT[""]},FREQUENCY:{unit:j.Hz,prefix:R.SHORT[""]}}};te.cgs=JSON.parse(JSON.stringify(te.si)),te.cgs.LENGTH={unit:j.m,prefix:R.SHORT.c},te.cgs.MASS={unit:j.g,prefix:R.SHORT[""]},te.cgs.FORCE={unit:j.dyn,prefix:R.SHORT[""]},te.cgs.ENERGY={unit:j.erg,prefix:R.NONE[""]},te.us=JSON.parse(JSON.stringify(te.si)),te.us.LENGTH={unit:j.ft,prefix:R.NONE[""]},te.us.MASS={unit:j.lbm,prefix:R.NONE[""]},te.us.TEMPERATURE={unit:j.degF,prefix:R.NONE[""]},te.us.FORCE={unit:j.lbf,prefix:R.NONE[""]},te.us.ENERGY={unit:j.BTU,prefix:R.BTU[""]},te.us.POWER={unit:j.hp,prefix:R.NONE[""]},te.us.PRESSURE={unit:j.psi,prefix:R.NONE[""]},te.auto=JSON.parse(JSON.stringify(te.si));var ie=te.auto;w.setUnitSystem=function(Q){if(pt(te,Q))ie=te[Q];else throw new Error("Unit system "+Q+" does not exist. Choices are: "+Object.keys(te).join(", "))},w.getUnitSystem=function(){for(var Q in te)if(pt(te,Q)&&te[Q]===ie)return Q},w.typeConverters={BigNumber:function(se){return se!=null&&se.isFraction?new y(String(se.n)).div(String(se.d)).times(String(se.s)):new y(se+"")},Fraction:function(se){return new b(se)},Complex:function(se){return se},number:function(se){return se!=null&&se.isFraction?m(se):se}},w.prototype._numberConverter=function(){var Q=w.typeConverters[this.valueType()];if(Q)return Q;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},w._getNumberConverter=function(Q){if(!w.typeConverters[Q])throw new TypeError('Unsupported type "'+Q+'"');return w.typeConverters[Q]};for(var Z in j)if(pt(j,Z)){var X=j[Z];X.dimensions=X.base.dimensions}for(var ae in ne)if(pt(ne,ae)){var pe=j[ne[ae]],he={};for(var Ne in pe)pt(pe,Ne)&&(he[Ne]=pe[Ne]);he.name=ae,j[ae]=he}w.isValidAlpha=function(se){return/^[a-zA-Z]$/.test(se)};function Ee(Q){for(var se=0;se<Q.length;se++){if(E=Q.charAt(se),se===0&&!w.isValidAlpha(E))throw new Error('Invalid unit name (must begin with alpha character): "'+Q+'"');if(se>0&&!(w.isValidAlpha(E)||D(E)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+Q+'"')}}return w.createUnit=function(Q,se){if(typeof Q!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(se&&se.override){for(var ve in Q)if(pt(Q,ve)&&w.deleteUnit(ve),Q[ve].aliases)for(var xe=0;xe<Q[ve].aliases.length;xe++)w.deleteUnit(Q[ve].aliases[xe])}var Re;for(var Me in Q)pt(Q,Me)&&(Re=w.createUnitSingle(Me,Q[Me]));return Re},w.createUnitSingle=function(Q,se){if((typeof se>"u"||se===null)&&(se={}),typeof Q!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(pt(j,Q))throw new Error('Cannot create unit "'+Q+'": a unit with that name already exists');Ee(Q);var ve=null,xe=[],Re=0,Me,He,Je;if(se&&se.type==="Unit")ve=se.clone();else if(typeof se=="string")se!==""&&(Me=se);else if(typeof se=="object")Me=se.definition,He=se.prefixes,Re=se.offset,Je=se.baseName,se.aliases&&(xe=se.aliases.valueOf());else throw new TypeError('Cannot create unit "'+Q+'" from "'+se.toString()+'": expecting "string" or "Unit" or "Object"');if(xe){for(var re=0;re<xe.length;re++)if(pt(j,xe[re]))throw new Error('Cannot create alias "'+xe[re]+'": a unit with that name already exists')}if(Me&&typeof Me=="string"&&!ve)try{ve=w.parse(Me,{allowNoUnits:!0})}catch(fe){throw fe.message='Could not create unit "'+Q+'" from "'+Me+'": '+fe.message,fe}else Me&&Me.type==="Unit"&&(ve=Me.clone());xe=xe||[],Re=Re||0,He&&He.toUpperCase?He=R[He.toUpperCase()]||R.NONE:He=R.NONE;var ce={};if(ve){ce={name:Q,value:ve.value,dimensions:ve.dimensions.slice(0),prefixes:He,offset:Re};var Pe=!1;for(var Ze in M)if(pt(M,Ze)){for(var je=!0,tt=0;tt<q.length;tt++)if(Math.abs((ce.dimensions[tt]||0)-(M[Ze].dimensions[tt]||0))>1e-12){je=!1;break}if(je){Pe=!0,ce.base=M[Ze];break}}if(!Pe){Je=Je||Q+"_STUFF";var Qe={dimensions:ve.dimensions.slice(0)};Qe.key=Je,M[Je]=Qe,ie[Je]={unit:ce,prefix:R.NONE[""]},ce.base=M[Je]}}else{if(Je=Je||Q+"_STUFF",q.indexOf(Je)>=0)throw new Error('Cannot create new base unit "'+Q+'": a base unit with that name already exists (and cannot be overridden)');q.push(Je);for(var Ce in M)pt(M,Ce)&&(M[Ce].dimensions[q.length-1]=0);for(var Ae={dimensions:[]},Le=0;Le<q.length;Le++)Ae.dimensions[Le]=0;Ae.dimensions[q.length-1]=1,Ae.key=Je,M[Je]=Ae,ce={name:Q,value:1,dimensions:M[Je].dimensions.slice(0),prefixes:He,offset:Re,base:M[Je]},ie[Je]={unit:ce,prefix:R.NONE[""]}}w.UNITS[Q]=ce;for(var Xt=0;Xt<xe.length;Xt++){var Nt=xe[Xt],Cn={};for(var U in ce)pt(ce,U)&&(Cn[U]=ce[U]);Cn.name=Nt,w.UNITS[Nt]=Cn}return delete L.cache,new w(null,Q)},w.deleteUnit=function(Q){delete w.UNITS[Q],delete L.cache},w.PREFIXES=R,w.BASE_DIMENSIONS=q,w.BASE_UNITS=M,w.UNIT_SYSTEMS=te,w.UNITS=j,w},{isClass:!0}),IM="unit",gMe=["typed","Unit"],vMe=ee(IM,gMe,t=>{var{typed:e,Unit:n}=t;return e(IM,{Unit:function(a){return a.clone()},string:function(a){return n.isValuelessUnit(a)?new n(null,a):n.parse(a,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(a,s){return new n(a,s)},"number | BigNumber | Fraction":function(a){return new n(a)},"Array | Matrix":e.referToSelf(r=>a=>qt(a,r))})}),_M="sparse",yMe=["typed","SparseMatrix"],bMe=ee(_M,yMe,t=>{var{typed:e,SparseMatrix:n}=t;return e(_M,{"":function(){return new n([])},string:function(a){return new n([],a)},"Array | Matrix":function(a){return new n(a)},"Array | Matrix, string":function(a,s){return new n(a,s)}})}),OM="createUnit",wMe=["typed","Unit"],xMe=ee(OM,wMe,t=>{var{typed:e,Unit:n}=t;return e(OM,{"Object, Object":function(a,s){return n.createUnit(a,s)},Object:function(a){return n.createUnit(a,{})},"string, Unit | string | Object, Object":function(a,s,i){var o={};return o[a]=s,n.createUnit(o,i)},"string, Unit | string | Object":function(a,s){var i={};return i[a]=s,n.createUnit(i,{})},string:function(a){var s={};return s[a]={},n.createUnit(s,{})}})}),FM="acos",SMe=["typed","config","Complex"],NMe=ee(FM,SMe,t=>{var{typed:e,config:n,Complex:r}=t;return e(FM,{number:function(s){return s>=-1&&s<=1||n.predictable?Math.acos(s):new r(s,0).acos()},Complex:function(s){return s.acos()},BigNumber:function(s){return s.acos()}})}),RM="acosh",CMe=["typed","config","Complex"],EMe=ee(RM,CMe,t=>{var{typed:e,config:n,Complex:r}=t;return e(RM,{number:function(s){return s>=1||n.predictable?eV(s):s<=-1?new r(Math.log(Math.sqrt(s*s-1)-s),Math.PI):new r(s,0).acosh()},Complex:function(s){return s.acosh()},BigNumber:function(s){return s.acosh()}})}),MM="acot",TMe=["typed","BigNumber"],DMe=ee(MM,TMe,t=>{var{typed:e,BigNumber:n}=t;return e(MM,{number:tV,Complex:function(a){return a.acot()},BigNumber:function(a){return new n(1).div(a).atan()}})}),PM="acoth",AMe=["typed","config","Complex","BigNumber"],$Me=ee(PM,AMe,t=>{var{typed:e,config:n,Complex:r,BigNumber:a}=t;return e(PM,{number:function(i){return i>=1||i<=-1||n.predictable?nV(i):new r(i,0).acoth()},Complex:function(i){return i.acoth()},BigNumber:function(i){return new a(1).div(i).atanh()}})}),BM="acsc",kMe=["typed","config","Complex","BigNumber"],IMe=ee(BM,kMe,t=>{var{typed:e,config:n,Complex:r,BigNumber:a}=t;return e(BM,{number:function(i){return i<=-1||i>=1||n.predictable?rV(i):new r(i,0).acsc()},Complex:function(i){return i.acsc()},BigNumber:function(i){return new a(1).div(i).asin()}})}),LM="acsch",_Me=["typed","BigNumber"],OMe=ee(LM,_Me,t=>{var{typed:e,BigNumber:n}=t;return e(LM,{number:aV,Complex:function(a){return a.acsch()},BigNumber:function(a){return new n(1).div(a).asinh()}})}),zM="asec",FMe=["typed","config","Complex","BigNumber"],RMe=ee(zM,FMe,t=>{var{typed:e,config:n,Complex:r,BigNumber:a}=t;return e(zM,{number:function(i){return i<=-1||i>=1||n.predictable?sV(i):new r(i,0).asec()},Complex:function(i){return i.asec()},BigNumber:function(i){return new a(1).div(i).acos()}})}),WM="asech",MMe=["typed","config","Complex","BigNumber"],PMe=ee(WM,MMe,t=>{var{typed:e,config:n,Complex:r,BigNumber:a}=t;return e(WM,{number:function(i){if(i<=1&&i>=-1||n.predictable){var o=1/i;if(o>0||n.predictable)return iV(i);var u=Math.sqrt(o*o-1);return new r(Math.log(u-o),Math.PI)}return new r(i,0).asech()},Complex:function(i){return i.asech()},BigNumber:function(i){return new a(1).div(i).acosh()}})}),UM="asin",BMe=["typed","config","Complex"],LMe=ee(UM,BMe,t=>{var{typed:e,config:n,Complex:r}=t;return e(UM,{number:function(s){return s>=-1&&s<=1||n.predictable?Math.asin(s):new r(s,0).asin()},Complex:function(s){return s.asin()},BigNumber:function(s){return s.asin()}})}),zMe="asinh",WMe=["typed"],UMe=ee(zMe,WMe,t=>{var{typed:e}=t;return e("asinh",{number:oV,Complex:function(r){return r.asinh()},BigNumber:function(r){return r.asinh()}})}),qMe="atan",VMe=["typed"],jMe=ee(qMe,VMe,t=>{var{typed:e}=t;return e("atan",{number:function(r){return Math.atan(r)},Complex:function(r){return r.atan()},BigNumber:function(r){return r.atan()}})}),qM="atan2",HMe=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],GMe=ee(qM,HMe,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:a,DenseMatrix:s,concat:i}=t,o=Ji({typed:e,equalScalar:r}),u=Ja({typed:e}),l=xV({typed:e,equalScalar:r}),c=ba({typed:e,equalScalar:r}),f=Vr({typed:e,DenseMatrix:s}),d=zn({typed:e,matrix:n,concat:i});return e(qM,{"number, number":Math.atan2,"BigNumber, BigNumber":(h,m)=>a.atan2(h,m)},d({scalar:"number | BigNumber",SS:l,DS:u,SD:o,Ss:c,sS:f}))}),VM="atanh",KMe=["typed","config","Complex"],XMe=ee(VM,KMe,t=>{var{typed:e,config:n,Complex:r}=t;return e(VM,{number:function(s){return s<=1&&s>=-1||n.predictable?uV(s):new r(s,0).atanh()},Complex:function(s){return s.atanh()},BigNumber:function(s){return s.atanh()}})}),gp=ee("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(n=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(n,r.valueType())(r.value)})}}),jM="cos",YMe=["typed"],QMe=ee(jM,YMe,t=>{var{typed:e}=t,n=gp({typed:e});return e(jM,{number:Math.cos,"Complex | BigNumber":r=>r.cos()},n)}),HM="cosh",JMe=["typed"],ZMe=ee(HM,JMe,t=>{var{typed:e}=t;return e(HM,{number:ZAe,"Complex | BigNumber":n=>n.cosh()})}),GM="cot",ePe=["typed","BigNumber"],tPe=ee(GM,ePe,t=>{var{typed:e,BigNumber:n}=t,r=gp({typed:e});return e(GM,{number:lV,Complex:a=>a.cot(),BigNumber:a=>new n(1).div(a.tan())},r)}),KM="coth",nPe=["typed","BigNumber"],rPe=ee(KM,nPe,t=>{var{typed:e,BigNumber:n}=t;return e(KM,{number:cV,Complex:r=>r.coth(),BigNumber:r=>new n(1).div(r.tanh())})}),XM="csc",aPe=["typed","BigNumber"],sPe=ee(XM,aPe,t=>{var{typed:e,BigNumber:n}=t,r=gp({typed:e});return e(XM,{number:fV,Complex:a=>a.csc(),BigNumber:a=>new n(1).div(a.sin())},r)}),YM="csch",iPe=["typed","BigNumber"],oPe=ee(YM,iPe,t=>{var{typed:e,BigNumber:n}=t;return e(YM,{number:dV,Complex:r=>r.csch(),BigNumber:r=>new n(1).div(r.sinh())})}),QM="sec",uPe=["typed","BigNumber"],lPe=ee(QM,uPe,t=>{var{typed:e,BigNumber:n}=t,r=gp({typed:e});return e(QM,{number:pV,Complex:a=>a.sec(),BigNumber:a=>new n(1).div(a.cos())},r)}),JM="sech",cPe=["typed","BigNumber"],fPe=ee(JM,cPe,t=>{var{typed:e,BigNumber:n}=t;return e(JM,{number:hV,Complex:r=>r.sech(),BigNumber:r=>new n(1).div(r.cosh())})}),ZM="sin",dPe=["typed"],pPe=ee(ZM,dPe,t=>{var{typed:e}=t,n=gp({typed:e});return e(ZM,{number:Math.sin,"Complex | BigNumber":r=>r.sin()},n)}),eP="sinh",hPe=["typed"],mPe=ee(eP,hPe,t=>{var{typed:e}=t;return e(eP,{number:mV,"Complex | BigNumber":n=>n.sinh()})}),tP="tan",gPe=["typed"],vPe=ee(tP,gPe,t=>{var{typed:e}=t,n=gp({typed:e});return e(tP,{number:Math.tan,"Complex | BigNumber":r=>r.tan()},n)}),yPe="tanh",bPe=["typed"],wPe=ee(yPe,bPe,t=>{var{typed:e}=t;return e("tanh",{number:t$e,"Complex | BigNumber":n=>n.tanh()})}),nP="setCartesian",xPe=["typed","size","subset","compareNatural","Index","DenseMatrix"],SPe=ee(nP,xPe,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:s,DenseMatrix:i}=t;return e(nP,{"Array | Matrix, Array | Matrix":function(u,l){var c=[];if(r(n(u),new s(0))!==0&&r(n(l),new s(0))!==0){var f=yn(Array.isArray(u)?u:u.toArray()).sort(a),d=yn(Array.isArray(l)?l:l.toArray()).sort(a);c=[];for(var h=0;h<f.length;h++)for(var m=0;m<d.length;m++)c.push([f[h],d[m]])}return Array.isArray(u)&&Array.isArray(l)?c:new i(c)}})}),rP="setDifference",NPe=["typed","size","subset","compareNatural","Index","DenseMatrix"],CPe=ee(rP,NPe,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:s,DenseMatrix:i}=t;return e(rP,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(r(n(u),new s(0))===0)c=[];else{if(r(n(l),new s(0))===0)return yn(u.toArray());var f=Bd(yn(Array.isArray(u)?u:u.toArray()).sort(a)),d=Bd(yn(Array.isArray(l)?l:l.toArray()).sort(a));c=[];for(var h,m=0;m<f.length;m++){h=!1;for(var v=0;v<d.length;v++)if(a(f[m].value,d[v].value)===0&&f[m].identifier===d[v].identifier){h=!0;break}h||c.push(f[m])}}return Array.isArray(u)&&Array.isArray(l)?pb(c):new i(pb(c))}})}),aP="setDistinct",EPe=["typed","size","subset","compareNatural","Index","DenseMatrix"],TPe=ee(aP,EPe,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:s,DenseMatrix:i}=t;return e(aP,{"Array | Matrix":function(u){var l;if(r(n(u),new s(0))===0)l=[];else{var c=yn(Array.isArray(u)?u:u.toArray()).sort(a);l=[],l.push(c[0]);for(var f=1;f<c.length;f++)a(c[f],c[f-1])!==0&&l.push(c[f])}return Array.isArray(u)?l:new i(l)}})}),sP="setIntersect",DPe=["typed","size","subset","compareNatural","Index","DenseMatrix"],APe=ee(sP,DPe,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:s,DenseMatrix:i}=t;return e(sP,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(r(n(u),new s(0))===0||r(n(l),new s(0))===0)c=[];else{var f=Bd(yn(Array.isArray(u)?u:u.toArray()).sort(a)),d=Bd(yn(Array.isArray(l)?l:l.toArray()).sort(a));c=[];for(var h=0;h<f.length;h++)for(var m=0;m<d.length;m++)if(a(f[h].value,d[m].value)===0&&f[h].identifier===d[m].identifier){c.push(f[h]);break}}return Array.isArray(u)&&Array.isArray(l)?pb(c):new i(pb(c))}})}),iP="setIsSubset",$Pe=["typed","size","subset","compareNatural","Index"],kPe=ee(iP,$Pe,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:s}=t;return e(iP,{"Array | Matrix, Array | Matrix":function(o,u){if(r(n(o),new s(0))===0)return!0;if(r(n(u),new s(0))===0)return!1;for(var l=Bd(yn(Array.isArray(o)?o:o.toArray()).sort(a)),c=Bd(yn(Array.isArray(u)?u:u.toArray()).sort(a)),f,d=0;d<l.length;d++){f=!1;for(var h=0;h<c.length;h++)if(a(l[d].value,c[h].value)===0&&l[d].identifier===c[h].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),oP="setMultiplicity",IPe=["typed","size","subset","compareNatural","Index"],_Pe=ee(oP,IPe,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:s}=t;return e(oP,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(o,u){if(r(n(u),new s(0))===0)return 0;for(var l=yn(Array.isArray(u)?u:u.toArray()),c=0,f=0;f<l.length;f++)a(l[f],o)===0&&c++;return c}})}),uP="setPowerset",OPe=["typed","size","subset","compareNatural","Index"],FPe=ee(uP,OPe,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:s}=t;return e(uP,{"Array | Matrix":function(l){if(r(n(l),new s(0))===0)return[];for(var c=yn(Array.isArray(l)?l:l.toArray()).sort(a),f=[],d=0;d.toString(2).length<=c.length;)f.push(i(c,d.toString(2).split("").reverse())),d++;return o(f)}});function i(u,l){for(var c=[],f=0;f<l.length;f++)l[f]==="1"&&c.push(u[f]);return c}function o(u){for(var l=[],c=u.length-1;c>0;c--)for(var f=0;f<c;f++)u[f].length>u[f+1].length&&(l=u[f],u[f]=u[f+1],u[f+1]=l);return u}}),lP="setSize",RPe=["typed","compareNatural"],MPe=ee(lP,RPe,t=>{var{typed:e,compareNatural:n}=t;return e(lP,{"Array | Matrix":function(a){return Array.isArray(a)?yn(a).length:yn(a.toArray()).length},"Array | Matrix, boolean":function(a,s){if(s===!1||a.length===0)return Array.isArray(a)?yn(a).length:yn(a.toArray()).length;for(var i=yn(Array.isArray(a)?a:a.toArray()).sort(n),o=1,u=1;u<i.length;u++)n(i[u],i[u-1])!==0&&o++;return o}})}),cP="setSymDifference",PPe=["typed","size","concat","subset","setDifference","Index"],BPe=ee(cP,PPe,t=>{var{typed:e,size:n,concat:r,subset:a,setDifference:s,Index:i}=t;return e(cP,{"Array | Matrix, Array | Matrix":function(u,l){if(a(n(u),new i(0))===0)return yn(l);if(a(n(l),new i(0))===0)return yn(u);var c=yn(u),f=yn(l);return r(s(c,f),s(f,c))}})}),fP="setUnion",LPe=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],zPe=ee(fP,LPe,t=>{var{typed:e,size:n,concat:r,subset:a,setIntersect:s,setSymDifference:i,Index:o}=t;return e(fP,{"Array | Matrix, Array | Matrix":function(l,c){if(a(n(l),new o(0))===0)return yn(c);if(a(n(c),new o(0))===0)return yn(l);var f=yn(l),d=yn(c);return r(i(f,d),s(f,d))}})}),dP="add",WPe=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],UPe=ee(dP,WPe,t=>{var{typed:e,matrix:n,addScalar:r,equalScalar:a,DenseMatrix:s,SparseMatrix:i,concat:o}=t,u=Ol({typed:e}),l=HA({typed:e,equalScalar:a}),c=ef({typed:e,DenseMatrix:s}),f=zn({typed:e,matrix:n,concat:o});return e(dP,{"any, any":r,"any, any, ...any":e.referToSelf(d=>(h,m,v)=>{for(var y=d(h,m),b=0;b<v.length;b++)y=d(y,v[b]);return y})},f({elop:r,DS:u,SS:l,Ss:c}))}),pP="hypot",qPe=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],VPe=ee(pP,qPe,t=>{var{typed:e,abs:n,addScalar:r,divideScalar:a,multiplyScalar:s,sqrt:i,smaller:o,isPositive:u}=t;return e(pP,{"... number | BigNumber":l,Array:l,Matrix:c=>l(yn(c.toArray()))});function l(c){for(var f=0,d=0,h=0;h<c.length;h++){if(eu(c[h]))throw new TypeError("Unexpected type of argument to hypot");var m=n(c[h]);o(d,m)?(f=s(f,s(a(d,m),a(d,m))),f=r(f,1),d=m):f=r(f,u(m)?s(a(m,d),a(m,d)):m)}return s(d,i(f))}}),hP="norm",jPe=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],HPe=ee(hP,jPe,t=>{var{typed:e,abs:n,add:r,pow:a,conj:s,sqrt:i,multiply:o,equalScalar:u,larger:l,smaller:c,matrix:f,ctranspose:d,eigs:h}=t;return e(hP,{number:Math.abs,Complex:function(I){return I.abs()},BigNumber:function(I){return I.abs()},boolean:function(I){return Math.abs(I)},Array:function(I){return E(f(I),2)},Matrix:function(I){return E(I,2)},"Array, number | BigNumber | string":function(I,D){return E(f(I),D)},"Matrix, number | BigNumber | string":function(I,D){return E(I,D)}});function m($){var I=0;return $.forEach(function(D){var k=n(D);l(k,I)&&(I=k)},!0),I}function v($){var I;return $.forEach(function(D){var k=n(D);(!I||c(k,I))&&(I=k)},!0),I||0}function y($,I){if(I===Number.POSITIVE_INFINITY||I==="inf")return m($);if(I===Number.NEGATIVE_INFINITY||I==="-inf")return v($);if(I==="fro")return E($,2);if(typeof I=="number"&&!isNaN(I)){if(!u(I,0)){var D=0;return $.forEach(function(k){D=r(a(n(k),I),D)},!0),a(D,1/I)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function b($){var I=0;return $.forEach(function(D,k){I=r(I,o(D,s(D)))}),n(i(I))}function x($){var I=[],D=0;return $.forEach(function(k,A){var O=A[1],B=r(I[O]||0,n(k));l(B,D)&&(D=B),I[O]=B},!0),D}function w($){var I=$.size();if(I[0]!==I[1])throw new RangeError("Invalid matrix dimensions");var D=d($),k=o(D,$),A=h(k).values.toArray(),O=A[A.length-1];return n(i(O))}function N($){var I=[],D=0;return $.forEach(function(k,A){var O=A[0],B=r(I[O]||0,n(k));l(B,D)&&(D=B),I[O]=B},!0),D}function C($,I){if(I===1)return x($);if(I===Number.POSITIVE_INFINITY||I==="inf")return N($);if(I==="fro")return b($);if(I===2)return w($);throw new Error("Unsupported parameter value "+I)}function E($,I){var D=$.size();if(D.length===1)return y($,I);if(D.length===2){if(D[0]&&D[1])return C($,I);throw new RangeError("Invalid matrix dimensions")}}}),mP="dot",GPe=["typed","addScalar","multiplyScalar","conj","size"],KPe=ee(mP,GPe,t=>{var{typed:e,addScalar:n,multiplyScalar:r,conj:a,size:s}=t;return e(mP,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":u});function i(c,f){var d=l(c),h=l(f),m,v;if(d.length===1)m=d[0];else if(d.length===2&&d[1]===1)m=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)v=h[0];else if(h.length===2&&h[1]===1)v=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(m!==v)throw new RangeError("Vectors must have equal length ("+m+" != "+v+")");if(m===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return m}function o(c,f){var d=i(c,f),h=$t(c)?c._data:c,m=$t(c)?c._datatype||c.getDataType():void 0,v=$t(f)?f._data:f,y=$t(f)?f._datatype||f.getDataType():void 0,b=l(c).length===2,x=l(f).length===2,w=n,N=r;if(m&&y&&m===y&&typeof m=="string"&&m!=="mixed"){var C=m;w=e.find(n,[C,C]),N=e.find(r,[C,C])}if(!b&&!x){for(var E=N(a(h[0]),v[0]),$=1;$<d;$++)E=w(E,N(a(h[$]),v[$]));return E}if(!b&&x){for(var I=N(a(h[0]),v[0][0]),D=1;D<d;D++)I=w(I,N(a(h[D]),v[D][0]));return I}if(b&&!x){for(var k=N(a(h[0][0]),v[0]),A=1;A<d;A++)k=w(k,N(a(h[A][0]),v[A]));return k}if(b&&x){for(var O=N(a(h[0][0]),v[0][0]),B=1;B<d;B++)O=w(O,N(a(h[B][0]),v[B][0]));return O}}function u(c,f){i(c,f);for(var d=c._index,h=c._values,m=f._index,v=f._values,y=0,b=n,x=r,w=0,N=0;w<d.length&&N<m.length;){var C=d[w],E=m[N];if(C<E){w++;continue}if(C>E){N++;continue}C===E&&(y=b(y,x(h[w],v[N])),w++,N++)}return y}function l(c){return $t(c)?c.size():s(c)}}),XPe="trace",YPe=["typed","matrix","add"],QPe=ee(XPe,YPe,t=>{var{typed:e,matrix:n,add:r}=t;return e("trace",{Array:function(o){return a(n(o))},SparseMatrix:s,DenseMatrix:a,any:Wt});function a(i){var o=i._size,u=i._data;switch(o.length){case 1:if(o[0]===1)return Wt(u[0]);throw new RangeError("Matrix must be square (size: "+Qt(o)+")");case 2:{var l=o[0],c=o[1];if(l===c){for(var f=0,d=0;d<l;d++)f=r(f,u[d][d]);return f}else throw new RangeError("Matrix must be square (size: "+Qt(o)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Qt(o)+")")}}function s(i){var o=i._values,u=i._index,l=i._ptr,c=i._size,f=c[0],d=c[1];if(f===d){var h=0;if(o.length>0)for(var m=0;m<d;m++)for(var v=l[m],y=l[m+1],b=v;b<y;b++){var x=u[b];if(x===m){h=r(h,o[b]);break}if(x>m)break}return h}throw new RangeError("Matrix must be square (size: "+Qt(c)+")")}}),gP="index",JPe=["typed","Index"],ZPe=ee(gP,JPe,t=>{var{typed:e,Index:n}=t;return e(gP,{"...number | string | BigNumber | Range | Array | Matrix":function(a){var s=a.map(function(o){return Gt(o)?o.toNumber():An(o)||$t(o)?o.map(function(u){return Gt(u)?u.toNumber():u}):o}),i=new n;return n.apply(i,s),i}})}),WV=new Set(["end"]),e4e="Node",t4e=["mathWithTransform"],n4e=ee(e4e,t4e,t=>{var{mathWithTransform:e}=t;function n(a){for(var s of[...WV])if(a.has(s))throw new Error('Scope contains an illegal symbol, "'+s+'" is a reserved keyword')}class r{get type(){return"Node"}get isNode(){return!0}evaluate(s){return this.compile().evaluate(s)}compile(){var s=this._compile(e,{}),i={},o=null;function u(l){var c=dd(l);return n(c),s(c,i,o)}return{evaluate:u}}_compile(s,i){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(s){throw new Error("Cannot run forEach on a Node interface")}map(s){throw new Error("Cannot run map on a Node interface")}_ifNode(s){if(!$n(s))throw new TypeError("Callback function must return a Node");return s}traverse(s){s(this,null,null);function i(o,u){o.forEach(function(l,c,f){u(l,c,f),i(l,u)})}i(this,s)}transform(s){function i(o,u,l){var c=s(o,u,l);return c!==o?c:o.map(i)}return i(this,null,null)}filter(s){var i=[];return this.traverse(function(o,u,l){s(o,u,l)&&i.push(o)}),i}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(s){return s.cloneDeep()})}equals(s){return s?this.type===s.type&&cu(this,s):!1}toString(s){var i=this._getCustomString(s);return typeof i<"u"?i:this._toString(s)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(s){var i=this._getCustomString(s);return typeof i<"u"?i:this._toHTML(s)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(s){var i=this._getCustomString(s);return typeof i<"u"?i:this._toTex(s)}_toTex(s){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(s){if(s&&typeof s=="object")switch(typeof s.handler){case"object":case"undefined":return;case"function":return s.handler(this,s);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return r},{isClass:!0,isNode:!0});function Za(t){return t&&t.isIndexError?new Xi(t.index+1,t.min+1,t.max!==void 0?t.max+1:void 0):t}function UV(t){var{subset:e}=t;return function(r,a){try{if(Array.isArray(r))return e(r,a);if(r&&typeof r.subset=="function")return r.subset(a);if(typeof r=="string")return e(r,a);if(typeof r=="object"){if(!a.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Ha(r,a.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(s){throw Za(s)}}}var By="AccessorNode",r4e=["subset","Node"],a4e=ee(By,r4e,t=>{var{subset:e,Node:n}=t,r=UV({subset:e});function a(i){return!(Lc(i)||ai(i)||cn(i)||ml(i)||Rw(i)||lu(i)||ea(i))}class s extends n{constructor(o,u){if(super(),!$n(o))throw new TypeError('Node expected for parameter "object"');if(!fp(u))throw new TypeError('IndexNode expected for parameter "index"');this.object=o,this.index=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return By}get isAccessorNode(){return!0}_compile(o,u){var l=this.object._compile(o,u),c=this.index._compile(o,u);if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(h,m,v){return Ha(l(h,m,v),f)}}else return function(h,m,v){var y=l(h,m,v),b=c(h,m,y);return r(y,b)}}forEach(o){o(this.object,"object",this),o(this.index,"index",this)}map(o){return new s(this._ifNode(o(this.object,"object",this)),this._ifNode(o(this.index,"index",this)))}clone(){return new s(this.object,this.index)}_toString(o){var u=this.object.toString(o);return a(this.object)&&(u="("+u+")"),u+this.index.toString(o)}_toHTML(o){var u=this.object.toHTML(o);return a(this.object)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+this.index.toHTML(o)}_toTex(o){var u=this.object.toTex(o);return a(this.object)&&(u="\\left(' + object + '\\right)"),u+this.index.toTex(o)}toJSON(){return{mathjs:By,object:this.object,index:this.index}}static fromJSON(o){return new s(o.object,o.index)}}return Wr(s,"name",By),s},{isClass:!0,isNode:!0}),Ly="ArrayNode",s4e=["Node"],i4e=ee(Ly,s4e,t=>{var{Node:e}=t;class n extends e{constructor(a){if(super(),this.items=a||[],!Array.isArray(this.items)||!this.items.every($n))throw new TypeError("Array containing Nodes expected")}get type(){return Ly}get isArrayNode(){return!0}_compile(a,s){var i=nl(this.items,function(l){return l._compile(a,s)}),o=a.config.matrix!=="Array";if(o){var u=a.matrix;return function(c,f,d){return u(nl(i,function(h){return h(c,f,d)}))}}else return function(c,f,d){return nl(i,function(h){return h(c,f,d)})}}forEach(a){for(var s=0;s<this.items.length;s++){var i=this.items[s];a(i,"items["+s+"]",this)}}map(a){for(var s=[],i=0;i<this.items.length;i++)s[i]=this._ifNode(a(this.items[i],"items["+i+"]",this));return new n(s)}clone(){return new n(this.items.slice(0))}_toString(a){var s=this.items.map(function(i){return i.toString(a)});return"["+s.join(", ")+"]"}toJSON(){return{mathjs:Ly,items:this.items}}static fromJSON(a){return new n(a.items)}_toHTML(a){var s=this.items.map(function(i){return i.toHTML(a)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){function s(i,o){var u=i.some(ai)&&!i.every(ai),l=o||u,c=l?"&":"\\\\",f=i.map(function(d){return d.items?s(d.items,!o):d.toTex(a)}).join(c);return u||!l||l&&!o?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return s(this.items,!1)}}return Wr(n,"name",Ly),n},{isClass:!0,isNode:!0});function o4e(t){var{subset:e,matrix:n}=t;return function(a,s,i){try{if(Array.isArray(a)){var o=n(a).subset(s,i).valueOf();return o.forEach((u,l)=>{a[l]=u}),a}else{if(a&&typeof a.subset=="function")return a.subset(s,i);if(typeof a=="string")return e(a,s,i);if(typeof a=="object"){if(!s.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Fd(a,s.getObjectProperty(),i),a}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(u){throw Za(u)}}}var Bi=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function zy(t,e){if(!e||e!=="auto")return t;for(var n=t;lu(n);)n=n.content;return n}function _n(t,e,n,r){var a=t;e!=="keep"&&(a=t.getContent());for(var s=a.getIdentifier(),i=null,o=0;o<Bi.length;o++)if(s in Bi[o]){i=o;break}if(s==="OperatorNode:multiply"&&a.implicit&&n!=="show"){var u=zy(a.args[0],e);!(cn(u)&&r&&r.getIdentifier()==="OperatorNode:divide"&&zC(zy(r.args[0],e)))&&!(u.getIdentifier()==="OperatorNode:divide"&&zC(zy(u.args[0],e))&&cn(zy(u.args[1])))&&(i+=1)}return i}function mh(t,e){var n=t;e!=="keep"&&(n=t.getContent());var r=n.getIdentifier(),a=_n(n,e);if(a===null)return null;var s=Bi[a][r];if(pt(s,"associativity")){if(s.associativity==="left")return"left";if(s.associativity==="right")return"right";throw Error("'"+r+"' has the invalid associativity '"+s.associativity+"'.")}return null}function VS(t,e,n){var r=n!=="keep"?t.getContent():t,a=n!=="keep"?t.getContent():e,s=r.getIdentifier(),i=a.getIdentifier(),o=_n(r,n);if(o===null)return null;var u=Bi[o][s];if(pt(u,"associativeWith")&&u.associativeWith instanceof Array){for(var l=0;l<u.associativeWith.length;l++)if(u.associativeWith[l]===i)return!0;return!1}return null}function u4e(t){var e="OperatorNode:"+t;for(var n of Bi)if(e in n)return n[e].op;return null}var Wy="AssignmentNode",l4e=["subset","?matrix","Node"],c4e=ee(Wy,l4e,t=>{var{subset:e,matrix:n,Node:r}=t,a=UV({subset:e}),s=o4e({subset:e,matrix:n});function i(u,l,c){l||(l="keep");var f=_n(u,l,c),d=_n(u.value,l,c);return l==="all"||d!==null&&d<=f}class o extends r{constructor(l,c,f){if(super(),this.object=l,this.index=f?c:null,this.value=f||c,!ea(l)&&!Lc(l))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(ea(l)&&l.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!fp(this.index))throw new TypeError('IndexNode expected as "index"');if(!$n(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return Wy}get isAssignmentNode(){return!0}_compile(l,c){var f=this.object._compile(l,c),d=this.index?this.index._compile(l,c):null,h=this.value._compile(l,c),m=this.object.name;if(this.index)if(this.index.isObjectProperty()){var v=this.index.getObjectProperty();return function(N,C,E){var $=f(N,C,E),I=h(N,C,E);return Fd($,v,I),I}}else{if(ea(this.object))return function(N,C,E){var $=f(N,C,E),I=h(N,C,E),D=d(N,C,$);return N.set(m,s($,D,I)),I};var y=this.object.object._compile(l,c);if(this.object.index.isObjectProperty()){var b=this.object.index.getObjectProperty();return function(N,C,E){var $=y(N,C,E),I=Ha($,b),D=d(N,C,I),k=h(N,C,E);return Fd($,b,s(I,D,k)),k}}else{var x=this.object.index._compile(l,c);return function(N,C,E){var $=y(N,C,E),I=x(N,C,$),D=a($,I),k=d(N,C,D),A=h(N,C,E);return s($,I,s(D,k,A)),A}}}else{if(!ea(this.object))throw new TypeError("SymbolNode expected as object");return function(N,C,E){var $=h(N,C,E);return N.set(m,$),$}}}forEach(l){l(this.object,"object",this),this.index&&l(this.index,"index",this),l(this.value,"value",this)}map(l){var c=this._ifNode(l(this.object,"object",this)),f=this.index?this._ifNode(l(this.index,"index",this)):null,d=this._ifNode(l(this.value,"value",this));return new o(c,f,d)}clone(){return new o(this.object,this.index,this.value)}_toString(l){var c=this.object.toString(l),f=this.index?this.index.toString(l):"",d=this.value.toString(l);return i(this,l&&l.parenthesis,l&&l.implicit)&&(d="("+d+")"),c+f+" = "+d}toJSON(){return{mathjs:Wy,object:this.object,index:this.index,value:this.value}}static fromJSON(l){return new o(l.object,l.index,l.value)}_toHTML(l){var c=this.object.toHTML(l),f=this.index?this.index.toHTML(l):"",d=this.value.toHTML(l);return i(this,l&&l.parenthesis,l&&l.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(l){var c=this.object.toTex(l),f=this.index?this.index.toTex(l):"",d=this.value.toTex(l);return i(this,l&&l.parenthesis,l&&l.implicit)&&(d="\\left(".concat(d,"\\right)")),c+f+"="+d}}return Wr(o,"name",Wy),o},{isClass:!0,isNode:!0}),Uy="BlockNode",f4e=["ResultSet","Node"],d4e=ee(Uy,f4e,t=>{var{ResultSet:e,Node:n}=t;class r extends n{constructor(s){if(super(),!Array.isArray(s))throw new Error("Array expected");this.blocks=s.map(function(i){var o=i&&i.node,u=i&&i.visible!==void 0?i.visible:!0;if(!$n(o))throw new TypeError('Property "node" must be a Node');if(typeof u!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:o,visible:u}})}get type(){return Uy}get isBlockNode(){return!0}_compile(s,i){var o=nl(this.blocks,function(u){return{evaluate:u.node._compile(s,i),visible:u.visible}});return function(l,c,f){var d=[];return Nq(o,function(m){var v=m.evaluate(l,c,f);m.visible&&d.push(v)}),new e(d)}}forEach(s){for(var i=0;i<this.blocks.length;i++)s(this.blocks[i].node,"blocks["+i+"].node",this)}map(s){for(var i=[],o=0;o<this.blocks.length;o++){var u=this.blocks[o],l=this._ifNode(s(u.node,"blocks["+o+"].node",this));i[o]={node:l,visible:u.visible}}return new r(i)}clone(){var s=this.blocks.map(function(i){return{node:i.node,visible:i.visible}});return new r(s)}_toString(s){return this.blocks.map(function(i){return i.node.toString(s)+(i.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:Uy,blocks:this.blocks}}static fromJSON(s){return new r(s.blocks)}_toHTML(s){return this.blocks.map(function(i){return i.node.toHTML(s)+(i.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(s){return this.blocks.map(function(i){return i.node.toTex(s)+(i.visible?"":";")}).join(`\\;\\;
`)}}return Wr(r,"name",Uy),r},{isClass:!0,isNode:!0}),qy="ConditionalNode",p4e=["Node"],h4e=ee(qy,p4e,t=>{var{Node:e}=t;function n(a){if(typeof a=="number"||typeof a=="boolean"||typeof a=="string")return!!a;if(a){if(Gt(a))return!a.isZero();if(eu(a))return!!(a.re||a.im);if(si(a))return!!a.value}if(a==null)return!1;throw new TypeError('Unsupported type of condition "'+Ln(a)+'"')}class r extends e{constructor(s,i,o){if(super(),!$n(s))throw new TypeError("Parameter condition must be a Node");if(!$n(i))throw new TypeError("Parameter trueExpr must be a Node");if(!$n(o))throw new TypeError("Parameter falseExpr must be a Node");this.condition=s,this.trueExpr=i,this.falseExpr=o}get type(){return qy}get isConditionalNode(){return!0}_compile(s,i){var o=this.condition._compile(s,i),u=this.trueExpr._compile(s,i),l=this.falseExpr._compile(s,i);return function(f,d,h){return n(o(f,d,h))?u(f,d,h):l(f,d,h)}}forEach(s){s(this.condition,"condition",this),s(this.trueExpr,"trueExpr",this),s(this.falseExpr,"falseExpr",this)}map(s){return new r(this._ifNode(s(this.condition,"condition",this)),this._ifNode(s(this.trueExpr,"trueExpr",this)),this._ifNode(s(this.falseExpr,"falseExpr",this)))}clone(){return new r(this.condition,this.trueExpr,this.falseExpr)}_toString(s){var i=s&&s.parenthesis?s.parenthesis:"keep",o=_n(this,i,s&&s.implicit),u=this.condition.toString(s),l=_n(this.condition,i,s&&s.implicit);(i==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=o)&&(u="("+u+")");var c=this.trueExpr.toString(s),f=_n(this.trueExpr,i,s&&s.implicit);(i==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c="("+c+")");var d=this.falseExpr.toString(s),h=_n(this.falseExpr,i,s&&s.implicit);return(i==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=o)&&(d="("+d+")"),u+" ? "+c+" : "+d}toJSON(){return{mathjs:qy,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(s){return new r(s.condition,s.trueExpr,s.falseExpr)}_toHTML(s){var i=s&&s.parenthesis?s.parenthesis:"keep",o=_n(this,i,s&&s.implicit),u=this.condition.toHTML(s),l=_n(this.condition,i,s&&s.implicit);(i==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=o)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(s),f=_n(this.trueExpr,i,s&&s.implicit);(i==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(s),h=_n(this.falseExpr,i,s&&s.implicit);return(i==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=o)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(s){return"\\begin{cases} {"+this.trueExpr.toTex(s)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(s)+"}\\\\{"+this.falseExpr.toTex(s)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return Wr(r,"name",qy),r},{isClass:!0,isNode:!0}),jS,vP;function m4e(){if(vP)return jS;vP=1;var t=Object.assign||function(a){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])}return a},e={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},n={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},r=function(s,i){return t({},s,i)};return jS=function(a){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.preserveFormatting,o=i===void 0?!1:i,u=s.escapeMapFn,l=u===void 0?r:u,c=String(a),f="",d=l(t({},e),o?t({},n):{}),h=Object.keys(d),m=function(){var y=!1;h.forEach(function(b,x){y||c.length>=b.length&&c.slice(0,b.length)===b&&(f+=d[h[x]],c=c.slice(b.length,c.length),y=!0)}),y||(f+=c.slice(0,1),c=c.slice(1,c.length))};c;)m();return f},jS}var g4e=m4e();const v4e=Uc(g4e);var rE={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},gn={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},yP={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(gn.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(gn.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(gn.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(gn.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(gn.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(gn.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(gn.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(gn.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(gn.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(gn.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(gn.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(gn.bitAnd,"${args[1]}\\right)")},bitNot:{1:gn.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(gn.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(gn.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(gn.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(gn.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(gn.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(gn.and,"${args[1]}\\right)")},not:{1:gn.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(gn.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(gn.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(gn.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(gn.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(gn.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(gn.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(gn.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(gn.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(gn.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(gn.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(gn.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(gn.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(gn.to,"${args[1]}\\right)")},numeric:function(e,n){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(rE.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},y4e="\\mathrm{${name}}\\left(${args}\\right)",bP={deg:"^\\circ"};function aE(t){return v4e(t,{preserveFormatting:!0})}function qV(t,e){return e=typeof e>"u"?!1:e,e?pt(bP,t)?bP[t]:"\\mathrm{"+aE(t)+"}":pt(rE,t)?rE[t]:aE(t)}var Vy="ConstantNode",b4e=["Node"],w4e=ee(Vy,b4e,t=>{var{Node:e}=t;class n extends e{constructor(a){super(),this.value=a}get type(){return Vy}get isConstantNode(){return!0}_compile(a,s){var i=this.value;return function(){return i}}forEach(a){}map(a){return this.clone()}clone(){return new n(this.value)}_toString(a){return Qt(this.value,a)}_toHTML(a){var s=this._toString(a);switch(Ln(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+s+"</span>";case"string":return'<span class="math-string">'+s+"</span>";case"boolean":return'<span class="math-boolean">'+s+"</span>";case"null":return'<span class="math-null-symbol">'+s+"</span>";case"undefined":return'<span class="math-undefined">'+s+"</span>";default:return'<span class="math-symbol">'+s+"</span>"}}toJSON(){return{mathjs:Vy,value:this.value}}static fromJSON(a){return new n(a.value)}_toTex(a){var s=this._toString(a),i=Ln(this.value);switch(i){case"string":return"\\mathtt{"+aE(s)+"}";case"number":case"BigNumber":{var o=i==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!o)return this.value.valueOf()<0?"-\\infty":"\\infty";var u=s.toLowerCase().indexOf("e");return u!==-1?s.substring(0,u)+"\\cdot10^{"+s.substring(u+1)+"}":s}case"bigint":return s.toString();case"Fraction":return this.value.toLatex();default:return s}}}return Wr(n,"name",Vy),n},{isClass:!0,isNode:!0}),jy="FunctionAssignmentNode",x4e=["typed","Node"],S4e=ee(jy,x4e,t=>{var{typed:e,Node:n}=t;function r(s,i,o){var u=_n(s,i,o),l=_n(s.expr,i,o);return i==="all"||l!==null&&l<=u}class a extends n{constructor(i,o,u){if(super(),typeof i!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(o))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!$n(u))throw new TypeError('Node expected for parameter "expr"');if(WV.has(i))throw new Error('Illegal function name, "'+i+'" is a reserved keyword');var l=new Set;for(var c of o){var f=typeof c=="string"?c:c.name;if(l.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));l.add(f)}this.name=i,this.params=o.map(function(d){return d&&d.name||d}),this.types=o.map(function(d){return d&&d.type||"any"}),this.expr=u}get type(){return jy}get isFunctionAssignmentNode(){return!0}_compile(i,o){var u=Object.create(o);Nq(this.params,function(m){u[m]=!0});var l=this.expr._compile(i,u),c=this.name,f=this.params,d=bF(this.types,","),h=c+"("+bF(this.params,", ")+")";return function(v,y,b){var x={};x[d]=function(){for(var N=Object.create(y),C=0;C<f.length;C++)N[f[C]]=arguments[C];return l(v,N,b)};var w=e(c,x);return w.syntax=h,v.set(c,w),w}}forEach(i){i(this.expr,"expr",this)}map(i){var o=this._ifNode(i(this.expr,"expr",this));return new a(this.name,this.params.slice(0),o)}clone(){return new a(this.name,this.params.slice(0),this.expr)}_toString(i){var o=i&&i.parenthesis?i.parenthesis:"keep",u=this.expr.toString(i);return r(this,o,i&&i.implicit)&&(u="("+u+")"),this.name+"("+this.params.join(", ")+") = "+u}toJSON(){var i=this.types;return{mathjs:jy,name:this.name,params:this.params.map(function(o,u){return{name:o,type:i[u]}}),expr:this.expr}}static fromJSON(i){return new a(i.name,i.params,i.expr)}_toHTML(i){for(var o=i&&i.parenthesis?i.parenthesis:"keep",u=[],l=0;l<this.params.length;l++)u.push('<span class="math-symbol math-parameter">'+oi(this.params[l])+"</span>");var c=this.expr.toHTML(i);return r(this,o,i&&i.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+oi(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+u.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(i){var o=i&&i.parenthesis?i.parenthesis:"keep",u=this.expr.toTex(i);return r(this,o,i&&i.implicit)&&(u="\\left(".concat(u,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(qV).join(",")+"\\right)="+u}}return Wr(a,"name",jy),a},{isClass:!0,isNode:!0}),Hy="IndexNode",N4e=["Node","size"],C4e=ee(Hy,N4e,t=>{var{Node:e,size:n}=t;class r extends e{constructor(s,i){if(super(),this.dimensions=s,this.dotNotation=i||!1,!Array.isArray(s)||!s.every($n))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return Hy}get isIndexNode(){return!0}_compile(s,i){var o=nl(this.dimensions,function(l,c){var f=l.filter(m=>m.isSymbolNode&&m.name==="end").length>0;if(f){var d=Object.create(i);d.end=!0;var h=l._compile(s,d);return function(v,y,b){if(!$t(b)&&!An(b)&&!ka(b))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Ln(b));var x=n(b).valueOf(),w=Object.create(y);return w.end=x[c],h(v,w,b)}}else return l._compile(s,i)}),u=Ha(s,"index");return function(c,f,d){var h=nl(o,function(m){return m(c,f,d)});return u(...h)}}forEach(s){for(var i=0;i<this.dimensions.length;i++)s(this.dimensions[i],"dimensions["+i+"]",this)}map(s){for(var i=[],o=0;o<this.dimensions.length;o++)i[o]=this._ifNode(s(this.dimensions[o],"dimensions["+o+"]",this));return new r(i,this.dotNotation)}clone(){return new r(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&cn(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(s){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:Hy,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(s){return new r(s.dimensions,s.dotNotation)}_toHTML(s){for(var i=[],o=0;o<this.dimensions.length;o++)i[o]=this.dimensions[o].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+oi(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+i.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(s){var i=this.dimensions.map(function(o){return o.toTex(s)});return this.dotNotation?"."+this.getObjectProperty():"_{"+i.join(",")+"}"}}return Wr(r,"name",Hy),r},{isClass:!0,isNode:!0}),Gy="ObjectNode",E4e=["Node"],T4e=ee(Gy,E4e,t=>{var{Node:e}=t;class n extends e{constructor(a){if(super(),this.properties=a||{},a&&(typeof a!="object"||!Object.keys(a).every(function(s){return $n(a[s])})))throw new TypeError("Object containing Nodes expected")}get type(){return Gy}get isObjectNode(){return!0}_compile(a,s){var i={};for(var o in this.properties)if(pt(this.properties,o)){var u=nd(o),l=JSON.parse(u),c=Ha(this.properties,o);i[l]=c._compile(a,s)}return function(d,h,m){var v={};for(var y in i)pt(i,y)&&(v[y]=i[y](d,h,m));return v}}forEach(a){for(var s in this.properties)pt(this.properties,s)&&a(this.properties[s],"properties["+nd(s)+"]",this)}map(a){var s={};for(var i in this.properties)pt(this.properties,i)&&(s[i]=this._ifNode(a(this.properties[i],"properties["+nd(i)+"]",this)));return new n(s)}clone(){var a={};for(var s in this.properties)pt(this.properties,s)&&(a[s]=this.properties[s]);return new n(a)}_toString(a){var s=[];for(var i in this.properties)pt(this.properties,i)&&s.push(nd(i)+": "+this.properties[i].toString(a));return"{"+s.join(", ")+"}"}toJSON(){return{mathjs:Gy,properties:this.properties}}static fromJSON(a){return new n(a.properties)}_toHTML(a){var s=[];for(var i in this.properties)pt(this.properties,i)&&s.push('<span class="math-symbol math-property">'+oi(i)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[i].toHTML(a));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(a){var s=[];for(var i in this.properties)pt(this.properties,i)&&s.push("\\mathbf{"+i+":} & "+this.properties[i].toTex(a)+"\\\\");var o="\\left\\{\\begin{array}{ll}"+s.join(`
`)+"\\end{array}\\right\\}";return o}}return Wr(n,"name",Gy),n},{isClass:!0,isNode:!0});function Eh(t,e){return new XU(t,new _w(e),new Set(Object.keys(e)))}var Ky="OperatorNode",D4e=["Node"],A4e=ee(Ky,D4e,t=>{var{Node:e}=t;function n(s,i){var o=s;if(i==="auto")for(;lu(o);)o=o.content;return cn(o)?!0:br(o)?n(o.args[0],i):!1}function r(s,i,o,u,l){var c=_n(s,i,o),f=mh(s,i);if(i==="all"||u.length>2&&s.getIdentifier()!=="OperatorNode:add"&&s.getIdentifier()!=="OperatorNode:multiply")return u.map(function(k){switch(k.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(u.length){case 0:d=[];break;case 1:{var h=_n(u[0],i,o,s);if(l&&h!==null){var m,v;if(i==="keep"?(m=u[0].getIdentifier(),v=s.getIdentifier()):(m=u[0].getContent().getIdentifier(),v=s.getContent().getIdentifier()),Bi[c][v].latexLeftParens===!1){d=[!1];break}if(Bi[h][m].latexParens===!1){d=[!1];break}}if(h===null){d=[!1];break}if(h<=c){d=[!0];break}d=[!1]}break;case 2:{var y,b=_n(u[0],i,o,s),x=VS(s,u[0],i);b===null?y=!1:b===c&&f==="right"&&!x||b<c?y=!0:y=!1;var w,N=_n(u[1],i,o,s),C=VS(s,u[1],i);if(N===null?w=!1:N===c&&f==="left"&&!C||N<c?w=!0:w=!1,l){var E,$,I;i==="keep"?(E=s.getIdentifier(),$=s.args[0].getIdentifier(),I=s.args[1].getIdentifier()):(E=s.getContent().getIdentifier(),$=s.args[0].getContent().getIdentifier(),I=s.args[1].getContent().getIdentifier()),b!==null&&(Bi[c][E].latexLeftParens===!1&&(y=!1),Bi[b][$].latexParens===!1&&(y=!1)),N!==null&&(Bi[c][E].latexRightParens===!1&&(w=!1),Bi[N][I].latexParens===!1&&(w=!1))}d=[y,w]}break;default:(s.getIdentifier()==="OperatorNode:add"||s.getIdentifier()==="OperatorNode:multiply")&&(d=u.map(function(k){var A=_n(k,i,o,s),O=VS(s,k,i),B=mh(k,i);return A===null?!1:c===A&&f===B&&!O?!0:A<c}));break}if(u.length>=2&&s.getIdentifier()==="OperatorNode:multiply"&&s.implicit&&i!=="all"&&o==="hide")for(var D=1;D<d.length;++D)n(u[D],i)&&!d[D-1]&&(i!=="keep"||!lu(u[D-1]))&&(d[D]=!0);return d}class a extends e{constructor(i,o,u,l,c){if(super(),typeof i!="string")throw new TypeError('string expected for parameter "op"');if(typeof o!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(u)||!u.every($n))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=l===!0,this.isPercentage=c===!0,this.op=i,this.fn=o,this.args=u||[]}get type(){return Ky}get isOperatorNode(){return!0}_compile(i,o){if(typeof this.fn!="string"||!FA(i,this.fn))throw i[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var u=Ha(i,this.fn),l=nl(this.args,function(m){return m._compile(i,o)});if(typeof u=="function"&&u.rawArgs===!0){var c=this.args;return function(v,y,b){return u(c,i,Eh(v,y))}}else if(l.length===1){var f=l[0];return function(v,y,b){return u(f(v,y,b))}}else if(l.length===2){var d=l[0],h=l[1];return function(v,y,b){return u(d(v,y,b),h(v,y,b))}}else return function(v,y,b){return u.apply(null,nl(l,function(x){return x(v,y,b)}))}}forEach(i){for(var o=0;o<this.args.length;o++)i(this.args[o],"args["+o+"]",this)}map(i){for(var o=[],u=0;u<this.args.length;u++)o[u]=this._ifNode(i(this.args[u],"args["+u+"]",this));return new a(this.op,this.fn,o,this.implicit,this.isPercentage)}clone(){return new a(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(i){var o=i&&i.parenthesis?i.parenthesis:"keep",u=i&&i.implicit?i.implicit:"hide",l=this.args,c=r(this,o,u,l,!1);if(l.length===1){var f=mh(this,o),d=l[0].toString(i);c[0]&&(d="("+d+")");var h=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(h?" ":"")+d:f==="left"?d+(h?" ":"")+this.op:d+this.op}else if(l.length===2){var m=l[0].toString(i),v=l[1].toString(i);return c[0]&&(m="("+m+")"),c[1]&&(v="("+v+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?m+" "+v:m+" "+this.op+" "+v}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=l.map(function(b,x){return b=b.toString(i),c[x]&&(b="("+b+")"),b});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?y.join(" "):y.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:Ky,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(i){return new a(i.op,i.fn,i.args,i.implicit,i.isPercentage)}_toHTML(i){var o=i&&i.parenthesis?i.parenthesis:"keep",u=i&&i.implicit?i.implicit:"hide",l=this.args,c=r(this,o,u,l,!1);if(l.length===1){var f=mh(this,o),d=l[0].toHTML(i);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+oi(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+oi(this.op)+"</span>"}else if(l.length===2){var h=l[0].toHTML(i),m=l[1].toHTML(i);return c[0]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?h+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+m:h+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+oi(this.op)+"</span>"+m}else{var v=l.map(function(y,b){return y=y.toHTML(i),c[b]&&(y='<span class="math-parenthesis math-round-parenthesis">(</span>'+y+'<span class="math-parenthesis math-round-parenthesis">)</span>'),y});return l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?v.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):v.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+oi(this.op)+"</span>"):'<span class="math-function">'+oi(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+v.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(i){var o=i&&i.parenthesis?i.parenthesis:"keep",u=i&&i.implicit?i.implicit:"hide",l=this.args,c=r(this,o,u,l,!0),f=gn[this.fn];if(f=typeof f>"u"?this.op:f,l.length===1){var d=mh(this,o),h=l[0].toTex(i);return c[0]&&(h="\\left(".concat(h,"\\right)")),d==="right"?f+h:h+f}else if(l.length===2){var m=l[0],v=m.toTex(i);c[0]&&(v="\\left(".concat(v,"\\right)"));var y=l[1],b=y.toTex(i);c[1]&&(b="\\left(".concat(b,"\\right)"));var x;switch(o==="keep"?x=m.getIdentifier():x=m.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+v+"}{"+b+"}";case"OperatorNode:pow":switch(v="{"+v+"}",b="{"+b+"}",x){case"ConditionalNode":case"OperatorNode:divide":v="\\left(".concat(v,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&u==="hide")return v+"~"+b}return v+f+b}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var w=l.map(function(N,C){return N=N.toTex(i),c[C]&&(N="\\left(".concat(N,"\\right)")),N});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&u==="hide"?w.join("~"):w.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+l.map(function(N){return N.toTex(i)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return Wr(a,"name",Ky),a},{isClass:!0,isNode:!0}),Xy="ParenthesisNode",$4e=["Node"],k4e=ee(Xy,$4e,t=>{var{Node:e}=t;class n extends e{constructor(a){if(super(),!$n(a))throw new TypeError('Node expected for parameter "content"');this.content=a}get type(){return Xy}get isParenthesisNode(){return!0}_compile(a,s){return this.content._compile(a,s)}getContent(){return this.content.getContent()}forEach(a){a(this.content,"content",this)}map(a){var s=a(this.content,"content",this);return new n(s)}clone(){return new n(this.content)}_toString(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?"("+this.content.toString(a)+")":this.content.toString(a)}toJSON(){return{mathjs:Xy,content:this.content}}static fromJSON(a){return new n(a.content)}_toHTML(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(a)}_toTex(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?"\\left(".concat(this.content.toTex(a),"\\right)"):this.content.toTex(a)}}return Wr(n,"name",Xy),n},{isClass:!0,isNode:!0}),Yy="RangeNode",I4e=["Node"],_4e=ee(Yy,I4e,t=>{var{Node:e}=t;function n(a,s,i){var o=_n(a,s,i),u={},l=_n(a.start,s,i);if(u.start=l!==null&&l<=o||s==="all",a.step){var c=_n(a.step,s,i);u.step=c!==null&&c<=o||s==="all"}var f=_n(a.end,s,i);return u.end=f!==null&&f<=o||s==="all",u}class r extends e{constructor(s,i,o){if(super(),!$n(s))throw new TypeError("Node expected");if(!$n(i))throw new TypeError("Node expected");if(o&&!$n(o))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=s,this.end=i,this.step=o||null}get type(){return Yy}get isRangeNode(){return!0}needsEnd(){var s=this.filter(function(i){return ea(i)&&i.name==="end"});return s.length>0}_compile(s,i){var o=s.range,u=this.start._compile(s,i),l=this.end._compile(s,i);if(this.step){var c=this.step._compile(s,i);return function(d,h,m){return o(u(d,h,m),l(d,h,m),c(d,h,m))}}else return function(d,h,m){return o(u(d,h,m),l(d,h,m))}}forEach(s){s(this.start,"start",this),s(this.end,"end",this),this.step&&s(this.step,"step",this)}map(s){return new r(this._ifNode(s(this.start,"start",this)),this._ifNode(s(this.end,"end",this)),this.step&&this._ifNode(s(this.step,"step",this)))}clone(){return new r(this.start,this.end,this.step&&this.step)}_toString(s){var i=s&&s.parenthesis?s.parenthesis:"keep",o=n(this,i,s&&s.implicit),u,l=this.start.toString(s);if(o.start&&(l="("+l+")"),u=l,this.step){var c=this.step.toString(s);o.step&&(c="("+c+")"),u+=":"+c}var f=this.end.toString(s);return o.end&&(f="("+f+")"),u+=":"+f,u}toJSON(){return{mathjs:Yy,start:this.start,end:this.end,step:this.step}}static fromJSON(s){return new r(s.start,s.end,s.step)}_toHTML(s){var i=s&&s.parenthesis?s.parenthesis:"keep",o=n(this,i,s&&s.implicit),u,l=this.start.toHTML(s);if(o.start&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u=l,this.step){var c=this.step.toHTML(s);o.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(s);return o.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+f,u}_toTex(s){var i=s&&s.parenthesis?s.parenthesis:"keep",o=n(this,i,s&&s.implicit),u=this.start.toTex(s);if(o.start&&(u="\\left(".concat(u,"\\right)")),this.step){var l=this.step.toTex(s);o.step&&(l="\\left(".concat(l,"\\right)")),u+=":"+l}var c=this.end.toTex(s);return o.end&&(c="\\left(".concat(c,"\\right)")),u+=":"+c,u}}return Wr(r,"name",Yy),r},{isClass:!0,isNode:!0}),Qy="RelationalNode",O4e=["Node"],F4e=ee(Qy,O4e,t=>{var{Node:e}=t,n={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class r extends e{constructor(s,i){if(super(),!Array.isArray(s))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(i))throw new TypeError("Parameter params must be an array");if(s.length!==i.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=s,this.params=i}get type(){return Qy}get isRelationalNode(){return!0}_compile(s,i){var o=this,u=this.params.map(l=>l._compile(s,i));return function(c,f,d){for(var h,m=u[0](c,f,d),v=0;v<o.conditionals.length;v++){h=m,m=u[v+1](c,f,d);var y=Ha(s,o.conditionals[v]);if(!y(h,m))return!1}return!0}}forEach(s){this.params.forEach((i,o)=>s(i,"params["+o+"]",this),this)}map(s){return new r(this.conditionals.slice(),this.params.map((i,o)=>this._ifNode(s(i,"params["+o+"]",this)),this))}clone(){return new r(this.conditionals,this.params)}_toString(s){for(var i=s&&s.parenthesis?s.parenthesis:"keep",o=_n(this,i,s&&s.implicit),u=this.params.map(function(f,d){var h=_n(f,i,s&&s.implicit);return i==="all"||h!==null&&h<=o?"("+f.toString(s)+")":f.toString(s)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=" "+n[this.conditionals[c]],l+=" "+u[c+1];return l}toJSON(){return{mathjs:Qy,conditionals:this.conditionals,params:this.params}}static fromJSON(s){return new r(s.conditionals,s.params)}_toHTML(s){for(var i=s&&s.parenthesis?s.parenthesis:"keep",o=_n(this,i,s&&s.implicit),u=this.params.map(function(f,d){var h=_n(f,i,s&&s.implicit);return i==="all"||h!==null&&h<=o?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(s)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(s)}),l=u[0],c=0;c<this.conditionals.length;c++)l+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+oi(n[this.conditionals[c]])+"</span>"+u[c+1];return l}_toTex(s){for(var i=s&&s.parenthesis?s.parenthesis:"keep",o=_n(this,i,s&&s.implicit),u=this.params.map(function(f,d){var h=_n(f,i,s&&s.implicit);return i==="all"||h!==null&&h<=o?"\\left("+f.toTex(s)+"\right)":f.toTex(s)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=gn[this.conditionals[c]]+u[c+1];return l}}return Wr(r,"name",Qy),r},{isClass:!0,isNode:!0}),R4e="SymbolNode",M4e=["math","?Unit","Node"],P4e=ee(R4e,M4e,t=>{var{math:e,Unit:n,Node:r}=t;function a(i){return n?n.isValuelessUnit(i):!1}class s extends r{constructor(o){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');this.name=o}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(o,u){var l=this.name;if(u[l]===!0)return function(f,d,h){return Ha(d,l)};if(l in o)return function(f,d,h){return f.has(l)?f.get(l):Ha(o,l)};var c=a(l);return function(f,d,h){return f.has(l)?f.get(l):c?new n(null,l):s.onUndefinedSymbol(l)}}forEach(o){}map(o){return this.clone()}static onUndefinedSymbol(o){throw new Error("Undefined symbol "+o)}clone(){return new s(this.name)}_toString(o){return this.name}_toHTML(o){var u=oi(this.name);return u==="true"||u==="false"?'<span class="math-symbol math-boolean">'+u+"</span>":u==="i"?'<span class="math-symbol math-imaginary-symbol">'+u+"</span>":u==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+u+"</span>":u==="NaN"?'<span class="math-symbol math-nan-symbol">'+u+"</span>":u==="null"?'<span class="math-symbol math-null-symbol">'+u+"</span>":u==="undefined"?'<span class="math-symbol math-undefined-symbol">'+u+"</span>":'<span class="math-symbol">'+u+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(o){return new s(o.name)}_toTex(o){var u=!1;typeof e[this.name]>"u"&&a(this.name)&&(u=!0);var l=qV(this.name,u);return l[0]==="\\"?l:" "+l}}return s},{isClass:!0,isNode:!0}),Jy="FunctionNode",B4e=["math","Node","SymbolNode"],L4e=ee(Jy,B4e,t=>{var e,{math:n,Node:r,SymbolNode:a}=t,s=u=>Qt(u,{truncate:78});function i(u,l,c){for(var f="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,h=0,m;(m=d.exec(u))!==null;)if(f+=u.substring(h,m.index),h=m.index,m[0]==="$$")f+="$",h++;else{h+=m[0].length;var v=l[m[1]];if(!v)throw new ReferenceError("Template: Property "+m[1]+" does not exist.");if(m[2]===void 0)switch(typeof v){case"string":f+=v;break;case"object":if($n(v))f+=v.toTex(c);else if(Array.isArray(v))f+=v.map(function(y,b){if($n(y))return y.toTex(c);throw new TypeError("Template: "+m[1]+"["+b+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes")}else if($n(v[m[2]]&&v[m[2]]))f+=v[m[2]].toTex(c);else throw new TypeError("Template: "+m[1]+"["+m[2]+"] is not a Node.")}return f+=u.slice(h),f}class o extends r{constructor(l,c){if(super(),typeof l=="string"&&(l=new a(l)),!$n(l))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every($n))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=l,this.args=c||[]}get name(){return this.fn.name||""}get type(){return Jy}get isFunctionNode(){return!0}_compile(l,c){var f=this.args.map(I=>I._compile(l,c));if(ea(this.fn)){var d=this.fn.name;if(c[d]){var b=this.args;return function(D,k,A){var O=Ha(k,d);if(typeof O!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(s(O)));if(O.rawArgs)return O(b,l,Eh(D,k));var B=f.map(z=>z(D,k,A));return O.apply(O,B)}}else{var h=d in l?Ha(l,d):void 0,m=typeof h=="function"&&h.rawArgs===!0,v=I=>{var D;if(I.has(d))D=I.get(d);else if(d in l)D=Ha(l,d);else return o.onUndefinedFunction(d);if(typeof D=="function")return D;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(s(D)))};if(m){var y=this.args;return function(D,k,A){var O=v(D);if(O.rawArgs===!0)return O(y,l,Eh(D,k));var B=f.map(z=>z(D,k,A));return O(...B)}}else switch(f.length){case 0:return function(D,k,A){var O=v(D);return O()};case 1:return function(D,k,A){var O=v(D),B=f[0];return O(B(D,k,A))};case 2:return function(D,k,A){var O=v(D),B=f[0],z=f[1];return O(B(D,k,A),z(D,k,A))};default:return function(D,k,A){var O=v(D),B=f.map(z=>z(D,k,A));return O(...B)}}}}else if(Lc(this.fn)&&fp(this.fn.index)&&this.fn.index.isObjectProperty()){var x=this.fn.object._compile(l,c),w=this.fn.index.getObjectProperty(),N=this.args;return function(D,k,A){var O=x(D,k,A),B=mAe(O,w);if(B!=null&&B.rawArgs)return B(N,l,Eh(D,k));var z=f.map(L=>L(D,k,A));return B.apply(O,z)}}else{var C=this.fn.toString(),E=this.fn._compile(l,c),$=this.args;return function(D,k,A){var O=E(D,k,A);if(typeof O!="function")throw new TypeError("Expression '".concat(C,"' did not evaluate to a function; value is:")+`
  `.concat(s(O)));if(O.rawArgs)return O($,l,Eh(D,k));var B=f.map(z=>z(D,k,A));return O.apply(O,B)}}}forEach(l){l(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)l(this.args[c],"args["+c+"]",this)}map(l){for(var c=this._ifNode(l(this.fn,"fn",this)),f=[],d=0;d<this.args.length;d++)f[d]=this._ifNode(l(this.args[d],"args["+d+"]",this));return new o(c,f)}clone(){return new o(this.fn,this.args.slice(0))}toString(l){var c,f=this.fn.toString(l);return l&&typeof l.handler=="object"&&pt(l.handler,f)&&(c=l.handler[f](this,l)),typeof c<"u"?c:super.toString(l)}_toString(l){var c=this.args.map(function(d){return d.toString(l)}),f=Fg(this.fn)?"("+this.fn.toString(l)+")":this.fn.toString(l);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:Jy,fn:this.fn,args:this.args}}_toHTML(l){var c=this.args.map(function(f){return f.toHTML(l)});return'<span class="math-function">'+oi(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(l){var c;return l&&typeof l.handler=="object"&&pt(l.handler,this.name)&&(c=l.handler[this.name](this,l)),typeof c<"u"?c:super.toTex(l)}_toTex(l){var c=this.args.map(function(h){return h.toTex(l)}),f;yP[this.name]&&(f=yP[this.name]),n[this.name]&&(typeof n[this.name].toTex=="function"||typeof n[this.name].toTex=="object"||typeof n[this.name].toTex=="string")&&(f=n[this.name].toTex);var d;switch(typeof f){case"function":d=f(this,l);break;case"string":d=i(f,this,l);break;case"object":switch(typeof f[c.length]){case"function":d=f[c.length](this,l);break;case"string":d=i(f[c.length],this,l);break}}return typeof d<"u"?d:i(y4e,this,l)}getIdentifier(){return this.type+":"+this.name}}return e=o,Wr(o,"name",Jy),Wr(o,"onUndefinedFunction",function(u){throw new Error("Undefined function "+u)}),Wr(o,"fromJSON",function(u){return new e(u.fn,u.args)}),o},{isClass:!0,isNode:!0}),wP="parse",z4e=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],W4e=ee(wP,z4e,t=>{var{typed:e,numeric:n,config:r,AccessorNode:a,ArrayNode:s,AssignmentNode:i,BlockNode:o,ConditionalNode:u,ConstantNode:l,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:d,ObjectNode:h,OperatorNode:m,ParenthesisNode:v,RangeNode:y,RelationalNode:b,SymbolNode:x}=t,w=e(wP,{string:function(fe){return V(fe,{})},"Array | Matrix":function(fe){return N(fe,{})},"string, Object":function(fe,Ie){var qe=Ie.nodes!==void 0?Ie.nodes:{};return V(fe,qe)},"Array | Matrix, Object":N});function N(U){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ie=fe.nodes!==void 0?fe.nodes:{};return qt(U,function(qe){if(typeof qe!="string")throw new TypeError("String expected");return V(qe,Ie)})}var C={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},E={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},$={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},I={true:!0,false:!1,null:null,undefined:void 0},D=["NaN","Infinity"],k={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function A(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:C.NULL,nestingLevel:0,conditionalLevel:null}}function O(U,fe){return U.expression.substr(U.index,fe)}function B(U){return O(U,1)}function z(U){U.index++}function L(U){return U.expression.charAt(U.index-1)}function F(U){return U.expression.charAt(U.index+1)}function R(U){for(U.tokenType=C.NULL,U.token="",U.comment="";;){if(B(U)==="#")for(;B(U)!==`
`&&B(U)!=="";)U.comment+=B(U),z(U);if(w.isWhitespace(B(U),U.nestingLevel))z(U);else break}if(B(U)===""){U.tokenType=C.DELIMITER;return}if(B(U)===`
`&&!U.nestingLevel){U.tokenType=C.DELIMITER,U.token=B(U),z(U);return}var fe=B(U),Ie=O(U,2),qe=O(U,3);if(qe.length===3&&E[qe]){U.tokenType=C.DELIMITER,U.token=qe,z(U),z(U),z(U);return}if(Ie.length===2&&E[Ie]){U.tokenType=C.DELIMITER,U.token=Ie,z(U),z(U);return}if(E[fe]){U.tokenType=C.DELIMITER,U.token=fe,z(U);return}if(w.isDigitDot(fe)){U.tokenType=C.NUMBER;var At=O(U,2);if(At==="0b"||At==="0o"||At==="0x"){for(U.token+=B(U),z(U),U.token+=B(U),z(U);w.isHexDigit(B(U));)U.token+=B(U),z(U);if(B(U)===".")for(U.token+=".",z(U);w.isHexDigit(B(U));)U.token+=B(U),z(U);else if(B(U)==="i")for(U.token+="i",z(U);w.isDigit(B(U));)U.token+=B(U),z(U);return}if(B(U)==="."){if(U.token+=B(U),z(U),!w.isDigit(B(U))){U.tokenType=C.DELIMITER;return}}else{for(;w.isDigit(B(U));)U.token+=B(U),z(U);w.isDecimalMark(B(U),F(U))&&(U.token+=B(U),z(U))}for(;w.isDigit(B(U));)U.token+=B(U),z(U);if(B(U)==="E"||B(U)==="e"){if(w.isDigit(F(U))||F(U)==="-"||F(U)==="+"){if(U.token+=B(U),z(U),(B(U)==="+"||B(U)==="-")&&(U.token+=B(U),z(U)),!w.isDigit(B(U)))throw Nt(U,'Digit expected, got "'+B(U)+'"');for(;w.isDigit(B(U));)U.token+=B(U),z(U);if(w.isDecimalMark(B(U),F(U)))throw Nt(U,'Digit expected, got "'+B(U)+'"')}else if(F(U)===".")throw z(U),Nt(U,'Digit expected, got "'+B(U)+'"')}return}if(w.isAlpha(B(U),L(U),F(U))){for(;w.isAlpha(B(U),L(U),F(U))||w.isDigit(B(U));)U.token+=B(U),z(U);pt($,U.token)?U.tokenType=C.DELIMITER:U.tokenType=C.SYMBOL;return}for(U.tokenType=C.UNKNOWN;B(U)!=="";)U.token+=B(U),z(U);throw Nt(U,'Syntax error in part "'+U.token+'"')}function q(U){do R(U);while(U.token===`
`)}function M(U){U.nestingLevel++}function G(U){U.nestingLevel--}w.isAlpha=function(fe,Ie,qe){return w.isValidLatinOrGreek(fe)||w.isValidMathSymbol(fe,qe)||w.isValidMathSymbol(Ie,fe)},w.isValidLatinOrGreek=function(fe){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(fe)},w.isValidMathSymbol=function(fe,Ie){return/^[\uD835]$/.test(fe)&&/^[\uDC00-\uDFFF]$/.test(Ie)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(Ie)},w.isWhitespace=function(fe,Ie){return fe===" "||fe==="	"||fe===`
`&&Ie>0},w.isDecimalMark=function(fe,Ie){return fe==="."&&Ie!=="/"&&Ie!=="*"&&Ie!=="^"},w.isDigitDot=function(fe){return fe>="0"&&fe<="9"||fe==="."},w.isDigit=function(fe){return fe>="0"&&fe<="9"},w.isHexDigit=function(fe){return fe>="0"&&fe<="9"||fe>="a"&&fe<="f"||fe>="A"&&fe<="F"};function V(U,fe){var Ie=A();Br(Ie,{expression:U,extraNodes:fe}),R(Ie);var qe=H(Ie);if(Ie.token!=="")throw Ie.tokenType===C.DELIMITER?Cn(Ie,"Unexpected operator "+Ie.token):Nt(Ie,'Unexpected part "'+Ie.token+'"');return qe}function H(U){var fe,Ie=[],qe;for(U.token!==""&&U.token!==`
`&&U.token!==";"&&(fe=j(U),U.comment&&(fe.comment=U.comment));U.token===`
`||U.token===";";)Ie.length===0&&fe&&(qe=U.token!==";",Ie.push({node:fe,visible:qe})),R(U),U.token!==`
`&&U.token!==";"&&U.token!==""&&(fe=j(U),U.comment&&(fe.comment=U.comment),qe=U.token!==";",Ie.push({node:fe,visible:qe}));return Ie.length>0?new o(Ie):(fe||(fe=new l(void 0),U.comment&&(fe.comment=U.comment)),fe)}function j(U){var fe,Ie,qe,At,kt=ne(U);if(U.token==="="){if(ea(kt))return fe=kt.name,q(U),qe=j(U),new i(new x(fe),qe);if(Lc(kt))return q(U),qe=j(U),new i(kt.object,kt.index,qe);if(ml(kt)&&ea(kt.fn)&&(At=!0,Ie=[],fe=kt.name,kt.args.forEach(function(lr,pf){ea(lr)?Ie[pf]=lr.name:At=!1}),At))return q(U),qe=j(U),new c(fe,Ie,qe);throw Nt(U,"Invalid left hand side of assignment operator =")}return kt}function ne(U){for(var fe=ue(U);U.token==="?";){var Ie=U.conditionalLevel;U.conditionalLevel=U.nestingLevel,q(U);var qe=fe,At=j(U);if(U.token!==":")throw Nt(U,"False part of conditional expression expected");U.conditionalLevel=null,q(U);var kt=j(U);fe=new u(qe,At,kt),U.conditionalLevel=Ie}return fe}function ue(U){for(var fe=te(U);U.token==="or";)q(U),fe=new m("or","or",[fe,te(U)]);return fe}function te(U){for(var fe=ie(U);U.token==="xor";)q(U),fe=new m("xor","xor",[fe,ie(U)]);return fe}function ie(U){for(var fe=Z(U);U.token==="and";)q(U),fe=new m("and","and",[fe,Z(U)]);return fe}function Z(U){for(var fe=X(U);U.token==="|";)q(U),fe=new m("|","bitOr",[fe,X(U)]);return fe}function X(U){for(var fe=ae(U);U.token==="^|";)q(U),fe=new m("^|","bitXor",[fe,ae(U)]);return fe}function ae(U){for(var fe=pe(U);U.token==="&";)q(U),fe=new m("&","bitAnd",[fe,pe(U)]);return fe}function pe(U){for(var fe=[he(U)],Ie=[],qe={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};pt(qe,U.token);){var At={name:U.token,fn:qe[U.token]};Ie.push(At),q(U),fe.push(he(U))}return fe.length===1?fe[0]:fe.length===2?new m(Ie[0].name,Ie[0].fn,fe):new b(Ie.map(kt=>kt.fn),fe)}function he(U){var fe,Ie,qe,At;fe=Ne(U);for(var kt={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};pt(kt,U.token);)Ie=U.token,qe=kt[Ie],q(U),At=[fe,Ne(U)],fe=new m(Ie,qe,At);return fe}function Ne(U){var fe,Ie,qe,At;fe=Ee(U);for(var kt={to:"to",in:"to"};pt(kt,U.token);)Ie=U.token,qe=kt[Ie],q(U),Ie==="in"&&U.token===""?fe=new m("*","multiply",[fe,new x("in")],!0):(At=[fe,Ee(U)],fe=new m(Ie,qe,At));return fe}function Ee(U){var fe,Ie=[];if(U.token===":"?fe=new l(1):fe=Q(U),U.token===":"&&U.conditionalLevel!==U.nestingLevel){for(Ie.push(fe);U.token===":"&&Ie.length<3;)q(U),U.token===")"||U.token==="]"||U.token===","||U.token===""?Ie.push(new x("end")):Ie.push(Q(U));Ie.length===3?fe=new y(Ie[0],Ie[2],Ie[1]):fe=new y(Ie[0],Ie[1])}return fe}function Q(U){var fe,Ie,qe,At;fe=se(U);for(var kt={"+":"add","-":"subtract"};pt(kt,U.token);){Ie=U.token,qe=kt[Ie],q(U);var lr=se(U);lr.isPercentage?At=[fe,new m("*","multiply",[fe,lr])]:At=[fe,lr],fe=new m(Ie,qe,At)}return fe}function se(U){var fe,Ie,qe,At;fe=ve(U),Ie=fe;for(var kt={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};pt(kt,U.token);)if(qe=U.token,At=kt[qe],q(U),qe==="%"&&U.tokenType===C.DELIMITER&&U.token!=="(")if(U.token!==""&&kt[U.token]){var lr=new m("/","divide",[fe,new l(100)],!1,!0);qe=U.token,At=kt[qe],q(U),Ie=ve(U),fe=new m(qe,At,[lr,Ie])}else fe=new m("/","divide",[fe,new l(100)],!1,!0);else Ie=ve(U),fe=new m(qe,At,[fe,Ie]);return fe}function ve(U){var fe,Ie;for(fe=xe(U),Ie=fe;U.tokenType===C.SYMBOL||U.token==="in"&&cn(fe)||U.token==="in"&&br(fe)&&fe.fn==="unaryMinus"&&cn(fe.args[0])||U.tokenType===C.NUMBER&&!cn(Ie)&&(!br(Ie)||Ie.op==="!")||U.token==="(";)Ie=xe(U),fe=new m("*","multiply",[fe,Ie],!0);return fe}function xe(U){for(var fe=Re(U),Ie=fe,qe=[];U.token==="/"&&zC(Ie);)if(qe.push(Br({},U)),q(U),U.tokenType===C.NUMBER)if(qe.push(Br({},U)),q(U),U.tokenType===C.SYMBOL||U.token==="("||U.token==="in")Br(U,qe.pop()),qe.pop(),Ie=Re(U),fe=new m("/","divide",[fe,Ie]);else{qe.pop(),Br(U,qe.pop());break}else{Br(U,qe.pop());break}return fe}function Re(U){var fe,Ie,qe,At={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return pt(At,U.token)?(qe=At[U.token],fe=U.token,q(U),Ie=[Re(U)],new m(fe,qe,Ie)):Me(U)}function Me(U){var fe,Ie,qe,At;return fe=He(U),(U.token==="^"||U.token===".^")&&(Ie=U.token,qe=Ie==="^"?"pow":"dotPow",q(U),At=[fe,Re(U)],fe=new m(Ie,qe,At)),fe}function He(U){var fe,Ie,qe,At;fe=Je(U);for(var kt={"!":"factorial","'":"ctranspose"};pt(kt,U.token);)Ie=U.token,qe=kt[Ie],R(U),At=[fe],fe=new m(Ie,qe,At),fe=ce(U,fe);return fe}function Je(U){var fe=[];if(U.tokenType===C.SYMBOL&&pt(U.extraNodes,U.token)){var Ie=U.extraNodes[U.token];if(R(U),U.token==="("){if(fe=[],M(U),R(U),U.token!==")")for(fe.push(j(U));U.token===",";)R(U),fe.push(j(U));if(U.token!==")")throw Nt(U,"Parenthesis ) expected");G(U),R(U)}return new Ie(fe)}return re(U)}function re(U){var fe,Ie;return U.tokenType===C.SYMBOL||U.tokenType===C.DELIMITER&&U.token in $?(Ie=U.token,R(U),pt(I,Ie)?fe=new l(I[Ie]):D.includes(Ie)?fe=new l(n(Ie,"number")):fe=new x(Ie),fe=ce(U,fe),fe):Ce(U)}function ce(U,fe,Ie){for(var qe;(U.token==="("||U.token==="["||U.token===".")&&!Ie;)if(qe=[],U.token==="(")if(ea(fe)||Lc(fe)){if(M(U),R(U),U.token!==")")for(qe.push(j(U));U.token===",";)R(U),qe.push(j(U));if(U.token!==")")throw Nt(U,"Parenthesis ) expected");G(U),R(U),fe=new f(fe,qe)}else return fe;else if(U.token==="["){if(M(U),R(U),U.token!=="]")for(qe.push(j(U));U.token===",";)R(U),qe.push(j(U));if(U.token!=="]")throw Nt(U,"Parenthesis ] expected");G(U),R(U),fe=new a(fe,new d(qe))}else{R(U);var At=U.tokenType===C.SYMBOL||U.tokenType===C.DELIMITER&&U.token in $;if(!At)throw Nt(U,"Property name expected after dot");qe.push(new l(U.token)),R(U);var kt=!0;fe=new a(fe,new d(qe,kt))}return fe}function Ce(U){var fe,Ie;return U.token==='"'||U.token==="'"?(Ie=Ae(U,U.token),fe=new l(Ie),fe=ce(U,fe),fe):Le(U)}function Ae(U,fe){for(var Ie="";B(U)!==""&&B(U)!==fe;)if(B(U)==="\\"){z(U);var qe=B(U),At=k[qe];if(At!==void 0)Ie+=At,U.index+=1;else if(qe==="u"){var kt=U.expression.slice(U.index+1,U.index+5);if(/^[0-9A-Fa-f]{4}$/.test(kt))Ie+=String.fromCharCode(parseInt(kt,16)),U.index+=5;else throw Nt(U,"Invalid unicode character \\u".concat(kt))}else throw Nt(U,"Bad escape character \\".concat(qe))}else Ie+=B(U),z(U);if(R(U),U.token!==fe)throw Nt(U,"End of string ".concat(fe," expected"));return R(U),Ie}function Le(U){var fe,Ie,qe,At;if(U.token==="["){if(M(U),R(U),U.token!=="]"){var kt=Pe(U);if(U.token===";"){for(qe=1,Ie=[kt];U.token===";";)R(U),U.token!=="]"&&(Ie[qe]=Pe(U),qe++);if(U.token!=="]")throw Nt(U,"End of matrix ] expected");G(U),R(U),At=Ie[0].items.length;for(var lr=1;lr<qe;lr++)if(Ie[lr].items.length!==At)throw Cn(U,"Column dimensions mismatch ("+Ie[lr].items.length+" !== "+At+")");fe=new s(Ie)}else{if(U.token!=="]")throw Nt(U,"End of matrix ] expected");G(U),R(U),fe=kt}}else G(U),R(U),fe=new s([]);return ce(U,fe)}return Ze(U)}function Pe(U){for(var fe=[j(U)],Ie=1;U.token===",";)R(U),U.token!=="]"&&U.token!==";"&&(fe[Ie]=j(U),Ie++);return new s(fe)}function Ze(U){if(U.token==="{"){M(U);var fe,Ie={};do if(R(U),U.token!=="}"){if(U.token==='"'||U.token==="'")fe=Ae(U,U.token);else if(U.tokenType===C.SYMBOL||U.tokenType===C.DELIMITER&&U.token in $)fe=U.token,R(U);else throw Nt(U,"Symbol or string expected as object key");if(U.token!==":")throw Nt(U,"Colon : expected after object key");R(U),Ie[fe]=j(U)}while(U.token===",");if(U.token!=="}")throw Nt(U,"Comma , or bracket } expected after object value");G(U),R(U);var qe=new h(Ie);return qe=ce(U,qe),qe}return je(U)}function je(U){var fe;if(U.tokenType===C.NUMBER){fe=U.token,R(U);var Ie=Il(fe,r),qe=n(fe,Ie);return new l(qe)}return tt(U)}function tt(U){var fe;if(U.token==="("){if(M(U),R(U),fe=j(U),U.token!==")")throw Nt(U,"Parenthesis ) expected");return G(U),R(U),fe=new v(fe),fe=ce(U,fe),fe}return Qe(U)}function Qe(U){throw U.token===""?Nt(U,"Unexpected end of expression"):Nt(U,"Value expected")}function Xt(U){return U.index-U.token.length+1}function Nt(U,fe){var Ie=Xt(U),qe=new SyntaxError(fe+" (char "+Ie+")");return qe.char=Ie,qe}function Cn(U,fe){var Ie=Xt(U),qe=new SyntaxError(fe+" (char "+Ie+")");return qe.char=Ie,qe}return e.addConversion({from:"string",to:"Node",convert:w}),w}),xP="compile",U4e=["typed","parse"],q4e=ee(xP,U4e,t=>{var{typed:e,parse:n}=t;return e(xP,{string:function(a){return n(a).compile()},"Array | Matrix":function(a){return qt(a,function(s){return n(s).compile()})}})}),SP="evaluate",V4e=["typed","parse"],j4e=ee(SP,V4e,t=>{var{typed:e,parse:n}=t;return e(SP,{string:function(a){var s=nm();return n(a).compile().evaluate(s)},"string, Map | Object":function(a,s){return n(a).compile().evaluate(s)},"Array | Matrix":function(a){var s=nm();return qt(a,function(i){return n(i).compile().evaluate(s)})},"Array | Matrix, Map | Object":function(a,s){return qt(a,function(i){return n(i).compile().evaluate(s)})}})}),H4e="Parser",G4e=["evaluate","parse"],K4e=ee(H4e,G4e,t=>{var{evaluate:e,parse:n}=t;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:nm(),writable:!1})}r.prototype.type="Parser",r.prototype.isParser=!0,r.prototype.evaluate=function(s){return e(s,this.scope)},r.prototype.get=function(s){if(this.scope.has(s))return this.scope.get(s)},r.prototype.getAll=function(){return bAe(this.scope)},r.prototype.getAllAsMap=function(){return this.scope};function a(s){if(s.length===0)return!1;for(var i=0;i<s.length;i++){var o=s.charAt(i-1),u=s.charAt(i),l=s.charAt(i+1),c=n.isAlpha(u,o,l)||i>0&&n.isDigit(u);if(!c)return!1}return!0}return r.prototype.set=function(s,i){if(!a(s))throw new Error("Invalid variable name: '".concat(s,"'. Variable names must follow the specified rules."));return this.scope.set(s,i),i},r.prototype.remove=function(s){this.scope.delete(s)},r.prototype.clear=function(){this.scope.clear()},r},{isClass:!0}),NP="parser",X4e=["typed","Parser"],Y4e=ee(NP,X4e,t=>{var{typed:e,Parser:n}=t;return e(NP,{"":function(){return new n}})}),CP="lup",Q4e=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],J4e=ee(CP,Q4e,t=>{var{typed:e,matrix:n,abs:r,addScalar:a,divideScalar:s,multiplyScalar:i,subtractScalar:o,larger:u,equalScalar:l,unaryMinus:c,DenseMatrix:f,SparseMatrix:d,Spa:h}=t;return e(CP,{DenseMatrix:function(b){return m(b)},SparseMatrix:function(b){return v(b)},Array:function(b){var x=n(b),w=m(x);return{L:w.L.valueOf(),U:w.U.valueOf(),p:w.p}}});function m(y){var b=y._size[0],x=y._size[1],w=Math.min(b,x),N=Wt(y._data),C=[],E=[b,w],$=[],I=[w,x],D,k,A,O=[];for(D=0;D<b;D++)O[D]=D;for(k=0;k<x;k++){if(k>0)for(D=0;D<b;D++){var B=Math.min(D,k),z=0;for(A=0;A<B;A++)z=a(z,i(N[D][A],N[A][k]));N[D][k]=o(N[D][k],z)}var L=k,F=0,R=0;for(D=k;D<b;D++){var q=N[D][k],M=r(q);u(M,F)&&(L=D,F=M,R=q)}if(k!==L&&(O[k]=[O[L],O[L]=O[k]][0],f._swapRows(k,L,N)),k<b)for(D=k+1;D<b;D++){var G=N[D][k];l(G,0)||(N[D][k]=s(N[D][k],R))}}for(k=0;k<x;k++)for(D=0;D<b;D++){if(k===0&&(D<x&&($[D]=[]),C[D]=[]),D<k){D<x&&($[D][k]=N[D][k]),k<b&&(C[D][k]=0);continue}if(D===k){D<x&&($[D][k]=N[D][k]),k<b&&(C[D][k]=1);continue}D<x&&($[D][k]=0),k<b&&(C[D][k]=N[D][k])}var V=new f({data:C,size:E}),H=new f({data:$,size:I}),j=[];for(D=0,w=O.length;D<w;D++)j[O[D]]=D;return{L:V,U:H,p:j,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function v(y){var b=y._size[0],x=y._size[1],w=Math.min(b,x),N=y._values,C=y._index,E=y._ptr,$=[],I=[],D=[],k=[b,w],A=[],O=[],B=[],z=[w,x],L,F,R,q=[],M=[];for(L=0;L<b;L++)q[L]=L,M[L]=L;var G=function(j,ne){var ue=M[j],te=M[ne];q[ue]=ne,q[te]=j,M[j]=te,M[ne]=ue},V=function(){var j=new h;F<b&&(D.push($.length),$.push(1),I.push(F)),B.push(A.length);var ne=E[F],ue=E[F+1];for(R=ne;R<ue;R++)L=C[R],j.set(q[L],N[R]);F>0&&j.forEach(0,F-1,function(X,ae){d._forEachRow(X,$,I,D,function(pe,he){pe>X&&j.accumulate(pe,c(i(he,ae)))})});var te=F,ie=j.get(F),Z=r(ie);j.forEach(F+1,b-1,function(X,ae){var pe=r(ae);u(pe,Z)&&(te=X,Z=pe,ie=ae)}),F!==te&&(d._swapRows(F,te,k[1],$,I,D),d._swapRows(F,te,z[1],A,O,B),j.swap(F,te),G(F,te)),j.forEach(0,b-1,function(X,ae){X<=F?(A.push(ae),O.push(X)):(ae=s(ae,ie),l(ae,0)||($.push(ae),I.push(X)))})};for(F=0;F<x;F++)V();return B.push(A.length),D.push($.length),{L:new d({values:$,index:I,ptr:D,size:k}),U:new d({values:A,index:O,ptr:B,size:z}),p:q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),EP="qr",Z4e=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],eBe=ee(EP,Z4e,t=>{var{typed:e,matrix:n,zeros:r,identity:a,isZero:s,equal:i,sign:o,sqrt:u,conj:l,unaryMinus:c,addScalar:f,divideScalar:d,multiplyScalar:h,subtractScalar:m,complex:v}=t;return Br(e(EP,{DenseMatrix:function(N){return b(N)},SparseMatrix:function(N){return x()},Array:function(N){var C=n(N),E=b(C);return{Q:E.Q.valueOf(),R:E.R.valueOf()}}}),{_denseQRimpl:y});function y(w){var N=w._size[0],C=w._size[1],E=a([N],"dense"),$=E._data,I=w.clone(),D=I._data,k,A,O,B=r([N],"");for(O=0;O<Math.min(C,N);++O){var z=D[O][O],L=c(i(z,0)?1:o(z)),F=l(L),R=0;for(k=O;k<N;k++)R=f(R,h(D[k][O],l(D[k][O])));var q=h(L,u(R));if(!s(q)){var M=m(z,q);for(B[O]=1,k=O+1;k<N;k++)B[k]=d(D[k][O],M);var G=c(l(d(M,q))),V=void 0;for(A=O;A<C;A++){for(V=0,k=O;k<N;k++)V=f(V,h(l(B[k]),D[k][A]));for(V=h(V,G),k=O;k<N;k++)D[k][A]=h(m(D[k][A],h(B[k],V)),F)}for(k=0;k<N;k++){for(V=0,A=O;A<N;A++)V=f(V,h($[k][A],B[A]));for(V=h(V,G),A=O;A<N;++A)$[k][A]=d(m($[k][A],h(V,l(B[A]))),F)}}}return{Q:E,R:I,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function b(w){var N=y(w),C=N.R._data;if(w._data.length>0)for(var E=C[0][0].type==="Complex"?v(0):0,$=0;$<C.length;++$)for(var I=0;I<$&&I<(C[0]||[]).length;++I)C[$][I]=E;return N}function x(w){throw new Error("qr not implemented for sparse matrices yet")}});function tBe(t,e,n,r){t._values;for(var a=t._index,s=t._ptr,i=t._size,o=t._datatype,u=i[0],l=i[1],c=null,f=[],d=[],h=0,m=0;m<l;m++){d[m]=h;for(var v=n?n[m]:m,y=s[v],b=s[v+1],x=y;x<b;x++){var w=a[x];f[h]=w,h++}}return d[l]=h,t.createSparseMatrix({values:c,index:f,ptr:d,size:[u,l],datatype:o})}function VV(t,e,n,r,a,s,i){var o=0;for(n[i]=t;o>=0;){var u=n[i+o],l=n[r+u];l===-1?(o--,s[e++]=u):(n[r+u]=n[a+l],++o,n[i+o]=l)}return e}function nBe(t,e){if(!t)return null;var n=0,r,a=[],s=[],i=0,o=e,u=2*e;for(r=0;r<e;r++)s[i+r]=-1;for(r=e-1;r>=0;r--)t[r]!==-1&&(s[o+r]=s[i+t[r]],s[i+t[r]]=r);for(r=0;r<e;r++)t[r]===-1&&(n=VV(r,n,s,i,o,a,u));return a}function rBe(t,e){if(!t)return null;var n=t._index,r=t._ptr,a=t._size,s=a[0],i=a[1],o=[],u=[],l=0,c=i,f,d;for(f=0;f<s;f++)u[c+f]=-1;for(var h=0;h<i;h++){o[h]=-1,u[l+h]=-1;for(var m=r[h],v=r[h+1],y=m;y<v;y++){var b=n[y];for(f=u[c+b];f!==-1&&f<h;f=d)d=u[l+f],u[l+f]=h,d===-1&&(o[f]=h);u[c+b]=h}}return o}function aBe(t,e,n){for(var r=t._values,a=t._index,s=t._ptr,i=t._size,o=i[1],u=0,l=0;l<o;l++){var c=s[l];for(s[l]=u;c<s[l+1];c++)e(a[c],l,r?r[c]:1,n)&&(a[u]=a[c],r&&(r[u]=r[c]),u++)}return s[o]=u,a.splice(u,a.length-u),r&&r.splice(u,r.length-u),u}function Wu(t){return-t-2}var sBe="csAmd",iBe=["add","multiply","transpose"],oBe=ee(sBe,iBe,t=>{var{add:e,multiply:n,transpose:r}=t;return function(c,f){if(!f||c<=0||c>3)return null;var d=f._size,h=d[0],m=d[1],v=0,y=Math.max(16,10*Math.sqrt(m));y=Math.min(m-2,y);var b=a(c,f,h,m,y);aBe(b,u,null);for(var x=b._index,w=b._ptr,N=w[m],C=[],E=[],$=0,I=m+1,D=2*(m+1),k=3*(m+1),A=4*(m+1),O=5*(m+1),B=6*(m+1),z=7*(m+1),L=C,F=s(m,w,E,$,k,L,D,z,I,B,A,O),R=i(m,w,E,O,A,B,y,I,k,L,D),q=0,M,G,V,H,j,ne,ue,te,ie,Z,X,ae,pe,he,Ne,Ee;R<m;){for(V=-1;q<m&&(V=E[k+q])===-1;q++);E[D+V]!==-1&&(L[E[D+V]]=-1),E[k+q]=E[D+V];var Q=E[A+V],se=E[I+V];R+=se;var ve=0;E[I+V]=-se;var xe=w[V],Re=Q===0?xe:N,Me=Re;for(H=1;H<=Q+1;H++){for(H>Q?(ne=V,ue=xe,te=E[$+V]-Q):(ne=x[xe++],ue=w[ne],te=E[$+ne]),j=1;j<=te;j++)M=x[ue++],!((ie=E[I+M])<=0)&&(ve+=ie,E[I+M]=-ie,x[Me++]=M,E[D+M]!==-1&&(L[E[D+M]]=L[M]),L[M]!==-1?E[D+L[M]]=E[D+M]:E[k+E[O+M]]=E[D+M]);ne!==V&&(w[ne]=Wu(V),E[B+ne]=0)}for(Q!==0&&(N=Me),E[O+V]=ve,w[V]=Re,E[$+V]=Me-Re,E[A+V]=-2,F=o(F,v,E,B,m),Z=Re;Z<Me;Z++)if(M=x[Z],!((X=E[A+M])<=0)){ie=-E[I+M];var He=F-ie;for(xe=w[M],ae=w[M]+X-1;xe<=ae;xe++)ne=x[xe],E[B+ne]>=F?E[B+ne]-=ie:E[B+ne]!==0&&(E[B+ne]=E[O+ne]+He)}for(Z=Re;Z<Me;Z++){for(M=x[Z],ae=w[M],pe=ae+E[A+M]-1,he=ae,Ne=0,Ee=0,xe=ae;xe<=pe;xe++)if(ne=x[xe],E[B+ne]!==0){var Je=E[B+ne]-F;Je>0?(Ee+=Je,x[he++]=ne,Ne+=ne):(w[ne]=Wu(V),E[B+ne]=0)}E[A+M]=he-ae+1;var re=he,ce=ae+E[$+M];for(xe=pe+1;xe<ce;xe++){G=x[xe];var Ce=E[I+G];Ce<=0||(Ee+=Ce,x[he++]=G,Ne+=G)}Ee===0?(w[M]=Wu(V),ie=-E[I+M],ve-=ie,se+=ie,R+=ie,E[I+M]=0,E[A+M]=-1):(E[O+M]=Math.min(E[O+M],Ee),x[he]=x[re],x[re]=x[ae],x[ae]=V,E[$+M]=he-ae+1,Ne=(Ne<0?-Ne:Ne)%m,E[D+M]=E[z+Ne],E[z+Ne]=M,L[M]=Ne)}for(E[O+V]=ve,v=Math.max(v,ve),F=o(F+v,v,E,B,m),Z=Re;Z<Me;Z++)if(M=x[Z],!(E[I+M]>=0))for(Ne=L[M],M=E[z+Ne],E[z+Ne]=-1;M!==-1&&E[D+M]!==-1;M=E[D+M],F++){for(te=E[$+M],X=E[A+M],xe=w[M]+1;xe<=w[M]+te-1;xe++)E[B+x[xe]]=F;var Ae=M;for(G=E[D+M];G!==-1;){var Le=E[$+G]===te&&E[A+G]===X;for(xe=w[G]+1;Le&&xe<=w[G]+te-1;xe++)E[B+x[xe]]!==F&&(Le=0);Le?(w[G]=Wu(M),E[I+M]+=E[I+G],E[I+G]=0,E[A+G]=-1,G=E[D+G],E[D+Ae]=G):(Ae=G,G=E[D+G])}}for(xe=Re,Z=Re;Z<Me;Z++)M=x[Z],!((ie=-E[I+M])<=0)&&(E[I+M]=ie,Ee=E[O+M]+ve-ie,Ee=Math.min(Ee,m-R-ie),E[k+Ee]!==-1&&(L[E[k+Ee]]=M),E[D+M]=E[k+Ee],L[M]=-1,E[k+Ee]=M,q=Math.min(q,Ee),E[O+M]=Ee,x[xe++]=M);E[I+V]=se,(E[$+V]=xe-Re)===0&&(w[V]=-1,E[B+V]=0),Q!==0&&(N=xe)}for(M=0;M<m;M++)w[M]=Wu(w[M]);for(G=0;G<=m;G++)E[k+G]=-1;for(G=m;G>=0;G--)E[I+G]>0||(E[D+G]=E[k+w[G]],E[k+w[G]]=G);for(ne=m;ne>=0;ne--)E[I+ne]<=0||w[ne]!==-1&&(E[D+ne]=E[k+w[ne]],E[k+w[ne]]=ne);for(V=0,M=0;M<=m;M++)w[M]===-1&&(V=VV(M,V,E,k,D,C,B));return C.splice(C.length-1,1),C};function a(l,c,f,d,h){var m=r(c);if(l===1&&d===f)return e(c,m);if(l===2){for(var v=m._index,y=m._ptr,b=0,x=0;x<f;x++){var w=y[x];if(y[x]=b,!(y[x+1]-w>h))for(var N=y[x+1];w<N;w++)v[b++]=v[w]}return y[f]=b,c=r(m),n(m,c)}return n(m,c)}function s(l,c,f,d,h,m,v,y,b,x,w,N){for(var C=0;C<l;C++)f[d+C]=c[C+1]-c[C];f[d+l]=0;for(var E=0;E<=l;E++)f[h+E]=-1,m[E]=-1,f[v+E]=-1,f[y+E]=-1,f[b+E]=1,f[x+E]=1,f[w+E]=0,f[N+E]=f[d+E];var $=o(0,0,f,x,l);return f[w+l]=-2,c[l]=-1,f[x+l]=0,$}function i(l,c,f,d,h,m,v,y,b,x,w){for(var N=0,C=0;C<l;C++){var E=f[d+C];if(E===0)f[h+C]=-2,N++,c[C]=-1,f[m+C]=0;else if(E>v)f[y+C]=0,f[h+C]=-1,N++,c[C]=Wu(l),f[y+l]++;else{var $=f[b+E];$!==-1&&(x[$]=C),f[w+C]=f[b+E],f[b+E]=C}}return N}function o(l,c,f,d,h){if(l<2||l+c<0){for(var m=0;m<h;m++)f[d+m]!==0&&(f[d+m]=1);l=2}return l}function u(l,c){return l!==c}});function uBe(t,e,n,r,a,s,i){var o,u,l=0,c;if(t<=e||n[r+e]<=n[a+t])return-1;n[a+t]=n[r+e];var f=n[s+t];if(n[s+t]=e,f===-1)l=1,c=t;else{for(l=2,c=f;c!==n[i+c];c=n[i+c]);for(o=f;o!==c;o=u)u=n[i+o],n[i+o]=c}return{jleaf:l,q:c}}var lBe="csCounts",cBe=["transpose"],fBe=ee(lBe,cBe,t=>{var{transpose:e}=t;return function(n,r,a,s){if(!n||!r||!a)return null;var i=n._size,o=i[0],u=i[1],l,c,f,d,h,m,v,y=4*u+(s?u+o+1:0),b=[],x=0,w=u,N=2*u,C=3*u,E=4*u,$=5*u+1;for(f=0;f<y;f++)b[f]=-1;var I=[],D=e(n),k=D._index,A=D._ptr;for(f=0;f<u;f++)for(c=a[f],I[c]=b[C+c]===-1?1:0;c!==-1&&b[C+c]===-1;c=r[c])b[C+c]=f;if(s){for(f=0;f<u;f++)b[a[f]]=f;for(l=0;l<o;l++){for(f=u,m=A[l],v=A[l+1],h=m;h<v;h++)f=Math.min(f,b[k[h]]);b[$+l]=b[E+f],b[E+f]=l}}for(l=0;l<u;l++)b[x+l]=l;for(f=0;f<u;f++){for(c=a[f],r[c]!==-1&&I[r[c]]--,d=s?b[E+f]:c;d!==-1;d=s?b[$+d]:-1)for(h=A[d];h<A[d+1];h++){l=k[h];var O=uBe(l,c,b,C,w,N,x);O.jleaf>=1&&I[c]++,O.jleaf===2&&I[O.q]--}r[c]!==-1&&(b[x+c]=r[c])}for(c=0;c<u;c++)r[c]!==-1&&(I[r[c]]+=I[c]);return I}}),dBe="csSqr",pBe=["add","multiply","transpose"],hBe=ee(dBe,pBe,t=>{var{add:e,multiply:n,transpose:r}=t,a=oBe({add:e,multiply:n,transpose:r}),s=fBe({transpose:r});return function(u,l,c){var f=l._ptr,d=l._size,h=d[1],m,v={};if(v.q=a(u,l),u&&!v.q)return null;if(c){var y=u?tBe(l,null,v.q):l;v.parent=rBe(y);var b=nBe(v.parent,h);if(v.cp=s(y,v.parent,b,1),y&&v.parent&&v.cp&&i(y,v))for(v.unz=0,m=0;m<h;m++)v.unz+=v.cp[m]}else v.unz=4*f[h]+h,v.lnz=v.unz;return v};function i(o,u){var l=o._ptr,c=o._index,f=o._size,d=f[0],h=f[1];u.pinv=[],u.leftmost=[];var m=u.parent,v=u.pinv,y=u.leftmost,b=[],x=0,w=d,N=d+h,C=d+2*h,E,$,I,D,k;for($=0;$<h;$++)b[w+$]=-1,b[N+$]=-1,b[C+$]=0;for(E=0;E<d;E++)y[E]=-1;for($=h-1;$>=0;$--)for(D=l[$],k=l[$+1],I=D;I<k;I++)y[c[I]]=$;for(E=d-1;E>=0;E--)v[E]=-1,$=y[E],$!==-1&&(b[C+$]++===0&&(b[N+$]=E),b[x+E]=b[w+$],b[w+$]=E);for(u.lnz=0,u.m2=d,$=0;$<h;$++)if(E=b[w+$],u.lnz++,E<0&&(E=u.m2++),v[E]=$,!(--C[$]<=0)){u.lnz+=b[C+$];var A=m[$];A!==-1&&(b[C+A]===0&&(b[N+A]=b[N+$]),b[x+b[N+$]]=b[w+A],b[w+A]=b[x+E],b[C+A]+=b[C+$])}for(E=0;E<d;E++)v[E]<0&&(v[E]=$++);return!0}});function sE(t,e){return t[e]<0}function jV(t,e){t[e]=Wu(t[e])}function TP(t){return t<0?Wu(t):t}function mBe(t,e,n,r,a){var s=e._index,i=e._ptr,o=e._size,u=o[1],l,c,f,d=0;for(r[0]=t;d>=0;){t=r[d];var h=a?a[t]:t;sE(i,t)||(jV(i,t),r[u+d]=h<0?0:TP(i[h]));var m=1;for(c=r[u+d],f=h<0?0:TP(i[h+1]);c<f;c++)if(l=s[c],!sE(i,l)){r[u+d]=c,r[++d]=l,m=0;break}m&&(d--,r[--n]=t)}return n}function gBe(t,e,n,r,a){var s=t._ptr,i=t._size,o=e._index,u=e._ptr,l=i[1],c,f,d,h=l;for(f=u[n],d=u[n+1],c=f;c<d;c++){var m=o[c];sE(s,m)||(h=mBe(m,t,h,r,a))}for(c=h;c<l;c++)jV(s,r[c]);return h}var vBe="csSpsolve",yBe=["divideScalar","multiply","subtract"],bBe=ee(vBe,yBe,t=>{var{divideScalar:e,multiply:n,subtract:r}=t;return function(s,i,o,u,l,c,f){var d=s._values,h=s._index,m=s._ptr,v=s._size,y=v[1],b=i._values,x=i._index,w=i._ptr,N,C,E,$,I=gBe(s,i,o,u,c);for(N=I;N<y;N++)l[u[N]]=0;for(C=w[o],E=w[o+1],N=C;N<E;N++)l[x[N]]=b[N];for(var D=I;D<y;D++){var k=u[D],A=c?c[k]:k;if(!(A<0))for(C=m[A],E=m[A+1],l[k]=e(l[k],d[f?C:E-1]),N=f?C+1:C,$=f?E:E-1;N<$;N++){var O=h[N];l[O]=r(l[O],n(d[N],l[k]))}}return I}}),wBe="csLu",xBe=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],SBe=ee(wBe,xBe,t=>{var{abs:e,divideScalar:n,multiply:r,subtract:a,larger:s,largerEq:i,SparseMatrix:o}=t,u=bBe({divideScalar:n,multiply:r,subtract:a});return function(c,f,d){if(!c)return null;var h=c._size,m=h[1],v,y=100,b=100;f&&(v=f.q,y=f.lnz||y,b=f.unz||b);var x=[],w=[],N=[],C=new o({values:x,index:w,ptr:N,size:[m,m]}),E=[],$=[],I=[],D=new o({values:E,index:$,ptr:I,size:[m,m]}),k=[],A,O,B=[],z=[];for(A=0;A<m;A++)B[A]=0,k[A]=-1,N[A+1]=0;y=0,b=0;for(var L=0;L<m;L++){N[L]=y,I[L]=b;var F=v?v[L]:L,R=u(C,c,F,z,B,k,1),q=-1,M=-1;for(O=R;O<m;O++)if(A=z[O],k[A]<0){var G=e(B[A]);s(G,M)&&(M=G,q=A)}else $[b]=k[A],E[b++]=B[A];if(q===-1||M<=0)return null;k[F]<0&&i(e(B[F]),r(M,d))&&(q=F);var V=B[q];for($[b]=L,E[b++]=V,k[q]=L,w[y]=q,x[y++]=1,O=R;O<m;O++)A=z[O],k[A]<0&&(w[y]=A,x[y++]=n(B[A],V)),B[A]=0}for(N[m]=y,I[m]=b,O=0;O<y;O++)w[O]=k[w[O]];return x.splice(y,x.length-y),w.splice(y,w.length-y),E.splice(b,E.length-b),$.splice(b,$.length-b),{L:C,U:D,pinv:k}}}),DP="slu",NBe=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],CBe=ee(DP,NBe,t=>{var{typed:e,abs:n,add:r,multiply:a,transpose:s,divideScalar:i,subtract:o,larger:u,largerEq:l,SparseMatrix:c}=t,f=hBe({add:r,multiply:a,transpose:s}),d=SBe({abs:n,divideScalar:i,multiply:a,subtract:o,larger:u,largerEq:l,SparseMatrix:c});return e(DP,{"SparseMatrix, number, number":function(m,v,y){if(!wt(v)||v<0||v>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(y<0||y>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var b=f(v,m,!1),x=d(m,b,y);return{L:x.L,U:x.U,p:x.pinv,q:b.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function AP(t,e){var n,r=e.length,a=[];if(t)for(n=0;n<r;n++)a[t[n]]=e[n];else for(n=0;n<r;n++)a[n]=e[n];return a}var $P="lusolve",EBe=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],TBe=ee($P,EBe,t=>{var{typed:e,matrix:n,lup:r,slu:a,usolve:s,lsolve:i,DenseMatrix:o}=t,u=Mg({DenseMatrix:o});return e($P,{"Array, Array | Matrix":function(d,h){d=n(d);var m=r(d),v=c(m.L,m.U,m.p,null,h);return v.valueOf()},"DenseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(d,h,m,v){var y=a(d,m,v);return c(y.L,y.U,y.p,y.q,h)},"Object, Array | Matrix":function(d,h){return c(d.L,d.U,d.p,d.q,h)}});function l(f){if($t(f))return f;if(An(f))return n(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,d,h,m,v){f=l(f),d=l(d),h&&(v=u(f,v,!0),v._data=AP(h,v._data));var y=i(f,v),b=s(d,y);return m&&(b._data=AP(m,b._data)),b}}),kP="polynomialRoot",DBe=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],ABe=ee(kP,DBe,t=>{var{typed:e,isZero:n,equalScalar:r,add:a,subtract:s,multiply:i,divide:o,sqrt:u,unaryMinus:l,cbrt:c,typeOf:f,im:d,re:h}=t;return e(kP,{"number|Complex, ...number|Complex":(m,v)=>{for(var y=[m,...v];y.length>0&&n(y[y.length-1]);)y.pop();if(y.length<2)throw new RangeError("Polynomial [".concat(m,", ").concat(v,"] must have a non-zero non-constant coefficient"));switch(y.length){case 2:return[l(o(y[0],y[1]))];case 3:{var[b,x,w]=y,N=i(2,w),C=i(x,x),E=i(4,w,b);if(r(C,E))return[o(l(x),N)];var $=u(s(C,E));return[o(s($,x),N),o(s(l($),x),N)]}case 4:{var[I,D,k,A]=y,O=l(i(3,A)),B=i(k,k),z=i(3,A,D),L=a(i(2,k,k,k),i(27,A,A,I)),F=i(9,A,k,D);if(r(B,z)&&r(L,F))return[o(k,O)];var R=s(B,z),q=s(L,F),M=a(i(18,A,k,D,I),i(k,k,D,D)),G=a(i(4,k,k,k,I),i(4,A,D,D,D),i(27,A,A,I,I));if(r(M,G))return[o(s(i(4,A,k,D),a(i(9,A,A,I),i(k,k,k))),i(A,R)),o(s(i(9,A,I),i(k,D)),i(2,R))];var V;r(B,z)?V=q:V=o(a(q,u(s(i(q,q),i(4,R,R,R)))),2);var H=!0,j=c(V,H).toArray().map(ne=>o(a(k,ne,o(R,ne)),O));return j.map(ne=>f(ne)==="Complex"&&r(h(ne),h(ne)+d(ne))?h(ne):ne)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(y))}}})}),$Be="Help",kBe=["evaluate"],IBe=ee($Be,kBe,t=>{var{evaluate:e}=t;function n(r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!r)throw new Error('Argument "doc" missing');this.doc=r}return n.prototype.type="Help",n.prototype.isHelp=!0,n.prototype.toString=function(){var r=this.doc||{},a=`
`;if(r.name&&(a+="Name: "+r.name+`

`),r.category&&(a+="Category: "+r.category+`

`),r.description&&(a+=`Description:
    `+r.description+`

`),r.syntax&&(a+=`Syntax:
    `+r.syntax.join(`
    `)+`

`),r.examples){a+=`Examples:
`;for(var s=!1,i=e("config()"),o={config:f=>(s=!0,e("config(newConfig)",{newConfig:f}))},u=0;u<r.examples.length;u++){var l=r.examples[u];a+="    "+l+`
`;var c=void 0;try{c=e(l,o)}catch(f){c=f}c!==void 0&&!QU(c)&&(a+="        "+Qt(c,{precision:14})+`
`)}a+=`
`,s&&e("config(originalConfig)",{originalConfig:i})}return r.mayThrow&&r.mayThrow.length&&(a+="Throws: "+r.mayThrow.join(", ")+`

`),r.seealso&&r.seealso.length&&(a+="See also: "+r.seealso.join(", ")+`
`),a},n.prototype.toJSON=function(){var r=Wt(this.doc);return r.mathjs="Help",r},n.fromJSON=function(r){var a={};return Object.keys(r).filter(s=>s!=="mathjs").forEach(s=>{a[s]=r[s]}),new n(a)},n.prototype.valueOf=n.prototype.toString,n},{isClass:!0}),_Be="Chain",OBe=["?on","math","typed"],FBe=ee(_Be,OBe,t=>{var{on:e,math:n,typed:r}=t;function a(l){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");ZU(l)?this.value=l.value:this.value=l}a.prototype.type="Chain",a.prototype.isChain=!0,a.prototype.done=function(){return this.value},a.prototype.valueOf=function(){return this.value},a.prototype.toString=function(){return Qt(this.value)},a.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},a.fromJSON=function(l){return new a(l.value)};function s(l,c){typeof c=="function"&&(a.prototype[l]=o(c))}function i(l,c){FAe(a.prototype,l,function(){var d=c();if(typeof d=="function")return o(d)})}function o(l){return function(){if(arguments.length===0)return new a(l(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(r.isTypedFunction(l)){var d=r.resolve(l,c);if(d.params.length===1)throw new Error("chain function "+l.name+" cannot match rest parameter between chain value and additional arguments.");return new a(d.implementation.apply(l,c))}return new a(l.apply(l,c))}}a.createProxy=function(l,c){if(typeof l=="string")s(l,c);else{var f=function(m){pt(l,m)&&u[m]===void 0&&i(m,()=>l[m])};for(var d in l)f(d)}};var u={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return a.createProxy(n),e&&e("import",function(l,c,f){f||i(l,c)}),a},{isClass:!0}),IP={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},RBe={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},MBe={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},PBe={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},BBe={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},LBe={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},zBe={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},WBe={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},UBe={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},qBe={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},VBe={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},_P={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},jBe={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},HBe={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},GBe={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},KBe={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},XBe={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},YBe={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},QBe={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},JBe={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},ZBe={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},eLe={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},tLe={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},nLe={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},rLe={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},aLe={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},sLe={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},iLe={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},oLe={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},uLe={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},lLe={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},cLe={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},fLe={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},dLe={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},pLe={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},hLe={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},mLe={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},gLe={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},vLe={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},yLe={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},bLe={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},wLe={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},xLe={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},SLe={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},NLe={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},CLe={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},ELe={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},TLe={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},DLe={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},ALe={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},$Le={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},kLe={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},ILe={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},_Le={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},OLe={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},FLe={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},RLe={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},MLe={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},PLe={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},BLe={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},LLe={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},zLe={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},WLe={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},ULe={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},qLe={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},VLe={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},jLe={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},HLe={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},GLe={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},KLe={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},XLe={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},YLe={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},QLe={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},JLe={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},ZLe={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},eze={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},tze={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},nze={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},rze={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},aze={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},sze={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},ize={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},oze={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},uze={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},lze={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},cze={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},fze={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},dze={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},pze={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},hze={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},mze={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},gze={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},vze={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},yze={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},bze={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},wze={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},xze={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},Sze={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},Nze={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},Cze={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},Eze={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},Tze={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},Dze={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},Aze={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},$ze={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},kze={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},Ize={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},_ze={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},Oze={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},Fze={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},Rze={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},Mze={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},Pze={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},Bze={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},Lze={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},zze={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},Wze={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},Uze={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},qze={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Vze={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},jze={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},Hze={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},Gze={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},Kze={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},Xze={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},Yze={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},Qze={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},Jze={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Zze={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},e5e={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},t5e={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},n5e={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},r5e={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},a5e={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},s5e={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},i5e={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},o5e={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},u5e={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},l5e={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},c5e={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},f5e={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},d5e={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},p5e={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},h5e={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},m5e={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},g5e={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},v5e={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},y5e={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},b5e={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},w5e={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},x5e={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},S5e={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},N5e={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},C5e={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},E5e={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},T5e={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},D5e={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},A5e={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},$5e={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},k5e={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},I5e={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},_5e={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},O5e={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},F5e={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},R5e={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},M5e={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},P5e={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},B5e={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},L5e={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},z5e={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},W5e={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},U5e={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},q5e={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},V5e={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},j5e={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},H5e={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},G5e={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},K5e={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},X5e={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},Y5e={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},Q5e={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},J5e={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},Z5e={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},e6e={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},t6e={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},n6e={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},r6e={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},a6e={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},s6e={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},i6e={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},o6e={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},u6e={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},l6e={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},c6e={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},f6e={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},d6e={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},p6e={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},h6e={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},m6e={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},g6e={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},v6e={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},y6e={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},b6e={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},w6e={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},x6e={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},S6e={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},N6e={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},C6e={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},E6e={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},T6e={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},D6e={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},A6e={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},$6e={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},k6e={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},I6e={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},_6e={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},O6e={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},F6e={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},R6e={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},M6e={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},P6e={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},B6e={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},L6e={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},z6e={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},W6e={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},U6e={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},q6e={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},V6e={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},j6e={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},H6e={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},G6e={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},K6e={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},X6e={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},Y6e={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},Q6e={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},J6e={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},Z6e={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},e8e={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},t8e={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},n8e={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},r8e={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},a8e={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},s8e={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},i8e={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},o8e={bignumber:YBe,bigint:QBe,boolean:JBe,complex:ZBe,createUnit:eLe,fraction:tLe,index:nLe,matrix:rLe,number:aLe,sparse:sLe,splitUnit:iLe,string:oLe,unit:uLe,e:IP,E:IP,false:RBe,i:MBe,Infinity:PBe,LN2:LBe,LN10:BBe,LOG2E:WBe,LOG10E:zBe,NaN:UBe,null:qBe,pi:_P,PI:_P,phi:VBe,SQRT1_2:jBe,SQRT2:HBe,tau:GBe,true:KBe,version:XBe,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:dLe,lsolve:hLe,lsolveAll:mLe,lup:gLe,lusolve:vLe,leafCount:pLe,polynomialRoot:yLe,resolve:xLe,simplify:SLe,simplifyConstant:NLe,simplifyCore:CLe,symbolicEqual:TLe,rationalize:wLe,slu:ELe,usolve:DLe,usolveAll:ALe,qr:bLe,abs:$Le,add:kLe,cbrt:ILe,ceil:_Le,cube:OLe,divide:FLe,dotDivide:RLe,dotMultiply:MLe,dotPow:PLe,exp:BLe,expm:LLe,expm1:zLe,fix:WLe,floor:ULe,gcd:qLe,hypot:VLe,lcm:HLe,log:GLe,log2:YLe,log1p:XLe,log10:KLe,mod:QLe,multiply:JLe,norm:ZLe,nthRoot:eze,nthRoots:tze,pow:nze,round:rze,sign:aze,sqrt:sze,sqrtm:ize,square:cze,subtract:fze,unaryMinus:dze,unaryPlus:pze,xgcd:hze,invmod:jLe,bitAnd:mze,bitNot:gze,bitOr:vze,bitXor:yze,leftShift:bze,rightArithShift:wze,rightLogShift:xze,bellNumbers:Sze,catalan:Nze,composition:Cze,stirlingS2:Eze,config:lLe,import:cLe,typed:fLe,arg:Tze,conj:Dze,re:$ze,im:Aze,evaluate:kze,help:Ize,distance:_ze,intersect:Oze,and:Fze,not:Rze,or:Mze,xor:Pze,concat:Lze,count:zze,cross:Wze,column:Bze,ctranspose:Uze,det:qze,diag:Vze,diff:jze,dot:Hze,getMatrixDataType:Qze,identity:Jze,filter:Kze,flatten:Xze,forEach:Yze,inv:Zze,pinv:e5e,eigs:Gze,kron:t5e,matrixFromFunction:a5e,matrixFromRows:s5e,matrixFromColumns:r5e,map:n5e,ones:i5e,partitionSelect:o5e,range:u5e,resize:c5e,reshape:l5e,rotate:f5e,rotationMatrix:d5e,row:p5e,size:h5e,sort:m5e,squeeze:g5e,subset:v5e,trace:y5e,transpose:b5e,zeros:w5e,fft:x5e,ifft:S5e,sylvester:oze,schur:uze,lyap:lze,solveODE:i8e,combinations:N5e,combinationsWithRep:C5e,factorial:E5e,gamma:T5e,kldivergence:A5e,lgamma:D5e,multinomial:$5e,permutations:k5e,pickRandom:I5e,random:_5e,randomInt:O5e,compare:F5e,compareNatural:R5e,compareText:M5e,deepEqual:P5e,equal:B5e,equalText:L5e,larger:z5e,largerEq:W5e,smaller:U5e,smallerEq:q5e,unequal:V5e,setCartesian:j5e,setDifference:H5e,setDistinct:G5e,setIntersect:K5e,setIsSubset:X5e,setMultiplicity:Y5e,setPowerset:Q5e,setSize:J5e,setSymDifference:Z5e,setUnion:e6e,zpk2tf:t6e,freqz:n6e,erf:r6e,zeta:a6e,cumsum:h6e,mad:s6e,max:i6e,mean:o6e,median:u6e,min:l6e,mode:c6e,prod:f6e,quantileSeq:d6e,std:p6e,sum:m6e,variance:g6e,corr:v6e,acos:y6e,acosh:b6e,acot:w6e,acoth:x6e,acsc:S6e,acsch:N6e,asec:C6e,asech:E6e,asin:T6e,asinh:D6e,atan:A6e,atanh:k6e,atan2:$6e,cos:I6e,cosh:_6e,cot:O6e,coth:F6e,csc:R6e,csch:M6e,sec:P6e,sech:B6e,sin:L6e,sinh:z6e,tan:W6e,tanh:U6e,to:q6e,clone:j6e,format:H6e,bin:V6e,oct:r8e,hex:K6e,isNaN:Y6e,isInteger:X6e,isNegative:Q6e,isNumeric:J6e,hasNumericValue:G6e,isPositive:Z6e,isPrime:e8e,isZero:t8e,print:a8e,typeOf:s8e,numeric:n8e},OP="help",u8e=["typed","mathWithTransform","Help"],l8e=ee(OP,u8e,t=>{var{typed:e,mathWithTransform:n,Help:r}=t;return e(OP,{any:function(s){var i,o=s;if(typeof s!="string"){for(i in n)if(pt(n,i)&&s===n[i]){o=i;break}}var u=Ha(o8e,o);if(!u){var l=typeof o=="function"?o.name:o;throw new Error('No documentation found on "'+l+'"')}return new r(u)}})}),FP="chain",c8e=["typed","Chain"],f8e=ee(FP,c8e,t=>{var{typed:e,Chain:n}=t;return e(FP,{"":function(){return new n},any:function(a){return new n(a)}})}),RP="det",d8e=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],p8e=ee(RP,d8e,t=>{var{typed:e,matrix:n,subtractScalar:r,multiply:a,divideScalar:s,isZero:i,unaryMinus:o}=t;return e(RP,{any:function(c){return Wt(c)},"Array | Matrix":function(c){var f;switch($t(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return Wt(c);case 1:if(f[0]===1)return Wt(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Qt(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return u(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+Qt(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Qt(f)+")")}}});function u(l,c,f){if(c===1)return Wt(l[0][0]);if(c===2)return r(a(l[0][0],l[1][1]),a(l[1][0],l[0][1]));for(var d=!1,h=new Array(c).fill(0).map(($,I)=>I),m=0;m<c;m++){var v=h[m];if(i(l[v][m])){var y=void 0;for(y=m+1;y<c;y++)if(!i(l[h[y]][m])){v=h[y],h[y]=h[m],h[m]=v,d=!d;break}if(y===c)return l[v][m]}for(var b=l[v][m],x=m===0?1:l[h[m-1]][m-1],w=m+1;w<c;w++)for(var N=h[w],C=m+1;C<c;C++)l[N][C]=s(r(a(l[N][C],b),a(l[N][m],l[v][C])),x)}var E=l[h[c-1]][c-1];return d?o(E):E}}),MP="inv",h8e=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],m8e=ee(MP,h8e,t=>{var{typed:e,matrix:n,divideScalar:r,addScalar:a,multiply:s,unaryMinus:i,det:o,identity:u,abs:l}=t;return e(MP,{"Array | Matrix":function(d){var h=$t(d)?d.size():Lt(d);switch(h.length){case 1:if(h[0]===1)return $t(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+Qt(h)+")");case 2:{var m=h[0],v=h[1];if(m===v)return $t(d)?n(c(d.valueOf(),m,v),d.storage()):c(d,m,v);throw new RangeError("Matrix must be square (size: "+Qt(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Qt(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var m,v,y,b,x;if(d===1){if(b=f[0][0],b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,b)]]}else if(d===2){var w=o(f);if(w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],w),r(i(f[0][1]),w)],[r(i(f[1][0]),w),r(f[0][0],w)]]}else{var N=f.concat();for(m=0;m<d;m++)N[m]=N[m].concat();for(var C=u(d).valueOf(),E=0;E<h;E++){var $=l(N[E][E]),I=E;for(m=E+1;m<d;)l(N[m][E])>$&&($=l(N[m][E]),I=m),m++;if($===0)throw Error("Cannot calculate inverse, determinant is zero");m=I,m!==E&&(x=N[E],N[E]=N[m],N[m]=x,x=C[E],C[E]=C[m],C[m]=x);var D=N[E],k=C[E];for(m=0;m<d;m++){var A=N[m],O=C[m];if(m!==E){if(A[E]!==0){for(y=r(i(A[E]),D[E]),v=E;v<h;v++)A[v]=a(A[v],s(y,D[v]));for(v=0;v<h;v++)O[v]=a(O[v],s(y,k[v]))}}else{for(y=D[E],v=E;v<h;v++)A[v]=r(A[v],y);for(v=0;v<h;v++)O[v]=r(O[v],y)}}}return C}}}),PP="pinv",g8e=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],v8e=ee(PP,g8e,t=>{var{typed:e,matrix:n,inv:r,deepEqual:a,equal:s,dotDivide:i,dot:o,ctranspose:u,divideScalar:l,multiply:c,add:f,Complex:d}=t;return e(PP,{"Array | Matrix":function(w){var N=$t(w)?w.size():Lt(w);switch(N.length){case 1:return b(w)?u(w):N[0]===1?r(w):i(u(w),o(w,w));case 2:{if(b(w))return u(w);var C=N[0],E=N[1];if(C===E)try{return r(w)}catch($){if(!($ instanceof Error&&$.message.match(/Cannot calculate inverse, determinant is zero/)))throw $}return $t(w)?n(h(w.valueOf(),C,E),w.storage()):h(w,C,E)}default:throw new RangeError("Matrix must be two dimensional (size: "+Qt(N)+")")}},any:function(w){return s(w,0)?Wt(w):l(1,w)}});function h(x,w,N){var{C,F:E}=v(x,w,N),$=c(r(c(u(C),C)),u(C)),I=c(u(E),r(c(E,u(E))));return c(I,$)}function m(x,w,N){for(var C=Wt(x),E=0,$=0;$<w;$++){if(N<=E)return C;for(var I=$;y(C[I][E]);)if(I++,w===I&&(I=$,E++,N===E))return C;[C[I],C[$]]=[C[$],C[I]];for(var D=C[$][E],k=0;k<N;k++)C[$][k]=i(C[$][k],D);for(var A=0;A<w;A++)if(A!==$){D=C[A][E];for(var O=0;O<N;O++)C[A][O]=f(C[A][O],c(-1,c(D,C[$][O])))}E++}return C}function v(x,w,N){var C=m(x,w,N),E=x.map((I,D)=>I.filter((k,A)=>A<w&&!y(o(C[A],C[A])))),$=C.filter((I,D)=>!y(o(C[D],C[D])));return{C:E,F:$}}function y(x){return s(f(x,d(1,1)),f(0,d(1,1)))}function b(x){return a(f(x,d(1,1)),f(c(x,0),d(1,1)))}});function y8e(t){var{addScalar:e,subtract:n,flatten:r,multiply:a,multiplyScalar:s,divideScalar:i,sqrt:o,abs:u,bignumber:l,diag:c,size:f,reshape:d,inv:h,qr:m,usolve:v,usolveAll:y,equal:b,complex:x,larger:w,smaller:N,matrixFromColumns:C,dot:E}=t;function $(H,j,ne,ue){var te=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,ie=I(H,j,ne,ue,te);D(H,j,ne,ue,te,ie);var{values:Z,C:X}=k(H,j,ne,ue,te);if(te){var ae=A(H,j,X,ie,Z,ne,ue);return{values:Z,eigenvectors:ae}}return{values:Z}}function I(H,j,ne,ue,te){var ie=ue==="BigNumber",Z=ue==="Complex",X=ie?l(0):0,ae=ie?l(1):Z?x(1):1,pe=ie?l(1):1,he=ie?l(10):2,Ne=s(he,he),Ee;te&&(Ee=Array(j).fill(ae));for(var Q=!1;!Q;){Q=!0;for(var se=0;se<j;se++){for(var ve=X,xe=X,Re=0;Re<j;Re++)se!==Re&&(ve=e(ve,u(H[Re][se])),xe=e(xe,u(H[se][Re])));if(!b(ve,0)&&!b(xe,0)){for(var Me=pe,He=ve,Je=i(xe,he),re=s(xe,he);N(He,Je);)He=s(He,Ne),Me=s(Me,he);for(;w(He,re);)He=i(He,Ne),Me=i(Me,he);var ce=N(i(e(He,xe),Me),s(e(ve,xe),.95));if(ce){Q=!1;for(var Ce=i(1,Me),Ae=0;Ae<j;Ae++)se!==Ae&&(H[se][Ae]=s(H[se][Ae],Ce),H[Ae][se]=s(H[Ae][se],Me));te&&(Ee[se]=s(Ee[se],Ce))}}}}return te?c(Ee):null}function D(H,j,ne,ue,te,ie){var Z=ue==="BigNumber",X=ue==="Complex",ae=Z?l(0):X?x(0):0;Z&&(ne=l(ne));for(var pe=0;pe<j-2;pe++){for(var he=0,Ne=ae,Ee=pe+1;Ee<j;Ee++){var Q=H[Ee][pe];N(u(Ne),u(Q))&&(Ne=Q,he=Ee)}if(!N(u(Ne),ne)){if(he!==pe+1){var se=H[he];H[he]=H[pe+1],H[pe+1]=se;for(var ve=0;ve<j;ve++){var xe=H[ve][he];H[ve][he]=H[ve][pe+1],H[ve][pe+1]=xe}if(te){var Re=ie[he];ie[he]=ie[pe+1],ie[pe+1]=Re}}for(var Me=pe+2;Me<j;Me++){var He=i(H[Me][pe],Ne);if(He!==0){for(var Je=0;Je<j;Je++)H[Me][Je]=n(H[Me][Je],s(He,H[pe+1][Je]));for(var re=0;re<j;re++)H[re][pe+1]=e(H[re][pe+1],s(He,H[re][Me]));if(te)for(var ce=0;ce<j;ce++)ie[Me][ce]=n(ie[Me][ce],s(He,ie[pe+1][ce]))}}}}return ie}function k(H,j,ne,ue,te){var ie=ue==="BigNumber",Z=ue==="Complex",X=ie?l(1):Z?x(1):1;ie&&(ne=l(ne));for(var ae=Wt(H),pe=[],he=j,Ne=[],Ee=te?c(Array(j).fill(X)):void 0,Q=te?c(Array(he).fill(X)):void 0,se=0;se<=100;){se+=1;for(var ve=ae[he-1][he-1],xe=0;xe<he;xe++)ae[xe][xe]=n(ae[xe][xe],ve);var{Q:Re,R:Me}=m(ae);ae=a(Me,Re);for(var He=0;He<he;He++)ae[He][He]=e(ae[He][He],ve);if(te&&(Q=a(Q,Re)),he===1||N(u(ae[he-1][he-2]),ne)){se=0,pe.push(ae[he-1][he-1]),te&&(Ne.unshift([[1]]),z(Q,j),Ee=a(Ee,Q),he>1&&(Q=c(Array(he-1).fill(X)))),he-=1,ae.pop();for(var Je=0;Je<he;Je++)ae[Je].pop()}else if(he===2||N(u(ae[he-2][he-3]),ne)){se=0;var re=O(ae[he-2][he-2],ae[he-2][he-1],ae[he-1][he-2],ae[he-1][he-1]);pe.push(...re),te&&(Ne.unshift(B(ae[he-2][he-2],ae[he-2][he-1],ae[he-1][he-2],ae[he-1][he-1],re[0],re[1],ne,ue)),z(Q,j),Ee=a(Ee,Q),he>2&&(Q=c(Array(he-2).fill(X)))),he-=2,ae.pop(),ae.pop();for(var ce=0;ce<he;ce++)ae[ce].pop(),ae[ce].pop()}if(he===0)break}if(pe.sort((Le,Pe)=>+n(u(Le),u(Pe))),se>100){var Ce=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+pe.join(", "));throw Ce.values=pe,Ce.vectors=[],Ce}var Ae=te?a(Ee,L(Ne,j)):void 0;return{values:pe,C:Ae}}function A(H,j,ne,ue,te,ie,Z){var X=h(ne),ae=a(X,H,ne),pe=Z==="BigNumber",he=Z==="Complex",Ne=pe?l(0):he?x(0):0,Ee=pe?l(1):he?x(1):1,Q=[],se=[];for(var ve of te){var xe=F(Q,ve,b);xe===-1?(Q.push(ve),se.push(1)):se[xe]+=1}for(var Re=[],Me=Q.length,He=Array(j).fill(Ne),Je=c(Array(j).fill(Ee)),re=function(){var Ae=Q[ce],Le=n(ae,a(Ae,Je)),Pe=y(Le,He);for(Pe.shift();Pe.length<se[ce];){var Ze=R(Le,j,Pe,ie,Z);if(Ze===null)break;Pe.push(Ze)}var je=a(h(ue),ne);Pe=Pe.map(tt=>a(je,tt)),Re.push(...Pe.map(tt=>({value:Ae,vector:r(tt)})))},ce=0;ce<Me;ce++)re();return Re}function O(H,j,ne,ue){var te=e(H,ue),ie=n(s(H,ue),s(j,ne)),Z=s(te,.5),X=s(o(n(s(te,te),s(4,ie))),.5);return[e(Z,X),n(Z,X)]}function B(H,j,ne,ue,te,ie,Z,X){var ae=X==="BigNumber",pe=X==="Complex",he=ae?l(0):pe?x(0):0,Ne=ae?l(1):pe?x(1):1;if(N(u(ne),Z))return[[Ne,he],[he,Ne]];if(w(u(n(te,ie)),Z))return[[n(te,ue),n(ie,ue)],[ne,ne]];var Ee=n(H,te),Q=n(ue,te);return N(u(j),Z)&&N(u(Q),Z)?[[Ee,Ne],[ne,he]]:[[j,he],[Q,Ne]]}function z(H,j){for(var ne=0;ne<H.length;ne++)H[ne].push(...Array(j-H[ne].length).fill(0));for(var ue=H.length;ue<j;ue++)H.push(Array(j).fill(0)),H[ue][ue]=1;return H}function L(H,j){for(var ne=[],ue=0;ue<j;ue++)ne[ue]=Array(j).fill(0);var te=0;for(var ie of H){for(var Z=ie.length,X=0;X<Z;X++)for(var ae=0;ae<Z;ae++)ne[te+X][te+ae]=ie[X][ae];te+=Z}return ne}function F(H,j,ne){for(var ue=0;ue<H.length;ue++)if(ne(H[ue],j))return ue;return-1}function R(H,j,ne,ue,te){for(var ie=te==="BigNumber"?l(1e3):1e3,Z,X=0;X<5;++X){Z=q(j,ne,te);try{Z=v(H,Z)}catch{continue}if(w(G(Z),ie))break}if(X>=5)return null;for(X=0;;){var ae=v(H,Z);if(N(G(M(Z,[ae])),ue))break;if(++X>=10)return null;Z=V(ae)}return Z}function q(H,j,ne){var ue=ne==="BigNumber",te=ne==="Complex",ie=Array(H).fill(0).map(Z=>2*Math.random()-1);return ue&&(ie=ie.map(Z=>l(Z))),te&&(ie=ie.map(Z=>x(Z))),ie=M(ie,j),V(ie,ne)}function M(H,j){var ne=f(H);for(var ue of j)ue=d(ue,ne),H=n(H,a(i(E(ue,H),E(ue,ue)),ue));return H}function G(H){return u(o(E(H,H)))}function V(H,j){var ne=j==="BigNumber",ue=j==="Complex",te=ne?l(1):ue?x(1):1;return a(i(te,G(H)),H)}return $}function b8e(t){var{config:e,addScalar:n,subtract:r,abs:a,atan:s,cos:i,sin:o,multiplyScalar:u,inv:l,bignumber:c,multiply:f,add:d}=t;function h(D,k){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,O=arguments.length>3?arguments[3]:void 0,B=arguments.length>4?arguments[4]:void 0;if(O==="number")return m(D,A,B);if(O==="BigNumber")return v(D,A,B);throw TypeError("Unsupported data type: "+O)}function m(D,k,A){var O=D.length,B=Math.abs(k/O),z,L;if(A){L=new Array(O);for(var F=0;F<O;F++)L[F]=Array(O).fill(0),L[F][F]=1}for(var R=E(D);Math.abs(R[1])>=Math.abs(B);){var q=R[0][0],M=R[0][1];z=y(D[q][q],D[M][M],D[q][M]),D=C(D,z,q,M),A&&(L=x(L,z,q,M)),R=E(D)}for(var G=Array(O).fill(0),V=0;V<O;V++)G[V]=D[V][V];return I(Wt(G),L,A)}function v(D,k,A){var O=D.length,B=a(k/O),z,L;if(A){L=new Array(O);for(var F=0;F<O;F++)L[F]=Array(O).fill(0),L[F][F]=1}for(var R=$(D);a(R[1])>=a(B);){var q=R[0][0],M=R[0][1];z=b(D[q][q],D[M][M],D[q][M]),D=N(D,z,q,M),A&&(L=w(L,z,q,M)),R=$(D)}for(var G=Array(O).fill(0),V=0;V<O;V++)G[V]=D[V][V];return I(Wt(G),L,A)}function y(D,k,A){var O=k-D;return Math.abs(O)<=e.relTol?Math.PI/4:.5*Math.atan(2*A/(k-D))}function b(D,k,A){var O=r(k,D);return a(O)<=e.relTol?c(-1).acos().div(4):u(.5,s(f(2,A,l(O))))}function x(D,k,A,O){for(var B=D.length,z=Math.cos(k),L=Math.sin(k),F=Array(B).fill(0),R=Array(B).fill(0),q=0;q<B;q++)F[q]=z*D[q][A]-L*D[q][O],R[q]=L*D[q][A]+z*D[q][O];for(var M=0;M<B;M++)D[M][A]=F[M],D[M][O]=R[M];return D}function w(D,k,A,O){for(var B=D.length,z=i(k),L=o(k),F=Array(B).fill(c(0)),R=Array(B).fill(c(0)),q=0;q<B;q++)F[q]=r(u(z,D[q][A]),u(L,D[q][O])),R[q]=n(u(L,D[q][A]),u(z,D[q][O]));for(var M=0;M<B;M++)D[M][A]=F[M],D[M][O]=R[M];return D}function N(D,k,A,O){for(var B=D.length,z=c(i(k)),L=c(o(k)),F=u(z,z),R=u(L,L),q=Array(B).fill(c(0)),M=Array(B).fill(c(0)),G=f(c(2),z,L,D[A][O]),V=n(r(u(F,D[A][A]),G),u(R,D[O][O])),H=d(u(R,D[A][A]),G,u(F,D[O][O])),j=0;j<B;j++)q[j]=r(u(z,D[A][j]),u(L,D[O][j])),M[j]=n(u(L,D[A][j]),u(z,D[O][j]));D[A][A]=V,D[O][O]=H,D[A][O]=c(0),D[O][A]=c(0);for(var ne=0;ne<B;ne++)ne!==A&&ne!==O&&(D[A][ne]=q[ne],D[ne][A]=q[ne],D[O][ne]=M[ne],D[ne][O]=M[ne]);return D}function C(D,k,A,O){for(var B=D.length,z=Math.cos(k),L=Math.sin(k),F=z*z,R=L*L,q=Array(B).fill(0),M=Array(B).fill(0),G=F*D[A][A]-2*z*L*D[A][O]+R*D[O][O],V=R*D[A][A]+2*z*L*D[A][O]+F*D[O][O],H=0;H<B;H++)q[H]=z*D[A][H]-L*D[O][H],M[H]=L*D[A][H]+z*D[O][H];D[A][A]=G,D[O][O]=V,D[A][O]=0,D[O][A]=0;for(var j=0;j<B;j++)j!==A&&j!==O&&(D[A][j]=q[j],D[j][A]=q[j],D[O][j]=M[j],D[j][O]=M[j]);return D}function E(D){for(var k=D.length,A=0,O=[0,1],B=0;B<k;B++)for(var z=B+1;z<k;z++)Math.abs(A)<Math.abs(D[B][z])&&(A=Math.abs(D[B][z]),O=[B,z]);return[O,A]}function $(D){for(var k=D.length,A=0,O=[0,1],B=0;B<k;B++)for(var z=B+1;z<k;z++)a(A)<a(D[B][z])&&(A=a(D[B][z]),O=[B,z]);return[O,A]}function I(D,k,A){var O=D.length,B=Array(O),z;if(A){z=Array(O);for(var L=0;L<O;L++)z[L]=Array(O)}for(var F=0;F<O;F++){for(var R=0,q=D[0],M=0;M<D.length;M++)a(D[M])<a(q)&&(R=M,q=D[R]);if(B[F]=D.splice(R,1)[0],A)for(var G=0;G<O;G++)z[F][G]=k[G][R],k[G].splice(R,1)}if(!A)return{values:B};var V=z.map((H,j)=>({value:B[j],vector:H}));return{values:B,eigenvectors:V}}return h}var w8e="eigs",x8e=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],S8e=ee(w8e,x8e,t=>{var{config:e,typed:n,matrix:r,addScalar:a,subtract:s,equal:i,abs:o,atan:u,cos:l,sin:c,multiplyScalar:f,divideScalar:d,inv:h,bignumber:m,multiply:v,add:y,larger:b,column:x,flatten:w,number:N,complex:C,sqrt:E,diag:$,size:I,reshape:D,qr:k,usolve:A,usolveAll:O,im:B,re:z,smaller:L,matrixFromColumns:F,dot:R}=t,q=b8e({config:e,addScalar:a,subtract:s,column:x,flatten:w,equal:i,abs:o,atan:u,cos:l,sin:c,multiplyScalar:f,inv:h,bignumber:m,complex:C,multiply:v,add:y}),M=y8e({config:e,addScalar:a,subtract:s,multiply:v,multiplyScalar:f,flatten:w,divideScalar:d,sqrt:E,abs:o,bignumber:m,diag:$,size:I,reshape:D,qr:k,inv:h,usolve:A,usolveAll:O,equal:i,complex:C,larger:b,smaller:L,matrixFromColumns:F,dot:R});return n("eigs",{Array:function(ie){return G(r(ie))},"Array, number|BigNumber":function(ie,Z){return G(r(ie),{precision:Z})},"Array, Object"(te,ie){return G(r(te),ie)},Matrix:function(ie){return G(ie,{matricize:!0})},"Matrix, number|BigNumber":function(ie,Z){return G(ie,{precision:Z,matricize:!0})},"Matrix, Object":function(ie,Z){var X={matricize:!0};return Br(X,Z),G(ie,X)}});function G(te){var ie,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X="eigenvectors"in Z?Z.eigenvectors:!0,ae=(ie=Z.precision)!==null&&ie!==void 0?ie:e.relTol,pe=V(te,ae,X);return Z.matricize&&(pe.values=r(pe.values),X&&(pe.eigenvectors=pe.eigenvectors.map(he=>{var{value:Ne,vector:Ee}=he;return{value:Ne,vector:r(Ee)}}))),X&&Object.defineProperty(pe,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),pe}function V(te,ie,Z){var X=te.toArray(),ae=te.size();if(ae.length!==2||ae[0]!==ae[1])throw new RangeError("Matrix must be square (size: ".concat(Qt(ae),")"));var pe=ae[0];if(j(X,pe,ie)&&(ne(X,pe),H(X,pe,ie))){var he=ue(te,X,pe);return q(X,pe,ie,he,Z)}var Ne=ue(te,X,pe);return M(X,pe,ie,Ne,Z)}function H(te,ie,Z){for(var X=0;X<ie;X++)for(var ae=X;ae<ie;ae++)if(b(m(o(s(te[X][ae],te[ae][X]))),Z))return!1;return!0}function j(te,ie,Z){for(var X=0;X<ie;X++)for(var ae=0;ae<ie;ae++)if(b(m(o(B(te[X][ae]))),Z))return!1;return!0}function ne(te,ie){for(var Z=0;Z<ie;Z++)for(var X=0;X<ie;X++)te[Z][X]=z(te[Z][X])}function ue(te,ie,Z){var X=te.datatype();if(X==="number"||X==="BigNumber"||X==="Complex")return X;for(var ae=!1,pe=!1,he=!1,Ne=0;Ne<Z;Ne++)for(var Ee=0;Ee<Z;Ee++){var Q=ie[Ne][Ee];if(jt(Q)||Og(Q))ae=!0;else if(Gt(Q))pe=!0;else if(eu(Q))he=!0;else throw TypeError("Unsupported type in Matrix: "+Ln(Q))}if(pe&&he&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),he){for(var se=0;se<Z;se++)for(var ve=0;ve<Z;ve++)ie[se][ve]=C(ie[se][ve]);return"Complex"}if(pe){for(var xe=0;xe<Z;xe++)for(var Re=0;Re<Z;Re++)ie[xe][Re]=m(ie[xe][Re]);return"BigNumber"}if(ae){for(var Me=0;Me<Z;Me++)for(var He=0;He<Z;He++)ie[Me][He]=N(ie[Me][He]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),BP="expm",N8e=["typed","abs","add","identity","inv","multiply"],C8e=ee(BP,N8e,t=>{var{typed:e,abs:n,add:r,identity:a,inv:s,multiply:i}=t;return e(BP,{Matrix:function(f){var d=f.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+Qt(d)+")");for(var h=d[0],m=1e-15,v=o(f),y=u(v,m),b=y.q,x=y.j,w=i(f,Math.pow(2,-x)),N=a(h),C=a(h),E=1,$=w,I=-1,D=1;D<=b;D++)D>1&&($=i($,w),I=-I),E=E*(b-D+1)/((2*b-D+1)*D),N=r(N,i(E,$)),C=r(C,i(E*I,$));for(var k=i(s(C),N),A=0;A<x;A++)k=i(k,k);return vc(f)?f.createSparseMatrix(k):k}});function o(c){for(var f=c.size()[0],d=0,h=0;h<f;h++){for(var m=0,v=0;v<f;v++)m+=n(c.get([h,v]));d=Math.max(m,d)}return d}function u(c,f){for(var d=30,h=0;h<d;h++)for(var m=0;m<=h;m++){var v=h-m;if(l(c,m,v)<f)return{q:m,j:v}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function l(c,f,d){for(var h=1,m=2;m<=f;m++)h*=m;for(var v=h,y=f+1;y<=2*f;y++)v*=y;var b=v*(2*f+1);return 8*Math.pow(c/Math.pow(2,d),2*f)*h*h/(v*b)}}),LP="sqrtm",E8e=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],T8e=ee(LP,E8e,t=>{var{typed:e,abs:n,add:r,multiply:a,map:s,sqrt:i,subtract:o,inv:u,size:l,max:c,identity:f}=t,d=1e3,h=1e-6;function m(v){var y,b=0,x=v,w=f(l(v));do{var N=x;if(x=a(.5,r(N,u(w))),w=a(.5,r(w,u(N))),y=c(n(o(x,N))),y>h&&++b>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(y>h);return x}return e(LP,{"Array | Matrix":function(y){var b=$t(y)?y.size():Lt(y);switch(b.length){case 1:if(b[0]===1)return s(y,i);throw new RangeError("Matrix must be square (size: "+Qt(b)+")");case 2:{var x=b[0],w=b[1];if(x===w)return m(y);throw new RangeError("Matrix must be square (size: "+Qt(b)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+Qt(b)+")")}}})}),zP="sylvester",D8e=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],A8e=ee(zP,D8e,t=>{var{typed:e,schur:n,matrixFromColumns:r,matrix:a,multiply:s,range:i,concat:o,transpose:u,index:l,subset:c,add:f,subtract:d,identity:h,lusolve:m,abs:v}=t;return e(zP,{"Matrix, Matrix, Matrix":y,"Array, Matrix, Matrix":function(x,w,N){return y(a(x),w,N)},"Array, Array, Matrix":function(x,w,N){return y(a(x),a(w),N)},"Array, Matrix, Array":function(x,w,N){return y(a(x),w,a(N))},"Matrix, Array, Matrix":function(x,w,N){return y(x,a(w),N)},"Matrix, Array, Array":function(x,w,N){return y(x,a(w),a(N))},"Matrix, Matrix, Array":function(x,w,N){return y(x,w,a(N))},"Array, Array, Array":function(x,w,N){return y(a(x),a(w),a(N)).toArray()}});function y(b,x,w){for(var N=x.size()[0],C=b.size()[0],E=n(b),$=E.T,I=E.U,D=n(s(-1,x)),k=D.T,A=D.U,O=s(s(u(I),w),A),B=i(0,C),z=[],L=(he,Ne)=>o(he,Ne,1),F=(he,Ne)=>o(he,Ne,0),R=0;R<N;R++)if(R<N-1&&v(c(k,l(R+1,R)))>1e-5){for(var q=F(c(O,l(B,R)),c(O,l(B,R+1))),M=0;M<R;M++)q=f(q,F(s(z[M],c(k,l(M,R))),s(z[M],c(k,l(M,R+1)))));var G=s(h(C),s(-1,c(k,l(R,R)))),V=s(h(C),s(-1,c(k,l(R+1,R)))),H=s(h(C),s(-1,c(k,l(R,R+1)))),j=s(h(C),s(-1,c(k,l(R+1,R+1)))),ne=F(L(f($,G),V),L(H,f($,j))),ue=m(ne,q);z[R]=ue.subset(l(i(0,C),0)),z[R+1]=ue.subset(l(i(C,2*C),0)),R++}else{for(var te=c(O,l(B,R)),ie=0;ie<R;ie++)te=f(te,s(z[ie],c(k,l(ie,R))));var Z=c(k,l(R,R)),X=d($,s(Z,h(C)));z[R]=m(X,te)}var ae=a(r(...z)),pe=s(I,s(ae,u(A)));return pe}}),WP="schur",$8e=["typed","matrix","identity","multiply","qr","norm","subtract"],k8e=ee(WP,$8e,t=>{var{typed:e,matrix:n,identity:r,multiply:a,qr:s,norm:i,subtract:o}=t;return e(WP,{Array:function(c){var f=u(n(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return u(c)}});function u(l){var c=l.size()[0],f=l,d=r(c),h=0,m;do{m=f;var v=s(f),y=v.Q,b=v.R;if(f=a(b,y),d=a(d,y),h++>100)break}while(i(o(f,m))>1e-4);return{U:d,T:f}}}),UP="lyap",I8e=["typed","matrix","sylvester","multiply","transpose"],_8e=ee(UP,I8e,t=>{var{typed:e,matrix:n,sylvester:r,multiply:a,transpose:s}=t;return e(UP,{"Matrix, Matrix":function(o,u){return r(o,s(o),a(-1,u))},"Array, Matrix":function(o,u){return r(n(o),s(n(o)),a(-1,u))},"Matrix, Array":function(o,u){return r(o,s(n(o)),n(a(-1,u)))},"Array, Array":function(o,u){return r(n(o),s(n(o)),n(a(-1,u))).toArray()}})}),O8e="divide",F8e=["typed","matrix","multiply","equalScalar","divideScalar","inv"],R8e=ee(O8e,F8e,t=>{var{typed:e,matrix:n,multiply:r,equalScalar:a,divideScalar:s,inv:i}=t,o=ba({typed:e,equalScalar:a}),u=Qi({typed:e});return e("divide",eq({"Array | Matrix, Array | Matrix":function(c,f){return r(c,i(f))},"DenseMatrix, any":function(c,f){return u(c,f,s,!1)},"SparseMatrix, any":function(c,f){return o(c,f,s,!1)},"Array, any":function(c,f){return u(n(c),f,s,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,i(f))}},s.signatures))}),qP="distance",M8e=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],P8e=ee(qP,M8e,t=>{var{typed:e,addScalar:n,subtractScalar:r,multiplyScalar:a,divideScalar:s,deepEqual:i,sqrt:o,abs:u}=t;return e(qP,{"Array, Array, Array":function(C,E,$){if(C.length===2&&E.length===2&&$.length===2){if(!c(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c($))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(i(E,$))throw new TypeError("LinePoint1 should not be same with LinePoint2");var I=r($[1],E[1]),D=r(E[0],$[0]),k=r(a($[0],E[1]),a(E[0],$[1]));return y(C[0],C[1],I,D,k)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(C,E,$){if(Object.keys(C).length===2&&Object.keys(E).length===2&&Object.keys($).length===2){if(!c(C))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(E))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c($))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(i(m(E),m($)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in C&&"pointY"in C&&"lineOnePtX"in E&&"lineOnePtY"in E&&"lineTwoPtX"in $&&"lineTwoPtY"in $){var I=r($.lineTwoPtY,E.lineOnePtY),D=r(E.lineOnePtX,$.lineTwoPtX),k=r(a($.lineTwoPtX,E.lineOnePtY),a(E.lineOnePtX,$.lineTwoPtY));return y(C.pointX,C.pointY,I,D,k)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(C,E){if(C.length===2&&E.length===3){if(!c(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(E))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return y(C[0],C[1],E[0],E[1],E[2])}else if(C.length===3&&E.length===6){if(!f(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!h(E))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return b(C[0],C[1],C[2],E[0],E[1],E[2],E[3],E[4],E[5])}else if(C.length===E.length&&C.length>0){if(!d(C))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(E))throw new TypeError("All values of an array should be numbers or BigNumbers");return x(C,E)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(C,E){if(Object.keys(C).length===2&&Object.keys(E).length===3){if(!c(C))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(E))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in C&&"pointY"in C&&"xCoeffLine"in E&&"yCoeffLine"in E&&"constant"in E)return y(C.pointX,C.pointY,E.xCoeffLine,E.yCoeffLine,E.constant);throw new TypeError("Key names do not match")}else if(Object.keys(C).length===3&&Object.keys(E).length===6){if(!f(C))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!h(E))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in C&&"pointY"in C&&"x0"in E&&"y0"in E&&"z0"in E&&"a"in E&&"b"in E&&"c"in E)return b(C.pointX,C.pointY,C.pointZ,E.x0,E.y0,E.z0,E.a,E.b,E.c);throw new TypeError("Key names do not match")}else if(Object.keys(C).length===2&&Object.keys(E).length===2){if(!c(C))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(E))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in C&&"pointOneY"in C&&"pointTwoX"in E&&"pointTwoY"in E)return x([C.pointOneX,C.pointOneY],[E.pointTwoX,E.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(C).length===3&&Object.keys(E).length===3){if(!f(C))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(E))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in C&&"pointOneY"in C&&"pointOneZ"in C&&"pointTwoX"in E&&"pointTwoY"in E&&"pointTwoZ"in E)return x([C.pointOneX,C.pointOneY,C.pointOneZ],[E.pointTwoX,E.pointTwoY,E.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(C){if(!v(C))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return w(C)}});function l(N){return typeof N=="number"||Gt(N)}function c(N){return N.constructor!==Array&&(N=m(N)),l(N[0])&&l(N[1])}function f(N){return N.constructor!==Array&&(N=m(N)),l(N[0])&&l(N[1])&&l(N[2])}function d(N){return Array.isArray(N)||(N=m(N)),N.every(l)}function h(N){return N.constructor!==Array&&(N=m(N)),l(N[0])&&l(N[1])&&l(N[2])&&l(N[3])&&l(N[4])&&l(N[5])}function m(N){for(var C=Object.keys(N),E=[],$=0;$<C.length;$++)E.push(N[C[$]]);return E}function v(N){if(N[0].length===2&&l(N[0][0])&&l(N[0][1])){if(N.some(C=>C.length!==2||!l(C[0])||!l(C[1])))return!1}else if(N[0].length===3&&l(N[0][0])&&l(N[0][1])&&l(N[0][2])){if(N.some(C=>C.length!==3||!l(C[0])||!l(C[1])||!l(C[2])))return!1}else return!1;return!0}function y(N,C,E,$,I){var D=u(n(n(a(E,N),a($,C)),I)),k=o(n(a(E,E),a($,$)));return s(D,k)}function b(N,C,E,$,I,D,k,A,O){var B=[r(a(r(I,C),O),a(r(D,E),A)),r(a(r(D,E),k),a(r($,N),O)),r(a(r($,N),A),a(r(I,C),k))];B=o(n(n(a(B[0],B[0]),a(B[1],B[1])),a(B[2],B[2])));var z=o(n(n(a(k,k),a(A,A)),a(O,O)));return s(B,z)}function x(N,C){for(var E=N.length,$=0,I=0,D=0;D<E;D++)I=r(N[D],C[D]),$=n(a(I,I),$);return o($)}function w(N){for(var C=[],E=[],$=[],I=0;I<N.length-1;I++)for(var D=I+1;D<N.length;D++)N[0].length===2?(E=[N[I][0],N[I][1]],$=[N[D][0],N[D][1]]):N[0].length===3&&(E=[N[I][0],N[I][1],N[I][2]],$=[N[D][0],N[D][1],N[D][2]]),C.push(x(E,$));return C}}),B8e="intersect",L8e=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],z8e=ee(B8e,L8e,t=>{var{typed:e,config:n,abs:r,add:a,addScalar:s,matrix:i,multiply:o,multiplyScalar:u,divideScalar:l,subtract:c,smaller:f,equalScalar:d,flatten:h,isZero:m,isNumeric:v}=t;return e("intersect",{"Array, Array, Array":y,"Array, Array, Array, Array":b,"Matrix, Matrix, Matrix":function(A,O,B){var z=y(A.valueOf(),O.valueOf(),B.valueOf());return z===null?null:i(z)},"Matrix, Matrix, Matrix, Matrix":function(A,O,B,z){var L=b(A.valueOf(),O.valueOf(),B.valueOf(),z.valueOf());return L===null?null:i(L)}});function y(k,A,O){if(k=x(k),A=x(A),O=x(O),!N(k))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!N(A))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!C(O))throw new TypeError("Array with 4 numbers expected as third argument");return D(k[0],k[1],k[2],A[0],A[1],A[2],O[0],O[1],O[2],O[3])}function b(k,A,O,B){if(k=x(k),A=x(A),O=x(O),B=x(B),k.length===2){if(!w(k))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!w(A))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!w(O))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!w(B))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return E(k,A,O,B)}else if(k.length===3){if(!N(k))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!N(A))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!N(O))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!N(B))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return I(k[0],k[1],k[2],A[0],A[1],A[2],O[0],O[1],O[2],B[0],B[1],B[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function x(k){return k.length===1?k[0]:k.length>1&&Array.isArray(k[0])&&k.every(A=>Array.isArray(A)&&A.length===1)?h(k):k}function w(k){return k.length===2&&v(k[0])&&v(k[1])}function N(k){return k.length===3&&v(k[0])&&v(k[1])&&v(k[2])}function C(k){return k.length===4&&v(k[0])&&v(k[1])&&v(k[2])&&v(k[3])}function E(k,A,O,B){var z=k,L=O,F=c(z,A),R=c(L,B),q=c(u(F[0],R[1]),u(R[0],F[1]));if(m(q)||f(r(q),n.relTol))return null;var M=u(R[0],z[1]),G=u(R[1],z[0]),V=u(R[0],L[1]),H=u(R[1],L[0]),j=l(s(c(c(M,G),V),H),q);return a(o(F,j),z)}function $(k,A,O,B,z,L,F,R,q,M,G,V){var H=u(c(k,A),c(O,B)),j=u(c(z,L),c(F,R)),ne=u(c(q,M),c(G,V));return s(s(H,j),ne)}function I(k,A,O,B,z,L,F,R,q,M,G,V){var H=$(k,F,M,F,A,R,G,R,O,q,V,q),j=$(M,F,B,k,G,R,z,A,V,q,L,O),ne=$(k,F,B,k,A,R,z,A,O,q,L,O),ue=$(M,F,M,F,G,R,G,R,V,q,V,q),te=$(B,k,B,k,z,A,z,A,L,O,L,O),ie=c(u(H,j),u(ne,ue)),Z=c(u(te,ue),u(j,j));if(m(Z))return null;var X=l(ie,Z),ae=l(s(H,u(X,j)),ue),pe=s(k,u(X,c(B,k))),he=s(A,u(X,c(z,A))),Ne=s(O,u(X,c(L,O))),Ee=s(F,u(ae,c(M,F))),Q=s(R,u(ae,c(G,R))),se=s(q,u(ae,c(V,q)));return d(pe,Ee)&&d(he,Q)&&d(Ne,se)?[pe,he,Ne]:null}function D(k,A,O,B,z,L,F,R,q,M){var G=u(k,F),V=u(B,F),H=u(A,R),j=u(z,R),ne=u(O,q),ue=u(L,q),te=c(c(c(M,G),H),ne),ie=c(c(c(s(s(V,j),ue),G),H),ne),Z=l(te,ie),X=s(k,u(Z,c(B,k))),ae=s(A,u(Z,c(z,A))),pe=s(O,u(Z,c(L,O)));return[X,ae,pe]}}),VP="sum",W8e=["typed","config","add","numeric"],HV=ee(VP,W8e,t=>{var{typed:e,config:n,add:r,numeric:a}=t;return e(VP,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":i,"...":function(u){if(dp(u))throw new TypeError("Scalar values expected in function sum");return s(u)}});function s(o){var u;return fu(o,function(l){try{u=u===void 0?l:r(u,l)}catch(c){throw Qa(c,"sum",l)}}),u===void 0&&(u=a(0,n.number)),typeof u=="string"&&(u=a(u,Il(u,n))),u}function i(o,u){try{var l=Ww(o,u,r);return l}catch(c){throw Qa(c,"sum")}}}),Zy="cumsum",U8e=["typed","add","unaryPlus"],GV=ee(Zy,U8e,t=>{var{typed:e,add:n,unaryPlus:r}=t;return e(Zy,{Array:a,Matrix:function(l){return l.create(a(l.valueOf(),l.datatype()))},"Array, number | BigNumber":i,"Matrix, number | BigNumber":function(l,c){return l.create(i(l.valueOf(),c),l.datatype())},"...":function(l){if(dp(l))throw new TypeError("All values expected to be scalar in function cumsum");return a(l)}});function a(u){try{return s(u)}catch(l){throw Qa(l,Zy)}}function s(u){if(u.length===0)return[];for(var l=[r(u[0])],c=1;c<u.length;++c)l.push(n(l[c-1],u[c]));return l}function i(u,l){var c=Lt(u);if(l<0||l>=c.length)throw new Xi(l,c.length);try{return o(u,l)}catch(f){throw Qa(f,Zy)}}function o(u,l){var c,f,d;if(l<=0){var h=u[0][0];if(Array.isArray(h)){for(d=Dq(u),f=[],c=0;c<d.length;c++)f[c]=o(d[c],l-1);return f}else return s(u)}else{for(f=[],c=0;c<u.length;c++)f[c]=o(u[c],l-1);return f}}}),jP="mean",q8e=["typed","add","divide"],KV=ee(jP,q8e,t=>{var{typed:e,add:n,divide:r}=t;return e(jP,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":a,"...":function(o){if(dp(o))throw new TypeError("Scalar values expected in function mean");return s(o)}});function a(i,o){try{var u=Ww(i,o,n),l=Array.isArray(i)?Lt(i):i.size();return r(u,l[o])}catch(c){throw Qa(c,"mean")}}function s(i){var o,u=0;if(fu(i,function(l){try{o=o===void 0?l:n(o,l),u++}catch(c){throw Qa(c,"mean",l)}}),u===0)throw new Error("Cannot calculate the mean of an empty array");return r(o,u)}}),HP="median",V8e=["typed","add","divide","compare","partitionSelect"],j8e=ee(HP,V8e,t=>{var{typed:e,add:n,divide:r,compare:a,partitionSelect:s}=t;function i(l){try{l=yn(l.valueOf());var c=l.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,d=s(l,f+1),h=l[f],m=0;m<f;++m)a(l[m],h)>0&&(h=l[m]);return u(h,d)}else{var v=s(l,(c-1)/2);return o(v)}}catch(y){throw Qa(y,"median")}}var o=e({"number | BigNumber | Complex | Unit":function(c){return c}}),u=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return r(n(c,f),2)}});return e(HP,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(dp(c))throw new TypeError("Scalar values expected in function median");return i(c)}})}),GP="mad",H8e=["typed","abs","map","median","subtract"],G8e=ee(GP,H8e,t=>{var{typed:e,abs:n,map:r,median:a,subtract:s}=t;return e(GP,{"Array | Matrix":i,"...":function(u){return i(u)}});function i(o){if(o=yn(o.valueOf()),o.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var u=a(o);return a(r(o,function(l){return n(s(l,u))}))}catch(l){throw l instanceof TypeError&&l.message.includes("median")?new TypeError(l.message.replace("median","mad")):Qa(l,"mad")}}}),HS="unbiased",KP="variance",K8e=["typed","add","subtract","multiply","divide","apply","isNaN"],XV=ee(KP,K8e,t=>{var{typed:e,add:n,subtract:r,multiply:a,divide:s,apply:i,isNaN:o}=t;return e(KP,{"Array | Matrix":function(f){return u(f,HS)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(f,d){return l(f,d,HS)},"Array | Matrix, number | BigNumber, string":l,"...":function(f){return u(f,HS)}});function u(c,f){var d,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(fu(c,function(y){try{d=d===void 0?y:n(d,y),h++}catch(b){throw Qa(b,"variance",y)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var m=s(d,h);if(d=void 0,fu(c,function(y){var b=r(y,m);d=d===void 0?a(b,b):n(d,a(b,b))}),o(d))return d;switch(f){case"uncorrected":return s(d,h);case"biased":return s(d,h+1);case"unbiased":{var v=Gt(d)?d.mul(0):0;return h===1?v:s(d,h-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function l(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return i(c,f,h=>u(h,d))}catch(h){throw Qa(h,"variance")}}}),XP="quantileSeq",X8e=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],YV=ee(XP,X8e,t=>{var{typed:e,bignumber:n,add:r,subtract:a,divide:s,multiply:i,partitionSelect:o,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d}=t,h=jA({typed:e,isInteger:l});return e(XP,{"Array | Matrix, number | BigNumber":(x,w)=>v(x,w,!1),"Array | Matrix, number | BigNumber, number":(x,w,N)=>m(x,w,!1,N,v),"Array | Matrix, number | BigNumber, boolean":v,"Array | Matrix, number | BigNumber, boolean, number":(x,w,N,C)=>m(x,w,N,C,v),"Array | Matrix, Array | Matrix":(x,w)=>y(x,w,!1),"Array | Matrix, Array | Matrix, number":(x,w,N)=>m(x,w,!1,N,y),"Array | Matrix, Array | Matrix, boolean":y,"Array | Matrix, Array | Matrix, boolean, number":(x,w,N,C)=>m(x,w,N,C,y)});function m(x,w,N,C,E){return h(x,C,$=>E($,w,N))}function v(x,w,N){var C,E=x.valueOf();if(c(w,0))throw new Error("N/prob must be non-negative");if(f(w,1))return jt(w)?b(E,w,N):n(b(E,w,N));if(d(w,1)){if(!l(w))throw new Error("N must be a positive integer");if(d(w,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var $=r(w,1);C=[];for(var I=0;c(I,w);I++){var D=s(I+1,$);C.push(b(E,D,N))}return jt(w)?C:n(C)}}function y(x,w,N){for(var C=x.valueOf(),E=w.valueOf(),$=[],I=0;I<E.length;++I)$.push(b(C,E[I],N));return $}function b(x,w,N){var C=yn(x),E=C.length;if(E===0)throw new Error("Cannot calculate quantile of an empty sequence");var $=jt(w)?w*(E-1):w.times(E-1),I=jt(w)?Math.floor($):$.floor().toNumber(),D=jt(w)?$%1:$.minus(I);if(l($))return N?C[$]:o(C,jt(w)?$:$.valueOf());var k,A;if(N)k=C[I],A=C[I+1];else{A=o(C,I+1),k=C[I];for(var O=0;O<I;++O)u(C[O],k)>0&&(k=C[O])}return r(i(k,a(1,D)),i(A,D))}}),YP="std",Y8e=["typed","map","sqrt","variance"],QV=ee(YP,Y8e,t=>{var{typed:e,map:n,sqrt:r,variance:a}=t;return e(YP,{"Array | Matrix":s,"Array | Matrix, string":s,"Array | Matrix, number | BigNumber":s,"Array | Matrix, number | BigNumber, string":s,"...":function(o){return s(o)}});function s(i,o){if(i.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var u=a.apply(null,arguments);return wi(u)?n(u,r):r(u)}catch(l){throw l instanceof TypeError&&l.message.includes(" variance")?new TypeError(l.message.replace(" variance"," std")):l}}}),QP="corr",Q8e=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],J8e=ee(QP,Q8e,t=>{var{typed:e,matrix:n,sqrt:r,sum:a,add:s,subtract:i,multiply:o,pow:u,divide:l}=t;return e(QP,{"Array, Array":function(h,m){return c(h,m)},"Matrix, Matrix":function(h,m){var v=c(h.toArray(),m.toArray());return Array.isArray(v)?n(v):v}});function c(d,h){var m=[];if(Array.isArray(d[0])&&Array.isArray(h[0])){if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var v=0;v<d.length;v++){if(d[v].length!==h[v].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");m.push(f(d[v],h[v]))}return m}else{if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(d,h)}}function f(d,h){var m=d.length,v=a(d),y=a(h),b=d.reduce((E,$,I)=>s(E,o($,h[I])),0),x=a(d.map(E=>u(E,2))),w=a(h.map(E=>u(E,2))),N=i(o(m,b),o(v,y)),C=r(o(i(o(m,x),u(v,2)),i(o(m,w),u(y,2))));return l(N,C)}}),JP="combinations",Z8e=["typed"],eWe=ee(JP,Z8e,t=>{var{typed:e}=t;return e(JP,{"number, number":Yq,"BigNumber, BigNumber":function(r,a){var s=r.constructor,i,o,u=r.minus(a),l=new s(1);if(!ZP(r)||!ZP(a))throw new TypeError("Positive integer value expected in function combinations");if(a.gt(r))throw new TypeError("k must be less than n in function combinations");if(i=l,a.lt(u))for(o=l;o.lte(u);o=o.plus(l))i=i.times(a.plus(o)).dividedBy(o);else for(o=l;o.lte(a);o=o.plus(l))i=i.times(u.plus(o)).dividedBy(o);return i}})});function ZP(t){return t.isInteger()&&t.gte(0)}var e4="combinationsWithRep",tWe=["typed"],nWe=ee(e4,tWe,t=>{var{typed:e}=t;return e(e4,{"number, number":function(r,a){if(!wt(r)||r<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!wt(a)||a<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r<1)throw new TypeError("k must be less than or equal to n + k - 1");if(a<r-1){var s=Qo(r,r+a-1);return s/Qo(1,a)}var i=Qo(a+1,r+a-1);return i/Qo(1,r-1)},"BigNumber, BigNumber":function(r,a){var s=r.constructor,i,o,u=new s(1),l=r.minus(u);if(!t4(r)||!t4(a))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r.lt(u))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(i=u,a.lt(l))for(o=u;o.lte(l);o=o.plus(u))i=i.times(a.plus(o)).dividedBy(o);else for(o=u;o.lte(a);o=o.plus(u))i=i.times(l.plus(o)).dividedBy(o);return i}})});function t4(t){return t.isInteger()&&t.gte(0)}var n4="gamma",rWe=["typed","config","multiplyScalar","pow","BigNumber","Complex"],aWe=ee(n4,rWe,t=>{var{typed:e,config:n,multiplyScalar:r,pow:a,BigNumber:s,Complex:i}=t;function o(l){if(l.im===0)return mb(l.re);if(l.re<.5){var c=new i(1-l.re,-l.im),f=new i(Math.PI*l.re,Math.PI*l.im);return new i(Math.PI).div(f.sin()).div(o(c))}l=new i(l.re-1,l.im);for(var d=new i(hd[0],0),h=1;h<hd.length;++h){var m=new i(hd[h],0);d=d.add(m.div(l.add(h)))}var v=new i(l.re+Jq+.5,l.im),y=Math.sqrt(2*Math.PI),b=v.pow(l.add(.5)),x=v.neg().exp();return d.mul(y).mul(b).mul(x)}return e(n4,{number:mb,Complex:o,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new s(1/0):u(c.minus(1));if(!c.isFinite())return new s(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function u(l){if(l<8)return new s([1,1,2,6,24,120,720,5040][l]);var c=n.precision+(Math.log(l.toNumber())|0),f=s.clone({precision:c});if(l%2===1)return l.times(u(new s(l-1)));for(var d=l,h=new f(l),m=l.toNumber();d>2;)d-=2,m+=d,h=h.times(m);return new s(h.toPrecision(s.precision))}}),r4="lgamma",sWe=["Complex","typed"],iWe=ee(r4,sWe,t=>{var{Complex:e,typed:n}=t,r=7,a=7,s=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return n(r4,{number:gb,Complex:i,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function i(l){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(l.isNaN())return new e(NaN,NaN);if(l.im===0)return new e(gb(l.re),0);if(l.re>=r||Math.abs(l.im)>=a)return o(l);if(l.re<=d){var h=n$e(c,l.im)*Math.floor(.5*l.re+.25),m=l.mul(Math.PI).sin().log(),v=i(new e(1-l.re,-l.im));return new e(f,h).sub(m).sub(v)}else return l.im>=0?u(l):u(l.conjugate()).conjugate()}function o(l){for(var c=l.sub(.5).mul(l.log()).sub(l).add(Zq),f=new e(1,0).div(l),d=f.div(l),h=s[0],m=s[1],v=2*d.re,y=d.re*d.re+d.im*d.im,b=2;b<8;b++){var x=m;m=-y*h+s[b],h=v*h+x}var w=f.mul(d.mul(h).add(m));return c.add(w)}function u(l){var c=0,f=0,d=l;for(l=l.add(1);l.re<=r;){d=d.mul(l);var h=d.im<0?1:0;h!==0&&f===0&&c++,f=h,l=l.add(1)}return o(l).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),a4="factorial",oWe=["typed","gamma"],uWe=ee(a4,oWe,t=>{var{typed:e,gamma:n}=t;return e(a4,{number:function(a){if(a<0)throw new Error("Value must be non-negative");return n(a+1)},BigNumber:function(a){if(a.isNegative())throw new Error("Value must be non-negative");return n(a.plus(1))},"Array | Matrix":e.referToSelf(r=>a=>qt(a,r))})}),s4="kldivergence",lWe=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],cWe=ee(s4,lWe,t=>{var{typed:e,matrix:n,divide:r,sum:a,multiply:s,map:i,dotDivide:o,log:u,isNumeric:l}=t;return e(s4,{"Array, Array":function(d,h){return c(n(d),n(h))},"Matrix, Array":function(d,h){return c(d,n(h))},"Array, Matrix":function(d,h){return c(n(d),h)},"Matrix, Matrix":function(d,h){return c(d,h)}});function c(f,d){var h=d.size().length,m=f.size().length;if(h>1)throw new Error("first object must be one dimensional");if(m>1)throw new Error("second object must be one dimensional");if(h!==m)throw new Error("Length of two vectors must be equal");var v=a(f);if(v===0)throw new Error("Sum of elements in first object must be non zero");var y=a(d);if(y===0)throw new Error("Sum of elements in second object must be non zero");var b=r(f,a(f)),x=r(d,a(d)),w=a(s(b,i(o(b,x),N=>u(N))));return l(w)?w:Number.NaN}}),i4="multinomial",fWe=["typed","add","divide","multiply","factorial","isInteger","isPositive"],dWe=ee(i4,fWe,t=>{var{typed:e,add:n,divide:r,multiply:a,factorial:s,isInteger:i,isPositive:o}=t;return e(i4,{"Array | Matrix":function(l){var c=0,f=1;return fu(l,function(d){if(!i(d)||!o(d))throw new TypeError("Positive integer value expected in function multinomial");c=n(c,d),f=a(f,s(d))}),r(s(c),f)}})}),o4="permutations",pWe=["typed","factorial"],hWe=ee(o4,pWe,t=>{var{typed:e,factorial:n}=t;return e(o4,{"number | BigNumber":n,"number, number":function(a,s){if(!wt(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(!wt(s)||s<0)throw new TypeError("Positive integer value expected in function permutations");if(s>a)throw new TypeError("second argument k must be less than or equal to first argument n");return Qo(a-s+1,a)},"BigNumber, BigNumber":function(a,s){var i,o;if(!u4(a)||!u4(s))throw new TypeError("Positive integer value expected in function permutations");if(s.gt(a))throw new TypeError("second argument k must be less than or equal to first argument n");var u=a.mul(0).add(1);for(i=u,o=a.minus(s).plus(1);o.lte(a);o=o.plus(1))i=i.times(o);return i}})});function u4(t){return t.isInteger()&&t.gte(0)}var mWe=mz(Date.now());function Ld(t){var e;function n(a){e=a===null?mWe:mz(String(a))}n(t);function r(){return e()}return r}var l4="pickRandom",gWe=["typed","config","?on"],vWe=ee(l4,gWe,t=>{var{typed:e,config:n,on:r}=t,a=Ld(n.randomSeed);return r&&r("config",function(i,o){i.randomSeed!==o.randomSeed&&(a=Ld(i.randomSeed))}),e(l4,{"Array | Matrix":function(o){return s(o,{})},"Array | Matrix, Object":function(o,u){return s(o,u)},"Array | Matrix, number":function(o,u){return s(o,{number:u})},"Array | Matrix, Array | Matrix":function(o,u){return s(o,{weights:u})},"Array | Matrix, Array | Matrix, number":function(o,u,l){return s(o,{number:l,weights:u})},"Array | Matrix, number, Array | Matrix":function(o,u,l){return s(o,{number:u,weights:l})}});function s(i,o){var{number:u,weights:l,elementWise:c=!0}=o,f=typeof u>"u";f&&(u=1);var d=$t(i)?i.create:$t(l)?l.create:null;i=i.valueOf(),l&&(l=l.valueOf()),c===!0&&(i=yn(i),l=yn(l));var h=0;if(typeof l<"u"){if(l.length!==i.length)throw new Error("Weights must have the same length as possibles");for(var m=0,v=l.length;m<v;m++){if(!jt(l[m])||l[m]<0)throw new Error("Weights must be an array of positive numbers");h+=l[m]}}for(var y=i.length,b=[],x;b.length<u;){if(typeof l>"u")x=i[Math.floor(a()*y)];else for(var w=a()*h,N=0,C=i.length;N<C;N++)if(w-=l[N],w<0){x=i[N];break}b.push(x)}return f?b[0]:d?d(b):b}});function JA(t,e){var n=[];if(t=t.slice(0),t.length>1)for(var r=0,a=t.shift();r<a;r++)n.push(JA(t,e));else for(var s=0,i=t.shift();s<i;s++)n.push(e());return n}var c4="random",yWe=["typed","config","?on"],bWe=ee(c4,yWe,t=>{var{typed:e,config:n,on:r}=t,a=Ld(n.randomSeed);return r&&r("config",function(o,u){o.randomSeed!==u.randomSeed&&(a=Ld(o.randomSeed))}),e(c4,{"":()=>i(0,1),number:o=>i(0,o),"number, number":(o,u)=>i(o,u),"Array | Matrix":o=>s(o,0,1),"Array | Matrix, number":(o,u)=>s(o,0,u),"Array | Matrix, number, number":(o,u,l)=>s(o,u,l)});function s(o,u,l){var c=JA(o.valueOf(),()=>i(u,l));return $t(o)?o.create(c,"number"):c}function i(o,u){return o+a()*(u-o)}}),f4="randomInt",wWe=["typed","config","?on"],xWe=ee(f4,wWe,t=>{var{typed:e,config:n,on:r}=t,a=Ld(n.randomSeed);return r&&r("config",function(o,u){o.randomSeed!==u.randomSeed&&(a=Ld(o.randomSeed))}),e(f4,{"":()=>i(0,1),number:o=>i(0,o),"number, number":(o,u)=>i(o,u),"Array | Matrix":o=>s(o,0,1),"Array | Matrix, number":(o,u)=>s(o,0,u),"Array | Matrix, number, number":(o,u,l)=>s(o,u,l)});function s(o,u,l){var c=JA(o.valueOf(),()=>i(u,l));return $t(o)?o.create(c,"number"):c}function i(o,u){return Math.floor(o+a()*(u-o))}}),d4="stirlingS2",SWe=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],NWe=ee(d4,SWe,t=>{var{typed:e,addScalar:n,subtractScalar:r,multiplyScalar:a,divideScalar:s,pow:i,factorial:o,combinations:u,isNegative:l,isInteger:c,number:f,bignumber:d,larger:h}=t,m=[],v=[];return e(d4,{"number | BigNumber, number | BigNumber":function(b,x){if(!c(b)||l(b)||!c(x)||l(x))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(h(x,b))throw new TypeError("k must be less than or equal to n in function stirlingS2");var w=!(jt(b)&&jt(x)),N=w?v:m,C=w?d:f,E=f(b),$=f(x);if(N[E]&&N[E].length>$)return N[E][$];for(var I=0;I<=E;++I)if(N[I]||(N[I]=[C(I===0?1:0)]),I!==0)for(var D=N[I],k=N[I-1],A=D.length;A<=I&&A<=$;++A)A===I?D[A]=1:D[A]=n(a(C(A),k[A]),k[A-1]);return N[E][$]}})}),p4="bellNumbers",CWe=["typed","addScalar","isNegative","isInteger","stirlingS2"],EWe=ee(p4,CWe,t=>{var{typed:e,addScalar:n,isNegative:r,isInteger:a,stirlingS2:s}=t;return e(p4,{"number | BigNumber":function(o){if(!a(o)||r(o))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var u=0,l=0;l<=o;l++)u=n(u,s(o,l));return u}})}),h4="catalan",TWe=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],DWe=ee(h4,TWe,t=>{var{typed:e,addScalar:n,divideScalar:r,multiplyScalar:a,combinations:s,isNegative:i,isInteger:o}=t;return e(h4,{"number | BigNumber":function(l){if(!o(l)||i(l))throw new TypeError("Non-negative integer value expected in function catalan");return r(s(a(l,2),l),n(l,1))}})}),m4="composition",AWe=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],$We=ee(m4,AWe,t=>{var{typed:e,addScalar:n,combinations:r,isPositive:a,isNegative:s,isInteger:i,larger:o}=t;return e(m4,{"number | BigNumber, number | BigNumber":function(l,c){if(!i(l)||!a(l)||!i(c)||!a(c))throw new TypeError("Positive integer value expected in function composition");if(o(c,l))throw new TypeError("k must be less than or equal to n in function composition");return r(n(l,-1),n(c,-1))}})}),g4="leafCount",kWe=["parse","typed"],IWe=ee(g4,kWe,t=>{var{parse:e,typed:n}=t;function r(a){var s=0;return a.forEach(i=>{s+=r(i)}),s||1}return n(g4,{Node:function(s){return r(s)}})});function v4(t){return cn(t)||br(t)&&t.isUnary()&&cn(t.args[0])}function Tb(t){return!!(cn(t)||(ml(t)||br(t))&&t.args.every(Tb)||lu(t)&&Tb(t.content))}function y4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function GS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y4(Object(n),!0).forEach(function(r){Wr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var _We="simplifyUtil",OWe=["FunctionNode","OperatorNode","SymbolNode"],ZA=ee(_We,OWe,t=>{var{FunctionNode:e,OperatorNode:n,SymbolNode:r}=t,a=!0,s=!1,i="defaultF",o={add:{trivial:a,total:a,commutative:a,associative:a},unaryPlus:{trivial:a,total:a,commutative:a,associative:a},subtract:{trivial:s,total:a,commutative:s,associative:s},multiply:{trivial:a,total:a,commutative:a,associative:a},divide:{trivial:s,total:a,commutative:s,associative:s},paren:{trivial:a,total:a,commutative:a,associative:s},defaultF:{trivial:s,total:a,commutative:s,associative:s}},u={divide:{total:s},log:{total:s}},l={subtract:{total:s},abs:{trivial:a},log:{total:a}};function c(w,N){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o,E=i;if(typeof w=="string"?E=w:br(w)?E=w.fn.toString():ml(w)?E=w.name:lu(w)&&(E="paren"),pt(C,E)){var $=C[E];if(pt($,N))return $[N];if(pt(o,E))return o[E][N]}if(pt(C,i)){var I=C[i];return pt(I,N)?I[N]:o[i][N]}if(pt(o,E)){var D=o[E];if(pt(D,N))return D[N]}return o[i][N]}function f(w){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(w,"commutative",N)}function d(w){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(w,"associative",N)}function h(w,N){var C=GS({},w);for(var E in N)pt(w,E)?C[E]=GS(GS({},N[E]),w[E]):C[E]=N[E];return C}function m(w,N){if(!w.args||w.args.length===0)return w;w.args=v(w,N);for(var C=0;C<w.args.length;C++)m(w.args[C],N)}function v(w,N){var C,E=[],$=function(D){for(var k=0;k<D.args.length;k++){var A=D.args[k];br(A)&&C===A.op?$(A):E.push(A)}};return d(w,N)?(C=w.op,$(w),E):w.args}function y(w,N){if(!(!w.args||w.args.length===0)){for(var C=x(w),E=w.args.length,$=0;$<E;$++)y(w.args[$],N);if(E>2&&d(w,N)){for(var I=w.args.pop();w.args.length>0;)I=C([w.args.pop(),I]);w.args=I.args}}}function b(w,N){if(!(!w.args||w.args.length===0)){for(var C=x(w),E=w.args.length,$=0;$<E;$++)b(w.args[$],N);if(E>2&&d(w,N)){for(var I=w.args.shift();w.args.length>0;)I=C([I,w.args.shift()]);w.args=I.args}}}function x(w){return br(w)?function(N){try{return new n(w.op,w.fn,N,w.implicit)}catch(C){return console.error(C),[]}}:function(N){return new e(new r(w.name),N)}}return{createMakeNodeFunction:x,hasProperty:c,isCommutative:f,isAssociative:d,mergeContext:h,flatten:m,allChildren:v,unflattenr:y,unflattenl:b,defaultContext:o,realContext:u,positiveContext:l}}),FWe="simplify",RWe=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],MWe=ee(FWe,RWe,t=>{var{typed:e,parse:n,equal:r,resolve:a,simplifyConstant:s,simplifyCore:i,AccessorNode:o,ArrayNode:u,ConstantNode:l,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:h,ParenthesisNode:m,SymbolNode:v,replacer:y}=t,{hasProperty:b,isCommutative:x,isAssociative:w,mergeContext:N,flatten:C,unflattenr:E,unflattenl:$,createMakeNodeFunction:I,defaultContext:D,realContext:k,positiveContext:A}=ZA({FunctionNode:c,OperatorNode:h,SymbolNode:v});e.addConversion({from:"Object",to:"Map",convert:dd});var O=e("simplify",{Node:M,"Node, Map":(Z,X)=>M(Z,!1,X),"Node, Map, Object":(Z,X,ae)=>M(Z,!1,X,ae),"Node, Array":M,"Node, Array, Map":M,"Node, Array, Map, Object":M});e.removeConversion({from:"Object",to:"Map",convert:dd}),O.defaultContext=D,O.realContext=k,O.positiveContext=A;function B(Z){return Z.transform(function(X){return lu(X)?B(X.content):X})}var z={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};O.rules=[i,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},s,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},s,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function L(Z,X){var ae={};if(Z.s){var pe=Z.s.split("->");if(pe.length===2)ae.l=pe[0],ae.r=pe[1];else throw SyntaxError("Could not parse rule: "+Z.s)}else ae.l=Z.l,ae.r=Z.r;ae.l=B(n(ae.l)),ae.r=B(n(ae.r));for(var he of["imposeContext","repeat","assuming"])he in Z&&(ae[he]=Z[he]);if(Z.evaluate&&(ae.evaluate=n(Z.evaluate)),w(ae.l,X)){var Ne=!x(ae.l,X),Ee;Ne&&(Ee=q());var Q=I(ae.l),se=q();ae.expanded={},ae.expanded.l=Q([ae.l,se]),C(ae.expanded.l,X),E(ae.expanded.l,X),ae.expanded.r=Q([ae.r,se]),Ne&&(ae.expandedNC1={},ae.expandedNC1.l=Q([Ee,ae.l]),ae.expandedNC1.r=Q([Ee,ae.r]),ae.expandedNC2={},ae.expandedNC2.l=Q([Ee,ae.expanded.l]),ae.expandedNC2.r=Q([Ee,ae.expanded.r]))}return ae}function F(Z,X){for(var ae=[],pe=0;pe<Z.length;pe++){var he=Z[pe],Ne=void 0,Ee=typeof he;switch(Ee){case"string":he={s:he};case"object":Ne=L(he,X);break;case"function":Ne=he;break;default:throw TypeError("Unsupported type of rule: "+Ee)}ae.push(Ne)}return ae}var R=0;function q(){return new v("_p"+R++)}function M(Z,X){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nm(),pe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},he=pe.consoleDebug;X=F(X||O.rules,pe.context);var Ne=a(Z,ae);Ne=B(Ne);for(var Ee={},Q=Ne.toString({parenthesis:"all"});!Ee[Q];){Ee[Q]=!0,R=0;var se=Q;he&&console.log("Working on: ",Q);for(var ve=0;ve<X.length;ve++){var xe="";if(typeof X[ve]=="function"?(Ne=X[ve](Ne,pe),he&&(xe=X[ve].name)):(C(Ne,pe.context),Ne=V(Ne,X[ve],pe.context),he&&(xe="".concat(X[ve].l.toString()," -> ").concat(X[ve].r.toString()))),he){var Re=Ne.toString({parenthesis:"all"});Re!==se&&(console.log("Applying",xe,"produced",Re),se=Re)}$(Ne,pe.context)}Q=Ne.toString({parenthesis:"all"})}return Ne}function G(Z,X,ae){var pe=Z;if(Z)for(var he=0;he<Z.length;++he){var Ne=V(Z[he],X,ae);Ne!==Z[he]&&(pe===Z&&(pe=Z.slice()),pe[he]=Ne)}return pe}function V(Z,X,ae){if(X.assuming){for(var pe in X.assuming)for(var he in X.assuming[pe])if(b(pe,he,ae)!==X.assuming[pe][he])return Z}var Ne=N(X.imposeContext,ae),Ee=Z;if(Ee instanceof h||Ee instanceof c){var Q=G(Ee.args,X,ae);Q!==Ee.args&&(Ee=Ee.clone(),Ee.args=Q)}else if(Ee instanceof m){if(Ee.content){var se=V(Ee.content,X,ae);se!==Ee.content&&(Ee=new m(se))}}else if(Ee instanceof u){var ve=G(Ee.items,X,ae);ve!==Ee.items&&(Ee=new u(ve))}else if(Ee instanceof o){var xe=Ee.object;Ee.object&&(xe=V(Ee.object,X,ae));var Re=Ee.index;Ee.index&&(Re=V(Ee.index,X,ae)),(xe!==Ee.object||Re!==Ee.index)&&(Ee=new o(xe,Re))}else if(Ee instanceof f){var Me=G(Ee.dimensions,X,ae);Me!==Ee.dimensions&&(Ee=new f(Me))}else if(Ee instanceof d){var He=!1,Je={};for(var re in Ee.properties)Je[re]=V(Ee.properties[re],X,ae),Je[re]!==Ee.properties[re]&&(He=!0);He&&(Ee=new d(Je))}var ce=X.r,Ce=te(X.l,Ee,Ne)[0];if(!Ce&&X.expanded&&(ce=X.expanded.r,Ce=te(X.expanded.l,Ee,Ne)[0]),!Ce&&X.expandedNC1&&(ce=X.expandedNC1.r,Ce=te(X.expandedNC1.l,Ee,Ne)[0],Ce||(ce=X.expandedNC2.r,Ce=te(X.expandedNC2.l,Ee,Ne)[0])),Ce){var Ae=Ee.implicit;Ee=ce.clone(),Ae&&"implicit"in ce&&(Ee.implicit=!0),Ee=Ee.transform(function(Le){return Le.isSymbolNode&&pt(Ce.placeholders,Le.name)?Ce.placeholders[Le.name].clone():Le})}return X.repeat&&Ee!==Z&&(Ee=V(Ee,X,ae)),Ee}function H(Z,X){var ae=[],pe,he,Ne=I(Z);if(x(Z,X))for(var Ee=0;Ee<Z.args.length;Ee++)he=Z.args.slice(0),he.splice(Ee,1),pe=he.length===1?he[0]:Ne(he),ae.push(Ne([Z.args[Ee],pe]));else for(var Q=1;Q<Z.args.length;Q++){var se=Z.args[0];Q>1&&(se=Ne(Z.args.slice(0,Q))),he=Z.args.slice(Q),pe=he.length===1?he[0]:Ne(he),ae.push(Ne([se,pe]))}return ae}function j(Z,X){var ae={placeholders:{}};if(!Z.placeholders&&!X.placeholders)return ae;if(Z.placeholders){if(!X.placeholders)return Z}else return X;for(var pe in Z.placeholders)if(pt(Z.placeholders,pe)&&(ae.placeholders[pe]=Z.placeholders[pe],pt(X.placeholders,pe)&&!ie(Z.placeholders[pe],X.placeholders[pe])))return null;for(var he in X.placeholders)pt(X.placeholders,he)&&(ae.placeholders[he]=X.placeholders[he]);return ae}function ne(Z,X){var ae=[];if(Z.length===0||X.length===0)return ae;for(var pe,he=0;he<Z.length;he++)for(var Ne=0;Ne<X.length;Ne++)pe=j(Z[he],X[Ne]),pe&&ae.push(pe);return ae}function ue(Z){if(Z.length===0)return Z;for(var X=Z.reduce(ne),ae=[],pe={},he=0;he<X.length;he++){var Ne=JSON.stringify(X[he],y);pe[Ne]||(pe[Ne]=!0,ae.push(X[he]))}return ae}function te(Z,X,ae,pe){var he=[{placeholders:{}}];if(Z instanceof h&&X instanceof h||Z instanceof c&&X instanceof c){if(Z instanceof h){if(Z.op!==X.op||Z.fn!==X.fn)return[]}else if(Z instanceof c&&Z.name!==X.name)return[];if(X.args.length===1&&Z.args.length===1||!w(X,ae)&&X.args.length===Z.args.length||pe){for(var Ne=[],Ee=0;Ee<Z.args.length;Ee++){var Q=te(Z.args[Ee],X.args[Ee],ae);if(Q.length===0)break;Ne.push(Q)}if(Ne.length!==Z.args.length){if(!x(X,ae)||Z.args.length===1)return[];if(Z.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var se=te(Z.args[0],X.args[1],ae);if(se.length===0)return[];var ve=te(Z.args[1],X.args[0],ae);if(ve.length===0)return[];Ne=[se,ve]}he=ue(Ne)}else if(X.args.length>=2&&Z.args.length===2){for(var xe=H(X,ae),Re=[],Me=0;Me<xe.length;Me++){var He=te(Z,xe[Me],ae,!0);Re=Re.concat(He)}return Re}else{if(Z.args.length>2)throw Error("Unexpected non-binary associative function: "+Z.toString());return[]}}else if(Z instanceof v){if(Z.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(z[Z.name]){if(Z.name!==X.name)return[]}else switch(Z.name[1]>="a"&&Z.name[1]<="z"?Z.name.substring(0,2):Z.name[0]){case"n":case"_p":he[0].placeholders[Z.name]=X;break;case"c":case"cl":if(cn(X))he[0].placeholders[Z.name]=X;else return[];break;case"v":if(!cn(X))he[0].placeholders[Z.name]=X;else return[];break;case"vl":if(ea(X))he[0].placeholders[Z.name]=X;else return[];break;case"cd":if(v4(X))he[0].placeholders[Z.name]=X;else return[];break;case"vd":if(!v4(X))he[0].placeholders[Z.name]=X;else return[];break;case"ce":if(Tb(X))he[0].placeholders[Z.name]=X;else return[];break;case"ve":if(!Tb(X))he[0].placeholders[Z.name]=X;else return[];break;default:throw new Error("Invalid symbol in rule: "+Z.name)}}else if(Z instanceof l){if(!r(Z.value,X.value))return[]}else return[];return he}function ie(Z,X){if(Z instanceof l&&X instanceof l){if(!r(Z.value,X.value))return!1}else if(Z instanceof v&&X instanceof v){if(Z.name!==X.name)return!1}else if(Z instanceof h&&X instanceof h||Z instanceof c&&X instanceof c){if(Z instanceof h){if(Z.op!==X.op||Z.fn!==X.fn)return!1}else if(Z instanceof c&&Z.name!==X.name)return!1;if(Z.args.length!==X.args.length)return!1;for(var ae=0;ae<Z.args.length;ae++)if(!ie(Z.args[ae],X.args[ae]))return!1}else return!1;return!0}return O}),PWe="simplifyConstant",BWe=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],LWe=ee(PWe,BWe,t=>{var{typed:e,config:n,mathWithTransform:r,matrix:a,fraction:s,bignumber:i,AccessorNode:o,ArrayNode:u,ConstantNode:l,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:h,SymbolNode:m}=t,{isCommutative:v,isAssociative:y,allChildren:b,createMakeNodeFunction:x}=ZA({FunctionNode:c,OperatorNode:h,SymbolNode:m}),w=e("simplifyConstant",{Node:L=>$(z(L,{})),"Node, Object":function(F,R){return $(z(F,R))}});function N(L){return Og(L)?L.valueOf():L instanceof Array?L.map(N):$t(L)?a(N(L.valueOf())):L}function C(L,F,R){try{return r[L].apply(null,F)}catch{return F=F.map(N),D(r[L].apply(null,F),R)}}var E=e({Fraction:A,number:function(F){return F<0?k(new l(-F)):new l(F)},BigNumber:function(F){return F<0?k(new l(-F)):new l(F)},bigint:function(F){return F<0n?k(new l(-F)):new l(F)},Complex:function(F){throw new Error("Cannot convert Complex number to Node")},string:function(F){return new l(F)},Matrix:function(F){return new u(F.valueOf().map(R=>E(R)))}});function $(L){return $n(L)?L:E(L)}function I(L,F){var R=F&&F.exactFractions!==!1;if(R&&isFinite(L)&&s){var q=s(L),M=F&&typeof F.fractionsLimit=="number"?F.fractionsLimit:1/0;if(q.valueOf()===L&&q.n<M&&q.d<M)return q}return L}var D=e({"string, Object":function(F,R){var q=Il(F,n);if(q==="BigNumber")return i===void 0&&KA(),i(F);if(q==="bigint")return BigInt(F);if(q==="Fraction")return s===void 0&&IV(),s(F);var M=parseFloat(F);return I(M,R)},"Fraction, Object":function(F,R){return F},"BigNumber, Object":function(F,R){return F},"number, Object":function(F,R){return I(F,R)},"bigint, Object":function(F,R){return F},"Complex, Object":function(F,R){return F.im!==0?F:I(F.re,R)},"Matrix, Object":function(F,R){return a(I(F.valueOf()))},"Array, Object":function(F,R){return F.map(I)}});function k(L){return new h("-","unaryMinus",[L])}function A(L){var F=M=>n.number==="BigNumber"&&i?i(M):Number(M),R=L.s*L.n,q=R<0n?new h("-","unaryMinus",[new l(-F(R))]):new l(F(R));return L.d===1n?q:new h("/","divide",[q,new l(F(L.d))])}function O(L,F,R){if(!fp(F))return new o($(L),$(F));if(ai(L)||$t(L)){for(var q=Array.from(F.dimensions);q.length>0;)if(cn(q[0])&&typeof q[0].value!="string"){var M=D(q.shift().value,R);ai(L)?L=L.items[M-1]:(L=L.valueOf()[M-1],L instanceof Array&&(L=a(L)))}else if(q.length>1&&cn(q[1])&&typeof q[1].value!="string"){var G=D(q[1].value,R),V=[],H=ai(L)?L.items:L.valueOf();for(var j of H)if(ai(j))V.push(j.items[G-1]);else if($t(L))V.push(j[G-1]);else break;if(V.length===H.length)ai(L)?L=new u(V):L=a(V),q.splice(1,1);else break}else break;return q.length===F.dimensions.length?new o($(L),F):q.length>0?(F=new f(q),new o($(L),F)):L}if(Rw(L)&&F.dimensions.length===1&&cn(F.dimensions[0])){var ne=F.dimensions[0].value;return ne in L.properties?L.properties[ne]:new l}return new o($(L),F)}function B(L,F,R,q){var M=F.shift(),G=F.reduce((V,H)=>{if(!$n(H)){var j=V.pop();if($n(j))return[j,H];try{return V.push(C(L,[j,H],q)),V}catch{V.push(j)}}V.push($(V.pop()));var ne=V.length===1?V[0]:R(V);return[R([ne,$(H)])]},[M]);return G.length===1?G[0]:R([G[0],E(G[1])])}function z(L,F){switch(L.type){case"SymbolNode":return L;case"ConstantNode":switch(typeof L.value){case"number":return D(L.value,F);case"bigint":return D(L.value,F);case"string":return L.value;default:if(!isNaN(L.value))return D(L.value,F)}return L;case"FunctionNode":if(r[L.name]&&r[L.name].rawArgs)return L;{var R=["add","multiply"];if(!R.includes(L.name)){var q=L.args.map(pe=>z(pe,F));if(!q.some($n))try{return C(L.name,q,F)}catch{}if(L.name==="size"&&q.length===1&&ai(q[0])){for(var M=[],G=q[0];ai(G);)M.push(G.items.length),G=G.items[0];return a(M)}return new c(L.name,q.map($))}}case"OperatorNode":{var V=L.fn.toString(),H,j,ne=x(L);if(br(L)&&L.isUnary())H=[z(L.args[0],F)],$n(H[0])?j=ne(H):j=C(V,H,F);else if(y(L,F.context))if(H=b(L,F.context),H=H.map(pe=>z(pe,F)),v(V,F.context)){for(var ue=[],te=[],ie=0;ie<H.length;ie++)$n(H[ie])?te.push(H[ie]):ue.push(H[ie]);ue.length>1?(j=B(V,ue,ne,F),te.unshift(j),j=B(V,te,ne,F)):j=B(V,H,ne,F)}else j=B(V,H,ne,F);else H=L.args.map(pe=>z(pe,F)),j=B(V,H,ne,F);return j}case"ParenthesisNode":return z(L.content,F);case"AccessorNode":return O(z(L.object,F),z(L.index,F),F);case"ArrayNode":{var Z=L.items.map(pe=>z(pe,F));return Z.some($n)?new u(Z.map($)):a(Z)}case"IndexNode":return new f(L.dimensions.map(pe=>w(pe,F)));case"ObjectNode":{var X={};for(var ae in L.properties)X[ae]=w(L.properties[ae],F);return new d(X)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(L.type))}}return w}),b4="simplifyCore",zWe=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],WWe=ee(b4,zWe,t=>{var{typed:e,parse:n,equal:r,isZero:a,add:s,subtract:i,multiply:o,divide:u,pow:l,AccessorNode:c,ArrayNode:f,ConstantNode:d,FunctionNode:h,IndexNode:m,ObjectNode:v,OperatorNode:y,ParenthesisNode:b,SymbolNode:x}=t,w=new d(0),N=new d(1),C=new d(!0),E=new d(!1);function $(A){return br(A)&&["and","not","or"].includes(A.op)}var{hasProperty:I,isCommutative:D}=ZA({FunctionNode:h,OperatorNode:y,SymbolNode:x});function k(A){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=O?O.context:void 0;if(I(A,"trivial",B)){if(ml(A)&&A.args.length===1)return k(A.args[0],O);var z=!1,L=0;if(A.forEach(te=>{++L,L===1&&(z=k(te,O))}),L===1)return z}var F=A;if(ml(F)){var R=u4e(F.name);if(R){if(F.args.length>2&&I(F,"associative",B))for(;F.args.length>2;){var q=F.args.pop(),M=F.args.pop();F.args.push(new y(R,F.name,[q,M]))}F=new y(R,F.name,F.args)}else return new h(k(F.fn),F.args.map(te=>k(te,O)))}if(br(F)&&F.isUnary()){var G=k(F.args[0],O);if(F.op==="~"&&br(G)&&G.isUnary()&&G.op==="~"||F.op==="not"&&br(G)&&G.isUnary()&&G.op==="not"&&$(G.args[0]))return G.args[0];var V=!0;if(F.op==="-"&&br(G)&&(G.isBinary()&&G.fn==="subtract"&&(F=new y("-","subtract",[G.args[1],G.args[0]]),V=!1),G.isUnary()&&G.op==="-"))return G.args[0];if(V)return new y(F.op,F.fn,[G])}if(br(F)&&F.isBinary()){var H=k(F.args[0],O),j=k(F.args[1],O);if(F.op==="+"){if(cn(H)&&a(H.value))return j;if(cn(j)&&a(j.value))return H;br(j)&&j.isUnary()&&j.op==="-"&&(j=j.args[0],F=new y("-","subtract",[H,j]))}if(F.op==="-")return br(j)&&j.isUnary()&&j.op==="-"?k(new y("+","add",[H,j.args[0]]),O):cn(H)&&a(H.value)?k(new y("-","unaryMinus",[j])):cn(j)&&a(j.value)?H:new y(F.op,F.fn,[H,j]);if(F.op==="*"){if(cn(H)){if(a(H.value))return w;if(r(H.value,1))return j}if(cn(j)){if(a(j.value))return w;if(r(j.value,1))return H;if(D(F,B))return new y(F.op,F.fn,[j,H],F.implicit)}return new y(F.op,F.fn,[H,j],F.implicit)}if(F.op==="/")return cn(H)&&a(H.value)?w:cn(j)&&r(j.value,1)?H:new y(F.op,F.fn,[H,j]);if(F.op==="^"&&cn(j)){if(a(j.value))return N;if(r(j.value,1))return H}if(F.op==="and"){if(cn(H))if(H.value){if($(j))return j;if(cn(j))return j.value?C:E}else return E;if(cn(j))if(j.value){if($(H))return H}else return E}if(F.op==="or"){if(cn(H)){if(H.value)return C;if($(j))return j}if(cn(j)){if(j.value)return C;if($(H))return H}}return new y(F.op,F.fn,[H,j])}if(br(F))return new y(F.op,F.fn,F.args.map(te=>k(te,O)));if(ai(F))return new f(F.items.map(te=>k(te,O)));if(Lc(F))return new c(k(F.object,O),k(F.index,O));if(fp(F))return new m(F.dimensions.map(te=>k(te,O)));if(Rw(F)){var ne={};for(var ue in F.properties)ne[ue]=k(F.properties[ue],O);return new v(ne)}return F}return e(b4,{Node:k,"Node,Object":k})}),UWe="resolve",qWe=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],VWe=ee(UWe,qWe,t=>{var{typed:e,parse:n,ConstantNode:r,FunctionNode:a,OperatorNode:s,ParenthesisNode:i}=t;function o(u,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!l)return u;if(ea(u)){if(c.has(u.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var d=l.get(u.name);if($n(d)){var h=new Set(c);return h.add(u.name),o(d,l,h)}else return typeof d=="number"?n(String(d)):d!==void 0?new r(d):u}else if(br(u)){var m=u.args.map(function(y){return o(y,l,c)});return new s(u.op,u.fn,m,u.implicit)}else{if(lu(u))return new i(o(u.content,l,c));if(ml(u)){var v=u.args.map(function(y){return o(y,l,c)});return new a(u.name,v)}}return u.map(y=>o(y,l,c))}return e("resolve",{Node:o,"Node, Map | null | undefined":o,"Node, Object":(u,l)=>o(u,dd(l)),"Array | Matrix":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array | Matrix, null | undefined":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array, Object":e.referTo("Array,Map",u=>(l,c)=>u(l,dd(c))),"Matrix, Object":e.referTo("Matrix,Map",u=>(l,c)=>u(l,dd(c))),"Array | Matrix, Map":e.referToSelf(u=>(l,c)=>l.map(f=>u(f,c)))})}),w4="symbolicEqual",jWe=["parse","simplify","typed","OperatorNode"],HWe=ee(w4,jWe,t=>{var{parse:e,simplify:n,typed:r,OperatorNode:a}=t;function s(i,o){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=new a("-","subtract",[i,o]),c=n(l,{},u);return cn(c)&&!c.value}return r(w4,{"Node, Node":s,"Node, Node, Object":s})}),x4="derivative",GWe=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],KWe=ee(x4,GWe,t=>{var{typed:e,config:n,parse:r,simplify:a,equal:s,isZero:i,numeric:o,ConstantNode:u,FunctionNode:l,OperatorNode:c,ParenthesisNode:f,SymbolNode:d}=t;function h(N,C){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},$={};b($,N,C.name);var I=x(N,$);return E.simplify?a(I):I}function m(N){var C=r(N);if(!C.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(N)," into a variable in function derivative"));return C}var v=e(x4,{"Node, SymbolNode":h,"Node, SymbolNode, Object":h,"Node, string":(N,C)=>h(N,m(C)),"Node, string, Object":(N,C,E)=>h(N,m(C),E)});v._simplify=!0,v.toTex=function(N){return y.apply(null,N.args)};var y=e("_derivTex",{"Node, SymbolNode":function(C,E){return cn(C)&&Ln(C.value)==="string"?y(r(C.value).toString(),E.toString(),1):y(C.toTex(),E.toString(),1)},"Node, ConstantNode":function(C,E){if(Ln(E.value)==="string")return y(C,r(E.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(C,E,$){return y(C.toString(),E.name,$.value)},"string, string, number":function(C,E,$){var I;return $===1?I="{d\\over d"+E+"}":I="{d^{"+$+"}\\over d"+E+"^{"+$+"}}",I+"\\left[".concat(C,"\\right]")}}),b=e("constTag",{"Object, ConstantNode, string":function(C,E){return C[E]=!0,!0},"Object, SymbolNode, string":function(C,E,$){return E.name!==$?(C[E]=!0,!0):!1},"Object, ParenthesisNode, string":function(C,E,$){return b(C,E.content,$)},"Object, FunctionAssignmentNode, string":function(C,E,$){return E.params.includes($)?b(C,E.expr,$):(C[E]=!0,!0)},"Object, FunctionNode | OperatorNode, string":function(C,E,$){if(E.args.length>0){for(var I=b(C,E.args[0],$),D=1;D<E.args.length;++D)I=b(C,E.args[D],$)&&I;if(I)return C[E]=!0,!0}return!1}}),x=e("_derivative",{"ConstantNode, Object":function(C){return w(0)},"SymbolNode, Object":function(C,E){return E[C]!==void 0?w(0):w(1)},"ParenthesisNode, Object":function(C,E){return new f(x(C.content,E))},"FunctionAssignmentNode, Object":function(C,E){return E[C]!==void 0?w(0):x(C.expr,E)},"FunctionNode, Object":function(C,E){if(E[C]!==void 0)return w(0);var $=C.args[0],I,D=!1,k=!1,A;switch(C.name){case"cbrt":D=!0,A=new c("*","multiply",[w(3),new c("^","pow",[$,new c("/","divide",[w(2),w(3)])])]);break;case"sqrt":case"nthRoot":if(C.args.length===1)D=!0,A=new c("*","multiply",[w(2),new l("sqrt",[$])]);else if(C.args.length===2)return I=new c("/","divide",[w(1),C.args[1]]),E[I]=E[C.args[1]],x(new c("^","pow",[$,I]),E);break;case"log10":I=w(10);case"log":if(!I&&C.args.length===1)A=$.clone(),D=!0;else if(C.args.length===1&&I||C.args.length===2&&E[C.args[1]]!==void 0)A=new c("*","multiply",[$.clone(),new l("log",[I||C.args[1]])]),D=!0;else if(C.args.length===2)return x(new c("/","divide",[new l("log",[$]),new l("log",[C.args[1]])]),E);break;case"pow":if(C.args.length===2)return E[I]=E[C.args[1]],x(new c("^","pow",[$,C.args[1]]),E);break;case"exp":A=new l("exp",[$.clone()]);break;case"sin":A=new l("cos",[$.clone()]);break;case"cos":A=new c("-","unaryMinus",[new l("sin",[$.clone()])]);break;case"tan":A=new c("^","pow",[new l("sec",[$.clone()]),w(2)]);break;case"sec":A=new c("*","multiply",[C,new l("tan",[$.clone()])]);break;case"csc":k=!0,A=new c("*","multiply",[C,new l("cot",[$.clone()])]);break;case"cot":k=!0,A=new c("^","pow",[new l("csc",[$.clone()]),w(2)]);break;case"asin":D=!0,A=new l("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[$.clone(),w(2)])])]);break;case"acos":D=!0,k=!0,A=new l("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[$.clone(),w(2)])])]);break;case"atan":D=!0,A=new c("+","add",[new c("^","pow",[$.clone(),w(2)]),w(1)]);break;case"asec":D=!0,A=new c("*","multiply",[new l("abs",[$.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[$.clone(),w(2)]),w(1)])])]);break;case"acsc":D=!0,k=!0,A=new c("*","multiply",[new l("abs",[$.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[$.clone(),w(2)]),w(1)])])]);break;case"acot":D=!0,k=!0,A=new c("+","add",[new c("^","pow",[$.clone(),w(2)]),w(1)]);break;case"sinh":A=new l("cosh",[$.clone()]);break;case"cosh":A=new l("sinh",[$.clone()]);break;case"tanh":A=new c("^","pow",[new l("sech",[$.clone()]),w(2)]);break;case"sech":k=!0,A=new c("*","multiply",[C,new l("tanh",[$.clone()])]);break;case"csch":k=!0,A=new c("*","multiply",[C,new l("coth",[$.clone()])]);break;case"coth":k=!0,A=new c("^","pow",[new l("csch",[$.clone()]),w(2)]);break;case"asinh":D=!0,A=new l("sqrt",[new c("+","add",[new c("^","pow",[$.clone(),w(2)]),w(1)])]);break;case"acosh":D=!0,A=new l("sqrt",[new c("-","subtract",[new c("^","pow",[$.clone(),w(2)]),w(1)])]);break;case"atanh":D=!0,A=new c("-","subtract",[w(1),new c("^","pow",[$.clone(),w(2)])]);break;case"asech":D=!0,k=!0,A=new c("*","multiply",[$.clone(),new l("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[$.clone(),w(2)])])])]);break;case"acsch":D=!0,k=!0,A=new c("*","multiply",[new l("abs",[$.clone()]),new l("sqrt",[new c("+","add",[new c("^","pow",[$.clone(),w(2)]),w(1)])])]);break;case"acoth":D=!0,k=!0,A=new c("-","subtract",[w(1),new c("^","pow",[$.clone(),w(2)])]);break;case"abs":A=new c("/","divide",[new l(new d("abs"),[$.clone()]),$.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+C.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var O,B;D?(O="/",B="divide"):(O="*",B="multiply");var z=x($,E);return k&&(z=new c("-","unaryMinus",[z])),new c(O,B,[z,A])},"OperatorNode, Object":function(C,E){if(E[C]!==void 0)return w(0);if(C.op==="+")return new c(C.op,C.fn,C.args.map(function(F){return x(F,E)}));if(C.op==="-"){if(C.isUnary())return new c(C.op,C.fn,[x(C.args[0],E)]);if(C.isBinary())return new c(C.op,C.fn,[x(C.args[0],E),x(C.args[1],E)])}if(C.op==="*"){var $=C.args.filter(function(F){return E[F]!==void 0});if($.length>0){var I=C.args.filter(function(F){return E[F]===void 0}),D=I.length===1?I[0]:new c("*","multiply",I),k=$.concat(x(D,E));return new c("*","multiply",k)}return new c("+","add",C.args.map(function(F){return new c("*","multiply",C.args.map(function(R){return R===F?x(R,E):R.clone()}))}))}if(C.op==="/"&&C.isBinary()){var A=C.args[0],O=C.args[1];return E[O]!==void 0?new c("/","divide",[x(A,E),O]):E[A]!==void 0?new c("*","multiply",[new c("-","unaryMinus",[A]),new c("/","divide",[x(O,E),new c("^","pow",[O.clone(),w(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[x(A,E),O.clone()]),new c("*","multiply",[A.clone(),x(O,E)])]),new c("^","pow",[O.clone(),w(2)])])}if(C.op==="^"&&C.isBinary()){var B=C.args[0],z=C.args[1];if(E[B]!==void 0)return cn(B)&&(i(B.value)||s(B.value,1))?w(0):new c("*","multiply",[C,new c("*","multiply",[new l("log",[B.clone()]),x(z.clone(),E)])]);if(E[z]!==void 0){if(cn(z)){if(i(z.value))return w(0);if(s(z.value,1))return x(B,E)}var L=new c("^","pow",[B.clone(),new c("-","subtract",[z,w(1)])]);return new c("*","multiply",[z.clone(),new c("*","multiply",[x(B,E),L])])}return new c("*","multiply",[new c("^","pow",[B.clone(),z.clone()]),new c("+","add",[new c("*","multiply",[x(B,E),new c("/","divide",[z.clone(),B.clone()])]),new c("*","multiply",[x(z,E),new l("log",[B.clone()])])])])}throw new Error('Cannot process operator "'+C.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function w(N,C){return new u(o(N,Il(String(N),n)))}return v}),S4="rationalize",XWe=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],YWe=ee(S4,XWe,t=>{var{config:e,typed:n,equal:r,isZero:a,add:s,subtract:i,multiply:o,divide:u,pow:l,parse:c,simplifyConstant:f,simplifyCore:d,simplify:h,fraction:m,bignumber:v,mathWithTransform:y,matrix:b,AccessorNode:x,ArrayNode:w,ConstantNode:N,FunctionNode:C,IndexNode:E,ObjectNode:$,OperatorNode:I,SymbolNode:D,ParenthesisNode:k}=t;function A(F){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,M=B(),G=O(F,R,!0,M.firstRules),V=G.variables.length,H={exactFractions:!1},j={exactFractions:!0};if(F=G.expression,V>=1){F=z(F);var ne,ue,te=!0,ie=!1;F=h(F,M.firstRules,{},H);for(var Z;ue=te?M.distrDivRules:M.sucDivRules,F=h(F,ue,{},j),te=!te,Z=F.toString(),Z!==ne;)ie=!0,ne=Z;ie&&(F=h(F,M.firstRulesAgain,{},H)),F=h(F,M.finalRules,{},H)}var X=[],ae={};return F.type==="OperatorNode"&&F.isBinary()&&F.op==="/"?(V===1&&(F.args[0]=L(F.args[0],X),F.args[1]=L(F.args[1])),q&&(ae.numerator=F.args[0],ae.denominator=F.args[1])):(V===1&&(F=L(F,X)),q&&(ae.numerator=F,ae.denominator=null)),q?(ae.coefficients=X,ae.variables=G.variables,ae.expression=F,ae):F}return n(S4,{Node:A,"Node, boolean":(F,R)=>A(F,{},R),"Node, Object":A,"Node, Object, boolean":A});function O(F,R,q,M){var G=[],V=h(F,M,R,{exactFractions:!1});q=!!q;var H="+-*"+(q?"/":"");ne(V);var j={};return j.expression=V,j.variables=G,j;function ne(ue){var te=ue.type;if(te==="FunctionNode")throw new Error("There is an unsolved function call");if(te==="OperatorNode")if(ue.op==="^"){if(ue.args[1].type!=="ConstantNode"||!wt(parseFloat(ue.args[1].value)))throw new Error("There is a non-integer exponent");ne(ue.args[0])}else{if(!H.includes(ue.op))throw new Error("Operator "+ue.op+" invalid in polynomial expression");for(var ie=0;ie<ue.args.length;ie++)ne(ue.args[ie])}else if(te==="SymbolNode"){var Z=ue.name,X=G.indexOf(Z);X===-1&&G.push(Z)}else if(te==="ParenthesisNode")ne(ue.content);else if(te!=="ConstantNode")throw new Error("type "+te+" is not allowed in polynomial expression")}}function B(){var F=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],R=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],q=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],M=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],G={};return G.firstRules=F.concat(R,M),G.distrDivRules=q,G.sucDivRules=M,G.firstRulesAgain=F.concat(R),G.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],G}function z(F,R,q){var M=F.type,G=arguments.length>1;if(M==="OperatorNode"&&F.isBinary()){var V=!1,H;if(F.op==="^"&&(F.args[0].type==="ParenthesisNode"||F.args[0].type==="OperatorNode")&&F.args[1].type==="ConstantNode"&&(H=parseFloat(F.args[1].value),V=H>=2&&wt(H)),V){if(H>2){var j=F.args[0],ne=new I("^","pow",[F.args[0].cloneDeep(),new N(H-1)]);F=new I("*","multiply",[j,ne])}else F=new I("*","multiply",[F.args[0],F.args[0].cloneDeep()]);G&&(q==="content"?R.content=F:R.args[q]=F)}}if(M==="ParenthesisNode")z(F.content,F,"content");else if(M!=="ConstantNode"&&M!=="SymbolNode")for(var ue=0;ue<F.args.length;ue++)z(F.args[ue],F,ue);if(!G)return F}function L(F,R){R===void 0&&(R=[]),R[0]=0;var q={};q.cte=1,q.oper="+",q.fire="";var M=0,G="";Z(F,null,q),M=R.length-1;for(var V=!0,H,j=M;j>=0;j--)if(R[j]!==0){var ne=new N(V?R[j]:Math.abs(R[j])),ue=R[j]<0?"-":"+";if(j>0){var te=new D(G);if(j>1){var ie=new N(j);te=new I("^","pow",[te,ie])}R[j]===-1&&V?ne=new I("-","unaryMinus",[te]):Math.abs(R[j])===1?ne=te:ne=new I("*","multiply",[ne,te])}V?H=ne:ue==="+"?H=new I("+","add",[H,ne]):H=new I("-","subtract",[H,ne]),V=!1}if(V)return new N(0);return H;function Z(X,ae,pe){var he=X.type;if(he==="FunctionNode")throw new Error("There is an unsolved function call");if(he==="OperatorNode"){if(!"+-*^".includes(X.op))throw new Error("Operator "+X.op+" invalid");if(ae!==null){if((X.fn==="unaryMinus"||X.fn==="pow")&&ae.fn!=="add"&&ae.fn!=="subtract"&&ae.fn!=="multiply")throw new Error("Invalid "+X.op+" placing");if((X.fn==="subtract"||X.fn==="add"||X.fn==="multiply")&&ae.fn!=="add"&&ae.fn!=="subtract")throw new Error("Invalid "+X.op+" placing");if((X.fn==="subtract"||X.fn==="add"||X.fn==="unaryMinus")&&pe.noFil!==0)throw new Error("Invalid "+X.op+" placing")}(X.op==="^"||X.op==="*")&&(pe.fire=X.op);for(var Ne=0;Ne<X.args.length;Ne++)X.fn==="unaryMinus"&&(pe.oper="-"),(X.op==="+"||X.fn==="subtract")&&(pe.fire="",pe.cte=1,pe.oper=Ne===0?"+":X.op),pe.noFil=Ne,Z(X.args[Ne],X,pe)}else if(he==="SymbolNode"){if(X.name!==G&&G!=="")throw new Error("There is more than one variable");if(G=X.name,ae===null){R[1]=1;return}if(ae.op==="^"&&pe.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ae.op==="*"&&pe.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(pe.fire===""||pe.fire==="*")&&(M<1&&(R[1]=0),R[1]+=pe.cte*(pe.oper==="+"?1:-1),M=Math.max(1,M))}else if(he==="ConstantNode"){var Ee=parseFloat(X.value);if(ae===null){R[0]=Ee;return}if(ae.op==="^"){if(pe.noFil!==1)throw new Error("Constant cannot be powered");if(!wt(Ee)||Ee<=0)throw new Error("Non-integer exponent is not allowed");for(var Q=M+1;Q<Ee;Q++)R[Q]=0;Ee>M&&(R[Ee]=0),R[Ee]+=pe.cte*(pe.oper==="+"?1:-1),M=Math.max(Ee,M);return}pe.cte=Ee,pe.fire===""&&(R[0]+=pe.cte*(pe.oper==="+"?1:-1))}else throw new Error("Type "+he+" is not allowed")}}}),N4="zpk2tf",QWe=["typed","add","multiply","Complex","number"],JWe=ee(N4,QWe,t=>{var{typed:e,add:n,multiply:r,Complex:a,number:s}=t;return e(N4,{"Array,Array,number":function(l,c,f){return i(l,c,f)},"Array,Array":function(l,c){return i(l,c,1)},"Matrix,Matrix,number":function(l,c,f){return i(l.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(l,c){return i(l.valueOf(),c.valueOf(),1)}});function i(u,l,c){u.some(x=>x.type==="BigNumber")&&(u=u.map(x=>s(x))),l.some(x=>x.type==="BigNumber")&&(l=l.map(x=>s(x)));for(var f=[a(1,0)],d=[a(1,0)],h=0;h<u.length;h++){var m=u[h];typeof m=="number"&&(m=a(m,0)),f=o(f,[a(1,0),a(-m.re,-m.im)])}for(var v=0;v<l.length;v++){var y=l[v];typeof y=="number"&&(y=a(y,0)),d=o(d,[a(1,0),a(-y.re,-y.im)])}for(var b=0;b<f.length;b++)f[b]=r(f[b],c);return[f,d]}function o(u,l){for(var c=[],f=0;f<u.length+l.length-1;f++){c[f]=a(0,0);for(var d=0;d<u.length;d++)f-d>=0&&f-d<l.length&&(c[f]=n(c[f],r(u[d],l[f-d])))}return c}}),C4="freqz",ZWe=["typed","add","multiply","Complex","divide","matrix"],eUe=ee(C4,ZWe,t=>{var{typed:e,add:n,multiply:r,Complex:a,divide:s,matrix:i}=t;return e(C4,{"Array, Array":function(c,f){var d=u(512);return o(c,f,d)},"Array, Array, Array":function(c,f,d){return o(c,f,d)},"Array, Array, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=u(d);return o(c,f,h)},"Matrix, Matrix":function(c,f){var d=u(512),{w:h,h:m}=o(c.valueOf(),f.valueOf(),d);return{w:i(h),h:i(m)}},"Matrix, Matrix, Matrix":function(c,f,d){var{h}=o(c.valueOf(),f.valueOf(),d.valueOf());return{h:i(h),w:i(d)}},"Matrix, Matrix, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=u(d),{h:m}=o(c.valueOf(),f.valueOf(),h);return{h:i(m),w:i(h)}}});function o(l,c,f){for(var d=[],h=[],m=0;m<f.length;m++){for(var v=a(0,0),y=a(0,0),b=0;b<l.length;b++)v=n(v,r(l[b],a(Math.cos(-b*f[m]),Math.sin(-b*f[m]))));for(var x=0;x<c.length;x++)y=n(y,r(c[x],a(Math.cos(-x*f[m]),Math.sin(-x*f[m]))));d.push(v),h.push(y)}for(var w=[],N=0;N<d.length;N++)w.push(s(d[N],h[N]));return{h:w,w:f}}function u(l){for(var c=[],f=0;f<l;f++)c.push(f/l*Math.PI);return c}}),tUe="reviver",nUe=["classes"],rUe=ee(tUe,nUe,t=>{var{classes:e}=t;return function(r,a){var s=e[a&&a.mathjs];return s&&typeof s.fromJSON=="function"?s.fromJSON(a):a}}),aUe="replacer",sUe=[],iUe=ee(aUe,sUe,()=>function(e,n){return typeof n=="number"&&(!isFinite(n)||isNaN(n))?{mathjs:"number",value:String(n)}:typeof n=="bigint"?{mathjs:"bigint",value:String(n)}:n}),oUe="14.0.0",uUe=ee("true",[],()=>!0),lUe=ee("false",[],()=>!1),cUe=ee("null",[],()=>null),fUe=Ws("Infinity",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1/0):1/0}),dUe=Ws("NaN",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(NaN):NaN}),pUe=Ws("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?QA(n):Vke}),hUe=Ws("tau",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?dMe(n):jke}),mUe=Ws("e",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?cMe(n):Hke}),gUe=Ws("phi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?fMe(n):Gke}),vUe=Ws("LN2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(2).ln():Math.LN2}),yUe=Ws("LN10",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(10).ln():Math.LN10}),bUe=Ws("LOG2E",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1).div(new n(2).ln()):Math.LOG2E}),wUe=Ws("LOG10E",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1).div(new n(10).ln()):Math.LOG10E}),xUe=Ws("SQRT1_2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n("0.5").sqrt():Math.SQRT1_2}),SUe=Ws("SQRT2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(2).sqrt():Math.SQRT2}),NUe=Ws("i",["Complex"],t=>{var{Complex:e}=t;return e.I}),CUe=ee("version",[],()=>oUe);function Ws(t,e,n){return ee(t,e,n,{recreateOnConfigChange:!0})}var EUe=Vt("speedOfLight","299792458","m s^-1"),TUe=Vt("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),DUe=Vt("planckConstant","6.62607015e-34","J s"),AUe=Vt("reducedPlanckConstant","1.0545718176461565e-34","J s"),$Ue=Vt("magneticConstant","1.25663706212e-6","N A^-2"),kUe=Vt("electricConstant","8.8541878128e-12","F m^-1"),IUe=Vt("vacuumImpedance","376.730313667","ohm"),_Ue=Vt("coulomb","8.987551792261171e9","N m^2 C^-2"),OUe=Vt("elementaryCharge","1.602176634e-19","C"),FUe=Vt("bohrMagneton","9.2740100783e-24","J T^-1"),RUe=Vt("conductanceQuantum","7.748091729863649e-5","S"),MUe=Vt("inverseConductanceQuantum","12906.403729652257","ohm"),PUe=Vt("magneticFluxQuantum","2.0678338484619295e-15","Wb"),BUe=Vt("nuclearMagneton","5.0507837461e-27","J T^-1"),LUe=Vt("klitzing","25812.807459304513","ohm"),zUe=Vt("bohrRadius","5.29177210903e-11","m"),WUe=Vt("classicalElectronRadius","2.8179403262e-15","m"),UUe=Vt("electronMass","9.1093837015e-31","kg"),qUe=Vt("fermiCoupling","1.1663787e-5","GeV^-2"),VUe=jw("fineStructure",.0072973525693),jUe=Vt("hartreeEnergy","4.3597447222071e-18","J"),HUe=Vt("protonMass","1.67262192369e-27","kg"),GUe=Vt("deuteronMass","3.3435830926e-27","kg"),KUe=Vt("neutronMass","1.6749271613e-27","kg"),XUe=Vt("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),YUe=Vt("rydberg","10973731.568160","m^-1"),QUe=Vt("thomsonCrossSection","6.6524587321e-29","m^2"),JUe=jw("weakMixingAngle",.2229),ZUe=jw("efimovFactor",22.7),eqe=Vt("atomicMass","1.66053906660e-27","kg"),tqe=Vt("avogadro","6.02214076e23","mol^-1"),nqe=Vt("boltzmann","1.380649e-23","J K^-1"),rqe=Vt("faraday","96485.33212331001","C mol^-1"),aqe=Vt("firstRadiation","3.7417718521927573e-16","W m^2"),sqe=Vt("loschmidt","2.686780111798444e25","m^-3"),iqe=Vt("gasConstant","8.31446261815324","J K^-1 mol^-1"),oqe=Vt("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),uqe=Vt("molarVolume","0.022413969545014137","m^3 mol^-1"),lqe=jw("sackurTetrode",-1.16487052358),cqe=Vt("secondRadiation","0.014387768775039337","m K"),fqe=Vt("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),dqe=Vt("wienDisplacement","2.897771955e-3","m K"),pqe=Vt("molarMass","0.99999999965e-3","kg mol^-1"),hqe=Vt("molarMassC12","11.9999999958e-3","kg mol^-1"),mqe=Vt("gravity","9.80665","m s^-2"),gqe=Vt("planckLength","1.616255e-35","m"),vqe=Vt("planckMass","2.176435e-8","kg"),yqe=Vt("planckTime","5.391245e-44","s"),bqe=Vt("planckCharge","1.87554603778e-18","C"),wqe=Vt("planckTemperature","1.416785e+32","K");function Vt(t,e,n){var r=["config","Unit","BigNumber"];return ee(t,r,a=>{var{config:s,Unit:i,BigNumber:o}=a,u=s.number==="BigNumber"?new o(e):parseFloat(e),l=new i(u,n);return l.fixPrefix=!0,l})}function jw(t,e){var n=["config","BigNumber"];return ee(t,n,r=>{var{config:a,BigNumber:s}=r;return a.number==="BigNumber"?new s(e):e})}var xqe="apply",Sqe=["typed","isInteger"],Nqe=ee(xqe,Sqe,t=>{var{typed:e,isInteger:n}=t,r=jA({typed:e,isInteger:n});return e("apply",{"...any":function(s){var i=s[1];jt(i)?s[1]=i-1:Gt(i)&&(s[1]=i.minus(1));try{return r.apply(null,s)}catch(o){throw Za(o)}}})},{isTransformFunction:!0}),Cqe="column",Eqe=["typed","Index","matrix","range"],Tqe=ee(Cqe,Eqe,t=>{var{typed:e,Index:n,matrix:r,range:a}=t,s=TV({typed:e,Index:n,matrix:r,range:a});return e("column",{"...any":function(o){var u=o.length-1,l=o[u];jt(l)&&(o[u]=l-1);try{return s.apply(null,o)}catch(c){throw Za(c)}}})},{isTransformFunction:!0});function e$(t,e,n){var r=t.filter(function(u){return ea(u)&&!(u.name in e)&&!n.has(u.name)})[0];if(!r)throw new Error('No undefined variable found in inline expression "'+t+'"');var a=r.name,s=new Map,i=new XU(n,s,new Set([a])),o=t.compile();return function(l){return s.set(a,l),o.evaluate(i)}}var Dqe="transformCallback",Aqe=["typed"],t$=ee(Dqe,Aqe,t=>{var{typed:e}=t;return function(r,a){return e.isTypedFunction(r)?n(r,a):E4(r,r.length,a)};function n(r,a){var s=Object.fromEntries(Object.entries(r.signatures).map(i=>{var[o,u]=i,l=o.split(",").length;return e.isTypedFunction(u)?[o,n(u,a)]:[o,E4(u,l,a)]}));return typeof r.name=="string"?e(r.name,s):e(s)}});function E4(t,e,n){return e===n?t:e===n+1?function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var i=a.slice(0,n),o=T4(a[n]);return t(...i,o)}:e>n+1?function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var i=a.slice(0,n),o=T4(a[n]),u=a.slice(n+1);return t(...i,o,...u)}:t}function T4(t){return t.map(e=>e+1)}var $qe="filter",kqe=["typed"],Iqe=ee($qe,kqe,t=>{var{typed:e}=t;function n(a,s,i){var o=DV({typed:e}),u=t$({typed:e});if(a.length===0)return o();var l=a[0];if(a.length===1)return o(l);var c=a.length-1,f=a[c];return l&&(l=r(l,i)),f&&(ea(f)||Fg(f)?f=r(f,i):f=e$(f,s,i)),o(l,u(f,c))}n.rawArgs=!0;function r(a,s){return a.compile().evaluate(s)}return n},{isTransformFunction:!0}),_qe="forEach",Oqe=["typed"],Fqe=ee(_qe,Oqe,t=>{var{typed:e}=t,n=AV({typed:e}),r=t$({typed:e});function a(i,o,u){if(i.length===0)return n();var l=i[0];if(i.length===1)return n(l);var c=i.length-1,f=i[c];return l&&(l=s(l,u)),f&&(ea(f)||Fg(f)?f=s(f,u):f=e$(f,o,u)),n(l,r(f,c))}a.rawArgs=!0;function s(i,o){return i.compile().evaluate(o)}return a},{isTransformFunction:!0}),Rqe="index",Mqe=["Index","getMatrixDataType"],Pqe=ee(Rqe,Mqe,t=>{var{Index:e,getMatrixDataType:n}=t;return function(){for(var a=[],s=0,i=arguments.length;s<i;s++){var o=arguments[s];if(RA(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(l){return l-1});else if(An(o)||$t(o))n(o)!=="boolean"&&(o=o.map(function(l){return l-1}));else if(jt(o))o--;else if(Gt(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");a[s]=o}var u=new e;return e.apply(u,a),u}},{isTransformFunction:!0}),Bqe="map",Lqe=["typed"],zqe=ee(Bqe,Lqe,t=>{var{typed:e}=t,n=$V({typed:e}),r=t$({typed:e});function a(s,i,o){if(s.length===0)return n();if(s.length===1)return n(s[0]);var u=s.length-1,l=s.slice(0,u),c=s[u];return l=l.map(d=>f(d,o)),c&&(ea(c)||Fg(c)?c=f(c,o):c=e$(c,i,o)),n(...l,r(c,u));function f(d,h){return d.compile().evaluate(h)}}return a.rawArgs=!0,a},{isTransformFunction:!0});function Wqe(t){return jt(t)?t-1:Gt(t)?t.minus(1):t}function Uqe(t){return jt(t)||Gt(t)}function Fl(t){if(t.length===2&&wi(t[0])){t=t.slice();var e=t[1];Uqe(e)&&(t[1]=Wqe(e))}return t}var qqe="max",Vqe=["typed","config","numeric","larger"],jqe=ee(qqe,Vqe,t=>{var{typed:e,config:n,numeric:r,larger:a}=t,s=LV({typed:e,config:n,numeric:r,larger:a});return e("max",{"...any":function(o){o=Fl(o);try{return s.apply(null,o)}catch(u){throw Za(u)}}})},{isTransformFunction:!0}),Hqe="mean",Gqe=["typed","add","divide"],Kqe=ee(Hqe,Gqe,t=>{var{typed:e,add:n,divide:r}=t,a=KV({typed:e,add:n,divide:r});return e("mean",{"...any":function(i){i=Fl(i);try{return a.apply(null,i)}catch(o){throw Za(o)}}})},{isTransformFunction:!0}),Xqe="min",Yqe=["typed","config","numeric","smaller"],Qqe=ee(Xqe,Yqe,t=>{var{typed:e,config:n,numeric:r,smaller:a}=t,s=zV({typed:e,config:n,numeric:r,smaller:a});return e("min",{"...any":function(o){o=Fl(o);try{return s.apply(null,o)}catch(u){throw Za(u)}}})},{isTransformFunction:!0}),Jqe="range",Zqe=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],eVe=ee(Jqe,Zqe,t=>{var{typed:e,config:n,matrix:r,bignumber:a,smaller:s,smallerEq:i,larger:o,largerEq:u,add:l,isPositive:c}=t,f=OV({typed:e,config:n,matrix:r,bignumber:a,smaller:s,smallerEq:i,larger:o,largerEq:u,add:l,isPositive:c});return e("range",{"...any":function(h){var m=h.length-1,v=h[m];return typeof v!="boolean"&&h.push(!0),f.apply(null,h)}})},{isTransformFunction:!0}),tVe="row",nVe=["typed","Index","matrix","range"],rVe=ee(tVe,nVe,t=>{var{typed:e,Index:n,matrix:r,range:a}=t,s=FV({typed:e,Index:n,matrix:r,range:a});return e("row",{"...any":function(o){var u=o.length-1,l=o[u];jt(l)&&(o[u]=l-1);try{return s.apply(null,o)}catch(c){throw Za(c)}}})},{isTransformFunction:!0}),aVe="subset",sVe=["typed","matrix","zeros","add"],iVe=ee(aVe,sVe,t=>{var{typed:e,matrix:n,zeros:r,add:a}=t,s=RV({typed:e,matrix:n,zeros:r,add:a});return e("subset",{"...any":function(o){try{return s.apply(null,o)}catch(u){throw Za(u)}}})},{isTransformFunction:!0}),oVe="concat",uVe=["typed","matrix","isInteger"],lVe=ee(oVe,uVe,t=>{var{typed:e,matrix:n,isInteger:r}=t,a=EV({typed:e,matrix:n,isInteger:r});return e("concat",{"...any":function(i){var o=i.length-1,u=i[o];jt(u)?i[o]=u-1:Gt(u)&&(i[o]=u.minus(1));try{return a.apply(null,i)}catch(l){throw Za(l)}}})},{isTransformFunction:!0}),D4="diff",cVe=["typed","matrix","subtract","number","bignumber"],fVe=ee(D4,cVe,t=>{var{typed:e,matrix:n,subtract:r,number:a,bignumber:s}=t,i=kV({typed:e,matrix:n,subtract:r,number:a,bignumber:s});return e(D4,{"...any":function(u){u=Fl(u);try{return i.apply(null,u)}catch(l){throw Za(l)}}})},{isTransformFunction:!0}),dVe="std",pVe=["typed","map","sqrt","variance"],hVe=ee(dVe,pVe,t=>{var{typed:e,map:n,sqrt:r,variance:a}=t,s=QV({typed:e,map:n,sqrt:r,variance:a});return e("std",{"...any":function(o){o=Fl(o);try{return s.apply(null,o)}catch(u){throw Za(u)}}})},{isTransformFunction:!0}),A4="sum",mVe=["typed","config","add","numeric"],gVe=ee(A4,mVe,t=>{var{typed:e,config:n,add:r,numeric:a}=t,s=HV({typed:e,config:n,add:r,numeric:a});return e(A4,{"...any":function(o){o=Fl(o);try{return s.apply(null,o)}catch(u){throw Za(u)}}})},{isTransformFunction:!0}),vVe="quantileSeq",yVe=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],bVe=ee(vVe,yVe,t=>{var{typed:e,bignumber:n,add:r,subtract:a,divide:s,multiply:i,partitionSelect:o,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d}=t,h=YV({typed:e,bignumber:n,add:r,subtract:a,divide:s,multiply:i,partitionSelect:o,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d});return e("quantileSeq",{"Array | Matrix, number | BigNumber":h,"Array | Matrix, number | BigNumber, number":(v,y,b)=>h(v,y,m(b)),"Array | Matrix, number | BigNumber, boolean":h,"Array | Matrix, number | BigNumber, boolean, number":(v,y,b,x)=>h(v,y,b,m(x)),"Array | Matrix, Array | Matrix":h,"Array | Matrix, Array | Matrix, number":(v,y,b)=>h(v,y,m(b)),"Array | Matrix, Array | Matrix, boolean":h,"Array | Matrix, Array | Matrix, boolean, number":(v,y,b,x)=>h(v,y,b,m(x))});function m(v){return Fl([[],v])[1]}},{isTransformFunction:!0}),$4="cumsum",wVe=["typed","add","unaryPlus"],xVe=ee($4,wVe,t=>{var{typed:e,add:n,unaryPlus:r}=t,a=GV({typed:e,add:n,unaryPlus:r});return e($4,{"...any":function(i){if(i.length===2&&wi(i[0])){var o=i[1];jt(o)?i[1]=o-1:Gt(o)&&(i[1]=o.minus(1))}try{return a.apply(null,i)}catch(u){throw Za(u)}}})},{isTransformFunction:!0}),k4="variance",SVe=["typed","add","subtract","multiply","divide","apply","isNaN"],NVe=ee(k4,SVe,t=>{var{typed:e,add:n,subtract:r,multiply:a,divide:s,apply:i,isNaN:o}=t,u=XV({typed:e,add:n,subtract:r,multiply:a,divide:s,apply:i,isNaN:o});return e(k4,{"...any":function(c){c=Fl(c);try{return u.apply(null,c)}catch(f){throw Za(f)}}})},{isTransformFunction:!0}),I4="print",CVe=["typed","matrix","zeros","add"],EVe=ee(I4,CVe,t=>{var{typed:e,matrix:n,zeros:r,add:a}=t,s=PV({typed:e,matrix:n,zeros:r,add:a});return e(I4,{"string, Object | Array":function(u,l){return s(i(u),l)},"string, Object | Array, number | Object":function(u,l,c){return s(i(u),l,c)}});function i(o){return o.replace(MV,u=>{var l=u.slice(1).split("."),c=l.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0}),TVe="and",DVe=["typed","matrix","zeros","add","equalScalar","not","concat"],AVe=ee(TVe,DVe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,not:s,concat:i}=t,o=BV({typed:e,matrix:n,equalScalar:r,zeros:a,not:s,concat:i});function u(l,c,f){var d=l[0].compile().evaluate(f);if(!wi(d)&&!o(d,!0))return!1;var h=l[1].compile().evaluate(f);return o(d,h)}return u.rawArgs=!0,u},{isTransformFunction:!0}),$Ve="or",kVe=["typed","matrix","equalScalar","DenseMatrix","concat"],IVe=ee($Ve,kVe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:s}=t,i=CV({typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:s});function o(u,l,c){var f=u[0].compile().evaluate(c);if(!wi(f)&&i(f,!1))return!0;var d=u[1].compile().evaluate(c);return i(f,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),_Ve="bitAnd",OVe=["typed","matrix","zeros","add","equalScalar","not","concat"],FVe=ee(_Ve,OVe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,not:s,concat:i}=t,o=SV({typed:e,matrix:n,equalScalar:r,zeros:a,not:s,concat:i});function u(l,c,f){var d=l[0].compile().evaluate(f);if(!wi(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var h=l[1].compile().evaluate(f);return o(d,h)}return u.rawArgs=!0,u},{isTransformFunction:!0}),RVe="bitOr",MVe=["typed","matrix","equalScalar","DenseMatrix","concat"],PVe=ee(RVe,MVe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:s}=t,i=NV({typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:s});function o(u,l,c){var f=u[0].compile().evaluate(c);if(!wi(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var d=u[1].compile().evaluate(c);return i(f,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),rt=ake({config:Ue}),Rn=lke({}),_4=mUe({BigNumber:rt,config:Ue}),BVe=lUe({}),LVe=VUe({BigNumber:rt,config:Ue}),nf=gke({}),JV=NUe({Complex:Rn}),zVe=fUe({BigNumber:rt,config:Ue}),WVe=yUe({BigNumber:rt,config:Ue}),UVe=wUe({BigNumber:rt,config:Ue}),Hw=Ske({}),qVe=dUe({BigNumber:rt,config:Ue}),VVe=cUe({}),jVe=gUe({BigNumber:rt,config:Ue}),HVe=bke({}),ZV=u$e({}),GVe=xUe({BigNumber:rt,config:Ue}),KVe=lqe({BigNumber:rt,config:Ue}),e7=hUe({BigNumber:rt,config:Ue}),XVe=uUe({}),YVe=CUe({}),Kt=Pke({Matrix:Hw}),QVe=ZUe({BigNumber:rt,config:Ue}),JVe=vUe({BigNumber:rt,config:Ue}),iE=pUe({BigNumber:rt,config:Ue}),t7=iUe({}),ZVe=SUe({BigNumber:rt,config:Ue}),oe=a$e({BigNumber:rt,Complex:Rn,DenseMatrix:Kt,Fraction:nf}),e7e=JUe({BigNumber:rt,config:Ue}),es=ZIe({typed:oe}),t7e=NMe({Complex:Rn,config:Ue,typed:oe}),n7e=DMe({BigNumber:rt,typed:oe}),r7e=IMe({BigNumber:rt,Complex:Rn,config:Ue,typed:oe}),jr=r_e({typed:oe}),a7e=UOe({typed:oe}),s7e=PMe({BigNumber:rt,Complex:Rn,config:Ue,typed:oe}),i7e=UMe({typed:oe}),n7=jMe({typed:oe}),o7e=XMe({Complex:Rn,config:Ue,typed:oe}),u7e=CIe({typed:oe}),l7e=ROe({typed:oe}),c7e=AIe({typed:oe}),f7e=Lke({typed:oe}),Gw=eWe({typed:oe}),Kw=FIe({Complex:Rn,typed:oe}),rf=VOe({typed:oe}),n$=QMe({typed:oe}),d7e=tPe({BigNumber:rt,typed:oe}),p7e=sPe({BigNumber:rt,typed:oe}),h7e=y_e({typed:oe}),en=pIe({config:Ue,typed:oe}),m7e=uFe({typed:oe}),r7=w_e({typed:oe}),g7e=S_e({Complex:Rn,typed:oe}),v7e=DV({typed:oe}),Bg=f3e({typed:oe}),y7e=AV({typed:oe}),Lg=bFe({typed:oe}),r$=m3e({typed:oe}),b7e=EFe({format:Lg,typed:oe}),a$=HOe({typed:oe}),ms=Wke({typed:oe}),Rl=Jke({config:Ue,typed:oe}),af=aIe({config:Ue,typed:oe}),_o=iIe({equalScalar:en,typed:oe}),w7e=bUe({BigNumber:rt,config:Ue}),x7e=iWe({Complex:Rn,typed:oe}),S7e=tOe({Complex:Rn,config:Ue,typed:oe}),a7=rOe({Complex:Rn,config:Ue,typed:oe}),sf=$V({typed:oe}),gr=iOe({typed:oe}),Db=YOe({typed:oe}),vu=xIe({typed:oe}),N7e=NFe({format:Lg,typed:oe}),C7e=vWe({config:Ue,typed:oe}),E7e=PV({typed:oe}),T7e=bWe({config:Ue,typed:oe}),s$=KOe({typed:oe}),D7e=lPe({BigNumber:rt,typed:oe}),s7=dOe({BigNumber:rt,Fraction:nf,complex:Kw,typed:oe}),Xw=pPe({typed:oe}),Hr=gIe({Matrix:Hw,equalScalar:en,typed:oe}),A7e=GIe({typed:oe}),$7e=vOe({typed:oe}),k7e=TIe({typed:oe}),Ci=s_e({typed:oe}),I7e=vPe({typed:oe}),i$=cIe({typed:oe}),_7e=EMe({Complex:Rn,config:Ue,typed:oe}),O7e=OMe({BigNumber:rt,typed:oe}),o$=jA({isInteger:ms,typed:oe}),F7e=RMe({BigNumber:rt,Complex:Rn,config:Ue,typed:oe}),hi=IIe({BigNumber:rt,typed:oe}),R7e=nWe({typed:oe}),M7e=ZMe({typed:oe}),P7e=oPe({BigNumber:rt,typed:oe}),zg=uIe({typed:oe}),B7e=kFe({typed:oe}),L7e=xWe({config:Ue,typed:oe}),z7e=fPe({BigNumber:rt,typed:oe}),W7e=mPe({typed:oe}),U7e=bMe({SparseMatrix:Hr,typed:oe}),Zi=mOe({Complex:Rn,config:Ue,typed:oe}),q7e=L3e({typed:oe}),V7e=wPe({typed:oe}),Oo=XIe({typed:oe}),j7e=$Me({BigNumber:rt,Complex:Rn,config:Ue,typed:oe}),H7e=xFe({format:Lg,typed:oe}),G7e=rPe({BigNumber:rt,typed:oe}),Wg=PIe({Fraction:nf,typed:oe}),of=eIe({typed:oe}),nt=LIe({DenseMatrix:Kt,Matrix:Hw,SparseMatrix:Hr,typed:oe}),K7e=WIe({isZero:_o,matrix:nt,typed:oe}),X7e=mFe({isNaN:zg,isNumeric:of,typed:oe}),mi=OFe({bignumber:hi,fraction:Wg,number:vu}),i7=vFe({config:Ue,multiplyScalar:gr,numeric:mi,typed:oe}),o7=D3e({isInteger:ms,matrix:nt,typed:oe}),wa=P3e({matrix:nt,config:Ue,typed:oe}),Ug=j3e({matrix:nt,typed:oe}),u7=xOe({BigNumber:rt,config:Ue,matrix:nt,typed:oe}),da=X3e({BigNumber:rt,config:Ue,matrix:nt,typed:oe}),Y7e=LMe({Complex:Rn,config:Ue,typed:oe}),l7=o_e({BigNumber:rt,Complex:Rn,Fraction:nf,config:Ue,isNegative:Rl,matrix:nt,typed:oe,unaryMinus:Oo}),hn=EV({isInteger:ms,matrix:nt,typed:oe}),Q7e=r3e({prod:i7,size:wa,typed:oe}),u$=G3e({conj:rf,transpose:Ug,typed:oe}),c7=o3e({DenseMatrix:Kt,SparseMatrix:Hr,matrix:nt,typed:oe}),rr=RFe({numeric:mi,typed:oe}),qg=XFe({DenseMatrix:Kt,SparseMatrix:Hr,concat:hn,divideScalar:rr,equalScalar:en,matrix:nt,typed:oe}),Ei=CRe({DenseMatrix:Kt,SparseMatrix:Hr,concat:hn,equalScalar:en,matrix:nt,typed:oe}),J7e=nIe({isNumeric:of,typed:oe}),Ml=v3e({BigNumber:rt,DenseMatrix:Kt,SparseMatrix:Hr,config:Ue,matrix:nt,typed:oe}),Z7e=b3e({matrix:nt,multiplyScalar:gr,typed:oe}),Yw=BRe({DenseMatrix:Kt,SparseMatrix:Hr,concat:hn,config:Ue,matrix:nt,typed:oe}),e9e=oRe({DenseMatrix:Kt,concat:hn,equalScalar:en,matrix:nt,typed:oe,zeros:da}),f7=QFe({DenseMatrix:Kt,divideScalar:rr,equalScalar:en,matrix:nt,multiplyScalar:gr,subtractScalar:Ci,typed:oe}),l$=jIe({flatten:Bg,matrix:nt,size:wa,typed:oe}),t9e=cOe({BigNumber:rt,concat:hn,equalScalar:en,matrix:nt,typed:oe}),n9e=C3e({BigNumber:rt,config:Ue,matrix:nt,typed:oe}),c$=eBe({addScalar:jr,complex:Kw,conj:rf,divideScalar:rr,equal:Ei,identity:Ml,isZero:_o,matrix:nt,multiplyScalar:gr,sign:s7,sqrt:Zi,subtractScalar:Ci,typed:oe,unaryMinus:Oo,zeros:da}),r9e=k3e({config:Ue,matrix:nt}),a9e=lRe({DenseMatrix:Kt,concat:hn,equalScalar:en,matrix:nt,typed:oe,zeros:da}),vp=LFe({BigNumber:rt,DenseMatrix:Kt,config:Ue,equalScalar:en,matrix:nt,typed:oe,zeros:da}),Ga=$Re({DenseMatrix:Kt,SparseMatrix:Hr,concat:hn,config:Ue,matrix:nt,typed:oe}),xr=bOe({DenseMatrix:Kt,concat:hn,equalScalar:en,matrix:nt,subtractScalar:Ci,typed:oe,unaryMinus:Oo}),s9e=AFe({concat:hn,matrix:nt,typed:oe}),f$=QIe({config:Ue,numeric:mi,typed:oe}),d$=ZFe({DenseMatrix:Kt,divideScalar:rr,equalScalar:en,matrix:nt,multiplyScalar:gr,subtractScalar:Ci,typed:oe}),i9e=ZOe({DenseMatrix:Kt,SparseMatrix:Hr,concat:hn,matrix:nt,typed:oe}),ln=UPe({DenseMatrix:Kt,SparseMatrix:Hr,addScalar:jr,concat:hn,equalScalar:en,matrix:nt,typed:oe}),o9e=GMe({BigNumber:rt,DenseMatrix:Kt,concat:hn,equalScalar:en,matrix:nt,typed:oe}),u9e=SV({concat:hn,equalScalar:en,matrix:nt,typed:oe}),l9e=NV({DenseMatrix:Kt,concat:hn,equalScalar:en,matrix:nt,typed:oe}),c9e=zOe({DenseMatrix:Kt,SparseMatrix:Hr,concat:hn,matrix:nt,typed:oe}),f9e=DWe({addScalar:jr,combinations:Gw,divideScalar:rr,isInteger:ms,isNegative:Rl,multiplyScalar:gr,typed:oe}),uf=hRe({BigNumber:rt,DenseMatrix:Kt,Fraction:nf,concat:hn,config:Ue,equalScalar:en,matrix:nt,typed:oe}),d7=SRe({concat:hn,matrix:nt,typed:oe}),d9e=GV({add:ln,typed:oe,unaryPlus:f$}),p$=WRe({equal:Ei,typed:oe}),p9e=kV({matrix:nt,number:vu,subtract:xr,typed:oe}),h9e=P8e({abs:es,addScalar:jr,deepEqual:p$,divideScalar:rr,multiplyScalar:gr,sqrt:Zi,subtractScalar:Ci,typed:oe}),Qw=KPe({addScalar:jr,conj:rf,multiplyScalar:gr,size:wa,typed:oe}),m9e=DRe({compareText:d7,isZero:_o,typed:oe}),p7=bV({DenseMatrix:Kt,config:Ue,equalScalar:en,matrix:nt,round:vp,typed:oe,zeros:da}),g9e=X_e({BigNumber:rt,DenseMatrix:Kt,concat:hn,config:Ue,equalScalar:en,matrix:nt,round:vp,typed:oe,zeros:da}),v9e=VPe({abs:es,addScalar:jr,divideScalar:rr,isPositive:af,multiplyScalar:gr,smaller:Ga,sqrt:Zi,typed:oe}),h7=ZRe({DenseMatrix:Kt,smaller:Ga}),_a=nMe({ImmutableDenseMatrix:h7,getMatrixDataType:r$}),Ka=RRe({DenseMatrix:Kt,SparseMatrix:Hr,concat:hn,config:Ue,matrix:nt,typed:oe}),h$=WFe({Complex:Rn,config:Ue,divideScalar:rr,typeOf:i$,typed:oe}),y9e=tRe({DenseMatrix:Kt,divideScalar:rr,equalScalar:en,matrix:nt,multiplyScalar:gr,subtractScalar:Ci,typed:oe}),b9e=qIe({flatten:Bg,matrix:nt,size:wa,typed:oe}),w9e=zV({config:Ue,numeric:mi,smaller:Ga,typed:oe}),m7=wV({DenseMatrix:Kt,concat:hn,config:Ue,equalScalar:en,matrix:nt,round:vp,typed:oe,zeros:da}),Tn=uOe({addScalar:jr,dot:Qw,equalScalar:en,matrix:nt,multiplyScalar:gr,typed:oe}),x9e=jFe({Complex:Rn,config:Ue,divideScalar:rr,typed:oe}),S9e=CV({DenseMatrix:Kt,concat:hn,equalScalar:en,matrix:nt,typed:oe}),Jw=HRe({compare:uf,isNaN:zg,isNumeric:of,typed:oe}),N9e=fRe({DenseMatrix:Kt,concat:hn,equalScalar:en,matrix:nt,typed:oe,zeros:da}),g7=CBe({SparseMatrix:Hr,abs:es,add:ln,divideScalar:rr,larger:Ka,largerEq:Yw,multiply:Tn,subtract:xr,transpose:Ug,typed:oe}),Us=RV({add:ln,matrix:nt,typed:oe,zeros:da}),m$=HV({add:ln,config:Ue,numeric:mi,typed:oe}),C9e=QPe({add:ln,matrix:nt,typed:oe}),v7=rRe({DenseMatrix:Kt,divideScalar:rr,equalScalar:en,matrix:nt,multiplyScalar:gr,subtractScalar:Ci,typed:oe}),E9e=JWe({Complex:Rn,add:ln,multiply:Tn,number:vu,typed:oe}),g$=g_e({DenseMatrix:Kt,config:Ue,equalScalar:en,matrix:nt,round:vp,typed:oe,zeros:da}),Fo=bRe({compare:uf,typed:oe}),T9e=$We({addScalar:jr,combinations:Gw,isInteger:ms,isNegative:Rl,isPositive:af,larger:Ka,typed:oe}),D9e=s3e({matrix:nt,multiply:Tn,subtract:xr,typed:oe}),y7=p8e({divideScalar:rr,isZero:_o,matrix:nt,multiply:Tn,subtractScalar:Ci,typed:oe,unaryMinus:Oo}),A9e=DOe({concat:hn,equalScalar:en,matrix:nt,multiplyScalar:gr,typed:oe}),b7=sMe({larger:Ka,smaller:Ga}),w7=E_e({Complex:Rn,DenseMatrix:Kt,ceil:g$,equalScalar:en,floor:p7,matrix:nt,typed:oe,zeros:da}),x7=ZPe({Index:_a,typed:oe}),$9e=z8e({abs:es,add:ln,addScalar:jr,config:Ue,divideScalar:rr,equalScalar:en,flatten:Bg,isNumeric:of,isZero:_o,matrix:nt,multiply:Tn,multiplyScalar:gr,smaller:Ga,subtract:xr,typed:oe}),k9e=NOe({BigNumber:rt,add:ln,config:Ue,equal:Ei,isInteger:ms,mod:m7,smaller:Ga,typed:oe,xgcd:u7}),I9e=Z_e({concat:hn,equalScalar:en,matrix:nt,typed:oe}),_9e=qFe({Complex:Rn,config:Ue,divideScalar:rr,log:h$,typed:oe}),v$=LV({config:Ue,larger:Ka,numeric:mi,typed:oe}),O9e=SPe({DenseMatrix:Kt,Index:_a,compareNatural:Fo,size:wa,subset:Us,typed:oe}),F9e=TPe({DenseMatrix:Kt,Index:_a,compareNatural:Fo,size:wa,subset:Us,typed:oe}),R9e=kPe({Index:_a,compareNatural:Fo,size:wa,subset:Us,typed:oe}),M9e=FPe({Index:_a,compareNatural:Fo,size:wa,subset:Us,typed:oe}),zd=_Re({DenseMatrix:Kt,SparseMatrix:Hr,concat:hn,config:Ue,matrix:nt,typed:oe}),P9e=KRe({compare:uf,compareNatural:Fo,matrix:nt,typed:oe}),B9e=qRe({DenseMatrix:Kt,SparseMatrix:Hr,concat:hn,config:Ue,equalScalar:en,matrix:nt,typed:oe}),L9e=BV({concat:hn,equalScalar:en,matrix:nt,not:Db,typed:oe,zeros:da}),Wd=OV({bignumber:hi,matrix:nt,add:ln,config:Ue,isPositive:af,larger:Ka,largerEq:Yw,smaller:Ga,smallerEq:zd,typed:oe}),z9e=FV({Index:_a,matrix:nt,range:Wd,typed:oe}),S7=CPe({DenseMatrix:Kt,Index:_a,compareNatural:Fo,size:wa,subset:Us,typed:oe}),W9e=_Pe({Index:_a,compareNatural:Fo,size:wa,subset:Us,typed:oe}),N7=BPe({Index:_a,concat:hn,setDifference:S7,size:wa,subset:Us,typed:oe}),C7=uMe({FibonacciHeap:b7,addScalar:jr,equalScalar:en}),E7=TV({Index:_a,matrix:nt,range:Wd,typed:oe}),lf=m8e({abs:es,addScalar:jr,det:y7,divideScalar:rr,identity:Ml,matrix:nt,multiply:Tn,typed:oe,unaryMinus:Oo}),T7=J4e({DenseMatrix:Kt,Spa:C7,SparseMatrix:Hr,abs:es,addScalar:jr,divideScalar:rr,equalScalar:en,larger:Ka,matrix:nt,multiplyScalar:gr,subtractScalar:Ci,typed:oe,unaryMinus:Oo}),U9e=v8e({Complex:Rn,add:ln,ctranspose:u$,deepEqual:p$,divideScalar:rr,dot:Qw,dotDivide:qg,equal:Ei,inv:lf,matrix:nt,multiply:Tn,typed:oe}),eo=PFe({Complex:Rn,config:Ue,fraction:Wg,identity:Ml,inv:lf,matrix:nt,multiply:Tn,number:vu,typed:oe}),D7=APe({DenseMatrix:Kt,Index:_a,compareNatural:Fo,size:wa,subset:Us,typed:oe}),q9e=zPe({Index:_a,concat:hn,setIntersect:D7,setSymDifference:N7,size:wa,subset:Us,typed:oe}),V9e=T8e({abs:es,add:ln,identity:Ml,inv:lf,map:sf,max:v$,multiply:Tn,size:wa,sqrt:Zi,subtract:xr,typed:oe}),Bt=mMe({BigNumber:rt,Complex:Rn,Fraction:nf,abs:es,addScalar:jr,config:Ue,divideScalar:rr,equal:Ei,fix:w7,format:Lg,isNumeric:of,multiplyScalar:gr,number:vu,pow:eo,round:vp,subtractScalar:Ci}),j9e=IUe({BigNumber:rt,Unit:Bt,config:Ue}),H9e=dqe({BigNumber:rt,Unit:Bt,config:Ue}),G9e=eqe({BigNumber:rt,Unit:Bt,config:Ue}),K9e=FUe({BigNumber:rt,Unit:Bt,config:Ue}),X9e=nqe({BigNumber:rt,Unit:Bt,config:Ue}),Y9e=RUe({BigNumber:rt,Unit:Bt,config:Ue}),Q9e=_Ue({BigNumber:rt,Unit:Bt,config:Ue}),J9e=GUe({BigNumber:rt,Unit:Bt,config:Ue}),Z9e=GFe({DenseMatrix:Kt,SparseMatrix:Hr,concat:hn,equalScalar:en,matrix:nt,pow:eo,typed:oe}),eje=kUe({BigNumber:rt,Unit:Bt,config:Ue}),tje=OUe({BigNumber:rt,Unit:Bt,config:Ue}),nje=C8e({abs:es,add:ln,identity:Ml,inv:lf,multiply:Tn,typed:oe}),rje=rqe({BigNumber:rt,Unit:Bt,config:Ue}),A7=Q3e({addScalar:jr,ceil:g$,conj:rf,divideScalar:rr,dotDivide:qg,exp:r7,i:JV,log2:a7,matrix:nt,multiplyScalar:gr,pow:eo,tau:e7,typed:oe}),y$=aWe({BigNumber:rt,Complex:Rn,config:Ue,multiplyScalar:gr,pow:eo,typed:oe}),aje=TUe({BigNumber:rt,Unit:Bt,config:Ue}),sje=jUe({BigNumber:rt,Unit:Bt,config:Ue}),ije=Z3e({conj:rf,dotDivide:qg,fft:A7,typed:oe}),oje=LUe({BigNumber:rt,Unit:Bt,config:Ue}),uje=sqe({BigNumber:rt,Unit:Bt,config:Ue}),lje=$Ue({BigNumber:rt,Unit:Bt,config:Ue}),cje=pqe({BigNumber:rt,Unit:Bt,config:Ue}),fje=oqe({BigNumber:rt,Unit:Bt,config:Ue}),dje=KUe({BigNumber:rt,Unit:Bt,config:Ue}),pje=BUe({BigNumber:rt,Unit:Bt,config:Ue}),hje=bqe({BigNumber:rt,Unit:Bt,config:Ue}),mje=gqe({BigNumber:rt,Unit:Bt,config:Ue}),gje=wqe({BigNumber:rt,Unit:Bt,config:Ue}),vje=HUe({BigNumber:rt,Unit:Bt,config:Ue}),yje=XUe({BigNumber:rt,Unit:Bt,config:Ue}),bje=AUe({BigNumber:rt,Unit:Bt,config:Ue}),wje=YUe({BigNumber:rt,Unit:Bt,config:Ue}),xje=cqe({BigNumber:rt,Unit:Bt,config:Ue}),Sje=EUe({BigNumber:rt,Unit:Bt,config:Ue}),Nje=fqe({BigNumber:rt,Unit:Bt,config:Ue}),Cje=QUe({BigNumber:rt,Unit:Bt,config:Ue}),Eje=tqe({BigNumber:rt,Unit:Bt,config:Ue}),Tje=zUe({BigNumber:rt,Unit:Bt,config:Ue}),Dje=xMe({Unit:Bt,typed:oe}),ha=R8e({divideScalar:rr,equalScalar:en,inv:lf,matrix:nt,multiply:Tn,typed:oe}),Aje=UUe({BigNumber:rt,Unit:Bt,config:Ue}),Vg=uWe({gamma:y$,typed:oe}),$je=aqe({BigNumber:rt,Unit:Bt,config:Ue}),kje=mqe({BigNumber:rt,Unit:Bt,config:Ue}),Ije=MUe({BigNumber:rt,Unit:Bt,config:Ue}),$7=TBe({DenseMatrix:Kt,lsolve:f7,lup:T7,matrix:nt,slu:g7,typed:oe,usolve:d$}),_je=PUe({BigNumber:rt,Unit:Bt,config:Ue}),Oje=hqe({BigNumber:rt,Unit:Bt,config:Ue}),Fje=dWe({add:ln,divide:ha,factorial:Vg,isInteger:ms,isPositive:af,multiply:Tn,typed:oe}),Rje=hWe({factorial:Vg,typed:oe}),Mje=vqe({BigNumber:rt,Unit:Bt,config:Ue}),Pje=ABe({add:ln,cbrt:l7,divide:ha,equalScalar:en,im:a$,isZero:_o,multiply:Tn,re:s$,sqrt:Zi,subtract:xr,typeOf:i$,typed:oe,unaryMinus:Oo}),Bje=MPe({compareNatural:Fo,typed:oe}),Lje=sFe({abs:es,add:ln,bignumber:hi,divide:ha,isNegative:Rl,isPositive:af,larger:Ka,map:sf,matrix:nt,max:v$,multiply:Tn,smaller:Ga,subtract:xr,typed:oe,unaryMinus:Oo}),k7=NWe({bignumber:hi,addScalar:jr,combinations:Gw,divideScalar:rr,factorial:Vg,isInteger:ms,isNegative:Rl,larger:Ka,multiplyScalar:gr,number:vu,pow:eo,subtractScalar:Ci,typed:oe}),zje=vMe({Unit:Bt,typed:oe}),Wje=EWe({addScalar:jr,isInteger:ms,isNegative:Rl,stirlingS2:k7,typed:oe}),I7=S8e({abs:es,add:ln,addScalar:jr,atan:n7,bignumber:hi,column:E7,complex:Kw,config:Ue,cos:n$,diag:c7,divideScalar:rr,dot:Qw,equal:Ei,flatten:Bg,im:a$,inv:lf,larger:Ka,matrix:nt,matrixFromColumns:l$,multiply:Tn,multiplyScalar:gr,number:vu,qr:c$,re:s$,reshape:o7,sin:Xw,size:wa,smaller:Ga,sqrt:Zi,subtract:xr,typed:oe,usolve:d$,usolveAll:v7}),Uje=qUe({BigNumber:rt,Unit:Bt,config:Ue}),qje=iqe({BigNumber:rt,Unit:Bt,config:Ue}),Vje=cWe({divide:ha,dotDivide:qg,isNumeric:of,log:h$,map:sf,matrix:nt,multiply:Tn,sum:m$,typed:oe}),_7=KV({add:ln,divide:ha,typed:oe}),jje=uqe({BigNumber:rt,Unit:Bt,config:Ue}),Hje=DUe({BigNumber:rt,Unit:Bt,config:Ue}),Gje=YV({bignumber:hi,add:ln,compare:uf,divide:ha,isInteger:ms,larger:Ka,multiply:Tn,partitionSelect:Jw,smaller:Ga,smallerEq:zd,subtract:xr,typed:oe}),b$=XV({add:ln,apply:o$,divide:ha,isNaN:zg,multiply:Tn,subtract:xr,typed:oe}),Kje=WUe({BigNumber:rt,Unit:Bt,config:Ue}),O7=j8e({add:ln,compare:uf,divide:ha,partitionSelect:Jw,typed:oe}),Xje=J8e({add:ln,divide:ha,matrix:nt,mean:_7,multiply:Tn,pow:eo,sqrt:Zi,subtract:xr,sum:m$,typed:oe}),Yje=eUe({Complex:Rn,add:ln,divide:ha,matrix:nt,multiply:Tn,typed:oe}),Qje=G8e({abs:es,map:sf,median:O7,subtract:xr,typed:oe}),Jje=QV({map:sf,sqrt:Zi,typed:oe,variance:b$}),Zje=pFe({BigNumber:rt,Complex:Rn,add:ln,config:Ue,divide:ha,equal:Ei,factorial:Vg,gamma:y$,isNegative:Rl,multiply:Tn,pi:iE,pow:eo,sin:Xw,smallerEq:zd,subtract:xr,typed:oe}),w$=HPe({abs:es,add:ln,conj:rf,ctranspose:u$,eigs:I7,equalScalar:en,larger:Ka,matrix:nt,multiply:Tn,pow:eo,smaller:Ga,sqrt:Zi,typed:oe}),F7=F3e({BigNumber:rt,DenseMatrix:Kt,SparseMatrix:Hr,addScalar:jr,config:Ue,cos:n$,matrix:nt,multiplyScalar:gr,norm:w$,sin:Xw,typed:oe,unaryMinus:Oo}),eHe=yqe({BigNumber:rt,Unit:Bt,config:Ue}),R7=k8e({identity:Ml,matrix:nt,multiply:Tn,norm:w$,qr:c$,subtract:xr,typed:oe}),tHe=_3e({multiply:Tn,rotationMatrix:F7,typed:oe}),M7=A8e({abs:es,add:ln,concat:hn,identity:Ml,index:x7,lusolve:$7,matrix:nt,matrixFromColumns:l$,multiply:Tn,range:Wd,schur:R7,subset:Us,subtract:xr,transpose:Ug,typed:oe}),nHe=_8e({matrix:nt,multiply:Tn,sylvester:M7,transpose:Ug,typed:oe}),yp={},jg={},P7={},La=n4e({mathWithTransform:jg}),bp=T4e({Node:La}),yu=A4e({Node:La}),cf=k4e({Node:La}),B7=F4e({Node:La}),wp=i4e({Node:La}),L7=d4e({Node:La,ResultSet:ZV}),z7=h4e({Node:La}),Pl=w4e({Node:La}),W7=_4e({Node:La}),rHe=rUe({classes:P7}),x$=FBe({math:yp,typed:oe}),U7=S4e({Node:La,typed:oe}),aHe=f8e({Chain:x$,typed:oe}),xp=C4e({Node:La,size:wa}),Sp=a4e({Node:La,subset:Us}),q7=c4e({matrix:nt,Node:La,subset:Us}),Bl=P4e({Unit:Bt,Node:La,math:yp}),Ll=L4e({Node:La,SymbolNode:Bl,math:yp}),to=W4e({AccessorNode:Sp,ArrayNode:wp,AssignmentNode:q7,BlockNode:L7,ConditionalNode:z7,ConstantNode:Pl,FunctionAssignmentNode:U7,FunctionNode:Ll,IndexNode:xp,ObjectNode:bp,OperatorNode:yu,ParenthesisNode:cf,RangeNode:W7,RelationalNode:B7,SymbolNode:Bl,config:Ue,numeric:mi,typed:oe}),V7=VWe({ConstantNode:Pl,FunctionNode:Ll,OperatorNode:yu,ParenthesisNode:cf,parse:to,typed:oe}),S$=LWe({bignumber:hi,fraction:Wg,AccessorNode:Sp,ArrayNode:wp,ConstantNode:Pl,FunctionNode:Ll,IndexNode:xp,ObjectNode:bp,OperatorNode:yu,SymbolNode:Bl,config:Ue,mathWithTransform:jg,matrix:nt,typed:oe}),sHe=q4e({parse:to,typed:oe}),N$=WWe({AccessorNode:Sp,ArrayNode:wp,ConstantNode:Pl,FunctionNode:Ll,IndexNode:xp,ObjectNode:bp,OperatorNode:yu,ParenthesisNode:cf,SymbolNode:Bl,add:ln,divide:ha,equal:Ei,isZero:_o,multiply:Tn,parse:to,pow:eo,subtract:xr,typed:oe}),Zw=j4e({parse:to,typed:oe}),j7=IBe({evaluate:Zw}),H7=K4e({evaluate:Zw,parse:to}),ex=MWe({AccessorNode:Sp,ArrayNode:wp,ConstantNode:Pl,FunctionNode:Ll,IndexNode:xp,ObjectNode:bp,OperatorNode:yu,ParenthesisNode:cf,SymbolNode:Bl,equal:Ei,parse:to,replacer:t7,resolve:V7,simplifyConstant:S$,simplifyCore:N$,typed:oe}),iHe=HWe({OperatorNode:yu,parse:to,simplify:ex,typed:oe}),oHe=IWe({parse:to,typed:oe}),uHe=Y4e({Parser:H7,typed:oe}),lHe=YWe({bignumber:hi,fraction:Wg,AccessorNode:Sp,ArrayNode:wp,ConstantNode:Pl,FunctionNode:Ll,IndexNode:xp,ObjectNode:bp,OperatorNode:yu,ParenthesisNode:cf,SymbolNode:Bl,add:ln,config:Ue,divide:ha,equal:Ei,isZero:_o,mathWithTransform:jg,matrix:nt,multiply:Tn,parse:to,pow:eo,simplify:ex,simplifyConstant:S$,simplifyCore:N$,subtract:xr,typed:oe}),cHe=KWe({ConstantNode:Pl,FunctionNode:Ll,OperatorNode:yu,ParenthesisNode:cf,SymbolNode:Bl,config:Ue,equal:Ei,isZero:_o,numeric:mi,parse:to,simplify:ex,typed:oe}),fHe=l8e({Help:j7,mathWithTransform:jg,typed:oe});Br(yp,{e:_4,false:BVe,fineStructure:LVe,i:JV,Infinity:zVe,LN10:WVe,LOG10E:UVe,NaN:qVe,null:VVe,phi:jVe,SQRT1_2:GVe,sackurTetrode:KVe,tau:e7,true:XVe,E:_4,version:YVe,efimovFactor:QVe,LN2:JVe,pi:iE,replacer:t7,reviver:rHe,SQRT2:ZVe,typed:oe,PI:iE,weakMixingAngle:e7e,abs:es,acos:t7e,acot:n7e,acsc:r7e,addScalar:jr,arg:a7e,asech:s7e,asinh:i7e,atan:n7,atanh:o7e,bigint:u7e,bitNot:l7e,boolean:c7e,clone:f7e,combinations:Gw,complex:Kw,conj:rf,cos:n$,cot:d7e,csc:p7e,cube:h7e,equalScalar:en,erf:m7e,exp:r7,expm1:g7e,filter:v7e,flatten:Bg,forEach:y7e,format:Lg,getMatrixDataType:r$,hex:b7e,im:a$,isInteger:ms,isNegative:Rl,isPositive:af,isZero:_o,LOG2E:w7e,lgamma:x7e,log10:S7e,log2:a7,map:sf,multiplyScalar:gr,not:Db,number:vu,oct:N7e,pickRandom:C7e,print:E7e,random:T7e,re:s$,sec:D7e,sign:s7,sin:Xw,splitUnit:A7e,square:$7e,string:k7e,subtractScalar:Ci,tan:I7e,typeOf:i$,acosh:_7e,acsch:O7e,apply:o$,asec:F7e,bignumber:hi,chain:aHe,combinationsWithRep:R7e,cosh:M7e,csch:P7e,isNaN:zg,isPrime:B7e,randomInt:L7e,sech:z7e,sinh:W7e,sparse:U7e,sqrt:Zi,squeeze:q7e,tanh:V7e,unaryMinus:Oo,acoth:j7e,bin:H7e,coth:G7e,fraction:Wg,isNumeric:of,matrix:nt,matrixFromFunction:K7e,mode:X7e,numeric:mi,prod:i7,reshape:o7,size:wa,transpose:Ug,xgcd:u7,zeros:da,asin:Y7e,cbrt:l7,concat:hn,count:Q7e,ctranspose:u$,diag:c7,divideScalar:rr,dotDivide:qg,equal:Ei,hasNumericValue:J7e,identity:Ml,kron:Z7e,largerEq:Yw,leftShift:e9e,lsolve:f7,matrixFromColumns:l$,nthRoot:t9e,ones:n9e,qr:c$,resize:r9e,rightArithShift:a9e,round:vp,smaller:Ga,subtract:xr,to:s9e,unaryPlus:f$,usolve:d$,xor:i9e,add:ln,atan2:o9e,bitAnd:u9e,bitOr:l9e,bitXor:c9e,catalan:f9e,compare:uf,compareText:d7,cumsum:d9e,deepEqual:p$,diff:p9e,distance:h9e,dot:Qw,equalText:m9e,floor:p7,gcd:g9e,hypot:v9e,larger:Ka,log:h$,lsolveAll:y9e,matrixFromRows:b9e,min:w9e,mod:m7,multiply:Tn,nthRoots:x9e,or:S9e,partitionSelect:Jw,rightLogShift:N9e,slu:g7,subset:Us,sum:m$,trace:C9e,usolveAll:v7,zpk2tf:E9e,ceil:g$,compareNatural:Fo,composition:T9e,cross:D9e,det:y7,dotMultiply:A9e,fix:w7,index:x7,intersect:$9e,invmod:k9e,lcm:I9e,log1p:_9e,max:v$,setCartesian:O9e,setDistinct:F9e,setIsSubset:R9e,setPowerset:M9e,smallerEq:zd,sort:P9e,unequal:B9e,and:L9e,range:Wd,row:z9e,setDifference:S7,setMultiplicity:W9e,setSymDifference:N7,column:E7,inv:lf,lup:T7,pinv:U9e,pow:eo,setIntersect:D7,setUnion:q9e,sqrtm:V9e,vacuumImpedance:j9e,wienDisplacement:H9e,atomicMass:G9e,bohrMagneton:K9e,boltzmann:X9e,conductanceQuantum:Y9e,coulomb:Q9e,deuteronMass:J9e,dotPow:Z9e,electricConstant:eje,elementaryCharge:tje,expm:nje,faraday:rje,fft:A7,gamma:y$,gravitationConstant:aje,hartreeEnergy:sje,ifft:ije,klitzing:oje,loschmidt:uje,magneticConstant:lje,molarMass:cje,molarPlanckConstant:fje,neutronMass:dje,nuclearMagneton:pje,planckCharge:hje,planckLength:mje,planckTemperature:gje,protonMass:vje,quantumOfCirculation:yje,reducedPlanckConstant:bje,rydberg:wje,secondRadiation:xje,speedOfLight:Sje,stefanBoltzmann:Nje,thomsonCrossSection:Cje,avogadro:Eje,bohrRadius:Tje,createUnit:Dje,divide:ha,electronMass:Aje,factorial:Vg,firstRadiation:$je,gravity:kje,inverseConductanceQuantum:Ije,lusolve:$7,magneticFluxQuantum:_je,molarMassC12:Oje,multinomial:Fje,parse:to,permutations:Rje,planckMass:Mje,polynomialRoot:Pje,resolve:V7,setSize:Bje,simplifyConstant:S$,solveODE:Lje,stirlingS2:k7,unit:zje,bellNumbers:Wje,compile:sHe,eigs:I7,fermiCoupling:Uje,gasConstant:qje,kldivergence:Vje,mean:_7,molarVolume:jje,planckConstant:Hje,quantileSeq:Gje,simplifyCore:N$,variance:b$,classicalElectronRadius:Kje,evaluate:Zw,median:O7,simplify:ex,symbolicEqual:iHe,corr:Xje,freqz:Yje,leafCount:oHe,mad:Qje,parser:uHe,rationalize:lHe,std:Jje,zeta:Zje,derivative:cHe,norm:w$,rotationMatrix:F7,help:fHe,planckTime:eHe,schur:R7,rotate:tHe,sylvester:M7,lyap:nHe,config:Ue});Br(jg,yp,{filter:Iqe({typed:oe}),forEach:Fqe({typed:oe}),map:zqe({typed:oe}),apply:Nqe({isInteger:ms,typed:oe}),or:IVe({DenseMatrix:Kt,concat:hn,equalScalar:en,matrix:nt,typed:oe}),and:AVe({add:ln,concat:hn,equalScalar:en,matrix:nt,not:Db,typed:oe,zeros:da}),concat:lVe({isInteger:ms,matrix:nt,typed:oe}),max:jqe({config:Ue,larger:Ka,numeric:mi,typed:oe}),print:EVe({add:ln,matrix:nt,typed:oe,zeros:da}),bitAnd:FVe({add:ln,concat:hn,equalScalar:en,matrix:nt,not:Db,typed:oe,zeros:da}),diff:fVe({bignumber:hi,matrix:nt,number:vu,subtract:xr,typed:oe}),min:Qqe({config:Ue,numeric:mi,smaller:Ga,typed:oe}),subset:iVe({add:ln,matrix:nt,typed:oe,zeros:da}),bitOr:PVe({DenseMatrix:Kt,concat:hn,equalScalar:en,matrix:nt,typed:oe}),cumsum:xVe({add:ln,typed:oe,unaryPlus:f$}),index:Pqe({Index:_a,getMatrixDataType:r$}),sum:gVe({add:ln,config:Ue,numeric:mi,typed:oe}),range:eVe({bignumber:hi,matrix:nt,add:ln,config:Ue,isPositive:af,larger:Ka,largerEq:Yw,smaller:Ga,smallerEq:zd,typed:oe}),row:rVe({Index:_a,matrix:nt,range:Wd,typed:oe}),column:Tqe({Index:_a,matrix:nt,range:Wd,typed:oe}),mean:Kqe({add:ln,divide:ha,typed:oe}),quantileSeq:bVe({add:ln,bignumber:hi,compare:uf,divide:ha,isInteger:ms,larger:Ka,multiply:Tn,partitionSelect:Jw,smaller:Ga,smallerEq:zd,subtract:xr,typed:oe}),variance:NVe({add:ln,apply:o$,divide:ha,isNaN:zg,multiply:Tn,subtract:xr,typed:oe}),std:hVe({map:sf,sqrt:Zi,typed:oe,variance:b$})});Br(P7,{BigNumber:rt,Complex:Rn,Fraction:nf,Matrix:Hw,Node:La,ObjectNode:bp,OperatorNode:yu,ParenthesisNode:cf,Range:HVe,RelationalNode:B7,ResultSet:ZV,ArrayNode:wp,BlockNode:L7,ConditionalNode:z7,ConstantNode:Pl,DenseMatrix:Kt,RangeNode:W7,Chain:x$,FunctionAssignmentNode:U7,SparseMatrix:Hr,IndexNode:xp,ImmutableDenseMatrix:h7,Index:_a,AccessorNode:Sp,AssignmentNode:q7,FibonacciHeap:b7,Spa:C7,Unit:Bt,SymbolNode:Bl,FunctionNode:Ll,Help:j7,Parser:H7});x$.createProxy(yp);/*!
* sweetalert2 v11.14.5
* Released under the MIT License.
*/function G7(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function dHe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function O4(t,e){return t.get(G7(t,e))}function pHe(t,e,n){dHe(t,e),e.set(t,n)}function hHe(t,e,n){return t.set(G7(t,e),n),n}const mHe=100,Ot={},gHe=()=>{Ot.previousActiveElement instanceof HTMLElement?(Ot.previousActiveElement.focus(),Ot.previousActiveElement=null):document.body&&document.body.focus()},vHe=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,r=window.scrollY;Ot.restoreFocusTimeout=setTimeout(()=>{gHe(),e()},mHe),window.scrollTo(n,r)}),K7="swal2-",yHe=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],ze=yHe.reduce((t,e)=>(t[e]=K7+e,t),{}),bHe=["success","warning","info","question","error"],Ab=bHe.reduce((t,e)=>(t[e]=K7+e,t),{}),X7="SweetAlert2:",C$=t=>t.charAt(0).toUpperCase()+t.slice(1),Ds=t=>{console.warn(`${X7} ${typeof t=="object"?t.join(" "):t}`)},ff=t=>{console.error(`${X7} ${t}`)},F4=[],wHe=t=>{F4.includes(t)||(F4.push(t),Ds(t))},Y7=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;wHe(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},tx=t=>typeof t=="function"?t():t,E$=t=>t&&typeof t.toPromise=="function",Hg=t=>E$(t)?t.toPromise():Promise.resolve(t),T$=t=>t&&Promise.resolve(t)===t,As=()=>document.body.querySelector(`.${ze.container}`),Gg=t=>{const e=As();return e?e.querySelector(t):null},qs=t=>Gg(`.${t}`),On=()=>qs(ze.popup),Kg=()=>qs(ze.icon),xHe=()=>qs(ze["icon-content"]),Q7=()=>qs(ze.title),D$=()=>qs(ze["html-container"]),J7=()=>qs(ze.image),A$=()=>qs(ze["progress-steps"]),nx=()=>qs(ze["validation-message"]),Do=()=>Gg(`.${ze.actions} .${ze.confirm}`),Np=()=>Gg(`.${ze.actions} .${ze.cancel}`),df=()=>Gg(`.${ze.actions} .${ze.deny}`),SHe=()=>qs(ze["input-label"]),Cp=()=>Gg(`.${ze.loader}`),Xg=()=>qs(ze.actions),Z7=()=>qs(ze.footer),rx=()=>qs(ze["timer-progress-bar"]),$$=()=>qs(ze.close),NHe=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,k$=()=>{const t=On();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((s,i)=>{const o=parseInt(s.getAttribute("tabindex")||"0"),u=parseInt(i.getAttribute("tabindex")||"0");return o>u?1:o<u?-1:0}),r=t.querySelectorAll(NHe),a=Array.from(r).filter(s=>s.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(a))].filter(s=>gs(s))},I$=()=>tu(document.body,ze.shown)&&!tu(document.body,ze["toast-shown"])&&!tu(document.body,ze["no-backdrop"]),ax=()=>{const t=On();return t?tu(t,ze.toast):!1},CHe=()=>{const t=On();return t?t.hasAttribute("data-loading"):!1},Vs=(t,e)=>{if(t.textContent="",e){const r=new DOMParser().parseFromString(e,"text/html"),a=r.querySelector("head");a&&Array.from(a.childNodes).forEach(i=>{t.appendChild(i)});const s=r.querySelector("body");s&&Array.from(s.childNodes).forEach(i=>{i instanceof HTMLVideoElement||i instanceof HTMLAudioElement?t.appendChild(i.cloneNode(!0)):t.appendChild(i)})}},tu=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let r=0;r<n.length;r++)if(!t.classList.contains(n[r]))return!1;return!0},EHe=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(ze).includes(n)&&!Object.values(Ab).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},Bs=(t,e,n)=>{if(EHe(t,e),!e.customClass)return;const r=e.customClass[n];if(r){if(typeof r!="string"&&!r.forEach){Ds(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`);return}Nn(t,r)}},sx=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${ze.popup} > .${ze[e]}`);case"checkbox":return t.querySelector(`.${ze.popup} > .${ze.checkbox} input`);case"radio":return t.querySelector(`.${ze.popup} > .${ze.radio} input:checked`)||t.querySelector(`.${ze.popup} > .${ze.radio} input:first-child`);case"range":return t.querySelector(`.${ze.popup} > .${ze.range} input`);default:return t.querySelector(`.${ze.popup} > .${ze.input}`)}},e9=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},t9=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(r=>{Array.isArray(t)?t.forEach(a=>{n?a.classList.add(r):a.classList.remove(r)}):n?t.classList.add(r):t.classList.remove(r)}))},Nn=(t,e)=>{t9(t,e,!0)},Ao=(t,e)=>{t9(t,e,!1)},Xu=(t,e)=>{const n=Array.from(t.children);for(let r=0;r<n.length;r++){const a=n[r];if(a instanceof HTMLElement&&tu(a,e))return a}},Nc=(t,e,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},ra=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";t&&(t.style.display=e)},Ra=t=>{t&&(t.style.display="none")},_$=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";t&&new MutationObserver(()=>{Yg(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},R4=(t,e,n,r)=>{const a=t.querySelector(e);a&&a.style.setProperty(n,r)},Yg=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";e?ra(t,n):Ra(t)},gs=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),THe=()=>!gs(Do())&&!gs(df())&&!gs(Np()),M4=t=>t.scrollHeight>t.clientHeight,n9=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||r>0},O$=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=rx();n&&gs(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},DHe=()=>{const t=rx();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),r=e/n*100;t.style.width=`${r}%`},AHe=()=>typeof window>"u"||typeof document>"u",$He=`
 <div aria-labelledby="${ze.title}" aria-describedby="${ze["html-container"]}" class="${ze.popup}" tabindex="-1">
   <button type="button" class="${ze.close}"></button>
   <ul class="${ze["progress-steps"]}"></ul>
   <div class="${ze.icon}"></div>
   <img class="${ze.image}" />
   <h2 class="${ze.title}" id="${ze.title}"></h2>
   <div class="${ze["html-container"]}" id="${ze["html-container"]}"></div>
   <input class="${ze.input}" id="${ze.input}" />
   <input type="file" class="${ze.file}" />
   <div class="${ze.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${ze.select}" id="${ze.select}"></select>
   <div class="${ze.radio}"></div>
   <label class="${ze.checkbox}">
     <input type="checkbox" id="${ze.checkbox}" />
     <span class="${ze.label}"></span>
   </label>
   <textarea class="${ze.textarea}" id="${ze.textarea}"></textarea>
   <div class="${ze["validation-message"]}" id="${ze["validation-message"]}"></div>
   <div class="${ze.actions}">
     <div class="${ze.loader}"></div>
     <button type="button" class="${ze.confirm}"></button>
     <button type="button" class="${ze.deny}"></button>
     <button type="button" class="${ze.cancel}"></button>
   </div>
   <div class="${ze.footer}"></div>
   <div class="${ze["timer-progress-bar-container"]}">
     <div class="${ze["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),kHe=()=>{const t=As();return t?(t.remove(),Ao([document.documentElement,document.body],[ze["no-backdrop"],ze["toast-shown"],ze["has-column"]]),!0):!1},ic=()=>{Ot.currentInstance.resetValidationMessage()},IHe=()=>{const t=On(),e=Xu(t,ze.input),n=Xu(t,ze.file),r=t.querySelector(`.${ze.range} input`),a=t.querySelector(`.${ze.range} output`),s=Xu(t,ze.select),i=t.querySelector(`.${ze.checkbox} input`),o=Xu(t,ze.textarea);e.oninput=ic,n.onchange=ic,s.onchange=ic,i.onchange=ic,o.oninput=ic,r.oninput=()=>{ic(),a.value=r.value},r.onchange=()=>{ic(),a.value=r.value}},_He=t=>typeof t=="string"?document.querySelector(t):t,OHe=t=>{const e=On();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},FHe=t=>{window.getComputedStyle(t).direction==="rtl"&&Nn(As(),ze.rtl)},RHe=t=>{const e=kHe();if(AHe()){ff("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=ze.container,e&&Nn(n,ze["no-transition"]),Vs(n,$He);const r=_He(t.target);r.appendChild(n),OHe(t),FHe(r),IHe()},F$=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?MHe(t,e):t&&Vs(e,t)},MHe=(t,e)=>{t.jquery?PHe(e,t):Vs(e,t.toString())},PHe=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},BHe=(t,e)=>{const n=Xg(),r=Cp();!n||!r||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?Ra(n):ra(n),Bs(n,e,"actions"),LHe(n,r,e),Vs(r,e.loaderHtml||""),Bs(r,e,"loader"))};function LHe(t,e,n){const r=Do(),a=df(),s=Np();!r||!a||!s||(KS(r,"confirm",n),KS(a,"deny",n),KS(s,"cancel",n),zHe(r,a,s,n),n.reverseButtons&&(n.toast?(t.insertBefore(s,r),t.insertBefore(a,r)):(t.insertBefore(s,e),t.insertBefore(a,e),t.insertBefore(r,e))))}function zHe(t,e,n,r){if(!r.buttonsStyling){Ao([t,e,n],ze.styled);return}Nn([t,e,n],ze.styled),r.confirmButtonColor&&(t.style.backgroundColor=r.confirmButtonColor,Nn(t,ze["default-outline"])),r.denyButtonColor&&(e.style.backgroundColor=r.denyButtonColor,Nn(e,ze["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,Nn(n,ze["default-outline"]))}function KS(t,e,n){const r=C$(e);Yg(t,n[`show${r}Button`],"inline-block"),Vs(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=ze[e],Bs(t,n,`${e}Button`)}const WHe=(t,e)=>{const n=$$();n&&(Vs(n,e.closeButtonHtml||""),Bs(n,e,"closeButton"),Yg(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},UHe=(t,e)=>{const n=As();n&&(qHe(n,e.backdrop),VHe(n,e.position),jHe(n,e.grow),Bs(n,e,"container"))};function qHe(t,e){typeof e=="string"?t.style.background=e:e||Nn([document.documentElement,document.body],ze["no-backdrop"])}function VHe(t,e){e&&(e in ze?Nn(t,ze[e]):(Ds('The "position" parameter is not valid, defaulting to "center"'),Nn(t,ze.center)))}function jHe(t,e){e&&Nn(t,ze[`grow-${e}`])}var Hn={innerParams:new WeakMap,domCache:new WeakMap};const HHe=["input","file","range","select","radio","checkbox","textarea"],GHe=(t,e)=>{const n=On();if(!n)return;const r=Hn.innerParams.get(t),a=!r||e.input!==r.input;HHe.forEach(s=>{const i=Xu(n,ze[s]);i&&(YHe(s,e.inputAttributes),i.className=ze[s],a&&Ra(i))}),e.input&&(a&&KHe(e),QHe(e))},KHe=t=>{if(!t.input)return;if(!yr[t.input]){ff(`Unexpected type of input! Expected ${Object.keys(yr).join(" | ")}, got "${t.input}"`);return}const e=r9(t.input);if(!e)return;const n=yr[t.input](e,t);ra(e),t.inputAutoFocus&&setTimeout(()=>{e9(n)})},XHe=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},YHe=(t,e)=>{const n=On();if(!n)return;const r=sx(n,t);if(r){XHe(r);for(const a in e)r.setAttribute(a,e[a])}},QHe=t=>{if(!t.input)return;const e=r9(t.input);e&&Bs(e,t,"input")},R$=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},Qg=(t,e,n)=>{if(n.inputLabel){const r=document.createElement("label"),a=ze["input-label"];r.setAttribute("for",t.id),r.className=a,typeof n.customClass=="object"&&Nn(r,n.customClass.inputLabel),r.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",r)}},r9=t=>{const e=On();if(e)return Xu(e,ze[t]||ze.input)},$b=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:T$(e)||Ds(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},yr={};yr.text=yr.email=yr.password=yr.number=yr.tel=yr.url=yr.search=yr.date=yr["datetime-local"]=yr.time=yr.week=yr.month=(t,e)=>($b(t,e.inputValue),Qg(t,t,e),R$(t,e),t.type=e.input,t);yr.file=(t,e)=>(Qg(t,t,e),R$(t,e),t);yr.range=(t,e)=>{const n=t.querySelector("input"),r=t.querySelector("output");return $b(n,e.inputValue),n.type=e.input,$b(r,e.inputValue),Qg(n,t,e),t};yr.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");Vs(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return Qg(t,t,e),t};yr.radio=t=>(t.textContent="",t);yr.checkbox=(t,e)=>{const n=sx(On(),"checkbox");n.value="1",n.checked=!!e.inputValue;const r=t.querySelector("span");return Vs(r,e.inputPlaceholder||e.inputLabel),n};yr.textarea=(t,e)=>{$b(t,e.inputValue),R$(t,e),Qg(t,t,e);const n=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(On()).width),a=()=>{if(!document.body.contains(t))return;const s=t.offsetWidth+n(t);s>r?On().style.width=`${s}px`:Nc(On(),"width",e.width)};new MutationObserver(a).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const JHe=(t,e)=>{const n=D$();n&&(_$(n),Bs(n,e,"htmlContainer"),e.html?(F$(e.html,n),ra(n,"block")):e.text?(n.textContent=e.text,ra(n,"block")):Ra(n),GHe(t,e))},ZHe=(t,e)=>{const n=Z7();n&&(_$(n),Yg(n,e.footer,"block"),e.footer&&F$(e.footer,n),Bs(n,e,"footer"))},eGe=(t,e)=>{const n=Hn.innerParams.get(t),r=Kg();if(r){if(n&&e.icon===n.icon){B4(r,e),P4(r,e);return}if(!e.icon&&!e.iconHtml){Ra(r);return}if(e.icon&&Object.keys(Ab).indexOf(e.icon)===-1){ff(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),Ra(r);return}ra(r),B4(r,e),P4(r,e),Nn(r,e.showClass&&e.showClass.icon)}},P4=(t,e)=>{for(const[n,r]of Object.entries(Ab))e.icon!==n&&Ao(t,r);Nn(t,e.icon&&Ab[e.icon]),aGe(t,e),tGe(),Bs(t,e,"icon")},tGe=()=>{const t=On();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=e},nGe=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,rGe=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,B4=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,r="";e.iconHtml?r=L4(e.iconHtml):e.icon==="success"?(r=nGe,n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?r=rGe:e.icon&&(r=L4({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==r.trim()&&Vs(t,r)},aGe=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])R4(t,n,"background-color",e.iconColor);R4(t,".swal2-success-ring","border-color",e.iconColor)}},L4=t=>`<div class="${ze["icon-content"]}">${t}</div>`,sGe=(t,e)=>{const n=J7();if(n){if(!e.imageUrl){Ra(n);return}ra(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),Nc(n,"width",e.imageWidth),Nc(n,"height",e.imageHeight),n.className=ze.image,Bs(n,e,"image")}},iGe=(t,e)=>{const n=As(),r=On();if(!(!n||!r)){if(e.toast){Nc(n,"width",e.width),r.style.width="100%";const a=Cp();a&&r.insertBefore(a,Kg())}else Nc(r,"width",e.width);Nc(r,"padding",e.padding),e.color&&(r.style.color=e.color),e.background&&(r.style.background=e.background),Ra(nx()),oGe(r,e)}},oGe=(t,e)=>{const n=e.showClass||{};t.className=`${ze.popup} ${gs(t)?n.popup:""}`,e.toast?(Nn([document.documentElement,document.body],ze["toast-shown"]),Nn(t,ze.toast)):Nn(t,ze.modal),Bs(t,e,"popup"),typeof e.customClass=="string"&&Nn(t,e.customClass),e.icon&&Nn(t,ze[`icon-${e.icon}`])},uGe=(t,e)=>{const n=A$();if(!n)return;const{progressSteps:r,currentProgressStep:a}=e;if(!r||r.length===0||a===void 0){Ra(n);return}ra(n),n.textContent="",a>=r.length&&Ds("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((s,i)=>{const o=lGe(s);if(n.appendChild(o),i===a&&Nn(o,ze["active-progress-step"]),i!==r.length-1){const u=cGe(e);n.appendChild(u)}})},lGe=t=>{const e=document.createElement("li");return Nn(e,ze["progress-step"]),Vs(e,t),e},cGe=t=>{const e=document.createElement("li");return Nn(e,ze["progress-step-line"]),t.progressStepsDistance&&Nc(e,"width",t.progressStepsDistance),e},fGe=(t,e)=>{const n=Q7();n&&(_$(n),Yg(n,e.title||e.titleText,"block"),e.title&&F$(e.title,n),e.titleText&&(n.innerText=e.titleText),Bs(n,e,"title"))},a9=(t,e)=>{iGe(t,e),UHe(t,e),uGe(t,e),eGe(t,e),sGe(t,e),fGe(t,e),WHe(t,e),JHe(t,e),BHe(t,e),ZHe(t,e);const n=On();typeof e.didRender=="function"&&n&&e.didRender(n),Ot.eventEmitter.emit("didRender",n)},dGe=()=>gs(On()),s9=()=>{var t;return(t=Do())===null||t===void 0?void 0:t.click()},pGe=()=>{var t;return(t=df())===null||t===void 0?void 0:t.click()},hGe=()=>{var t;return(t=Np())===null||t===void 0?void 0:t.click()},Ep=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),i9=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},mGe=(t,e,n)=>{i9(t),e.toast||(t.keydownHandler=r=>vGe(e,r,n),t.keydownTarget=e.keydownListenerCapture?window:On(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},oE=(t,e)=>{var n;const r=k$();if(r.length){t=t+e,t===r.length?t=0:t===-1&&(t=r.length-1),r[t].focus();return}(n=On())===null||n===void 0||n.focus()},o9=["ArrowRight","ArrowDown"],gGe=["ArrowLeft","ArrowUp"],vGe=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?yGe(e,t):e.key==="Tab"?bGe(e):[...o9,...gGe].includes(e.key)?wGe(e.key):e.key==="Escape"&&xGe(e,t,n)))},yGe=(t,e)=>{if(!tx(e.allowEnterKey))return;const n=sx(On(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;s9(),t.preventDefault()}},bGe=t=>{const e=t.target,n=k$();let r=-1;for(let a=0;a<n.length;a++)if(e===n[a]){r=a;break}t.shiftKey?oE(r,-1):oE(r,1),t.stopPropagation(),t.preventDefault()},wGe=t=>{const e=Xg(),n=Do(),r=df(),a=Np();if(!e||!n||!r||!a)return;const s=[n,r,a];if(document.activeElement instanceof HTMLElement&&!s.includes(document.activeElement))return;const i=o9.includes(t)?"nextElementSibling":"previousElementSibling";let o=document.activeElement;if(o){for(let u=0;u<e.children.length;u++){if(o=o[i],!o)return;if(o instanceof HTMLButtonElement&&gs(o))break}o instanceof HTMLButtonElement&&o.focus()}},xGe=(t,e,n)=>{tx(e.allowEscapeKey)&&(t.preventDefault(),n(Ep.esc))};var Ud={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const SGe=()=>{const t=As();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},u9=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},l9=typeof window<"u"&&!!window.GestureEvent,NGe=()=>{if(l9&&!tu(document.body,ze.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,Nn(document.body,ze.iosfix),CGe()}},CGe=()=>{const t=As();if(!t)return;let e;t.ontouchstart=n=>{e=EGe(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},EGe=t=>{const e=t.target,n=As(),r=D$();return!n||!r||TGe(t)||DGe(t)?!1:e===n||!M4(n)&&e instanceof HTMLElement&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(M4(r)&&r.contains(e))},TGe=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",DGe=t=>t.touches&&t.touches.length>1,AGe=()=>{if(tu(document.body,ze.iosfix)){const t=parseInt(document.body.style.top,10);Ao(document.body,ze.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},$Ge=()=>{const t=document.createElement("div");t.className=ze["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let md=null;const kGe=t=>{md===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(md=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${md+$Ge()}px`)},IGe=()=>{md!==null&&(document.body.style.paddingRight=`${md}px`,md=null)};function c9(t,e,n,r){ax()?z4(t,r):(vHe(n).then(()=>z4(t,r)),i9(Ot)),l9?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),I$()&&(IGe(),AGe(),u9()),_Ge()}function _Ge(){Ao([document.documentElement,document.body],[ze.shown,ze["height-auto"],ze["no-backdrop"],ze["toast-shown"]])}function Yu(t){t=FGe(t);const e=Ud.swalPromiseResolve.get(this),n=OGe(this);this.isAwaitingPromise?t.isDismissed||(Jg(this),e(t)):n&&e(t)}const OGe=t=>{const e=On();if(!e)return!1;const n=Hn.innerParams.get(t);if(!n||tu(e,n.hideClass.popup))return!1;Ao(e,n.showClass.popup),Nn(e,n.hideClass.popup);const r=As();return Ao(r,n.showClass.backdrop),Nn(r,n.hideClass.backdrop),RGe(t,e,n),!0};function f9(t){const e=Ud.swalPromiseReject.get(this);Jg(this),e&&e(t)}const Jg=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,Hn.innerParams.get(t)||t._destroy())},FGe=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),RGe=(t,e,n)=>{var r;const a=As(),s=n9(e);typeof n.willClose=="function"&&n.willClose(e),(r=Ot.eventEmitter)===null||r===void 0||r.emit("willClose",e),s?MGe(t,e,a,n.returnFocus,n.didClose):c9(t,a,n.returnFocus,n.didClose)},MGe=(t,e,n,r,a)=>{Ot.swalCloseEventFinishedCallback=c9.bind(null,t,n,r,a);const s=function(i){if(i.target===e){var o;(o=Ot.swalCloseEventFinishedCallback)===null||o===void 0||o.call(Ot),delete Ot.swalCloseEventFinishedCallback,e.removeEventListener("animationend",s),e.removeEventListener("transitionend",s)}};e.addEventListener("animationend",s),e.addEventListener("transitionend",s)},z4=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=Ot.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},qd=t=>{let e=On();if(e||new Fb,e=On(),!e)return;const n=Cp();ax()?Ra(Kg()):PGe(e,t),ra(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},PGe=(t,e)=>{const n=Xg(),r=Cp();!n||!r||(!e&&gs(Do())&&(e=Do()),ra(n),e&&(Ra(e),r.setAttribute("data-button-to-replace",e.className),n.insertBefore(r,e)),Nn([t,n],ze.loading))},BGe=(t,e)=>{e.input==="select"||e.input==="radio"?qGe(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(E$(e.inputValue)||T$(e.inputValue))&&(qd(Do()),VGe(t,e))},LGe=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return zGe(n);case"radio":return WGe(n);case"file":return UGe(n);default:return e.inputAutoTrim?n.value.trim():n.value}},zGe=t=>t.checked?1:0,WGe=t=>t.checked?t.value:null,UGe=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,qGe=(t,e)=>{const n=On();if(!n)return;const r=a=>{e.input==="select"?jGe(n,kb(a),e):e.input==="radio"&&HGe(n,kb(a),e)};E$(e.inputOptions)||T$(e.inputOptions)?(qd(Do()),Hg(e.inputOptions).then(a=>{t.hideLoading(),r(a)})):typeof e.inputOptions=="object"?r(e.inputOptions):ff(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},VGe=(t,e)=>{const n=t.getInput();n&&(Ra(n),Hg(e.inputValue).then(r=>{n.value=e.input==="number"?`${parseFloat(r)||0}`:`${r}`,ra(n),n.focus(),t.hideLoading()}).catch(r=>{ff(`Error in inputValue promise: ${r}`),n.value="",ra(n),n.focus(),t.hideLoading()}))};function jGe(t,e,n){const r=Xu(t,ze.select);if(!r)return;const a=(s,i,o)=>{const u=document.createElement("option");u.value=o,Vs(u,i),u.selected=d9(o,n.inputValue),s.appendChild(u)};e.forEach(s=>{const i=s[0],o=s[1];if(Array.isArray(o)){const u=document.createElement("optgroup");u.label=i,u.disabled=!1,r.appendChild(u),o.forEach(l=>a(u,l[1],l[0]))}else a(r,o,i)}),r.focus()}function HGe(t,e,n){const r=Xu(t,ze.radio);if(!r)return;e.forEach(s=>{const i=s[0],o=s[1],u=document.createElement("input"),l=document.createElement("label");u.type="radio",u.name=ze.radio,u.value=i,d9(i,n.inputValue)&&(u.checked=!0);const c=document.createElement("span");Vs(c,o),c.className=ze.label,l.appendChild(u),l.appendChild(c),r.appendChild(l)});const a=r.querySelectorAll("input");a.length&&a[0].focus()}const kb=t=>{const e=[];return t instanceof Map?t.forEach((n,r)=>{let a=n;typeof a=="object"&&(a=kb(a)),e.push([r,a])}):Object.keys(t).forEach(n=>{let r=t[n];typeof r=="object"&&(r=kb(r)),e.push([n,r])}),e},d9=(t,e)=>!!e&&e.toString()===t.toString(),GGe=t=>{const e=Hn.innerParams.get(t);t.disableButtons(),e.input?p9(t,"confirm"):P$(t,!0)},KGe=t=>{const e=Hn.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?p9(t,"deny"):M$(t,!1)},XGe=(t,e)=>{t.disableButtons(),e(Ep.cancel)},p9=(t,e)=>{const n=Hn.innerParams.get(t);if(!n.input){ff(`The "input" parameter is needed to be set when using returnInputValueOn${C$(e)}`);return}const r=t.getInput(),a=LGe(t,n);n.inputValidator?YGe(t,a,e):r&&!r.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||r.validationMessage)):e==="deny"?M$(t,a):P$(t,a)},YGe=(t,e,n)=>{const r=Hn.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>Hg(r.inputValidator(e,r.validationMessage))).then(s=>{t.enableButtons(),t.enableInput(),s?t.showValidationMessage(s):n==="deny"?M$(t,e):P$(t,e)})},M$=(t,e)=>{const n=Hn.innerParams.get(t||void 0);n.showLoaderOnDeny&&qd(df()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>Hg(n.preDeny(e,n.validationMessage))).then(a=>{a===!1?(t.hideLoading(),Jg(t)):t.close({isDenied:!0,value:typeof a>"u"?e:a})}).catch(a=>h9(t||void 0,a))):t.close({isDenied:!0,value:e})},W4=(t,e)=>{t.close({isConfirmed:!0,value:e})},h9=(t,e)=>{t.rejectPromise(e)},P$=(t,e)=>{const n=Hn.innerParams.get(t||void 0);n.showLoaderOnConfirm&&qd(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>Hg(n.preConfirm(e,n.validationMessage))).then(a=>{gs(nx())||a===!1?(t.hideLoading(),Jg(t)):W4(t,typeof a>"u"?e:a)}).catch(a=>h9(t||void 0,a))):W4(t,e)};function Ib(){const t=Hn.innerParams.get(this);if(!t)return;const e=Hn.domCache.get(this);Ra(e.loader),ax()?t.icon&&ra(Kg()):QGe(e),Ao([e.popup,e.actions],ze.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const QGe=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?ra(e[0],"inline-block"):THe()&&Ra(t.actions)};function m9(){const t=Hn.innerParams.get(this),e=Hn.domCache.get(this);return e?sx(e.popup,t.input):null}function g9(t,e,n){const r=Hn.domCache.get(t);e.forEach(a=>{r[a].disabled=n})}function v9(t,e){const n=On();if(!(!n||!t))if(t.type==="radio"){const r=n.querySelectorAll(`[name="${ze.radio}"]`);for(let a=0;a<r.length;a++)r[a].disabled=e}else t.disabled=e}function y9(){g9(this,["confirmButton","denyButton","cancelButton"],!1)}function b9(){g9(this,["confirmButton","denyButton","cancelButton"],!0)}function w9(){v9(this.getInput(),!1)}function x9(){v9(this.getInput(),!0)}function S9(t){const e=Hn.domCache.get(this),n=Hn.innerParams.get(this);Vs(e.validationMessage,t),e.validationMessage.className=ze["validation-message"],n.customClass&&n.customClass.validationMessage&&Nn(e.validationMessage,n.customClass.validationMessage),ra(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",ze["validation-message"]),e9(r),Nn(r,ze.inputerror))}function N9(){const t=Hn.domCache.get(this);t.validationMessage&&Ra(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Ao(e,ze.inputerror))}const gd={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},JGe=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],ZGe={allowEnterKey:void 0},eKe=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],C9=t=>Object.prototype.hasOwnProperty.call(gd,t),E9=t=>JGe.indexOf(t)!==-1,T9=t=>ZGe[t],tKe=t=>{C9(t)||Ds(`Unknown parameter "${t}"`)},nKe=t=>{eKe.includes(t)&&Ds(`The parameter "${t}" is incompatible with toasts`)},rKe=t=>{const e=T9(t);e&&Y7(t,e)},aKe=t=>{t.backdrop===!1&&t.allowOutsideClick&&Ds('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const e in t)tKe(e),t.toast&&nKe(e),rKe(e)};function D9(t){const e=On(),n=Hn.innerParams.get(this);if(!e||tu(e,n.hideClass.popup)){Ds("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const r=sKe(t),a=Object.assign({},n,r);a9(this,a),Hn.innerParams.set(this,a),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const sKe=t=>{const e={};return Object.keys(t).forEach(n=>{E9(n)?e[n]=t[n]:Ds(`Invalid parameter to update: ${n}`)}),e};function A9(){const t=Hn.domCache.get(this),e=Hn.innerParams.get(this);if(!e){$9(this);return}t.popup&&Ot.swalCloseEventFinishedCallback&&(Ot.swalCloseEventFinishedCallback(),delete Ot.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),Ot.eventEmitter.emit("didDestroy"),iKe(this)}const iKe=t=>{$9(t),delete t.params,delete Ot.keydownHandler,delete Ot.keydownTarget,delete Ot.currentInstance},$9=t=>{t.isAwaitingPromise?(XS(Hn,t),t.isAwaitingPromise=!0):(XS(Ud,t),XS(Hn,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},XS=(t,e)=>{for(const n in t)t[n].delete(e)};var oKe=Object.freeze({__proto__:null,_destroy:A9,close:Yu,closeModal:Yu,closePopup:Yu,closeToast:Yu,disableButtons:b9,disableInput:x9,disableLoading:Ib,enableButtons:y9,enableInput:w9,getInput:m9,handleAwaitingPromise:Jg,hideLoading:Ib,rejectPromise:f9,resetValidationMessage:N9,showValidationMessage:S9,update:D9});const uKe=(t,e,n)=>{t.toast?lKe(t,e,n):(fKe(e),dKe(e),pKe(t,e,n))},lKe=(t,e,n)=>{e.popup.onclick=()=>{t&&(cKe(t)||t.timer||t.input)||n(Ep.close)}},cKe=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let _b=!1;const fKe=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(_b=!0)}}},dKe=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(_b=!0)}}},pKe=(t,e,n)=>{e.container.onclick=r=>{if(_b){_b=!1;return}r.target===e.container&&tx(t.allowOutsideClick)&&n(Ep.backdrop)}},hKe=t=>typeof t=="object"&&t.jquery,U4=t=>t instanceof Element||hKe(t),mKe=t=>{const e={};return typeof t[0]=="object"&&!U4(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,r)=>{const a=t[r];typeof a=="string"||U4(a)?e[n]=a:a!==void 0&&ff(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof a}`)}),e};function gKe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new this(...e)}function vKe(t){class e extends this{_main(r,a){return super._main(r,Object.assign({},t,a))}}return e}const yKe=()=>Ot.timeout&&Ot.timeout.getTimerLeft(),k9=()=>{if(Ot.timeout)return DHe(),Ot.timeout.stop()},I9=()=>{if(Ot.timeout){const t=Ot.timeout.start();return O$(t),t}},bKe=()=>{const t=Ot.timeout;return t&&(t.running?k9():I9())},wKe=t=>{if(Ot.timeout){const e=Ot.timeout.increase(t);return O$(e,!0),e}},xKe=()=>!!(Ot.timeout&&Ot.timeout.isRunning());let q4=!1;const uE={};function SKe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";uE[t]=this,q4||(document.body.addEventListener("click",NKe),q4=!0)}const NKe=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in uE){const r=e.getAttribute(n);if(r){uE[n].fire({template:r});return}}};class CKe{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const r=this._getHandlersByEventName(e);r.includes(n)||r.push(n)}once(e,n){var r=this;const a=function(){r.removeListener(e,a);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];n.apply(r,i)};this.on(e,a)}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this._getHandlersByEventName(e).forEach(s=>{try{s.apply(this,r)}catch(i){console.error(i)}})}removeListener(e,n){const r=this._getHandlersByEventName(e),a=r.indexOf(n);a>-1&&r.splice(a,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}Ot.eventEmitter=new CKe;const EKe=(t,e)=>{Ot.eventEmitter.on(t,e)},TKe=(t,e)=>{Ot.eventEmitter.once(t,e)},DKe=(t,e)=>{if(!t){Ot.eventEmitter.reset();return}e?Ot.eventEmitter.removeListener(t,e):Ot.eventEmitter.removeAllListeners(t)};var AKe=Object.freeze({__proto__:null,argsToParams:mKe,bindClickHandler:SKe,clickCancel:hGe,clickConfirm:s9,clickDeny:pGe,enableLoading:qd,fire:gKe,getActions:Xg,getCancelButton:Np,getCloseButton:$$,getConfirmButton:Do,getContainer:As,getDenyButton:df,getFocusableElements:k$,getFooter:Z7,getHtmlContainer:D$,getIcon:Kg,getIconContent:xHe,getImage:J7,getInputLabel:SHe,getLoader:Cp,getPopup:On,getProgressSteps:A$,getTimerLeft:yKe,getTimerProgressBar:rx,getTitle:Q7,getValidationMessage:nx,increaseTimer:wKe,isDeprecatedParameter:T9,isLoading:CHe,isTimerRunning:xKe,isUpdatableParameter:E9,isValidParameter:C9,isVisible:dGe,mixin:vKe,off:DKe,on:EKe,once:TKe,resumeTimer:I9,showLoading:qd,stopTimer:k9,toggleTimer:bKe});class $Ke{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const _9=["swal-title","swal-html","swal-footer"],kKe=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return BKe(n),Object.assign(IKe(n),_Ke(n),OKe(n),FKe(n),RKe(n),MKe(n),PKe(n,_9))},IKe=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(r=>{Wc(r,["name","value"]);const a=r.getAttribute("name"),s=r.getAttribute("value");!a||!s||(typeof gd[a]=="boolean"?e[a]=s!=="false":typeof gd[a]=="object"?e[a]=JSON.parse(s):e[a]=s)}),e},_Ke=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(r=>{const a=r.getAttribute("name"),s=r.getAttribute("value");!a||!s||(e[a]=new Function(`return ${s}`)())}),e},OKe=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(r=>{Wc(r,["type","color","aria-label"]);const a=r.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(e[`${a}ButtonText`]=r.innerHTML,e[`show${C$(a)}Button`]=!0,r.hasAttribute("color")&&(e[`${a}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(e[`${a}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),e},FKe=t=>{const e={},n=t.querySelector("swal-image");return n&&(Wc(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},RKe=t=>{const e={},n=t.querySelector("swal-icon");return n&&(Wc(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},MKe=t=>{const e={},n=t.querySelector("swal-input");n&&(Wc(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const r=Array.from(t.querySelectorAll("swal-input-option"));return r.length&&(e.inputOptions={},r.forEach(a=>{Wc(a,["value"]);const s=a.getAttribute("value");if(!s)return;const i=a.innerHTML;e.inputOptions[s]=i})),e},PKe=(t,e)=>{const n={};for(const r in e){const a=e[r],s=t.querySelector(a);s&&(Wc(s,[]),n[a.replace(/^swal-/,"")]=s.innerHTML.trim())}return n},BKe=t=>{const e=_9.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const r=n.tagName.toLowerCase();e.includes(r)||Ds(`Unrecognized element <${r}>`)})},Wc=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&Ds([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},O9=10,LKe=t=>{const e=As(),n=On();typeof t.willOpen=="function"&&t.willOpen(n),Ot.eventEmitter.emit("willOpen",n);const a=window.getComputedStyle(document.body).overflowY;UKe(e,n,t),setTimeout(()=>{zKe(e,n)},O9),I$()&&(WKe(e,t.scrollbarPadding,a),SGe()),!ax()&&!Ot.previousActiveElement&&(Ot.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),Ot.eventEmitter.emit("didOpen",n),Ao(e,ze["no-transition"])},Ob=t=>{const e=On();if(t.target!==e)return;const n=As();e.removeEventListener("animationend",Ob),e.removeEventListener("transitionend",Ob),n.style.overflowY="auto"},zKe=(t,e)=>{n9(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",Ob),e.addEventListener("transitionend",Ob)):t.style.overflowY="auto"},WKe=(t,e,n)=>{NGe(),e&&n!=="hidden"&&kGe(n),setTimeout(()=>{t.scrollTop=0})},UKe=(t,e,n)=>{Nn(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),ra(e,"grid"),setTimeout(()=>{Nn(e,n.showClass.popup),e.style.removeProperty("opacity")},O9)):ra(e,"grid"),Nn([document.documentElement,document.body],ze.shown),n.heightAuto&&n.backdrop&&!n.toast&&Nn([document.documentElement,document.body],ze["height-auto"])};var V4={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function qKe(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=V4.email),t.input==="url"&&(t.inputValidator=V4.url))}function VKe(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(Ds('Target parameter is not valid, defaulting to "body"'),t.target="body")}function jKe(t){qKe(t),t.showLoaderOnConfirm&&!t.preConfirm&&Ds(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),VKe(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),RHe(t)}let lo;var e0=new WeakMap;class Sr{constructor(){if(pHe(this,e0,void 0),typeof window>"u")return;lo=this;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const a=Object.freeze(this.constructor.argsToParams(n));this.params=a,this.isAwaitingPromise=!1,hHe(e0,this,this._main(lo.params))}_main(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(aKe(Object.assign({},n,e)),Ot.currentInstance){const s=Ud.swalPromiseResolve.get(Ot.currentInstance),{isAwaitingPromise:i}=Ot.currentInstance;Ot.currentInstance._destroy(),i||s({isDismissed:!0}),I$()&&u9()}Ot.currentInstance=lo;const r=GKe(e,n);jKe(r),Object.freeze(r),Ot.timeout&&(Ot.timeout.stop(),delete Ot.timeout),clearTimeout(Ot.restoreFocusTimeout);const a=KKe(lo);return a9(lo,r),Hn.innerParams.set(lo,r),HKe(lo,a,r)}then(e){return O4(e0,this).then(e)}finally(e){return O4(e0,this).finally(e)}}const HKe=(t,e,n)=>new Promise((r,a)=>{const s=i=>{t.close({isDismissed:!0,dismiss:i})};Ud.swalPromiseResolve.set(t,r),Ud.swalPromiseReject.set(t,a),e.confirmButton.onclick=()=>{GGe(t)},e.denyButton.onclick=()=>{KGe(t)},e.cancelButton.onclick=()=>{XGe(t,s)},e.closeButton.onclick=()=>{s(Ep.close)},uKe(n,e,s),mGe(Ot,n,s),BGe(t,n),LKe(n),XKe(Ot,n,s),YKe(e,n),setTimeout(()=>{e.container.scrollTop=0})}),GKe=(t,e)=>{const n=kKe(t),r=Object.assign({},gd,e,n,t);return r.showClass=Object.assign({},gd.showClass,r.showClass),r.hideClass=Object.assign({},gd.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},KKe=t=>{const e={popup:On(),container:As(),actions:Xg(),confirmButton:Do(),denyButton:df(),cancelButton:Np(),loader:Cp(),closeButton:$$(),validationMessage:nx(),progressSteps:A$()};return Hn.domCache.set(t,e),e},XKe=(t,e,n)=>{const r=rx();Ra(r),e.timer&&(t.timeout=new $Ke(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(ra(r),Bs(r,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&O$(e.timer)})))},YKe=(t,e)=>{if(!e.toast){if(!tx(e.allowEnterKey)){Y7("allowEnterKey"),ZKe();return}QKe(t)||JKe(t,e)||oE(-1,1)}},QKe=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&gs(n))return n.focus(),!0;return!1},JKe=(t,e)=>e.focusDeny&&gs(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&gs(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&gs(t.confirmButton)?(t.confirmButton.focus(),!0):!1,ZKe=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const t=new Date,e=localStorage.getItem("swal-initiation");e?(t.getTime()-Date.parse(e))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const n=document.createElement("audio");n.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",n.loop=!0,document.body.appendChild(n),setTimeout(()=>{n.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${t}`)}Sr.prototype.disableButtons=b9;Sr.prototype.enableButtons=y9;Sr.prototype.getInput=m9;Sr.prototype.disableInput=x9;Sr.prototype.enableInput=w9;Sr.prototype.hideLoading=Ib;Sr.prototype.disableLoading=Ib;Sr.prototype.showValidationMessage=S9;Sr.prototype.resetValidationMessage=N9;Sr.prototype.close=Yu;Sr.prototype.closePopup=Yu;Sr.prototype.closeModal=Yu;Sr.prototype.closeToast=Yu;Sr.prototype.rejectPromise=f9;Sr.prototype.update=D9;Sr.prototype._destroy=A9;Object.assign(Sr,AKe);Object.keys(oKe).forEach(t=>{Sr[t]=function(){return lo&&lo[t]?lo[t](...arguments):null}});Sr.DismissReason=Ep;Sr.version="11.14.5";const Fb=Sr;Fb.default=Fb;typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}');const j4=[{key:"title",getter:t=>t.getTitle()},{key:"html",getter:t=>t.getHtmlContainer()},{key:"confirmButtonText",getter:t=>t.getConfirmButton()},{key:"denyButtonText",getter:t=>t.getDenyButton()},{key:"cancelButtonText",getter:t=>t.getCancelButton()},{key:"footer",getter:t=>t.getFooter()},{key:"closeButtonHtml",getter:t=>t.getCloseButton()},{key:"iconHtml",getter:t=>t.getIconContent()},{key:"loaderHtml",getter:t=>t.getLoader()}],YS=()=>{};function eXe(t){function e(a){const s={},i={},o=j4.map(u=>u.key);return Object.entries(a).forEach(u=>{let[l,c]=u;o.includes(l)&&_e.isValidElement(c)?(s[l]=c,i[l]=" "):i[l]=c}),[s,i]}function n(a,s){Object.entries(s).forEach(i=>{let[o,u]=i;const c=j4.find(d=>d.key===o).getter(t),f=H4.createRoot(c);f.render(u),a.__roots.push(f)})}function r(a){a.__roots.forEach(s=>{s.unmount()}),a.__roots=[]}return class extends t{static argsToParams(a){if(_e.isValidElement(a[0])||_e.isValidElement(a[1])){const s={};return["title","html","icon"].forEach((i,o)=>{a[o]!==void 0&&(s[i]=a[o])}),s}else return t.argsToParams(a)}_main(a,s){this.__roots=[],this.__params=Object.assign({},s,a);const[i,o]=e(this.__params),u=o.willOpen||YS,l=o.didOpen||YS,c=o.didDestroy||YS;return super._main(Object.assign({},o,{willOpen:f=>{n(this,i),u(f)},didOpen:f=>{setTimeout(()=>{l(f)})},didDestroy:f=>{c(f),r(this)}}))}update(a){Object.assign(this.__params,a),r(this);const[s,i]=e(this.__params);super.update(i),n(this,s)}}}const QS=eXe(Fb),tXe=({messages:t,setMessages:e})=>{const[n,r]=vn.useState(null),[a,s]=vn.useState([]),[i,o]=vn.useState(!0);vn.useEffect(()=>{(async()=>{QS.fire({title:"Cargando...",text:"Por favor espera mientras se carga el modelo",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{QS.showLoading()}});try{await kZ("webgl"),await IZ();const y=await Que();r(y);const b=sF.map(w=>w.question),x=await y.embed(b);s(x),console.log("Modelo y embeddings cargados")}catch(y){console.error("Error al cargar el modelo:",y)}finally{QS.close(),o(!1)}})()},[]);const u=v=>/^[0-9+\-*/().\s]+$/.test(v.trim()),l=v=>{const y=/cunto es\s*([\d+\-*/().\s]+)/i,b=v.match(y);return b?b[1]:null},c=v=>{try{return`El resultado es: ${Zw(v)}`}catch{return"Lo siento, no pude calcular esa expresin. Puedes verificar si es correcta?"}},f=async v=>{var C;if(!n)return"El modelo an no est listo, por favor espera un momento.";const y=v.trim().toLowerCase();if(u(y))return c(y);const b=l(y);if(b)return c(b);const x=await n.embed([y]),N=nn(x,a,!1,!0).argMax(1).arraySync()[0];return((C=sF[N])==null?void 0:C.answer)||"Lo siento, Solo puedo ayudarte con consultas relacionadas con Python, Javascript, Libros y Musica"},d=async v=>{v=v.replace(/<br>/gi," ").trim(),console.log(v);const y={message:v,sentTime:"justo ahora",sender:"Usuario"};e(x=>[...x,y]);const b=await f(v);v=v.toLowerCase(),e(x=>[...x,{message:v.includes("ejemplo")||v.includes("example")?`<strong>${b}</strong>`:`${b}`,sentTime:"justo ahora",sender:"Chatbot"}])},h=()=>{window.open("https://github.com/David15Barrera/IA1_Proyecto_14","_blank")},m=()=>{window.open("https://docs.google.com/document/d/1LMlRCXIJDtd6WjROhLJ9EWjPF22yaBZnxbYc1hWmCOc/edit?usp=sharing","_blank")};return Tt.jsx("div",{className:"w-full flex justify-center items-start h-screen mt-2",children:i?Tt.jsx("div",{className:"flex items-center justify-center w-full h-full",children:Tt.jsx("span",{className:"text-white text-xl",children:"Cargando el chat..."})}):Tt.jsx(fJ,{style:{width:"100%",maxWidth:"800px",height:"88vh",backgroundColor:"#1e1e1e",borderRadius:"12px",overflow:"hidden"},children:Tt.jsxs(jQ,{children:[Tt.jsxs(Qu,{style:{padding:"1px",backgroundColor:"#1e1e1e"},children:[Tt.jsx(Cc,{name:"Emily",title:"Emily",src:"https://chatscope.io/storybook/react/assets/emily-xzL8sDL2.svg",style:{padding:"4px",backgroundColor:"#1e1e1e"}}),Tt.jsx(Qu.Content,{children:Tt.jsx("span",{style:{alignSelf:"flex-center",color:"#fff"},children:"Emily ChatBot de Python y Javascript"})}),Tt.jsxs(Qu.Actions,{children:[Tt.jsx(UK,{title:"Ver Codigo Fuente en GitHub",onClick:h}),Tt.jsx(MK,{title:"Ver Manual de Usuario",onClick:m})]})]}),Tt.jsx(Hd,{typingIndicator:Tt.jsx(AJ,{style:{padding:"10px",backgroundColor:"#1e1e1e"},content:"Emily is typing"}),style:{flex:"1 1 auto",overflowY:"auto",padding:"10px",backgroundColor:"#1e1e1e"},children:t.map((v,y)=>Tt.jsx(yl,{model:{message:v.message,sentTime:v.sentTime,sender:v.sender,direction:v.sender==="Usuario"?"outgoing":"incoming",position:"single",type:"html"},children:v.sender!=="Usuario"&&Tt.jsx(Cc,{name:"Emily",src:"https://chatscope.io/storybook/react/assets/emily-xzL8sDL2.svg"})},y))}),Tt.jsx(Lb,{placeholder:"Escribe tu mensaje aqu...",onSend:d,attachButton:!0,autoFocus:!0,typeof:"text",style:{borderTop:"1px solid #444",backgroundColor:"#1e1e1e",color:"#fff"}})]})})})},nXe=()=>{const t=[{message:"Hola! Soy Emily un chatbot asistente en Python, Javascritp, Libros y Musica. En qu puedo ayudarte?",sentTime:"justo ahora",sender:"Chatbot"}],[e,n]=vn.useState(t),r=()=>{n(t)};return Tt.jsxs("div",{className:"h-screen flex flex-col bg-primary text-text",children:[Tt.jsx(WH,{}),Tt.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[Tt.jsx(qH,{resetChat:r}),Tt.jsx("div",{className:"flex-1",children:Tt.jsx(tXe,{messages:e,setMessages:n})})]})]})};H4.createRoot(document.getElementById("root")).render(Tt.jsx(vn.StrictMode,{children:Tt.jsx(nXe,{})}));
