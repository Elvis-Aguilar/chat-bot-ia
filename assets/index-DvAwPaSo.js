function j9(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function gc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function X9(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var Hw={exports:{}},Tp={},jw={exports:{}},rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LI;function K9(){if(LI)return rn;LI=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function d(q){return q===null||typeof q!="object"?null:(q=f&&q[f]||q["@@iterator"],typeof q=="function"?q:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function y(q,H,G){this.props=q,this.context=H,this.refs=v,this.updater=G||h}y.prototype.isReactComponent={},y.prototype.setState=function(q,H){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,H,"setState")},y.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function b(){}b.prototype=y.prototype;function w(q,H,G){this.props=q,this.context=H,this.refs=v,this.updater=G||h}var x=w.prototype=new b;x.constructor=w,m(x,y.prototype),x.isPureReactComponent=!0;var S=Array.isArray,C=Object.prototype.hasOwnProperty,E={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function k(q,H,G){var ne,ue={},te=null,se=null;if(H!=null)for(ne in H.ref!==void 0&&(se=H.ref),H.key!==void 0&&(te=""+H.key),H)C.call(H,ne)&&!A.hasOwnProperty(ne)&&(ue[ne]=H[ne]);var J=arguments.length-2;if(J===1)ue.children=G;else if(1<J){for(var K=Array(J),ae=0;ae<J;ae++)K[ae]=arguments[ae+2];ue.children=K}if(q&&q.defaultProps)for(ne in J=q.defaultProps,J)ue[ne]===void 0&&(ue[ne]=J[ne]);return{$$typeof:t,type:q,key:te,ref:se,props:ue,_owner:E.current}}function T(q,H){return{$$typeof:t,type:q.type,key:H,ref:q.ref,props:q.props,_owner:q._owner}}function I(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function $(q){var H={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(G){return H[G]})}var O=/\/+/g;function B(q,H){return typeof q=="object"&&q!==null&&q.key!=null?$(""+q.key):H.toString(36)}function z(q,H,G,ne,ue){var te=typeof q;(te==="undefined"||te==="boolean")&&(q=null);var se=!1;if(q===null)se=!0;else switch(te){case"string":case"number":se=!0;break;case"object":switch(q.$$typeof){case t:case e:se=!0}}if(se)return se=q,ue=ue(se),q=ne===""?"."+B(se,0):ne,S(ue)?(G="",q!=null&&(G=q.replace(O,"$&/")+"/"),z(ue,H,G,"",function(ae){return ae})):ue!=null&&(I(ue)&&(ue=T(ue,G+(!ue.key||se&&se.key===ue.key?"":(""+ue.key).replace(O,"$&/")+"/")+q)),H.push(ue)),1;if(se=0,ne=ne===""?".":ne+":",S(q))for(var J=0;J<q.length;J++){te=q[J];var K=ne+B(te,J);se+=z(te,H,G,K,ue)}else if(K=d(q),typeof K=="function")for(q=K.call(q),J=0;!(te=q.next()).done;)te=te.value,K=ne+B(te,J++),se+=z(te,H,G,K,ue);else if(te==="object")throw H=String(q),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return se}function L(q,H,G){if(q==null)return q;var ne=[],ue=0;return z(q,ne,"","",function(te){return H.call(G,te,ue++)}),ne}function F(q){if(q._status===-1){var H=q._result;H=H(),H.then(function(G){(q._status===0||q._status===-1)&&(q._status=1,q._result=G)},function(G){(q._status===0||q._status===-1)&&(q._status=2,q._result=G)}),q._status===-1&&(q._status=0,q._result=H)}if(q._status===1)return q._result.default;throw q._result}var R={current:null},W={transition:null},M={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:W,ReactCurrentOwner:E};function j(){throw Error("act(...) is not supported in production builds of React.")}return rn.Children={map:L,forEach:function(q,H,G){L(q,function(){H.apply(this,arguments)},G)},count:function(q){var H=0;return L(q,function(){H++}),H},toArray:function(q){return L(q,function(H){return H})||[]},only:function(q){if(!I(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},rn.Component=y,rn.Fragment=n,rn.Profiler=a,rn.PureComponent=w,rn.StrictMode=r,rn.Suspense=u,rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,rn.act=j,rn.cloneElement=function(q,H,G){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var ne=m({},q.props),ue=q.key,te=q.ref,se=q._owner;if(H!=null){if(H.ref!==void 0&&(te=H.ref,se=E.current),H.key!==void 0&&(ue=""+H.key),q.type&&q.type.defaultProps)var J=q.type.defaultProps;for(K in H)C.call(H,K)&&!A.hasOwnProperty(K)&&(ne[K]=H[K]===void 0&&J!==void 0?J[K]:H[K])}var K=arguments.length-2;if(K===1)ne.children=G;else if(1<K){J=Array(K);for(var ae=0;ae<K;ae++)J[ae]=arguments[ae+2];ne.children=J}return{$$typeof:t,type:q.type,key:ue,ref:te,props:ne,_owner:se}},rn.createContext=function(q){return q={$$typeof:s,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:i,_context:q},q.Consumer=q},rn.createElement=k,rn.createFactory=function(q){var H=k.bind(null,q);return H.type=q,H},rn.createRef=function(){return{current:null}},rn.forwardRef=function(q){return{$$typeof:o,render:q}},rn.isValidElement=I,rn.lazy=function(q){return{$$typeof:c,_payload:{_status:-1,_result:q},_init:F}},rn.memo=function(q,H){return{$$typeof:l,type:q,compare:H===void 0?null:H}},rn.startTransition=function(q){var H=W.transition;W.transition={};try{q()}finally{W.transition=H}},rn.unstable_act=j,rn.useCallback=function(q,H){return R.current.useCallback(q,H)},rn.useContext=function(q){return R.current.useContext(q)},rn.useDebugValue=function(){},rn.useDeferredValue=function(q){return R.current.useDeferredValue(q)},rn.useEffect=function(q,H){return R.current.useEffect(q,H)},rn.useId=function(){return R.current.useId()},rn.useImperativeHandle=function(q,H,G){return R.current.useImperativeHandle(q,H,G)},rn.useInsertionEffect=function(q,H){return R.current.useInsertionEffect(q,H)},rn.useLayoutEffect=function(q,H){return R.current.useLayoutEffect(q,H)},rn.useMemo=function(q,H){return R.current.useMemo(q,H)},rn.useReducer=function(q,H,G){return R.current.useReducer(q,H,G)},rn.useRef=function(q){return R.current.useRef(q)},rn.useState=function(q){return R.current.useState(q)},rn.useSyncExternalStore=function(q,H,G){return R.current.useSyncExternalStore(q,H,G)},rn.useTransition=function(){return R.current.useTransition()},rn.version="18.3.1",rn}var zI;function JS(){return zI||(zI=1,jw.exports=K9()),jw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UI;function Y9(){if(UI)return Tp;UI=1;var t=JS(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function s(o,u,l){var c,f={},d=null,h=null;l!==void 0&&(d=""+l),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)r.call(u,c)&&!i.hasOwnProperty(c)&&(f[c]=u[c]);if(o&&o.defaultProps)for(c in u=o.defaultProps,u)f[c]===void 0&&(f[c]=u[c]);return{$$typeof:e,type:o,key:d,ref:h,props:f,_owner:a.current}}return Tp.Fragment=n,Tp.jsx=s,Tp.jsxs=s,Tp}var VI;function Z9(){return VI||(VI=1,Hw.exports=Y9()),Hw.exports}var wn=Z9(),bn=JS();const Le=gc(bn);var Tv={},Xw={exports:{}},Za={},Kw={exports:{}},Yw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WI;function Q9(){return WI||(WI=1,function(t){function e(W,M){var j=W.length;W.push(M);e:for(;0<j;){var q=j-1>>>1,H=W[q];if(0<a(H,M))W[q]=M,W[j]=H,j=q;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var M=W[0],j=W.pop();if(j!==M){W[0]=j;e:for(var q=0,H=W.length,G=H>>>1;q<G;){var ne=2*(q+1)-1,ue=W[ne],te=ne+1,se=W[te];if(0>a(ue,j))te<H&&0>a(se,ue)?(W[q]=se,W[te]=j,q=te):(W[q]=ue,W[ne]=j,q=ne);else if(te<H&&0>a(se,j))W[q]=se,W[te]=j,q=te;else break e}}return M}function a(W,M){var j=W.sortIndex-M.sortIndex;return j!==0?j:W.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var u=[],l=[],c=1,f=null,d=3,h=!1,m=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(W){for(var M=n(l);M!==null;){if(M.callback===null)r(l);else if(M.startTime<=W)r(l),M.sortIndex=M.expirationTime,e(u,M);else break;M=n(l)}}function S(W){if(v=!1,x(W),!m)if(n(u)!==null)m=!0,F(C);else{var M=n(l);M!==null&&R(S,M.startTime-W)}}function C(W,M){m=!1,v&&(v=!1,b(k),k=-1),h=!0;var j=d;try{for(x(M),f=n(u);f!==null&&(!(f.expirationTime>M)||W&&!$());){var q=f.callback;if(typeof q=="function"){f.callback=null,d=f.priorityLevel;var H=q(f.expirationTime<=M);M=t.unstable_now(),typeof H=="function"?f.callback=H:f===n(u)&&r(u),x(M)}else r(u);f=n(u)}if(f!==null)var G=!0;else{var ne=n(l);ne!==null&&R(S,ne.startTime-M),G=!1}return G}finally{f=null,d=j,h=!1}}var E=!1,A=null,k=-1,T=5,I=-1;function $(){return!(t.unstable_now()-I<T)}function O(){if(A!==null){var W=t.unstable_now();I=W;var M=!0;try{M=A(!0,W)}finally{M?B():(E=!1,A=null)}}else E=!1}var B;if(typeof w=="function")B=function(){w(O)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,L=z.port2;z.port1.onmessage=O,B=function(){L.postMessage(null)}}else B=function(){y(O,0)};function F(W){A=W,E||(E=!0,B())}function R(W,M){k=y(function(){W(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,F(C))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(W){switch(d){case 1:case 2:case 3:var M=3;break;default:M=d}var j=d;d=M;try{return W()}finally{d=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,M){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var j=d;d=W;try{return M()}finally{d=j}},t.unstable_scheduleCallback=function(W,M,j){var q=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?q+j:q):j=q,W){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=j+H,W={id:c++,callback:M,priorityLevel:W,startTime:j,expirationTime:H,sortIndex:-1},j>q?(W.sortIndex=j,e(l,W),n(u)===null&&W===n(l)&&(v?(b(k),k=-1):v=!0,R(S,j-q))):(W.sortIndex=H,e(u,W),m||h||(m=!0,F(C))),W},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(W){var M=d;return function(){var j=d;d=M;try{return W.apply(this,arguments)}finally{d=j}}}}(Yw)),Yw}var qI;function J9(){return qI||(qI=1,Kw.exports=Q9()),Kw.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GI;function eq(){if(GI)return Za;GI=1;var t=JS(),e=J9();function n(p){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+p,N=1;N<arguments.length;N++)g+="&args[]="+encodeURIComponent(arguments[N]);return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function i(p,g){s(p,g),s(p+"Capture",g)}function s(p,g){for(a[p]=g,p=0;p<g.length;p++)r.add(g[p])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function d(p){return u.call(f,p)?!0:u.call(c,p)?!1:l.test(p)?f[p]=!0:(c[p]=!0,!1)}function h(p,g,N,D){if(N!==null&&N.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return D?!1:N!==null?!N.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function m(p,g,N,D){if(g===null||typeof g>"u"||h(p,g,N,D))return!0;if(D)return!1;if(N!==null)switch(N.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function v(p,g,N,D,_,P,X){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=D,this.attributeNamespace=_,this.mustUseProperty=N,this.propertyName=p,this.type=g,this.sanitizeURL=P,this.removeEmptyString=X}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){y[p]=new v(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var g=p[0];y[g]=new v(g,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){y[p]=new v(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){y[p]=new v(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){y[p]=new v(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){y[p]=new v(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){y[p]=new v(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){y[p]=new v(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){y[p]=new v(p,5,!1,p.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function w(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var g=p.replace(b,w);y[g]=new v(g,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var g=p.replace(b,w);y[g]=new v(g,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var g=p.replace(b,w);y[g]=new v(g,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){y[p]=new v(p,1,!1,p.toLowerCase(),null,!1,!1)}),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){y[p]=new v(p,1,!1,p.toLowerCase(),null,!0,!0)});function x(p,g,N,D){var _=y.hasOwnProperty(g)?y[g]:null;(_!==null?_.type!==0:D||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(m(g,N,_,D)&&(N=null),D||_===null?d(g)&&(N===null?p.removeAttribute(g):p.setAttribute(g,""+N)):_.mustUseProperty?p[_.propertyName]=N===null?_.type===3?!1:"":N:(g=_.attributeName,D=_.attributeNamespace,N===null?p.removeAttribute(g):(_=_.type,N=_===3||_===4&&N===!0?"":""+N,D?p.setAttributeNS(D,g,N):p.setAttribute(g,N))))}var S=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),$=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),W=Symbol.iterator;function M(p){return p===null||typeof p!="object"?null:(p=W&&p[W]||p["@@iterator"],typeof p=="function"?p:null)}var j=Object.assign,q;function H(p){if(q===void 0)try{throw Error()}catch(N){var g=N.stack.trim().match(/\n( *(at )?)/);q=g&&g[1]||""}return`
`+q+p}var G=!1;function ne(p,g){if(!p||G)return"";G=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_e){var D=_e}Reflect.construct(p,[],g)}else{try{g.call()}catch(_e){D=_e}p.call(g.prototype)}else{try{throw Error()}catch(_e){D=_e}p()}}catch(_e){if(_e&&D&&typeof _e.stack=="string"){for(var _=_e.stack.split(`
`),P=D.stack.split(`
`),X=_.length-1,le=P.length-1;1<=X&&0<=le&&_[X]!==P[le];)le--;for(;1<=X&&0<=le;X--,le--)if(_[X]!==P[le]){if(X!==1||le!==1)do if(X--,le--,0>le||_[X]!==P[le]){var ye=`
`+_[X].replace(" at new "," at ");return p.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",p.displayName)),ye}while(1<=X&&0<=le);break}}}finally{G=!1,Error.prepareStackTrace=N}return(p=p?p.displayName||p.name:"")?H(p):""}function ue(p){switch(p.tag){case 5:return H(p.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return p=ne(p.type,!1),p;case 11:return p=ne(p.type.render,!1),p;case 1:return p=ne(p.type,!0),p;default:return""}}function te(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case A:return"Fragment";case E:return"Portal";case T:return"Profiler";case k:return"StrictMode";case B:return"Suspense";case z:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case $:return(p.displayName||"Context")+".Consumer";case I:return(p._context.displayName||"Context")+".Provider";case O:var g=p.render;return p=p.displayName,p||(p=g.displayName||g.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case L:return g=p.displayName||null,g!==null?g:te(p.type)||"Memo";case F:g=p._payload,p=p._init;try{return te(p(g))}catch{}}return null}function se(p){var g=p.type;switch(p.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=g.render,p=p.displayName||p.name||"",g.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(g);case 8:return g===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function J(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function K(p){var g=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function ae(p){var g=K(p)?"checked":"value",N=Object.getOwnPropertyDescriptor(p.constructor.prototype,g),D=""+p[g];if(!p.hasOwnProperty(g)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var _=N.get,P=N.set;return Object.defineProperty(p,g,{configurable:!0,get:function(){return _.call(this)},set:function(X){D=""+X,P.call(this,X)}}),Object.defineProperty(p,g,{enumerable:N.enumerable}),{getValue:function(){return D},setValue:function(X){D=""+X},stopTracking:function(){p._valueTracker=null,delete p[g]}}}}function pe(p){p._valueTracker||(p._valueTracker=ae(p))}function he(p){if(!p)return!1;var g=p._valueTracker;if(!g)return!0;var N=g.getValue(),D="";return p&&(D=K(p)?p.checked?"true":"false":p.value),p=D,p!==N?(g.setValue(p),!0):!1}function Se(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function Ee(p,g){var N=g.checked;return j({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:N??p._wrapperState.initialChecked})}function Z(p,g){var N=g.defaultValue==null?"":g.defaultValue,D=g.checked!=null?g.checked:g.defaultChecked;N=J(g.value!=null?g.value:N),p._wrapperState={initialChecked:D,initialValue:N,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function ie(p,g){g=g.checked,g!=null&&x(p,"checked",g,!1)}function ve(p,g){ie(p,g);var N=J(g.value),D=g.type;if(N!=null)D==="number"?(N===0&&p.value===""||p.value!=N)&&(p.value=""+N):p.value!==""+N&&(p.value=""+N);else if(D==="submit"||D==="reset"){p.removeAttribute("value");return}g.hasOwnProperty("value")?Fe(p,g.type,N):g.hasOwnProperty("defaultValue")&&Fe(p,g.type,J(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(p.defaultChecked=!!g.defaultChecked)}function we(p,g,N){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var D=g.type;if(!(D!=="submit"&&D!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+p._wrapperState.initialValue,N||g===p.value||(p.value=g),p.defaultValue=g}N=p.name,N!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,N!==""&&(p.name=N)}function Fe(p,g,N){(g!=="number"||Se(p.ownerDocument)!==p)&&(N==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+N&&(p.defaultValue=""+N))}var Re=Array.isArray;function Ge(p,g,N,D){if(p=p.options,g){g={};for(var _=0;_<N.length;_++)g["$"+N[_]]=!0;for(N=0;N<p.length;N++)_=g.hasOwnProperty("$"+p[N].value),p[N].selected!==_&&(p[N].selected=_),_&&D&&(p[N].defaultSelected=!0)}else{for(N=""+J(N),g=null,_=0;_<p.length;_++){if(p[_].value===N){p[_].selected=!0,D&&(p[_].defaultSelected=!0);return}g!==null||p[_].disabled||(g=p[_])}g!==null&&(g.selected=!0)}}function Ze(p,g){if(g.dangerouslySetInnerHTML!=null)throw Error(n(91));return j({},g,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function re(p,g){var N=g.value;if(N==null){if(N=g.children,g=g.defaultValue,N!=null){if(g!=null)throw Error(n(92));if(Re(N)){if(1<N.length)throw Error(n(93));N=N[0]}g=N}g==null&&(g=""),N=g}p._wrapperState={initialValue:J(N)}}function ce(p,g){var N=J(g.value),D=J(g.defaultValue);N!=null&&(N=""+N,N!==p.value&&(p.value=N),g.defaultValue==null&&p.defaultValue!==N&&(p.defaultValue=N)),D!=null&&(p.defaultValue=""+D)}function Ce(p){var g=p.textContent;g===p._wrapperState.initialValue&&g!==""&&g!==null&&(p.value=g)}function $e(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Be(p,g){return p==null||p==="http://www.w3.org/1999/xhtml"?$e(g):p==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var Me,Qe=function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,N,D,_){MSApp.execUnsafeLocalFunction(function(){return p(g,N,D,_)})}:p}(function(p,g){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=g;else{for(Me=Me||document.createElement("div"),Me.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=Me.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;g.firstChild;)p.appendChild(g.firstChild)}});function qe(p,g){if(g){var N=p.firstChild;if(N&&N===p.lastChild&&N.nodeType===3){N.nodeValue=g;return}}p.textContent=g}var et={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ye=["Webkit","ms","Moz","O"];Object.keys(et).forEach(function(p){Ye.forEach(function(g){g=g+p.charAt(0).toUpperCase()+p.substring(1),et[g]=et[p]})});function Ht(p,g,N){return g==null||typeof g=="boolean"||g===""?"":N||typeof g!="number"||g===0||et.hasOwnProperty(p)&&et[p]?(""+g).trim():g+"px"}function Nt(p,g){p=p.style;for(var N in g)if(g.hasOwnProperty(N)){var D=N.indexOf("--")===0,_=Ht(N,g[N],D);N==="float"&&(N="cssFloat"),D?p.setProperty(N,_):p[N]=_}}var xn=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function V(p,g){if(g){if(xn[p]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(n(137,p));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(n(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(n(61))}if(g.style!=null&&typeof g.style!="object")throw Error(n(62))}}function fe(p,g){if(p.indexOf("-")===-1)return typeof g.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function Ve(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var Dt=null,$t=null,ar=null;function Bc(p){if(p=dp(p)){if(typeof Dt!="function")throw Error(n(280));var g=p.stateNode;g&&(g=Vg(g),Dt(p.stateNode,p.type,g))}}function dg(p){$t?ar?ar.push(p):ar=[p]:$t=p}function pg(){if($t){var p=$t,g=ar;if(ar=$t=null,Bc(p),g)for(p=0;p<g.length;p++)Bc(g[p])}}function hg(p,g){return p(g)}function mg(){}var qd=!1;function gg(p,g,N){if(qd)return p(g,N);qd=!0;try{return hg(p,g,N)}finally{qd=!1,($t!==null||ar!==null)&&(mg(),pg())}}function yl(p,g){var N=p.stateNode;if(N===null)return null;var D=Vg(N);if(D===null)return null;N=D[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(D=!D.disabled)||(p=p.type,D=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!D;break e;default:p=!1}if(p)return null;if(N&&typeof N!="function")throw Error(n(231,g,typeof N));return N}var Gd=!1;if(o)try{var bl={};Object.defineProperty(bl,"passive",{get:function(){Gd=!0}}),window.addEventListener("test",bl,bl),window.removeEventListener("test",bl,bl)}catch{Gd=!1}function sx(p,g,N,D,_,P,X,le,ye){var _e=Array.prototype.slice.call(arguments,3);try{g.apply(N,_e)}catch(Ke){this.onError(Ke)}}var xl=!1,Lc=null,zc=!1,Hd=null,ox={onError:function(p){xl=!0,Lc=p}};function ux(p,g,N,D,_,P,X,le,ye){xl=!1,Lc=null,sx.apply(ox,arguments)}function lx(p,g,N,D,_,P,X,le,ye){if(ux.apply(this,arguments),xl){if(xl){var _e=Lc;xl=!1,Lc=null}else throw Error(n(198));zc||(zc=!0,Hd=_e)}}function vo(p){var g=p,N=p;if(p.alternate)for(;g.return;)g=g.return;else{p=g;do g=p,g.flags&4098&&(N=g.return),p=g.return;while(p)}return g.tag===3?N:null}function vg(p){if(p.tag===13){var g=p.memoizedState;if(g===null&&(p=p.alternate,p!==null&&(g=p.memoizedState)),g!==null)return g.dehydrated}return null}function yg(p){if(vo(p)!==p)throw Error(n(188))}function cx(p){var g=p.alternate;if(!g){if(g=vo(p),g===null)throw Error(n(188));return g!==p?null:p}for(var N=p,D=g;;){var _=N.return;if(_===null)break;var P=_.alternate;if(P===null){if(D=_.return,D!==null){N=D;continue}break}if(_.child===P.child){for(P=_.child;P;){if(P===N)return yg(_),p;if(P===D)return yg(_),g;P=P.sibling}throw Error(n(188))}if(N.return!==D.return)N=_,D=P;else{for(var X=!1,le=_.child;le;){if(le===N){X=!0,N=_,D=P;break}if(le===D){X=!0,D=_,N=P;break}le=le.sibling}if(!X){for(le=P.child;le;){if(le===N){X=!0,N=P,D=_;break}if(le===D){X=!0,D=P,N=_;break}le=le.sibling}if(!X)throw Error(n(189))}}if(N.alternate!==D)throw Error(n(190))}if(N.tag!==3)throw Error(n(188));return N.stateNode.current===N?p:g}function bg(p){return p=cx(p),p!==null?xg(p):null}function xg(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var g=xg(p);if(g!==null)return g;p=p.sibling}return null}var wg=e.unstable_scheduleCallback,Ng=e.unstable_cancelCallback,fx=e.unstable_shouldYield,wl=e.unstable_requestPaint,kt=e.unstable_now,pa=e.unstable_getCurrentPriorityLevel,jd=e.unstable_ImmediatePriority,Nl=e.unstable_UserBlockingPriority,zs=e.unstable_NormalPriority,dx=e.unstable_LowPriority,m$=e.unstable_IdlePriority,Sg=null,Us=null;function u7(p){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(Sg,p,void 0,(p.current.flags&128)===128)}catch{}}var cs=Math.clz32?Math.clz32:f7,l7=Math.log,c7=Math.LN2;function f7(p){return p>>>=0,p===0?32:31-(l7(p)/c7|0)|0}var Cg=64,Eg=4194304;function Xd(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function Dg(p,g){var N=p.pendingLanes;if(N===0)return 0;var D=0,_=p.suspendedLanes,P=p.pingedLanes,X=N&268435455;if(X!==0){var le=X&~_;le!==0?D=Xd(le):(P&=X,P!==0&&(D=Xd(P)))}else X=N&~_,X!==0?D=Xd(X):P!==0&&(D=Xd(P));if(D===0)return 0;if(g!==0&&g!==D&&!(g&_)&&(_=D&-D,P=g&-g,_>=P||_===16&&(P&4194240)!==0))return g;if(D&4&&(D|=N&16),g=p.entangledLanes,g!==0)for(p=p.entanglements,g&=D;0<g;)N=31-cs(g),_=1<<N,D|=p[N],g&=~_;return D}function d7(p,g){switch(p){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function p7(p,g){for(var N=p.suspendedLanes,D=p.pingedLanes,_=p.expirationTimes,P=p.pendingLanes;0<P;){var X=31-cs(P),le=1<<X,ye=_[X];ye===-1?(!(le&N)||le&D)&&(_[X]=d7(le,g)):ye<=g&&(p.expiredLanes|=le),P&=~le}}function px(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function g$(){var p=Cg;return Cg<<=1,!(Cg&4194240)&&(Cg=64),p}function hx(p){for(var g=[],N=0;31>N;N++)g.push(p);return g}function Kd(p,g,N){p.pendingLanes|=g,g!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,g=31-cs(g),p[g]=N}function h7(p,g){var N=p.pendingLanes&~g;p.pendingLanes=g,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=g,p.mutableReadLanes&=g,p.entangledLanes&=g,g=p.entanglements;var D=p.eventTimes;for(p=p.expirationTimes;0<N;){var _=31-cs(N),P=1<<_;g[_]=0,D[_]=-1,p[_]=-1,N&=~P}}function mx(p,g){var N=p.entangledLanes|=g;for(p=p.entanglements;N;){var D=31-cs(N),_=1<<D;_&g|p[D]&g&&(p[D]|=g),N&=~_}}var $n=0;function v$(p){return p&=-p,1<p?4<p?p&268435455?16:536870912:4:1}var y$,gx,b$,x$,w$,vx=!1,Tg=[],eu=null,tu=null,nu=null,Yd=new Map,Zd=new Map,ru=[],m7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function N$(p,g){switch(p){case"focusin":case"focusout":eu=null;break;case"dragenter":case"dragleave":tu=null;break;case"mouseover":case"mouseout":nu=null;break;case"pointerover":case"pointerout":Yd.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zd.delete(g.pointerId)}}function Qd(p,g,N,D,_,P){return p===null||p.nativeEvent!==P?(p={blockedOn:g,domEventName:N,eventSystemFlags:D,nativeEvent:P,targetContainers:[_]},g!==null&&(g=dp(g),g!==null&&gx(g)),p):(p.eventSystemFlags|=D,g=p.targetContainers,_!==null&&g.indexOf(_)===-1&&g.push(_),p)}function g7(p,g,N,D,_){switch(g){case"focusin":return eu=Qd(eu,p,g,N,D,_),!0;case"dragenter":return tu=Qd(tu,p,g,N,D,_),!0;case"mouseover":return nu=Qd(nu,p,g,N,D,_),!0;case"pointerover":var P=_.pointerId;return Yd.set(P,Qd(Yd.get(P)||null,p,g,N,D,_)),!0;case"gotpointercapture":return P=_.pointerId,Zd.set(P,Qd(Zd.get(P)||null,p,g,N,D,_)),!0}return!1}function S$(p){var g=Sl(p.target);if(g!==null){var N=vo(g);if(N!==null){if(g=N.tag,g===13){if(g=vg(N),g!==null){p.blockedOn=g,w$(p.priority,function(){b$(N)});return}}else if(g===3&&N.stateNode.current.memoizedState.isDehydrated){p.blockedOn=N.tag===3?N.stateNode.containerInfo:null;return}}}p.blockedOn=null}function $g(p){if(p.blockedOn!==null)return!1;for(var g=p.targetContainers;0<g.length;){var N=bx(p.domEventName,p.eventSystemFlags,g[0],p.nativeEvent);if(N===null){N=p.nativeEvent;var D=new N.constructor(N.type,N);ke=D,N.target.dispatchEvent(D),ke=null}else return g=dp(N),g!==null&&gx(g),p.blockedOn=N,!1;g.shift()}return!0}function C$(p,g,N){$g(p)&&N.delete(g)}function v7(){vx=!1,eu!==null&&$g(eu)&&(eu=null),tu!==null&&$g(tu)&&(tu=null),nu!==null&&$g(nu)&&(nu=null),Yd.forEach(C$),Zd.forEach(C$)}function Jd(p,g){p.blockedOn===g&&(p.blockedOn=null,vx||(vx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,v7)))}function ep(p){function g(_){return Jd(_,p)}if(0<Tg.length){Jd(Tg[0],p);for(var N=1;N<Tg.length;N++){var D=Tg[N];D.blockedOn===p&&(D.blockedOn=null)}}for(eu!==null&&Jd(eu,p),tu!==null&&Jd(tu,p),nu!==null&&Jd(nu,p),Yd.forEach(g),Zd.forEach(g),N=0;N<ru.length;N++)D=ru[N],D.blockedOn===p&&(D.blockedOn=null);for(;0<ru.length&&(N=ru[0],N.blockedOn===null);)S$(N),N.blockedOn===null&&ru.shift()}var Uc=S.ReactCurrentBatchConfig,Ag=!0;function y7(p,g,N,D){var _=$n,P=Uc.transition;Uc.transition=null;try{$n=1,yx(p,g,N,D)}finally{$n=_,Uc.transition=P}}function b7(p,g,N,D){var _=$n,P=Uc.transition;Uc.transition=null;try{$n=4,yx(p,g,N,D)}finally{$n=_,Uc.transition=P}}function yx(p,g,N,D){if(Ag){var _=bx(p,g,N,D);if(_===null)Mx(p,g,D,Ig,N),N$(p,D);else if(g7(_,p,g,N,D))D.stopPropagation();else if(N$(p,D),g&4&&-1<m7.indexOf(p)){for(;_!==null;){var P=dp(_);if(P!==null&&y$(P),P=bx(p,g,N,D),P===null&&Mx(p,g,D,Ig,N),P===_)break;_=P}_!==null&&D.stopPropagation()}else Mx(p,g,D,null,N)}}var Ig=null;function bx(p,g,N,D){if(Ig=null,p=Ve(D),p=Sl(p),p!==null)if(g=vo(p),g===null)p=null;else if(N=g.tag,N===13){if(p=vg(g),p!==null)return p;p=null}else if(N===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;p=null}else g!==p&&(p=null);return Ig=p,null}function E$(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pa()){case jd:return 1;case Nl:return 4;case zs:case dx:return 16;case m$:return 536870912;default:return 16}default:return 16}}var au=null,xx=null,kg=null;function D$(){if(kg)return kg;var p,g=xx,N=g.length,D,_="value"in au?au.value:au.textContent,P=_.length;for(p=0;p<N&&g[p]===_[p];p++);var X=N-p;for(D=1;D<=X&&g[N-D]===_[P-D];D++);return kg=_.slice(p,1<D?1-D:void 0)}function _g(p){var g=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&g===13&&(p=13)):p=g,p===10&&(p=13),32<=p||p===13?p:0}function Og(){return!0}function T$(){return!1}function vi(p){function g(N,D,_,P,X){this._reactName=N,this._targetInst=_,this.type=D,this.nativeEvent=P,this.target=X,this.currentTarget=null;for(var le in p)p.hasOwnProperty(le)&&(N=p[le],this[le]=N?N(P):P[le]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Og:T$,this.isPropagationStopped=T$,this}return j(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var N=this.nativeEvent;N&&(N.preventDefault?N.preventDefault():typeof N.returnValue!="unknown"&&(N.returnValue=!1),this.isDefaultPrevented=Og)},stopPropagation:function(){var N=this.nativeEvent;N&&(N.stopPropagation?N.stopPropagation():typeof N.cancelBubble!="unknown"&&(N.cancelBubble=!0),this.isPropagationStopped=Og)},persist:function(){},isPersistent:Og}),g}var Vc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wx=vi(Vc),tp=j({},Vc,{view:0,detail:0}),x7=vi(tp),Nx,Sx,np,Fg=j({},tp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ex,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==np&&(np&&p.type==="mousemove"?(Nx=p.screenX-np.screenX,Sx=p.screenY-np.screenY):Sx=Nx=0,np=p),Nx)},movementY:function(p){return"movementY"in p?p.movementY:Sx}}),$$=vi(Fg),w7=j({},Fg,{dataTransfer:0}),N7=vi(w7),S7=j({},tp,{relatedTarget:0}),Cx=vi(S7),C7=j({},Vc,{animationName:0,elapsedTime:0,pseudoElement:0}),E7=vi(C7),D7=j({},Vc,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),T7=vi(D7),$7=j({},Vc,{data:0}),A$=vi($7),A7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _7(p){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(p):(p=k7[p])?!!g[p]:!1}function Ex(){return _7}var O7=j({},tp,{key:function(p){if(p.key){var g=A7[p.key]||p.key;if(g!=="Unidentified")return g}return p.type==="keypress"?(p=_g(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?I7[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ex,charCode:function(p){return p.type==="keypress"?_g(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?_g(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),F7=vi(O7),R7=j({},Fg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I$=vi(R7),M7=j({},tp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ex}),P7=vi(M7),B7=j({},Vc,{propertyName:0,elapsedTime:0,pseudoElement:0}),L7=vi(B7),z7=j({},Fg,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),U7=vi(z7),V7=[9,13,27,32],Dx=o&&"CompositionEvent"in window,rp=null;o&&"documentMode"in document&&(rp=document.documentMode);var W7=o&&"TextEvent"in window&&!rp,k$=o&&(!Dx||rp&&8<rp&&11>=rp),_$=" ",O$=!1;function F$(p,g){switch(p){case"keyup":return V7.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R$(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var Wc=!1;function q7(p,g){switch(p){case"compositionend":return R$(g);case"keypress":return g.which!==32?null:(O$=!0,_$);case"textInput":return p=g.data,p===_$&&O$?null:p;default:return null}}function G7(p,g){if(Wc)return p==="compositionend"||!Dx&&F$(p,g)?(p=D$(),kg=xx=au=null,Wc=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return k$&&g.locale!=="ko"?null:g.data;default:return null}}var H7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M$(p){var g=p&&p.nodeName&&p.nodeName.toLowerCase();return g==="input"?!!H7[p.type]:g==="textarea"}function P$(p,g,N,D){dg(D),g=Lg(g,"onChange"),0<g.length&&(N=new wx("onChange","change",null,N,D),p.push({event:N,listeners:g}))}var ap=null,ip=null;function j7(p){tA(p,0)}function Rg(p){var g=Xc(p);if(he(g))return p}function X7(p,g){if(p==="change")return g}var B$=!1;if(o){var Tx;if(o){var $x="oninput"in document;if(!$x){var L$=document.createElement("div");L$.setAttribute("oninput","return;"),$x=typeof L$.oninput=="function"}Tx=$x}else Tx=!1;B$=Tx&&(!document.documentMode||9<document.documentMode)}function z$(){ap&&(ap.detachEvent("onpropertychange",U$),ip=ap=null)}function U$(p){if(p.propertyName==="value"&&Rg(ip)){var g=[];P$(g,ip,p,Ve(p)),gg(j7,g)}}function K7(p,g,N){p==="focusin"?(z$(),ap=g,ip=N,ap.attachEvent("onpropertychange",U$)):p==="focusout"&&z$()}function Y7(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Rg(ip)}function Z7(p,g){if(p==="click")return Rg(g)}function Q7(p,g){if(p==="input"||p==="change")return Rg(g)}function J7(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var fs=typeof Object.is=="function"?Object.is:J7;function sp(p,g){if(fs(p,g))return!0;if(typeof p!="object"||p===null||typeof g!="object"||g===null)return!1;var N=Object.keys(p),D=Object.keys(g);if(N.length!==D.length)return!1;for(D=0;D<N.length;D++){var _=N[D];if(!u.call(g,_)||!fs(p[_],g[_]))return!1}return!0}function V$(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function W$(p,g){var N=V$(p);p=0;for(var D;N;){if(N.nodeType===3){if(D=p+N.textContent.length,p<=g&&D>=g)return{node:N,offset:g-p};p=D}e:{for(;N;){if(N.nextSibling){N=N.nextSibling;break e}N=N.parentNode}N=void 0}N=V$(N)}}function q$(p,g){return p&&g?p===g?!0:p&&p.nodeType===3?!1:g&&g.nodeType===3?q$(p,g.parentNode):"contains"in p?p.contains(g):p.compareDocumentPosition?!!(p.compareDocumentPosition(g)&16):!1:!1}function G$(){for(var p=window,g=Se();g instanceof p.HTMLIFrameElement;){try{var N=typeof g.contentWindow.location.href=="string"}catch{N=!1}if(N)p=g.contentWindow;else break;g=Se(p.document)}return g}function Ax(p){var g=p&&p.nodeName&&p.nodeName.toLowerCase();return g&&(g==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||g==="textarea"||p.contentEditable==="true")}function e9(p){var g=G$(),N=p.focusedElem,D=p.selectionRange;if(g!==N&&N&&N.ownerDocument&&q$(N.ownerDocument.documentElement,N)){if(D!==null&&Ax(N)){if(g=D.start,p=D.end,p===void 0&&(p=g),"selectionStart"in N)N.selectionStart=g,N.selectionEnd=Math.min(p,N.value.length);else if(p=(g=N.ownerDocument||document)&&g.defaultView||window,p.getSelection){p=p.getSelection();var _=N.textContent.length,P=Math.min(D.start,_);D=D.end===void 0?P:Math.min(D.end,_),!p.extend&&P>D&&(_=D,D=P,P=_),_=W$(N,P);var X=W$(N,D);_&&X&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==X.node||p.focusOffset!==X.offset)&&(g=g.createRange(),g.setStart(_.node,_.offset),p.removeAllRanges(),P>D?(p.addRange(g),p.extend(X.node,X.offset)):(g.setEnd(X.node,X.offset),p.addRange(g)))}}for(g=[],p=N;p=p.parentNode;)p.nodeType===1&&g.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<g.length;N++)p=g[N],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var t9=o&&"documentMode"in document&&11>=document.documentMode,qc=null,Ix=null,op=null,kx=!1;function H$(p,g,N){var D=N.window===N?N.document:N.nodeType===9?N:N.ownerDocument;kx||qc==null||qc!==Se(D)||(D=qc,"selectionStart"in D&&Ax(D)?D={start:D.selectionStart,end:D.selectionEnd}:(D=(D.ownerDocument&&D.ownerDocument.defaultView||window).getSelection(),D={anchorNode:D.anchorNode,anchorOffset:D.anchorOffset,focusNode:D.focusNode,focusOffset:D.focusOffset}),op&&sp(op,D)||(op=D,D=Lg(Ix,"onSelect"),0<D.length&&(g=new wx("onSelect","select",null,g,N),p.push({event:g,listeners:D}),g.target=qc)))}function Mg(p,g){var N={};return N[p.toLowerCase()]=g.toLowerCase(),N["Webkit"+p]="webkit"+g,N["Moz"+p]="moz"+g,N}var Gc={animationend:Mg("Animation","AnimationEnd"),animationiteration:Mg("Animation","AnimationIteration"),animationstart:Mg("Animation","AnimationStart"),transitionend:Mg("Transition","TransitionEnd")},_x={},j$={};o&&(j$=document.createElement("div").style,"AnimationEvent"in window||(delete Gc.animationend.animation,delete Gc.animationiteration.animation,delete Gc.animationstart.animation),"TransitionEvent"in window||delete Gc.transitionend.transition);function Pg(p){if(_x[p])return _x[p];if(!Gc[p])return p;var g=Gc[p],N;for(N in g)if(g.hasOwnProperty(N)&&N in j$)return _x[p]=g[N];return p}var X$=Pg("animationend"),K$=Pg("animationiteration"),Y$=Pg("animationstart"),Z$=Pg("transitionend"),Q$=new Map,J$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function iu(p,g){Q$.set(p,g),i(g,[p])}for(var Ox=0;Ox<J$.length;Ox++){var Fx=J$[Ox],n9=Fx.toLowerCase(),r9=Fx[0].toUpperCase()+Fx.slice(1);iu(n9,"on"+r9)}iu(X$,"onAnimationEnd"),iu(K$,"onAnimationIteration"),iu(Y$,"onAnimationStart"),iu("dblclick","onDoubleClick"),iu("focusin","onFocus"),iu("focusout","onBlur"),iu(Z$,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var up="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a9=new Set("cancel close invalid load scroll toggle".split(" ").concat(up));function eA(p,g,N){var D=p.type||"unknown-event";p.currentTarget=N,lx(D,g,void 0,p),p.currentTarget=null}function tA(p,g){g=(g&4)!==0;for(var N=0;N<p.length;N++){var D=p[N],_=D.event;D=D.listeners;e:{var P=void 0;if(g)for(var X=D.length-1;0<=X;X--){var le=D[X],ye=le.instance,_e=le.currentTarget;if(le=le.listener,ye!==P&&_.isPropagationStopped())break e;eA(_,le,_e),P=ye}else for(X=0;X<D.length;X++){if(le=D[X],ye=le.instance,_e=le.currentTarget,le=le.listener,ye!==P&&_.isPropagationStopped())break e;eA(_,le,_e),P=ye}}}if(zc)throw p=Hd,zc=!1,Hd=null,p}function Vn(p,g){var N=g[Vx];N===void 0&&(N=g[Vx]=new Set);var D=p+"__bubble";N.has(D)||(nA(g,p,2,!1),N.add(D))}function Rx(p,g,N){var D=0;g&&(D|=4),nA(N,p,D,g)}var Bg="_reactListening"+Math.random().toString(36).slice(2);function lp(p){if(!p[Bg]){p[Bg]=!0,r.forEach(function(N){N!=="selectionchange"&&(a9.has(N)||Rx(N,!1,p),Rx(N,!0,p))});var g=p.nodeType===9?p:p.ownerDocument;g===null||g[Bg]||(g[Bg]=!0,Rx("selectionchange",!1,g))}}function nA(p,g,N,D){switch(E$(g)){case 1:var _=y7;break;case 4:_=b7;break;default:_=yx}N=_.bind(null,g,N,p),_=void 0,!Gd||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(_=!0),D?_!==void 0?p.addEventListener(g,N,{capture:!0,passive:_}):p.addEventListener(g,N,!0):_!==void 0?p.addEventListener(g,N,{passive:_}):p.addEventListener(g,N,!1)}function Mx(p,g,N,D,_){var P=D;if(!(g&1)&&!(g&2)&&D!==null)e:for(;;){if(D===null)return;var X=D.tag;if(X===3||X===4){var le=D.stateNode.containerInfo;if(le===_||le.nodeType===8&&le.parentNode===_)break;if(X===4)for(X=D.return;X!==null;){var ye=X.tag;if((ye===3||ye===4)&&(ye=X.stateNode.containerInfo,ye===_||ye.nodeType===8&&ye.parentNode===_))return;X=X.return}for(;le!==null;){if(X=Sl(le),X===null)return;if(ye=X.tag,ye===5||ye===6){D=P=X;continue e}le=le.parentNode}}D=D.return}gg(function(){var _e=P,Ke=Ve(N),Je=[];e:{var Xe=Q$.get(p);if(Xe!==void 0){var lt=wx,mt=p;switch(p){case"keypress":if(_g(N)===0)break e;case"keydown":case"keyup":lt=F7;break;case"focusin":mt="focus",lt=Cx;break;case"focusout":mt="blur",lt=Cx;break;case"beforeblur":case"afterblur":lt=Cx;break;case"click":if(N.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=$$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=N7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=P7;break;case X$:case K$:case Y$:lt=E7;break;case Z$:lt=L7;break;case"scroll":lt=x7;break;case"wheel":lt=U7;break;case"copy":case"cut":case"paste":lt=T7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=I$}var vt=(g&4)!==0,dr=!vt&&p==="scroll",Te=vt?Xe!==null?Xe+"Capture":null:Xe;vt=[];for(var Ne=_e,Ie;Ne!==null;){Ie=Ne;var rt=Ie.stateNode;if(Ie.tag===5&&rt!==null&&(Ie=rt,Te!==null&&(rt=yl(Ne,Te),rt!=null&&vt.push(cp(Ne,rt,Ie)))),dr)break;Ne=Ne.return}0<vt.length&&(Xe=new lt(Xe,mt,null,N,Ke),Je.push({event:Xe,listeners:vt}))}}if(!(g&7)){e:{if(Xe=p==="mouseover"||p==="pointerover",lt=p==="mouseout"||p==="pointerout",Xe&&N!==ke&&(mt=N.relatedTarget||N.fromElement)&&(Sl(mt)||mt[yo]))break e;if((lt||Xe)&&(Xe=Ke.window===Ke?Ke:(Xe=Ke.ownerDocument)?Xe.defaultView||Xe.parentWindow:window,lt?(mt=N.relatedTarget||N.toElement,lt=_e,mt=mt?Sl(mt):null,mt!==null&&(dr=vo(mt),mt!==dr||mt.tag!==5&&mt.tag!==6)&&(mt=null)):(lt=null,mt=_e),lt!==mt)){if(vt=$$,rt="onMouseLeave",Te="onMouseEnter",Ne="mouse",(p==="pointerout"||p==="pointerover")&&(vt=I$,rt="onPointerLeave",Te="onPointerEnter",Ne="pointer"),dr=lt==null?Xe:Xc(lt),Ie=mt==null?Xe:Xc(mt),Xe=new vt(rt,Ne+"leave",lt,N,Ke),Xe.target=dr,Xe.relatedTarget=Ie,rt=null,Sl(Ke)===_e&&(vt=new vt(Te,Ne+"enter",mt,N,Ke),vt.target=Ie,vt.relatedTarget=dr,rt=vt),dr=rt,lt&&mt)t:{for(vt=lt,Te=mt,Ne=0,Ie=vt;Ie;Ie=Hc(Ie))Ne++;for(Ie=0,rt=Te;rt;rt=Hc(rt))Ie++;for(;0<Ne-Ie;)vt=Hc(vt),Ne--;for(;0<Ie-Ne;)Te=Hc(Te),Ie--;for(;Ne--;){if(vt===Te||Te!==null&&vt===Te.alternate)break t;vt=Hc(vt),Te=Hc(Te)}vt=null}else vt=null;lt!==null&&rA(Je,Xe,lt,vt,!1),mt!==null&&dr!==null&&rA(Je,dr,mt,vt,!0)}}e:{if(Xe=_e?Xc(_e):window,lt=Xe.nodeName&&Xe.nodeName.toLowerCase(),lt==="select"||lt==="input"&&Xe.type==="file")var xt=X7;else if(M$(Xe))if(B$)xt=Q7;else{xt=Y7;var At=K7}else(lt=Xe.nodeName)&&lt.toLowerCase()==="input"&&(Xe.type==="checkbox"||Xe.type==="radio")&&(xt=Z7);if(xt&&(xt=xt(p,_e))){P$(Je,xt,N,Ke);break e}At&&At(p,Xe,_e),p==="focusout"&&(At=Xe._wrapperState)&&At.controlled&&Xe.type==="number"&&Fe(Xe,"number",Xe.value)}switch(At=_e?Xc(_e):window,p){case"focusin":(M$(At)||At.contentEditable==="true")&&(qc=At,Ix=_e,op=null);break;case"focusout":op=Ix=qc=null;break;case"mousedown":kx=!0;break;case"contextmenu":case"mouseup":case"dragend":kx=!1,H$(Je,N,Ke);break;case"selectionchange":if(t9)break;case"keydown":case"keyup":H$(Je,N,Ke)}var It;if(Dx)e:{switch(p){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else Wc?F$(p,N)&&(Pt="onCompositionEnd"):p==="keydown"&&N.keyCode===229&&(Pt="onCompositionStart");Pt&&(k$&&N.locale!=="ko"&&(Wc||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Wc&&(It=D$()):(au=Ke,xx="value"in au?au.value:au.textContent,Wc=!0)),At=Lg(_e,Pt),0<At.length&&(Pt=new A$(Pt,p,null,N,Ke),Je.push({event:Pt,listeners:At}),It?Pt.data=It:(It=R$(N),It!==null&&(Pt.data=It)))),(It=W7?q7(p,N):G7(p,N))&&(_e=Lg(_e,"onBeforeInput"),0<_e.length&&(Ke=new A$("onBeforeInput","beforeinput",null,N,Ke),Je.push({event:Ke,listeners:_e}),Ke.data=It))}tA(Je,g)})}function cp(p,g,N){return{instance:p,listener:g,currentTarget:N}}function Lg(p,g){for(var N=g+"Capture",D=[];p!==null;){var _=p,P=_.stateNode;_.tag===5&&P!==null&&(_=P,P=yl(p,N),P!=null&&D.unshift(cp(p,P,_)),P=yl(p,g),P!=null&&D.push(cp(p,P,_))),p=p.return}return D}function Hc(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function rA(p,g,N,D,_){for(var P=g._reactName,X=[];N!==null&&N!==D;){var le=N,ye=le.alternate,_e=le.stateNode;if(ye!==null&&ye===D)break;le.tag===5&&_e!==null&&(le=_e,_?(ye=yl(N,P),ye!=null&&X.unshift(cp(N,ye,le))):_||(ye=yl(N,P),ye!=null&&X.push(cp(N,ye,le)))),N=N.return}X.length!==0&&p.push({event:g,listeners:X})}var i9=/\r\n?/g,s9=/\u0000|\uFFFD/g;function aA(p){return(typeof p=="string"?p:""+p).replace(i9,`
`).replace(s9,"")}function zg(p,g,N){if(g=aA(g),aA(p)!==g&&N)throw Error(n(425))}function Ug(){}var Px=null,Bx=null;function Lx(p,g){return p==="textarea"||p==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var zx=typeof setTimeout=="function"?setTimeout:void 0,o9=typeof clearTimeout=="function"?clearTimeout:void 0,iA=typeof Promise=="function"?Promise:void 0,u9=typeof queueMicrotask=="function"?queueMicrotask:typeof iA<"u"?function(p){return iA.resolve(null).then(p).catch(l9)}:zx;function l9(p){setTimeout(function(){throw p})}function Ux(p,g){var N=g,D=0;do{var _=N.nextSibling;if(p.removeChild(N),_&&_.nodeType===8)if(N=_.data,N==="/$"){if(D===0){p.removeChild(_),ep(g);return}D--}else N!=="$"&&N!=="$?"&&N!=="$!"||D++;N=_}while(N);ep(g)}function su(p){for(;p!=null;p=p.nextSibling){var g=p.nodeType;if(g===1||g===3)break;if(g===8){if(g=p.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return p}function sA(p){p=p.previousSibling;for(var g=0;p;){if(p.nodeType===8){var N=p.data;if(N==="$"||N==="$!"||N==="$?"){if(g===0)return p;g--}else N==="/$"&&g++}p=p.previousSibling}return null}var jc=Math.random().toString(36).slice(2),Vs="__reactFiber$"+jc,fp="__reactProps$"+jc,yo="__reactContainer$"+jc,Vx="__reactEvents$"+jc,c9="__reactListeners$"+jc,f9="__reactHandles$"+jc;function Sl(p){var g=p[Vs];if(g)return g;for(var N=p.parentNode;N;){if(g=N[yo]||N[Vs]){if(N=g.alternate,g.child!==null||N!==null&&N.child!==null)for(p=sA(p);p!==null;){if(N=p[Vs])return N;p=sA(p)}return g}p=N,N=p.parentNode}return null}function dp(p){return p=p[Vs]||p[yo],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function Xc(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(n(33))}function Vg(p){return p[fp]||null}var Wx=[],Kc=-1;function ou(p){return{current:p}}function Wn(p){0>Kc||(p.current=Wx[Kc],Wx[Kc]=null,Kc--)}function zn(p,g){Kc++,Wx[Kc]=p.current,p.current=g}var uu={},ha=ou(uu),Ha=ou(!1),Cl=uu;function Yc(p,g){var N=p.type.contextTypes;if(!N)return uu;var D=p.stateNode;if(D&&D.__reactInternalMemoizedUnmaskedChildContext===g)return D.__reactInternalMemoizedMaskedChildContext;var _={},P;for(P in N)_[P]=g[P];return D&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=g,p.__reactInternalMemoizedMaskedChildContext=_),_}function ja(p){return p=p.childContextTypes,p!=null}function Wg(){Wn(Ha),Wn(ha)}function oA(p,g,N){if(ha.current!==uu)throw Error(n(168));zn(ha,g),zn(Ha,N)}function uA(p,g,N){var D=p.stateNode;if(g=g.childContextTypes,typeof D.getChildContext!="function")return N;D=D.getChildContext();for(var _ in D)if(!(_ in g))throw Error(n(108,se(p)||"Unknown",_));return j({},N,D)}function qg(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||uu,Cl=ha.current,zn(ha,p),zn(Ha,Ha.current),!0}function lA(p,g,N){var D=p.stateNode;if(!D)throw Error(n(169));N?(p=uA(p,g,Cl),D.__reactInternalMemoizedMergedChildContext=p,Wn(Ha),Wn(ha),zn(ha,p)):Wn(Ha),zn(Ha,N)}var bo=null,Gg=!1,qx=!1;function cA(p){bo===null?bo=[p]:bo.push(p)}function d9(p){Gg=!0,cA(p)}function lu(){if(!qx&&bo!==null){qx=!0;var p=0,g=$n;try{var N=bo;for($n=1;p<N.length;p++){var D=N[p];do D=D(!0);while(D!==null)}bo=null,Gg=!1}catch(_){throw bo!==null&&(bo=bo.slice(p+1)),wg(jd,lu),_}finally{$n=g,qx=!1}}return null}var Zc=[],Qc=0,Hg=null,jg=0,Ii=[],ki=0,El=null,xo=1,wo="";function Dl(p,g){Zc[Qc++]=jg,Zc[Qc++]=Hg,Hg=p,jg=g}function fA(p,g,N){Ii[ki++]=xo,Ii[ki++]=wo,Ii[ki++]=El,El=p;var D=xo;p=wo;var _=32-cs(D)-1;D&=~(1<<_),N+=1;var P=32-cs(g)+_;if(30<P){var X=_-_%5;P=(D&(1<<X)-1).toString(32),D>>=X,_-=X,xo=1<<32-cs(g)+_|N<<_|D,wo=P+p}else xo=1<<P|N<<_|D,wo=p}function Gx(p){p.return!==null&&(Dl(p,1),fA(p,1,0))}function Hx(p){for(;p===Hg;)Hg=Zc[--Qc],Zc[Qc]=null,jg=Zc[--Qc],Zc[Qc]=null;for(;p===El;)El=Ii[--ki],Ii[ki]=null,wo=Ii[--ki],Ii[ki]=null,xo=Ii[--ki],Ii[ki]=null}var yi=null,bi=null,Hn=!1,ds=null;function dA(p,g){var N=Ri(5,null,null,0);N.elementType="DELETED",N.stateNode=g,N.return=p,g=p.deletions,g===null?(p.deletions=[N],p.flags|=16):g.push(N)}function pA(p,g){switch(p.tag){case 5:var N=p.type;return g=g.nodeType!==1||N.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(p.stateNode=g,yi=p,bi=su(g.firstChild),!0):!1;case 6:return g=p.pendingProps===""||g.nodeType!==3?null:g,g!==null?(p.stateNode=g,yi=p,bi=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(N=El!==null?{id:xo,overflow:wo}:null,p.memoizedState={dehydrated:g,treeContext:N,retryLane:1073741824},N=Ri(18,null,null,0),N.stateNode=g,N.return=p,p.child=N,yi=p,bi=null,!0):!1;default:return!1}}function jx(p){return(p.mode&1)!==0&&(p.flags&128)===0}function Xx(p){if(Hn){var g=bi;if(g){var N=g;if(!pA(p,g)){if(jx(p))throw Error(n(418));g=su(N.nextSibling);var D=yi;g&&pA(p,g)?dA(D,N):(p.flags=p.flags&-4097|2,Hn=!1,yi=p)}}else{if(jx(p))throw Error(n(418));p.flags=p.flags&-4097|2,Hn=!1,yi=p}}}function hA(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;yi=p}function Xg(p){if(p!==yi)return!1;if(!Hn)return hA(p),Hn=!0,!1;var g;if((g=p.tag!==3)&&!(g=p.tag!==5)&&(g=p.type,g=g!=="head"&&g!=="body"&&!Lx(p.type,p.memoizedProps)),g&&(g=bi)){if(jx(p))throw mA(),Error(n(418));for(;g;)dA(p,g),g=su(g.nextSibling)}if(hA(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));e:{for(p=p.nextSibling,g=0;p;){if(p.nodeType===8){var N=p.data;if(N==="/$"){if(g===0){bi=su(p.nextSibling);break e}g--}else N!=="$"&&N!=="$!"&&N!=="$?"||g++}p=p.nextSibling}bi=null}}else bi=yi?su(p.stateNode.nextSibling):null;return!0}function mA(){for(var p=bi;p;)p=su(p.nextSibling)}function Jc(){bi=yi=null,Hn=!1}function Kx(p){ds===null?ds=[p]:ds.push(p)}var p9=S.ReactCurrentBatchConfig;function pp(p,g,N){if(p=N.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(N._owner){if(N=N._owner,N){if(N.tag!==1)throw Error(n(309));var D=N.stateNode}if(!D)throw Error(n(147,p));var _=D,P=""+p;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===P?g.ref:(g=function(X){var le=_.refs;X===null?delete le[P]:le[P]=X},g._stringRef=P,g)}if(typeof p!="string")throw Error(n(284));if(!N._owner)throw Error(n(290,p))}return p}function Kg(p,g){throw p=Object.prototype.toString.call(g),Error(n(31,p==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":p))}function gA(p){var g=p._init;return g(p._payload)}function vA(p){function g(Te,Ne){if(p){var Ie=Te.deletions;Ie===null?(Te.deletions=[Ne],Te.flags|=16):Ie.push(Ne)}}function N(Te,Ne){if(!p)return null;for(;Ne!==null;)g(Te,Ne),Ne=Ne.sibling;return null}function D(Te,Ne){for(Te=new Map;Ne!==null;)Ne.key!==null?Te.set(Ne.key,Ne):Te.set(Ne.index,Ne),Ne=Ne.sibling;return Te}function _(Te,Ne){return Te=vu(Te,Ne),Te.index=0,Te.sibling=null,Te}function P(Te,Ne,Ie){return Te.index=Ie,p?(Ie=Te.alternate,Ie!==null?(Ie=Ie.index,Ie<Ne?(Te.flags|=2,Ne):Ie):(Te.flags|=2,Ne)):(Te.flags|=1048576,Ne)}function X(Te){return p&&Te.alternate===null&&(Te.flags|=2),Te}function le(Te,Ne,Ie,rt){return Ne===null||Ne.tag!==6?(Ne=zw(Ie,Te.mode,rt),Ne.return=Te,Ne):(Ne=_(Ne,Ie),Ne.return=Te,Ne)}function ye(Te,Ne,Ie,rt){var xt=Ie.type;return xt===A?Ke(Te,Ne,Ie.props.children,rt,Ie.key):Ne!==null&&(Ne.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===F&&gA(xt)===Ne.type)?(rt=_(Ne,Ie.props),rt.ref=pp(Te,Ne,Ie),rt.return=Te,rt):(rt=bv(Ie.type,Ie.key,Ie.props,null,Te.mode,rt),rt.ref=pp(Te,Ne,Ie),rt.return=Te,rt)}function _e(Te,Ne,Ie,rt){return Ne===null||Ne.tag!==4||Ne.stateNode.containerInfo!==Ie.containerInfo||Ne.stateNode.implementation!==Ie.implementation?(Ne=Uw(Ie,Te.mode,rt),Ne.return=Te,Ne):(Ne=_(Ne,Ie.children||[]),Ne.return=Te,Ne)}function Ke(Te,Ne,Ie,rt,xt){return Ne===null||Ne.tag!==7?(Ne=Fl(Ie,Te.mode,rt,xt),Ne.return=Te,Ne):(Ne=_(Ne,Ie),Ne.return=Te,Ne)}function Je(Te,Ne,Ie){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return Ne=zw(""+Ne,Te.mode,Ie),Ne.return=Te,Ne;if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case C:return Ie=bv(Ne.type,Ne.key,Ne.props,null,Te.mode,Ie),Ie.ref=pp(Te,null,Ne),Ie.return=Te,Ie;case E:return Ne=Uw(Ne,Te.mode,Ie),Ne.return=Te,Ne;case F:var rt=Ne._init;return Je(Te,rt(Ne._payload),Ie)}if(Re(Ne)||M(Ne))return Ne=Fl(Ne,Te.mode,Ie,null),Ne.return=Te,Ne;Kg(Te,Ne)}return null}function Xe(Te,Ne,Ie,rt){var xt=Ne!==null?Ne.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return xt!==null?null:le(Te,Ne,""+Ie,rt);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case C:return Ie.key===xt?ye(Te,Ne,Ie,rt):null;case E:return Ie.key===xt?_e(Te,Ne,Ie,rt):null;case F:return xt=Ie._init,Xe(Te,Ne,xt(Ie._payload),rt)}if(Re(Ie)||M(Ie))return xt!==null?null:Ke(Te,Ne,Ie,rt,null);Kg(Te,Ie)}return null}function lt(Te,Ne,Ie,rt,xt){if(typeof rt=="string"&&rt!==""||typeof rt=="number")return Te=Te.get(Ie)||null,le(Ne,Te,""+rt,xt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case C:return Te=Te.get(rt.key===null?Ie:rt.key)||null,ye(Ne,Te,rt,xt);case E:return Te=Te.get(rt.key===null?Ie:rt.key)||null,_e(Ne,Te,rt,xt);case F:var At=rt._init;return lt(Te,Ne,Ie,At(rt._payload),xt)}if(Re(rt)||M(rt))return Te=Te.get(Ie)||null,Ke(Ne,Te,rt,xt,null);Kg(Ne,rt)}return null}function mt(Te,Ne,Ie,rt){for(var xt=null,At=null,It=Ne,Pt=Ne=0,Vr=null;It!==null&&Pt<Ie.length;Pt++){It.index>Pt?(Vr=It,It=null):Vr=It.sibling;var yn=Xe(Te,It,Ie[Pt],rt);if(yn===null){It===null&&(It=Vr);break}p&&It&&yn.alternate===null&&g(Te,It),Ne=P(yn,Ne,Pt),At===null?xt=yn:At.sibling=yn,At=yn,It=Vr}if(Pt===Ie.length)return N(Te,It),Hn&&Dl(Te,Pt),xt;if(It===null){for(;Pt<Ie.length;Pt++)It=Je(Te,Ie[Pt],rt),It!==null&&(Ne=P(It,Ne,Pt),At===null?xt=It:At.sibling=It,At=It);return Hn&&Dl(Te,Pt),xt}for(It=D(Te,It);Pt<Ie.length;Pt++)Vr=lt(It,Te,Pt,Ie[Pt],rt),Vr!==null&&(p&&Vr.alternate!==null&&It.delete(Vr.key===null?Pt:Vr.key),Ne=P(Vr,Ne,Pt),At===null?xt=Vr:At.sibling=Vr,At=Vr);return p&&It.forEach(function(yu){return g(Te,yu)}),Hn&&Dl(Te,Pt),xt}function vt(Te,Ne,Ie,rt){var xt=M(Ie);if(typeof xt!="function")throw Error(n(150));if(Ie=xt.call(Ie),Ie==null)throw Error(n(151));for(var At=xt=null,It=Ne,Pt=Ne=0,Vr=null,yn=Ie.next();It!==null&&!yn.done;Pt++,yn=Ie.next()){It.index>Pt?(Vr=It,It=null):Vr=It.sibling;var yu=Xe(Te,It,yn.value,rt);if(yu===null){It===null&&(It=Vr);break}p&&It&&yu.alternate===null&&g(Te,It),Ne=P(yu,Ne,Pt),At===null?xt=yu:At.sibling=yu,At=yu,It=Vr}if(yn.done)return N(Te,It),Hn&&Dl(Te,Pt),xt;if(It===null){for(;!yn.done;Pt++,yn=Ie.next())yn=Je(Te,yn.value,rt),yn!==null&&(Ne=P(yn,Ne,Pt),At===null?xt=yn:At.sibling=yn,At=yn);return Hn&&Dl(Te,Pt),xt}for(It=D(Te,It);!yn.done;Pt++,yn=Ie.next())yn=lt(It,Te,Pt,yn.value,rt),yn!==null&&(p&&yn.alternate!==null&&It.delete(yn.key===null?Pt:yn.key),Ne=P(yn,Ne,Pt),At===null?xt=yn:At.sibling=yn,At=yn);return p&&It.forEach(function(H9){return g(Te,H9)}),Hn&&Dl(Te,Pt),xt}function dr(Te,Ne,Ie,rt){if(typeof Ie=="object"&&Ie!==null&&Ie.type===A&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case C:e:{for(var xt=Ie.key,At=Ne;At!==null;){if(At.key===xt){if(xt=Ie.type,xt===A){if(At.tag===7){N(Te,At.sibling),Ne=_(At,Ie.props.children),Ne.return=Te,Te=Ne;break e}}else if(At.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===F&&gA(xt)===At.type){N(Te,At.sibling),Ne=_(At,Ie.props),Ne.ref=pp(Te,At,Ie),Ne.return=Te,Te=Ne;break e}N(Te,At);break}else g(Te,At);At=At.sibling}Ie.type===A?(Ne=Fl(Ie.props.children,Te.mode,rt,Ie.key),Ne.return=Te,Te=Ne):(rt=bv(Ie.type,Ie.key,Ie.props,null,Te.mode,rt),rt.ref=pp(Te,Ne,Ie),rt.return=Te,Te=rt)}return X(Te);case E:e:{for(At=Ie.key;Ne!==null;){if(Ne.key===At)if(Ne.tag===4&&Ne.stateNode.containerInfo===Ie.containerInfo&&Ne.stateNode.implementation===Ie.implementation){N(Te,Ne.sibling),Ne=_(Ne,Ie.children||[]),Ne.return=Te,Te=Ne;break e}else{N(Te,Ne);break}else g(Te,Ne);Ne=Ne.sibling}Ne=Uw(Ie,Te.mode,rt),Ne.return=Te,Te=Ne}return X(Te);case F:return At=Ie._init,dr(Te,Ne,At(Ie._payload),rt)}if(Re(Ie))return mt(Te,Ne,Ie,rt);if(M(Ie))return vt(Te,Ne,Ie,rt);Kg(Te,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"?(Ie=""+Ie,Ne!==null&&Ne.tag===6?(N(Te,Ne.sibling),Ne=_(Ne,Ie),Ne.return=Te,Te=Ne):(N(Te,Ne),Ne=zw(Ie,Te.mode,rt),Ne.return=Te,Te=Ne),X(Te)):N(Te,Ne)}return dr}var ef=vA(!0),yA=vA(!1),Yg=ou(null),Zg=null,tf=null,Yx=null;function Zx(){Yx=tf=Zg=null}function Qx(p){var g=Yg.current;Wn(Yg),p._currentValue=g}function Jx(p,g,N){for(;p!==null;){var D=p.alternate;if((p.childLanes&g)!==g?(p.childLanes|=g,D!==null&&(D.childLanes|=g)):D!==null&&(D.childLanes&g)!==g&&(D.childLanes|=g),p===N)break;p=p.return}}function nf(p,g){Zg=p,Yx=tf=null,p=p.dependencies,p!==null&&p.firstContext!==null&&(p.lanes&g&&(Xa=!0),p.firstContext=null)}function _i(p){var g=p._currentValue;if(Yx!==p)if(p={context:p,memoizedValue:g,next:null},tf===null){if(Zg===null)throw Error(n(308));tf=p,Zg.dependencies={lanes:0,firstContext:p}}else tf=tf.next=p;return g}var Tl=null;function ew(p){Tl===null?Tl=[p]:Tl.push(p)}function bA(p,g,N,D){var _=g.interleaved;return _===null?(N.next=N,ew(g)):(N.next=_.next,_.next=N),g.interleaved=N,No(p,D)}function No(p,g){p.lanes|=g;var N=p.alternate;for(N!==null&&(N.lanes|=g),N=p,p=p.return;p!==null;)p.childLanes|=g,N=p.alternate,N!==null&&(N.childLanes|=g),N=p,p=p.return;return N.tag===3?N.stateNode:null}var cu=!1;function tw(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xA(p,g){p=p.updateQueue,g.updateQueue===p&&(g.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function So(p,g){return{eventTime:p,lane:g,tag:0,payload:null,callback:null,next:null}}function fu(p,g,N){var D=p.updateQueue;if(D===null)return null;if(D=D.shared,vn&2){var _=D.pending;return _===null?g.next=g:(g.next=_.next,_.next=g),D.pending=g,No(p,N)}return _=D.interleaved,_===null?(g.next=g,ew(D)):(g.next=_.next,_.next=g),D.interleaved=g,No(p,N)}function Qg(p,g,N){if(g=g.updateQueue,g!==null&&(g=g.shared,(N&4194240)!==0)){var D=g.lanes;D&=p.pendingLanes,N|=D,g.lanes=N,mx(p,N)}}function wA(p,g){var N=p.updateQueue,D=p.alternate;if(D!==null&&(D=D.updateQueue,N===D)){var _=null,P=null;if(N=N.firstBaseUpdate,N!==null){do{var X={eventTime:N.eventTime,lane:N.lane,tag:N.tag,payload:N.payload,callback:N.callback,next:null};P===null?_=P=X:P=P.next=X,N=N.next}while(N!==null);P===null?_=P=g:P=P.next=g}else _=P=g;N={baseState:D.baseState,firstBaseUpdate:_,lastBaseUpdate:P,shared:D.shared,effects:D.effects},p.updateQueue=N;return}p=N.lastBaseUpdate,p===null?N.firstBaseUpdate=g:p.next=g,N.lastBaseUpdate=g}function Jg(p,g,N,D){var _=p.updateQueue;cu=!1;var P=_.firstBaseUpdate,X=_.lastBaseUpdate,le=_.shared.pending;if(le!==null){_.shared.pending=null;var ye=le,_e=ye.next;ye.next=null,X===null?P=_e:X.next=_e,X=ye;var Ke=p.alternate;Ke!==null&&(Ke=Ke.updateQueue,le=Ke.lastBaseUpdate,le!==X&&(le===null?Ke.firstBaseUpdate=_e:le.next=_e,Ke.lastBaseUpdate=ye))}if(P!==null){var Je=_.baseState;X=0,Ke=_e=ye=null,le=P;do{var Xe=le.lane,lt=le.eventTime;if((D&Xe)===Xe){Ke!==null&&(Ke=Ke.next={eventTime:lt,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var mt=p,vt=le;switch(Xe=g,lt=N,vt.tag){case 1:if(mt=vt.payload,typeof mt=="function"){Je=mt.call(lt,Je,Xe);break e}Je=mt;break e;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=vt.payload,Xe=typeof mt=="function"?mt.call(lt,Je,Xe):mt,Xe==null)break e;Je=j({},Je,Xe);break e;case 2:cu=!0}}le.callback!==null&&le.lane!==0&&(p.flags|=64,Xe=_.effects,Xe===null?_.effects=[le]:Xe.push(le))}else lt={eventTime:lt,lane:Xe,tag:le.tag,payload:le.payload,callback:le.callback,next:null},Ke===null?(_e=Ke=lt,ye=Je):Ke=Ke.next=lt,X|=Xe;if(le=le.next,le===null){if(le=_.shared.pending,le===null)break;Xe=le,le=Xe.next,Xe.next=null,_.lastBaseUpdate=Xe,_.shared.pending=null}}while(!0);if(Ke===null&&(ye=Je),_.baseState=ye,_.firstBaseUpdate=_e,_.lastBaseUpdate=Ke,g=_.shared.interleaved,g!==null){_=g;do X|=_.lane,_=_.next;while(_!==g)}else P===null&&(_.shared.lanes=0);Il|=X,p.lanes=X,p.memoizedState=Je}}function NA(p,g,N){if(p=g.effects,g.effects=null,p!==null)for(g=0;g<p.length;g++){var D=p[g],_=D.callback;if(_!==null){if(D.callback=null,D=N,typeof _!="function")throw Error(n(191,_));_.call(D)}}}var hp={},Ws=ou(hp),mp=ou(hp),gp=ou(hp);function $l(p){if(p===hp)throw Error(n(174));return p}function nw(p,g){switch(zn(gp,g),zn(mp,p),zn(Ws,hp),p=g.nodeType,p){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:Be(null,"");break;default:p=p===8?g.parentNode:g,g=p.namespaceURI||null,p=p.tagName,g=Be(g,p)}Wn(Ws),zn(Ws,g)}function rf(){Wn(Ws),Wn(mp),Wn(gp)}function SA(p){$l(gp.current);var g=$l(Ws.current),N=Be(g,p.type);g!==N&&(zn(mp,p),zn(Ws,N))}function rw(p){mp.current===p&&(Wn(Ws),Wn(mp))}var Jn=ou(0);function ev(p){for(var g=p;g!==null;){if(g.tag===13){var N=g.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||N.data==="$?"||N.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var aw=[];function iw(){for(var p=0;p<aw.length;p++)aw[p]._workInProgressVersionPrimary=null;aw.length=0}var tv=S.ReactCurrentDispatcher,sw=S.ReactCurrentBatchConfig,Al=0,er=null,Tr=null,zr=null,nv=!1,vp=!1,yp=0,h9=0;function ma(){throw Error(n(321))}function ow(p,g){if(g===null)return!1;for(var N=0;N<g.length&&N<p.length;N++)if(!fs(p[N],g[N]))return!1;return!0}function uw(p,g,N,D,_,P){if(Al=P,er=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,tv.current=p===null||p.memoizedState===null?y9:b9,p=N(D,_),vp){P=0;do{if(vp=!1,yp=0,25<=P)throw Error(n(301));P+=1,zr=Tr=null,g.updateQueue=null,tv.current=x9,p=N(D,_)}while(vp)}if(tv.current=iv,g=Tr!==null&&Tr.next!==null,Al=0,zr=Tr=er=null,nv=!1,g)throw Error(n(300));return p}function lw(){var p=yp!==0;return yp=0,p}function qs(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zr===null?er.memoizedState=zr=p:zr=zr.next=p,zr}function Oi(){if(Tr===null){var p=er.alternate;p=p!==null?p.memoizedState:null}else p=Tr.next;var g=zr===null?er.memoizedState:zr.next;if(g!==null)zr=g,Tr=p;else{if(p===null)throw Error(n(310));Tr=p,p={memoizedState:Tr.memoizedState,baseState:Tr.baseState,baseQueue:Tr.baseQueue,queue:Tr.queue,next:null},zr===null?er.memoizedState=zr=p:zr=zr.next=p}return zr}function bp(p,g){return typeof g=="function"?g(p):g}function cw(p){var g=Oi(),N=g.queue;if(N===null)throw Error(n(311));N.lastRenderedReducer=p;var D=Tr,_=D.baseQueue,P=N.pending;if(P!==null){if(_!==null){var X=_.next;_.next=P.next,P.next=X}D.baseQueue=_=P,N.pending=null}if(_!==null){P=_.next,D=D.baseState;var le=X=null,ye=null,_e=P;do{var Ke=_e.lane;if((Al&Ke)===Ke)ye!==null&&(ye=ye.next={lane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),D=_e.hasEagerState?_e.eagerState:p(D,_e.action);else{var Je={lane:Ke,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null};ye===null?(le=ye=Je,X=D):ye=ye.next=Je,er.lanes|=Ke,Il|=Ke}_e=_e.next}while(_e!==null&&_e!==P);ye===null?X=D:ye.next=le,fs(D,g.memoizedState)||(Xa=!0),g.memoizedState=D,g.baseState=X,g.baseQueue=ye,N.lastRenderedState=D}if(p=N.interleaved,p!==null){_=p;do P=_.lane,er.lanes|=P,Il|=P,_=_.next;while(_!==p)}else _===null&&(N.lanes=0);return[g.memoizedState,N.dispatch]}function fw(p){var g=Oi(),N=g.queue;if(N===null)throw Error(n(311));N.lastRenderedReducer=p;var D=N.dispatch,_=N.pending,P=g.memoizedState;if(_!==null){N.pending=null;var X=_=_.next;do P=p(P,X.action),X=X.next;while(X!==_);fs(P,g.memoizedState)||(Xa=!0),g.memoizedState=P,g.baseQueue===null&&(g.baseState=P),N.lastRenderedState=P}return[P,D]}function CA(){}function EA(p,g){var N=er,D=Oi(),_=g(),P=!fs(D.memoizedState,_);if(P&&(D.memoizedState=_,Xa=!0),D=D.queue,dw($A.bind(null,N,D,p),[p]),D.getSnapshot!==g||P||zr!==null&&zr.memoizedState.tag&1){if(N.flags|=2048,xp(9,TA.bind(null,N,D,_,g),void 0,null),Ur===null)throw Error(n(349));Al&30||DA(N,g,_)}return _}function DA(p,g,N){p.flags|=16384,p={getSnapshot:g,value:N},g=er.updateQueue,g===null?(g={lastEffect:null,stores:null},er.updateQueue=g,g.stores=[p]):(N=g.stores,N===null?g.stores=[p]:N.push(p))}function TA(p,g,N,D){g.value=N,g.getSnapshot=D,AA(g)&&IA(p)}function $A(p,g,N){return N(function(){AA(g)&&IA(p)})}function AA(p){var g=p.getSnapshot;p=p.value;try{var N=g();return!fs(p,N)}catch{return!0}}function IA(p){var g=No(p,1);g!==null&&gs(g,p,1,-1)}function kA(p){var g=qs();return typeof p=="function"&&(p=p()),g.memoizedState=g.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bp,lastRenderedState:p},g.queue=p,p=p.dispatch=v9.bind(null,er,p),[g.memoizedState,p]}function xp(p,g,N,D){return p={tag:p,create:g,destroy:N,deps:D,next:null},g=er.updateQueue,g===null?(g={lastEffect:null,stores:null},er.updateQueue=g,g.lastEffect=p.next=p):(N=g.lastEffect,N===null?g.lastEffect=p.next=p:(D=N.next,N.next=p,p.next=D,g.lastEffect=p)),p}function _A(){return Oi().memoizedState}function rv(p,g,N,D){var _=qs();er.flags|=p,_.memoizedState=xp(1|g,N,void 0,D===void 0?null:D)}function av(p,g,N,D){var _=Oi();D=D===void 0?null:D;var P=void 0;if(Tr!==null){var X=Tr.memoizedState;if(P=X.destroy,D!==null&&ow(D,X.deps)){_.memoizedState=xp(g,N,P,D);return}}er.flags|=p,_.memoizedState=xp(1|g,N,P,D)}function OA(p,g){return rv(8390656,8,p,g)}function dw(p,g){return av(2048,8,p,g)}function FA(p,g){return av(4,2,p,g)}function RA(p,g){return av(4,4,p,g)}function MA(p,g){if(typeof g=="function")return p=p(),g(p),function(){g(null)};if(g!=null)return p=p(),g.current=p,function(){g.current=null}}function PA(p,g,N){return N=N!=null?N.concat([p]):null,av(4,4,MA.bind(null,g,p),N)}function pw(){}function BA(p,g){var N=Oi();g=g===void 0?null:g;var D=N.memoizedState;return D!==null&&g!==null&&ow(g,D[1])?D[0]:(N.memoizedState=[p,g],p)}function LA(p,g){var N=Oi();g=g===void 0?null:g;var D=N.memoizedState;return D!==null&&g!==null&&ow(g,D[1])?D[0]:(p=p(),N.memoizedState=[p,g],p)}function zA(p,g,N){return Al&21?(fs(N,g)||(N=g$(),er.lanes|=N,Il|=N,p.baseState=!0),g):(p.baseState&&(p.baseState=!1,Xa=!0),p.memoizedState=N)}function m9(p,g){var N=$n;$n=N!==0&&4>N?N:4,p(!0);var D=sw.transition;sw.transition={};try{p(!1),g()}finally{$n=N,sw.transition=D}}function UA(){return Oi().memoizedState}function g9(p,g,N){var D=mu(p);if(N={lane:D,action:N,hasEagerState:!1,eagerState:null,next:null},VA(p))WA(g,N);else if(N=bA(p,g,N,D),N!==null){var _=_a();gs(N,p,D,_),qA(N,g,D)}}function v9(p,g,N){var D=mu(p),_={lane:D,action:N,hasEagerState:!1,eagerState:null,next:null};if(VA(p))WA(g,_);else{var P=p.alternate;if(p.lanes===0&&(P===null||P.lanes===0)&&(P=g.lastRenderedReducer,P!==null))try{var X=g.lastRenderedState,le=P(X,N);if(_.hasEagerState=!0,_.eagerState=le,fs(le,X)){var ye=g.interleaved;ye===null?(_.next=_,ew(g)):(_.next=ye.next,ye.next=_),g.interleaved=_;return}}catch{}finally{}N=bA(p,g,_,D),N!==null&&(_=_a(),gs(N,p,D,_),qA(N,g,D))}}function VA(p){var g=p.alternate;return p===er||g!==null&&g===er}function WA(p,g){vp=nv=!0;var N=p.pending;N===null?g.next=g:(g.next=N.next,N.next=g),p.pending=g}function qA(p,g,N){if(N&4194240){var D=g.lanes;D&=p.pendingLanes,N|=D,g.lanes=N,mx(p,N)}}var iv={readContext:_i,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useInsertionEffect:ma,useLayoutEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useMutableSource:ma,useSyncExternalStore:ma,useId:ma,unstable_isNewReconciler:!1},y9={readContext:_i,useCallback:function(p,g){return qs().memoizedState=[p,g===void 0?null:g],p},useContext:_i,useEffect:OA,useImperativeHandle:function(p,g,N){return N=N!=null?N.concat([p]):null,rv(4194308,4,MA.bind(null,g,p),N)},useLayoutEffect:function(p,g){return rv(4194308,4,p,g)},useInsertionEffect:function(p,g){return rv(4,2,p,g)},useMemo:function(p,g){var N=qs();return g=g===void 0?null:g,p=p(),N.memoizedState=[p,g],p},useReducer:function(p,g,N){var D=qs();return g=N!==void 0?N(g):g,D.memoizedState=D.baseState=g,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:g},D.queue=p,p=p.dispatch=g9.bind(null,er,p),[D.memoizedState,p]},useRef:function(p){var g=qs();return p={current:p},g.memoizedState=p},useState:kA,useDebugValue:pw,useDeferredValue:function(p){return qs().memoizedState=p},useTransition:function(){var p=kA(!1),g=p[0];return p=m9.bind(null,p[1]),qs().memoizedState=p,[g,p]},useMutableSource:function(){},useSyncExternalStore:function(p,g,N){var D=er,_=qs();if(Hn){if(N===void 0)throw Error(n(407));N=N()}else{if(N=g(),Ur===null)throw Error(n(349));Al&30||DA(D,g,N)}_.memoizedState=N;var P={value:N,getSnapshot:g};return _.queue=P,OA($A.bind(null,D,P,p),[p]),D.flags|=2048,xp(9,TA.bind(null,D,P,N,g),void 0,null),N},useId:function(){var p=qs(),g=Ur.identifierPrefix;if(Hn){var N=wo,D=xo;N=(D&~(1<<32-cs(D)-1)).toString(32)+N,g=":"+g+"R"+N,N=yp++,0<N&&(g+="H"+N.toString(32)),g+=":"}else N=h9++,g=":"+g+"r"+N.toString(32)+":";return p.memoizedState=g},unstable_isNewReconciler:!1},b9={readContext:_i,useCallback:BA,useContext:_i,useEffect:dw,useImperativeHandle:PA,useInsertionEffect:FA,useLayoutEffect:RA,useMemo:LA,useReducer:cw,useRef:_A,useState:function(){return cw(bp)},useDebugValue:pw,useDeferredValue:function(p){var g=Oi();return zA(g,Tr.memoizedState,p)},useTransition:function(){var p=cw(bp)[0],g=Oi().memoizedState;return[p,g]},useMutableSource:CA,useSyncExternalStore:EA,useId:UA,unstable_isNewReconciler:!1},x9={readContext:_i,useCallback:BA,useContext:_i,useEffect:dw,useImperativeHandle:PA,useInsertionEffect:FA,useLayoutEffect:RA,useMemo:LA,useReducer:fw,useRef:_A,useState:function(){return fw(bp)},useDebugValue:pw,useDeferredValue:function(p){var g=Oi();return Tr===null?g.memoizedState=p:zA(g,Tr.memoizedState,p)},useTransition:function(){var p=fw(bp)[0],g=Oi().memoizedState;return[p,g]},useMutableSource:CA,useSyncExternalStore:EA,useId:UA,unstable_isNewReconciler:!1};function ps(p,g){if(p&&p.defaultProps){g=j({},g),p=p.defaultProps;for(var N in p)g[N]===void 0&&(g[N]=p[N]);return g}return g}function hw(p,g,N,D){g=p.memoizedState,N=N(D,g),N=N==null?g:j({},g,N),p.memoizedState=N,p.lanes===0&&(p.updateQueue.baseState=N)}var sv={isMounted:function(p){return(p=p._reactInternals)?vo(p)===p:!1},enqueueSetState:function(p,g,N){p=p._reactInternals;var D=_a(),_=mu(p),P=So(D,_);P.payload=g,N!=null&&(P.callback=N),g=fu(p,P,_),g!==null&&(gs(g,p,_,D),Qg(g,p,_))},enqueueReplaceState:function(p,g,N){p=p._reactInternals;var D=_a(),_=mu(p),P=So(D,_);P.tag=1,P.payload=g,N!=null&&(P.callback=N),g=fu(p,P,_),g!==null&&(gs(g,p,_,D),Qg(g,p,_))},enqueueForceUpdate:function(p,g){p=p._reactInternals;var N=_a(),D=mu(p),_=So(N,D);_.tag=2,g!=null&&(_.callback=g),g=fu(p,_,D),g!==null&&(gs(g,p,D,N),Qg(g,p,D))}};function GA(p,g,N,D,_,P,X){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(D,P,X):g.prototype&&g.prototype.isPureReactComponent?!sp(N,D)||!sp(_,P):!0}function HA(p,g,N){var D=!1,_=uu,P=g.contextType;return typeof P=="object"&&P!==null?P=_i(P):(_=ja(g)?Cl:ha.current,D=g.contextTypes,P=(D=D!=null)?Yc(p,_):uu),g=new g(N,P),p.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=sv,p.stateNode=g,g._reactInternals=p,D&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=_,p.__reactInternalMemoizedMaskedChildContext=P),g}function jA(p,g,N,D){p=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(N,D),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(N,D),g.state!==p&&sv.enqueueReplaceState(g,g.state,null)}function mw(p,g,N,D){var _=p.stateNode;_.props=N,_.state=p.memoizedState,_.refs={},tw(p);var P=g.contextType;typeof P=="object"&&P!==null?_.context=_i(P):(P=ja(g)?Cl:ha.current,_.context=Yc(p,P)),_.state=p.memoizedState,P=g.getDerivedStateFromProps,typeof P=="function"&&(hw(p,g,P,N),_.state=p.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(g=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),g!==_.state&&sv.enqueueReplaceState(_,_.state,null),Jg(p,N,_,D),_.state=p.memoizedState),typeof _.componentDidMount=="function"&&(p.flags|=4194308)}function af(p,g){try{var N="",D=g;do N+=ue(D),D=D.return;while(D);var _=N}catch(P){_=`
Error generating stack: `+P.message+`
`+P.stack}return{value:p,source:g,stack:_,digest:null}}function gw(p,g,N){return{value:p,source:null,stack:N??null,digest:g??null}}function vw(p,g){try{console.error(g.value)}catch(N){setTimeout(function(){throw N})}}var w9=typeof WeakMap=="function"?WeakMap:Map;function XA(p,g,N){N=So(-1,N),N.tag=3,N.payload={element:null};var D=g.value;return N.callback=function(){pv||(pv=!0,_w=D),vw(p,g)},N}function KA(p,g,N){N=So(-1,N),N.tag=3;var D=p.type.getDerivedStateFromError;if(typeof D=="function"){var _=g.value;N.payload=function(){return D(_)},N.callback=function(){vw(p,g)}}var P=p.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(N.callback=function(){vw(p,g),typeof D!="function"&&(pu===null?pu=new Set([this]):pu.add(this));var X=g.stack;this.componentDidCatch(g.value,{componentStack:X!==null?X:""})}),N}function YA(p,g,N){var D=p.pingCache;if(D===null){D=p.pingCache=new w9;var _=new Set;D.set(g,_)}else _=D.get(g),_===void 0&&(_=new Set,D.set(g,_));_.has(N)||(_.add(N),p=R9.bind(null,p,g,N),g.then(p,p))}function ZA(p){do{var g;if((g=p.tag===13)&&(g=p.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return p;p=p.return}while(p!==null);return null}function QA(p,g,N,D,_){return p.mode&1?(p.flags|=65536,p.lanes=_,p):(p===g?p.flags|=65536:(p.flags|=128,N.flags|=131072,N.flags&=-52805,N.tag===1&&(N.alternate===null?N.tag=17:(g=So(-1,1),g.tag=2,fu(N,g,1))),N.lanes|=1),p)}var N9=S.ReactCurrentOwner,Xa=!1;function ka(p,g,N,D){g.child=p===null?yA(g,null,N,D):ef(g,p.child,N,D)}function JA(p,g,N,D,_){N=N.render;var P=g.ref;return nf(g,_),D=uw(p,g,N,D,P,_),N=lw(),p!==null&&!Xa?(g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~_,Co(p,g,_)):(Hn&&N&&Gx(g),g.flags|=1,ka(p,g,D,_),g.child)}function eI(p,g,N,D,_){if(p===null){var P=N.type;return typeof P=="function"&&!Lw(P)&&P.defaultProps===void 0&&N.compare===null&&N.defaultProps===void 0?(g.tag=15,g.type=P,tI(p,g,P,D,_)):(p=bv(N.type,null,D,g,g.mode,_),p.ref=g.ref,p.return=g,g.child=p)}if(P=p.child,!(p.lanes&_)){var X=P.memoizedProps;if(N=N.compare,N=N!==null?N:sp,N(X,D)&&p.ref===g.ref)return Co(p,g,_)}return g.flags|=1,p=vu(P,D),p.ref=g.ref,p.return=g,g.child=p}function tI(p,g,N,D,_){if(p!==null){var P=p.memoizedProps;if(sp(P,D)&&p.ref===g.ref)if(Xa=!1,g.pendingProps=D=P,(p.lanes&_)!==0)p.flags&131072&&(Xa=!0);else return g.lanes=p.lanes,Co(p,g,_)}return yw(p,g,N,D,_)}function nI(p,g,N){var D=g.pendingProps,_=D.children,P=p!==null?p.memoizedState:null;if(D.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},zn(of,xi),xi|=N;else{if(!(N&1073741824))return p=P!==null?P.baseLanes|N:N,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:p,cachePool:null,transitions:null},g.updateQueue=null,zn(of,xi),xi|=p,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},D=P!==null?P.baseLanes:N,zn(of,xi),xi|=D}else P!==null?(D=P.baseLanes|N,g.memoizedState=null):D=N,zn(of,xi),xi|=D;return ka(p,g,_,N),g.child}function rI(p,g){var N=g.ref;(p===null&&N!==null||p!==null&&p.ref!==N)&&(g.flags|=512,g.flags|=2097152)}function yw(p,g,N,D,_){var P=ja(N)?Cl:ha.current;return P=Yc(g,P),nf(g,_),N=uw(p,g,N,D,P,_),D=lw(),p!==null&&!Xa?(g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~_,Co(p,g,_)):(Hn&&D&&Gx(g),g.flags|=1,ka(p,g,N,_),g.child)}function aI(p,g,N,D,_){if(ja(N)){var P=!0;qg(g)}else P=!1;if(nf(g,_),g.stateNode===null)uv(p,g),HA(g,N,D),mw(g,N,D,_),D=!0;else if(p===null){var X=g.stateNode,le=g.memoizedProps;X.props=le;var ye=X.context,_e=N.contextType;typeof _e=="object"&&_e!==null?_e=_i(_e):(_e=ja(N)?Cl:ha.current,_e=Yc(g,_e));var Ke=N.getDerivedStateFromProps,Je=typeof Ke=="function"||typeof X.getSnapshotBeforeUpdate=="function";Je||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(le!==D||ye!==_e)&&jA(g,X,D,_e),cu=!1;var Xe=g.memoizedState;X.state=Xe,Jg(g,D,X,_),ye=g.memoizedState,le!==D||Xe!==ye||Ha.current||cu?(typeof Ke=="function"&&(hw(g,N,Ke,D),ye=g.memoizedState),(le=cu||GA(g,N,le,D,Xe,ye,_e))?(Je||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(g.flags|=4194308)):(typeof X.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=D,g.memoizedState=ye),X.props=D,X.state=ye,X.context=_e,D=le):(typeof X.componentDidMount=="function"&&(g.flags|=4194308),D=!1)}else{X=g.stateNode,xA(p,g),le=g.memoizedProps,_e=g.type===g.elementType?le:ps(g.type,le),X.props=_e,Je=g.pendingProps,Xe=X.context,ye=N.contextType,typeof ye=="object"&&ye!==null?ye=_i(ye):(ye=ja(N)?Cl:ha.current,ye=Yc(g,ye));var lt=N.getDerivedStateFromProps;(Ke=typeof lt=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(le!==Je||Xe!==ye)&&jA(g,X,D,ye),cu=!1,Xe=g.memoizedState,X.state=Xe,Jg(g,D,X,_);var mt=g.memoizedState;le!==Je||Xe!==mt||Ha.current||cu?(typeof lt=="function"&&(hw(g,N,lt,D),mt=g.memoizedState),(_e=cu||GA(g,N,_e,D,Xe,mt,ye)||!1)?(Ke||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(D,mt,ye),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(D,mt,ye)),typeof X.componentDidUpdate=="function"&&(g.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof X.componentDidUpdate!="function"||le===p.memoizedProps&&Xe===p.memoizedState||(g.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||le===p.memoizedProps&&Xe===p.memoizedState||(g.flags|=1024),g.memoizedProps=D,g.memoizedState=mt),X.props=D,X.state=mt,X.context=ye,D=_e):(typeof X.componentDidUpdate!="function"||le===p.memoizedProps&&Xe===p.memoizedState||(g.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||le===p.memoizedProps&&Xe===p.memoizedState||(g.flags|=1024),D=!1)}return bw(p,g,N,D,P,_)}function bw(p,g,N,D,_,P){rI(p,g);var X=(g.flags&128)!==0;if(!D&&!X)return _&&lA(g,N,!1),Co(p,g,P);D=g.stateNode,N9.current=g;var le=X&&typeof N.getDerivedStateFromError!="function"?null:D.render();return g.flags|=1,p!==null&&X?(g.child=ef(g,p.child,null,P),g.child=ef(g,null,le,P)):ka(p,g,le,P),g.memoizedState=D.state,_&&lA(g,N,!0),g.child}function iI(p){var g=p.stateNode;g.pendingContext?oA(p,g.pendingContext,g.pendingContext!==g.context):g.context&&oA(p,g.context,!1),nw(p,g.containerInfo)}function sI(p,g,N,D,_){return Jc(),Kx(_),g.flags|=256,ka(p,g,N,D),g.child}var xw={dehydrated:null,treeContext:null,retryLane:0};function ww(p){return{baseLanes:p,cachePool:null,transitions:null}}function oI(p,g,N){var D=g.pendingProps,_=Jn.current,P=!1,X=(g.flags&128)!==0,le;if((le=X)||(le=p!==null&&p.memoizedState===null?!1:(_&2)!==0),le?(P=!0,g.flags&=-129):(p===null||p.memoizedState!==null)&&(_|=1),zn(Jn,_&1),p===null)return Xx(g),p=g.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?(g.mode&1?p.data==="$!"?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(X=D.children,p=D.fallback,P?(D=g.mode,P=g.child,X={mode:"hidden",children:X},!(D&1)&&P!==null?(P.childLanes=0,P.pendingProps=X):P=xv(X,D,0,null),p=Fl(p,D,N,null),P.return=g,p.return=g,P.sibling=p,g.child=P,g.child.memoizedState=ww(N),g.memoizedState=xw,p):Nw(g,X));if(_=p.memoizedState,_!==null&&(le=_.dehydrated,le!==null))return S9(p,g,X,D,le,_,N);if(P){P=D.fallback,X=g.mode,_=p.child,le=_.sibling;var ye={mode:"hidden",children:D.children};return!(X&1)&&g.child!==_?(D=g.child,D.childLanes=0,D.pendingProps=ye,g.deletions=null):(D=vu(_,ye),D.subtreeFlags=_.subtreeFlags&14680064),le!==null?P=vu(le,P):(P=Fl(P,X,N,null),P.flags|=2),P.return=g,D.return=g,D.sibling=P,g.child=D,D=P,P=g.child,X=p.child.memoizedState,X=X===null?ww(N):{baseLanes:X.baseLanes|N,cachePool:null,transitions:X.transitions},P.memoizedState=X,P.childLanes=p.childLanes&~N,g.memoizedState=xw,D}return P=p.child,p=P.sibling,D=vu(P,{mode:"visible",children:D.children}),!(g.mode&1)&&(D.lanes=N),D.return=g,D.sibling=null,p!==null&&(N=g.deletions,N===null?(g.deletions=[p],g.flags|=16):N.push(p)),g.child=D,g.memoizedState=null,D}function Nw(p,g){return g=xv({mode:"visible",children:g},p.mode,0,null),g.return=p,p.child=g}function ov(p,g,N,D){return D!==null&&Kx(D),ef(g,p.child,null,N),p=Nw(g,g.pendingProps.children),p.flags|=2,g.memoizedState=null,p}function S9(p,g,N,D,_,P,X){if(N)return g.flags&256?(g.flags&=-257,D=gw(Error(n(422))),ov(p,g,X,D)):g.memoizedState!==null?(g.child=p.child,g.flags|=128,null):(P=D.fallback,_=g.mode,D=xv({mode:"visible",children:D.children},_,0,null),P=Fl(P,_,X,null),P.flags|=2,D.return=g,P.return=g,D.sibling=P,g.child=D,g.mode&1&&ef(g,p.child,null,X),g.child.memoizedState=ww(X),g.memoizedState=xw,P);if(!(g.mode&1))return ov(p,g,X,null);if(_.data==="$!"){if(D=_.nextSibling&&_.nextSibling.dataset,D)var le=D.dgst;return D=le,P=Error(n(419)),D=gw(P,D,void 0),ov(p,g,X,D)}if(le=(X&p.childLanes)!==0,Xa||le){if(D=Ur,D!==null){switch(X&-X){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(D.suspendedLanes|X)?0:_,_!==0&&_!==P.retryLane&&(P.retryLane=_,No(p,_),gs(D,p,_,-1))}return Bw(),D=gw(Error(n(421))),ov(p,g,X,D)}return _.data==="$?"?(g.flags|=128,g.child=p.child,g=M9.bind(null,p),_._reactRetry=g,null):(p=P.treeContext,bi=su(_.nextSibling),yi=g,Hn=!0,ds=null,p!==null&&(Ii[ki++]=xo,Ii[ki++]=wo,Ii[ki++]=El,xo=p.id,wo=p.overflow,El=g),g=Nw(g,D.children),g.flags|=4096,g)}function uI(p,g,N){p.lanes|=g;var D=p.alternate;D!==null&&(D.lanes|=g),Jx(p.return,g,N)}function Sw(p,g,N,D,_){var P=p.memoizedState;P===null?p.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:D,tail:N,tailMode:_}:(P.isBackwards=g,P.rendering=null,P.renderingStartTime=0,P.last=D,P.tail=N,P.tailMode=_)}function lI(p,g,N){var D=g.pendingProps,_=D.revealOrder,P=D.tail;if(ka(p,g,D.children,N),D=Jn.current,D&2)D=D&1|2,g.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=g.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&uI(p,N,g);else if(p.tag===19)uI(p,N,g);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===g)break e;for(;p.sibling===null;){if(p.return===null||p.return===g)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}D&=1}if(zn(Jn,D),!(g.mode&1))g.memoizedState=null;else switch(_){case"forwards":for(N=g.child,_=null;N!==null;)p=N.alternate,p!==null&&ev(p)===null&&(_=N),N=N.sibling;N=_,N===null?(_=g.child,g.child=null):(_=N.sibling,N.sibling=null),Sw(g,!1,_,N,P);break;case"backwards":for(N=null,_=g.child,g.child=null;_!==null;){if(p=_.alternate,p!==null&&ev(p)===null){g.child=_;break}p=_.sibling,_.sibling=N,N=_,_=p}Sw(g,!0,N,null,P);break;case"together":Sw(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function uv(p,g){!(g.mode&1)&&p!==null&&(p.alternate=null,g.alternate=null,g.flags|=2)}function Co(p,g,N){if(p!==null&&(g.dependencies=p.dependencies),Il|=g.lanes,!(N&g.childLanes))return null;if(p!==null&&g.child!==p.child)throw Error(n(153));if(g.child!==null){for(p=g.child,N=vu(p,p.pendingProps),g.child=N,N.return=g;p.sibling!==null;)p=p.sibling,N=N.sibling=vu(p,p.pendingProps),N.return=g;N.sibling=null}return g.child}function C9(p,g,N){switch(g.tag){case 3:iI(g),Jc();break;case 5:SA(g);break;case 1:ja(g.type)&&qg(g);break;case 4:nw(g,g.stateNode.containerInfo);break;case 10:var D=g.type._context,_=g.memoizedProps.value;zn(Yg,D._currentValue),D._currentValue=_;break;case 13:if(D=g.memoizedState,D!==null)return D.dehydrated!==null?(zn(Jn,Jn.current&1),g.flags|=128,null):N&g.child.childLanes?oI(p,g,N):(zn(Jn,Jn.current&1),p=Co(p,g,N),p!==null?p.sibling:null);zn(Jn,Jn.current&1);break;case 19:if(D=(N&g.childLanes)!==0,p.flags&128){if(D)return lI(p,g,N);g.flags|=128}if(_=g.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),zn(Jn,Jn.current),D)break;return null;case 22:case 23:return g.lanes=0,nI(p,g,N)}return Co(p,g,N)}var cI,Cw,fI,dI;cI=function(p,g){for(var N=g.child;N!==null;){if(N.tag===5||N.tag===6)p.appendChild(N.stateNode);else if(N.tag!==4&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===g)break;for(;N.sibling===null;){if(N.return===null||N.return===g)return;N=N.return}N.sibling.return=N.return,N=N.sibling}},Cw=function(){},fI=function(p,g,N,D){var _=p.memoizedProps;if(_!==D){p=g.stateNode,$l(Ws.current);var P=null;switch(N){case"input":_=Ee(p,_),D=Ee(p,D),P=[];break;case"select":_=j({},_,{value:void 0}),D=j({},D,{value:void 0}),P=[];break;case"textarea":_=Ze(p,_),D=Ze(p,D),P=[];break;default:typeof _.onClick!="function"&&typeof D.onClick=="function"&&(p.onclick=Ug)}V(N,D);var X;N=null;for(_e in _)if(!D.hasOwnProperty(_e)&&_.hasOwnProperty(_e)&&_[_e]!=null)if(_e==="style"){var le=_[_e];for(X in le)le.hasOwnProperty(X)&&(N||(N={}),N[X]="")}else _e!=="dangerouslySetInnerHTML"&&_e!=="children"&&_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&_e!=="autoFocus"&&(a.hasOwnProperty(_e)?P||(P=[]):(P=P||[]).push(_e,null));for(_e in D){var ye=D[_e];if(le=_!=null?_[_e]:void 0,D.hasOwnProperty(_e)&&ye!==le&&(ye!=null||le!=null))if(_e==="style")if(le){for(X in le)!le.hasOwnProperty(X)||ye&&ye.hasOwnProperty(X)||(N||(N={}),N[X]="");for(X in ye)ye.hasOwnProperty(X)&&le[X]!==ye[X]&&(N||(N={}),N[X]=ye[X])}else N||(P||(P=[]),P.push(_e,N)),N=ye;else _e==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,le=le?le.__html:void 0,ye!=null&&le!==ye&&(P=P||[]).push(_e,ye)):_e==="children"?typeof ye!="string"&&typeof ye!="number"||(P=P||[]).push(_e,""+ye):_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&(a.hasOwnProperty(_e)?(ye!=null&&_e==="onScroll"&&Vn("scroll",p),P||le===ye||(P=[])):(P=P||[]).push(_e,ye))}N&&(P=P||[]).push("style",N);var _e=P;(g.updateQueue=_e)&&(g.flags|=4)}},dI=function(p,g,N,D){N!==D&&(g.flags|=4)};function wp(p,g){if(!Hn)switch(p.tailMode){case"hidden":g=p.tail;for(var N=null;g!==null;)g.alternate!==null&&(N=g),g=g.sibling;N===null?p.tail=null:N.sibling=null;break;case"collapsed":N=p.tail;for(var D=null;N!==null;)N.alternate!==null&&(D=N),N=N.sibling;D===null?g||p.tail===null?p.tail=null:p.tail.sibling=null:D.sibling=null}}function ga(p){var g=p.alternate!==null&&p.alternate.child===p.child,N=0,D=0;if(g)for(var _=p.child;_!==null;)N|=_.lanes|_.childLanes,D|=_.subtreeFlags&14680064,D|=_.flags&14680064,_.return=p,_=_.sibling;else for(_=p.child;_!==null;)N|=_.lanes|_.childLanes,D|=_.subtreeFlags,D|=_.flags,_.return=p,_=_.sibling;return p.subtreeFlags|=D,p.childLanes=N,g}function E9(p,g,N){var D=g.pendingProps;switch(Hx(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ga(g),null;case 1:return ja(g.type)&&Wg(),ga(g),null;case 3:return D=g.stateNode,rf(),Wn(Ha),Wn(ha),iw(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(p===null||p.child===null)&&(Xg(g)?g.flags|=4:p===null||p.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,ds!==null&&(Rw(ds),ds=null))),Cw(p,g),ga(g),null;case 5:rw(g);var _=$l(gp.current);if(N=g.type,p!==null&&g.stateNode!=null)fI(p,g,N,D,_),p.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!D){if(g.stateNode===null)throw Error(n(166));return ga(g),null}if(p=$l(Ws.current),Xg(g)){D=g.stateNode,N=g.type;var P=g.memoizedProps;switch(D[Vs]=g,D[fp]=P,p=(g.mode&1)!==0,N){case"dialog":Vn("cancel",D),Vn("close",D);break;case"iframe":case"object":case"embed":Vn("load",D);break;case"video":case"audio":for(_=0;_<up.length;_++)Vn(up[_],D);break;case"source":Vn("error",D);break;case"img":case"image":case"link":Vn("error",D),Vn("load",D);break;case"details":Vn("toggle",D);break;case"input":Z(D,P),Vn("invalid",D);break;case"select":D._wrapperState={wasMultiple:!!P.multiple},Vn("invalid",D);break;case"textarea":re(D,P),Vn("invalid",D)}V(N,P),_=null;for(var X in P)if(P.hasOwnProperty(X)){var le=P[X];X==="children"?typeof le=="string"?D.textContent!==le&&(P.suppressHydrationWarning!==!0&&zg(D.textContent,le,p),_=["children",le]):typeof le=="number"&&D.textContent!==""+le&&(P.suppressHydrationWarning!==!0&&zg(D.textContent,le,p),_=["children",""+le]):a.hasOwnProperty(X)&&le!=null&&X==="onScroll"&&Vn("scroll",D)}switch(N){case"input":pe(D),we(D,P,!0);break;case"textarea":pe(D),Ce(D);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(D.onclick=Ug)}D=_,g.updateQueue=D,D!==null&&(g.flags|=4)}else{X=_.nodeType===9?_:_.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=$e(N)),p==="http://www.w3.org/1999/xhtml"?N==="script"?(p=X.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof D.is=="string"?p=X.createElement(N,{is:D.is}):(p=X.createElement(N),N==="select"&&(X=p,D.multiple?X.multiple=!0:D.size&&(X.size=D.size))):p=X.createElementNS(p,N),p[Vs]=g,p[fp]=D,cI(p,g,!1,!1),g.stateNode=p;e:{switch(X=fe(N,D),N){case"dialog":Vn("cancel",p),Vn("close",p),_=D;break;case"iframe":case"object":case"embed":Vn("load",p),_=D;break;case"video":case"audio":for(_=0;_<up.length;_++)Vn(up[_],p);_=D;break;case"source":Vn("error",p),_=D;break;case"img":case"image":case"link":Vn("error",p),Vn("load",p),_=D;break;case"details":Vn("toggle",p),_=D;break;case"input":Z(p,D),_=Ee(p,D),Vn("invalid",p);break;case"option":_=D;break;case"select":p._wrapperState={wasMultiple:!!D.multiple},_=j({},D,{value:void 0}),Vn("invalid",p);break;case"textarea":re(p,D),_=Ze(p,D),Vn("invalid",p);break;default:_=D}V(N,_),le=_;for(P in le)if(le.hasOwnProperty(P)){var ye=le[P];P==="style"?Nt(p,ye):P==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,ye!=null&&Qe(p,ye)):P==="children"?typeof ye=="string"?(N!=="textarea"||ye!=="")&&qe(p,ye):typeof ye=="number"&&qe(p,""+ye):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(a.hasOwnProperty(P)?ye!=null&&P==="onScroll"&&Vn("scroll",p):ye!=null&&x(p,P,ye,X))}switch(N){case"input":pe(p),we(p,D,!1);break;case"textarea":pe(p),Ce(p);break;case"option":D.value!=null&&p.setAttribute("value",""+J(D.value));break;case"select":p.multiple=!!D.multiple,P=D.value,P!=null?Ge(p,!!D.multiple,P,!1):D.defaultValue!=null&&Ge(p,!!D.multiple,D.defaultValue,!0);break;default:typeof _.onClick=="function"&&(p.onclick=Ug)}switch(N){case"button":case"input":case"select":case"textarea":D=!!D.autoFocus;break e;case"img":D=!0;break e;default:D=!1}}D&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return ga(g),null;case 6:if(p&&g.stateNode!=null)dI(p,g,p.memoizedProps,D);else{if(typeof D!="string"&&g.stateNode===null)throw Error(n(166));if(N=$l(gp.current),$l(Ws.current),Xg(g)){if(D=g.stateNode,N=g.memoizedProps,D[Vs]=g,(P=D.nodeValue!==N)&&(p=yi,p!==null))switch(p.tag){case 3:zg(D.nodeValue,N,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&zg(D.nodeValue,N,(p.mode&1)!==0)}P&&(g.flags|=4)}else D=(N.nodeType===9?N:N.ownerDocument).createTextNode(D),D[Vs]=g,g.stateNode=D}return ga(g),null;case 13:if(Wn(Jn),D=g.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Hn&&bi!==null&&g.mode&1&&!(g.flags&128))mA(),Jc(),g.flags|=98560,P=!1;else if(P=Xg(g),D!==null&&D.dehydrated!==null){if(p===null){if(!P)throw Error(n(318));if(P=g.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(n(317));P[Vs]=g}else Jc(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;ga(g),P=!1}else ds!==null&&(Rw(ds),ds=null),P=!0;if(!P)return g.flags&65536?g:null}return g.flags&128?(g.lanes=N,g):(D=D!==null,D!==(p!==null&&p.memoizedState!==null)&&D&&(g.child.flags|=8192,g.mode&1&&(p===null||Jn.current&1?$r===0&&($r=3):Bw())),g.updateQueue!==null&&(g.flags|=4),ga(g),null);case 4:return rf(),Cw(p,g),p===null&&lp(g.stateNode.containerInfo),ga(g),null;case 10:return Qx(g.type._context),ga(g),null;case 17:return ja(g.type)&&Wg(),ga(g),null;case 19:if(Wn(Jn),P=g.memoizedState,P===null)return ga(g),null;if(D=(g.flags&128)!==0,X=P.rendering,X===null)if(D)wp(P,!1);else{if($r!==0||p!==null&&p.flags&128)for(p=g.child;p!==null;){if(X=ev(p),X!==null){for(g.flags|=128,wp(P,!1),D=X.updateQueue,D!==null&&(g.updateQueue=D,g.flags|=4),g.subtreeFlags=0,D=N,N=g.child;N!==null;)P=N,p=D,P.flags&=14680066,X=P.alternate,X===null?(P.childLanes=0,P.lanes=p,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=X.childLanes,P.lanes=X.lanes,P.child=X.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=X.memoizedProps,P.memoizedState=X.memoizedState,P.updateQueue=X.updateQueue,P.type=X.type,p=X.dependencies,P.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),N=N.sibling;return zn(Jn,Jn.current&1|2),g.child}p=p.sibling}P.tail!==null&&kt()>uf&&(g.flags|=128,D=!0,wp(P,!1),g.lanes=4194304)}else{if(!D)if(p=ev(X),p!==null){if(g.flags|=128,D=!0,N=p.updateQueue,N!==null&&(g.updateQueue=N,g.flags|=4),wp(P,!0),P.tail===null&&P.tailMode==="hidden"&&!X.alternate&&!Hn)return ga(g),null}else 2*kt()-P.renderingStartTime>uf&&N!==1073741824&&(g.flags|=128,D=!0,wp(P,!1),g.lanes=4194304);P.isBackwards?(X.sibling=g.child,g.child=X):(N=P.last,N!==null?N.sibling=X:g.child=X,P.last=X)}return P.tail!==null?(g=P.tail,P.rendering=g,P.tail=g.sibling,P.renderingStartTime=kt(),g.sibling=null,N=Jn.current,zn(Jn,D?N&1|2:N&1),g):(ga(g),null);case 22:case 23:return Pw(),D=g.memoizedState!==null,p!==null&&p.memoizedState!==null!==D&&(g.flags|=8192),D&&g.mode&1?xi&1073741824&&(ga(g),g.subtreeFlags&6&&(g.flags|=8192)):ga(g),null;case 24:return null;case 25:return null}throw Error(n(156,g.tag))}function D9(p,g){switch(Hx(g),g.tag){case 1:return ja(g.type)&&Wg(),p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 3:return rf(),Wn(Ha),Wn(ha),iw(),p=g.flags,p&65536&&!(p&128)?(g.flags=p&-65537|128,g):null;case 5:return rw(g),null;case 13:if(Wn(Jn),p=g.memoizedState,p!==null&&p.dehydrated!==null){if(g.alternate===null)throw Error(n(340));Jc()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 19:return Wn(Jn),null;case 4:return rf(),null;case 10:return Qx(g.type._context),null;case 22:case 23:return Pw(),null;case 24:return null;default:return null}}var lv=!1,va=!1,T9=typeof WeakSet=="function"?WeakSet:Set,ft=null;function sf(p,g){var N=p.ref;if(N!==null)if(typeof N=="function")try{N(null)}catch(D){ir(p,g,D)}else N.current=null}function Ew(p,g,N){try{N()}catch(D){ir(p,g,D)}}var pI=!1;function $9(p,g){if(Px=Ag,p=G$(),Ax(p)){if("selectionStart"in p)var N={start:p.selectionStart,end:p.selectionEnd};else e:{N=(N=p.ownerDocument)&&N.defaultView||window;var D=N.getSelection&&N.getSelection();if(D&&D.rangeCount!==0){N=D.anchorNode;var _=D.anchorOffset,P=D.focusNode;D=D.focusOffset;try{N.nodeType,P.nodeType}catch{N=null;break e}var X=0,le=-1,ye=-1,_e=0,Ke=0,Je=p,Xe=null;t:for(;;){for(var lt;Je!==N||_!==0&&Je.nodeType!==3||(le=X+_),Je!==P||D!==0&&Je.nodeType!==3||(ye=X+D),Je.nodeType===3&&(X+=Je.nodeValue.length),(lt=Je.firstChild)!==null;)Xe=Je,Je=lt;for(;;){if(Je===p)break t;if(Xe===N&&++_e===_&&(le=X),Xe===P&&++Ke===D&&(ye=X),(lt=Je.nextSibling)!==null)break;Je=Xe,Xe=Je.parentNode}Je=lt}N=le===-1||ye===-1?null:{start:le,end:ye}}else N=null}N=N||{start:0,end:0}}else N=null;for(Bx={focusedElem:p,selectionRange:N},Ag=!1,ft=g;ft!==null;)if(g=ft,p=g.child,(g.subtreeFlags&1028)!==0&&p!==null)p.return=g,ft=p;else for(;ft!==null;){g=ft;try{var mt=g.alternate;if(g.flags&1024)switch(g.tag){case 0:case 11:case 15:break;case 1:if(mt!==null){var vt=mt.memoizedProps,dr=mt.memoizedState,Te=g.stateNode,Ne=Te.getSnapshotBeforeUpdate(g.elementType===g.type?vt:ps(g.type,vt),dr);Te.__reactInternalSnapshotBeforeUpdate=Ne}break;case 3:var Ie=g.stateNode.containerInfo;Ie.nodeType===1?Ie.textContent="":Ie.nodeType===9&&Ie.documentElement&&Ie.removeChild(Ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(rt){ir(g,g.return,rt)}if(p=g.sibling,p!==null){p.return=g.return,ft=p;break}ft=g.return}return mt=pI,pI=!1,mt}function Np(p,g,N){var D=g.updateQueue;if(D=D!==null?D.lastEffect:null,D!==null){var _=D=D.next;do{if((_.tag&p)===p){var P=_.destroy;_.destroy=void 0,P!==void 0&&Ew(g,N,P)}_=_.next}while(_!==D)}}function cv(p,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var N=g=g.next;do{if((N.tag&p)===p){var D=N.create;N.destroy=D()}N=N.next}while(N!==g)}}function Dw(p){var g=p.ref;if(g!==null){var N=p.stateNode;switch(p.tag){case 5:p=N;break;default:p=N}typeof g=="function"?g(p):g.current=p}}function hI(p){var g=p.alternate;g!==null&&(p.alternate=null,hI(g)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(g=p.stateNode,g!==null&&(delete g[Vs],delete g[fp],delete g[Vx],delete g[c9],delete g[f9])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function mI(p){return p.tag===5||p.tag===3||p.tag===4}function gI(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||mI(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function Tw(p,g,N){var D=p.tag;if(D===5||D===6)p=p.stateNode,g?N.nodeType===8?N.parentNode.insertBefore(p,g):N.insertBefore(p,g):(N.nodeType===8?(g=N.parentNode,g.insertBefore(p,N)):(g=N,g.appendChild(p)),N=N._reactRootContainer,N!=null||g.onclick!==null||(g.onclick=Ug));else if(D!==4&&(p=p.child,p!==null))for(Tw(p,g,N),p=p.sibling;p!==null;)Tw(p,g,N),p=p.sibling}function $w(p,g,N){var D=p.tag;if(D===5||D===6)p=p.stateNode,g?N.insertBefore(p,g):N.appendChild(p);else if(D!==4&&(p=p.child,p!==null))for($w(p,g,N),p=p.sibling;p!==null;)$w(p,g,N),p=p.sibling}var ea=null,hs=!1;function du(p,g,N){for(N=N.child;N!==null;)vI(p,g,N),N=N.sibling}function vI(p,g,N){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(Sg,N)}catch{}switch(N.tag){case 5:va||sf(N,g);case 6:var D=ea,_=hs;ea=null,du(p,g,N),ea=D,hs=_,ea!==null&&(hs?(p=ea,N=N.stateNode,p.nodeType===8?p.parentNode.removeChild(N):p.removeChild(N)):ea.removeChild(N.stateNode));break;case 18:ea!==null&&(hs?(p=ea,N=N.stateNode,p.nodeType===8?Ux(p.parentNode,N):p.nodeType===1&&Ux(p,N),ep(p)):Ux(ea,N.stateNode));break;case 4:D=ea,_=hs,ea=N.stateNode.containerInfo,hs=!0,du(p,g,N),ea=D,hs=_;break;case 0:case 11:case 14:case 15:if(!va&&(D=N.updateQueue,D!==null&&(D=D.lastEffect,D!==null))){_=D=D.next;do{var P=_,X=P.destroy;P=P.tag,X!==void 0&&(P&2||P&4)&&Ew(N,g,X),_=_.next}while(_!==D)}du(p,g,N);break;case 1:if(!va&&(sf(N,g),D=N.stateNode,typeof D.componentWillUnmount=="function"))try{D.props=N.memoizedProps,D.state=N.memoizedState,D.componentWillUnmount()}catch(le){ir(N,g,le)}du(p,g,N);break;case 21:du(p,g,N);break;case 22:N.mode&1?(va=(D=va)||N.memoizedState!==null,du(p,g,N),va=D):du(p,g,N);break;default:du(p,g,N)}}function yI(p){var g=p.updateQueue;if(g!==null){p.updateQueue=null;var N=p.stateNode;N===null&&(N=p.stateNode=new T9),g.forEach(function(D){var _=P9.bind(null,p,D);N.has(D)||(N.add(D),D.then(_,_))})}}function ms(p,g){var N=g.deletions;if(N!==null)for(var D=0;D<N.length;D++){var _=N[D];try{var P=p,X=g,le=X;e:for(;le!==null;){switch(le.tag){case 5:ea=le.stateNode,hs=!1;break e;case 3:ea=le.stateNode.containerInfo,hs=!0;break e;case 4:ea=le.stateNode.containerInfo,hs=!0;break e}le=le.return}if(ea===null)throw Error(n(160));vI(P,X,_),ea=null,hs=!1;var ye=_.alternate;ye!==null&&(ye.return=null),_.return=null}catch(_e){ir(_,g,_e)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)bI(g,p),g=g.sibling}function bI(p,g){var N=p.alternate,D=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(ms(g,p),Gs(p),D&4){try{Np(3,p,p.return),cv(3,p)}catch(vt){ir(p,p.return,vt)}try{Np(5,p,p.return)}catch(vt){ir(p,p.return,vt)}}break;case 1:ms(g,p),Gs(p),D&512&&N!==null&&sf(N,N.return);break;case 5:if(ms(g,p),Gs(p),D&512&&N!==null&&sf(N,N.return),p.flags&32){var _=p.stateNode;try{qe(_,"")}catch(vt){ir(p,p.return,vt)}}if(D&4&&(_=p.stateNode,_!=null)){var P=p.memoizedProps,X=N!==null?N.memoizedProps:P,le=p.type,ye=p.updateQueue;if(p.updateQueue=null,ye!==null)try{le==="input"&&P.type==="radio"&&P.name!=null&&ie(_,P),fe(le,X);var _e=fe(le,P);for(X=0;X<ye.length;X+=2){var Ke=ye[X],Je=ye[X+1];Ke==="style"?Nt(_,Je):Ke==="dangerouslySetInnerHTML"?Qe(_,Je):Ke==="children"?qe(_,Je):x(_,Ke,Je,_e)}switch(le){case"input":ve(_,P);break;case"textarea":ce(_,P);break;case"select":var Xe=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!P.multiple;var lt=P.value;lt!=null?Ge(_,!!P.multiple,lt,!1):Xe!==!!P.multiple&&(P.defaultValue!=null?Ge(_,!!P.multiple,P.defaultValue,!0):Ge(_,!!P.multiple,P.multiple?[]:"",!1))}_[fp]=P}catch(vt){ir(p,p.return,vt)}}break;case 6:if(ms(g,p),Gs(p),D&4){if(p.stateNode===null)throw Error(n(162));_=p.stateNode,P=p.memoizedProps;try{_.nodeValue=P}catch(vt){ir(p,p.return,vt)}}break;case 3:if(ms(g,p),Gs(p),D&4&&N!==null&&N.memoizedState.isDehydrated)try{ep(g.containerInfo)}catch(vt){ir(p,p.return,vt)}break;case 4:ms(g,p),Gs(p);break;case 13:ms(g,p),Gs(p),_=p.child,_.flags&8192&&(P=_.memoizedState!==null,_.stateNode.isHidden=P,!P||_.alternate!==null&&_.alternate.memoizedState!==null||(kw=kt())),D&4&&yI(p);break;case 22:if(Ke=N!==null&&N.memoizedState!==null,p.mode&1?(va=(_e=va)||Ke,ms(g,p),va=_e):ms(g,p),Gs(p),D&8192){if(_e=p.memoizedState!==null,(p.stateNode.isHidden=_e)&&!Ke&&p.mode&1)for(ft=p,Ke=p.child;Ke!==null;){for(Je=ft=Ke;ft!==null;){switch(Xe=ft,lt=Xe.child,Xe.tag){case 0:case 11:case 14:case 15:Np(4,Xe,Xe.return);break;case 1:sf(Xe,Xe.return);var mt=Xe.stateNode;if(typeof mt.componentWillUnmount=="function"){D=Xe,N=Xe.return;try{g=D,mt.props=g.memoizedProps,mt.state=g.memoizedState,mt.componentWillUnmount()}catch(vt){ir(D,N,vt)}}break;case 5:sf(Xe,Xe.return);break;case 22:if(Xe.memoizedState!==null){NI(Je);continue}}lt!==null?(lt.return=Xe,ft=lt):NI(Je)}Ke=Ke.sibling}e:for(Ke=null,Je=p;;){if(Je.tag===5){if(Ke===null){Ke=Je;try{_=Je.stateNode,_e?(P=_.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(le=Je.stateNode,ye=Je.memoizedProps.style,X=ye!=null&&ye.hasOwnProperty("display")?ye.display:null,le.style.display=Ht("display",X))}catch(vt){ir(p,p.return,vt)}}}else if(Je.tag===6){if(Ke===null)try{Je.stateNode.nodeValue=_e?"":Je.memoizedProps}catch(vt){ir(p,p.return,vt)}}else if((Je.tag!==22&&Je.tag!==23||Je.memoizedState===null||Je===p)&&Je.child!==null){Je.child.return=Je,Je=Je.child;continue}if(Je===p)break e;for(;Je.sibling===null;){if(Je.return===null||Je.return===p)break e;Ke===Je&&(Ke=null),Je=Je.return}Ke===Je&&(Ke=null),Je.sibling.return=Je.return,Je=Je.sibling}}break;case 19:ms(g,p),Gs(p),D&4&&yI(p);break;case 21:break;default:ms(g,p),Gs(p)}}function Gs(p){var g=p.flags;if(g&2){try{e:{for(var N=p.return;N!==null;){if(mI(N)){var D=N;break e}N=N.return}throw Error(n(160))}switch(D.tag){case 5:var _=D.stateNode;D.flags&32&&(qe(_,""),D.flags&=-33);var P=gI(p);$w(p,P,_);break;case 3:case 4:var X=D.stateNode.containerInfo,le=gI(p);Tw(p,le,X);break;default:throw Error(n(161))}}catch(ye){ir(p,p.return,ye)}p.flags&=-3}g&4096&&(p.flags&=-4097)}function A9(p,g,N){ft=p,xI(p)}function xI(p,g,N){for(var D=(p.mode&1)!==0;ft!==null;){var _=ft,P=_.child;if(_.tag===22&&D){var X=_.memoizedState!==null||lv;if(!X){var le=_.alternate,ye=le!==null&&le.memoizedState!==null||va;le=lv;var _e=va;if(lv=X,(va=ye)&&!_e)for(ft=_;ft!==null;)X=ft,ye=X.child,X.tag===22&&X.memoizedState!==null?SI(_):ye!==null?(ye.return=X,ft=ye):SI(_);for(;P!==null;)ft=P,xI(P),P=P.sibling;ft=_,lv=le,va=_e}wI(p)}else _.subtreeFlags&8772&&P!==null?(P.return=_,ft=P):wI(p)}}function wI(p){for(;ft!==null;){var g=ft;if(g.flags&8772){var N=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:va||cv(5,g);break;case 1:var D=g.stateNode;if(g.flags&4&&!va)if(N===null)D.componentDidMount();else{var _=g.elementType===g.type?N.memoizedProps:ps(g.type,N.memoizedProps);D.componentDidUpdate(_,N.memoizedState,D.__reactInternalSnapshotBeforeUpdate)}var P=g.updateQueue;P!==null&&NA(g,P,D);break;case 3:var X=g.updateQueue;if(X!==null){if(N=null,g.child!==null)switch(g.child.tag){case 5:N=g.child.stateNode;break;case 1:N=g.child.stateNode}NA(g,X,N)}break;case 5:var le=g.stateNode;if(N===null&&g.flags&4){N=le;var ye=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":ye.autoFocus&&N.focus();break;case"img":ye.src&&(N.src=ye.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var _e=g.alternate;if(_e!==null){var Ke=_e.memoizedState;if(Ke!==null){var Je=Ke.dehydrated;Je!==null&&ep(Je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}va||g.flags&512&&Dw(g)}catch(Xe){ir(g,g.return,Xe)}}if(g===p){ft=null;break}if(N=g.sibling,N!==null){N.return=g.return,ft=N;break}ft=g.return}}function NI(p){for(;ft!==null;){var g=ft;if(g===p){ft=null;break}var N=g.sibling;if(N!==null){N.return=g.return,ft=N;break}ft=g.return}}function SI(p){for(;ft!==null;){var g=ft;try{switch(g.tag){case 0:case 11:case 15:var N=g.return;try{cv(4,g)}catch(ye){ir(g,N,ye)}break;case 1:var D=g.stateNode;if(typeof D.componentDidMount=="function"){var _=g.return;try{D.componentDidMount()}catch(ye){ir(g,_,ye)}}var P=g.return;try{Dw(g)}catch(ye){ir(g,P,ye)}break;case 5:var X=g.return;try{Dw(g)}catch(ye){ir(g,X,ye)}}}catch(ye){ir(g,g.return,ye)}if(g===p){ft=null;break}var le=g.sibling;if(le!==null){le.return=g.return,ft=le;break}ft=g.return}}var I9=Math.ceil,fv=S.ReactCurrentDispatcher,Aw=S.ReactCurrentOwner,Fi=S.ReactCurrentBatchConfig,vn=0,Ur=null,gr=null,ta=0,xi=0,of=ou(0),$r=0,Sp=null,Il=0,dv=0,Iw=0,Cp=null,Ka=null,kw=0,uf=1/0,Eo=null,pv=!1,_w=null,pu=null,hv=!1,hu=null,mv=0,Ep=0,Ow=null,gv=-1,vv=0;function _a(){return vn&6?kt():gv!==-1?gv:gv=kt()}function mu(p){return p.mode&1?vn&2&&ta!==0?ta&-ta:p9.transition!==null?(vv===0&&(vv=g$()),vv):(p=$n,p!==0||(p=window.event,p=p===void 0?16:E$(p.type)),p):1}function gs(p,g,N,D){if(50<Ep)throw Ep=0,Ow=null,Error(n(185));Kd(p,N,D),(!(vn&2)||p!==Ur)&&(p===Ur&&(!(vn&2)&&(dv|=N),$r===4&&gu(p,ta)),Ya(p,D),N===1&&vn===0&&!(g.mode&1)&&(uf=kt()+500,Gg&&lu()))}function Ya(p,g){var N=p.callbackNode;p7(p,g);var D=Dg(p,p===Ur?ta:0);if(D===0)N!==null&&Ng(N),p.callbackNode=null,p.callbackPriority=0;else if(g=D&-D,p.callbackPriority!==g){if(N!=null&&Ng(N),g===1)p.tag===0?d9(EI.bind(null,p)):cA(EI.bind(null,p)),u9(function(){!(vn&6)&&lu()}),N=null;else{switch(v$(D)){case 1:N=jd;break;case 4:N=Nl;break;case 16:N=zs;break;case 536870912:N=m$;break;default:N=zs}N=OI(N,CI.bind(null,p))}p.callbackPriority=g,p.callbackNode=N}}function CI(p,g){if(gv=-1,vv=0,vn&6)throw Error(n(327));var N=p.callbackNode;if(lf()&&p.callbackNode!==N)return null;var D=Dg(p,p===Ur?ta:0);if(D===0)return null;if(D&30||D&p.expiredLanes||g)g=yv(p,D);else{g=D;var _=vn;vn|=2;var P=TI();(Ur!==p||ta!==g)&&(Eo=null,uf=kt()+500,_l(p,g));do try{O9();break}catch(le){DI(p,le)}while(!0);Zx(),fv.current=P,vn=_,gr!==null?g=0:(Ur=null,ta=0,g=$r)}if(g!==0){if(g===2&&(_=px(p),_!==0&&(D=_,g=Fw(p,_))),g===1)throw N=Sp,_l(p,0),gu(p,D),Ya(p,kt()),N;if(g===6)gu(p,D);else{if(_=p.current.alternate,!(D&30)&&!k9(_)&&(g=yv(p,D),g===2&&(P=px(p),P!==0&&(D=P,g=Fw(p,P))),g===1))throw N=Sp,_l(p,0),gu(p,D),Ya(p,kt()),N;switch(p.finishedWork=_,p.finishedLanes=D,g){case 0:case 1:throw Error(n(345));case 2:Ol(p,Ka,Eo);break;case 3:if(gu(p,D),(D&130023424)===D&&(g=kw+500-kt(),10<g)){if(Dg(p,0)!==0)break;if(_=p.suspendedLanes,(_&D)!==D){_a(),p.pingedLanes|=p.suspendedLanes&_;break}p.timeoutHandle=zx(Ol.bind(null,p,Ka,Eo),g);break}Ol(p,Ka,Eo);break;case 4:if(gu(p,D),(D&4194240)===D)break;for(g=p.eventTimes,_=-1;0<D;){var X=31-cs(D);P=1<<X,X=g[X],X>_&&(_=X),D&=~P}if(D=_,D=kt()-D,D=(120>D?120:480>D?480:1080>D?1080:1920>D?1920:3e3>D?3e3:4320>D?4320:1960*I9(D/1960))-D,10<D){p.timeoutHandle=zx(Ol.bind(null,p,Ka,Eo),D);break}Ol(p,Ka,Eo);break;case 5:Ol(p,Ka,Eo);break;default:throw Error(n(329))}}}return Ya(p,kt()),p.callbackNode===N?CI.bind(null,p):null}function Fw(p,g){var N=Cp;return p.current.memoizedState.isDehydrated&&(_l(p,g).flags|=256),p=yv(p,g),p!==2&&(g=Ka,Ka=N,g!==null&&Rw(g)),p}function Rw(p){Ka===null?Ka=p:Ka.push.apply(Ka,p)}function k9(p){for(var g=p;;){if(g.flags&16384){var N=g.updateQueue;if(N!==null&&(N=N.stores,N!==null))for(var D=0;D<N.length;D++){var _=N[D],P=_.getSnapshot;_=_.value;try{if(!fs(P(),_))return!1}catch{return!1}}}if(N=g.child,g.subtreeFlags&16384&&N!==null)N.return=g,g=N;else{if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function gu(p,g){for(g&=~Iw,g&=~dv,p.suspendedLanes|=g,p.pingedLanes&=~g,p=p.expirationTimes;0<g;){var N=31-cs(g),D=1<<N;p[N]=-1,g&=~D}}function EI(p){if(vn&6)throw Error(n(327));lf();var g=Dg(p,0);if(!(g&1))return Ya(p,kt()),null;var N=yv(p,g);if(p.tag!==0&&N===2){var D=px(p);D!==0&&(g=D,N=Fw(p,D))}if(N===1)throw N=Sp,_l(p,0),gu(p,g),Ya(p,kt()),N;if(N===6)throw Error(n(345));return p.finishedWork=p.current.alternate,p.finishedLanes=g,Ol(p,Ka,Eo),Ya(p,kt()),null}function Mw(p,g){var N=vn;vn|=1;try{return p(g)}finally{vn=N,vn===0&&(uf=kt()+500,Gg&&lu())}}function kl(p){hu!==null&&hu.tag===0&&!(vn&6)&&lf();var g=vn;vn|=1;var N=Fi.transition,D=$n;try{if(Fi.transition=null,$n=1,p)return p()}finally{$n=D,Fi.transition=N,vn=g,!(vn&6)&&lu()}}function Pw(){xi=of.current,Wn(of)}function _l(p,g){p.finishedWork=null,p.finishedLanes=0;var N=p.timeoutHandle;if(N!==-1&&(p.timeoutHandle=-1,o9(N)),gr!==null)for(N=gr.return;N!==null;){var D=N;switch(Hx(D),D.tag){case 1:D=D.type.childContextTypes,D!=null&&Wg();break;case 3:rf(),Wn(Ha),Wn(ha),iw();break;case 5:rw(D);break;case 4:rf();break;case 13:Wn(Jn);break;case 19:Wn(Jn);break;case 10:Qx(D.type._context);break;case 22:case 23:Pw()}N=N.return}if(Ur=p,gr=p=vu(p.current,null),ta=xi=g,$r=0,Sp=null,Iw=dv=Il=0,Ka=Cp=null,Tl!==null){for(g=0;g<Tl.length;g++)if(N=Tl[g],D=N.interleaved,D!==null){N.interleaved=null;var _=D.next,P=N.pending;if(P!==null){var X=P.next;P.next=_,D.next=X}N.pending=D}Tl=null}return p}function DI(p,g){do{var N=gr;try{if(Zx(),tv.current=iv,nv){for(var D=er.memoizedState;D!==null;){var _=D.queue;_!==null&&(_.pending=null),D=D.next}nv=!1}if(Al=0,zr=Tr=er=null,vp=!1,yp=0,Aw.current=null,N===null||N.return===null){$r=1,Sp=g,gr=null;break}e:{var P=p,X=N.return,le=N,ye=g;if(g=ta,le.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var _e=ye,Ke=le,Je=Ke.tag;if(!(Ke.mode&1)&&(Je===0||Je===11||Je===15)){var Xe=Ke.alternate;Xe?(Ke.updateQueue=Xe.updateQueue,Ke.memoizedState=Xe.memoizedState,Ke.lanes=Xe.lanes):(Ke.updateQueue=null,Ke.memoizedState=null)}var lt=ZA(X);if(lt!==null){lt.flags&=-257,QA(lt,X,le,P,g),lt.mode&1&&YA(P,_e,g),g=lt,ye=_e;var mt=g.updateQueue;if(mt===null){var vt=new Set;vt.add(ye),g.updateQueue=vt}else mt.add(ye);break e}else{if(!(g&1)){YA(P,_e,g),Bw();break e}ye=Error(n(426))}}else if(Hn&&le.mode&1){var dr=ZA(X);if(dr!==null){!(dr.flags&65536)&&(dr.flags|=256),QA(dr,X,le,P,g),Kx(af(ye,le));break e}}P=ye=af(ye,le),$r!==4&&($r=2),Cp===null?Cp=[P]:Cp.push(P),P=X;do{switch(P.tag){case 3:P.flags|=65536,g&=-g,P.lanes|=g;var Te=XA(P,ye,g);wA(P,Te);break e;case 1:le=ye;var Ne=P.type,Ie=P.stateNode;if(!(P.flags&128)&&(typeof Ne.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(pu===null||!pu.has(Ie)))){P.flags|=65536,g&=-g,P.lanes|=g;var rt=KA(P,le,g);wA(P,rt);break e}}P=P.return}while(P!==null)}AI(N)}catch(xt){g=xt,gr===N&&N!==null&&(gr=N=N.return);continue}break}while(!0)}function TI(){var p=fv.current;return fv.current=iv,p===null?iv:p}function Bw(){($r===0||$r===3||$r===2)&&($r=4),Ur===null||!(Il&268435455)&&!(dv&268435455)||gu(Ur,ta)}function yv(p,g){var N=vn;vn|=2;var D=TI();(Ur!==p||ta!==g)&&(Eo=null,_l(p,g));do try{_9();break}catch(_){DI(p,_)}while(!0);if(Zx(),vn=N,fv.current=D,gr!==null)throw Error(n(261));return Ur=null,ta=0,$r}function _9(){for(;gr!==null;)$I(gr)}function O9(){for(;gr!==null&&!fx();)$I(gr)}function $I(p){var g=_I(p.alternate,p,xi);p.memoizedProps=p.pendingProps,g===null?AI(p):gr=g,Aw.current=null}function AI(p){var g=p;do{var N=g.alternate;if(p=g.return,g.flags&32768){if(N=D9(N,g),N!==null){N.flags&=32767,gr=N;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{$r=6,gr=null;return}}else if(N=E9(N,g,xi),N!==null){gr=N;return}if(g=g.sibling,g!==null){gr=g;return}gr=g=p}while(g!==null);$r===0&&($r=5)}function Ol(p,g,N){var D=$n,_=Fi.transition;try{Fi.transition=null,$n=1,F9(p,g,N,D)}finally{Fi.transition=_,$n=D}return null}function F9(p,g,N,D){do lf();while(hu!==null);if(vn&6)throw Error(n(327));N=p.finishedWork;var _=p.finishedLanes;if(N===null)return null;if(p.finishedWork=null,p.finishedLanes=0,N===p.current)throw Error(n(177));p.callbackNode=null,p.callbackPriority=0;var P=N.lanes|N.childLanes;if(h7(p,P),p===Ur&&(gr=Ur=null,ta=0),!(N.subtreeFlags&2064)&&!(N.flags&2064)||hv||(hv=!0,OI(zs,function(){return lf(),null})),P=(N.flags&15990)!==0,N.subtreeFlags&15990||P){P=Fi.transition,Fi.transition=null;var X=$n;$n=1;var le=vn;vn|=4,Aw.current=null,$9(p,N),bI(N,p),e9(Bx),Ag=!!Px,Bx=Px=null,p.current=N,A9(N),wl(),vn=le,$n=X,Fi.transition=P}else p.current=N;if(hv&&(hv=!1,hu=p,mv=_),P=p.pendingLanes,P===0&&(pu=null),u7(N.stateNode),Ya(p,kt()),g!==null)for(D=p.onRecoverableError,N=0;N<g.length;N++)_=g[N],D(_.value,{componentStack:_.stack,digest:_.digest});if(pv)throw pv=!1,p=_w,_w=null,p;return mv&1&&p.tag!==0&&lf(),P=p.pendingLanes,P&1?p===Ow?Ep++:(Ep=0,Ow=p):Ep=0,lu(),null}function lf(){if(hu!==null){var p=v$(mv),g=Fi.transition,N=$n;try{if(Fi.transition=null,$n=16>p?16:p,hu===null)var D=!1;else{if(p=hu,hu=null,mv=0,vn&6)throw Error(n(331));var _=vn;for(vn|=4,ft=p.current;ft!==null;){var P=ft,X=P.child;if(ft.flags&16){var le=P.deletions;if(le!==null){for(var ye=0;ye<le.length;ye++){var _e=le[ye];for(ft=_e;ft!==null;){var Ke=ft;switch(Ke.tag){case 0:case 11:case 15:Np(8,Ke,P)}var Je=Ke.child;if(Je!==null)Je.return=Ke,ft=Je;else for(;ft!==null;){Ke=ft;var Xe=Ke.sibling,lt=Ke.return;if(hI(Ke),Ke===_e){ft=null;break}if(Xe!==null){Xe.return=lt,ft=Xe;break}ft=lt}}}var mt=P.alternate;if(mt!==null){var vt=mt.child;if(vt!==null){mt.child=null;do{var dr=vt.sibling;vt.sibling=null,vt=dr}while(vt!==null)}}ft=P}}if(P.subtreeFlags&2064&&X!==null)X.return=P,ft=X;else e:for(;ft!==null;){if(P=ft,P.flags&2048)switch(P.tag){case 0:case 11:case 15:Np(9,P,P.return)}var Te=P.sibling;if(Te!==null){Te.return=P.return,ft=Te;break e}ft=P.return}}var Ne=p.current;for(ft=Ne;ft!==null;){X=ft;var Ie=X.child;if(X.subtreeFlags&2064&&Ie!==null)Ie.return=X,ft=Ie;else e:for(X=Ne;ft!==null;){if(le=ft,le.flags&2048)try{switch(le.tag){case 0:case 11:case 15:cv(9,le)}}catch(xt){ir(le,le.return,xt)}if(le===X){ft=null;break e}var rt=le.sibling;if(rt!==null){rt.return=le.return,ft=rt;break e}ft=le.return}}if(vn=_,lu(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(Sg,p)}catch{}D=!0}return D}finally{$n=N,Fi.transition=g}}return!1}function II(p,g,N){g=af(N,g),g=XA(p,g,1),p=fu(p,g,1),g=_a(),p!==null&&(Kd(p,1,g),Ya(p,g))}function ir(p,g,N){if(p.tag===3)II(p,p,N);else for(;g!==null;){if(g.tag===3){II(g,p,N);break}else if(g.tag===1){var D=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(pu===null||!pu.has(D))){p=af(N,p),p=KA(g,p,1),g=fu(g,p,1),p=_a(),g!==null&&(Kd(g,1,p),Ya(g,p));break}}g=g.return}}function R9(p,g,N){var D=p.pingCache;D!==null&&D.delete(g),g=_a(),p.pingedLanes|=p.suspendedLanes&N,Ur===p&&(ta&N)===N&&($r===4||$r===3&&(ta&130023424)===ta&&500>kt()-kw?_l(p,0):Iw|=N),Ya(p,g)}function kI(p,g){g===0&&(p.mode&1?(g=Eg,Eg<<=1,!(Eg&130023424)&&(Eg=4194304)):g=1);var N=_a();p=No(p,g),p!==null&&(Kd(p,g,N),Ya(p,N))}function M9(p){var g=p.memoizedState,N=0;g!==null&&(N=g.retryLane),kI(p,N)}function P9(p,g){var N=0;switch(p.tag){case 13:var D=p.stateNode,_=p.memoizedState;_!==null&&(N=_.retryLane);break;case 19:D=p.stateNode;break;default:throw Error(n(314))}D!==null&&D.delete(g),kI(p,N)}var _I;_I=function(p,g,N){if(p!==null)if(p.memoizedProps!==g.pendingProps||Ha.current)Xa=!0;else{if(!(p.lanes&N)&&!(g.flags&128))return Xa=!1,C9(p,g,N);Xa=!!(p.flags&131072)}else Xa=!1,Hn&&g.flags&1048576&&fA(g,jg,g.index);switch(g.lanes=0,g.tag){case 2:var D=g.type;uv(p,g),p=g.pendingProps;var _=Yc(g,ha.current);nf(g,N),_=uw(null,g,D,p,_,N);var P=lw();return g.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,ja(D)?(P=!0,qg(g)):P=!1,g.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,tw(g),_.updater=sv,g.stateNode=_,_._reactInternals=g,mw(g,D,p,N),g=bw(null,g,D,!0,P,N)):(g.tag=0,Hn&&P&&Gx(g),ka(null,g,_,N),g=g.child),g;case 16:D=g.elementType;e:{switch(uv(p,g),p=g.pendingProps,_=D._init,D=_(D._payload),g.type=D,_=g.tag=L9(D),p=ps(D,p),_){case 0:g=yw(null,g,D,p,N);break e;case 1:g=aI(null,g,D,p,N);break e;case 11:g=JA(null,g,D,p,N);break e;case 14:g=eI(null,g,D,ps(D.type,p),N);break e}throw Error(n(306,D,""))}return g;case 0:return D=g.type,_=g.pendingProps,_=g.elementType===D?_:ps(D,_),yw(p,g,D,_,N);case 1:return D=g.type,_=g.pendingProps,_=g.elementType===D?_:ps(D,_),aI(p,g,D,_,N);case 3:e:{if(iI(g),p===null)throw Error(n(387));D=g.pendingProps,P=g.memoizedState,_=P.element,xA(p,g),Jg(g,D,null,N);var X=g.memoizedState;if(D=X.element,P.isDehydrated)if(P={element:D,isDehydrated:!1,cache:X.cache,pendingSuspenseBoundaries:X.pendingSuspenseBoundaries,transitions:X.transitions},g.updateQueue.baseState=P,g.memoizedState=P,g.flags&256){_=af(Error(n(423)),g),g=sI(p,g,D,N,_);break e}else if(D!==_){_=af(Error(n(424)),g),g=sI(p,g,D,N,_);break e}else for(bi=su(g.stateNode.containerInfo.firstChild),yi=g,Hn=!0,ds=null,N=yA(g,null,D,N),g.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling;else{if(Jc(),D===_){g=Co(p,g,N);break e}ka(p,g,D,N)}g=g.child}return g;case 5:return SA(g),p===null&&Xx(g),D=g.type,_=g.pendingProps,P=p!==null?p.memoizedProps:null,X=_.children,Lx(D,_)?X=null:P!==null&&Lx(D,P)&&(g.flags|=32),rI(p,g),ka(p,g,X,N),g.child;case 6:return p===null&&Xx(g),null;case 13:return oI(p,g,N);case 4:return nw(g,g.stateNode.containerInfo),D=g.pendingProps,p===null?g.child=ef(g,null,D,N):ka(p,g,D,N),g.child;case 11:return D=g.type,_=g.pendingProps,_=g.elementType===D?_:ps(D,_),JA(p,g,D,_,N);case 7:return ka(p,g,g.pendingProps,N),g.child;case 8:return ka(p,g,g.pendingProps.children,N),g.child;case 12:return ka(p,g,g.pendingProps.children,N),g.child;case 10:e:{if(D=g.type._context,_=g.pendingProps,P=g.memoizedProps,X=_.value,zn(Yg,D._currentValue),D._currentValue=X,P!==null)if(fs(P.value,X)){if(P.children===_.children&&!Ha.current){g=Co(p,g,N);break e}}else for(P=g.child,P!==null&&(P.return=g);P!==null;){var le=P.dependencies;if(le!==null){X=P.child;for(var ye=le.firstContext;ye!==null;){if(ye.context===D){if(P.tag===1){ye=So(-1,N&-N),ye.tag=2;var _e=P.updateQueue;if(_e!==null){_e=_e.shared;var Ke=_e.pending;Ke===null?ye.next=ye:(ye.next=Ke.next,Ke.next=ye),_e.pending=ye}}P.lanes|=N,ye=P.alternate,ye!==null&&(ye.lanes|=N),Jx(P.return,N,g),le.lanes|=N;break}ye=ye.next}}else if(P.tag===10)X=P.type===g.type?null:P.child;else if(P.tag===18){if(X=P.return,X===null)throw Error(n(341));X.lanes|=N,le=X.alternate,le!==null&&(le.lanes|=N),Jx(X,N,g),X=P.sibling}else X=P.child;if(X!==null)X.return=P;else for(X=P;X!==null;){if(X===g){X=null;break}if(P=X.sibling,P!==null){P.return=X.return,X=P;break}X=X.return}P=X}ka(p,g,_.children,N),g=g.child}return g;case 9:return _=g.type,D=g.pendingProps.children,nf(g,N),_=_i(_),D=D(_),g.flags|=1,ka(p,g,D,N),g.child;case 14:return D=g.type,_=ps(D,g.pendingProps),_=ps(D.type,_),eI(p,g,D,_,N);case 15:return tI(p,g,g.type,g.pendingProps,N);case 17:return D=g.type,_=g.pendingProps,_=g.elementType===D?_:ps(D,_),uv(p,g),g.tag=1,ja(D)?(p=!0,qg(g)):p=!1,nf(g,N),HA(g,D,_),mw(g,D,_,N),bw(null,g,D,!0,p,N);case 19:return lI(p,g,N);case 22:return nI(p,g,N)}throw Error(n(156,g.tag))};function OI(p,g){return wg(p,g)}function B9(p,g,N,D){this.tag=p,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ri(p,g,N,D){return new B9(p,g,N,D)}function Lw(p){return p=p.prototype,!(!p||!p.isReactComponent)}function L9(p){if(typeof p=="function")return Lw(p)?1:0;if(p!=null){if(p=p.$$typeof,p===O)return 11;if(p===L)return 14}return 2}function vu(p,g){var N=p.alternate;return N===null?(N=Ri(p.tag,g,p.key,p.mode),N.elementType=p.elementType,N.type=p.type,N.stateNode=p.stateNode,N.alternate=p,p.alternate=N):(N.pendingProps=g,N.type=p.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=p.flags&14680064,N.childLanes=p.childLanes,N.lanes=p.lanes,N.child=p.child,N.memoizedProps=p.memoizedProps,N.memoizedState=p.memoizedState,N.updateQueue=p.updateQueue,g=p.dependencies,N.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},N.sibling=p.sibling,N.index=p.index,N.ref=p.ref,N}function bv(p,g,N,D,_,P){var X=2;if(D=p,typeof p=="function")Lw(p)&&(X=1);else if(typeof p=="string")X=5;else e:switch(p){case A:return Fl(N.children,_,P,g);case k:X=8,_|=8;break;case T:return p=Ri(12,N,g,_|2),p.elementType=T,p.lanes=P,p;case B:return p=Ri(13,N,g,_),p.elementType=B,p.lanes=P,p;case z:return p=Ri(19,N,g,_),p.elementType=z,p.lanes=P,p;case R:return xv(N,_,P,g);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case I:X=10;break e;case $:X=9;break e;case O:X=11;break e;case L:X=14;break e;case F:X=16,D=null;break e}throw Error(n(130,p==null?p:typeof p,""))}return g=Ri(X,N,g,_),g.elementType=p,g.type=D,g.lanes=P,g}function Fl(p,g,N,D){return p=Ri(7,p,D,g),p.lanes=N,p}function xv(p,g,N,D){return p=Ri(22,p,D,g),p.elementType=R,p.lanes=N,p.stateNode={isHidden:!1},p}function zw(p,g,N){return p=Ri(6,p,null,g),p.lanes=N,p}function Uw(p,g,N){return g=Ri(4,p.children!==null?p.children:[],p.key,g),g.lanes=N,g.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},g}function z9(p,g,N,D,_){this.tag=g,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hx(0),this.expirationTimes=hx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hx(0),this.identifierPrefix=D,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function Vw(p,g,N,D,_,P,X,le,ye){return p=new z9(p,g,N,le,ye),g===1?(g=1,P===!0&&(g|=8)):g=0,P=Ri(3,null,null,g),p.current=P,P.stateNode=p,P.memoizedState={element:D,isDehydrated:N,cache:null,transitions:null,pendingSuspenseBoundaries:null},tw(P),p}function U9(p,g,N){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:D==null?null:""+D,children:p,containerInfo:g,implementation:N}}function FI(p){if(!p)return uu;p=p._reactInternals;e:{if(vo(p)!==p||p.tag!==1)throw Error(n(170));var g=p;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(ja(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(n(171))}if(p.tag===1){var N=p.type;if(ja(N))return uA(p,N,g)}return g}function RI(p,g,N,D,_,P,X,le,ye){return p=Vw(N,D,!0,p,_,P,X,le,ye),p.context=FI(null),N=p.current,D=_a(),_=mu(N),P=So(D,_),P.callback=g??null,fu(N,P,_),p.current.lanes=_,Kd(p,_,D),Ya(p,D),p}function wv(p,g,N,D){var _=g.current,P=_a(),X=mu(_);return N=FI(N),g.context===null?g.context=N:g.pendingContext=N,g=So(P,X),g.payload={element:p},D=D===void 0?null:D,D!==null&&(g.callback=D),p=fu(_,g,X),p!==null&&(gs(p,_,X,P),Qg(p,_,X)),X}function Nv(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function MI(p,g){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var N=p.retryLane;p.retryLane=N!==0&&N<g?N:g}}function Ww(p,g){MI(p,g),(p=p.alternate)&&MI(p,g)}function V9(){return null}var PI=typeof reportError=="function"?reportError:function(p){console.error(p)};function qw(p){this._internalRoot=p}Sv.prototype.render=qw.prototype.render=function(p){var g=this._internalRoot;if(g===null)throw Error(n(409));wv(p,g,null,null)},Sv.prototype.unmount=qw.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var g=p.containerInfo;kl(function(){wv(null,p,null,null)}),g[yo]=null}};function Sv(p){this._internalRoot=p}Sv.prototype.unstable_scheduleHydration=function(p){if(p){var g=x$();p={blockedOn:null,target:p,priority:g};for(var N=0;N<ru.length&&g!==0&&g<ru[N].priority;N++);ru.splice(N,0,p),N===0&&S$(p)}};function Gw(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function Cv(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function BI(){}function W9(p,g,N,D,_){if(_){if(typeof D=="function"){var P=D;D=function(){var _e=Nv(X);P.call(_e)}}var X=RI(g,D,p,0,null,!1,!1,"",BI);return p._reactRootContainer=X,p[yo]=X.current,lp(p.nodeType===8?p.parentNode:p),kl(),X}for(;_=p.lastChild;)p.removeChild(_);if(typeof D=="function"){var le=D;D=function(){var _e=Nv(ye);le.call(_e)}}var ye=Vw(p,0,!1,null,null,!1,!1,"",BI);return p._reactRootContainer=ye,p[yo]=ye.current,lp(p.nodeType===8?p.parentNode:p),kl(function(){wv(g,ye,N,D)}),ye}function Ev(p,g,N,D,_){var P=N._reactRootContainer;if(P){var X=P;if(typeof _=="function"){var le=_;_=function(){var ye=Nv(X);le.call(ye)}}wv(g,X,p,_)}else X=W9(N,g,p,_,D);return Nv(X)}y$=function(p){switch(p.tag){case 3:var g=p.stateNode;if(g.current.memoizedState.isDehydrated){var N=Xd(g.pendingLanes);N!==0&&(mx(g,N|1),Ya(g,kt()),!(vn&6)&&(uf=kt()+500,lu()))}break;case 13:kl(function(){var D=No(p,1);if(D!==null){var _=_a();gs(D,p,1,_)}}),Ww(p,1)}},gx=function(p){if(p.tag===13){var g=No(p,134217728);if(g!==null){var N=_a();gs(g,p,134217728,N)}Ww(p,134217728)}},b$=function(p){if(p.tag===13){var g=mu(p),N=No(p,g);if(N!==null){var D=_a();gs(N,p,g,D)}Ww(p,g)}},x$=function(){return $n},w$=function(p,g){var N=$n;try{return $n=p,g()}finally{$n=N}},Dt=function(p,g,N){switch(g){case"input":if(ve(p,N),g=N.name,N.type==="radio"&&g!=null){for(N=p;N.parentNode;)N=N.parentNode;for(N=N.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<N.length;g++){var D=N[g];if(D!==p&&D.form===p.form){var _=Vg(D);if(!_)throw Error(n(90));he(D),ve(D,_)}}}break;case"textarea":ce(p,N);break;case"select":g=N.value,g!=null&&Ge(p,!!N.multiple,g,!1)}},hg=Mw,mg=kl;var q9={usingClientEntryPoint:!1,Events:[dp,Xc,Vg,dg,pg,Mw]},Dp={findFiberByHostInstance:Sl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},G9={bundleType:Dp.bundleType,version:Dp.version,rendererPackageName:Dp.rendererPackageName,rendererConfig:Dp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=bg(p),p===null?null:p.stateNode},findFiberByHostInstance:Dp.findFiberByHostInstance||V9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dv.isDisabled&&Dv.supportsFiber)try{Sg=Dv.inject(G9),Us=Dv}catch{}}return Za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q9,Za.createPortal=function(p,g){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gw(g))throw Error(n(200));return U9(p,g,null,N)},Za.createRoot=function(p,g){if(!Gw(p))throw Error(n(299));var N=!1,D="",_=PI;return g!=null&&(g.unstable_strictMode===!0&&(N=!0),g.identifierPrefix!==void 0&&(D=g.identifierPrefix),g.onRecoverableError!==void 0&&(_=g.onRecoverableError)),g=Vw(p,1,!1,null,null,N,!1,D,_),p[yo]=g.current,lp(p.nodeType===8?p.parentNode:p),new qw(g)},Za.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var g=p._reactInternals;if(g===void 0)throw typeof p.render=="function"?Error(n(188)):(p=Object.keys(p).join(","),Error(n(268,p)));return p=bg(g),p=p===null?null:p.stateNode,p},Za.flushSync=function(p){return kl(p)},Za.hydrate=function(p,g,N){if(!Cv(g))throw Error(n(200));return Ev(null,p,g,!0,N)},Za.hydrateRoot=function(p,g,N){if(!Gw(p))throw Error(n(405));var D=N!=null&&N.hydratedSources||null,_=!1,P="",X=PI;if(N!=null&&(N.unstable_strictMode===!0&&(_=!0),N.identifierPrefix!==void 0&&(P=N.identifierPrefix),N.onRecoverableError!==void 0&&(X=N.onRecoverableError)),g=RI(g,null,p,1,N??null,_,!1,P,X),p[yo]=g.current,lp(p),D)for(p=0;p<D.length;p++)N=D[p],_=N._getVersion,_=_(N._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[N,_]:g.mutableSourceEagerHydrationData.push(N,_);return new Sv(g)},Za.render=function(p,g,N){if(!Cv(g))throw Error(n(200));return Ev(null,p,g,!1,N)},Za.unmountComponentAtNode=function(p){if(!Cv(p))throw Error(n(40));return p._reactRootContainer?(kl(function(){Ev(null,null,p,!1,function(){p._reactRootContainer=null,p[yo]=null})}),!0):!1},Za.unstable_batchedUpdates=Mw,Za.unstable_renderSubtreeIntoContainer=function(p,g,N,D){if(!Cv(N))throw Error(n(200));if(p==null||p._reactInternals===void 0)throw Error(n(38));return Ev(p,g,N,!1,D)},Za.version="18.3.1-next-f1338f8080-20240426",Za}var HI;function tq(){if(HI)return Xw.exports;HI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xw.exports=eq(),Xw.exports}var jI;function nq(){if(jI)return Tv;jI=1;var t=tq();return Tv.createRoot=t.createRoot,Tv.hydrateRoot=t.hydrateRoot,Tv}var rq=nq();const aq=()=>wn.jsx("header",{className:"bg-sidebar text-text py-4 px-6 shadow-md",children:wn.jsx("h1",{className:"text-lg font-semibold",children:"Tu Chatbot"})});var u4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},XI=Le.createContext&&Le.createContext(u4),iq=["attr","size","title"];function sq(t,e){if(t==null)return{};var n=oq(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oq(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ty(){return Ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ty.apply(this,arguments)}function KI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function $y(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KI(Object(n),!0).forEach(function(r){uq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uq(t,e,n){return e=lq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lq(t){var e=cq(t,"string");return typeof e=="symbol"?e:e+""}function cq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function l4(t){return t&&t.map((e,n)=>Le.createElement(e.tag,$y({key:n},e.attr),l4(e.child)))}function Eh(t){return e=>Le.createElement(fq,Ty({attr:$y({},t.attr)},e),l4(t.child))}function fq(t){var e=n=>{var{attr:r,size:a,title:i}=t,s=sq(t,iq),o=a||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Le.createElement("svg",Ty({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:u,style:$y($y({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&Le.createElement("title",null,i),t.children)};return XI!==void 0?Le.createElement(XI.Consumer,null,n=>e(n)):e(u4)}function dq(t){return Eh({tag:"svg",attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M799.855 166.312c.023.007.043.018.084.059l57.69 57.69c.041.041.052.06.059.084a.118.118 0 0 1 0 .069c-.007.023-.018.042-.059.083L569.926 512l287.703 287.703c.041.04.052.06.059.083a.118.118 0 0 1 0 .07c-.007.022-.018.042-.059.083l-57.69 57.69c-.041.041-.06.052-.084.059a.118.118 0 0 1-.069 0c-.023-.007-.042-.018-.083-.059L512 569.926 224.297 857.629c-.04.041-.06.052-.083.059a.118.118 0 0 1-.07 0c-.022-.007-.042-.018-.083-.059l-57.69-57.69c-.041-.041-.052-.06-.059-.084a.118.118 0 0 1 0-.069c.007-.023.018-.042.059-.083L454.073 512 166.371 224.297c-.041-.04-.052-.06-.059-.083a.118.118 0 0 1 0-.07c.007-.022.018-.042.059-.083l57.69-57.69c.041-.041.06-.052.084-.059a.118.118 0 0 1 .069 0c.023.007.042.018.083.059L512 454.073l287.703-287.702c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"},child:[]}]})(t)}function pq(t){return Eh({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"},child:[]}]})(t)}function hq(t){return Eh({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function mq(t){return Eh({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M144 464a16 16 0 0 1-16-16v-64h-24a72.08 72.08 0 0 1-72-72V120a72.08 72.08 0 0 1 72-72h304a72.08 72.08 0 0 1 72 72v192a72.08 72.08 0 0 1-72 72H245.74l-91.49 76.29A16.05 16.05 0 0 1 144 464z"},child:[]}]})(t)}function gq(t){return Eh({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}const vq=()=>{const[t,e]=bn.useState(!1),n=()=>{e(!t)};return wn.jsxs("div",{className:`${t?"w-16":"w-64"} bg-sidebar h-full shadow-md flex flex-col transition-all duration-300`,children:[wn.jsx("div",{className:"flex items-center justify-between p-4 cursor-pointer text-text",onClick:n,children:t?wn.jsx(pq,{size:24,className:"text-text"}):wn.jsx(dq,{size:24,className:"text-text"})}),wn.jsxs("div",{className:"flex-1 flex flex-col items-start",children:[wn.jsx(Zw,{text:"Nuevo chat",icon:wn.jsx(mq,{}),isCollapsed:t}),wn.jsx(Zw,{text:"Historial",icon:wn.jsx(gq,{}),isCollapsed:t}),wn.jsx(Zw,{text:"Borrar Chat",icon:wn.jsx(hq,{}),isCollapsed:t})]}),wn.jsx("div",{className:"p-4 text-gray-400 text-sm",children:t?"":" 2024 Tu Chatbot"})]})},Zw=({text:t,icon:e,isCollapsed:n})=>wn.jsxs("div",{className:"flex items-center w-full px-4 py-2 cursor-pointer hover:bg-gray-600 hover:text-accent transition-colors",children:[wn.jsx("span",{className:"text-xl",children:e}),!n&&wn.jsx("span",{className:"ml-3 text-text font-medium",children:t})]});var Qw={exports:{}},Jw,YI;function yq(){if(YI)return Jw;YI=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Jw=t,Jw}var e2,ZI;function bq(){if(ZI)return e2;ZI=1;var t=yq();function e(){}function n(){}return n.resetWarningCache=e,e2=function(){function r(s,o,u,l,c,f){if(f!==t){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function a(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:e};return i.PropTypes=i,i},e2}var QI;function xq(){return QI||(QI=1,Qw.exports=bq()()),Qw.exports}var wq=xq();const at=gc(wq);var Rt="cs",t2={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var JI;function Nq(){return JI||(JI=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(i=a(i,r(o)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var s="";for(var o in i)e.call(i,o)&&i[o]&&(s=a(s,o));return s}function a(i,s){return s?i?i+" "+s:i+s:i}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(t2)),t2.exports}var Sq=Nq();const on=gc(Sq);var c4=["available","unavailable","away","dnd","invisible","eager"],f4=["xs","sm","md","lg","fluid"];function Xp(t){"@babel/helpers - typeof";return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xp(t)}var Cq=["status","size","className","name","selected","children"];function j2(){return j2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j2.apply(this,arguments)}function ek(t,e,n){return e=Eq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eq(t){var e=Dq(t,"string");return Xp(e)=="symbol"?e:String(e)}function Dq(t,e){if(Xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tq(t,e){if(t==null)return{};var n=$q(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $q(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var d4=function(e){var n=e.status,r=e.size,a=r===void 0?"md":r,i=e.className,s=e.name,o=e.selected,u=e.children,l=Tq(e,Cq),c="".concat(Rt,"-status"),f=Le.createElement("div",{className:"".concat(c,"__bullet")}),d=s||u;return Le.createElement("div",j2({},l,{"aria-selected":o===!0?"":null,className:on(c,"".concat(c,"--").concat(a),"".concat(c,"--").concat(n),ek({},"".concat(c,"--selected"),o),ek({},"".concat(c,"--named"),d),i)}),f,d&&Le.createElement("div",{className:"".concat(c,"__name")},s||u))};function Kp(t){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(t)}var Aq=["name","src","size","status","className","active","children"];function X2(){return X2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X2.apply(this,arguments)}function Iq(t,e,n){return e=kq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kq(t){var e=_q(t,"string");return Kp(e)=="symbol"?e:String(e)}function _q(t,e){if(Kp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Kp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oq(t,e){if(t==null)return{};var n=Fq(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fq(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function Rq(t,e){var n=t.name,r=n===void 0?"":n,a=t.src,i=a===void 0?"":a,s=t.size,o=s===void 0?"md":s,u=t.status,l=t.className,c=t.active,f=c===void 0?!1:c,d=t.children,h=Oq(t,Aq),m="".concat(Rt,"-avatar"),v=typeof o<"u"?" ".concat(m,"--").concat(o):"",y=bn.useRef();return bn.useImperativeHandle(e,function(){return{focus:function(){return y.current.focus()}}}),Le.createElement("div",X2({ref:y},h,{className:on("".concat(m).concat(v),Iq({},"".concat(m,"--active"),f),l)}),d||Le.createElement(Le.Fragment,null,Le.createElement("img",{src:i,alt:r}),typeof u=="string"&&Le.createElement(d4,{status:u,size:o})," "))}var Dh=bn.forwardRef(Rq);Dh.displayName="Avatar";Dh.propTypes={children:at.node,name:at.string,src:at.string,size:at.oneOf(f4),status:at.oneOf(c4),active:at.bool,className:at.string};function tk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function $v(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tk(Object(n),!0).forEach(function(r){Mq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mq(t,e,n){return e=Pq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pq(t){var e=Bq(t,"string");return Ru(e)=="symbol"?e:String(e)}function Bq(t,e){if(Ru(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ru(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ru(t){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ru(t)}var py=function(){},Lq=function(e){return e==null||Array.isArray(e)&&e.length===0},Th=function(e,n){var r=[],a=n.map(function(i){return i.displayName||i.name});return Le.Children.toArray(e).forEach(function(i){var s=n.indexOf(i.type);if(s!==-1)r[s]=i;else{var o,u,l,c=(o=i==null||(u=i.props)===null||u===void 0?void 0:u.as)!==null&&o!==void 0?o:i==null||(l=i.props)===null||l===void 0?void 0:l.is,f=Ru(c);if(f==="function"){var d=n.indexOf(c);d!==-1&&(r[d]=Le.cloneElement(i,$v($v({},i.props),{},{as:null})))}else if(f==="object"){var h=c.name||c.displayName,m=a.indexOf(h);m!==-1&&(r[m]=Le.cloneElement(i,$v($v({},i.props),{},{as:null})))}else if(f==="string"){var v=a.indexOf(c);v!==-1&&(r[v]=i)}}}),r},p4=function(e){if(typeof e=="string")return e;if("type"in e){var n=Ru(e.type);if(n==="function"||n==="object"){if("displayName"in e.type)return e.type.displayName;if("name"in e.type)return e.type.name}else if(n==="string")return e.type;return"undefined"}return"undefined"},h4=function(e){return function(n,r,a){var i=e.map(function(c){return c.name||c.displayName}),s=Le.Children.toArray(n[r]).find(function(c){if(typeof c=="string"&&c.trim().length===0)return!1;if(e.indexOf(c.type)===-1){var f,d,h=(c==null||(f=c.props)===null||f===void 0?void 0:f.as)||(c==null||(d=c.props)===null||d===void 0?void 0:d.is),m=Ru(h);if(m==="function")return e.indexOf(h)===-1;if(m==="object"){var v=h.name||h.displayName;return i.indexOf(v)===-1}else return m==="string"?i.indexOf(h)===-1:!0}});if(typeof s<"u"){var o=p4(s),u=e.map(function(c){return c.name||c.displayName}).join(", "),l='"'.concat(o,'" is not a valid child for ').concat(a,". Allowed types: ").concat(u);return new Error(l)}}},zq=["children","size","className","max","activeIndex","hoverToFront"];function K2(){return K2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K2.apply(this,arguments)}function Uq(t,e){if(t==null)return{};var n=Vq(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Vq(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var m4=function(e){var n=e.children,r=e.size,a=r===void 0?"md":r,i=e.className,s=e.max,o=e.activeIndex,u=e.hoverToFront,l=Uq(e,zq),c="".concat(Rt,"-avatar-group"),f=typeof s=="number"&&Le.Children.count(n)>s?Le.Children.toArray(n).reverse().slice(0,s):Le.Children.toArray(n).reverse(),d=typeof o=="number"?f.length-o-1:void 0;return Le.createElement("div",K2({},l,{className:on(c,"".concat(c,"--").concat(a),i)}),f.map(function(h,m){var v=typeof d=="number"?{active:d===m}:{};return u===!0&&(v.className=on("".concat(Rt,"-avatar--active-on-hover"),h.props.className)),Le.cloneElement(h,v)}))};m4.displayName="AvatarGroup";var Wq=["children","className","icon","border","labelPosition"];function Y2(){return Y2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y2.apply(this,arguments)}function qq(t,e){if(t==null)return{};var n=Gq(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Gq(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var eC=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,i=a===void 0?"":a,s=e.icon,o=s===void 0?void 0:s,u=e.border,l=u===void 0?!1:u,c=e.labelPosition,f=c===void 0?void 0:c,d=qq(e,Wq),h="".concat(Rt,"-button"),m=typeof f<"u"?f:"right",v=Le.Children.count(r)>0?"".concat(h,"--").concat(m):"",y=l===!0?"".concat(h,"--border"):"";return Le.createElement("button",Y2({},d,{className:on(h,v,y,i)}),m==="left"&&r,o,m==="right"&&r)};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */function qp(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qp=function(e){return typeof e}:qp=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qp(t)}function Hq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xq(t,e,n){return e&&jq(t.prototype,e),t}function Kq(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){Kq(t,a,n[a])})}return t}function g4(t,e){return Yq(t)||Zq(t,e)||Qq()}function Yq(t){if(Array.isArray(t))return t}function Zq(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(u){a=!0,i=u}finally{try{!r&&s.return!=null&&s.return()}finally{if(a)throw i}}return n}function Qq(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var nk=function(){},tC={},v4={},Jq=null,y4={mark:nk,measure:nk};try{typeof window<"u"&&(tC=window),typeof document<"u"&&(v4=document),typeof MutationObserver<"u"&&(Jq=MutationObserver),typeof performance<"u"&&(y4=performance)}catch{}var eG=tC.navigator||{},rk=eG.userAgent,ak=rk===void 0?"":rk,z0=tC,Ma=v4,Av=y4;z0.document;var nC=!!Ma.documentElement&&!!Ma.head&&typeof Ma.addEventListener=="function"&&typeof Ma.createElement=="function";~ak.indexOf("MSIE")||~ak.indexOf("Trident/");var Po="___FONT_AWESOME___",b4="fa",x4="svg-inline--fa",tG="data-fa-i2svg";(function(){try{return!0}catch{return!1}})();var n2={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},w4=z0.FontAwesomeConfig||{};function nG(t){var e=Ma.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function rG(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(Ma&&typeof Ma.querySelector=="function"){var aG=[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];aG.forEach(function(t){var e=g4(t,2),n=e[0],r=e[1],a=rG(nG(n));a!=null&&(w4[r]=a)})}var iG={familyPrefix:b4,replacementClass:x4,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Z2=Nn({},iG,w4);Z2.autoReplaceSvg||(Z2.observeMutations=!1);var Si=Nn({},Z2);z0.FontAwesomeConfig=Si;var Bo=z0||{};Bo[Po]||(Bo[Po]={});Bo[Po].styles||(Bo[Po].styles={});Bo[Po].hooks||(Bo[Po].hooks={});Bo[Po].shims||(Bo[Po].shims=[]);var Ys=Bo[Po],sG=[],oG=function t(){Ma.removeEventListener("DOMContentLoaded",t),Q2=1,sG.map(function(e){return e()})},Q2=!1;nC&&(Q2=(Ma.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ma.readyState),Q2||Ma.addEventListener("DOMContentLoaded",oG));var rC="pending",N4="settled",Ay="fulfilled",Iy="rejected",uG=function(){},S4=typeof global<"u"&&typeof global.process<"u"&&typeof global.process.emit=="function",lG=typeof setImmediate>"u"?setTimeout:setImmediate,Fp=[],J2;function cG(){for(var t=0;t<Fp.length;t++)Fp[t][0](Fp[t][1]);Fp=[],J2=!1}function ky(t,e){Fp.push([t,e]),J2||(J2=!0,lG(cG,0))}function fG(t,e){function n(a){aC(e,a)}function r(a){Yp(e,a)}try{t(n,r)}catch(a){r(a)}}function C4(t){var e=t.owner,n=e._state,r=e._data,a=t[n],i=t.then;if(typeof a=="function"){n=Ay;try{r=a(r)}catch(s){Yp(i,s)}}E4(i,r)||(n===Ay&&aC(i,r),n===Iy&&Yp(i,r))}function E4(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&(typeof e=="function"||qp(e)==="object")){var r=e.then;if(typeof r=="function")return r.call(e,function(a){n||(n=!0,e===a?D4(t,a):aC(t,a))},function(a){n||(n=!0,Yp(t,a))}),!0}}catch(a){return n||Yp(t,a),!0}return!1}function aC(t,e){(t===e||!E4(t,e))&&D4(t,e)}function D4(t,e){t._state===rC&&(t._state=N4,t._data=e,ky(dG,t))}function Yp(t,e){t._state===rC&&(t._state=N4,t._data=e,ky(pG,t))}function T4(t){t._then=t._then.forEach(C4)}function dG(t){t._state=Ay,T4(t)}function pG(t){t._state=Iy,T4(t),!t._handled&&S4&&global.process.emit("unhandledRejection",t._data,t)}function hG(t){global.process.emit("rejectionHandled",t)}function Yi(t){if(typeof t!="function")throw new TypeError("Promise resolver "+t+" is not a function");if(!(this instanceof Yi))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],fG(t,this)}Yi.prototype={constructor:Yi,_state:rC,_then:null,_data:void 0,_handled:!1,then:function(e,n){var r={owner:this,then:new this.constructor(uG),fulfilled:e,rejected:n};return(n||e)&&!this._handled&&(this._handled=!0,this._state===Iy&&S4&&ky(hG,this)),this._state===Ay||this._state===Iy?ky(C4,r):this._then.push(r),r.then},catch:function(e){return this.then(null,e)}};Yi.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new Yi(function(e,n){var r=[],a=0;function i(u){return a++,function(l){r[u]=l,--a||e(r)}}for(var s=0,o;s<t.length;s++)o=t[s],o&&typeof o.then=="function"?o.then(i(s),n):r[s]=o;a||e(r)})};Yi.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new Yi(function(e,n){for(var r=0,a;r<t.length;r++)a=t[r],a&&typeof a.then=="function"?a.then(e,n):e(a)})};Yi.resolve=function(t){return t&&qp(t)==="object"&&t.constructor===Yi?t:new Yi(function(e){e(t)})};Yi.reject=function(t){return new Yi(function(e,n){n(t)})};var Cf={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function mG(t){if(!(!t||!nC)){var e=Ma.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=Ma.head.childNodes,r=null,a=n.length-1;a>-1;a--){var i=n[a],s=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(s)>-1&&(r=i)}return Ma.head.insertBefore(e,r),t}}var gG="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function _y(){for(var t=12,e="";t-- >0;)e+=gG[Math.random()*62|0];return e}function $4(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function vG(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat($4(t[n]),'" ')},"").trim()}function A4(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n],";")},"")}function I4(t){return t.size!==Cf.size||t.x!==Cf.x||t.y!==Cf.y||t.rotate!==Cf.rotate||t.flipX||t.flipY}function k4(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,a={transform:"translate(".concat(n/2," 256)")},i="translate(".concat(e.x*32,", ").concat(e.y*32,") "),s="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),o="rotate(".concat(e.rotate," 0 0)"),u={transform:"".concat(i," ").concat(s," ").concat(o)},l={transform:"translate(".concat(r/2*-1," -256)")};return{outer:a,inner:u,path:l}}var r2={x:0,y:0,width:"100%",height:"100%"};function ik(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function yG(t){return t.tag==="g"?t.children:[t]}function bG(t){var e=t.children,n=t.attributes,r=t.main,a=t.mask,i=t.maskId,s=t.transform,o=r.width,u=r.icon,l=a.width,c=a.icon,f=k4({transform:s,containerWidth:l,iconWidth:o}),d={tag:"rect",attributes:Nn({},r2,{fill:"white"})},h=u.children?{children:u.children.map(ik)}:{},m={tag:"g",attributes:Nn({},f.inner),children:[ik(Nn({tag:u.tag,attributes:Nn({},u.attributes,f.path)},h))]},v={tag:"g",attributes:Nn({},f.outer),children:[m]},y="mask-".concat(i||_y()),b="clip-".concat(i||_y()),w={tag:"mask",attributes:Nn({},r2,{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,v]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:yG(c)},w]};return e.push(x,{tag:"rect",attributes:Nn({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(y,")")},r2)}),{children:e,attributes:n}}function xG(t){var e=t.children,n=t.attributes,r=t.main,a=t.transform,i=t.styles,s=A4(i);if(s.length>0&&(n.style=s),I4(a)){var o=k4({transform:a,containerWidth:r.width,iconWidth:r.width});e.push({tag:"g",attributes:Nn({},o.outer),children:[{tag:"g",attributes:Nn({},o.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:Nn({},r.icon.attributes,o.path)}]}]})}else e.push(r.icon);return{children:e,attributes:n}}function wG(t){var e=t.children,n=t.main,r=t.mask,a=t.attributes,i=t.styles,s=t.transform;if(I4(s)&&n.found&&!r.found){var o=n.width,u=n.height,l={x:o/u/2,y:.5};a.style=A4(Nn({},i,{"transform-origin":"".concat(l.x+s.x/16,"em ").concat(l.y+s.y/16,"em")}))}return[{tag:"svg",attributes:a,children:e}]}function NG(t){var e=t.prefix,n=t.iconName,r=t.children,a=t.attributes,i=t.symbol,s=i===!0?"".concat(e,"-").concat(Si.familyPrefix,"-").concat(n):i;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Nn({},a,{id:s}),children:r}]}]}function SG(t){var e=t.icons,n=e.main,r=e.mask,a=t.prefix,i=t.iconName,s=t.transform,o=t.symbol,u=t.title,l=t.maskId,c=t.titleId,f=t.extra,d=t.watchable,h=d===void 0?!1:d,m=r.found?r:n,v=m.width,y=m.height,b=a==="fak",w=b?"":"fa-w-".concat(Math.ceil(v/y*16)),x=[Si.replacementClass,i?"".concat(Si.familyPrefix,"-").concat(i):"",w].filter(function(I){return f.classes.indexOf(I)===-1}).filter(function(I){return I!==""||!!I}).concat(f.classes).join(" "),S={children:[],attributes:Nn({},f.attributes,{"data-prefix":a,"data-icon":i,class:x,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v," ").concat(y)})},C=b&&!~f.classes.indexOf("fa-fw")?{width:"".concat(v/y*16*.0625,"em")}:{};h&&(S.attributes[tG]=""),u&&S.children.push({tag:"title",attributes:{id:S.attributes["aria-labelledby"]||"title-".concat(c||_y())},children:[u]});var E=Nn({},S,{prefix:a,iconName:i,main:n,mask:r,maskId:l,transform:s,symbol:o,styles:Nn({},C,f.styles)}),A=r.found&&n.found?bG(E):xG(E),k=A.children,T=A.attributes;return E.children=k,E.attributes=T,o?NG(E):wG(E)}var sk=function(){};Si.measurePerformance&&Av&&Av.mark&&Av.measure;var a2=function(e,n,r,a){var i=Object.keys(e),s=i.length,o=n,u,l,c;for(r===void 0?(u=1,c=e[i[0]]):(u=0,c=r);u<s;u++)l=i[u],c=o(c,e[l],l,e);return c};function _4(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,a=r===void 0?!1:r,i=Object.keys(e).reduce(function(s,o){var u=e[o],l=!!u.icon;return l?s[u.iconName]=u.icon:s[o]=u,s},{});typeof Ys.hooks.addPack=="function"&&!a?Ys.hooks.addPack(t,i):Ys.styles[t]=Nn({},Ys.styles[t]||{},i),t==="fas"&&_4("fa",e)}var ok=Ys.styles,CG=Ys.shims,O4=function(){var e=function(a){return a2(ok,function(i,s,o){return i[o]=a2(s,a,{}),i},{})};e(function(r,a,i){return a[3]&&(r[a[3]]=i),r}),e(function(r,a,i){var s=a[2];return r[i]=i,s.forEach(function(o){r[o]=i}),r});var n="far"in ok;a2(CG,function(r,a){var i=a[0],s=a[1],o=a[2];return s==="far"&&!n&&(s="fas"),r[i]={prefix:s,iconName:o},r},{})};O4();Ys.styles;function uk(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}function F4(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,a=t.children,i=a===void 0?[]:a;return typeof t=="string"?$4(t):"<".concat(e," ").concat(vG(r),">").concat(i.map(F4).join(""),"</").concat(e,">")}var EG=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce(function(r,a){var i=a.toLowerCase().split("-"),s=i[0],o=i.slice(1).join("-");if(s&&o==="h")return r.flipX=!0,r;if(s&&o==="v")return r.flipY=!0,r;if(o=parseFloat(o),isNaN(o))return r;switch(s){case"grow":r.size=r.size+o;break;case"shrink":r.size=r.size-o;break;case"left":r.x=r.x-o;break;case"right":r.x=r.x+o;break;case"up":r.y=r.y-o;break;case"down":r.y=r.y+o;break;case"rotate":r.rotate=r.rotate+o;break}return r},n):n};function eN(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=new Error().stack}eN.prototype=Object.create(Error.prototype);eN.prototype.constructor=eN;var U0={fill:"currentColor"},R4={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};Nn({},U0,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"});var iC=Nn({},R4,{attributeName:"opacity"});Nn({},U0,{cx:"256",cy:"364",r:"28"}),Nn({},R4,{attributeName:"r",values:"28;14;28;28;14;28;"}),Nn({},iC,{values:"1;0;1;1;0;1;"});Nn({},U0,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),Nn({},iC,{values:"1;0;0;0;0;1;"});Nn({},U0,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),Nn({},iC,{values:"0;0;1;1;0;0;"});Ys.styles;function lk(t){var e=t[0],n=t[1],r=t.slice(4),a=g4(r,1),i=a[0],s=null;return Array.isArray(i)?s={tag:"g",attributes:{class:"".concat(Si.familyPrefix,"-").concat(n2.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Si.familyPrefix,"-").concat(n2.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(Si.familyPrefix,"-").concat(n2.PRIMARY),fill:"currentColor",d:i[1]}}]}:s={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:s}}Ys.styles;var DG=`svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}`;function TG(){var t=b4,e=x4,n=Si.familyPrefix,r=Si.replacementClass,a=DG;if(n!==t||r!==e){var i=new RegExp("\\.".concat(t,"\\-"),"g"),s=new RegExp("\\--".concat(t,"\\-"),"g"),o=new RegExp("\\.".concat(e),"g");a=a.replace(i,".".concat(n,"-")).replace(s,"--".concat(n,"-")).replace(o,".".concat(r))}return a}var $G=function(){function t(){Hq(this,t),this.definitions={}}return Xq(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var s=a.reduce(this._pullDefinitions,{});Object.keys(s).forEach(function(o){n.definitions[o]=Nn({},n.definitions[o]||{},s[o]),_4(o,s[o]),O4()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var a=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(a).map(function(i){var s=a[i],o=s.prefix,u=s.iconName,l=s.icon;n[o]||(n[o]={}),n[o][u]=l}),n}}]),t}();function AG(){Si.autoAddCss&&!fk&&(mG(TG()),fk=!0)}function IG(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return F4(r)})}}),Object.defineProperty(t,"node",{get:function(){if(nC){var r=Ma.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function ck(t){var e=t.prefix,n=e===void 0?"fa":e,r=t.iconName;if(r)return uk(_G.definitions,n,r)||uk(Ys.styles,n,r)}function kG(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:ck(e||{}),a=n.mask;return a&&(a=(a||{}).icon?a:ck(a||{})),t(r,Nn({},n,{mask:a}))}}var _G=new $G,fk=!1,tN={transform:function(e){return EG(e)}},OG=kG(function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.transform,r=n===void 0?Cf:n,a=e.symbol,i=a===void 0?!1:a,s=e.mask,o=s===void 0?null:s,u=e.maskId,l=u===void 0?null:u,c=e.title,f=c===void 0?null:c,d=e.titleId,h=d===void 0?null:d,m=e.classes,v=m===void 0?[]:m,y=e.attributes,b=y===void 0?{}:y,w=e.styles,x=w===void 0?{}:w;if(t){var S=t.prefix,C=t.iconName,E=t.icon;return IG(Nn({type:"icon"},t),function(){return AG(),Si.autoA11y&&(f?b["aria-labelledby"]="".concat(Si.replacementClass,"-title-").concat(h||_y()):(b["aria-hidden"]="true",b.focusable="false")),SG({icons:{main:lk(E),mask:o?lk(o.icon):{found:!1,width:null,height:null,icon:{}}},prefix:S,iconName:C,transform:Nn({},Cf,r),symbol:i,title:f,maskId:l,titleId:h,extra:{attributes:b,styles:x,classes:v}})})}});function dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Su(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dk(Object(n),!0).forEach(function(r){Ef(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oy(t){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(t)}function Ef(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FG(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function M4(t,e){if(t==null)return{};var n=FG(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nN(t){return RG(t)||MG(t)||PG(t)||BG()}function RG(t){if(Array.isArray(t))return rN(t)}function MG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function PG(t,e){if(t){if(typeof t=="string")return rN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rN(t,e)}}function rN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function BG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LG(t){var e,n=t.beat,r=t.fade,a=t.beatFade,i=t.bounce,s=t.shake,o=t.flash,u=t.spin,l=t.spinPulse,c=t.spinReverse,f=t.pulse,d=t.fixedWidth,h=t.inverse,m=t.border,v=t.listItem,y=t.flip,b=t.size,w=t.rotation,x=t.pull,S=(e={"fa-beat":n,"fa-fade":r,"fa-beat-fade":a,"fa-bounce":i,"fa-shake":s,"fa-flash":o,"fa-spin":u,"fa-spin-reverse":c,"fa-spin-pulse":l,"fa-pulse":f,"fa-fw":d,"fa-inverse":h,"fa-border":m,"fa-li":v,"fa-flip":y===!0,"fa-flip-horizontal":y==="horizontal"||y==="both","fa-flip-vertical":y==="vertical"||y==="both"},Ef(e,"fa-".concat(b),typeof b<"u"&&b!==null),Ef(e,"fa-rotate-".concat(w),typeof w<"u"&&w!==null&&w!==0),Ef(e,"fa-pull-".concat(x),typeof x<"u"&&x!==null),Ef(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(S).map(function(C){return S[C]?C:null}).filter(function(C){return C})}function zG(t){return t=t-0,t===t}function P4(t){return zG(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var UG=["style"];function VG(t){return t.charAt(0).toUpperCase()+t.slice(1)}function WG(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),a=P4(n.slice(0,r)),i=n.slice(r+1).trim();return a.startsWith("webkit")?e[VG(a)]=i:e[a]=i,e},{})}function B4(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(u){return B4(t,u)}),a=Object.keys(e.attributes||{}).reduce(function(u,l){var c=e.attributes[l];switch(l){case"class":u.attrs.className=c,delete e.attributes.class;break;case"style":u.attrs.style=WG(c);break;default:l.indexOf("aria-")===0||l.indexOf("data-")===0?u.attrs[l.toLowerCase()]=c:u.attrs[P4(l)]=c}return u},{attrs:{}}),i=n.style,s=i===void 0?{}:i,o=M4(n,UG);return a.attrs.style=Su(Su({},a.attrs.style),s),t.apply(void 0,[e.tag,Su(Su({},a.attrs),o)].concat(nN(r)))}var L4=!1;try{L4=!0}catch{}function qG(){if(!L4&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function pk(t){if(t&&Oy(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(tN.icon)return tN.icon(t);if(t===null)return null;if(t&&Oy(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function i2(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Ef({},t,e):{}}var GG=["forwardedRef"];function io(t){var e=t.forwardedRef,n=M4(t,GG),r=n.icon,a=n.mask,i=n.symbol,s=n.className,o=n.title,u=n.titleId,l=n.maskId,c=pk(r),f=i2("classes",[].concat(nN(LG(n)),nN(s.split(" ")))),d=i2("transform",typeof n.transform=="string"?tN.transform(n.transform):n.transform),h=i2("mask",pk(a)),m=OG(c,Su(Su(Su(Su({},f),d),h),{},{symbol:i,title:o,titleId:u,maskId:l}));if(!m)return qG("Could not find icon",c),null;var v=m.abstract,y={ref:e};return Object.keys(n).forEach(function(b){io.defaultProps.hasOwnProperty(b)||(y[b]=n[b])}),HG(v[0],y)}io.displayName="FontAwesomeIcon";io.propTypes={beat:at.bool,border:at.bool,beatFade:at.bool,bounce:at.bool,className:at.string,fade:at.bool,flash:at.bool,mask:at.oneOfType([at.object,at.array,at.string]),maskId:at.string,fixedWidth:at.bool,inverse:at.bool,flip:at.oneOf([!0,!1,"horizontal","vertical","both"]),icon:at.oneOfType([at.object,at.array,at.string]),listItem:at.bool,pull:at.oneOf(["right","left"]),pulse:at.bool,rotation:at.oneOf([0,90,180,270]),shake:at.bool,size:at.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:at.bool,spinPulse:at.bool,spinReverse:at.bool,symbol:at.oneOfType([at.bool,at.string]),title:at.string,titleId:at.string,transform:at.oneOfType([at.string,at.object]),swapOpacity:at.bool};io.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var HG=B4.bind(null,Le.createElement),s2={},hk;function jG(){return hk||(hk=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-up",r=448,a=512,i=[],s="f062",o="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faArrowUp=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(s2)),s2}var XG=jG(),o2={},mk;function KG(){return mk||(mk=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-right",r=448,a=512,i=[],s="f061",o="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faArrowRight=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(o2)),o2}var YG=KG(),u2={},gk;function ZG(){return gk||(gk=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-down",r=448,a=512,i=[],s="f063",o="M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faArrowDown=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(u2)),u2}var QG=ZG(),l2={},vk;function JG(){return vk||(vk=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-left",r=448,a=512,i=[],s="f060",o="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faArrowLeft=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(l2)),l2}var eH=JG(),tH=["className","direction","children"];function aN(){return aN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aN.apply(this,arguments)}function nH(t,e){if(t==null)return{};var n=rH(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rH(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var aH=function(e){var n=e.className,r=n===void 0?"":n,a=e.direction,i=a===void 0?"right":a,s=e.children,o=nH(e,tH),u="".concat(Rt,"-button--arrow"),l=function(){if(i==="up")return XG.faArrowUp;if(i==="right")return YG.faArrowRight;if(i==="down")return QG.faArrowDown;if(i==="left")return eH.faArrowLeft}();return Le.createElement(eC,aN({},o,{className:on(u,r),icon:Le.createElement(io,{icon:l})}),s)},c2={},yk;function iH(){return yk||(yk=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="ellipsis-v",r=192,a=512,i=[],s="f142",o="M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faEllipsisV=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(c2)),c2}var sH=iH(),f2={},bk;function oH(){return bk||(bk=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="paper-plane",r=512,a=512,i=[],s="f1d8",o="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faPaperPlane=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(f2)),f2}var uH=oH(),lH=["className","children"];function iN(){return iN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iN.apply(this,arguments)}function cH(t,e){if(t==null)return{};var n=fH(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fH(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var dH=function(e){var n=e.className,r=n===void 0?"":n,a=e.children,i=cH(e,lH),s="".concat(Rt,"-button--send");return Le.createElement(eC,iN({},i,{className:on(s,r),icon:Le.createElement(io,{icon:uH.faPaperPlane})}),a)},d2={},xk;function pH(){return xk||(xk=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="paperclip",r=448,a=512,i=[],s="f0c6",o="M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faPaperclip=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(d2)),d2}var hH=pH(),mH=["className","children"];function sN(){return sN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sN.apply(this,arguments)}function gH(t,e){if(t==null)return{};var n=vH(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vH(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var yH=function(e){var n=e.className,r=n===void 0?"":n,a=e.children,i=gH(e,mH),s="".concat(Rt,"-button--attachment");return Le.createElement(eC,sN({},i,{className:on(s,r),icon:Le.createElement(io,{icon:hH.faPaperclip})}),a)},bH=["onClick","children","className"];function oN(){return oN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oN.apply(this,arguments)}function xH(t,e){if(t==null)return{};var n=wH(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wH(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var sC=function(e){var n=e.onClick,r=n===void 0?function(){}:n,a=e.children,i=a===void 0?void 0:a,s=e.className,o=xH(e,bH),u="".concat(Rt,"-conversation-header__back");return Le.createElement("div",oN({},o,{className:on(u,s)}),typeof i<"u"?i:Le.createElement(aH,{direction:"left",onClick:r}))};sC.displayName="ConversationHeader.Back";var NH=["children","className"];function uN(){return uN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uN.apply(this,arguments)}function SH(t,e){if(t==null)return{};var n=CH(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function CH(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var oC=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,i=SH(e,NH),s="".concat(Rt,"-conversation-header__actions");return Le.createElement("section",uN({},i,{className:on(s,a)}),r)};oC.displayName="ConversationHeader.Actions";var EH=["userName","info","children","className"];function lN(){return lN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lN.apply(this,arguments)}function DH(t,e){if(t==null)return{};var n=TH(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function TH(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var uC=function(e){var n=e.userName,r=n===void 0?"":n,a=e.info,i=a===void 0?"":a,s=e.children,o=s===void 0?void 0:s,u=e.className,l=DH(e,EH),c="".concat(Rt,"-conversation-header__content");return Le.createElement("div",lN({},l,{className:on(c,u)}),typeof o<"u"?o:Le.createElement(Le.Fragment,null,Le.createElement("div",{className:"".concat(Rt,"-conversation-header__user-name")},r),Le.createElement("div",{className:"".concat(Rt,"-conversation-header__info")},i)))};uC.displayName="ConversationHeader.Content";var $H=["children","className"];function cN(){return cN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cN.apply(this,arguments)}function AH(t,e){return OH(t)||_H(t,e)||kH(t,e)||IH()}function IH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kH(t,e){if(t){if(typeof t=="string")return wk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wk(t,e)}}function wk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _H(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,s,o=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function OH(t){if(Array.isArray(t))return t}function FH(t,e){if(t==null)return{};var n=RH(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function RH(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var $h=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,i=FH(e,$H),s="".concat(Rt,"-conversation-header"),o=Th(r,[sC,Dh,m4,uC,oC]),u=AH(o,5),l=u[0],c=u[1],f=u[2],d=u[3],h=u[4];return Le.createElement("div",cN({},i,{className:on(s,a)}),l,c&&Le.createElement("div",{className:"".concat(s,"__avatar")},c),!c&&f&&Le.createElement("div",{className:"".concat(s,"__avatar")},f),d,h)};$h.displayName="ConversationHeader";$h.Back=sC;$h.Actions=oC;$h.Content=uC;/*!
 * perfect-scrollbar v1.5.0
 * Copyright 2020 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function Zs(t){return getComputedStyle(t)}function ni(t,e){for(var n in e){var r=e[n];typeof r=="number"&&(r=r+"px"),t.style[n]=r}return t}function Iv(t){var e=document.createElement("div");return e.className=t,e}var Nk=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function Cu(t,e){if(!Nk)throw new Error("No element matching method supported");return Nk.call(t,e)}function Df(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function Sk(t,e){return Array.prototype.filter.call(t.children,function(n){return Cu(n,e)})}var vr={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},z4={x:null,y:null};function U4(t,e){var n=t.element.classList,r=vr.state.scrolling(e);n.contains(r)?clearTimeout(z4[e]):n.add(r)}function V4(t,e){z4[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(vr.state.scrolling(e))},t.settings.scrollingThreshold)}function MH(t,e){U4(t,e),V4(t,e)}var Ah=function(e){this.element=e,this.handlers={}},W4={isEmpty:{configurable:!0}};Ah.prototype.bind=function(e,n){typeof this.handlers[e]>"u"&&(this.handlers[e]=[]),this.handlers[e].push(n);var r=["touchstart","wheel","touchmove"];r.indexOf(e)!==-1?this.element.addEventListener(e,n,{passive:!1}):this.element.addEventListener(e,n,!1)};Ah.prototype.unbind=function(e,n){var r=this;this.handlers[e]=this.handlers[e].filter(function(a){return n&&a!==n?!0:(r.element.removeEventListener(e,a,!1),!1)})};Ah.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)};W4.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return t.handlers[e].length===0})};Object.defineProperties(Ah.prototype,W4);var dd=function(){this.eventElements=[]};dd.prototype.eventElement=function(e){var n=this.eventElements.filter(function(r){return r.element===e})[0];return n||(n=new Ah(e),this.eventElements.push(n)),n};dd.prototype.bind=function(e,n,r){this.eventElement(e).bind(n,r)};dd.prototype.unbind=function(e,n,r){var a=this.eventElement(e);a.unbind(n,r),a.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(a),1)};dd.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]};dd.prototype.once=function(e,n,r){var a=this.eventElement(e),i=function s(o){a.unbind(n,s),r(o)};a.bind(n,i)};function kv(t){if(typeof window.CustomEvent=="function")return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function Fy(t,e,n,r,a,i){r===void 0&&(r=!0),a===void 0&&(a=!1);var s;if(e==="top")s=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(e==="left")s=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");PH(t,n,s,r,a,i)}function PH(t,e,n,r,a,i){var s=n[0],o=n[1],u=n[2],l=n[3],c=n[4],f=n[5];r===void 0&&(r=!0),a===void 0&&(a=!1);var d=t.element;t.reach[l]=null;var h=i===!0?t[s]!==t[o]:!0;h&&d[u]<1&&(t.reach[l]="start"),h&&d[u]>t[s]-t[o]-1&&(t.reach[l]="end"),e&&(d.dispatchEvent(kv("ps-scroll-"+l)),e<0?d.dispatchEvent(kv("ps-scroll-"+c)):e>0&&d.dispatchEvent(kv("ps-scroll-"+f)),r&&MH(t,l)),t.reach[l]&&(e||a)&&d.dispatchEvent(kv("ps-"+l+"-reach-"+t.reach[l]))}function tr(t){return parseInt(t,10)||0}function BH(t){return Cu(t,"input,[contenteditable]")||Cu(t,"select,[contenteditable]")||Cu(t,"textarea,[contenteditable]")||Cu(t,"button,[contenteditable]")}function LH(t){var e=Zs(t);return tr(e.width)+tr(e.paddingLeft)+tr(e.paddingRight)+tr(e.borderLeftWidth)+tr(e.borderRightWidth)}var Rp={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function Lo(t){var e=t.element,n=Math.floor(e.scrollTop),r=e.getBoundingClientRect();t.containerWidth=Math.round(r.width),t.containerHeight=Math.round(r.height),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(Sk(e,vr.element.rail("x")).forEach(function(a){return Df(a)}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(Sk(e,vr.element.rail("y")).forEach(function(a){return Df(a)}),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=Ck(t,tr(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=tr((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=Ck(t,tr(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=tr(n*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),zH(e,t),t.scrollbarXActive?e.classList.add(vr.state.active("x")):(e.classList.remove(vr.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=t.isRtl===!0?t.contentWidth:0),t.scrollbarYActive?e.classList.add(vr.state.active("y")):(e.classList.remove(vr.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function Ck(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function zH(t,e){var n={width:e.railXWidth},r=Math.floor(t.scrollTop);e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-r:n.top=e.scrollbarXTop+r,ni(e.scrollbarXRail,n);var a={top:r,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?a.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:a.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?a.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth*2-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:a.left=e.scrollbarYLeft+t.scrollLeft,ni(e.scrollbarYRail,a),ni(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),ni(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}function UH(t){t.element,t.event.bind(t.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarYRail,"mousedown",function(e){var n=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top,r=n>t.scrollbarYTop?1:-1;t.element.scrollTop+=r*t.containerHeight,Lo(t),e.stopPropagation()}),t.event.bind(t.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarXRail,"mousedown",function(e){var n=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left,r=n>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=r*t.containerWidth,Lo(t),e.stopPropagation()})}function VH(t){Ek(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),Ek(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function Ek(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],s=e[4],o=e[5],u=e[6],l=e[7],c=e[8],f=t.element,d=null,h=null,m=null;function v(w){w.touches&&w.touches[0]&&(w[a]=w.touches[0].pageY),f[u]=d+m*(w[a]-h),U4(t,l),Lo(t),w.stopPropagation(),w.preventDefault()}function y(){V4(t,l),t[c].classList.remove(vr.state.clicking),t.event.unbind(t.ownerDocument,"mousemove",v)}function b(w,x){d=f[u],x&&w.touches&&(w[a]=w.touches[0].pageY),h=w[a],m=(t[r]-t[n])/(t[i]-t[o]),x?t.event.bind(t.ownerDocument,"touchmove",v):(t.event.bind(t.ownerDocument,"mousemove",v),t.event.once(t.ownerDocument,"mouseup",y),w.preventDefault()),t[c].classList.add(vr.state.clicking),w.stopPropagation()}t.event.bind(t[s],"mousedown",function(w){b(w)}),t.event.bind(t[s],"touchstart",function(w){b(w,!0)})}function WH(t){var e=t.element,n=function(){return Cu(e,":hover")},r=function(){return Cu(t.scrollbarX,":focus")||Cu(t.scrollbarY,":focus")};function a(i,s){var o=Math.floor(e.scrollTop);if(i===0){if(!t.scrollbarYActive)return!1;if(o===0&&s>0||o>=t.contentHeight-t.containerHeight&&s<0)return!t.settings.wheelPropagation}var u=e.scrollLeft;if(s===0){if(!t.scrollbarXActive)return!1;if(u===0&&i<0||u>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}t.event.bind(t.ownerDocument,"keydown",function(i){if(!(i.isDefaultPrevented&&i.isDefaultPrevented()||i.defaultPrevented)&&!(!n()&&!r())){var s=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(s){if(s.tagName==="IFRAME")s=s.contentDocument.activeElement;else for(;s.shadowRoot;)s=s.shadowRoot.activeElement;if(BH(s))return}var o=0,u=0;switch(i.which){case 37:i.metaKey?o=-t.contentWidth:i.altKey?o=-t.containerWidth:o=-30;break;case 38:i.metaKey?u=t.contentHeight:i.altKey?u=t.containerHeight:u=30;break;case 39:i.metaKey?o=t.contentWidth:i.altKey?o=t.containerWidth:o=30;break;case 40:i.metaKey?u=-t.contentHeight:i.altKey?u=-t.containerHeight:u=-30;break;case 32:i.shiftKey?u=t.containerHeight:u=-t.containerHeight;break;case 33:u=t.containerHeight;break;case 34:u=-t.containerHeight;break;case 36:u=t.contentHeight;break;case 35:u=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&o!==0||t.settings.suppressScrollY&&u!==0||(e.scrollTop-=u,e.scrollLeft+=o,Lo(t),a(o,u)&&i.preventDefault())}})}function qH(t){var e=t.element;function n(s,o){var u=Math.floor(e.scrollTop),l=e.scrollTop===0,c=u+e.offsetHeight===e.scrollHeight,f=e.scrollLeft===0,d=e.scrollLeft+e.offsetWidth===e.scrollWidth,h;return Math.abs(o)>Math.abs(s)?h=l||c:h=f||d,h?!t.settings.wheelPropagation:!0}function r(s){var o=s.deltaX,u=-1*s.deltaY;return(typeof o>"u"||typeof u>"u")&&(o=-1*s.wheelDeltaX/6,u=s.wheelDeltaY/6),s.deltaMode&&s.deltaMode===1&&(o*=10,u*=10),o!==o&&u!==u&&(o=0,u=s.wheelDelta),s.shiftKey?[-u,-o]:[o,u]}function a(s,o,u){if(!Rp.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(s))return!1;for(var l=s;l&&l!==e;){if(l.classList.contains(vr.element.consuming))return!0;var c=Zs(l);if(u&&c.overflowY.match(/(scroll|auto)/)){var f=l.scrollHeight-l.clientHeight;if(f>0&&(l.scrollTop>0&&u<0||l.scrollTop<f&&u>0))return!0}if(o&&c.overflowX.match(/(scroll|auto)/)){var d=l.scrollWidth-l.clientWidth;if(d>0&&(l.scrollLeft>0&&o<0||l.scrollLeft<d&&o>0))return!0}l=l.parentNode}return!1}function i(s){var o=r(s),u=o[0],l=o[1];if(!a(s.target,u,l)){var c=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(l?e.scrollTop-=l*t.settings.wheelSpeed:e.scrollTop+=u*t.settings.wheelSpeed,c=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(u?e.scrollLeft+=u*t.settings.wheelSpeed:e.scrollLeft-=l*t.settings.wheelSpeed,c=!0):(e.scrollTop-=l*t.settings.wheelSpeed,e.scrollLeft+=u*t.settings.wheelSpeed),Lo(t),c=c||n(u,l),c&&!s.ctrlKey&&(s.stopPropagation(),s.preventDefault())}}typeof window.onwheel<"u"?t.event.bind(e,"wheel",i):typeof window.onmousewheel<"u"&&t.event.bind(e,"mousewheel",i)}function GH(t){if(!Rp.supportsTouch&&!Rp.supportsIePointer)return;var e=t.element;function n(m,v){var y=Math.floor(e.scrollTop),b=Math.ceil(e.scrollLeft),w=Math.abs(m),x=Math.abs(v);if(!t.settings.wheelPropagation)return!0;if(x>w){if(t.settings.suppressScrollY)return!1;if(v>0)return y!==0;if(v<0)return y<t.contentHeight-t.containerHeight}else if(w>x){if(t.settings.suppressScrollX)return!1;if(m>0)return b!==0;if(v<0)return b<t.contentWidth-t.containerWidth}return!0}function r(m,v){e.scrollTop-=v,e.scrollLeft-=m,Lo(t)}var a={},i=0,s={},o=null;function u(m){return m.targetTouches?m.targetTouches[0]:m}function l(m){return m.pointerType&&m.pointerType==="pen"&&m.buttons===0?!1:!!(m.targetTouches&&m.targetTouches.length===1||m.pointerType&&m.pointerType!=="mouse"&&m.pointerType!==m.MSPOINTER_TYPE_MOUSE)}function c(m){if(l(m)){var v=u(m);a.pageX=v.pageX,a.pageY=v.pageY,i=new Date().getTime(),o!==null&&clearInterval(o)}}function f(m,v,y){if(!e.contains(m))return!1;for(var b=m;b&&b!==e;){if(b.classList.contains(vr.element.consuming))return!0;var w=Zs(b);if(y&&w.overflowY.match(/(scroll|auto)/)){var x=b.scrollHeight-b.clientHeight;if(x>0&&(b.scrollTop>0&&y<0||b.scrollTop<x&&y>0))return!0}if(v&&w.overflowX.match(/(scroll|auto)/)){var S=b.scrollWidth-b.clientWidth;if(S>0&&(b.scrollLeft>0&&v<0||b.scrollLeft<S&&v>0))return!0}b=b.parentNode}return!1}function d(m){if(l(m)){var v=u(m),y={pageX:v.pageX,pageY:v.pageY},b=y.pageX-a.pageX,w=y.pageY-a.pageY;if(f(m.target,b,w))return;r(b,w),a=y;var x=new Date().getTime(),S=x-i;S>0&&(s.x=b/S,s.y=w/S,i=x),m.cancelable&&n(b,w)&&m.preventDefault()}}function h(){t.settings.swipeEasing&&(clearInterval(o),o=setInterval(function(){if(t.isInitialized){clearInterval(o);return}if(!s.x&&!s.y){clearInterval(o);return}if(Math.abs(s.x)<.01&&Math.abs(s.y)<.01){clearInterval(o);return}r(s.x*30,s.y*30),s.x*=.8,s.y*=.8},10))}Rp.supportsTouch?(t.event.bind(e,"touchstart",c),t.event.bind(e,"touchmove",d),t.event.bind(e,"touchend",h)):Rp.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",c),t.event.bind(e,"pointermove",d),t.event.bind(e,"pointerup",h)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",c),t.event.bind(e,"MSPointerMove",d),t.event.bind(e,"MSPointerUp",h)))}var HH=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},jH={"click-rail":UH,"drag-thumb":VH,keyboard:WH,wheel:qH,touch:GH},Ih=function(e,n){var r=this;if(n===void 0&&(n={}),typeof e=="string"&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add(vr.main),this.settings=HH();for(var a in n)this.settings[a]=n[a];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var i=function(){return e.classList.add(vr.state.focus)},s=function(){return e.classList.remove(vr.state.focus)};this.isRtl=Zs(e).direction==="rtl",this.isRtl===!0&&e.classList.add(vr.rtl),this.isNegativeScroll=function(){var l=e.scrollLeft,c=null;return e.scrollLeft=-1,c=e.scrollLeft<0,e.scrollLeft=l,c}(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new dd,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=Iv(vr.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=Iv(vr.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",i),this.event.bind(this.scrollbarX,"blur",s),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var o=Zs(this.scrollbarXRail);this.scrollbarXBottom=parseInt(o.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=tr(o.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=tr(o.borderLeftWidth)+tr(o.borderRightWidth),ni(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=tr(o.marginLeft)+tr(o.marginRight),ni(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=Iv(vr.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=Iv(vr.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",i),this.event.bind(this.scrollbarY,"blur",s),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var u=Zs(this.scrollbarYRail);this.scrollbarYRight=parseInt(u.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=tr(u.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?LH(this.scrollbarY):null,this.railBorderYWidth=tr(u.borderTopWidth)+tr(u.borderBottomWidth),ni(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=tr(u.marginTop)+tr(u.marginBottom),ni(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(l){return jH[l](r)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(l){return r.onScroll(l)}),Lo(this)};Ih.prototype.update=function(e){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,ni(this.scrollbarXRail,{display:"block"}),ni(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=tr(Zs(this.scrollbarXRail).marginLeft)+tr(Zs(this.scrollbarXRail).marginRight),this.railYMarginHeight=tr(Zs(this.scrollbarYRail).marginTop)+tr(Zs(this.scrollbarYRail).marginBottom),ni(this.scrollbarXRail,{display:"none"}),ni(this.scrollbarYRail,{display:"none"}),Lo(this),Fy(this,"top",0,!1,!0,e),Fy(this,"left",0,!1,!0,e),ni(this.scrollbarXRail,{display:""}),ni(this.scrollbarYRail,{display:""}))};Ih.prototype.onScroll=function(e){this.isAlive&&(Lo(this),Fy(this,"top",this.element.scrollTop-this.lastScrollTop),Fy(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};Ih.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),Df(this.scrollbarX),Df(this.scrollbarY),Df(this.scrollbarXRail),Df(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};Ih.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};function Uf(t){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uf(t)}var XH=["className","style","option","options","containerRef","onScrollY","onScrollX","onScrollUp","onScrollDown","onScrollLeft","onScrollRight","onYReachStart","onYReachEnd","onXReachStart","onXReachEnd","component","onSync","children"];function fN(){return fN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fN.apply(this,arguments)}function KH(t,e){if(t==null)return{};var n=YH(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function YH(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function ZH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ej(r.key),r)}}function JH(t,e,n){return e&&QH(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ej(t){var e=tj(t,"string");return Uf(e)=="symbol"?e:String(e)}function tj(t,e){if(Uf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function nj(t,e,n){return e=Ry(e),rj(t,q4()?Reflect.construct(e,n||[],Ry(t).constructor):e.apply(t,n))}function rj(t,e){if(e&&(Uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G4(t)}function q4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q4=function(){return!!t})()}function Ry(t){return Ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ry(t)}function G4(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dN(t,e)}function dN(t,e){return dN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},dN(t,e)}var hy={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(hy);var H4=function(t){aj(e,t);function e(n){var r;return ZH(this,e),r=nj(this,e,[n]),r.handleRef=r.handleRef.bind(G4(r)),r._handlerByEvent={},r}return JH(e,[{key:"componentDidMount",value:function(){this.props.option&&console.warn('react-perfect-scrollbar: the "option" prop has been deprecated in favor of "options"'),this._ps=new Ih(this._container,this.props.options||this.props.option),this._updateEventHook(),this._updateClassName()}},{key:"componentDidUpdate",value:function(r){this._updateEventHook(r),this.updateScroll(),r.className!==this.props.className&&this._updateClassName()}},{key:"componentWillUnmount",value:function(){var r=this;Object.keys(this._handlerByEvent).forEach(function(a){var i=r._handlerByEvent[a];i&&r._container.removeEventListener(a,i,!1)}),this._handlerByEvent={},this._ps.destroy(),this._ps=null}},{key:"_updateEventHook",value:function(){var r=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(hy).forEach(function(i){var s=r.props[hy[i]],o=a[hy[i]];if(s!==o){if(o){var u=r._handlerByEvent[i];r._container.removeEventListener(i,u,!1),r._handlerByEvent[i]=null}if(s){var l=function(){return s(r._container)};r._container.addEventListener(i,l,!1),r._handlerByEvent[i]=l}}})}},{key:"_updateClassName",value:function(){var r=this.props.className,a=this._container.className.split(" ").filter(function(i){return i.match(/^ps([-_].+|)$/)}).join(" ");this._container&&(this._container.className="scrollbar-container".concat(r?" ".concat(r):"").concat(a?" ".concat(a):""))}},{key:"updateScroll",value:function(){var r=this.props.onSync;typeof r=="function"?r(this._ps):this._ps.update()}},{key:"handleRef",value:function(r){var a,i;this._container=r,(a=(i=this.props).containerRef)===null||a===void 0||a.call(i,r)}},{key:"render",value:function(){var r=this.props;r.className;var a=r.style;r.option,r.options,r.containerRef,r.onScrollY,r.onScrollX,r.onScrollUp,r.onScrollDown,r.onScrollLeft,r.onScrollRight,r.onYReachStart,r.onYReachEnd,r.onXReachStart,r.onXReachEnd;var i=r.component;r.onSync;var s=r.children,o=KH(r,XH),u=typeof i>"u"?"div":i;return Le.createElement(u,fN({style:a,ref:this.handleRef},o),s)}}]),e}(bn.Component);function Zp(t){"@babel/helpers - typeof";return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zp(t)}var ij=["className","variant","children"];function pN(){return pN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pN.apply(this,arguments)}function sj(t,e,n){return e=oj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oj(t){var e=uj(t,"string");return Zp(e)=="symbol"?e:String(e)}function uj(t,e){if(Zp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lj(t,e){if(t==null)return{};var n=cj(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cj(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var Dk=function(e){var n=e.className,r=n===void 0?void 0:n,a=e.variant,i=a===void 0?"default":a,s=e.children,o=lj(e,ij),u="".concat(Rt,"-loader"),l=Le.Children.count(s)>0?"".concat(u,"--content"):"";return Le.createElement("div",pN({},o,{className:on(u,l,sj({},"".concat(u,"--variant-").concat(i),i!=="default"),r),role:"status"}),s)};function Qp(t){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qp(t)}var fj=["className","children","blur","grayscale"];function hN(){return hN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hN.apply(this,arguments)}function Tk(t,e,n){return e=dj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dj(t){var e=pj(t,"string");return Qp(e)=="symbol"?e:String(e)}function pj(t,e){if(Qp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hj(t,e){if(t==null)return{};var n=mj(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mj(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var gj=function(e){var n=e.className,r=n===void 0?"":n,a=e.children,i=a===void 0?void 0:a,s=e.blur,o=s===void 0?!1:s,u=e.grayscale,l=u===void 0?!1:u,c=hj(e,fj),f="".concat(Rt,"-overlay"),d="".concat(f,"--blur"),h="".concat(f,"--grayscale");return Le.createElement("div",hN({},c,{className:on(f,Tk({},d,o),Tk({},h,l),r)}),Le.createElement("div",{className:"".concat(f,"__content")},i))},vj=["sender","sentTime","children","className"];function mN(){return mN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mN.apply(this,arguments)}function yj(t,e){if(t==null)return{};var n=bj(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bj(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var lC=function(e){var n=e.sender,r=n===void 0?"":n,a=e.sentTime,i=a===void 0?"":a,s=e.children,o=s===void 0?void 0:s,u=e.className,l=yj(e,vj),c="".concat(Rt,"-message__header");return Le.createElement("div",mN({},l,{className:on(c,u)}),typeof o<"u"?o:Le.createElement(Le.Fragment,null,Le.createElement("div",{className:"".concat(Rt,"-message__sender-name")},r),Le.createElement("div",{className:"".concat(Rt,"-message__sent-time")},i)))};lC.displayName="Message.Header";var xj=["sender","sentTime","children","className"];function gN(){return gN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gN.apply(this,arguments)}function wj(t,e){if(t==null)return{};var n=Nj(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Nj(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var cC=function(e){var n=e.sender,r=n===void 0?"":n,a=e.sentTime,i=a===void 0?"":a,s=e.children,o=s===void 0?void 0:s,u=e.className,l=wj(e,xj),c="".concat(Rt,"-message__footer");return Le.createElement("div",gN({},l,{className:on(c,u)}),typeof o<"u"?o:Le.createElement(Le.Fragment,null,Le.createElement("div",{className:"".concat(Rt,"-message__sender-name")},r),Le.createElement("div",{className:"".concat(Rt,"-message__sent-time")},i)))};cC.displayName="Message.Footer";var fC=function(e){var n=e.children,r=e.className,a="".concat(Rt,"-message__custom-content");return Le.createElement("div",{className:on(a,r)},n)};fC.displayName="Message.CustomContent";var My=function(e){var n=e.src,r=e.width,a=e.height,i=e.alt,s=e.className,o="".concat(Rt,"-message__image-content"),u={width:typeof r=="number"?"".concat(r,"px"):typeof r=="string"?r:void 0,height:typeof a=="number"?"".concat(a,"px"):typeof a=="string"?a:void 0};return Le.createElement("div",{className:on(o,s)},Le.createElement("img",{src:n,style:u,alt:i}))};My.displayName="Message.ImageContent";var Py=function(e){var n=e.html,r=e.className,a="".concat(Rt,"-message__html-content"),i=function(){return{__html:n}};return Le.createElement("div",{className:on(a,r),dangerouslySetInnerHTML:i()})};Py.displayName="Message.HtmlContent";var By=function(e){var n=e.text,r=e.className,a=e.children,i="".concat(Rt,"-message__text-content"),s=a??n;return Le.createElement("div",{className:on(i,r)},s)};By.displayName="Message.TextContent";var Sj=["model","avatarSpacer","avatarPosition","type","payload","children","className"];function vN(){return vN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vN.apply(this,arguments)}function $k(t,e,n){return e=Cj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cj(t){var e=Ej(t,"string");return Vf(e)=="symbol"?e:String(e)}function Ej(t,e){if(Vf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vf(t){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vf(t)}function Dj(t,e){return Ij(t)||Aj(t,e)||$j(t,e)||Tj()}function Tj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $j(t,e){if(t){if(typeof t=="string")return Ak(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ak(t,e)}}function Ak(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Aj(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,s,o=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function Ij(t){if(Array.isArray(t))return t}function kj(t,e){if(t==null)return{};var n=_j(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _j(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var Yu=function(e){var n,r,a=e.model,i=a.message,s=i===void 0?"":i,o=a.sentTime,u=o===void 0?"":o,l=a.sender,c=l===void 0?"":l,f=a.direction,d=f===void 0?1:f,h=a.position,m=a.type,v=a.payload,y=e.avatarSpacer,b=y===void 0?!1:y,w=e.avatarPosition,x=w===void 0?void 0:w,S=e.type,C=S===void 0?"html":S,E=e.payload,A=e.children,k=e.className,T=kj(e,Sj),I="".concat(Rt,"-message"),$=Th(A,[Dh,lC,cC,Py,By,My,fC]),O=Dj($,7),B=O[0],z=O[1],L=O[2],F=O[3],R=O[4],W=O[5],M=O[6],j=function(){if(d===0||d==="incoming")return"".concat(I,"--incoming");if(d===1||d==="outgoing")return"".concat(I,"--outgoing")}(),q=function(te){var se="".concat(I,"--avatar-");if(te===0||te==="top-left"||te==="tl")return"".concat(se,"tl");if(te===1||te==="top-right"||te==="tr")return"".concat(se,"tr");if(te===2||te==="bottom-right"||te==="br")return"".concat(se,"br");if(te===3||te==="bottom-left"||te==="bl")return"".concat(se,"bl");if(te===4||te==="center-left"||te==="cl")return"".concat(se,"cl");if(te===5||te==="center-right"||te==="cr")return"".concat(se,"cr")}(x),H=function(te){var se="".concat(Rt,"-message--");if(te==="single"||te===0)return"".concat(se,"single");if(te==="first"||te===1)return"".concat(se,"first");if(te==="normal"||te===2)return"";if(te==="last"||te===3)return"".concat(se,"last")}(h),G=function(){return(c==null?void 0:c.length)>0&&(u==null?void 0:u.length)>0?"".concat(c,": ").concat(u):(c==null?void 0:c.length)>0&&(typeof u>"u"||(u==null?void 0:u.length)===0)?c:null}(),ne=(n=(r=F??R)!==null&&r!==void 0?r:W)!==null&&n!==void 0?n:M,ue=ne??function(){var te=m??C,se=v??s,J=se??E,K=Vf(J)==="object"?p4(J):"";if(te==="html"&&K!=="Message.CustomContent")return Le.createElement(Py,{html:J});if(te==="text")return Le.createElement(By,{text:J});if(te==="image")return Le.createElement(My,J);if(te==="custom"||K==="Message.CustomContent")return J}();return Le.createElement("section",vN({},T,{"aria-label":G,className:on(I,j,$k({},"".concat(I,"--avatar-spacer"),b),H,q,k)},$k({},"data-".concat(Rt,"-message"),"")),typeof B<"u"&&Le.createElement("div",{className:"".concat(I,"__avatar")},B),Le.createElement("div",{className:"".concat(I,"__content-wrapper")},z,Le.createElement("div",{className:"".concat(I,"__content")},ue),L))};Yu.Header=lC;Yu.HtmlContent=Py;Yu.TextContent=By;Yu.ImageContent=My;Yu.CustomContent=fC;Yu.Footer=cC;var Oj=["children","className"];function yN(){return yN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yN.apply(this,arguments)}function Fj(t,e){if(t==null)return{};var n=Rj(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Rj(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var dC=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,i=Fj(e,Oj),s="".concat(Rt,"-message-group__header");return Le.createElement("div",yN({},i,{className:on(s,a)}),r)};dC.displayName="MessageGroup.Header";var Mj=["children","className"];function bN(){return bN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bN.apply(this,arguments)}function Pj(t,e){if(t==null)return{};var n=Bj(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Bj(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var pC=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,i=Pj(e,Mj),s="".concat(Rt,"-message-group__footer");return Le.createElement("div",bN({},i,{className:on(s,a)}),r)};pC.displayName="MessageGroup.Footer";var Lj=["children","className"];function xN(){return xN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xN.apply(this,arguments)}function zj(t,e){if(t==null)return{};var n=Uj(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Uj(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var hC=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,i=zj(e,Lj),s="".concat(Rt,"-message-group");return Le.createElement("div",xN({},i,{className:on("".concat(s,"__messages"),a)}),r)};hC.displayName="MessageGroup.Messages";function Jp(t){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(t)}var Vj=["direction","avatarPosition","sender","sentTime","children","className"];function wN(){return wN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wN.apply(this,arguments)}function Wj(t,e,n){return e=qj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qj(t){var e=Gj(t,"string");return Jp(e)=="symbol"?e:String(e)}function Gj(t,e){if(Jp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hj(t,e){return Yj(t)||Kj(t,e)||Xj(t,e)||jj()}function jj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xj(t,e){if(t){if(typeof t=="string")return Ik(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ik(t,e)}}function Ik(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kj(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,s,o=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function Yj(t){if(Array.isArray(t))return t}function Zj(t,e){if(t==null)return{};var n=Qj(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Qj(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var V0=function(e){var n=e.direction,r=n===void 0?"incoming":n,a=e.avatarPosition,i=a===void 0?void 0:a,s=e.sender,o=s===void 0?"":s,u=e.sentTime,l=u===void 0?"":u,c=e.children,f=e.className,d=Zj(e,Vj),h="".concat(Rt,"-message-group"),m=function(){if(r===0||r==="incoming")return"".concat(h,"--incoming");if(r===1||r==="outgoing")return"".concat(h,"--outgoing")}(),v=function(){var A="".concat(h,"--avatar-");if(typeof i=="string"&&(i==="tl"||i==="top-left"||i==="tr"||i==="top-right"||i==="bl"||i==="bottom-right"||i==="br"||i==="bottom-right"||i==="cl"||i==="center-left"||i==="cr"||i==="center-right"))return"".concat(A).concat(i)}(),y=Th(c,[Dh,dC,pC,hC]),b=Hj(y,4),w=b[0],x=b[1],S=b[2],C=b[3],E=function(){return o.length>0&&l.length>0?"".concat(o,": ").concat(l):o.length>0&&l.length===0?o:null}();return Le.createElement("section",wN({"aria-label":E},d,{className:on(h,m,v,f)},Wj({},"data-".concat(Rt,"-message-group"),"")),typeof w<"u"&&Le.createElement("div",{className:"".concat(h,"__avatar")},w),Le.createElement("div",{className:"".concat(h,"__content")},x,C,S))};V0.Header=dC;V0.Footer=pC;V0.Messages=hC;var Jj=["content","as","children","className"];function NN(){return NN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NN.apply(this,arguments)}function eX(t,e){if(t==null)return{};var n=tX(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var nX=function(e){var n=e.content,r=n===void 0?void 0:n,a=e.as,i=a===void 0?"div":a,s=e.children,o=s===void 0?void 0:s,u=e.className,l=eX(e,Jj),c="".concat(Rt,"-message-separator"),f=function(){return typeof i=="string"&&i.length>0?i:"div"}();return Le.createElement(f,NN({},l,{className:on(c,u)}),Lq(o)===!0?r:o)},rX=["className","children"];function SN(){return SN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SN.apply(this,arguments)}function aX(t,e){if(t==null)return{};var n=iX(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var W0=function(e){var n=e.className,r=e.children,a=aX(e,rX);return Le.createElement("div",SN({},a,{className:n}),r)};W0.displayName="MessageList.Content";var sX=["children","typingIndicator","loading","loadingMore","loadingMorePosition","onYReachStart","onYReachEnd","className","disableOnYReachWhenNoScroll","scrollBehavior","autoScrollToBottom","autoScrollToBottomOnMount"];function Wf(t){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wf(t)}function eh(){return eh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eh.apply(this,arguments)}function oX(t,e){return fX(t)||cX(t,e)||lX(t,e)||uX()}function uX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lX(t,e){if(t){if(typeof t=="string")return kk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kk(t,e)}}function kk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cX(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,s,o=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function fX(t){if(Array.isArray(t))return t}function dX(t,e){if(t==null)return{};var n=pX(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function hX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,X4(r.key),r)}}function gX(t,e,n){return e&&mX(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vX(t,e,n){return e=Ly(e),yX(t,j4()?Reflect.construct(e,n||[],Ly(t).constructor):e.apply(t,n))}function yX(t,e){if(e&&(Wf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bf(t)}function j4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j4=function(){return!!t})()}function Ly(t){return Ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ly(t)}function bf(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bX(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CN(t,e)}function CN(t,e){return CN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},CN(t,e)}function Rl(t,e,n){return e=X4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X4(t){var e=xX(t,"string");return Wf(e)=="symbol"?e:String(e)}function xX(t,e){if(Wf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mC=function(t){bX(e,t);function e(n){var r;return hX(this,e),r=vX(this,e,[n]),Rl(bf(r),"handleResize",function(){r.containerRef.current.clientHeight<r.lastClientHeight&&r.scrollToEnd(r.props.scrollBehavior),r.scrollRef.current.updateScroll()}),Rl(bf(r),"handleContainerResize",function(){r.resizeTicking===!1&&(window.requestAnimationFrame(function(){var a=r.containerRef.current;if(a){var i=a.clientHeight,s=i-r.lastClientHeight;s>=1?r.preventScrollTop===!1&&(a.scrollTop=Math.round(a.scrollTop)-s):a.scrollTop=a.scrollTop-s,r.lastClientHeight=a.clientHeight,r.scrollRef.current.updateScroll()}r.resizeTicking=!1}),r.resizeTicking=!0)}),Rl(bf(r),"isSticked",function(){var a=r.containerRef.current;return a.scrollHeight===Math.round(a.scrollTop+a.clientHeight)}),Rl(bf(r),"handleScroll",function(){r.scrollTicking===!1&&(window.requestAnimationFrame(function(){r.noScroll===!1?r.preventScrollTop=r.isSticked():r.noScroll=!1,r.scrollTicking=!1}),r.scrollTicking=!0)}),Rl(bf(r),"getLastMessageOrGroup",function(){var a=r.containerRef.current.querySelector("[data-".concat(Rt,"-message-list]>[data-").concat(Rt,"-message]:last-of-type,[data-").concat(Rt,"-message-list]>[data-").concat(Rt,"-message-group]:last-of-type")),i=a==null?void 0:a.querySelector("[data-".concat(Rt,"-message]:last-of-type"));return{lastElement:a,lastMessageInGroup:i}}),r.scrollPointRef=Le.createRef(),r.containerRef=Le.createRef(),r.scrollRef=Le.createRef(),r.lastClientHeight=0,r.preventScrollTop=!1,r.resizeObserver=void 0,r.scrollTicking=!1,r.resizeTicking=!1,r.noScroll=void 0,r}return gX(e,[{key:"getSnapshotBeforeUpdate",value:function(){var r=this.containerRef.current,a=Math.round(r.scrollTop+r.clientHeight),i=r.scrollHeight===a||r.scrollHeight+1===a||r.scrollHeight-1===a;return{sticky:i,clientHeight:r.clientHeight,scrollHeight:r.scrollHeight,lastMessageOrGroup:this.getLastMessageOrGroup(),diff:r.scrollHeight-r.scrollTop}}},{key:"componentDidMount",value:function(){this.props.autoScrollToBottomOnMount===!0&&this.scrollToEnd(this.props.scrollBehavior),this.lastClientHeight=this.containerRef.current.clientHeight,window.addEventListener("resize",this.handleResize),typeof window.ResizeObserver=="function"&&(this.resizeObserver=new ResizeObserver(this.handleContainerResize),this.resizeObserver.observe(this.containerRef.current)),this.containerRef.current.addEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(r,a,i){var s=this.props.autoScrollToBottom;if(typeof i<"u"){var o=this.containerRef.current,u=this.getLastMessageOrGroup(),l=u.lastElement,c=u.lastMessageInGroup;if(l===i.lastMessageOrGroup.lastElement&&(typeof c>"u"||c===i.lastMessageOrGroup.lastMessageInGroup)&&(o.scrollTop=o.scrollHeight-i.diff+(this.lastClientHeight-o.clientHeight)),i.sticky===!0)s===!0&&this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0;else if(i.clientHeight<this.lastClientHeight){var f=o.scrollTop+this.lastClientHeight;o.scrollHeight===f||o.scrollHeight+1===f||o.scrollHeight-1===f?s===!0&&(this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0):this.preventScrollTop=!1}else this.preventScrollTop=!1,l===i.lastMessageOrGroup.lastElement&&(typeof c>"u"||c===i.lastMessageOrGroup.lastMessageInGroup)&&o.scrollTop===0&&o.scrollHeight>i.scrollHeight&&(o.scrollTop=o.scrollHeight-i.scrollHeight);this.lastClientHeight=i.clientHeight}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),typeof this.resizeObserver<"u"&&this.resizeObserver.disconnect(),this.containerRef.current.removeEventListener("scroll",this.handleScroll)}},{key:"scrollToEnd",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollBehavior,a=this.containerRef.current,i=this.scrollPointRef.current,s=a.getBoundingClientRect(),o=i.getBoundingClientRect(),u=o.top+a.scrollTop-s.top;a.scrollBy?a.scrollBy({top:u,behavior:r}):a.scrollTop=u,this.lastClientHeight=a.clientHeight,this.noScroll=!0}},{key:"render",value:function(){var r=this,a=this.props,i=a.children,s=a.typingIndicator,o=a.loading,u=a.loadingMore,l=a.loadingMorePosition,c=a.onYReachStart,f=a.onYReachEnd,d=a.className,h=a.disableOnYReachWhenNoScroll;a.scrollBehavior,a.autoScrollToBottom,a.autoScrollToBottomOnMount;var m=dX(a,sX),v="".concat(Rt,"-message-list"),y=Th(i,[W0]),b=oX(y,1),w=b[0];return Le.createElement("div",eh({},m,{className:on(v,d)}),u&&Le.createElement("div",{className:on("".concat(v,"__loading-more"),Rl({},"".concat(v,"__loading-more--bottom"),l==="bottom"))},Le.createElement(Dk,null)),o&&Le.createElement(gj,null,Le.createElement(Dk,null)),Le.createElement(H4,eh({onYReachStart:c,onYReachEnd:f,onSync:function(S){return S.update(h)},className:"".concat(v,"__scroll-wrapper"),ref:this.scrollRef,containerRef:function(S){return r.containerRef.current=S},options:{suppressScrollX:!0}},Rl({},"data-".concat(Rt,"-message-list"),""),{style:{overscrollBehaviorY:"none",overflowAnchor:"auto",touchAction:"none"}}),w||i,Le.createElement("div",{className:"".concat(v,"__scroll-to"),ref:this.scrollPointRef})),typeof s<"u"&&Le.createElement("div",{className:"".concat(v,"__typing-indicator-container")},s))}}]),e}(Le.Component);mC.displayName="MessageList";function wX(t,e){var n=bn.useRef(),r=function(i){return n.current.scrollToEnd(i)};return bn.useImperativeHandle(e,function(){return{scrollToBottom:r}}),Le.createElement(mC,eh({ref:n},t))}var pd=bn.forwardRef(wX);pd.propTypes={children:h4([Yu,V0,nX,W0]),typingIndicator:at.node,loading:at.bool,loadingMore:at.bool,loadingMorePosition:at.oneOf(["top","bottom"]),onYReachStart:at.func,onYReachEnd:at.func,disableOnYReachWhenNoScroll:at.bool,autoScrollToBottom:at.bool,autoScrollToBottomOnMount:at.bool,scrollBehavior:at.oneOf(["auto","smooth"]),className:at.string};pd.defaultProps={typingIndicator:void 0,loading:!1,loadingMore:!1,loadingMorePosition:"top",disableOnYReachWhenNoScroll:!1,autoScrollToBottom:!0,autoScrollToBottomOnMount:!0,scrollBehavior:"auto"};mC.defaultProps=pd.defaultProps;pd.Content=W0;function qf(t){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qf(t)}function NX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Y4(r.key),r)}}function CX(t,e,n){return e&&SX(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function EX(t,e,n){return e=zy(e),DX(t,K4()?Reflect.construct(e,n||[],zy(t).constructor):e.apply(t,n))}function DX(t,e){if(e&&(qf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bl(t)}function K4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K4=function(){return!!t})()}function zy(t){return zy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zy(t)}function Bl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TX(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EN(t,e)}function EN(t,e){return EN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},EN(t,e)}function p2(t,e,n){return e=Y4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y4(t){var e=$X(t,"string");return qf(e)=="symbol"?e:String(e)}function $X(t,e){if(qf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AX=function(e,n){var r=document.activeElement===e,a=document.createTextNode("");if(e.appendChild(a),a!==null&&a.nodeValue!==null&&(r||n)){var i=window.getSelection();if(i!==null){var s=document.createRange();s.setStart(a,a.nodeValue.length),s.collapse(!0),i.removeAllRanges(),i.addRange(s)}}},IX=function(t){TX(e,t);function e(n){var r;return NX(this,e),r=EX(this,e,[n]),p2(Bl(r),"innerHTML",function(){var a=Bl(r),i=a.props.value;return{__html:typeof i<"u"?i:""}}),p2(Bl(r),"handleKeyPress",function(a){var i=Bl(r),s=i.props.onKeyPress;s==null||s(a)}),p2(Bl(r),"handleInput",function(a){var i=Bl(r),s=i.props.onChange,o=a.target;s==null||s(o.innerHTML,o.textContent,o.innerText)}),r.msgRef=Le.createRef(),r}return CX(e,[{key:"focus",value:function(){typeof this.msgRef.current<"u"&&this.msgRef.current.focus()}},{key:"componentDidMount",value:function(){this.props.autoFocus===!0&&this.msgRef.current.focus()}},{key:"shouldComponentUpdate",value:function(r){var a=this.msgRef,i=this.props,s=i.placeholder,o=i.disabled,u=i.activateAfterChange;return typeof a.current>"u"||r.value!==a.current.innerHTML?!0:s!==r.placeholder||o!==r.disabled||u!==r.activateAfterChange}},{key:"componentDidUpdate",value:function(){var r=this.msgRef,a=this.props,i=a.value,s=a.activateAfterChange;i!==r.current.innerHTML&&(r.current.innerHTML=typeof i=="string"?i:""),AX(r.current,s)}},{key:"render",value:function(){var r=this.msgRef,a=this.handleInput,i=this.handleKeyPress,s=this.innerHTML,o=this.props,u=o.placeholder,l=o.disabled,c=o.className,f=typeof u=="string"?u:"";return Le.createElement("div",{ref:r,className:c,contentEditable:l===!1,disabled:l,"data-placeholder":f,onInput:a,onKeyPress:i,dangerouslySetInnerHTML:s()})}}]),e}(bn.Component);function Gf(t){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gf(t)}var kX=["fancyScroll","children","forwardedRef"],_X=["value","onSend","onChange","autoFocus","placeholder","fancyScroll","className","activateAfterChange","disabled","sendDisabled","sendOnReturnDisabled","attachDisabled","sendButton","attachButton","onAttachClick"];function OX(t,e,n){return e=Q4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DN(t,e){return PX(t)||MX(t,e)||RX(t,e)||FX()}function FX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RX(t,e){if(t){if(typeof t=="string")return _k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _k(t,e)}}function _k(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function MX(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,s,o=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function PX(t){if(Array.isArray(t))return t}function Af(){return Af=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Af.apply(this,arguments)}function Z4(t,e){if(t==null)return{};var n=BX(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function BX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function LX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q4(r.key),r)}}function UX(t,e,n){return e&&zX(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Q4(t){var e=VX(t,"string");return Gf(e)=="symbol"?e:String(e)}function VX(t,e){if(Gf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WX(t,e,n){return e=Uy(e),qX(t,J4()?Reflect.construct(e,n||[],Uy(t).constructor):e.apply(t,n))}function qX(t,e){if(e&&(Gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GX(t)}function GX(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J4=function(){return!!t})()}function Uy(t){return Uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uy(t)}function HX(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TN(t,e)}function TN(t,e){return TN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},TN(t,e)}function jX(){var t=function(e){HX(n,e);function n(){return LX(this,n),WX(this,n,arguments)}return UX(n,[{key:"render",value:function(){var a=this.props,i=a.fancyScroll,s=a.children,o=a.forwardedRef,u=Z4(a,kX);return Le.createElement(Le.Fragment,null,i===!0&&Le.createElement(H4,Af({ref:function(c){return o.current=c}},u,{options:{suppressScrollX:!0}}),s),i===!1&&Le.createElement("div",Af({ref:o},u),s))}}]),n}(bn.Component);return Le.forwardRef(function(e,n){return Le.createElement(t,Af({forwardedRef:n},e))})}var XX=jX(),Ok=function(e,n){var r=typeof e<"u"?e:n,a=bn.useState(r),i=DN(a,2),s=i[0],o=i[1],u=typeof e<"u"?e:s;return[u,function(l){o(l)}]};function KX(t,e){var n=t.value,r=n===void 0?void 0:n,a=t.onSend,i=a===void 0?py:a,s=t.onChange,o=s===void 0?py:s,u=t.autoFocus,l=u===void 0?!1:u,c=t.placeholder,f=c===void 0?"":c,d=t.fancyScroll,h=d===void 0?!0:d,m=t.className,v=t.activateAfterChange,y=v===void 0?!1:v,b=t.disabled,w=b===void 0?!1:b,x=t.sendDisabled,S=t.sendOnReturnDisabled,C=S===void 0?!1:S,E=t.attachDisabled,A=E===void 0?!1:E,k=t.sendButton,T=k===void 0?!0:k,I=t.attachButton,$=I===void 0?!0:I,O=t.onAttachClick,B=O===void 0?py:O,z=Z4(t,_X),L=bn.useRef(),F=bn.useRef(),R=Ok(r,""),W=DN(R,2),M=W[0],j=W[1],q=Ok(x,!0),H=DN(q,2),G=H[0],ne=H[1],ue=function(){typeof F.current<"u"&&F.current.focus()};bn.useImperativeHandle(e,function(){return{focus:ue}}),bn.useEffect(function(){l===!0&&ue()},[]),bn.useEffect(function(){typeof L.current.updateScroll=="function"&&L.current.updateScroll()});var te=function(){var Se=F.current.msgRef.current;return[Se.textContent,Se.innerText,Se.cloneNode(!0).childNodes]},se=function(){if(M.length>0){r===void 0&&j(""),typeof x>"u"&&ne(!0);var Se=te();i(M,Se[0],Se[1],Se[2])}},J=function(Se){Se.key==="Enter"&&Se.shiftKey===!1&&C===!1&&(Se.preventDefault(),se())},K=function(Se,Ee,Z){j(Se),typeof x>"u"&&ne(Ee.length===0),typeof L.current.updateScroll=="function"&&L.current.updateScroll();var ie=te();o(Se,Ee,Z,ie[2])},ae="".concat(Rt,"-message-input"),pe=typeof f=="string"?f:"";return Le.createElement("div",Af({},z,{className:on(ae,OX({},"".concat(ae,"--disabled"),w),m)}),$===!0&&Le.createElement("div",{className:"".concat(ae,"__tools")},Le.createElement(yH,{onClick:B,disabled:w===!0||A===!0})),Le.createElement("div",{className:"".concat(ae,"__content-editor-wrapper")},Le.createElement(XX,{fancyScroll:h,ref:L,className:"".concat(ae,"__content-editor-container")},Le.createElement(IX,{ref:F,className:"".concat(ae,"__content-editor"),disabled:w,placeholder:pe,onKeyPress:J,onChange:K,activateAfterChange:y,value:M}))),T===!0&&Le.createElement("div",{className:"".concat(ae,"__tools")},Le.createElement(dH,{onClick:se,disabled:w===!0||G===!0})))}var q0=bn.forwardRef(KX);q0.displayName="MessageInput";q0.propTypes={value:at.string,placeholder:at.string,disabled:at.bool,sendOnReturnDisabled:at.bool,sendDisabled:at.bool,fancyScroll:at.bool,activateAfterChange:at.bool,autoFocus:at.bool,onChange:at.func,onSend:at.func,className:at.string,sendButton:at.bool,attachButton:at.bool,attachDisabled:at.bool,onAttachClick:at.func};var YX=["className","children"];function $N(){return $N=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$N.apply(this,arguments)}function ZX(t,e){if(t==null)return{};var n=QX(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function QX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var eP=function(e){var n=e.className,r=e.children,a=ZX(e,YX),i="".concat(Rt,"-input-toolbox");return Le.createElement("div",$N({},a,{className:on(i,n)}),r)};eP.displayName="InputToolbox";var JX=["children","className"];function AN(){return AN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AN.apply(this,arguments)}function eK(t,e){return aK(t)||rK(t,e)||nK(t,e)||tK()}function tK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nK(t,e){if(t){if(typeof t=="string")return Fk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fk(t,e)}}function Fk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rK(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,s,o=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function aK(t){if(Array.isArray(t))return t}function iK(t,e){if(t==null)return{};var n=sK(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var oK=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,i=iK(e,JX),s="".concat(Rt,"-chat-container"),o=Th(r,[$h,pd,q0,eP]),u=eK(o,4),l=u[0],c=u[1],f=u[2],d=u[3];return Le.createElement("div",AN({},i,{className:on(s,a)}),l,c,f,d)},Yl="".concat(Rt,"-conversation");function th(t){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},th(t)}var uK=["children","className","visible"];function IN(){return IN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IN.apply(this,arguments)}function lK(t,e,n){return e=cK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cK(t){var e=fK(t,"string");return th(e)=="symbol"?e:String(e)}function fK(t,e){if(th(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(th(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dK(t,e){if(t==null)return{};var n=pK(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var hK=function(e){var n=e.children,r=e.className,a=e.visible,i=dK(e,uK);return Le.createElement("div",IN({},i,{className:on("".concat(Yl,"__operations"),lK({},"".concat(Yl,"__operations--visible"),a),r)}),Le.Children.count(n)>0?n:Le.createElement(io,{icon:sH.faEllipsisV}))};hK.displayName="Conversation.Operations";var mK=["lastSenderName","info","name","children","className"];function kN(){return kN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kN.apply(this,arguments)}function _N(t){"@babel/helpers - typeof";return _N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_N(t)}function gK(t,e){if(t==null)return{};var n=vK(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var yK=function(e){var n=e.name;return Le.createElement(Le.Fragment,null,Le.createElement("div",{className:"".concat(Yl,"__last-sender")},n),":")},bK=function(e){var n=e.info;return Le.createElement("div",{className:"".concat(Yl,"__info-content")},n)},xK=function(e){var n=e.lastSenderName,r=e.info,a=e.name,i=e.children,s=e.className,o=gK(e,mK),u=_N(n);return Le.createElement("div",kN({},o,{className:on("".concat(Yl,"__content"),s)}),Le.Children.count(i)>0?i:Le.createElement(Le.Fragment,null,Le.createElement("div",{className:"".concat(Yl,"__name")},a),Le.createElement("div",{className:"".concat(Yl,"__info")},u!=="undefined"?Le.createElement(Le.Fragment,null,u==="string"?Le.createElement(yK,{name:n}):n," "):null,typeof r<"u"&&Le.createElement(bK,{info:r}))))};xK.displayName="Conversation.Content";function nh(t){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nh(t)}var wK=["responsive","children","className"];function ON(){return ON=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ON.apply(this,arguments)}function NK(t,e,n){return e=SK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SK(t){var e=CK(t,"string");return nh(e)=="symbol"?e:String(e)}function CK(t,e){if(nh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EK(t,e){if(t==null)return{};var n=DK(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var TK=function(e){var n=e.responsive,r=n===void 0?!1:n,a=e.children,i=a===void 0?void 0:a,s=e.className,o=EK(e,wK),u="".concat(Rt,"-main-container");return Le.createElement("div",ON({},o,{className:on(u,NK({},"".concat(u,"--responsive"),r),s)}),i)};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var $K={prefix:"fas",iconName:"search",icon:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"]},AK={prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]};function rh(t){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rh(t)}var IK=["placeholder","value","onChange","onClearClick","className","disabled"];function FN(){return FN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FN.apply(this,arguments)}function Rk(t,e,n){return e=kK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kK(t){var e=_K(t,"string");return rh(e)=="symbol"?e:String(e)}function _K(t,e){if(rh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mk(t,e){return MK(t)||RK(t,e)||FK(t,e)||OK()}function OK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FK(t,e){if(t){if(typeof t=="string")return Pk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pk(t,e)}}function Pk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function RK(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,s,o=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function MK(t){if(Array.isArray(t))return t}function PK(t,e){if(t==null)return{};var n=BK(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function BK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var LK=function(e,n){return typeof n>"u"?bn.useState(e):[n,function(){}]};function zK(t,e){var n=t.placeholder,r=n===void 0?"":n,a=t.value,i=a===void 0?void 0:a,s=t.onChange,o=s===void 0?function(){}:s,u=t.onClearClick,l=u===void 0?function(){}:u,c=t.className,f=t.disabled,d=f===void 0?!1:f,h=PK(t,IK),m="".concat(Rt,"-search"),v=bn.useMemo(function(){return typeof i<"u"},[]),y=LK("",i),b=Mk(y,2),w=b[0],x=b[1],S=bn.useState(v?w.length>0:!1),C=Mk(S,2),E=C[0],A=C[1];if(v!==typeof i<"u")throw"Search: Changing from controlled to uncontrolled component and vice versa is not allowed";var k=bn.useRef(void 0),T=function(){typeof k.current<"u"&&k.current.focus()};bn.useImperativeHandle(e,function(){return{focus:T}});var I=function(B){var z=B.target.value;A(z.length>0),v===!1&&x(z),o(z)},$=function(){v===!1&&x(""),A(!1),l()};return Le.createElement("div",FN({},h,{className:on(m,Rk({},"".concat(m,"--disabled"),d),c)}),Le.createElement(io,{icon:$K,className:"".concat(m,"__search-icon")}),Le.createElement("input",{ref:k,type:"text",className:"".concat(m,"__input"),placeholder:r,onChange:I,disabled:d,value:w}),Le.createElement(io,{icon:AK,className:on("".concat(m,"__clear-icon"),Rk({},"".concat(m,"__clear-icon--active"),E)),onClick:$}))}var tP=bn.forwardRef(zK);tP.displayName="Search";tP.propTypes={placeholder:at.string,value:at.string,onChange:at.func,onClearClick:at.func,className:at.string,disabled:at.bool};function ah(t){"@babel/helpers - typeof";return ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ah(t)}var UK=["className","children","size","selected","onChange","itemsTabIndex"];function RN(){return RN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RN.apply(this,arguments)}function VK(t,e,n){return e=WK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WK(t){var e=qK(t,"string");return ah(e)=="symbol"?e:String(e)}function qK(t,e){if(ah(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ah(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GK(t,e){if(t==null)return{};var n=HK(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function HK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function jK(t,e){var n=t.className,r=t.children,a=t.size,i=t.selected,s=t.onChange,o=s===void 0?py:s,u=t.itemsTabIndex,l=GK(t,UK),c="".concat(Rt,"-status-list"),f=bn.useRef();bn.useImperativeHandle(e,function(){return{focus:function(m){var v=Array.from(f.current.querySelectorAll("li")),y=v.filter(function(b){return b.parentNode===f.current});typeof y[m]<"u"&&y[m].focus()}}});var d=u;return Le.createElement("ul",RN({ref:f},l,{className:on(c,n,VK({},"".concat(c,"--").concat(a),a))}),Le.Children.map(r,function(h){var m={};i&&(m.selected=h.props.status===i),o&&(m.onClick=function(b){o(h.props.status),h.onClick&&h.onClick(b)});var v=function(w){o&&w.key==="Enter"&&w.shiftKey===!1&&w.altKey===!1&&o(h.props.status)},y=function(){if(typeof d=="number")return d>0?d++:d}();return Le.createElement("li",{tabIndex:y,onKeyPress:v},Le.cloneElement(h,m))}))}var nP=bn.forwardRef(jK);nP.displayName="StatusList";nP.propTypes={children:h4([d4]),selected:at.oneOf(c4),size:at.oneOf(f4),itemsTabIndex:at.number,className:at.string,onChange:at.func};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XK=1e-7,KK=1e-4;class rP{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class gC{refCount(e){return Qa("refCount")}incRef(e){return Qa("incRef")}timerAvailable(){return!0}time(e){return Qa("time")}read(e){return Qa("read")}readSync(e){return Qa("readSync")}readToGPU(e,n){return Qa("readToGPU")}numDataIds(){return Qa("numDataIds")}disposeData(e,n){return Qa("disposeData")}write(e,n,r){return Qa("write")}move(e,n,r,a,i){return Qa("move")}createTensorFromGPUData(e,n,r){return Qa("createTensorFromGPUData")}memory(){return Qa("memory")}floatPrecision(){return Qa("floatPrecision")}epsilon(){return this.floatPrecision()===32?XK:KK}dispose(){return Qa("dispose")}}function Qa(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YK(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,xf(t,e,n)}function ec(t,e,n){return Math.max(t,Math.min(e,n))}function vC(t){return t%2===0?t:t+1}function xf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ZK(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function Y(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function mi(t,e,n=""){Y(un(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function hd(t){Y(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Oe(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function QK(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function un(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Hf(t){return t%1===0}function MN(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function If(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function Bk(t,e=a=>0,n,r){return new Promise((a,i)=>{let s=0;const o=()=>{if(t()){a();return}s++;const u=e(s);if(n!=null&&s>=n){i();return}r!=null?r(o,u):setTimeout(o,u)};o()})}function aP(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const a=t.slice();return a[r]=e/n,a}function tn(t,e){const n=e.length;return t=t==null?e.map((r,a)=>a):[].concat(t),Y(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),Y(t.every(r=>Hf(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Zu(t,e){const n=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||a?null:tn(e,t).sort();let s=0;for(let o=0;o<t.length;++o){if(i!=null){if(i[s]===o&&t[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${t[o]}' is not 1`);(i[s]==null||i[s]>o)&&t[o]===1&&(n.push(t[o]),r.push(o)),i[s]<=o&&s++}t[o]!==1&&(n.push(t[o]),r.push(o))}return{newShape:n,keptDims:r}}function Xr(t,e){return sr(t,e)}function sr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function JK(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function eY(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function iP(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Vy(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function tY(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function kh(t){return typeof t=="string"||t instanceof String}function nY(t){return typeof t=="boolean"}function PN(t){return typeof t=="number"}function md(t){return Array.isArray(t)?md(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":PN(t)?"float32":kh(t)?"string":nY(t)?"bool":"float32"}function BN(t){return!!(t&&t.constructor&&t.call&&t.apply)}function LN(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function wt(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function sP(t,e,n,r=!1){const a=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let s=0;s<i;s++)a[s]=n[t+s]}else{const i=e[0],s=e.slice(1),o=s.reduce((u,l)=>u*l)*(r?2:1);for(let u=0;u<i;u++)a[u]=sP(t+u*o,s,n,r)}return a}function Zi(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((a,i)=>a*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return sP(0,t,e,n)}function rY(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function yC(t,e){const n=oa(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function oa(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function oP(t,e){const n=t.reduce((r,a)=>r*a,1);if(e==null||e==="float32")return Zi(t,new Float32Array(n));if(e==="int32")return Zi(t,new Int32Array(n));if(e==="bool")return Zi(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Di(t){t.forEach(e=>{Y(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function eo(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let a=0;a<t.length-1;++a)r+=n[a]*t[a];return r}function gd(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(t/n[a]),t-=r[a]*n[a];return r[r.length-1]=t,r}function tc(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lk="tfjsflags";class aY{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=iY,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(Ae().getBool("IS_TEST")||Ae().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const a=this.urlFlags[e];Ae().getBool("IS_TEST")||Ae().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${a}.`),this.set(e,a)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(tc(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);Lk in e&&e[Lk].split(",").forEach(r=>{const[a,i]=r.split(":");this.urlFlags[a]=oY(a,i)})}}function iY(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(sY(e,r[0],r[1]),r.join("="))),e}function sY(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function oY(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function Ae(){return uP}let uP=null;function uY(t){uP=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let h2;function lP(){if(h2==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");h2=t}return h2}function lY(){const t=lP();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function bC(t,e){const n=lY();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const G0="Abs",_h="Acos",Oh="Acosh",vd="Add",H0="AddN",xC="All",wC="Any",j0="ArgMax",X0="ArgMin",Fh="Asin",Rh="Asinh",Mh="Atan",Ph="Atanh",Bh="Atan2",K0="AvgPool",NC="AvgPoolGrad",Y0="AvgPool3D",SC="AvgPool3DGrad",Z0="BatchMatMul",Q0="BatchToSpaceND",CC="Bincount",J0="BitwiseAnd",cY="BroadcastTo",EC="BroadcastArgs",Lh="Cast",zh="Ceil",Uh="ClipByValue",DC="Complex",e1="ComplexAbs",t1="Concat",n1="Conv2D",TC="Conv2DBackpropFilter",r1="Conv2DBackpropInput",a1="Conv3D",$C="Conv3DBackpropFilterV2",AC="Conv3DBackpropInputV2",Vh="Cos",Wh="Cosh",IC="Cumprod",i1="Cumsum",kC="CropAndResize",_C="DenseBincount",OC="DepthToSpace",s1="DepthwiseConv2dNative",FC="DepthwiseConv2dNativeBackpropFilter",RC="DepthwiseConv2dNativeBackpropInput",MC="Diag",o1="Dilation2D",zN="Dilation2DBackpropInput",UN="Dilation2DBackpropFilter",fY="Draw",qh="RealDiv",PC="Einsum",Gh="Elu",BC="EluGrad",Hh="Erf",u1="Equal",jh="Exp",l1="ExpandDims",Xh="Expm1",LC="FFT",zC="Fill",UC="FlipLeftRight",Kh="Floor",Yh="FloorDiv",c1="FusedBatchNorm",f1="GatherV2",VC="GatherNd",d1="Greater",Zh="GreaterEqual",Qh="Identity",WC="IFFT",qC="Imag",Jh="IsFinite",em="IsInf",tm="IsNan",p1="LeakyRelu",h1="Less",m1="LessEqual",GC="LinSpace",nm="Log",rm="Log1p",g1="LogicalAnd",v1="LogicalNot",y1="LogicalOr",dY="LogSoftmax",b1="LRN",HC="LRNGrad",x1="Max",am="Maximum",w1="MaxPool",jC="MaxPoolGrad",N1="MaxPool3D",XC="MaxPool3DGrad",KC="MaxPoolWithArgmax",S1="Mean",C1="Min",im="Minimum",E1="MirrorPad",sm="Mod",YC="Multinomial",om="Multiply",D1="Neg",T1="NotEqual",ZC="NonMaxSuppressionV3",QC="NonMaxSuppressionV4",JC="NonMaxSuppressionV5",$1="OnesLike",A1="OneHot",I1="Pack",k1="PadV2",um="Pow",_1="Prelu",O1="Prod",eE="RaggedGather",tE="RaggedRange",nE="RaggedTensorToTensor",rE="Range",aE="Real",lm="Reciprocal",cm="Relu",F1="Reshape",R1="ResizeNearestNeighbor",iE="ResizeNearestNeighborGrad",M1="ResizeBilinear",sE="ResizeBilinearGrad",fm="Relu6",P1="Reverse",dm="Round",pm="Rsqrt",oE="ScatterNd",uE="TensorScatterUpdate",lE="SearchSorted",B1="Select",hm="Selu",L1="Slice",mm="Sin",gm="Sinh",vm="Sign",ym="Sigmoid",bm="Softplus",xm="Sqrt",z1="Sum",U1="SpaceToBatchND",V1="SplitV",W1="Softmax",cE="SparseFillEmptyRows",fE="SparseReshape",dE="SparseSegmentMean",pE="SparseSegmentSum",hE="SparseToDense",wm="SquaredDifference",mE="Square",q1="StaticRegexReplace",gE="StridedSlice",vE="StringNGrams",yE="StringSplit",bE="StringToHashBucketFast",Nm="Sub",Sm="Tan",Cm="Tanh",Em="Tile",xE="TopK",wE="Transform",kf="Transpose",NE="Unique",G1="Unpack",H1="UnsortedSegmentSum",j1="ZerosLike",Dm="Step",pY="FromPixels",SE="RotateWithOffset",Wy="_FusedMatMul",qy="FusedConv2D",Gy="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wi(...t){Ae().getBool("IS_TEST")||Ae().getBool("PROD")||console.warn(...t)}function hY(...t){Ae().getBool("IS_TEST")||Ae().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hy=bC("kernelRegistry",()=>new Map),VN=bC("gradRegistry",()=>new Map);function zk(t,e){const n=fP(t,e);return Hy.get(n)}function Uk(t){return VN.get(t)}function Vk(t){const e=Hy.entries(),n=[];for(;;){const{done:r,value:a}=e.next();if(r)break;const[i,s]=a,[o]=i.split("_");o===t&&n.push(s)}return n}function cP(t){const{kernelName:e,backendName:n}=t,r=fP(e,n);Hy.has(r)&&wi(`The kernel '${e}' for backend '${n}' is already registered`),Hy.set(r,t)}function mY(t){const{kernelName:e}=t;VN.has(e)&&Ae().getBool("DEBUG")&&wi(`Overriding the gradient for '${e}'`),VN.set(e,t)}function fP(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dP(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var m2,Wk;function gY(){if(Wk)return m2;Wk=1,m2=e;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(I,$,O){this.low=I|0,this.high=$|0,this.unsigned=!!O}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function n(I){return(I&&I.__isLong__)===!0}e.isLong=n;var r={},a={};function i(I,$){var O,B,z;return $?(I>>>=0,(z=0<=I&&I<256)&&(B=a[I],B)?B:(O=o(I,(I|0)<0?-1:0,!0),z&&(a[I]=O),O)):(I|=0,(z=-128<=I&&I<128)&&(B=r[I],B)?B:(O=o(I,I<0?-1:0,!1),z&&(r[I]=O),O))}e.fromInt=i;function s(I,$){if(isNaN(I))return $?w:b;if($){if(I<0)return w;if(I>=m)return A}else{if(I<=-v)return k;if(I+1>=v)return E}return I<0?s(-I,$).neg():o(I%h|0,I/h|0,$)}e.fromNumber=s;function o(I,$,O){return new e(I,$,O)}e.fromBits=o;var u=Math.pow;function l(I,$,O){if(I.length===0)throw Error("empty string");if(I==="NaN"||I==="Infinity"||I==="+Infinity"||I==="-Infinity")return b;if(typeof $=="number"?(O=$,$=!1):$=!!$,O=O||10,O<2||36<O)throw RangeError("radix");var B;if((B=I.indexOf("-"))>0)throw Error("interior hyphen");if(B===0)return l(I.substring(1),$,O).neg();for(var z=s(u(O,8)),L=b,F=0;F<I.length;F+=8){var R=Math.min(8,I.length-F),W=parseInt(I.substring(F,F+R),O);if(R<8){var M=s(u(O,R));L=L.mul(M).add(s(W))}else L=L.mul(z),L=L.add(s(W))}return L.unsigned=$,L}e.fromString=l;function c(I,$){return typeof I=="number"?s(I,$):typeof I=="string"?l(I,$):o(I.low,I.high,typeof $=="boolean"?$:I.unsigned)}e.fromValue=c;var f=65536,d=1<<24,h=f*f,m=h*h,v=m/2,y=i(d),b=i(0);e.ZERO=b;var w=i(0,!0);e.UZERO=w;var x=i(1);e.ONE=x;var S=i(1,!0);e.UONE=S;var C=i(-1);e.NEG_ONE=C;var E=o(-1,2147483647,!1);e.MAX_VALUE=E;var A=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=A;var k=o(0,-2147483648,!1);e.MIN_VALUE=k;var T=e.prototype;return T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},T.toString=function($){if($=$||10,$<2||36<$)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(k)){var O=s($),B=this.div(O),z=B.mul(O).sub(this);return B.toString($)+z.toInt().toString($)}else return"-"+this.neg().toString($);for(var L=s(u($,6),this.unsigned),F=this,R="";;){var W=F.div(L),M=F.sub(W.mul(L)).toInt()>>>0,j=M.toString($);if(F=W,F.isZero())return j+R;for(;j.length<6;)j="0"+j;R=""+j+R}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var $=this.high!=0?this.high:this.low,O=31;O>0&&!($&1<<O);O--);return this.high!=0?O+33:O+1},T.isZero=function(){return this.high===0&&this.low===0},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return(this.low&1)===1},T.isEven=function(){return(this.low&1)===0},T.equals=function($){return n($)||($=c($)),this.unsigned!==$.unsigned&&this.high>>>31===1&&$.high>>>31===1?!1:this.high===$.high&&this.low===$.low},T.eq=T.equals,T.notEquals=function($){return!this.eq($)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function($){return this.comp($)<0},T.lt=T.lessThan,T.lessThanOrEqual=function($){return this.comp($)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function($){return this.comp($)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function($){return this.comp($)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function($){if(n($)||($=c($)),this.eq($))return 0;var O=this.isNegative(),B=$.isNegative();return O&&!B?-1:!O&&B?1:this.unsigned?$.high>>>0>this.high>>>0||$.high===this.high&&$.low>>>0>this.low>>>0?-1:1:this.sub($).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(x)},T.neg=T.negate,T.add=function($){n($)||($=c($));var O=this.high>>>16,B=this.high&65535,z=this.low>>>16,L=this.low&65535,F=$.high>>>16,R=$.high&65535,W=$.low>>>16,M=$.low&65535,j=0,q=0,H=0,G=0;return G+=L+M,H+=G>>>16,G&=65535,H+=z+W,q+=H>>>16,H&=65535,q+=B+R,j+=q>>>16,q&=65535,j+=O+F,j&=65535,o(H<<16|G,j<<16|q,this.unsigned)},T.subtract=function($){return n($)||($=c($)),this.add($.neg())},T.sub=T.subtract,T.multiply=function($){if(this.isZero())return b;if(n($)||($=c($)),t){var O=t.mul(this.low,this.high,$.low,$.high);return o(O,t.get_high(),this.unsigned)}if($.isZero())return b;if(this.eq(k))return $.isOdd()?k:b;if($.eq(k))return this.isOdd()?k:b;if(this.isNegative())return $.isNegative()?this.neg().mul($.neg()):this.neg().mul($).neg();if($.isNegative())return this.mul($.neg()).neg();if(this.lt(y)&&$.lt(y))return s(this.toNumber()*$.toNumber(),this.unsigned);var B=this.high>>>16,z=this.high&65535,L=this.low>>>16,F=this.low&65535,R=$.high>>>16,W=$.high&65535,M=$.low>>>16,j=$.low&65535,q=0,H=0,G=0,ne=0;return ne+=F*j,G+=ne>>>16,ne&=65535,G+=L*j,H+=G>>>16,G&=65535,G+=F*M,H+=G>>>16,G&=65535,H+=z*j,q+=H>>>16,H&=65535,H+=L*M,q+=H>>>16,H&=65535,H+=F*W,q+=H>>>16,H&=65535,q+=B*j+z*M+L*W+F*R,q&=65535,o(G<<16|ne,q<<16|H,this.unsigned)},T.mul=T.multiply,T.divide=function($){if(n($)||($=c($)),$.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&$.low===-1&&$.high===-1)return this;var O=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,$.low,$.high);return o(O,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?w:b;var B,z,L;if(this.unsigned){if($.unsigned||($=$.toUnsigned()),$.gt(this))return w;if($.gt(this.shru(1)))return S;L=w}else{if(this.eq(k)){if($.eq(x)||$.eq(C))return k;if($.eq(k))return x;var F=this.shr(1);return B=F.div($).shl(1),B.eq(b)?$.isNegative()?x:C:(z=this.sub($.mul(B)),L=B.add(z.div($)),L)}else if($.eq(k))return this.unsigned?w:b;if(this.isNegative())return $.isNegative()?this.neg().div($.neg()):this.neg().div($).neg();if($.isNegative())return this.div($.neg()).neg();L=b}for(z=this;z.gte($);){B=Math.max(1,Math.floor(z.toNumber()/$.toNumber()));for(var R=Math.ceil(Math.log(B)/Math.LN2),W=R<=48?1:u(2,R-48),M=s(B),j=M.mul($);j.isNegative()||j.gt(z);)B-=W,M=s(B,this.unsigned),j=M.mul($);M.isZero()&&(M=x),L=L.add(M),z=z.sub(j)}return L},T.div=T.divide,T.modulo=function($){if(n($)||($=c($)),t){var O=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,$.low,$.high);return o(O,t.get_high(),this.unsigned)}return this.sub(this.div($).mul($))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return o(~this.low,~this.high,this.unsigned)},T.and=function($){return n($)||($=c($)),o(this.low&$.low,this.high&$.high,this.unsigned)},T.or=function($){return n($)||($=c($)),o(this.low|$.low,this.high|$.high,this.unsigned)},T.xor=function($){return n($)||($=c($)),o(this.low^$.low,this.high^$.high,this.unsigned)},T.shiftLeft=function($){return n($)&&($=$.toInt()),($&=63)===0?this:$<32?o(this.low<<$,this.high<<$|this.low>>>32-$,this.unsigned):o(0,this.low<<$-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function($){return n($)&&($=$.toInt()),($&=63)===0?this:$<32?o(this.low>>>$|this.high<<32-$,this.high>>$,this.unsigned):o(this.high>>$-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function($){if(n($)&&($=$.toInt()),$&=63,$===0)return this;var O=this.high;if($<32){var B=this.low;return o(B>>>$|O<<32-$,O>>>$,this.unsigned)}else return $===32?o(O,0,this.unsigned):o(O>>>$-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},T.toBytes=function($){return $?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var $=this.high,O=this.low;return[O&255,O>>>8&255,O>>>16&255,O>>>24,$&255,$>>>8&255,$>>>16&255,$>>>24]},T.toBytesBE=function(){var $=this.high,O=this.low;return[$>>>24,$>>>16&255,$>>>8&255,$&255,O>>>24,O>>>16&255,O>>>8&255,O&255]},e.fromBytes=function($,O,B){return B?e.fromBytesLE($,O):e.fromBytesBE($,O)},e.fromBytesLE=function($,O){return new e($[0]|$[1]<<8|$[2]<<16|$[3]<<24,$[4]|$[5]<<8|$[6]<<16|$[7]<<24,O)},e.fromBytesBE=function($,O){return new e($[4]<<24|$[5]<<16|$[6]<<8|$[7],$[0]<<24|$[1]<<16|$[2]<<8|$[3],O)},m2}var pP=gY();const hP=gc(pP),vY=j9({__proto__:null,default:hP},[pP]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ul=hP||vY;function X1(t){return Ul.fromString(t,!0,16)}const mP=X1("c3a5c85c97cb3127"),Ll=X1("b492b66fbe98f273"),xa=X1("9ae16a3b2f90404f");function WN(t){return t.xor(t.shru(47))}function gP(t,e,n){const r=t.slice(e,e+n);return Ul.fromBytes(Array.from(r),!0,!0)}function Pn(t,e){return gP(t,e,8)}function qk(t,e){return gP(t,e,4)}function Ir(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Iu(t,e,n=X1("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let a=e.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function yY(t,e,n,r,a,i){a=a.add(t),i=Ir(i.add(a).add(r),21);const s=a;return a=a.add(e),a=a.add(n),i=i.add(Ir(a,44)),[a.add(r),i.add(s)]}function _v(t,e,n,r){return yY(Pn(t,e),Pn(t,e+8),Pn(t,e+16),Pn(t,e+24),n,r)}function bY(t,e=t.length){if(e>=8){const n=xa.add(e*2),r=Pn(t,0).add(xa),a=Pn(t,e-8),i=Ir(a,37).mul(n).add(r),s=Ir(r,25).add(a).mul(n);return Iu(i,s,n)}if(e>=4){const n=xa.add(e*2),r=qk(t,0);return Iu(r.shl(3).add(e),qk(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],a=t[e-1],i=n+(r<<8),s=e+(a<<2);return WN(xa.mul(i).xor(mP.mul(s))).mul(xa)}return xa}function xY(t,e=t.length){const n=xa.add(e*2),r=Pn(t,0).mul(Ll),a=Pn(t,8),i=Pn(t,e-8).mul(n),s=Pn(t,e-16).mul(xa);return Iu(Ir(r.add(a),43).add(Ir(i,30)).add(s),r.add(Ir(a.add(xa),18)).add(i),n)}function wY(t,e=t.length){const n=xa.add(e*2),r=Pn(t,0).mul(xa),a=Pn(t,8),i=Pn(t,e-8).mul(n),s=Pn(t,e-16).mul(xa),o=Ir(r.add(a),43).add(Ir(i,30)).add(s),u=Iu(o,r.add(Ir(a.add(xa),18)).add(i),n),l=Pn(t,16).mul(n),c=Pn(t,24),f=o.add(Pn(t,e-32)).mul(n),d=u.add(Pn(t,e-24)).mul(n);return Iu(Ir(l.add(c),43).add(Ir(f,30)).add(d),l.add(Ir(c.add(r),18)).add(f),n)}function NY(t,e=t.length){const n=Ul.fromNumber(81,!0);if(e<=32)return e<=16?bY(t,e):xY(t,e);if(e<=64)return wY(t,e);let r=n,a=n.mul(Ll).add(113),i=WN(a.mul(xa).add(113)).mul(xa),s=[Ul.UZERO,Ul.UZERO],o=[Ul.UZERO,Ul.UZERO];r=r.mul(xa).add(Pn(t,0));let u=0;const l=(e-1>>6)*64,c=l+(e-1&63)-63;do r=Ir(r.add(a).add(s[0]).add(Pn(t,u+8)),37).mul(Ll),a=Ir(a.add(s[1]).add(Pn(t,u+48)),42).mul(Ll),r=r.xor(o[1]),a=a.add(s[0]).add(Pn(t,u+40)),i=Ir(i.add(o[0]),33).mul(Ll),s=_v(t,u,s[1].mul(Ll),r.add(o[0])),o=_v(t,u+32,i.add(o[1]),a.add(Pn(t,u+16))),[i,r]=[r,i],u+=64;while(u!==l);const f=Ll.add(i.and(255).shl(1));return u=c,o[0]=o[0].add(e-1&63),s[0]=s[0].add(o[0]),o[0]=o[0].add(s[0]),r=Ir(r.add(a).add(s[0]).add(Pn(t,u+8)),37).mul(f),a=Ir(a.add(s[1]).add(Pn(t,u+48)),42).mul(f),r=r.xor(o[1].mul(9)),a=a.add(s[0].mul(9).add(Pn(t,u+40))),i=Ir(i.add(o[0]),33).mul(f),s=_v(t,u,s[1].mul(f),r.add(o[0])),o=_v(t,u+32,i.add(o[1]),a.add(Pn(t,u+16))),[i,r]=[r,i],Iu(Iu(s[0],o[0],f).add(WN(a).mul(mP)).add(i),Iu(s[1],o[1],f).add(r),f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qu(t,e){return e==="string"?ku(t):vc([t],e)}function SY(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function vc(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Pu(t)),Ae().getBool("DEBUG")&&JK(t,e),SY(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Oa(){return Ae().platform.now()}function CY(t,e){return Ae().platform.fetch(t,e)}function ku(t,e="utf-8"){return e=e||"utf-8",Ae().platform.encode(t,e)}function Mu(t,e="utf-8"){return e=e||"utf-8",Ae().platform.decode(t,e)}function ts(t){return Ae().platform.isTypedArray!=null?Ae().platform.isTypedArray(t):dP(t)}function Pu(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||tc(t)||t==null||ts(t)&&n)e.push(t);else if(Array.isArray(t)||ts(t))for(let r=0;r<t.length;++r)Pu(t[r],e,n);else{let r=-1;for(const a of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(a)&&(r=Math.max(r,Number(a)));for(let a=0;a<=r;a++)Pu(t[a],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EY{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new TY)}profileKernel(e,n,r){let a;const i=()=>{a=r()};let s;const o=Oa();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(i);else{i();for(const l of a)l.dataSync();s=Promise.resolve({kernelMs:Oa()-o})}if(Ae().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<a.length;l++){const c=a[l];c.data().then(f=>{DY(f,c.dtype,e)})}return{kernelName:e,outputs:a,inputs:n,timeMs:s.then(l=>l.kernelMs),extraInfo:s.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:a,inputs:i,extraInfo:s}=e;r.forEach(o=>{Promise.all([o.data(),a,s]).then(u=>{this.logger.logKernelProfile(n,o,u[0],u[1],i,u[2])})})}}function DY(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const a=t[r];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${n}'`),!0}return!1}class TY{logKernelProfile(e,n,r,a,i,s){const o=typeof a=="number"?If(`${a}ms`,9):a.error,u=If(e,25),l=n.rank,c=n.size,f=If(n.shape.toString(),14);let d="";for(const h in i){const m=i[h];if(m!=null){const v=m.shape||n.shape,y=v.length;d+=`${h}: ${y}D ${y>0?v:""} `}}console.log(`%c${u}	%c${o}	%c${l}D ${f}	%c${c}	%c${d}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Y(t,e,n){const r={},a={};for(let u=0;u<e.length;u++)r[e[u].id]=!0;for(let u=0;u<t.length;u++){const l=t[u],c=l.inputs;for(const f in c){const d=c[f];let h=!1;for(let m=0;m<e.length;m++)if(r[d.id]){l.outputs.forEach(v=>r[v.id]=!0),h=!0,a[l.id]=!0;break}if(h)break}}const i={};i[n.id]=!0;const s={};for(let u=t.length-1;u>=0;u--){const l=t[u],c=l.inputs;for(let f=0;f<l.outputs.length;f++)if(i[l.outputs[f].id]){for(const d in c)i[c[d].id]=!0,s[l.id]=!0;break}}const o=[];for(let u=0;u<t.length;u++){const l=t[u];if(a[l.id]&&s[l.id]){const c={};for(const d in l.inputs){const h=l.inputs[d];r[h.id]&&(c[d]=h)}const f=Object.assign({},l);f.inputs=c,f.outputs=l.outputs,o.push(f)}}return o}function AY(t,e,n,r){for(let a=e.length-1;a>=0;a--){const i=e[a],s=[];if(i.outputs.forEach(u=>{const l=t[u.id];l!=null?s.push(l):s.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const o=i.gradient(s);for(const u in i.inputs){if(!(u in o))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(o)}.`);const l=n(()=>o[u]());if(l.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${l.dtype}'`);const c=i.inputs[u];if(!un(l.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${u}' has shape '${l.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=l;else{const f=t[c.id];t[c.id]=r(f,l),f.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gk=20,$p=3,g2=7;function IY(t,e,n,r){const a=wt(e),i=kY(t,e,n,a),s=e.length,o=my(t,e,n,a,i),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${s}`),u.push(`  shape: [${e}]`),u.push("  values:")),u.push(o.map(l=>"    "+l).join(`
`)),u.join(`
`)}function kY(t,e,n,r){const a=Oe(e),i=r[r.length-1],s=new Array(i).fill(0),o=e.length,u=n==="complex64"?Pp(t):t;if(o>1)for(let l=0;l<a/i;l++){const c=l*i;for(let f=0;f<i;f++)s[f]=Math.max(s[f],Mp(u[c+f],0,n).length)}return s}function Mp(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(g2))} + ${parseFloat(t[1].toFixed(g2))}j`:kh(t)?r=`'${t}'`:n==="bool"?r=vP(t):r=parseFloat(t.toFixed(g2)).toString(),If(r,e)}function vP(t){return t===0?"false":"true"}function my(t,e,n,r,a,i=!0){const s=n==="complex64"?2:1,o=e[0],u=e.length;if(u===0){if(n==="complex64"){const v=Pp(t);return[Mp(v[0],0,n)]}return n==="bool"?[vP(t[0])]:[t[0].toString()]}if(u===1){if(o>Gk){const y=$p*s;let b=Array.from(t.slice(0,y)),w=Array.from(t.slice((o-$p)*s,o*s));return n==="complex64"&&(b=Pp(b),w=Pp(w)),["["+b.map((x,S)=>Mp(x,a[S],n)).join(", ")+", ..., "+w.map((x,S)=>Mp(x,a[o-$p+S],n)).join(", ")+"]"]}return["["+(n==="complex64"?Pp(t):Array.from(t)).map((y,b)=>Mp(y,a[b],n)).join(", ")+"]"]}const l=e.slice(1),c=r.slice(1),f=r[0]*s,d=[];if(o>Gk){for(let v=0;v<$p;v++){const y=v*f,b=y+f;d.push(...my(t.slice(y,b),l,n,c,a,!1))}d.push("...");for(let v=o-$p;v<o;v++){const y=v*f,b=y+f;d.push(...my(t.slice(y,b),l,n,c,a,v===o-1))}}else for(let v=0;v<o;v++){const y=v*f,b=y+f;d.push(...my(t.slice(y,b),l,n,c,a,v===o-1))}const h=u===2?",":"";d[0]="["+(o>0?d[0]+h:"");for(let v=1;v<d.length-1;v++)d[v]=" "+d[v]+h;let m=`,
`;for(let v=2;v<u;v++)m+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(i?"":m),d}function Pp(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=Oe(e),r!=null){const a=r.length;Y(a===this.size,()=>`Length of values '${a}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||sr(n,this.size),this.strides=wt(e)}set(e,...n){n.length===0&&(n=[0]),Y(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const a of e){if(a<0||a>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=this.strides[a]*e[a];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return xs().makeTensor(this.values,this.shape,this.dtype)}}let xs=null,wf=null;function _Y(t){xs=t}function OY(t){wf=t}class Kn{constructor(e,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Oe(e),this.strides=wt(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return wf.buffer(this.shape,this.dtype,e)}bufferSync(){return wf.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Zi(this.shape,e,this.dtype==="complex64")}arraySync(){return Zi(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=xs().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Mu(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),xs().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=xs().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Mu(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await xs().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),xs().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return wf.print(this,e)}clone(){return this.throwIfDisposed(),wf.clone(this)}toString(e=!1){const n=this.dataSync();return IY(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),wf.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),xs().makeVariable(this,e,n,r)}}Object.defineProperty(Kn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Pe(){return bC("Tensor",()=>Kn)}Pe();class jy extends Kn{constructor(e,n,r,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!un(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);xs().disposeTensor(this),this.dataId=e.dataId,xs().incRef(this,null)}dispose(){xs().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(jy,Symbol.hasInstance,{value:t=>t instanceof Kn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Hk;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(Hk||(Hk={}));var qN;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(qN||(qN={}));var GN;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(GN||(GN={}));var HN;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(HN||(HN={}));var jN;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(jN||(jN={}));const FY={float32:HN,int32:qN,bool:GN,complex64:jN};function oi(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return FY[t][e]}function CE(t){return oi(t,"int32")}function yP(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function bP(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rr(t,e){if(t.dtype===e.dtype)return[t,e];const n=oi(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function RY(t,e){Y(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function xP(t){const e=[];return wP(t,e,new Set),e}function wP(t,e,n){if(t==null)return;if(t instanceof Kn){e.push(t);return}if(!MY(t))return;const r=t;for(const a in r){const i=r[a];n.has(i)||(n.add(i),wP(i,e,n))}}function MY(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2(t){return t.kernelName!=null}class jk{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class jf{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new jk}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(wi(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new EY(this.backendInstance),!0}setupRegisteredKernels(){Vk(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){Vk(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof gC)&&typeof r.then=="function"){const a=++this.pendingBackendInitId,i=r.then(s=>a<this.pendingBackendInitId?!1:(this.registry[e]=s,this.pendingBackendInit=null,!0)).catch(s=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,wi(`Initialization of backend ${e} failed`),wi(s.stack||s.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return wi(`Initialization of backend ${e} failed`),wi(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:a,asyncInit:i}=this.initializeBackend(r);if(i||a)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n),s=a.refCount(n);a.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let a;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(a),()=>(a=n(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(e,n,r){e();try{const a=r();return n(),a}catch(a){throw n(),a}}nextTensorId(){return jf.nextTensorId++}nextVariableId(){return jf.nextVariableId++}clone(e){const n=me.runKernel(Qh,{x:e}),r={x:e},a=s=>({x:()=>{const o="float32",u={x:s},l={dtype:o};return me.runKernel(Lh,u,l)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],a,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(zk(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const a=this.backend.numDataIds();let i=0;r.forEach(u=>{i+=u.dtype==="complex64"?3:1});const s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=a-n-i-s;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const a=this.isTapeOn(),i=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let u;const l=v2(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(v2(e)){const{kernelName:m,inputs:v,attrs:y}=e;this.backendName==null&&this.backend;const b=zk(m,this.backendName);Y(b!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),o=()=>{const w=this.backend.numDataIds();u=b.kernelFunc({inputs:v,attrs:y,backend:this.backend});const x=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,w,x);const S=x.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(a){const C=this.getTensorsForGradient(m,v,S);r=this.saveTensorsForBackwardMode(C)}return S}}else{const{forwardFunc:m}=e,v=y=>{a&&(r=y.map(b=>this.keep(this.clone(b))))};o=()=>{const y=this.backend.numDataIds();u=this.tidy(()=>m(this.backend,v));const b=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,y,b),b}}const{inputs:c,attrs:f}=e,d=v2(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(h=this.profiler.profileKernel(l,c,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),a&&this.addTapeNode(l,c,n,d,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(m=>c[m]!=null?c[m].shape:null),outputShapes:n.map(m=>m.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(u)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const a=Uk(e);if(a!=null){const i=a.inputsToSave||[],s=a.outputsToSave||[];let o;a.saveAllInputs?(Y(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(l=>n[l])):o=i.map(l=>n[l]);const u=r.filter((l,c)=>s[c]);return o.concat(u)}return[]}makeTensor(e,n,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;let i=e;r==="string"&&kh(e[0])&&(i=e.map(u=>ku(u)));const s=a.write(i,n,r),o=new Kn(n,r,s,this.nextTensorId());if(this.trackTensor(o,a),r==="string"){const u=this.state.tensorInfo.get(s),l=tY(i);this.state.numBytes+=l-u.bytes,u.bytes=l}return o}makeTensorFromDataId(e,n,r,a){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,a)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:a,dtype:i}=e,s=new Kn(a,i,r,this.nextTensorId());return this.trackTensor(s,n),s}makeVariable(e,n=!0,r,a){r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.cast(a));const i=new jy(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Vy(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof jy||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Vy(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,a,i,s){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},u=Uk(e);u!=null&&(a=u.gradFunc),a!=null&&(o.gradient=l=>(l=l.map((c,f)=>{if(c==null){const d=r[f],h=oa(d.size,d.dtype);return this.makeTensor(h,d.shape,d.dtype)}return c}),a(l.length>1?l:l[0],i,s))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=xP(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const s=this.state.activeScope.track[i];!s.kept&&!r.has(s.id)&&s.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===a.id&&this.track(i)})}gradients(e,n,r,a=!1){if(Y(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));Y(i instanceof Kn,()=>"The result y returned by f() must be a tensor.");const s=$Y(this.state.activeTape,n,i);if(!a&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[i.id]=r??PY(i.shape),AY(o,s,l=>this.tidy(l),BY);const u=n.map(l=>o[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(const c of l.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:u}})}customGrad(e){return Y(BN(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{Y(n.every(o=>o instanceof Kn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const a={};n.forEach((o,u)=>{a[u]=o});const i=(o,u)=>(r=e(...n,u),Y(r.value instanceof Kn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),Y(BN(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),s=(o,u)=>{const l=r.gradFunc(o,u),c=Array.isArray(l)?l:[l];Y(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),Y(c.every(d=>d instanceof Kn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return c.forEach((d,h)=>{f[h]=()=>d}),f};return this.runKernelFunc({forwardFunc:i,backwardsFunc:s,inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Oa(),r=await this.backend.time(e);return r.wallMs=Oa()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new jk;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}jf.nextTensorId=0;jf.nextVariableId=0;function PY(t){const e=yC(Oe(t),"float32");return me.makeTensor(e,t,"float32")}function NP(){const t=lP();if(t._tfengine==null){const e=new aY(t);t._tfengine=new jf(e)}return uY(t._tfengine.ENV),_Y(()=>t._tfengine),t._tfengine}const me=NP();function BY(t,e){const n={a:t,b:e};return me.runKernel(vd,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LY(){return typeof navigator<"u"&&navigator!=null}function SP(t){if(t||LY()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function CP(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const za=Ae();za.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});za.registerFlag("IS_BROWSER",()=>CP());za.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");za.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));za.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));za.registerFlag("PROD",()=>!1);za.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>za.getBool("DEBUG"));za.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);za.registerFlag("IS_TEST",()=>!1);za.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>za.getBool("DEBUG"));za.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);za.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);za.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ju(t,e){let n=t;if(ts(t))return e==="string"?[]:[t.length];if(yP(t)){const a=t.channels||"RGBA";return[t.height,t.width*a.length]}else if(bP(t))return[t.buffer.size/(e==null?4:Vy(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||ts(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&Ae().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&EP(t,r,[]),r}function EP(t,e,n){if(n=n||[],!Array.isArray(t)&&!ts(t)){Y(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}Y(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),Y(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let a=0;a<t.length;++a)EP(t[a],r,n.concat(a))}function Xk(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function Q(t,e,n,r="numeric"){if(t instanceof Pe())return Xk(r,t.dtype,e,n),t;let a=md(t);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Xk(r,a,e,n),t==null||!ts(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const u=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}const i=Ju(t,a);!ts(t)&&!Array.isArray(t)&&(t=[t]);const o=a!=="string"?vc(t,a):Pu(t,[],!0);return me.makeTensor(o,i,a)}function Xy(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,s)=>Q(i,`${e}[${s}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DP="__op";function de(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+DP;const a=(...i)=>{me.startScope(n);try{const s=r(...i);return tc(s)&&console.error("Cannot return a Promise inside of tidy."),me.endScope(s),s}catch(s){throw me.endScope(null),s}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zY(t,e){const n=Q(t,"real","complex"),r=Q(e,"imag","complex");mi(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const a={real:n,imag:r};return me.runKernel(DC,a)}const Bu=de({complex_:zY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function el(t,e,n,r){if(r==null)r=md(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(bP(t)||yP(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return me.backend.createTensorFromGPUData(t,e||n,r)}if(!ts(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Di(e);const a=Oe(e),i=Oe(n);Y(a===i,()=>`Based on the provided shape, [${e}], the tensor should have ${a} values but has ${i}`);for(let s=0;s<n.length;++s){const o=n[s],u=s===n.length-1?o!==Oe(e.slice(s)):!0;Y(n[s]===e[s]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!ts(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?vc(t,r):Pu(t,[],!0),me.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cs(t,e,n){const r=Ju(t,n);return el(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nc={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class ks{static join(e){return new ks(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>ts(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const a=e[r];r!==e.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+a.byteLength;this.shards.push({buffer:a,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const a=n-e,i=new ArrayBuffer(a),s=new Uint8Array(i);let o=0;for(let u=r;u<this.shards.length;u++){const l=this.shards[u],f=e+o-l.start,d=o,m=Math.min(n,l.end)-l.start,v=new Uint8Array(l.buffer,f,m-f);if(s.set(v,d),o+=v.length,n<l.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(a){return e<a.start?-1:e>=a.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=UY(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function UY(t,e){let n=0,r=t.length;for(;n<=r;){const a=Math.floor((r-n)/2)+n,i=e(t[a]);if(i===0)return a;i<0?r=a:n=a+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hs(){return me}function Kk(){return me.memory()}function De(t,e){return me.tidy(t,e)}function en(t){xP(t).forEach(n=>n.dispose())}function _r(t){return me.keep(t)}function VY(t){return me.setBackend(t)}function WY(){return me.ready()}function qY(){return me.backendName}function TP(t,e,n=1){return me.registerBackend(t,e,n)}function $P(){return me.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lu=4;async function XN(t,e){const n=[],r=[],a=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);for(let s=0;s<a.length;++s){const o=a[s],u=Array.isArray(t)?t[s].tensor:t[o];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${u.dtype}`);const l={name:o,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){const c=new Promise(async f=>{const d=await u.bytes(),h=d.reduce((y,b)=>y+b.length,0)+Lu*d.length,m=new Uint8Array(h);let v=0;for(let y=0;y<d.length;y++){const b=d[y],w=new Uint8Array(new Uint32Array([b.length]).buffer);m.set(w,v),v+=Lu,m.set(b,v),v+=b.length}f(m)});r.push(c)}else r.push(u.data());e!=null&&(l.group=e),n.push(l)}const i=await Promise.all(r);return{data:jY(i),specs:n}}function AP(t,e){const n=new ks(t),r={};let a=0;for(const i of e){const s=GY(i,(o,u)=>n.slice(a+o,a+u));r[i.name]=IP(i,n.slice(a,a+s)),a+=s}return r}function GY(t,e){const n=Oe(t.shape);let r;if("quantization"in t){const a=t.quantization;r=nc[a.dtype]}else if(t.dtype==="string"){let a=0;for(let i=0;i<n;i++)a+=Lu+new Uint32Array(e(a,a+Lu))[0];return a}else r=nc[t.dtype];return n*r}async function HY(t,e){const n=Oe(t.shape);let r;if("quantization"in t){const a=t.quantization;r=nc[a.dtype]}else if(t.dtype==="string"){let a=0;for(let i=0;i<n;i++)a+=Lu+new Uint32Array(await e(a,a+Lu))[0];return a}else r=nc[t.dtype];return n*r}function IP(t,e){const n=t.name,r=t.dtype,a=t.shape,i=Oe(a);let s,o=0;if("quantization"in t){const u=t.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${t.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const l=nc[u.dtype],c=u.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){s=new Float32Array(c.length);for(let f=0;f<c.length;f++){const d=c[f];s[f]=d*u.scale+u.min}}else if(u.dtype==="float16")s=JY()(c);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(r==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);s=new Int32Array(c.length);for(let f=0;f<c.length;f++){const d=c[f];s[f]=Math.round(d*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=i*l}else if(r==="string"){const u=Oe(t.shape);s=[];for(let l=0;l<u;l++){const c=new Uint32Array(e.slice(o,o+Lu))[0];o+=Lu;const f=new Uint8Array(e.slice(o,o+c));s.push(f),o+=c}}else{const u=nc[r];if(r==="float32")s=new Float32Array(e);else if(r==="int32")s=new Int32Array(e);else if(r==="bool")s=new Uint8Array(e);else if(r==="complex64"){s=new Float32Array(e);const l=new Float32Array(s.length/2),c=new Float32Array(s.length/2);for(let m=0;m<l.length;m++)l[m]=s[m*2],c[m]=s[m*2+1];const f=Cs(l,a,"float32"),d=Cs(c,a,"float32"),h=Bu(f,d);return f.dispose(),d.dispose(),h}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=i*u}return Cs(s,a,r)}async function Yk(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:a,value:i}=await t.read();if(a&&i==null){const o=n-r.byteLength;throw new Error(`Reader is done but ${o} bytes are still expected`)}const s=new Uint8Array(r.length+i.byteLength);s.set(r,0),s.set(new Uint8Array(i),r.length),r=s}return r.buffer}async function kP(t,e){const n={},r=t.getReader();let a=new ArrayBuffer(0);for(const i of e){const s=await HY(i,async(l,c)=>(a=await Yk(r,a,c),a.slice(l,c)));a=await Yk(r,a,s);const o=a.slice(0,s);a=a.slice(s);const u=IP(i,o);if(n[i.name]=u,qY()==="webgpu"){const l=$P();"uploadToGPU"in l&&Oe(u.shape)>=Ae().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&l.uploadToGPU(u.dataId)}}return n}function jY(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let a=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}const EE=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Zk(t){return EE?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function XY(t){if(EE)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,a=e.length;r<a;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function KY(t){if(EE){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function _P(t){return ks.join(t)}function Qk(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function OP(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function FP(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function DE(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),FP(t,n,r)}function Tm(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:Zk(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:Zk(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new ks(t.weightData).byteLength}}function KN(t){const e=[];for(const n of t)e.push(...n.weights);return e}function YY(){const t=n=>{let r=n<<13,a=0;for(;!(r&8388608);)a-=8388608,r<<=1;return r&=-8388609,a+=947912704,r|a},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function ZY(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function QY(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function JY(){const t=YY(),e=ZY(),n=QY();return r=>{const a=new ArrayBuffer(4*r.length),i=new Uint32Array(a);for(let s=0;s<r.length;s++){const o=r[s],u=t[n[o>>10]+(o&1023)]+e[o>>10];i[s]=u}return new Float32Array(a)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Xn.instance==null&&(Xn.instance=new Xn),Xn.instance}static registerSaveRouter(e){Xn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Xn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Xn.getHandlers(e,"save")}static getLoadHandlers(e,n){return Xn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const a=[];return(n==="load"?Xn.getInstance().loadRouters:Xn.getInstance().saveRouters).forEach(s=>{const o=s(e,r);o!==null&&a.push(o)}),a}}const eZ=t=>Xn.registerSaveRouter(t),tZ=t=>Xn.registerLoadRouter(t),RP=t=>Xn.getSaveHandlers(t),nZ=(t,e)=>Xn.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YN="tensorflowjs",ZN=1,Hl="models_store",Eu="model_info_store";function MP(){if(!Ae().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function QN(t){const e=t.result;e.createObjectStore(Hl,{keyPath:"modelPath"}),e.createObjectStore(Eu,{keyPath:"modelPath"})}class rc{constructor(e){if(this.indexedDB=MP(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,a)=>{const i=this.indexedDB.open(YN,ZN);i.onupgradeneeded=()=>QN(i),i.onsuccess=()=>{const s=i.result;if(n==null){const o=s.transaction(Hl,"readonly"),l=o.objectStore(Hl).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return s.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=c=>(s.close(),a(l.error)),o.oncomplete=()=>s.close()}else{n.weightData=ks.join(n.weightData);const o=Tm(n),u=s.transaction(Eu,"readwrite");let l=u.objectStore(Eu),c;try{c=l.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(d){return a(d)}let f;c.onsuccess=()=>{f=s.transaction(Hl,"readwrite");const d=f.objectStore(Hl);let h;try{h=d.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:o})}catch(m){return a(m)}h.onsuccess=()=>r({modelArtifactsInfo:o}),h.onerror=m=>{l=u.objectStore(Eu);const v=l.delete(this.modelPath);v.onsuccess=()=>(s.close(),a(h.error)),v.onerror=y=>(s.close(),a(h.error))}},c.onerror=d=>(s.close(),a(c.error)),u.oncomplete=()=>{f==null?s.close():f.oncomplete=()=>s.close()}}},i.onerror=s=>a(i.error)})}}rc.URL_SCHEME="indexeddb://";const PP=t=>Ae().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(rc.URL_SCHEME)?rZ(t.slice(rc.URL_SCHEME.length)):null;Xn.registerSaveRouter(PP);Xn.registerLoadRouter(PP);function rZ(t){return new rc(t)}function aZ(t){return t.startsWith(rc.URL_SCHEME)?t.slice(rc.URL_SCHEME.length):t}class iZ{constructor(){this.indexedDB=MP()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(YN,ZN);r.onupgradeneeded=()=>QN(r),r.onsuccess=()=>{const a=r.result,i=a.transaction(Eu,"readonly"),o=i.objectStore(Eu).getAll();o.onsuccess=()=>{const u={};for(const l of o.result)u[l.modelPath]=l.modelArtifactsInfo;e(u)},o.onerror=u=>(a.close(),n(o.error)),i.oncomplete=()=>a.close()},r.onerror=a=>n(r.error)})}async removeModel(e){return e=aZ(e),new Promise((n,r)=>{const a=this.indexedDB.open(YN,ZN);a.onupgradeneeded=()=>QN(a),a.onsuccess=()=>{const i=a.result,s=i.transaction(Eu,"readwrite"),o=s.objectStore(Eu),u=o.get(e);let l;u.onsuccess=()=>{if(u.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=o.delete(e),f=()=>{l=i.transaction(Hl,"readwrite");const h=l.objectStore(Hl).delete(e);h.onsuccess=()=>n(u.result.modelArtifactsInfo),h.onerror=m=>r(u.error)};c.onsuccess=f,c.onerror=d=>(f(),i.close(),r(u.error))}},u.onerror=c=>(i.close(),r(u.error)),s.oncomplete=()=>{l==null?i.close():l.oncomplete=()=>i.close()}},a.onerror=i=>r(a.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ko="/",Nf="tensorflowjs_models",BP="info",sZ="model_topology",oZ="weight_specs",uZ="weight_data",lZ="model_metadata";function LP(t){return{info:[Nf,t,BP].join(ko),topology:[Nf,t,sZ].join(ko),weightSpecs:[Nf,t,oZ].join(ko),weightData:[Nf,t,uZ].join(ko),modelMetadata:[Nf,t,lZ].join(ko)}}function zP(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function cZ(t){const e=t.split(ko);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(ko)}function fZ(t){return t.startsWith(ac.URL_SCHEME)?t.slice(ac.URL_SCHEME.length):t}class ac{constructor(e){if(!Ae().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=LP(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=Tm(e),i=ks.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,XY(i));const s={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(s)),{modelArtifactsInfo:a}}catch{throw zP(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=a;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const o=JSON.parse(i);n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(n.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)}const s=this.LS.getItem(this.keys.weightData);if(s==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=KY(s),n}}ac.URL_SCHEME="localstorage://";const UP=t=>Ae().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ac.URL_SCHEME)?dZ(t.slice(ac.URL_SCHEME.length)):null;Xn.registerSaveRouter(UP);Xn.registerLoadRouter(UP);function dZ(t){return new ac(t)}class pZ{constructor(){Y(Ae().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Y(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Nf+ko,r=ko+BP;for(let a=0;a<this.LS.length;++a){const i=this.LS.key(a);if(i.startsWith(n)&&i.endsWith(r)){const s=cZ(i);e[s]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=fZ(e);const n=LP(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return zP(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _f="://";class ba{constructor(){this.managers={}}static getInstance(){return ba.instance==null&&(ba.instance=new ba),ba.instance}static registerManager(e,n){Y(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(_f)&&(e=e.slice(0,e.indexOf(_f))),Y(e.length>0,()=>"scheme must not be an empty string.");const r=ba.getInstance();Y(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=ba.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(ba.getInstance().managers)}}function gy(t){if(t.indexOf(_f)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${ba.getSchemes().join(",")}`);return{scheme:t.split(_f)[0],path:t.split(_f)[1]}}async function VP(t,e,n=!1){Y(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Xn.getLoadHandlers(t);Y(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),Y(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const a=r[0],i=Xn.getSaveHandlers(e);Y(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),Y(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const s=i[0],o=gy(t).scheme,u=gy(t).path,l=o===gy(t).scheme,c=await a.load();n&&l&&await ba.getManager(o).removeModel(u);const f=await s.save(c);return n&&!l&&await ba.getManager(o).removeModel(u),f.modelArtifactsInfo}async function hZ(){const t=ba.getSchemes(),e={};for(const n of t){const r=await ba.getManager(n).listModels();for(const a in r){const i=n+_f+a;e[i]=r[a]}}return e}async function mZ(t){const e=gy(t);return ba.getManager(e.scheme).removeModel(e.path)}async function gZ(t,e){return VP(t,e,!1)}async function vZ(t,e){return VP(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yZ{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!Ae().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const a=this.functionRefs[r.data.index];a(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return dP(e)}}if(Ae().get("IS_BROWSER")){Ae().setPlatform("browser",new yZ);try{ba.registerManager(ac.URL_SCHEME,new pZ)}catch{}try{ba.registerManager(rc.URL_SCHEME,new iZ)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bZ={importFetch:()=>require("node-fetch")};let y2;class xZ{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return Ae().global.fetch!=null?Ae().global.fetch(e,n):(y2==null&&(y2=bZ.importFetch()),y2(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}Ae().get("IS_NODE")&&!Ae().get("IS_BROWSER")&&Ae().setPlatform("node",new xZ);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qt(t,e="float32",n){return e=e||"float32",Di(t),new Nr(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wZ(t,e){const n=Q(t,"x","cast");if(!eY(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:e};return me.runKernel(Lh,r,a)}const st=de({cast_:wZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NZ(t){const n={x:Q(t,"x","clone","string_or_numeric")};return me.runKernel(Qh,n)}const Fo=de({clone_:NZ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WP(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */NP();const SZ={buffer:Qt,cast:st,clone:Fo,print:WP};OY(SZ);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CZ(t,e){let n=Q(t,"a","add"),r=Q(e,"b","add");[n,r]=rr(n,r);const a={a:n,b:r};return me.runKernel(vd,a)}const We=de({add_:CZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EZ(t,e){let n=Q(t,"a","floorDiv"),r=Q(e,"b","floorDiv");[n,r]=rr(n,r);const a={a:n,b:r};return me.runKernel(Yh,a)}const TE=de({floorDiv_:EZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DZ(t,e){let n=Q(t,"a","div"),r=Q(e,"b","div");if([n,r]=rr(n,r),n.dtype==="int32"&&r.dtype==="int32")return TE(n,r);const a={a:n,b:r},i={};return me.runKernel(qh,a,i)}const yt=de({div_:DZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TZ(t,e){let n=Q(t,"a","mul"),r=Q(e,"b","mul");[n,r]=rr(n,r);const a={a:n,b:r};return me.runKernel(om,a)}const ge=de({mul_:TZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Z(t){const e=Q(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return me.runKernel(e1,n)}else{const n={x:e};return me.runKernel(G0,n)}}const yr=de({abs_:$Z});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AZ(t){const n={x:Q(t,"x","acos")};return me.runKernel(_h,n)}const qP=de({acos_:AZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IZ(t){const n={x:Q(t,"x","acosh")};return me.runKernel(Oh,n)}const GP=de({acosh_:IZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kZ(t){Y(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),Y(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((a,i)=>Q(a,`tensors${i}`,"addN")),n=e[0];e.forEach(a=>{if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(a=>{if(!un(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return me.runKernel(H0,r)}const _Z=de({addN_:kZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OZ(t,e=null,n=!1){const a={x:Q(t,"x","all","bool")},i={axis:e,keepDims:n};return me.runKernel(xC,a,i)}const $E=de({all_:OZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FZ(t,e=null,n=!1){const a={x:Q(t,"x","any","bool")},i={axis:e,keepDims:n};return me.runKernel(wC,a,i)}const Ky=de({any_:FZ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RZ(t,e=0){const r={x:Q(t,"x","argMax")},a={axis:e};return me.runKernel(j0,r,a)}const Xf=de({argMax_:RZ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MZ(t,e=0){const r={x:Q(t,"x","argMin")},a={axis:e};return me.runKernel(X0,r,a)}const HP=de({argMin_:MZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PZ(t){const n={x:Q(t,"x","asin")};return me.runKernel(Fh,n)}const jP=de({asin_:PZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BZ(t){const n={x:Q(t,"x","asinh")};return me.runKernel(Rh,n)}const XP=de({asinh_:BZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LZ(t){const n={x:Q(t,"x","atan")};return me.runKernel(Mh,n)}const KP=de({atan_:LZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zZ(t,e){let n=Q(t,"a","atan2"),r=Q(e,"b","atan2");[n,r]=rr(n,r);const a={a:n,b:r};return me.runKernel(Bh,a)}const YP=de({atan2_:zZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UZ(t){const n={x:Q(t,"x","atanh")};return me.runKernel(Ph,n)}const ZP=de({atanh_:UZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $m(t,e,n,r,a="NHWC",i){const s=t[3],o=[...e,s],u=Xo(a);return Rr(t,o,n,i,r,null,null,u)}function is(t,e,n,r,a,i,s="channelsLast"){const[o,u]=ih(e);let l;if(s==="channelsLast")l=[o,u,t[3],t[3]];else if(s==="channelsFirst")l=[o,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return Rr(t,l,n,r,a,i,!1,s)}function jo(t,e,n,r,a,i,s="NDHWC"){const[o,u,l]=JN(e);let c,f;if(s==="NDHWC")f="channelsLast",c=[o,u,l,t[4],t[4]];else if(s==="NCDHW")f="channelsFirst",c=[o,u,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return tl(t,c,n,r,a,!1,f,i)}function Rr(t,e,n,r,a,i,s=!1,o="channelsLast"){let[u,l,c,f]=[-1,-1,-1,-1];if(o==="channelsLast")[u,l,c,f]=t;else if(o==="channelsFirst")[u,f,l,c]=t;else throw new Error(`Unknown dataFormat ${o}`);const[d,h,,m]=e,[v,y]=ih(n),[b,w]=ih(r),x=Of(d,b),S=Of(h,w),{padInfo:C,outHeight:E,outWidth:A}=qZ(a,l,c,v,y,x,S,i,o),k=s?m*f:m;let T;return o==="channelsFirst"?T=[u,k,E,A]:o==="channelsLast"&&(T=[u,E,A,k]),{batchSize:u,dataFormat:o,inHeight:l,inWidth:c,inChannels:f,outHeight:E,outWidth:A,outChannels:k,padInfo:C,strideHeight:v,strideWidth:y,filterHeight:d,filterWidth:h,effectiveFilterHeight:x,effectiveFilterWidth:S,dilationHeight:b,dilationWidth:w,inShape:t,outShape:T,filterShape:e}}function tl(t,e,n,r,a,i=!1,s="channelsLast",o){let[u,l,c,f,d]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[u,l,c,f,d]=t;else if(s==="channelsFirst")[u,d,l,c,f]=t;else throw new Error(`Unknown dataFormat ${s}`);const[h,m,v,,y]=e,[b,w,x]=JN(n),[S,C,E]=JN(r),A=Of(h,S),k=Of(m,C),T=Of(v,E),{padInfo:I,outDepth:$,outHeight:O,outWidth:B}=GZ(a,l,c,f,b,w,x,A,k,T,o),z=i?y*d:y;let L;return s==="channelsFirst"?L=[u,z,$,O,B]:s==="channelsLast"&&(L=[u,$,O,B,z]),{batchSize:u,dataFormat:s,inDepth:l,inHeight:c,inWidth:f,inChannels:d,outDepth:$,outHeight:O,outWidth:B,outChannels:z,padInfo:I,strideDepth:b,strideHeight:w,strideWidth:x,filterDepth:h,filterHeight:m,filterWidth:v,effectiveFilterDepth:A,effectiveFilterHeight:k,effectiveFilterWidth:T,dilationDepth:S,dilationHeight:C,dilationWidth:E,inShape:t,outShape:L,filterShape:e}}function VZ(t,e,n,r,a){r==null&&(r=AE(t,e,n));const i=t[0],s=t[1],o=sh((i-e+2*r)/n+1,a),u=sh((s-e+2*r)/n+1,a);return[o,u]}function WZ(t,e,n,r,a,i){a==null&&(a=AE(t,e[0],r[0]));const s=[0,0,0,n];for(let o=0;o<3;o++)t[o]+2*a>=e[o]&&(s[o]=sh((t[o]-e[o]+2*a)/r[o]+1,i));return s}function AE(t,e,n,r=1){const a=Of(e,r);return Math.floor((t[0]*(n-1)-n+a)/2)}function ih(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function JN(t){return typeof t=="number"?[t,t,t]:t}function Of(t,e){return e<=1?t:t+(t-1)*(e-1)}function qZ(t,e,n,r,a,i,s,o,u){let l,c,f;if(typeof t=="number"){l={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=VZ([e,n],i,r,t,o);c=h[0],f=h[1]}else if(t==="same"){c=Math.ceil(e/r),f=Math.ceil(n/a);const d=Math.max(0,(c-1)*r+i-e),h=Math.max(0,(f-1)*a+s-n),m=Math.floor(d/2),v=d-m,y=Math.floor(h/2),b=h-y;l={top:m,bottom:v,left:y,right:b,type:"SAME"}}else if(t==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),f=Math.ceil((n-s+1)/a);else if(typeof t=="object"){const d=u==="channelsLast"?t[1][0]:t[2][0],h=u==="channelsLast"?t[1][1]:t[2][1],m=u==="channelsLast"?t[2][0]:t[3][0],v=u==="channelsLast"?t[2][1]:t[3][1];l={top:d,bottom:h,left:m,right:v,type:d===0&&h===0&&m===0&&v===0?"VALID":"EXPLICIT"},c=sh((e-i+d+h)/r+1,o),f=sh((n-s+m+v)/a+1,o)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:l,outHeight:c,outWidth:f}}function GZ(t,e,n,r,a,i,s,o,u,l,c){let f,d,h,m;if(t==="valid"&&(t=0),typeof t=="number"){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const y=WZ([e,n,r,1],[o,u,l],1,[a,i,s],t,c);d=y[0],h=y[1],m=y[2]}else if(t==="same"){d=Math.ceil(e/a),h=Math.ceil(n/i),m=Math.ceil(r/s);const v=(d-1)*a+o-e,y=(h-1)*i+u-n,b=(m-1)*s+l-r,w=Math.floor(v/2),x=v-w,S=Math.floor(y/2),C=y-S,E=Math.floor(b/2),A=b-E;f={top:S,bottom:C,left:E,right:A,front:w,back:x,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:f,outDepth:d,outHeight:h,outWidth:m}}function sh(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function zu(t){const[e,n,r]=ih(t);return e===1&&n===1&&r===1}function Yr(t,e){return zu(t)||zu(e)}function ic(t){return ih(t).every(e=>e>0)}function Xo(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Ta(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")Y(Hf(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(a=>{Y(Hf(a),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${a}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HZ(t,e){const r={x:Q(t,"x","reshape","string_or_numeric")},a={shape:e};return me.runKernel(F1,r,a)}const be=de({reshape_:HZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jZ(t,e,n,r,a){const i=Q(t,"x","avgPool","float32"),s=1;Y(Yr(n,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let o=i,u=!1;i.rank===3&&(u=!0,o=be(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Y(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),Ta("avgPool",r,a);const l={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a};let f=me.runKernel(K0,l,c);return f=st(f,i.dtype),u?be(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const K1=de({avgPool_:jZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XZ(t,e,n,r,a,i="NDHWC"){const s=Q(t,"x","avgPool3d","float32");let o=s,u=!1;s.rank===4&&(u=!0,o=be(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Y(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),Y(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Y(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Ta("avgPool3d",r,a);const l={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i};let f=me.runKernel(Y0,l,c);return f=st(f,o.dtype),u?be(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const QP=de({avgPool3d_:XZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KZ(t,e=0){Y(t.length>=1,()=>"Pass at least one tensor to concat");const n=Xy(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Fo(n[0]);const r=n,a={axis:e};return me.runKernel(t1,r,a)}const hr=de({concat_:KZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YZ(t,e,n=!1,r=!1){let a=Q(t,"a","matMul"),i=Q(e,"b","matMul");[a,i]=rr(a,i);const s={a,b:i},o={transposeA:n,transposeB:r};return me.runKernel(Z0,s,o)}const Jt=de({matMul_:YZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZZ(t){const n={x:Q(t,"x","sigmoid","float32")};return me.runKernel(ym,n)}const to=de({sigmoid_:ZZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QZ(t,e,n){const r=Q(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const a={x:r},i={begin:e,size:n};return me.runKernel(L1,a,i)}const ln=de({slice_:QZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JZ(t){const n={x:Q(t,"x","tanh","float32")};return me.runKernel(Cm,n)}const sc=de({tanh_:JZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eQ(t,e,n,r,a,i){const s=Q(t,"forgetBias","basicLSTMCell"),o=Q(e,"lstmKernel","basicLSTMCell"),u=Q(n,"lstmBias","basicLSTMCell"),l=Q(r,"data","basicLSTMCell"),c=Q(a,"c","basicLSTMCell"),f=Q(i,"h","basicLSTMCell"),d=hr([l,f],1),h=Jt(d,o),m=We(h,u),v=m.shape[0],y=m.shape[1]/4,b=[v,y],w=ln(m,[0,0],b),x=ln(m,[0,y],b),S=ln(m,[0,y*2],b),C=ln(m,[0,y*3],b),E=We(ge(to(w),sc(x)),ge(c,to(We(s,S)))),A=ge(sc(E),to(C));return[E,A]}const tQ=de({basicLSTMCell_:eQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nQ(t,e,n){const r=Q(t,"x","batchToSpaceND"),a=e.reduce((o,u)=>o*u);Y(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),Y(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),Y(r.shape[0]%a===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${a}`);const i={x:r},s={blockShape:e,crops:n};return me.runKernel(Q0,i,s)}const Y1=de({batchToSpaceND_:nQ});function rQ(t){let e;return t.rank===0||t.rank===1?e=be(t,[1,1,1,t.size]):t.rank===2?e=be(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aQ(t,e,n,r,a,i){i==null&&(i=.001);const s=Q(t,"x","batchNorm"),o=Q(e,"mean","batchNorm"),u=Q(n,"variance","batchNorm");let l;a!=null&&(l=Q(a,"scale","batchNorm"));let c;r!=null&&(c=Q(r,"offset","batchNorm")),Y(o.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y(l==null||o.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:rQ(s),scale:l,offset:c,mean:o,variance:u},h={varianceEpsilon:i},m=me.runKernel(c1,d,h);return be(m,s.shape)}const Am=de({batchNorm_:aQ});function iQ(t,e,n,r,a,i){const s=Q(t,"x","batchNorm"),o=Q(e,"mean","batchNorm"),u=Q(n,"variance","batchNorm");let l;a!=null&&(l=Q(a,"scale","batchNorm"));let c;return r!=null&&(c=Q(r,"offset","batchNorm")),Y(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),Y(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),Y(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),l!=null&&Y(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&Y(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Am(s,o,u,c,l,i)}const JP=de({batchNorm2d_:iQ});function sQ(t,e,n,r,a,i){const s=Q(t,"x","batchNorm"),o=Q(e,"mean","batchNorm"),u=Q(n,"variance","batchNorm");let l;a!=null&&(l=Q(a,"scale","batchNorm"));let c;return r!=null&&(c=Q(r,"offset","batchNorm")),Y(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),Y(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),Y(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),l!=null&&Y(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&Y(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Am(s,o,u,c,l,i)}const eB=de({batchNorm3d_:sQ});function oQ(t,e,n,r,a,i){const s=Q(t,"x","batchNorm"),o=Q(e,"mean","batchNorm"),u=Q(n,"variance","batchNorm");let l;a!=null&&(l=Q(a,"scale","batchNorm"));let c;return r!=null&&(c=Q(r,"offset","batchNorm")),Y(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),Y(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),Y(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),l!=null&&Y(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&Y(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Am(s,o,u,c,l,i)}const tB=de({batchNorm4d_:oQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uQ(t,e,n){const r=Q(t,"x","bincount"),a=Q(e,"weights","bincount");Y(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),Y(n>=0,()=>`size must be non-negative, but got ${n}.`),Y(a.size===r.size||a.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`);const i={x:r,weights:a},s={size:n};return me.runKernel(CC,i,s)}const nB=de({bincount_:uQ});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lQ(t,e){const n=Q(t,"x","bitwiseAnd"),r=Q(e,"y","bitwiseAnd");if(!un(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const a={a:n,b:r};return me.runKernel(J0,a)}const cQ=de({bitwiseAnd_:lQ});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fQ(t,e){const n=Q(t,"s0","broadcastArgs","int32"),r=Q(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const a={s0:n,s1:r};return me.runKernel(EC,a)}const dQ=de({broadcastArgs_:fQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pQ(t,e){let n=Q(t,"broadcastTo","x");const r=n.shape;if(Di(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=be(n,l)}const a=n.shape,i=Array.from(e);for(let l=e.length-1;l>=0;l--)if(a[l]===e[l])i[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((l,c)=>l>1?c:-1).filter(l=>l>=0).length===0)return Fo(n);const o={x:n},u={reps:i};return me.runKernel(Em,o,u)}const Ff=de({broadcastTo_:pQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hQ(t){const n={x:Q(t,"x","ceil","float32")};return me.runKernel(zh,n)}const rB=de({ceil_:hQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yd(t,e,n){Di(t),n=n||md(e);const r={shape:t,value:e,dtype:n};return me.runKernel(zC,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mQ(t,e,n){const r=Q(t,"x","clipByValue");if(Y(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return yd(r.shape,e,r.dtype);const a={x:r},i={clipValueMin:e,clipValueMax:n};return me.runKernel(Uh,a,i)}const ui=de({clipByValue_:mQ});function gQ(t){return hr(t,0)}const aB=de({concat1d_:gQ});function vQ(t,e){return hr(t,e)}const iB=de({concat2d_:vQ});function yQ(t,e){return hr(t,e)}const sB=de({concat3d_:yQ});function bQ(t,e){return hr(t,e)}const oB=de({concat4d_:bQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xQ(t,e,n,r,a="NHWC",i=[1,1],s){const o=Q(t,"x","conv2d","float32"),u=Q(e,"filter","conv2d","float32");let l=o,c=!1;o.rank===3&&(c=!0,l=be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Y(l.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),Y(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),Ta("conv2d",r,s);const f=a==="NHWC"?l.shape[3]:l.shape[1];Y(f===u.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${u.shape[2]}.`),Y(Yr(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Y(ic(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),Y(ic(n),()=>"Error in conv2D: Strides should be larger than 0.");const d={x:l,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s},m=me.runKernel(n1,d,h);return c?be(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const Uu=de({conv2d_:xQ});function wQ(t,e,n,r,a="NWC",i=1,s){const o=Q(t,"x","conv1d"),u=Q(e,"filter","conv1d");let l=o,c=!1;o.rank===2&&(c=!0,l=be(o,[1,o.shape[0],o.shape[1]])),Y(l.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),Y(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),Ta("conv1d",r,s),Y(l.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${u.shape[1]}.`),Y(Yr(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),Y(ic(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),Y(ic(n),()=>"Error in conv1D: Stride should be larger than 0."),Y(a==="NWC",()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);const f=be(u,[1,u.shape[0],u.shape[1],u.shape[2]]),d=be(l,[l.shape[0],1,l.shape[1],l.shape[2]]),y=Uu(d,f,[1,n],r,"NHWC",[1,i],s);return c?be(y,[y.shape[2],y.shape[3]]):be(y,[y.shape[0],y.shape[2],y.shape[3]])}const IE=de({conv1d_:wQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NQ(t,e,n,r,a,i="NHWC",s){Y(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,u=e,l=!1;e.rank===3&&(l=!0,u=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,t[0],t[1],t[2]]),Y(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),Y(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),Y(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=i==="NHWC"?o[3]:o[1],f=i==="NHWC"?u.shape[3]:u.shape[1];Y(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),Y(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),Ta("conv2dDerInput",a,s);const d={dy:u,filter:n},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:s,inputShape:o},m=me.runKernel(r1,d,h);return l?be(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const kE=de({conv2DBackpropInput_:NQ});function SQ(t,e,n,r,a,i){const s=Q(t,"x","conv2dTranspose"),o=Q(e,"filter","conv2dTranspose");return kE(n,s,o,r,a,"NHWC",i)}const _E=de({conv2dTranspose_:SQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CQ(t,e,n,r,a="NDHWC",i=[1,1,1]){const s=Q(t,"x","conv3d"),o=Q(e,"filter","conv3d");let u=s,l=!1;s.rank===4&&(l=!0,u=be(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Y(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),Y(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),Y(u.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${o.shape[3]}.`),Y(Yr(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Y(a==="NDHWC",()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`),Y(ic(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),Y(ic(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:u,filter:o},f={strides:n,pad:r,dataFormat:a,dilations:i},d=me.runKernel(a1,c,f);return l?be(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const uB=de({conv3d_:CQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EQ(t,e,n,r,a){Y(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,s=e,o=!1;e.rank===4&&(o=!0,s=be(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const u=i[4],l=s.shape[4];Y(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),Y(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),Y(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),Y(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),Y(l===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${n.shape[4]}.`);const c={dy:s,filter:n},f={pad:a,strides:r,inputShape:i},d=me.runKernel(AC,c,f);return o?be(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const lB=de({conv3DBackpropInput_:EQ});function DQ(t,e,n,r,a){const i=Q(t,"x","conv3dTranspose"),s=Q(e,"filter","conv3dTranspose");return lB(n,i,s,r,a)}const cB=de({conv3dTranspose_:DQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TQ(t){const n={x:Q(t,"x","cos","float32")};return me.runKernel(Vh,n)}const Z1=de({cos_:TQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Q(t){const n={x:Q(t,"x","cosh","float32")};return me.runKernel(Wh,n)}const OE=de({cosh_:$Q});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AQ(t,e=0,n=!1,r=!1){const i={x:Q(t,"x","cumprod")},s={axis:e,exclusive:n,reverse:r};return me.runKernel(IC,i,s)}const Yy=de({cumprod_:AQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IQ(t,e=0,n=!1,r=!1){const i={x:Q(t,"x","cumsum")},s={axis:e,exclusive:n,reverse:r};return me.runKernel(i1,i,s)}const FE=de({cumsum_:IQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kQ(t,e,n,r=!1){const a=Q(t,"x","denseBincount"),i=Q(e,"weights","denseBincount");Y(a.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`),Y(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),Y(n>=0,()=>`size must be non-negative, but got ${n}.`),Y(i.size===a.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${i.shape}.`);const s={x:a,weights:i},o={size:n,binaryOutput:r};return me.runKernel(_C,s,o)}const eS=de({denseBincount_:kQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Q(t,e,n="NHWC"){const r=Q(t,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];Y(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),Y(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e}  for depthToSpace with input shape
    ${r.shape}`),Y(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),Y(s%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${s} for depthToSpace with input shape ${r.shape}`);const o={x:r},u={blockSize:e,dataFormat:n};return me.runKernel(OC,o,u)}const fB=de({depthToSpace_:_Q});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OQ(t,e,n,r,a="NHWC",i=[1,1],s){const o=Q(t,"x","depthwiseConv2d","float32"),u=Q(e,"filter","depthwiseConv2d","float32");let l=o,c=!1;o.rank===3&&(c=!0,l=be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Y(l.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`),Y(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);const f=a==="NHWC"?l.shape[3]:l.shape[1];Y(f===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${u.shape[2]}.`),Ta("depthwiseConv2d",r,s);const d={x:l,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s},m=me.runKernel(s1,d,h);return c?be(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const Im=de({depthwiseConv2d_:OQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FQ(t){const n={x:Q(t,"x","diag")};return me.runKernel(MC,n)}const RQ=de({diag_:FQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MQ(t,e,n,r,a=[1,1],i="NHWC"){const s=Q(t,"x","dilation2d"),o=Q(e,"filter","dilation2d");Y(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),Y(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),Y(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let u=s,l=!1;s.rank===3&&(u=be(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=!0),Y(u.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${o.shape[2]}`);const c={x:u,filter:o},f={strides:n,pad:r,dilations:a},d=me.runKernel(o1,c,f);return l?be(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const dB=de({dilation2d_:MQ});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kf(t,e){const n=t.length,r=[];for(let a=0;a<n;a++){const i=n-1-a,s=t[i]||1;(e[e.length-1-a]||1)>1&&s===1&&r.unshift(i)}return r}function Er(t,e){const n=[];for(let r=0;r<e.length;r++){const a=t[t.length-r-1],i=e.length-r-1,s=e[i];(a==null||a===1&&s>1)&&n.unshift(i)}return n}function Wt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let a=0;a<n;a++){let i=t[t.length-a-1];i==null&&(i=1);let s=e[e.length-a-1];if(s==null&&(s=1),i===1)r[n-a-1]=s;else if(s===1)r[n-a-1]=i;else if(i!==s){const o=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(o)}else r[n-a-1]=i}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PQ(t,e){let n=Q(t,"a","equal","string_or_numeric"),r=Q(e,"b","equal","string_or_numeric");[n,r]=rr(n,r),Wt(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(u1,a)}const Ts=de({equal_:PQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BQ(t,e,n){const r=Q(e,"a","where"),a=Q(n,"b","where"),i=Q(t,"condition","where","bool"),s=Wt(Wt(i.shape,r.shape),a.shape),o=Ff(i,s),u=Ff(r,s),l=Ff(a,s),c={condition:o,t:u,e:l};return me.runKernel(B1,c)}const ia=de({where_:BQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LQ(t){const n={x:Q(t,"x","zerosLike")};return me.runKernel(j1,n)}const dn=de({zerosLike_:LQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zQ(t,e){let n=Q(t,"a","div"),r=Q(e,"b","div");[n,r]=rr(n,r);const a=yt(n,r),i=dn(a),s=Ts(r,i);return ia(s,i,a)}const pB=de({divNoNan_:zQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UQ(t,e){const n=Q(t,"t1","dot"),r=Q(e,"t2","dot");Y((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(Y(a===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${i}.`),n.rank===1&&r.rank===1){const s=be(n,[1,-1]),o=be(r,[-1,1]),u=Jt(s,o);return be(u,[])}else if(n.rank===1&&r.rank===2){const s=be(n,[1,-1]),o=be(r,[r.shape[0],r.shape[1]]),u=Jt(s,o);return be(u,[u.size])}else if(n.rank===2&&r.rank===1){const s=be(r,[-1,1]),o=Jt(n,s);return be(o,[o.size])}else{const s=be(r,[r.shape[0],r.shape[1]]);return Jt(n,s)}}const hB=de({dot_:UQ});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VQ(t,...e){const n=e.map((a,i)=>Q(a,`tensors${i}`,"einsum")),r={equation:t};return me.runKernel(PC,n,r)}const Sf=de({einsum_:VQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WQ(t){const n={x:Q(t,"x","elu","float32")};return me.runKernel(Gh,n)}const km=de({elu_:WQ});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qQ(t,e){const n=Q(t,"x","ensureShape","string_or_numeric");if(!QK(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const GQ=de({ensureShape_:qQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HQ(t){let e=Q(t,"x","erf");Y(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=st(e,"float32"));const n={x:e};return me.runKernel(Hh,n)}const RE=de({erf_:HQ});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ME(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function mB(t,e,n){const r=t.length+e.length,a=[];let i=0,s=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?a.push(t[i++]):a.push(e[s++]);return a}function Mr(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const a=e.map(i=>t[i]);return[n,a]}function or(t,e){const n=e.map(r=>1);return mB(t,n,e)}function Zr(t,e,n){Y(ME(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Zn(t,e){if(ME(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function nl(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function ur(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jQ(t,e=null,n=!1){const a={x:Q(t,"x","max")},i={reductionIndices:e,keepDims:n};return me.runKernel(x1,a,i)}const Qi=de({max_:jQ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XQ(t,e=null,n=!1){const a={x:Q(t,"x","min")},i={axis:e,keepDims:n};return me.runKernel(C1,a,i)}const oh=de({min_:XQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KQ(t,e){let n=Q(t,"base","pow"),r=Q(e,"exp","pow");[n,r]=rr(n,r);const a={a:n,b:r};return me.runKernel(um,a)}const zo=de({pow_:KQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function St(t,e){if((ts(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&ts(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return el(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YQ(t){const n={x:Q(t,"x","sqrt","float32")};return me.runKernel(xm,n)}const Kr=de({sqrt_:YQ});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZQ(t){const e=Q(t,"x","square"),n={};return me.runKernel("Square",{x:e},n)}const On=de({square_:ZQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QQ(t,e=null,n=!1){let r=Q(t,"x","sum");r.dtype==="bool"&&(r=st(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return me.runKernel(z1,a,i)}const pt=de({sum_:QQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JQ(t,e="euclidean",n=null,r=!1){t=Q(t,"x","norm");const a=gB(t,e,n);let i=a.shape;if(r){const s=tn(n,t.shape);i=or(a.shape,s)}return be(a,i)}function gB(t,e,n=null){if(t.rank===0)return yr(t);if(t.rank!==1&&n===null)return gB(be(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return pt(yr(t),n);if(e===1/0)return Qi(yr(t),n);if(e===-1/0)return oh(yr(t),n);if(e==="euclidean"||e===2)return Kr(pt(zo(yr(t),St(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Qi(pt(yr(t),n[0]),n[1]-1);if(e===1/0)return Qi(pt(yr(t),n[1]),n[0]);if(e===-1/0)return oh(pt(yr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Kr(pt(On(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const _m=de({norm_:JQ});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eJ(t,e=null,n=!1){return _m(t,"euclidean",e,n)}const vB=de({euclideanNorm_:eJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tJ(t){const n={x:Q(t,"x","exp")};return me.runKernel(jh,n)}const li=de({exp_:tJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nJ(t,e=0){const n=Q(t,"x","expandDims","string_or_numeric");Y(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},a={dim:e};return me.runKernel(l1,r,a)}const wa=de({expandDims_:nJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rJ(t){const n={x:Q(t,"x","expm1")};return me.runKernel(Xh,n)}const yB=de({expm1_:rJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aJ(t,e){const n=Q(t,"x","tile","string_or_numeric");Y(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},a={reps:e};return me.runKernel(Em,r,a)}const ji=de({tile_:aJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iJ(t,e,n,r="float32"){e==null&&(e=t);const a=Qt([t,e],r),i=t<=e?t:e;for(let o=0;o<i;++o)a.set(1,o,o);const s=be(a.toTensor(),[t,e]);if(n==null)return s;if(n.length===1)return ji(wa(s,0),[n[0],1,1]);if(n.length===2)return ji(wa(wa(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return ji(wa(wa(wa(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const PE=de({eye_:iJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sJ(t){const n={x:Q(t,"x","floor","float32")};return me.runKernel(Kh,n)}const Om=de({floor_:sJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oJ(t,e,n=0,r=0){const a=Q(t,"x","gather"),i=Q(e,"indices","gather","int32"),s={x:a,indices:i},o={axis:n,batchDims:r};return me.runKernel(f1,s,o)}const Fm=de({gather_:oJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uJ(t,e){let n=Q(t,"a","greater","string_or_numeric"),r=Q(e,"b","greater","string_or_numeric");[n,r]=rr(n,r),Wt(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(d1,a)}const gi=de({greater_:uJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lJ(t,e){let n=Q(t,"a","greaterEqual","string_or_numeric"),r=Q(e,"b","greaterEqual","string_or_numeric");[n,r]=rr(n,r),Wt(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(Zh,a)}const rl=de({greaterEqual_:lJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cJ(t){const n={input:Q(t,"input","imag")};return me.runKernel(qC,n)}const Q1=de({imag_:cJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fJ(t){const n={x:Q(t,"x","isFinite")};return me.runKernel(Jh,n)}const bB=de({isFinite_:fJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dJ(t){const n={x:Q(t,"x","isInf")};return me.runKernel(em,n)}const xB=de({isInf_:dJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pJ(t){const n={x:Q(t,"x","isNaN")};return me.runKernel(tm,n)}const wB=de({isNaN_:pJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hJ(t,e=.2){const r={x:Q(t,"x","leakyRelu")},a={alpha:e};return me.runKernel(p1,r,a)}const J1=de({leakyRelu_:hJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mJ(t,e){let n=Q(t,"a","less","string_or_numeric"),r=Q(e,"b","less","string_or_numeric");[n,r]=rr(n,r),Wt(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(h1,a)}const uh=de({less_:mJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gJ(t,e){let n=Q(t,"a","lessEqual","string_or_numeric"),r=Q(e,"b","lessEqual","string_or_numeric");[n,r]=rr(n,r),Wt(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(m1,a)}const yc=de({lessEqual_:gJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vJ(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return me.runKernel(GC,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yJ(t,e=5,n=1,r=1,a=.5){const i=Q(t,"x","localResponseNormalization");Y(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),Y(Hf(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let s=i,o=!1;i.rank===3&&(o=!0,s=be(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const u={x:s},l={depthRadius:e,bias:n,alpha:r,beta:a},c=me.runKernel(b1,u,l);return o?be(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const NB=de({localResponseNormalization_:yJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bJ(t){const n={x:Q(t,"x","log","float32")};return me.runKernel(nm,n)}const Ci=de({log_:bJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xJ(t){const n={x:Q(t,"x","log1p")};return me.runKernel(rm,n)}const eb=de({log1p_:xJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wJ(t,e){Y(BN(t),()=>"The f passed in variableGrads(f) must be a function"),Y(e==null||Array.isArray(e)&&e.every(l=>l instanceof jy),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const l in me.registeredVariables)e.push(me.registeredVariables[l])}const r=n?e.filter(l=>!l.trainable):null,a=e.length;e=e.filter(l=>l.trainable),Y(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);const i=!0,{value:s,grads:o}=me.gradients(t,e,null,i);Y(o.some(l=>l!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),Y(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);const u={};return e.forEach((l,c)=>{o[c]!=null&&(u[l.name]=o[c])}),r!=null&&r.forEach(l=>u[l.name]=null),{value:s,grads:u}}function Uo(t){return me.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NJ(t){const n={x:Q(t,"x","neg")};return me.runKernel(D1,n)}const Un=de({neg_:NJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SJ(t){const n={x:Q(t,"x","softplus")};return me.runKernel(bm,n)}const bd=de({softplus_:SJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CJ(t){const e=Q(t,"x","logSigmoid");return Uo(r=>({value:Un(bd(Un(r))),gradFunc:s=>ge(s,to(Un(r)))}))(e)}const SB=de({logSigmoid_:CJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EJ(t,e){let n=Q(t,"a","sub"),r=Q(e,"b","sub");[n,r]=rr(n,r);const a={a:n,b:r};return me.runKernel(Nm,a)}const ct=de({sub_:EJ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DJ(t,e=-1){const n=Q(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Uo((a,i)=>{const o=Qi(a,e,!0),u=ct(a,o),l=ct(st(u,"float32"),Ci(pt(li(u),e,!0)));return i([l]),{value:l,gradFunc:(f,d)=>{const[h]=d,m=!0,v=li(h);return ct(f,ge(pt(f,e,m),v))}}})(n)}const BE=de({logSoftmax_:DJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TJ(t,e=null,n=!1){const r=Q(t,"x","logSumExp"),a=tn(e,r.shape),i=Qi(r,a,!0),s=ct(r,i),o=li(s),u=pt(o,a),l=Ci(u),c=We(be(i,l.shape),l);if(n){const f=or(c.shape,a);return be(c,f)}return c}const tb=de({logSumExp_:TJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $J(t,e){const n=Q(t,"a","logicalAnd","bool"),r=Q(e,"b","logicalAnd","bool");Wt(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(g1,a)}const so=de({logicalAnd_:$J});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AJ(t){const n={x:Q(t,"x","logicalNot","bool")};return me.runKernel(v1,n)}const nb=de({logicalNot_:AJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IJ(t,e){const n=Q(t,"a","logicalOr","bool"),r=Q(e,"b","logicalOr","bool");Wt(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(y1,a)}const LE=de({logicalOr_:IJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kJ(t,e){const n=Q(t,"a","logicalXor","bool"),r=Q(e,"b","logicalXor","bool");return Wt(n.shape,r.shape),so(LE(t,e),nb(so(t,e)))}const CB=de({logicalXor_:kJ});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ov=2147483648;function _J(t,e,n="left"){const r=Q(t,"sortedSequence","searchSorted"),a=Q(e,"values","searchSorted"),i=r.shape[r.shape.length-1],s=a.shape[a.shape.length-1],o=be(r,[-1,i]),u=be(a,[-1,s]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Oe(u.shape)>=Ov)throw new Error(`values tensor size must less than ${Ov}`);if(o.shape[1]>=Ov)throw new Error(`trailing dim_size must less than ${Ov} for int32 output type, was ${o.shape[1]}`);const l={sortedSequence:o,values:u},c={side:n};return me.runKernel(lE,l,c)}const zE=de({searchSorted_:_J});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OJ(t,e){return zE(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FJ(t,e,n,r,a){const i=Q(t,"x","maxPool"),s=1;let o=i,u=!1;i.rank===3&&(u=!0,o=be(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Y(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),Y(Yr(n,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Ta("maxPool",r,a);const l={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a},f=me.runKernel(w1,l,c);return u?be(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const rb=de({maxPool_:FJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RJ(t,e=[1,1,1],n,r,a,i="NDHWC"){const s=Q(t,"x","maxPool3d");let o=s,u=!1;s.rank===4&&(u=!0,o=be(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Y(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),Y(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Ta("maxPool3d",r,a);const l={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},f=me.runKernel(N1,l,c);return u?be(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const EB=de({maxPool3d_:RJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MJ(t,e,n,r,a=!1){const s={x:Q(t,"x","maxPoolWithArgmax")},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:a},u=me.runKernel(KC,s,o);return{result:u[0],indexes:u[1]}}const PJ=de({maxPoolWithArgmax_:MJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BJ(t,e){let n=Q(t,"a","maximum"),r=Q(e,"b","maximum");[n,r]=rr(n,r),n.dtype==="bool"&&(n=st(n,"int32"),r=st(r,"int32")),Wt(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(am,a)}const Ko=de({maximum_:BJ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LJ(t,e=null,n=!1){const a={x:Q(t,"x","mean")},i={axis:e,keepDims:n};return me.runKernel(S1,a,i)}const nr=de({mean_:LJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function br(t,e="float32"){if(Di(t),e==="complex64"){const r=br(t,"float32"),a=br(t,"float32");return Bu(r,a)}const n=oa(Oe(t),e);return me.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ai(t,e="float32"){if(Di(t),e==="complex64"){const r=ai(t,"float32"),a=br(t,"float32");return Bu(r,a)}const n=yC(Oe(t),e);return me.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zJ(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=Q(t,"x","meshgrid",t instanceof Kn?t.dtype:"float32");if(e===void 0)return[r];let a=Q(e,"y","meshgrid",e instanceof Kn?e.dtype:"float32");const i=Oe(r.shape),s=Oe(a.shape);return n==="xy"?(r=be(r,[1,-1]),a=be(a,[-1,1]),[Jt(ai([s,1],r.dtype),r),Jt(a,ai([1,i],a.dtype))]):(r=be(r,[-1,1]),a=be(a,[1,-1]),[Jt(r,ai([1,s],r.dtype)),Jt(ai([i,1],a.dtype),a)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UJ(t,e){let n=Q(t,"a","minimum"),r=Q(e,"b","minimum");[n,r]=rr(n,r),n.dtype==="bool"&&(n=st(n,"int32"),r=st(r,"int32")),Wt(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(im,a)}const oc=de({minimum_:UJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VJ(t,e,n){Y(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=Q(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Y(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const a=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)Y(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Y(e[o][0]>=0&&e[o][0]<=r.shape[o]-a&&e[o][1]>=0&&e[o][1]<=r.shape[o]-a,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-a} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},s={x:r};return me.runKernel(E1,s,i)}const DB=de({mirrorPad_:VJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WJ(t,e){let n=Q(t,"a","mod"),r=Q(e,"b","mod");[n,r]=rr(n,r);const a={a:n,b:r};return me.runKernel(sm,a)}const TB=de({mod_:WJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qJ(t,e=null,n=!1){t=Q(t,"x","moments");const r=tn(e,t.shape),a=nr(t,r,n);let i=a.shape;n||(i=or(a.shape,r));const s=On(ct(st(t,"float32"),be(a,i))),o=nr(s,r,n);return{mean:a,variance:o}}const ab=de({moments_:qJ});function GJ(t,e,n,r){const a=Q(e,"data","multiRNNCell"),i=Xy(n,"c","multiRNNCell"),s=Xy(r,"h","multiRNNCell");let o=a;const u=[];for(let f=0;f<t.length;f++){const d=t[f](o,i[f],s[f]);u.push(d[0]),u.push(d[1]),o=d[1]}const l=[],c=[];for(let f=0;f<u.length;f+=2)l.push(u[f]),c.push(u[f+1]);return[l,c]}const HJ=de({multiRNNCell_:GJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jJ(t,e,n,r=!1){const a=Q(t,"logits","multinomial"),i=a.size,s=a.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);n=n||Math.random();const u={logits:s===1?be(a,[1,-1]):a},l={numSamples:e,seed:n,normalized:r},c=me.runKernel(YC,u,l);return s===1?be(c,[c.size]):c}const XJ=de({multinomial_:jJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KJ(t,e){let n=Q(t,"a","notEqual","string_or_numeric"),r=Q(e,"b","notEqual","string_or_numeric");[n,r]=rr(n,r),Wt(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(T1,a)}const Yf=de({notEqual_:KJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YJ(t,e,n=1,r=0,a="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const s={indices:Q(t,"indices","oneHot","int32")},o={dtype:a,depth:e,onValue:n,offValue:r};return me.runKernel(A1,s,o)}const UE=de({oneHot_:YJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZJ(t){const n={x:Q(t,"x","onesLike")};return me.runKernel($1,n)}const Ei=de({onesLike_:ZJ});function QJ(t,e){const n=Q(t,"v1","outerProduct"),r=Q(e,"v2","outerProduct");Y(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const a=be(n,[-1,1]),i=be(r,[1,-1]);return Jt(a,i)}const JJ=de({outerProduct_:QJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eee(t,e,n=0){const r=Q(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:e,constantValue:n},i={x:r};return me.runKernel(k1,i,a)}const al=de({pad_:eee});function tee(t,e,n=0){return Y(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),al(t,[e],n)}const nee=de({pad1d_:tee});function ree(t,e,n=0){return Y(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),al(t,e,n)}const aee=de({pad2d_:ree});function iee(t,e,n=0){return Y(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),al(t,e,n)}const see=de({pad3d_:iee});function oee(t,e,n=0){return Y(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),al(t,e,n)}const uee=de({pad4d_:oee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lee(t,e,n){const r=Q(t,"x","spaceToBatchND");Y(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),Y(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),Y(r.shape.reduce((s,o,u)=>u>0&&u<=e.length?s&&(o+n[u-1][0]+n[u-1][1])%e[u-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const a={x:r},i={blockShape:e,paddings:n};return me.runKernel(U1,a,i)}const ib=de({spaceToBatchND_:lee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cee(t,e,n,r,a,i,s){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");const o=Q(t,"x","maxPool");let u=o,l=!1;o.rank===3&&(l=!0,u=be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Y(Yr(i,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`);const c=is(u.shape,e,i,a,r),f=[c.dilationHeight,c.dilationWidth];let d;r==="same"?d=dee([c.filterHeight,c.filterWidth],f):d=[[0,0],[0,0]];const h=f[0]===1&&f[1]===1,[m,v]=fee([c.inHeight,c.inWidth],f,d),y=h?r:"valid",b=h?u:ib(u,f,m),x=(n==="avg"?()=>K1(b,e,i,y,s):()=>rb(b,e,i,y,s))(),S=h?x:Y1(x,f,v);return l?be(S,[S.shape[1],S.shape[2],S.shape[3]]):S}function fee(t,e,n){const r=n.map(c=>c[0]),a=n.map(c=>c[1]),i=t.concat(r,a),s=e.map((c,f)=>(c-i[f]%c)%c),o=a.map((c,f)=>c+s[f]),u=e.map((c,f)=>[r[f],o[f]]),l=e.map((c,f)=>[0,s[f]]);return[u,l]}function dee(t,e){const r=t.map((s,o)=>s+(s-1)*(e[o]-1)).map(s=>s-1),a=r.map(s=>Math.floor(s/2)),i=r.map((s,o)=>s-a[o]);return r.map((s,o)=>[a[o],i[o]])}const $B=de({pool_:cee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pee(t,e){const n=Q(t,"x","prelu"),r=Q(e,"alpha","prelu"),a={x:n,alpha:r};return me.runKernel(_1,a)}const sb=de({prelu_:pee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hee(t,e=null,n=!1){let r=Q(t,"x","prod");r.dtype==="bool"&&(r=st(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return me.runKernel(O1,a,i)}const AB=de({prod_:hee});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mee(t,e,n,r){const a=t.map((c,f)=>Q(c,`tensors${f}`,"raggedGather","int32")),i=Q(e,"paramsDenseValues","raggedGather"),s=Q(n,"indices","raggedGather","int32"),o={paramsNestedSplits:a,paramsDenseValues:i,indices:s},u={outputRaggedRank:r},l=me.runKernel(eE,o,u);return{outputNestedSplits:l.slice(0,l.length-1),outputDenseValues:l[l.length-1]}}const gee=de({raggedGather_:mee});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vee(t,e,n){const r=Q(t,"starts","raggedRange"),a=Q(e,"limits","raggedRange",r.dtype),i=Q(n,"deltas","raggedRange",r.dtype),s={starts:r,limits:a,deltas:i},o=me.runKernel(tE,s);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}const yee=de({raggedRange_:vee});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bee(t,e,n,r,a){const i=Q(t,"shape","raggedTensorToTensor","int32"),s=Q(e,"values","raggedTensorToTensor"),o=Q(n,"defaultValue","raggedTensorToTensor",s.dtype),u=r.map((f,d)=>Q(f,`tensors${d}`,"raggedTensorToTensor","int32")),l={shape:i,values:s,defaultValue:o,rowPartitionTensors:u},c={rowPartitionTypes:a};return me.runKernel(nE,l,c)}const xee=de({raggedTensorToTensor_:bee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wee(t,e,n){Di(t);const r=Oe(t);let a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else if(n==="bool")a=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)a[i]=e();return me.makeTensor(a,t,n)}const Nee=de({rand_:wee});var vy={exports:{}},See=vy.exports,Jk;function Cee(){return Jk||(Jk=1,function(t){(function(e,n,r){function a(u){var l=this,c=o();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function i(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function s(u,l){var c=new a(u),f=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&i(f,c),d.state=function(){return i(c,{})}),d}function o(){var u=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=s:this.alea=s})(See,t)}(vy)),vy.exports}var yy={exports:{}},Eee=yy.exports,e_;function Dee(){return e_||(e_=1,function(t){(function(e,n,r){function a(o){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},o===(o|0)?u.x=o:l+=o;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function i(o,u){return u.x=o.x,u.y=o.y,u.z=o.z,u.w=o.w,u}function s(o,u){var l=new a(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=s:this.xor128=s})(Eee,t)}(yy)),yy.exports}var by={exports:{}},Tee=by.exports,t_;function $ee(){return t_||(t_=1,function(t){(function(e,n,r){function a(o){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,o===(o|0)?u.x=o:l+=o;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function i(o,u){return u.x=o.x,u.y=o.y,u.z=o.z,u.w=o.w,u.v=o.v,u.d=o.d,u}function s(o,u){var l=new a(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=s:this.xorwow=s})(Tee,t)}(by)),by.exports}var xy={exports:{}},Aee=xy.exports,n_;function Iee(){return n_||(n_=1,function(t){(function(e,n,r){function a(o){var u=this;u.next=function(){var c=u.x,f=u.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,u.i=f+1&7,h};function l(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(u,o)}function i(o,u){return u.x=o.x.slice(),u.i=o.i,u}function s(o,u){o==null&&(o=+new Date);var l=new a(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.x&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=s:this.xorshift7=s})(Aee,t)}(xy)),xy.exports}var wy={exports:{}},kee=wy.exports,r_;function _ee(){return r_||(r_=1,function(t){(function(e,n,r){function a(o){var u=this;u.next=function(){var c=u.w,f=u.X,d=u.i,h,m;return u.w=c=c+1640531527|0,m=f[d+34&127],h=f[d=d+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=f[d]=m^h,u.i=d,m+(c^c>>>16)|0};function l(c,f){var d,h,m,v,y,b=[],w=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,w=Math.max(w,f.length)),m=0,v=-32;v<w;++v)f&&(h^=f.charCodeAt((v+32)%f.length)),v===0&&(y=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(y=y+1640531527|0,d=b[v&127]^=h+y,m=d==0?m+1:0);for(m>=128&&(b[(f&&f.length||0)&127]=-1),m=127,v=4*128;v>0;--v)h=b[m+34&127],d=b[m=m+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,b[m]=h^d;c.w=y,c.X=b,c.i=m}l(u,o)}function i(o,u){return u.i=o.i,u.w=o.w,u.X=o.X.slice(),u}function s(o,u){o==null&&(o=+new Date);var l=new a(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.X&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=s:this.xor4096=s})(kee,t)}(wy)),wy.exports}var Ny={exports:{}},Oee=Ny.exports,a_;function Fee(){return a_||(a_=1,function(t){(function(e,n,r){function a(o){var u=this,l="";u.next=function(){var f=u.b,d=u.c,h=u.d,m=u.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^m,m=m-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-h|0,u.d=h<<16^d>>>16^m,u.a=m-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,o===Math.floor(o)?(u.a=o/4294967296|0,u.b=o|0):l+=o;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function i(o,u){return u.a=o.a,u.b=o.b,u.c=o.c,u.d=o.d,u}function s(o,u){var l=new a(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=s:this.tychei=s})(Oee,t)}(Ny)),Ny.exports}var Sy={exports:{}};const Ree={},Mee=Object.freeze(Object.defineProperty({__proto__:null,default:Ree},Symbol.toStringTag,{value:"Module"})),Pee=X9(Mee);var Bee=Sy.exports,i_;function Lee(){return i_||(i_=1,function(t){(function(e,n,r){var a=256,i=6,s=52,o="random",u=r.pow(a,i),l=r.pow(2,s),c=l*2,f=a-1,d;function h(S,C,E){var A=[];C=C==!0?{entropy:!0}:C||{};var k=b(y(C.entropy?[S,x(n)]:S??w(),3),A),T=new m(A),I=function(){for(var $=T.g(i),O=u,B=0;$<l;)$=($+B)*a,O*=a,B=T.g(1);for(;$>=c;)$/=2,O/=2,B>>>=1;return($+B)/O};return I.int32=function(){return T.g(4)|0},I.quick=function(){return T.g(4)/4294967296},I.double=I,b(x(T.S),n),(C.pass||E||function($,O,B,z){return z&&(z.S&&v(z,T),$.state=function(){return v(T,{})}),B?(r[o]=$,O):$})(I,k,"global"in C?C.global:this==r,C.state)}function m(S){var C,E=S.length,A=this,k=0,T=A.i=A.j=0,I=A.S=[];for(E||(S=[E++]);k<a;)I[k]=k++;for(k=0;k<a;k++)I[k]=I[T=f&T+S[k%E]+(C=I[k])],I[T]=C;(A.g=function($){for(var O,B=0,z=A.i,L=A.j,F=A.S;$--;)O=F[z=f&z+1],B=B*a+F[f&(F[z]=F[L=f&L+O])+(F[L]=O)];return A.i=z,A.j=L,B})(a)}function v(S,C){return C.i=S.i,C.j=S.j,C.S=S.S.slice(),C}function y(S,C){var E=[],A=typeof S,k;if(C&&A=="object")for(k in S)try{E.push(y(S[k],C-1))}catch{}return E.length?E:A=="string"?S:S+"\0"}function b(S,C){for(var E=S+"",A,k=0;k<E.length;)C[f&k]=f&(A^=C[f&k]*19)+E.charCodeAt(k++);return x(C)}function w(){try{var S;return d&&(S=d.randomBytes)?S=S(a):(S=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(S)),x(S)}catch{var C=e.navigator,E=C&&C.plugins;return[+new Date,e,E,e.screen,x(n)]}}function x(S){return String.fromCharCode.apply(0,S)}if(b(r.random(),n),t.exports){t.exports=h;try{d=Pee}catch{}}else r["seed"+o]=h})(typeof self<"u"?self:Bee,[],Math)}(Sy)),Sy.exports}var b2,s_;function zee(){if(s_)return b2;s_=1;var t=Cee(),e=Dee(),n=$ee(),r=Iee(),a=_ee(),i=Fee(),s=Lee();return s.alea=t,s.xor128=e,s.xorwow=n,s.xorshift7=r,s.xor4096=a,s.tychei=i,b2=s,b2}var Rm=zee();const IB=gc(Rm);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VE{constructor(e,n,r,a,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const s=i||Math.random();this.random=Rm.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){const a=this.nextVal;return this.nextVal=NaN,a}let e,n,r=!1;for(;!r;){let a,i,s;do a=2*this.random()-1,i=2*this.random()-1,s=a*a+i*i;while(s>=1||s===0);const o=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*a*o,n=this.mean+this.stdDev*i*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Uee{constructor(e,n,r,a){this.alpha=e,this.beta=1/n,this.dtype=r;const i=a||Math.random();this.randu=Rm.alea(i.toString()),this.randn=new VE(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,a,i,s;for(;;){do a=this.randn.nextValue(),s=1+this.c*a;while(s<=0);if(s*=s*s,e=a*a,n=1-.331*e*e,r=.5*e+this.d*(1-s+Math.log(s)),i=this.randu(),i<n||Math.log(i)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class Vee{constructor(e=0,n=1,r,a){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=Rm.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wee(t,e,n=1,r="float32",a){if(Di(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new Uee(e,n,r,a),s=Qt(t,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}const qee=de({randomGamma_:Wee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gee(t,e=0,n=1,r,a){if(Di(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new VE(e,n,r,!1,a),s=Qt(t,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}const WE=de({randomNormal_:Gee});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hee(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return WE(t,0,1,e,n)}const jee=de({randomStandardNormal_:Hee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xee(t,e=0,n=1,r="float32",a){Di(t);const i=Qt(t,r),s=new Vee(e,n,null,a);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}const bc=de({randomUniform_:Xee});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kee(t,e,n,r){return bc(t,e,n,"int32",r)}const Yee=de({randomUniformInt_:Kee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zf(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const a={start:t,stop:e,step:n,dtype:r};return me.runKernel(rE,{},a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zee(t){const n={input:Q(t,"input","real")};return me.runKernel(aE,n)}const lh=de({real_:Zee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qee(t){const n={x:Q(t,"x","reciprocal")};return me.runKernel(lm,n)}const kB=de({reciprocal_:Qee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jee(t){const n={x:Q(t,"x","relu")};return me.runKernel(cm,n)}const co=de({relu_:Jee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ete(t){const n={x:Q(t,"x","relu6")};return me.runKernel(fm,n)}const qE=de({relu6_:ete});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tte(t,e){const r={x:Q(t,"x","reverse")},a={dims:e};return me.runKernel(P1,r,a)}const ns=de({reverse_:tte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nte(t){const e=Q(t,"x","reverse");return Y(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),ns(e,0)}const rte=de({reverse1d_:nte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ate(t,e){const n=Q(t,"x","reverse");return Y(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),ns(n,e)}const ite=de({reverse2d_:ate});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ste(t,e){const n=Q(t,"x","reverse");return Y(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),ns(n,e)}const ote=de({reverse3d_:ste});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ute(t,e){const n=Q(t,"x","reverse");return Y(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),ns(n,e)}const lte=de({reverse4d_:ute});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cte(t){const n={x:Q(t,"x","round")};return me.runKernel(dm,n)}const GE=de({round_:cte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fte(t){const n={x:Q(t,"x","rsqrt","float32")};return me.runKernel(pm,n)}const HE=de({rsqrt_:fte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dte(t){const n={x:Q(t,"x","selu")};return me.runKernel(hm,n)}const jE=de({selu_:dte});function pte(t,e,n,r,a,i=[1,1],s="NHWC"){const o=Q(t,"x","separableConv2d"),u=Q(e,"depthwiseFilter","separableConv2d"),l=Q(n,"pointwiseFilter","separableConv2d");let c=o,f=!1;if(o.rank===3&&(f=!0,c=be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Y(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),Y(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),Y(l.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),Y(l.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`),Y(l.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`);const d=u.shape[2],h=u.shape[3];Y(l.shape[2]===d*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*h}, but got ${l.shape[2]}.`);const m=Im(c,u,r,a,s,i),y=Uu(m,l,1,"valid",s);return f?be(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const XE=de({separableConv2d_:pte});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function hte(t,e){const n=Q(t,"x","setdiff1d"),r=Q(e,"y","setdiff1d");Y(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),Y(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),Y(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const a=await n.data(),i=await r.data(),s=new Set(i);let o=0;for(let c=0;c<a.length;c++)s.has(a[c])||o++;const u=new Nr([o],n.dtype),l=new Nr([o],"int32");for(let c=0,f=0;c<a.length;c++)s.has(a[c])||(u.values[f]=a[c],l.values[f]=c,f++);return[u.toTensor(),l.toTensor()]}const mte=hte;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gte(t){const n={x:Q(t,"x","sign")};return me.runKernel(vm,n)}const _B=de({sign_:gte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vte(t){const n={x:Q(t,"x","sin","float32")};return me.runKernel(mm,n)}const KE=de({sin_:vte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yte(t){const n={x:Q(t,"x","sinh")};return me.runKernel(gm,n)}const YE=de({sinh_:yte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bte(t,e,n){const r=Q(t,"x","slice1d");return Y(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),ln(r,[e],[n])}const ob=de({slice1d_:bte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xte(t,e,n){const r=Q(t,"x","slice2d");return Y(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),ln(r,e,n)}const ZE=de({slice2d_:xte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wte(t,e,n){const r=Q(t,"x","slice3d");return Y(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),ln(r,e,n)}const ub=de({slice3d_:wte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nte(t,e,n){const r=Q(t,"x","slice4d");return Y(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),ln(r,e,n)}const ch=de({slice4d_:Nte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ste(t,e=-1){const n=Q(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},a={dim:e};return me.runKernel(W1,r,a)}const lb=de({softmax_:Ste});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cte(t){Y(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return me.runKernel(LC,e)}const cb=de({fft_:Cte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ete(t){Y(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return me.runKernel(WC,e)}const fh=de({ifft_:Ete});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dte(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const a=be(t,[n,e]);r=fh(a)}else{const a=[n,2*(e-1)],i=be(lh(t),[n,e]),s=be(Q1(t),[n,e]),o=ns(ln(i,[0,1],[n,e-2]),1),u=ge(ns(ln(s,[0,1],[n,e-2]),1),St(-1)),l=hr([i,o],1),c=hr([s,u],1),f=be(Bu(l,c),[a[0],a[1]]);r=fh(f)}if(r=lh(r),t.rank===3&&t.shape[0]!==0){const a=r,i=t.shape[0];r=be(r,[i,r.shape[0]/i,r.shape[1]]),a.dispose()}return r}const QE=de({irfft_:Dte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tte(t,e,n=0){const a={x:Q(t,"x","split")},i={numOrSizeSplits:e,axis:n};return me.runKernel(V1,a,i)}const ii=de({split_:Tte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $te(t,e){Y(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let a;if(e!=null&&e<n){const m=t.shape.map(y=>0),v=t.shape.map(y=>y);v[t.shape.length-1]=e,a=ln(t,m,v),n=e}else if(e!=null&&e>n){const m=t.shape.map(v=>v);m[t.shape.length-1]=e-n,a=hr([t,br(m)],t.shape.length-1),n=e}else a=t;const i=dn(a),s=be(Bu(a,i),[r,n]),o=cb(s),u=Math.floor(n/2)+1,l=lh(o),c=Q1(o),f=ii(l,[u,n-u],l.shape.length-1),d=ii(c,[u,n-u],c.shape.length-1),h=a.shape.slice();return h[a.shape.length-1]=u,be(Bu(f[0],d[0]),h)}const fb=de({rfft_:$te});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ate(t,e){let n=Q(t,"a","squaredDifference"),r=Q(e,"b","squaredDifference");[n,r]=rr(n,r),Wt(n.shape,r.shape);const a={a:n,b:r},i={};return me.runKernel(wm,a,i)}const JE=de({squaredDifference_:Ate});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ite(t,e){const n=Q(t,"x","squeeze","string_or_numeric");return be(n,Zu(n.shape,e).newShape)}const xc=de({squeeze_:Ite});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kte(t,e=0){const n=Xy(t,"tensors","stack","string_or_numeric");Y(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&Y(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,a={axis:e};return me.runKernel(I1,r,a)}const ci=de({stack_:kte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _te(t,e=0){const r={x:Q(t,"x","step")},a={alpha:e};return me.runKernel(Dm,r,a)}const xd=de({step_:_te});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ote(t,e,n,r,a=0,i=0,s=0,o=0,u=0){const c={x:Q(t,"x","stridedSlice","string_or_numeric")},f={begin:e,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:u};return me.runKernel(gE,c,f)}const OB=de({stridedSlice_:Ote});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fte(t){const n={x:Q(t,"x","tan","float32")};return me.runKernel(Sm,n)}const FB=de({tan_:Fte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function na(t,e){hd(t);const n=Ju(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return el(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rf(t,e,n){if(hd(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Ju(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return el(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rte(t,e,n){if(hd(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Ju(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return el(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mte(t,e,n){if(hd(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Ju(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return el(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pte(t,e,n){if(hd(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Ju(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return el(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bte(t,e,n){if(hd(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Ju(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,el(t,e,r,n)}function RB(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(i+` update.rank < ${a}. `);if(t.length<r+(n.rank-a))throw new Error(i+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+t.length-r)throw new Error(i+` update.rank != ${a+t.length-r}`);for(let s=0;s<a;++s)if(n.shape[s]!==e.shape[s])throw new Error(i+` updates.shape[${s}] (${n.shape[s]}) != indices.shape[${s}] (${e.shape[s]}).`);for(let s=0;s<n.rank-a;++s)if(n.shape[s+a]!==t[s+r])throw new Error(i+` updates.shape[${s+a}] (${n.shape[s+a]}) != shape[${s+a}] (${t[s+a]})`)}function eD(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}RB(n,e,t)}function wc(t,e,n){const r=e.shape.length,a=r>1?e.shape[r-1]:1,i=n.length;let s=1;for(let f=a;f<i;++f)s*=n[f];const o=a<1?1:a,u=Oe(e.shape)/o,l=[...wt(n.slice(0,a)),1],c=Oe(n);return{sliceRank:a,numUpdates:u,sliceSize:s,strides:l,outputSize:c}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lte(t,e,n){const r=Q(t,"tensor","tensorScatterupdate"),a=Q(e,"indices","tensorScatterupdate","int32"),i=Q(n,"updates","tensorScatterupdate");if(eD(i,a,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);const s={tensor:r,indices:a,updates:i},o={};return me.runKernel(uE,s,o)}const zte=de({tensorScatterUpdate_:Lte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ute(t,e=1,n=!0){const r=Q(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${e}`);const i={x:r},s={k:e,sorted:n},[o,u]=me.runKernel(xE,i,s);return{values:o,indices:u}}const MB=de({topk_:Ute});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vte(t,e=0,n=1,r,a){if(Di(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new VE(e,n,r,!0,a),s=Qt(t,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}const tD=de({truncatedNormal_:Vte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wte(t,e=0){const n=Q(t,"x","unique","string_or_numeric");Y(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},a={axis:e},[i,s]=me.runKernel(NE,r,a);return{values:i,indices:s}}const PB=de({unique_:Wte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qte(t,e,n){const r=Q(t,"x","unsortedSegmentSum"),a=Q(e,"segmentIds","unsortedSegmentSum","int32");Y(Hf(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:a},s={numSegments:n};return me.runKernel(H1,i,s)}const nD=de({unsortedSegmentSum_:qte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gte(t,e=0){const n=Q(t,"x","unstack","string_or_numeric");Y(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},a={axis:e};return me.runKernel(G1,r,a)}const rs=de({unstack_:Gte});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hte(t,e){return zE(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BB(t,e=!0,n,r){return me.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rD(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=Qt(t,"int32"),a=Qt([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const s=r.indexToLoc(n[i]),o=i*t.length;a.values.set(s,o)}return a.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function jte(t){const e=Q(t,"condition","whereAsync","bool"),n=await e.data(),r=rD(e.shape,n);return t!==e&&e.dispose(),r}const LB=jte;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Xte(t,e,n){const r=Q(t,"tensor","boolMask"),a=Q(e,"mask","boolMask","bool"),i=n??0,s=a.rank,o=r.shape;Y(s>0,()=>"mask cannot be scalar"),mi(o.slice(i,i+s),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let v=i;v<i+s;v++)u*=o[v];const l=o.slice(0,i).concat([u],o.slice(i+s)),c=be(r,l),f=be(a,[-1]),d=await LB(f),h=xc(d,[1]),m=Fm(c,h,i);return t!==r&&r.dispose(),e!==a&&a.dispose(),h.dispose(),c.dispose(),f.dispose(),d.dispose(),m}const Kte=Xte;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yte(t,e,n){const r=Q(t,"x","transpose");if(e==null&&(e=r.shape.map((s,o)=>o).reverse()),Y(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(s=>{Y(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const a={x:r},i={perm:e};return r.dtype==="complex64"?De(()=>{let s=lh(r),o=Q1(r);return s=me.runKernel(kf,{x:s},i),o=me.runKernel(kf,{x:o},i),n&&(o=Un(o)),Bu(s,o)}):me.runKernel(kf,a,i)}const cn=de({transpose_:Yte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zte(t,e,n,r,a=!0){const i=Q(t,"v","movingAverage"),s=Q(e,"x","movingAverage"),o=Q(n,"decay","movingAverage");RY(i,s),Y(un(i.shape,s.shape),()=>"Shape mismatch in v and x");const u=St(1),l=ct(u,o);let c=ge(ct(s,i),l);if(a){Y(r!=null,()=>"When using zeroDebias: true, step is required.");const f=Q(r,"step","movingAverage");c=yt(c,ct(u,zo(o,f)))}return We(i,c)}const Qte=de({movingAverage_:Zte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jte(t,e,n){Di(n);const r=Q(t,"indices","scatterND","int32"),a=Q(e,"updates","scatterND");eD(a,r,n);const i={indices:r,updates:a},s={shape:n};return me.runKernel(oE,i,s)}const ene=de({scatterND_:Jte});function tne(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const a=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const s=e.size;if(!(e.rank===0||e.rank===1&&s===a))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${a}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nne(t,e,n,r=0){Di(n);const a=Q(t,"sparseIndices","sparseToDense","int32"),i=Q(e,"sparseValues","sparseToDense","string_or_numeric"),s=Q(r,"defaultValue","sparseToDense",i.dtype);tne(a,i,n,s);const o={sparseIndices:a,sparseValues:i,defaultValue:s},u={outputShape:n};return me.runKernel(hE,o,u)}const rne=de({sparseToDense_:nne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ane(t,e){const n=Q(e,"indices","gatherND","int32"),a={params:Q(t,"x","gatherND","string_or_numeric"),indices:n};return me.runKernel(VC,a)}const ine=de({gatherND_:ane});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sne(t,e){if(e==null)return t.shape.slice();if(un(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function one(t,e,n,r){const a=Q(t,"x","dropout");if(Y(a.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),Y(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Kn?a.clone():a;const i=sne(a,n),s=1-e,o=yt(Om(We(bc(i,0,1,"float32",r),s)),s);return ge(a,o)}const zB=de({dropout_:one});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UB(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function aD(t,e,n){const r=1-t%2,a=new Float32Array(t);for(let i=0;i<t;++i){const s=2*Math.PI*i/(t+r-1);a[i]=e-n*Math.cos(s)}return na(a,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function une(t,e,n=1){const r=Q(t,"predictions","inTopK"),a=Q(e,"targets","inTopK");Y(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),Y(r.rank-1===a.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`),mi(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];Y(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const s=await r.data(),o=await a.data(),[u,l]=[s.length/i,i],c=Xr("bool",u);for(let f=0;f<u;f++){const d=f*l,h=s.subarray(d,d+l),m=[];for(let v=0;v<h.length;v++)m.push({value:h[v],index:v});m.sort((v,y)=>y.value-v.value),c[f]=0;for(let v=0;v<n;v++)if(m[v].index===o[f]){c[f]=1;break}}return t!==r&&r.dispose(),e!==a&&a.dispose(),Cs(c,a.shape,"bool")}const lne=une;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cne(t,e,n,r,a,i="NHWC",s){let o=t;t.rank===3&&(o=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=be(e,[1,e.shape[0],e.shape[1],e.shape[2]])),Y(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),Y(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),Y(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const l=i==="NHWC"?o.shape[3]:o.shape[1],c=i==="NHWC"?u.shape[3]:u.shape[1];Y(l===n[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${n[2]}.`),Y(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),Ta("conv2dDerFilter",a,s);const f={x:o,dy:u},d={strides:r,pad:a,dataFormat:i,dimRoundingMode:s,filterShape:n};return me.runKernel(TC,f,d)}const iD=de({conv2DBackpropFilter_:cne});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function db(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return ge(t,xd(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function pb(t,e){let n=e;const r=Er(t.shape,e.shape);return r.length>0&&(n=pt(n,r)),be(n,t.shape)}function hb(t,e,n,r){if(e==="linear")return t;if(e==="relu")return co(t);if(e==="elu")return km(t);if(e==="relu6")return qE(t);if(e==="prelu")return sb(t,n);if(e==="leakyrelu")return J1(t,r);if(e==="sigmoid")return to(t);throw new Error(`Unknown fused activation ${e}.`)}const mb=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fne({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:o,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(u=u||"linear",mb(me.state.gradientDepth,u)===!1){Y(a==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let E=Uu(t,e,n,r,a,i,s);return o!=null&&(E=We(E,o)),hb(E,u,l,c)}const f=Q(t,"x","conv2d","float32"),d=Q(e,"filter","conv2d","float32");let h=f,m=!1;f.rank===3&&(m=!0,h=be(f,[1,f.shape[0],f.shape[1],f.shape[2]])),Y(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),Y(d.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),Ta("fused conv2d",r,s);const v=a==="NHWC"?h.shape[3]:h.shape[1];Y(d.shape[2]===v,()=>`Error in conv2d: depth of input (${v}) must match input depth for filter ${d.shape[2]}.`),Y(Yr(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const y=Rr(h.shape,d.shape,n,i,r,s);let b;o!=null&&(b=Q(o,"bias","fused conv2d"),[b]=rr(b,f),a==="NHWC"?Wt(y.outShape,b.shape):(Y(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),Y(b.shape.length===0||b.shape[0]===y.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let w;if(l!=null){const E=l.shape;if(Y(E.length<=1||E.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${E.length}.`),E.length===1)Y(E[0]===1||E[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the number of output channels (${y.outChannels}).`);else if(E.length===3)try{Wt(E,y.outShape)}catch{const k=`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(k)}w=Q(l,"prelu weights","fused conv2d")}const x=(E,A)=>{Y(a==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`);const[k,T,I,$]=A,O=db(E,I,u);Y(zu(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const B=kE(T.shape,O,k,n,r),z=iD(T,O,k.shape,n,r),L=[B,z];if($!=null){const F=pb($,O);L.push(F)}return L},S={x:h,filter:d,bias:b,preluActivationWeights:w},C={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s,activation:u,leakyreluAlpha:c};return o==null?Uo((A,k,T)=>{let I=me.runKernel(qy,S,C);return T([k,A,I]),m&&(I=be(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:x}})(h,d):Uo((A,k,T,I)=>{let $=me.runKernel(qy,S,C);return I([k,A,$,T]),m&&($=be($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:x}})(h,d,b)}const VB=de({fusedConv2d_:fne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dne(t,e,n,r,a,i=[1,1],s){let o=t;t.rank===3&&(o=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={x:o,dy:u},c={strides:r,pad:a,dimRoundingMode:s,dilations:i,filterShape:n};return me.runKernel(FC,l,c)}const WB=de({depthwiseConv2dNativeBackpropFilter_:dne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pne(t,e,n,r,a,i=[1,1],s){let o=e,u=!1;e.rank===3&&(u=!0,o=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={dy:o,filter:n},c={strides:r,pad:a,dimRoundingMode:s,dilations:i,inputShape:t},f=me.runKernel(RC,l,c);return u?be(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const qB=de({depthwiseConv2dNativeBackpropInput_:pne});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hne({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:o,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(mb(me.state.gradientDepth,u)===!1){let C=Im(t,e,n,r,a,i,s);return o!=null&&(C=We(C,o)),hb(C,u,l,c)}const f=Q(t,"x","depthwiseConv2d","float32"),d=Q(e,"filter","depthwiseConv2d","float32");let h=f,m=!1;f.rank===3&&(m=!0,h=be(f,[1,f.shape[0],f.shape[1],f.shape[2]])),Y(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),Y(d.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),Y(h.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),i==null&&(i=[1,1]),Y(Yr(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Ta("fused depthwiseConv2d",r,s);const v=Rr(h.shape,d.shape,n,i,r,s,!0);let y;o!=null&&(y=Q(o,"bias","fused conv2d"),[y]=rr(y,f),Wt(v.outShape,y.shape));let b;l!=null&&(b=Q(l,"prelu weights","fused depthwiseConv2d"));const w=(C,E)=>{Y(zu(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[A,k,T,I]=E,$=db(C,T,u),O=qB(k.shape,$,A,n,r,i,s),B=WB(k,$,A.shape,n,r,i,s);if(I!=null){const z=pb(y,$);return[O,B,z]}return[O,B]},x={x:h,filter:d,bias:y,preluActivationWeights:b},S={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s,activation:u,leakyreluAlpha:c};return o==null?Uo((E,A,k)=>{let T=me.runKernel(Gy,x,S);return k([A,E,T]),m&&(T=be(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:w}})(h,d):Uo((E,A,k,T)=>{let I=me.runKernel(Gy,x,S);return T([A,E,I,k]),m&&(I=be(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:w}})(h,d,y)}const mne=de({fusedDepthwiseConv2d_:hne});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gne({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:a,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:o=.2}){if(mb(me.state.gradientDepth,i)===!1){let $=Jt(t,e,n,r);return a!=null&&($=We($,a)),hb($,i,s,o)}let u=Q(t,"a","fused matMul"),l=Q(e,"b","fused matMul");[u,l]=rr(u,l);const c=n?u.shape[u.rank-2]:u.shape[u.rank-1],f=r?l.shape[l.rank-1]:l.shape[l.rank-2],d=n?u.shape[u.rank-1]:u.shape[u.rank-2],h=r?l.shape[l.rank-2]:l.shape[l.rank-1],m=u.shape.slice(0,-2),v=l.shape.slice(0,-2),y=Oe(m),b=Oe(v);Y(c===f,()=>`Error in fused matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${u.shape} and ${l.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=Wt(u.shape.slice(0,-2),l.shape.slice(0,-2)).concat([d,h]),S=n?be(u,[y,c,d]):be(u,[y,d,c]),C=r?be(l,[b,h,f]):be(l,[b,f,h]);let E;a!=null&&(E=Q(a,"bias","fused matMul"),[E]=rr(E,u),Wt(x,E.shape));let A;s!=null&&(A=Q(s,"prelu weights","fused matMul"));const k=($,O)=>{const[B,z,L,F]=O,R=db(be($,L.shape),L,i);let W,M;if(!n&&!r?(W=Jt(R,z,!1,!0),M=Jt(B,R,!0,!1)):!n&&r?(W=Jt(R,z,!1,!1),M=Jt(R,B,!0,!1)):n&&!r?(W=Jt(z,R,!1,!0),M=Jt(B,R,!1,!1)):(W=Jt(z,R,!0,!0),M=Jt(R,B,!0,!0)),a!=null){const j=pb(F,R);return[W,M,j]}else return[W,M]},T={a:S,b:C,bias:E,preluActivationWeights:A},I={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:o};return a==null?Uo((O,B,z)=>{const L=me.runKernel(Wy,T,I);return z([O,B,L]),{value:be(L,x),gradFunc:k}})(S,C):Uo((O,B,z,L)=>{const F=me.runKernel(Wy,T,I);return L([O,B,F,z]),{value:be(F,x),gradFunc:k}})(S,C,E)}const tS=de({fusedMatMul_:gne});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vne=Object.freeze(Object.defineProperty({__proto__:null,conv2d:VB,depthwiseConv2d:mne,matMul:tS},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yne(t){return aD(t,.54,.46)}const bne=de({hammingWindow_:yne});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xne(t){return aD(t,.5,.5)}const GB=de({hannWindow_:xne});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wne(t,e,n,r=!1,a=0){let i=0;const s=[];for(;i+e<=t.size;)s.push(ln(t,i,e)),i+=n;if(r)for(;i<t.size;){const o=i+e-t.size,u=hr([ln(t,i,e-o),yd([o],a)]);s.push(u),i+=n}return s.length===0?Rf([],[0,e]):be(hr(s),[s.length,e])}const HB=de({frame_:wne});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nne(t,e,n,r,a=GB){r==null&&(r=UB(e));const i=HB(t,e,n),s=ge(i,a(e));return fb(s,r)}const Sne=de({stft_:Nne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cne(t,e,n,r,a="bilinear",i=0){const s=Q(t,"image","cropAndResize"),o=Q(e,"boxes","cropAndResize","float32"),u=Q(n,"boxInd","cropAndResize","int32"),l=o.shape[0];Y(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),Y(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${l},4] but had shape ${o.shape}.`),Y(u.rank===1&&u.shape[0]===l,()=>`Error in cropAndResize: boxInd must be have size [${l}] but had shape ${o.shape}.`),Y(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),Y(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),Y(a==="bilinear"||a==="nearest",()=>`method must be bilinear or nearest, but was ${a}`);const c={image:s,boxes:o,boxInd:u},f={method:a,extrapolationValue:i,cropSize:r};return me.runKernel(kC,c,f)}const Ene=de({cropAndResize_:Cne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dne(t){const e=Q(t,"image","flipLeftRight","float32");Y(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return me.runKernel(UC,n,{})}const Tne=de({flipLeftRight_:Dne});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ne(t){const e=Q(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];Y(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),Y(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const a=new Array(e.rank);return a.fill(1,0,n),a[n]=3,ji(e,a)}const Ane=de({grayscaleToRGB_:$ne});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ine(t){const e=Q(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];Y(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),Y(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const a=e.dtype,i=st(e,"float32"),s=na([.2989,.587,.114]);let o;switch(e.rank){case 2:o=Sf("ij,j->i",i,s);break;case 3:o=Sf("ijk,k->ij",i,s);break;case 4:o=Sf("ijkl,l->ijk",i,s);break;case 5:o=Sf("ijklm,m->ijkl",i,s);break;case 6:o=Sf("ijklmn,n->ijklm",i,s);break;default:throw new Error("Not a valid tensor rank.")}return o=wa(o,-1),st(o,a)}const kne=de({rgbToGrayscale_:Ine});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ne(t,e,n=0,r=.5){const a=Q(t,"image","rotateWithOffset","float32");Y(a.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`);const i={image:a},s={radians:e,fillValue:n,center:r};return me.runKernel(SE,i,s)}const One=de({rotateWithOffset_:_ne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wd(t,e,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);const s=t.shape[0];return n=Math.min(n,s),Y(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),Y(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),Y(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),Y(e.rank===1,()=>"scores must be a 1D tensor"),Y(e.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${e.shape[0]}`),Y(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fne(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=Q(t,"boxes","nonMaxSuppression","float32"),s=Q(e,"scores","nonMaxSuppression","float32"),o=wd(i,s,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;const u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return me.runKernel(ZC,{boxes:i,scores:s},u)}const Rne=de({nonMaxSuppression_:Fne});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mne(t,e,n){const r=Pne(t,e,n),a=r<0?-(r+1):r;t.splice(a,0,e)}function Pne(t,e,n){return Lne(t,e,n||Bne)}function Bne(t,e){return t>e?1:t<e?-1:0}function Lne(t,e,n){let r=0,a=t.length,i=0,s=!1;for(;r<a;){i=r+(a-r>>>1);const o=n(e,t[i]);o>0?r=i+1:(a=i,s=!o)}return s?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sD(t,e,n,r,a){return lD(t,e,n,r,a,0)}function oD(t,e,n,r,a,i){return lD(t,e,n,r,a,0,!1,i,!0)}function uD(t,e,n,r,a,i){return lD(t,e,n,r,a,i,!0)}function lD(t,e,n,r,a,i,s=!1,o=!1,u=!1){const l=[];for(let y=0;y<e.length;y++)e[y]>a&&l.push({score:e[y],boxIndex:y,suppressBeginIndex:0});l.sort(o_);const c=i>0?-.5/i:0,f=[],d=[];for(;f.length<n&&l.length>0;){const y=l.pop(),{score:b,boxIndex:w,suppressBeginIndex:x}=y;if(b<a)break;let S=!1;for(let C=f.length-1;C>=x;--C){const E=zne(t,w,f[C]);if(E>=r){S=!0;break}if(y.score=y.score*Une(r,c,E),y.score<=a)break}y.suppressBeginIndex=f.length,S||(y.score===b?(f.push(w),d.push(y.score)):y.score>a&&Mne(l,y,o_))}const h=f.length,m=n-h;o&&m>0&&(f.push(...new Array(m).fill(0)),d.push(...new Array(m).fill(0)));const v={selectedIndices:f};return s&&(v.selectedScores=d),u&&(v.validOutputs=h),v}function zne(t,e,n){const r=t.subarray(e*4,e*4+4),a=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),h=(o-i)*(u-s),m=(f-l)*(d-c);if(h<=0||m<=0)return 0;const v=Math.max(i,l),y=Math.max(s,c),b=Math.min(o,f),w=Math.min(u,d),x=Math.max(b-v,0)*Math.max(w-y,0);return x/(h+m-x)}function Une(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function o_(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Vne(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=Q(t,"boxes","nonMaxSuppressionAsync"),s=Q(e,"scores","nonMaxSuppressionAsync"),o=wd(i,s,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;const u=await Promise.all([i.data(),s.data()]),l=u[0],c=u[1],{selectedIndices:f}=sD(l,c,n,r,a);return i!==t&&i.dispose(),s!==e&&s.dispose(),na(f,"int32")}const Wne=Vne;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qne(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const s=Q(t,"boxes","nonMaxSuppression"),o=Q(e,"scores","nonMaxSuppression"),u=wd(s,o,n,r,a,i);n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,i=u.softNmsSigma;const l={boxes:s,scores:o},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},f=me.runKernel(JC,l,c);return{selectedIndices:f[0],selectedScores:f[1]}}const Gne=de({nonMaxSuppressionWithScore_:qne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Hne(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const s=Q(t,"boxes","nonMaxSuppressionAsync"),o=Q(e,"scores","nonMaxSuppressionAsync"),u=wd(s,o,n,r,a,i);n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,i=u.softNmsSigma;const l=await Promise.all([s.data(),o.data()]),c=l[0],f=l[1],{selectedIndices:d,selectedScores:h}=uD(c,f,n,r,a,i);return s!==t&&s.dispose(),o!==e&&o.dispose(),{selectedIndices:na(d,"int32"),selectedScores:na(h)}}const jne=Hne;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xne(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const s=Q(t,"boxes","nonMaxSuppression"),o=Q(e,"scores","nonMaxSuppression"),u=wd(s,o,n,r,a,null),l=u.maxOutputSize,c=u.iouThreshold,f=u.scoreThreshold,d={boxes:s,scores:o},h={maxOutputSize:l,iouThreshold:c,scoreThreshold:f,padToMaxOutputSize:i},m=me.runKernel(QC,d,h);return{selectedIndices:m[0],validOutputs:m[1]}}const Kne=de({nonMaxSuppressionPadded_:Xne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Yne(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const s=Q(t,"boxes","nonMaxSuppressionAsync"),o=Q(e,"scores","nonMaxSuppressionAsync"),u=wd(s,o,n,r,a,null),l=u.maxOutputSize,c=u.iouThreshold,f=u.scoreThreshold,[d,h]=await Promise.all([s.data(),o.data()]),{selectedIndices:m,validOutputs:v}=oD(d,h,l,c,f,i);return s!==t&&s.dispose(),o!==e&&o.dispose(),{selectedIndices:na(m,"int32"),validOutputs:St(v,"int32")}}const Zne=Yne;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qne(t,e,n=!1,r=!1){const a=Q(t,"images","resizeBilinear");Y(a.rank===3||a.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),Y(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),Y(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,s=!1;a.rank===3&&(s=!0,i=be(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const o={images:i},u={alignCorners:n,halfPixelCenters:r,size:e},l=me.runKernel(M1,o,u);return s?be(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const jB=de({resizeBilinear_:Qne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jne(t,e,n=!1,r=!1){const a=Q(t,"images","resizeNearestNeighbor");Y(a.rank===3||a.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),Y(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),Y(a.dtype==="float32"||a.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),Y(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,s=!1;a.rank===3&&(s=!0,i=be(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const o={images:i},u={alignCorners:n,halfPixelCenters:r,size:e},l=me.runKernel(R1,o,u);return s?be(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const XB=de({resizeNearestNeighbor_:Jne});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ere(t,e="binary",n=!1,r=.5){const a=Q(t,"image","threshold"),i=.2989,s=.587,o=.114,u=a.shape[0]*a.shape[1];let l=ge(na([r]),255),c,f,d,h;if(Y(a.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`),Y(a.shape[2]===3||a.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`),Y(a.dtype==="int32"||a.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`),Y(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),a.shape[2]===3){[c,f,d]=ii(a,[1,1,1],-1);const y=ge(c,i),b=ge(f,s),w=ge(d,o);h=We(We(y,b),w)}else h=t;if(e==="otsu"){const y=nB(st(GE(h),"int32"),Cs([]),256);l=tre(y,u)}const m=n?yc(h,l):gi(h,l);return st(ge(m,255),"int32")}function tre(t,e){let n=na([-1]),r=na([0]),a=na([0]),i,s,o,u,l,c;for(let f=0;f<t.size-1;f++){i=ln(t,0,f+1),s=ln(t,f+1),l=yt(pt(i),e),c=yt(pt(s),e);const d=pt(ge(i,Zf(0,i.size)));o=yt(d,pt(i));const h=yd(s.shape,i.size),m=We(Zf(0,s.size),h),v=ge(s,m);u=yt(pt(v),pt(s));const y=ct(o,u),b=ct(o,u),w=ge(l,c);a=ge(ge(w,y),b);const x=gi(a,r);r=ia(x,a,r),n=ia(x,na([f]),n)}return n}const nre=de({threshold_:ere});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rre(t,e,n="nearest",r="constant",a=0,i){const s=Q(t,"image","transform","float32"),o=Q(e,"transforms","transform","float32");Y(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),Y(o.rank===2&&(o.shape[0]===s.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),Y(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const u={image:s,transforms:o},l={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return me.runKernel(wE,u,l)}const are=de({transform_:rre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ire(t,e,n){const r=Q(t,"a","bandPart");Y(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const a=r.shape,[i,s]=r.shape.slice(-2);let o,u;typeof e=="number"?(Y(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),Y(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),o=Q(e<0?i:e,"numLower","bandPart")):(Y(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=ia(uh(e,0),i,oc(e,i))),typeof n=="number"?(Y(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),Y(n<=s,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`),u=Q(n<0?s:n,"numUpper","bandPart")):(Y(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=ia(uh(n,0),s,oc(n,s)));const l=be(Zf(0,i,1,"int32"),[-1,1]),c=Zf(0,s,1,"int32"),f=ct(l,c),d=so(yc(f,o),rl(f,Un(u))),h=br([i,s],r.dtype);return be(ci(rs(be(r,[-1,i,s])).map(m=>ia(d,m,h))),a)}const sre=de({bandPart_:ire});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ore(t){let e;if(Array.isArray(t)){e=!1,Y(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const a=t[0].shape[0];for(let i=1;i<t.length;++i)Y(t[i].shape[0]===a,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${a})`)}else e=!0,t=ii(t,t.shape[0],0).map(a=>xc(a,[0]));Y(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let a=0;a<t.length;++a)n.push(me.tidy(()=>{let i=r[a];if(a>0)for(let s=0;s<a;++s){const o=ge(pt(ge(n[s],i)),n[s]);i=ct(i,o)}return yt(i,_m(i,"euclidean"))}));return e?ci(n,0):n}const ure=de({gramSchmidt_:ore});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lre(t,e=!1){if(Y(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return u_(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((u,l)=>u*l),r=rs(be(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],i=[];r.forEach(u=>{const[l,c]=u_(u,e);a.push(l),i.push(c)});const s=be(ci(a,0),t.shape),o=be(ci(i,0),t.shape);return[s,o]}}function u_(t,e=!1){return me.tidy(()=>{Y(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let a=PE(n),i=Fo(t);const s=Rf([[1]],[1,1]);let o=Fo(s);const u=n>=r?r:n;for(let l=0;l<u;++l){const c=i,f=o,d=a;[o,i,a]=me.tidy(()=>{const h=ln(i,[l,l],[n-l,1]),m=_m(h),v=ln(i,[l,l],[1,1]),y=ia(gi(v,0),Rf([[-1]]),Rf([[1]])),b=ct(v,ge(y,m)),w=yt(h,b);w.shape[0]===1?o=Fo(s):o=hr([s,ln(w,[1,0],[w.shape[0]-1,w.shape[1]])],0);const x=Un(yt(Jt(y,b),m)),S=ln(i,[l,0],[n-l,r]),C=ge(x,o),E=cn(o);if(l===0)i=ct(S,Jt(C,Jt(E,S)));else{const T=ct(S,Jt(C,Jt(E,S)));i=hr([ln(i,[0,0],[l,r]),T],0)}const A=cn(C),k=ln(a,[0,l],[n,a.shape[1]-l]);if(l===0)a=ct(k,Jt(Jt(k,o),A));else{const T=ct(k,Jt(Jt(k,o),A));a=hr([ln(a,[0,0],[n,l]),T],1)}return[o,i,a]}),en([c,f,d])}return!e&&n>r&&(a=ln(a,[0,0],[n,r]),i=ln(i,[0,0],[r,r])),[a,i]})}const cre=de({qr_:lre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ra;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Ra||(Ra={}));function fre(t,e,n=Ra.SUM_BY_NONZERO_WEIGHTS){const r=Q(t,"losses","computeWeightedLoss");let a=null;e!=null&&(a=Q(e,"weights","computeWeightedLoss"));const i=a==null?r:ge(r,a);if(n===Ra.NONE)return i;if(n===Ra.SUM)return pt(i);if(n===Ra.MEAN){if(a==null)return nr(i);{const s=r.size/a.size,o=yt(pt(i),pt(a));return s>1?yt(o,St(s)):o}}if(n===Ra.SUM_BY_NONZERO_WEIGHTS){if(a==null)return yt(pt(i),St(r.size));{const s=ge(a,ai(r.shape)),o=st(pt(Yf(s,St(0))),"float32");return yt(pt(i),o)}}throw Error(`Unknown reduction: ${n}`)}const Yo=de({computeWeightedLoss_:fre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dre(t,e,n,r=Ra.SUM_BY_NONZERO_WEIGHTS){const a=Q(t,"labels","absoluteDifference"),i=Q(e,"predictions","absoluteDifference");let s=null;n!=null&&(s=Q(n,"weights","absoluteDifference")),mi(a.shape,i.shape,"Error in absoluteDifference: ");const o=yr(ct(a,i));return Yo(o,s,r)}const pre=de({absoluteDifference_:dre});function hre(t,e,n,r,a=Ra.SUM_BY_NONZERO_WEIGHTS){const i=Q(t,"labels","cosineDistance"),s=Q(e,"predictions","cosineDistance");let o=null;r!=null&&(o=Q(r,"weights","cosineDistance")),mi(i.shape,s.shape,"Error in cosineDistance: ");const u=St(1),l=ct(u,pt(ge(i,s),n,!0));return Yo(l,o,a)}const mre=de({cosineDistance_:hre});function gre(t,e,n,r=Ra.SUM_BY_NONZERO_WEIGHTS){let a=Q(t,"labels","hingeLoss");const i=Q(e,"predictions","hingeLoss");let s=null;n!=null&&(s=Q(n,"weights","hingeLoss")),mi(a.shape,i.shape,"Error in hingeLoss: ");const o=St(1);a=ct(ge(St(2),a),o);const u=co(ct(o,ge(a,i)));return Yo(u,s,r)}const vre=de({hingeLoss_:gre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yre(t,e,n,r=1,a=Ra.SUM_BY_NONZERO_WEIGHTS){const i=Q(t,"labels","huberLoss"),s=Q(e,"predictions","huberLoss");let o=null;n!=null&&(o=Q(n,"weights","huberLoss")),mi(i.shape,s.shape,"Error in huberLoss: ");const u=St(r),l=yr(ct(s,i)),c=oc(l,u),f=ct(l,c),d=We(ge(St(.5),On(c)),ge(u,f));return Yo(d,o,a)}const bre=de({huberLoss_:yre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xre(t,e,n,r=1e-7,a=Ra.SUM_BY_NONZERO_WEIGHTS){const i=Q(t,"labels","logLoss"),s=Q(e,"predictions","logLoss");let o=null;n!=null&&(o=Q(n,"weights","logLoss")),mi(i.shape,s.shape,"Error in logLoss: ");const u=St(1),l=St(r),c=Un(ge(i,Ci(We(s,l)))),f=ge(ct(u,i),Ci(We(ct(u,s),l))),d=ct(c,f);return Yo(d,o,a)}const wre=de({logLoss_:xre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nre(t,e,n,r=Ra.SUM_BY_NONZERO_WEIGHTS){const a=Q(t,"labels","meanSquaredError"),i=Q(e,"predictions","meanSquaredError");let s=null;n!=null&&(s=Q(n,"weights","meanSquaredError")),mi(a.shape,i.shape,"Error in meanSquaredError: ");const o=JE(a,i);return Yo(o,s,r)}const Sre=de({meanSquaredError_:Nre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cre(t,e){const n=Q(t,"labels","sigmoidCrossEntropyWithLogits"),r=Q(e,"logits","sigmoidCrossEntropyWithLogits");mi(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=co(r),i=ge(r,n),s=eb(li(Un(yr(r))));return We(ct(a,i),s)}function Ere(t,e,n,r=0,a=Ra.SUM_BY_NONZERO_WEIGHTS){let i=Q(t,"multiClassLabels","sigmoidCrossEntropy");const s=Q(e,"logits","sigmoidCrossEntropy");let o=null;if(n!=null&&(o=Q(n,"weights","sigmoidCrossEntropy")),mi(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){const l=St(r),c=St(1),f=St(.5);i=We(ge(i,ct(c,l)),ge(f,l))}const u=Cre(i,s);return Yo(u,o,a)}const Dre=de({sigmoidCrossEntropy_:Ere});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tre(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return Uo((a,i,s)=>{const u=tb(i,[n],!0),l=ct(st(i,"float32"),u);s([a,l]);const c=Un(ge(l,a));return{value:pt(c,[n]),gradFunc:(h,m)=>{const[v,y]=m,b=or(h.shape,[n]);return[ge(be(h,b),ct(st(v,"float32"),li(y))),ge(be(h,b),ct(li(y),st(v,"float32")))]}}})(t,e)}function $re(t,e,n,r=0,a=Ra.SUM_BY_NONZERO_WEIGHTS){let i=Q(t,"onehotLabels","softmaxCrossEntropy");const s=Q(e,"logits","softmaxCrossEntropy");let o=null;if(n!=null&&(o=Q(n,"weights","softmaxCrossEntropy")),mi(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){const l=St(r),c=St(1),f=St(i.shape[1]);i=We(ge(i,ct(c,l)),yt(l,f))}const u=Tre(i,s);return Yo(u,o,a)}const Are=de({softmaxCrossEntropy_:$re});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ire(t,e,n,r){const a=Q(t,"indices","sparseFillEmptyRows","int32"),i=Q(e,"values","sparseFillEmptyRows"),s=Q(n,"denseShape","sparseFillEmptyRows","int32"),o=Q(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(a.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${a.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(o.rank!==0)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);const u={indices:a,values:i,denseShape:s,defaultValue:o},l=me.runKernel(cE,u);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}const kre=de({sparseFillEmptyRows_:Ire});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _re(t,e,n){const r=Q(t,"inputIndices","sparseReshape","int32"),a=Q(e,"inputShape","sparseReshape","int32"),i=Q(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(a.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const s={inputIndices:r,inputShape:a,newShape:i},o=me.runKernel(fE,s);return{outputIndices:o[0],outputShape:o[1]}}const Ore=de({sparseReshape_:_re});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fre(t,e,n){const r=Q(t,"data","sparseSegmentMean"),a=Q(e,"indices","sparseSegmentMean","int32"),i=Q(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const s={data:r,indices:a,segmentIds:i};return me.runKernel(dE,s)}const Rre=de({sparseSegmentMean_:Fre});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mre(t,e,n){const r=Q(t,"data","sparseSegmentSum"),a=Q(e,"indices","sparseSegmentSum","int32"),i=Q(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const s={data:r,indices:a,segmentIds:i};return me.runKernel(pE,s)}const Pre=de({sparseSegmentSum_:Mre});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bre(t,e,n,r,a,i,s,o){const u=Q(t,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);const l=Q(e,"dataSplits","stringNGrams");if(l.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:s,preserveShortSequences:o},f={data:u,dataSplits:l},d=me.runKernel(vE,f,c);return{nGrams:d[0],nGramsSplits:d[1]}}const Lre=de({stringNGrams_:Bre});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zre(t,e,n=!0){const r=Q(t,"input","stringSplit","string"),a=Q(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(a.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${a.shape}`);const i={skipEmpty:n},s={input:r,delimiter:a},o=me.runKernel(yE,s,i);return{indices:o[0],values:o[1],shape:o[2]}}const Ure=de({stringSplit_:zre});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vre(t,e){const n=Q(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const a={input:n};return me.runKernel(bE,a,r)}const Wre=de({stringToHashBucketFast_:Vre});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qre(t,e,n,r=!0){const a=Q(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:r};return me.runKernel(q1,{x:a},i)}const Gre=de({staticRegexReplace_:qre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hre={fft:cb,ifft:fh,rfft:fb,irfft:QE},jre={hammingWindow:bne,hannWindow:GB,frame:HB,stft:Sne},Qs={flipLeftRight:Tne,grayscaleToRGB:Ane,resizeNearestNeighbor:XB,resizeBilinear:jB,rgbToGrayscale:kne,rotateWithOffset:One,cropAndResize:Ene,nonMaxSuppression:Rne,nonMaxSuppressionAsync:Wne,nonMaxSuppressionWithScore:Gne,nonMaxSuppressionWithScoreAsync:jne,nonMaxSuppressionPadded:Kne,nonMaxSuppressionPaddedAsync:Zne,threshold:nre,transform:are},KB={bandPart:sre,gramSchmidt:ure,qr:cre},Xre={absoluteDifference:pre,computeWeightedLoss:Yo,cosineDistance:mre,hingeLoss:vre,huberLoss:bre,logLoss:wre,meanSquaredError:Sre,sigmoidCrossEntropy:Dre,softmaxCrossEntropy:Are},Kre={sparseFillEmptyRows:kre,sparseReshape:Ore,sparseSegmentMean:Rre,sparseSegmentSum:Pre},Yre={stringNGrams:Lre,stringSplit:Ure,stringToHashBucketFast:Wre,staticRegexReplace:Gre};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zre=new Map,Qre=new Map;class Nd{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Gi{constructor(){this.classNameMap={}}static getMap(){return Gi.instance==null&&(Gi.instance=new Gi),Gi.instance}static register(e){Gi.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function je(t,e,n){Y(t.className!=null,()=>"Class being registered does not have the static className property defined."),Y(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),Y(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,a=e+">"+r;return Gi.register(t),Zre.set(a,t),Qre.set(t,a),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class il extends Nd{minimize(e,n=!1,r){const{value:a,grads:i}=this.computeGradients(e,r);if(r!=null){const s=r.map(o=>({name:o.name,tensor:i[o.name]}));this.applyGradients(s)}else this.applyGradients(i);return en(i),n?a:(a.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return wJ(e,n)}dispose(){this.iterations_!=null&&en(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:St(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(il,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YB extends il{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=me.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const i=me.registeredVariables[r],s=!1;this.accumulatedGrads[a]==null&&(this.accumulatedGrads[a]={originalName:`${r}/accum_grad`,variable:De(()=>dn(i).variable(s))}),this.accumulatedUpdates[a]==null&&(this.accumulatedUpdates[a]={originalName:`${r}/accum_var`,variable:De(()=>dn(i).variable(s))});const o=Array.isArray(e)?e[a].tensor:e[r];if(o==null)return;const u=this.accumulatedGrads[a].variable,l=this.accumulatedUpdates[a].variable;De(()=>{const c=We(ge(u,this.rho),ge(On(o),1-this.rho)),f=ge(yt(Kr(We(l,this.epsilon)),Kr(We(u,this.epsilon))),o),d=We(ge(l,this.rho),ge(On(f),1-this.rho));u.assign(c),l.assign(d);const h=We(ge(f,-this.learningRate),i);i.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(en(this.accumulatedGrads.map(e=>e.variable)),en(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZB extends il{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const i=me.registeredVariables[r];this.accumulatedGrads[a]==null&&(this.accumulatedGrads[a]={originalName:`${r}/accumulator`,variable:De(()=>yd(i.shape,this.initialAccumulatorValue).variable(!1))});const s=Array.isArray(e)?e[a].tensor:e[r];if(s==null)return;const o=this.accumulatedGrads[a].variable;De(()=>{const u=We(o,On(s));o.assign(u);const l=We(ge(yt(s,Kr(We(u,me.backend.epsilon()))),-this.learningRate),i);i.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&en(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QB extends il{static get className(){return"Adam"}constructor(e,n,r,a=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],De(()=>{this.accBeta1=St(n).variable(),this.accBeta2=St(r).variable()}),a==null&&(this.epsilon=me.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);De(()=>{const r=ct(1,this.accBeta1),a=ct(1,this.accBeta2);n.forEach((i,s)=>{const o=me.registeredVariables[i],u=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:De(()=>dn(o).variable(u))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${i}/v`,variable:De(()=>dn(o).variable(u))});const l=Array.isArray(e)?e[s].tensor:e[i];if(l==null)return;const c=this.accumulatedFirstMoment[s].variable,f=this.accumulatedSecondMoment[s].variable,d=We(ge(c,this.beta1),ge(l,1-this.beta1)),h=We(ge(f,this.beta2),ge(On(l),1-this.beta2)),m=yt(d,r),v=yt(h,a);c.assign(d),f.assign(h);const y=We(ge(yt(m,We(Kr(v),this.epsilon)),-this.learningRate),o);o.assign(y)}),this.accBeta1.assign(ge(this.accBeta1,this.beta1)),this.accBeta2.assign(ge(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&en(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&en(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),De(()=>{this.accBeta1.assign(zo(this.beta1,this.iterations_+1)),this.accBeta2.assign(zo(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JB extends il{static get className(){return"Adamax"}constructor(e,n,r,a=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],De(()=>{this.iteration=St(0).variable(),this.accBeta1=St(n).variable()}),a==null&&(this.epsilon=me.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);De(()=>{const r=ct(1,this.accBeta1),a=yt(-this.learningRate,We(ge(this.iteration,this.decay),1));n.forEach((i,s)=>{const o=me.registeredVariables[i],u=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:dn(o).variable(u)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${i}/v`,variable:dn(o).variable(u)});const l=Array.isArray(e)?e[s].tensor:e[i];if(l==null)return;const c=this.accumulatedFirstMoment[s].variable,f=this.accumulatedWeightedInfNorm[s].variable,d=We(ge(c,this.beta1),ge(l,1-this.beta1)),h=ge(f,this.beta2),m=yr(l),v=Ko(h,m);c.assign(d),f.assign(v);const y=We(ge(yt(a,r),yt(d,We(v,this.epsilon))),o);o.assign(y)}),this.iteration.assign(We(this.iteration,1)),this.accBeta1.assign(ge(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&en(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&en(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cD extends il{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const i=Array.isArray(e)?e[a].tensor:e[r];if(i==null)return;const s=me.registeredVariables[r];De(()=>{const o=We(ge(this.c,i),s);s.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=_r(St(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eL extends cD{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=St(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const i=me.registeredVariables[r];this.accumulations[a]==null&&(this.accumulations[a]={originalName:`${r}/momentum`,variable:De(()=>dn(i).variable(!1))});const s=this.accumulations[a].variable,o=Array.isArray(e)?e[a].tensor:e[r];o!=null&&De(()=>{let u;const l=We(ge(this.m,s),o);this.useNesterov?u=We(ge(this.c,We(o,ge(l,this.m))),i):u=We(ge(this.c,l),i),s.assign(l),i.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&en(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tL extends il{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,a=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,a==null&&(this.epsilon=me.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const i=me.registeredVariables[r],s=!1;this.accumulatedMeanSquares[a]==null&&(this.accumulatedMeanSquares[a]={originalName:`${r}/rms`,variable:De(()=>dn(i).variable(s))}),this.accumulatedMoments[a]==null&&(this.accumulatedMoments[a]={originalName:`${r}/momentum`,variable:De(()=>dn(i).variable(s))}),this.accumulatedMeanGrads[a]==null&&this.centered&&(this.accumulatedMeanGrads[a]={originalName:`${r}/mg`,variable:De(()=>dn(i).variable(s))});const o=Array.isArray(e)?e[a].tensor:e[r];if(o==null)return;const u=this.accumulatedMeanSquares[a].variable,l=this.accumulatedMoments[a].variable;De(()=>{const c=We(ge(u,this.decay),ge(On(o),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[a].variable,d=We(ge(f,this.decay),ge(o,1-this.decay)),h=yt(ge(o,this.learningRate),Kr(ct(c,We(On(d),this.epsilon)))),m=We(ge(l,this.momentum),h);u.assign(c),f.assign(d),l.assign(m);const v=ct(i,m);i.assign(v)}else{const f=We(ge(u,this.decay),ge(On(o),1-this.decay)),d=We(ge(l,this.momentum),yt(ge(o,this.learningRate),Kr(We(f,this.epsilon))));u.assign(f),l.assign(d);const h=ct(i,d);i.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&en(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&en(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&en(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jre=[YB,ZB,QB,JB,eL,tL,cD];function eae(){for(const t of Jre)je(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tae="model",nae=".json",rae=".weights.bin";function l_(t){return new Promise(e=>setTimeout(e)).then(t)}class uc{constructor(e){if(!Ae().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(uc.URL_SCHEME)&&(e=e.slice(uc.URL_SCHEME.length)),(e==null||e.length===0)&&(e=tae),this.modelJsonFileName=e+nae,this.weightDataFileName=e+rae}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=ks.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const a=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=OP(e,a),s=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=s,await l_(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;u.download=this.weightDataFileName,u.href=r,await l_(()=>u.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Tm(e)}}}}uc.URL_SCHEME="downloads://";class aae{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=a=>{const i=JSON.parse(a.target.result),s=i.modelTopology;if(s==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:s});return}const u=DE(i,l=>this.loadWeights(l));e(u)},r.onerror=a=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const s of e)n.push(...s.weights),r.push(...s.paths);const a=this.checkManifestAndWeightFiles(e),i=r.map(s=>this.loadWeightsFile(s,a[s]));return Promise.all(i).then(s=>[n,s])}loadWeightsFile(e,n){return new Promise((r,a)=>{const i=new FileReader;i.onload=s=>{const o=s.target.result;r(o)},i.onerror=s=>a(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>Qk(i.name)),a={};for(const i of e)i.paths.forEach(s=>{const o=Qk(s);if(n.indexOf(o)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(n.push(o),r.indexOf(o)===-1)throw new Error(`Weight file with basename '${o}' is not provided.`);a[s]=this.weightsFiles[r.indexOf(o)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return a}}const iae=t=>Ae().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(uc.URL_SCHEME)?sae(t.slice(uc.URL_SCHEME.length)):null;Xn.registerSaveRouter(iae);function sae(t="model"){return new uc(t)}function oae(t){return new aae(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c_(t,e,n,r){s(t),n=n??0,r=r??1,o(n,r);let a=0;const i=u=>(u.then(l=>{const c=n+ ++a/t.length*(r-n);return e(c),l}),u);function s(u){Y(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function o(u,l){Y(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),Y(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${l}`),Y(l>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${l}`)}return Promise.all(t.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nL(t,e){e==null&&(e={});const n=e.fetchFunc==null?Ae().platform.fetch:e.fetchFunc,r=t.map(f=>n(f,e.requestInit,{isBinary:!0})),o=(e.onProgress==null?await Promise.all(r):await c_(r,e.onProgress,0,.5)).map(f=>f.arrayBuffer());return e.onProgress==null?await Promise.all(o):await c_(o,e.onProgress,.5,1)}function uae(t,e){var n;const r=e.fetchFunc==null?Ae().platform.fetch:e.fetchFunc;let a=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async s=>{for(var o;a<t.length;){i||(i=(await r(t[a],e.requestInit,{isBinary:!0})).body.getReader());const{done:u,value:l}=await i.read();if(u){a++,i=void 0,(o=e.onProgress)===null||o===void 0||o.call(e,a/t.length);continue}s.enqueue(l);return}s.close()}})}async function lae(t,e="",n,r){return rL(s=>nL(s,{requestInit:r}))(t,e,n)}function rL(t){return async(e,n="",r)=>{const a=e.map(()=>!1),i={},s=r!=null?r.map(()=>!1):[],o=[];if(e.forEach((h,m)=>{let v=0;h.weights.forEach(y=>{const b="quantization"in y?y.quantization.dtype:y.dtype,w=nc[b]*Oe(y.shape),x=()=>{a[m]=!0,i[m]==null&&(i[m]=[]),i[m].push({manifestEntry:y,groupOffset:v,sizeBytes:w})};r!=null?r.forEach((S,C)=>{S===y.name&&(x(),s[C]=!0)}):x(),o.push(y.name),v+=w})}),!s.every(h=>h)){const h=r.filter((m,v)=>!s[v]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}const u=a.reduce((h,m,v)=>(m&&h.push(v),h),[]),l=[];u.forEach(h=>{e[h].paths.forEach(m=>{const v=n+(n.endsWith("/")?"":"/")+m;l.push(v)})});const c=await t(l),f={};let d=0;return u.forEach(h=>{const m=e[h].paths.length,v=new ks(c.slice(d,d+m));i[h].forEach(b=>{const w=v.slice(b.groupOffset,b.groupOffset+b.sizeBytes),x=AP(w,[b.manifestEntry]);for(const S in x)f[S]=x[S]}),d+=m}),f}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cae="application/octet-stream",fae="application/json";class fD{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(Y(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=Ae().platform.fetch,Y(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&Y(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a=OP(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(a)],{type:fae}),"model.json"),e.weightData!=null){const s=ks.join(e.weightData);n.body.append("model.weights.bin",new Blob([s],{type:cae}),"model.weights.bin")}const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:Tm(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let s=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?s+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":s+=" Please make sure the server is serving valid JSON for this request.",new Error(s)}const r=n.modelTopology,a=n.weightsManifest;if(r==null&&a==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return DE(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=KN(e.weightsManifest),a=()=>uae(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:a})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,a]=dae(n),i=this.weightPathPrefix||r,s=[],o=[];for(const u of e)for(const l of u.paths)this.weightUrlConverter!=null?o.push(this.weightUrlConverter(l)):s.push(i+l+a);return this.weightUrlConverter&&s.push(...await Promise.all(o)),s}async loadWeights(e){const n=await this.getWeightUrls(e),r=KN(e),a=await nL(n,this.loadOptions);return[r,a]}}fD.URL_SCHEME_REGEX=/^https?:\/\//;function dae(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),a=n>e?t.substring(n):"";return[r+"/",a]}function nS(t){return t.match(fD.URL_SCHEME_REGEX)!=null}const aL=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>nS(r)):n=nS(t),n)return dD(t,e)}return null};Xn.registerSaveRouter(aL);Xn.registerLoadRouter(aL);function dD(t,e){return new fD(t,e)}function pae(t,e){return dD(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x2{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class iL{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class hae{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function mae(t,e,n,r){const a=arguments;return new hae(sL(...a))}function sL(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new x2(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new x2({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new x2({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function gae(t){return new iL(t)}function vae(t){return new iL(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oL=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:ks,browserFiles:oae,browserHTTPRequest:pae,concatenateArrayBuffers:_P,copyModel:gZ,decodeWeights:AP,decodeWeightsStream:kP,encodeWeights:XN,fromMemory:mae,fromMemorySync:sL,getLoadHandlers:nZ,getModelArtifactsForJSON:DE,getModelArtifactsForJSONSync:FP,getModelArtifactsInfoForJSON:Tm,getSaveHandlers:RP,getWeightSpecs:KN,http:dD,isHTTPScheme:nS,listModels:hZ,loadWeights:lae,moveModel:vZ,registerLoadRouter:tZ,registerSaveRouter:eZ,removeModel:mZ,weightsLoaderFactory:rL,withSaveHandler:gae,withSaveHandlerSync:vae},Symbol.toStringTag,{value:"Module"}));function pD(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(Oe(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const a=e.shape,i=a[a.length-1];let s=1;for(let f=0;f<a.length-1;++f)s*=a[f];const o=t.shape,u=a.slice();u.pop();let l=1;for(let f=i;f<n;++f)l*=o[f],u.push(o[f]);const c=[...wt(t.shape).map(f=>f/l),1].slice(0,i);return[u,s,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rS=-2,yae=-1;function hD(t,e,n){const r=t.shape.length;Y(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),Y(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let a=0;a<r;++a)Y(e[a]+n[a]<=t.shape[a],()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${e[a]+n[a]}) would overflow input.shape[${a}] (${t.shape[a]})`)}function bae(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function mD(t,e,n){const r=[];for(let a=0;a<t.length;a++)r[a]=Math.ceil((e[a]-t[a])/n[a]);return r}function uL(t,e,n,r){const a=[...t];for(let i=a.length;i<r.length;i++)a.push(1);for(let i=0;i<n;i++)i===0?a[e]=1:(a.splice(e,0,1),a.pop());return a}function lL(t,e,n){return n<=t?n:n-(e-1)}function cL(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function xae(t,e,n,r,a,i,s,o,u){const l=t.length;let c=new Array(l),f=new Array(l),d=new Array(l);if(e.length&&n>0){const h=e[0],m=n+1;c=fL(s,h,m,r,t),f=dL(o,h,m,a,t),d=uL(i,h,m,t)}else for(let h=0;h<l;h++)c[h]=hL(s,r,i,t,h,u),f[h]=mL(o,a,i,t,h,u),d[h]=pL(i,h,u);return{begin:c,end:f,strides:d}}function fL(t,e,n,r,a){const i=[...a],s=cL(n,e);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=0;else{const u=lL(e,n,o);let l=r[u];t&1<<u&&(l=0),i[o]=l}return i}function dL(t,e,n,r,a){const i=[...a],s=cL(n,e);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=Number.MAX_SAFE_INTEGER;else{const u=lL(e,n,o);let l=r[u];t&1<<u&&(l=Number.MAX_SAFE_INTEGER),i[o]=l}for(let o=0;o<i.length;o++){const u=a[o];i[o]<0&&(i[o]+=u),i[o]=ec(0,i[o],a[o])}return i}function pL(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function hL(t,e,n,r,a,i){let s=e[a];const o=n[a]||1;(t&1<<a||i&1<<a||s==null)&&(o>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);const u=r[a];return s<0&&(s+=u),s=ec(0,s,u-1),s}function mL(t,e,n,r,a,i){let s=e[a];const o=n[a]||1;(t&1<<a||i&1<<a||s==null)&&(o>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);const u=r[a];return s<0&&(s+=u),o>0?s=ec(0,s,u):s=ec(-1,s,u-1),s}function gD(t,e,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(e[a]>0||n[a]!==t[a])return!1;return!0}function vD(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function gb(t,e,n){let r;const a=t.shape.length;typeof e=="number"?r=[e,...new Array(a-1).fill(0)]:e.length<a?r=e.concat(new Array(a-e.length).fill(0)):r=e.slice(),r.forEach(s=>{Y(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(a).fill(-1):typeof n=="number"?i=[n,...new Array(a-1).fill(-1)]:n.length<a?i=n.concat(new Array(a-n.length).fill(-1)):i=n,i=i.map((s,o)=>s>=0?s:(Y(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${o}.`),t.shape[o]-r[o])),[r,i]}function yD(t,e,n,r,a,i,s,o,u){let l;if(r==null?(l=new Array(e.length),l.fill(1)):l=r,s!=null&&s&s-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const f={dims:l.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:l.slice(),beginMask:a,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:u};for(let x=0;x<f.dims;x++)c&&1<<x&o&&f.numAddAxisAfterEllipsis++,1<<x&s&&(c=!0);c||(f.ellipsisMask|=1<<f.dims,f.dims++);const d={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};wae(f,d);let h=!0,m=!0,v=!0;const y=[],b=[];for(let x=0;x<t.length;++x){if(d.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const S=!!(d.shrinkAxisMask&1<<x),C=t[x];if(C===-1){y.push(S?1:-1);continue}const E=[d.beginMask&1<<x,d.endMask&1<<x],A=[d.strides[x]>0?0:-1,d.strides[x]>0?C:C-1];if(S&&d.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&d.strides[x]===1;const k=!!(d.beginMask&1<<x&&d.endMask&1<<x);if(d.beginValid&&d.endValid){if(S){const O=d.begin[x]<0?C+d.begin[x]:d.begin[x];if(d.begin[x]=O,d.end[x]=d.begin[x]+1,O<0||O>=C)throw Error(`slice index ${d.begin[x]} of dimension ${x} out of bounds.`)}else d.begin[x]=f_(d.begin[x],0,d.strides[x],C,E,A),d.end[x]=f_(d.end[x],1,d.strides[x],C,E,A);const $=d.strides[x]===1&&d.begin[x]===0&&d.end[x]===C;h=h&&$,m=m&&(x===0&&d.strides[x]===1||$)}else h=h&&d.strides[x]===1&&k,m=m&&(x===0&&d.strides[x]===1||k);let T,I=!1;if(d.beginValid&&d.endValid?(T=d.end[x]-d.begin[x],I=!0):S?(T=1,I=!0):k&&C>=0&&(d.strides[x]<0?T=-C:T=C,I=!0),I){let $;T===0||T<0!=d.strides[x]<0?$=0:$=Math.trunc(T/d.strides[x])+(T%d.strides[x]!==0?1:0),y.push($)}else y.push(-1)}for(let x=0;x<d.finalShapeGatherIndices.length;++x){const S=d.finalShapeGatherIndices[x];S>=0?b.push(y[S]):S===rS&&b.push(1)}return{finalShapeSparse:b.filter((x,S)=>d.finalShapeGatherIndices[S]!==rS),finalShape:b,isIdentity:h,sliceDim0:m,isSimpleSlice:v,begin:d.begin,end:d.end,strides:d.strides}}function wae(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const a=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<a;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(rS),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(yae),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function f_(t,e,n,r,a,i){if(a[e])return n>0?i[e]:i[e+1&1];{const s=t<0?r+t:t;return s<i[0]?i[0]:s>i[1]?i[1]:s}}const Nae=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:hD,computeFlatOffset:vD,computeOutShape:mD,getNormalizedAxes:xae,isSliceContinous:gD,maskToAxes:bae,parseSliceParams:gb,sliceInfo:yD,startForAxis:hL,startIndicesWithElidedDims:fL,stopForAxis:mL,stopIndicesWithElidedDims:dL,stridesForAxis:pL,stridesWithElidedDims:uL},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sae{static sgd(e){return new cD(e)}static momentum(e,n,r=!1){return new eL(e,n,r)}static rmsprop(e,n=.9,r=0,a=null,i=!1){return new tL(e,n,r,a,i)}static adam(e=.001,n=.9,r=.999,a=null){return new QB(e,n,r,a)}static adadelta(e=.001,n=.95,r=null){return new YB(e,n,r)}static adamax(e=.002,n=.9,r=.999,a=null,i=0){return new JB(e,n,r,a,i)}static adagrad(e,n=.1){return new ZB(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cf=Sae;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cae=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function gL(){return new Promise(t=>Cae(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bD(t,e){const n=t[0].length;t.forEach((a,i)=>{Y(a.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),Y(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((a,i)=>{for(let s=0;s<n;s++)Y(s===e||a[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${i}] (${a}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function no(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ws;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(ws||(ws={}));function vL(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let a=1;a<n.length;++a){const i=n[a],s=r[r.length-n.length+a],o=r[s];if(i>=0)if(o>=0){if(o!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${a+t}] = ${i} but shape[${a+t}] = ${o}`)}else r[s]=i}return r}function yL(t){const e={FIRST_DIM_SIZE:ws.FIRST_DIM_SIZE,VALUE_ROWIDS:ws.VALUE_ROWIDS,ROW_LENGTHS:ws.ROW_LENGTHS,ROW_SPLITS:ws.ROW_SPLITS,ROW_LIMITS:ws.ROW_LIMITS,ROW_STARTS:ws.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function bL(t){return t.length===0?0:t[0]===ws.FIRST_DIM_SIZE?t.length-1:t.length}function xL(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let a=0;a<Math.min(n,r-1);++a){const i=t[a],s=e[a+1];if(i>=0&&s>=0&&i!==1&&i!==s)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${a-t.length}] = ${i} but ragged tensor input.flatValues.shape[${a-t.length}] = ${s}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xD=30;function vb(t){return t<=xD?t:LN(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wD(t,e,n){const r=n*(typeof t=="number"?t:t[0]),a=e*(typeof t=="number"?t:t[1]);return[r,a]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mm(t,e,n,r=!0){let a=[];if(r)a=a.concat(e.slice(0)),a.push(t[0]/n),a=a.concat(t.slice(1));else{a=a.concat(t[0]);const i=e.length;for(let s=0;s<i;++s)a=a.concat([t[s+1]/e[s],e[s]]);a=a.concat(t.slice(i+1))}return a}function Pm(t,e,n=!0){const r=[];if(n){r.push(e);for(let a=e+1;a<t;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{const a=[],i=[];for(let s=1;s<t;++s)s>=e*2+1||s%2===1?i.push(s):a.push(s);r.push(...a),r.push(0),r.push(...i)}return r}function Bm(t,e,n,r=!0){const a=[];r?a.push(t[0]/n):a.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?a.push(e[i-1]*t[i]):a.push(t[i]/e[i-1]):a.push(t[i]);return a}function ND(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function SD(t,e,n){const r=t.slice(0,1);for(let a=0;a<n;++a)r.push(t[a+1]-e[a][0]-e[a][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yb=1.7580993408473768,bb=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CD=.3275911,ED=.254829592,DD=-.284496736,TD=1.421413741,$D=-1.453152027,AD=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vo(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function wL(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function NL(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=0;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function SL(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=2;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function ID(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function CL(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function EL(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let a=0;a<Math.ceil(t/2);a++){const i=(e?2:-2)*Math.PI*(a/t);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function DL(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),a=Math.cos(r),i=Math.sin(r);return{real:a,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w2="->",Eae=/->/g,d_=",",p_="...";function kD(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(Eae,"").length)/w2.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${w2}").`);const[r,a]=t.split(w2);Y(r.indexOf(p_)===-1,()=>`The ellipsis notation ("${p_}") is not supported yet.`);const i=r.split(d_),s=i.length;if(e!==s)throw new Error(`Expected ${s} input tensors, received ${e}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let d=0;d<a.length;++d){const h=a[d];if(!i.some(m=>m.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);o.indexOf(h)===-1&&o.push(h)}for(let d=0;d<r.length;++d){const h=r[d];o.indexOf(h)===-1&&h!==d_&&o.push(h)}const u=new Array(i.length);for(let d=0;d<s;++d){if(new Set(i[d].split("")).size!==i[d].length)throw new Error(`Found duplicate axes in input component ${i[d]}. Support for duplicate axes in input is not implemented yet.`);u[d]=[];for(let h=0;h<i[d].length;++h)u[d].push(o.indexOf(i[d][h]))}const l=o.length,c=a.length,f=[];for(let d=c;d<l;++d)f.push(d);return{allDims:o,summedDims:f,idDims:u}}function _D(t,e){let n=new Array(t);n.fill(-1);for(let a=0;a<e.length;++a)n[e[a]]=a;const r=[];for(let a=0;a<t;++a)n[a]===-1&&r.push(a);return n=n.filter(a=>a!==-1),{permutationIndices:n,expandDims:r}}function OD(t,e,n){const r=new Array(t);for(let a=0;a<n.length;++a){const i=n[a].shape;for(let s=0;s<e[a].length;++s)r[e[a][s]]===void 0?r[e[a][s]]=i[s]:Y(r[e[a][s]]===i[s],()=>`Expected dimension ${r[e[a][s]]} at axis ${s} of input shaped ${JSON.stringify(i)}, but got dimension ${i[s]}`)}}function FD(t,e){const n=t,r=[];let a=0;t.length===0&&n.push(-1),a=t.length+1;for(let s=0;s<a;++s)r.push([]);const i=[];for(let s=0;s<n.length;++s){const o=n[s],u=Dae(e,o);for(const l of u)i.indexOf(l)===-1&&(r[s].push(l),i.push(l))}return{path:n,steps:r}}function RD(t){return t.every((e,n)=>e===n)}function Dae(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function MD(t,e,n=0){let r=[];if(typeof e=="number")Y(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const a=e.reduce((s,o)=>(o===-1&&(s+=1),s),0);Y(a<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const s=e.reduce((o,u)=>u>0?o+u:o);e[i]=t.shape[n]-s}Y(t.shape[n]===e.reduce((s,o)=>s+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TL(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function $L(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function AL(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IL(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function kL(t,e){return`size ${t} must be non-negative, not ${e}`}function _L(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function OL(t,e){const n=Oe(t),r=Oe(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function FL(t,e){const n=Oe(t),r=Oe(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aS(){return"segment ids must be >= 0"}function RL(){return"segment ids are not increasing"}function ML(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function PL(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BL(t,e){let n=!1,r;for(t<=xD?(r=t,n=!0):r=LN(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=LN(t,r+1);return r}function LL(t,e,n){const r=[],a=t.length;for(let i=0;i<a;i++)i!==e?r.push(t[i]):r.push(n);return r}function PD(t,e,n,r){const a=e.shape.length,i=t.shape.length;if(r!==0&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(t.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${t.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);const s=t.shape[n],o=[];let u=1,l=1,c=1;for(let f=0;f<r;++f)o.push(t.shape[f]),u*=t.shape[f];for(let f=r;f<n;f++)o.push(t.shape[f]),l*=t.shape[f];for(let f=r;f<a;f++)o.push(e.shape[f]);for(let f=n+1;f<i;f++)o.push(t.shape[f]),c*=t.shape[f];return{batchSize:u,sliceSize:c,outerSize:l,dimSize:s,outputShape:o}}const Tae=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:PD,computeOutShape:LL,segOpComputeOptimalWindowSize:BL},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wo(t){try{return t.map(e=>Mu(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function zL(t){return t.map(e=>ku(e))}const $ae=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:ED,ERF_A2:DD,ERF_A3:TD,ERF_A4:$D,ERF_A5:AD,ERF_P:CD,PARALLELIZE_THRESHOLD:xD,get RowPartitionType(){return ws},SELU_SCALE:bb,SELU_SCALEALPHA:yb,applyActivation:hb,assertAndGetBroadcastShape:Wt,assertAxesAreInnerMostDims:Zr,assertParamsConsistent:bD,assignToTypedArray:CL,axesAreInnerMostDims:ME,calculateShapes:wc,checkEinsumDimSizes:OD,checkPadOnDimRoundingMode:Ta,combineLocations:mB,combineRaggedTensorToTensorShapes:vL,complexWithEvenIndex:NL,complexWithOddIndex:SL,computeConv2DInfo:Rr,computeConv3DInfo:tl,computeDefaultPad:AE,computeDilation2DInfo:$m,computeOptimalWindowSize:vb,computeOutAndReduceShapes:Mr,computeOutShape:no,computePool2DInfo:is,computePool3DInfo:jo,convertConv2DDataFormat:Xo,decodeEinsumEquation:kD,eitherStridesOrDilationsAreOne:Yr,expandShapeToKeepDim:or,exponent:DL,exponents:EL,fromStringArrayToUint8:zL,fromUint8ToStringArray:Wo,getAxesPermutation:Zn,getBroadcastDims:Kf,getComplexWithIndex:ID,getEinsumComputePath:FD,getEinsumPermutation:_D,getFusedBiasGradient:pb,getFusedDyActivation:db,getImageCenter:wD,getInnerMostAxes:ur,getPermuted:Pm,getRaggedRank:bL,getReductionAxes:Er,getReshaped:Mm,getReshapedPermuted:Bm,getRowPartitionTypesHelper:yL,getSliceBeginCoords:ND,getSliceSize:SD,getSparseFillEmptyRowsIndicesDenseShapeMismatch:TL,getSparseFillEmptyRowsNegativeIndexErrorMessage:$L,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:AL,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:_L,getSparseReshapeInputOutputMismatchErrorMessage:FL,getSparseReshapeInputOutputMultipleErrorMessage:OL,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:IL,getSparseReshapeNegativeOutputDimErrorMessage:kL,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:PL,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:aS,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:RL,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:ML,getUndoAxesPermutation:nl,isIdentityPermutation:RD,log:hY,mergeRealAndImagArrays:Vo,prepareAndValidate:pD,prepareSplitSize:MD,segment_util:Tae,shouldFuse:mb,slice_util:Nae,splitRealAndImagArrays:wL,stridesOrDilationsArePositive:ic,tupleValuesAreOne:zu,upcastType:oi,validateDefaultValueShape:xL,validateInput:eD,validateUpdateShape:RB,warn:wi},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */eae();/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aae=Ae();Aae.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Ja;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(Ja||(Ja={}));var h_;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(h_||(h_={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iae={};function UL(t){return Iae[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U(t,e,n,r,a){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const o=i.inputIndexStart,u=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?o+1:i.inputIndexEnd,l=o<0?e.inputNames.length+o:o;if(i.type==="tensor")return Gr(e.inputNames[l],n,r,a);if(i.type==="tensors"){const d=e.inputs.slice(o,u);return e.inputNames.slice(o,u).filter((m,v)=>{var y;return((y=d[v])===null||y===void 0?void 0:y.op)!=="NoOp"}).map(m=>Gr(m,n,r,a))}const c=Gr(e.inputNames[l],n,r,a),f=c.dataSync();return i.type==="number"?f[0]:Zi(c.shape,f)}const s=e.attrParams[t];return s&&s.value}function Gr(t,e,n,r){const[a,i]=ei(t,n);if(r!=null){const o=r.getHashTableHandleByName(a);if(o!=null)return o}const s=n.currentContextIds.find(o=>!!e[Zy(a,o)]);return s!==void 0?e[Zy(a,s)][i]:void 0}function m_(t,e,n){return e[Zy(t,n.currentContextId)]}function $o(t,e){const[n,r,a]=ei(t,e);return[Zy(n,e&&e.currentContextId),r,a]}function Zy(t,e){return e?`${t}-${e}`:t}function ei(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const i=e.parseNodeNameCache.get(t);if(i!=null)return i}const r=t.split(":");let a;if(r.length===1)a=[t,0,void 0];else{const i=r[0],s=r.length===3?r[1]:void 0,o=Number(r[r.length-1]);a=[i,o,s]}return n&&e.parseNodeNameCache.set(t,a),a}function Cy(t,e,n){let r=U("pad",t,e,n);if(r==="explicit"){r=U("explicitPaddings",t,e,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)a[i][0]=r[i*2],a[i][1]=r[i*2+1];return a}return r}function Ao(t){return t.kept?t:Fo(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kae=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],_ae=Object.freeze(Object.defineProperty({__proto__:null,json:kae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oae=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Fae=Object.freeze(Object.defineProperty({__proto__:null,json:Oae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rae=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],Mae=Object.freeze(Object.defineProperty({__proto__:null,json:Rae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pae=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],Bae=Object.freeze(Object.defineProperty({__proto__:null,json:Pae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lae=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],zae=Object.freeze(Object.defineProperty({__proto__:null,json:Lae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uae=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Vae=Object.freeze(Object.defineProperty({__proto__:null,json:Uae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wae=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],qae=Object.freeze(Object.defineProperty({__proto__:null,json:Wae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gae=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Hae=Object.freeze(Object.defineProperty({__proto__:null,json:Gae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jae=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Xae=Object.freeze(Object.defineProperty({__proto__:null,json:jae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kae=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Yae=Object.freeze(Object.defineProperty({__proto__:null,json:Kae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zae=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Qae=Object.freeze(Object.defineProperty({__proto__:null,json:Zae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jae=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],eie=Object.freeze(Object.defineProperty({__proto__:null,json:Jae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tie=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],nie=Object.freeze(Object.defineProperty({__proto__:null,json:tie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rie=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],aie=Object.freeze(Object.defineProperty({__proto__:null,json:rie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iie=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],sie=Object.freeze(Object.defineProperty({__proto__:null,json:iie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oie=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],uie=Object.freeze(Object.defineProperty({__proto__:null,json:oie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lie=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],cie=Object.freeze(Object.defineProperty({__proto__:null,json:lie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fie=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],die=Object.freeze(Object.defineProperty({__proto__:null,json:fie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pie=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],hie=Object.freeze(Object.defineProperty({__proto__:null,json:pie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g_{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[_ae,Fae,Mae,Bae,zae,Vae,qae,Hae,Xae,Yae,Qae,eie,nie,aie,sie,uie,cie,die,hie],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,a)=>(r[a.tfOpName]=a,r),{})}transformGraph(e,n={}){const r=e.node,a=[],i=[],s=[],o=r.reduce((v,y)=>(v[y.name]=this.mapNode(y),y.op.startsWith("Placeholder")?a.push(v[y.name]):y.op==="Const"?i.push(v[y.name]):(y.input==null||y.input.length===0)&&s.push(v[y.name]),v),{});let u=[];const l=[];let c={},f={};n!=null&&(c=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));const d=Object.keys(o);d.forEach(v=>{const y=o[v];y.inputNames.forEach((b,w)=>{const[x,,S]=$o(b),C=o[x];if(C.outputs!=null){const E=C.outputs.indexOf(S);if(E!==-1){const A=`${x}:${E}`;y.inputNames[w]=A}}y.inputs.push(C),C.children.push(y)})}),Object.keys(f).length===0?d.forEach(v=>{const y=o[v];y.children.length===0&&l.push(y)}):Object.keys(f).forEach(v=>{const[y]=$o(v),b=o[y];b!=null&&(b.signatureKey=f[v],l.push(b))}),Object.keys(c).length>0?Object.keys(c).forEach(v=>{const[y]=$o(v),b=o[y];b&&(b.signatureKey=c[v],u.push(b))}):u=a;let h={};e.library!=null&&e.library.function!=null&&(h=e.library.function.reduce((v,y)=>(v[y.signature.name]=this.mapFunction(y),v),{}));const m={nodes:o,inputs:u,outputs:l,weights:i,placeholders:a,signature:n,functions:h};return s.length>0&&(m.initNodes=s),m}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=UL(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(a=>a.startsWith("^")?a.slice(1):a),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((a,i)=>(a[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},a),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((a,i)=>{const s=i.type;let o;switch(i.type){case"string":o=iS(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=iS(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":o=dS(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=dS(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":o=oS(e.attr,i.tfName,i.defaultValue||0),o===void 0&&i.tfDeprecatedName&&(o=oS(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":o=fS(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=fS(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":o=sS(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=sS(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":o=hS(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=hS(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":o=cS(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=cS(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":o=pS(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=pS(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":o=uS(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=uS(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":o=lS(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=lS(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":o=v_(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=v_(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return a[i.name]={value:o,type:s},a},{})),r}mapFunction(e){const n=e.nodeDef,r=[],a=[];let i={};n!=null&&(i=n.reduce((f,d)=>(f[d.name]=this.mapNode(d),d.op==="Const"&&a.push(f[d.name]),f),{}));const s=[],o=[];e.signature.inputArg.forEach(f=>{const[d]=$o(f.name),h={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:BD(f.type),type:"dtype"}},children:[]};h.signatureKey=f.name,s.push(h),i[d]=h}),Object.keys(i).forEach(f=>{const d=i[f];d.inputNames.forEach((h,m)=>{const[v,,y]=$o(h),b=i[v];if(b.outputs!=null){const w=b.outputs.indexOf(y);if(w!==-1){const x=`${v}:${w}`;d.inputNames[m]=x}}d.inputs.push(b),b.children.push(d)})});const l=e.ret;e.signature.outputArg.forEach(f=>{const[d,h]=$o(l[f.name]),m=i[d];m!=null&&(m.defaultOutput=h,o.push(m))});const c=this.mapArgsToSignature(e);return{nodes:i,inputs:s,outputs:o,weights:a,placeholders:r,signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function mie(t){const e=Ae().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function VL(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):mie(t);return e?n:n.toLowerCase()}function iS(t,e,n,r=!1){const a=t[e];return a!=null?VL(a.s,r):n}function sS(t,e,n){const r=t[e];return r?r.b:n}function oS(t,e,n){const r=t[e]||{},a=r.i!=null?r.i:r.f!=null?r.f:n;return typeof a=="number"?a:parseInt(a,10)}function BD(t){switch(typeof t=="string"&&(t=Ja[t]),t){case Ja.DT_FLOAT:case Ja.DT_HALF:return"float32";case Ja.DT_INT32:case Ja.DT_INT64:case Ja.DT_INT8:case Ja.DT_UINT8:return"int32";case Ja.DT_BOOL:return"bool";case Ja.DT_DOUBLE:return"float32";case Ja.DT_STRING:return"string";case Ja.DT_COMPLEX64:case Ja.DT_COMPLEX128:return"complex64";default:return null}}function v_(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function uS(t,e,n){const r=t[e];return r&&r.type?BD(r.type):n}function lS(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(a=>BD(a)):n}function WL(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function cS(t,e,n){const r=t[e];return r&&r.shape?WL(r.shape):n}function fS(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(a=>typeof a=="number"?a:parseInt(a,10)):n}function dS(t,e,n,r=!1){const a=t[e];return a&&a.list&&a.list.s?a.list.s.map(i=>VL(i,r)):n}function pS(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(a=>WL(a)):n}function hS(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gie{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(a=>this.getInput(a)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((a,i)=>(a[i]=this.getAttr(i),a),{}))}getInput(e){return Gr(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Gr(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return oS(this.node.rawAttrs,e,n);if(r.s!=null)return iS(this.node.rawAttrs,e,n);if(r.b!=null)return sS(this.node.rawAttrs,e,n);if(r.shape!=null)return cS(this.node.rawAttrs,e,n);if(r.type!=null)return uS(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return fS(this.node.rawAttrs,e,n);if(r.list.s!=null)return dS(this.node.rawAttrs,e,n);if(r.list.shape!=null)return pS(this.node.rawAttrs,e,n);if(r.list.b!=null)return hS(this.node.rawAttrs,e,n);if(r.list.type!=null)return lS(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qr=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:DP,abs:yr,acos:qP,acosh:GP,add:We,addN:_Z,all:$E,any:Ky,argMax:Xf,argMin:HP,asin:jP,asinh:XP,atan:KP,atan2:YP,atanh:ZP,avgPool:K1,avgPool3d:QP,basicLSTMCell:tQ,batchNorm:Am,batchNorm2d:JP,batchNorm3d:eB,batchNorm4d:tB,batchToSpaceND:Y1,bincount:nB,bitwiseAnd:cQ,booleanMaskAsync:Kte,broadcastArgs:dQ,broadcastTo:Ff,buffer:Qt,cast:st,ceil:rB,clipByValue:ui,clone:Fo,complex:Bu,concat:hr,concat1d:aB,concat2d:iB,concat3d:sB,concat4d:oB,conv1d:IE,conv2d:Uu,conv2dTranspose:_E,conv3d:uB,conv3dTranspose:cB,cos:Z1,cosh:OE,cosineWindow:aD,cumprod:Yy,cumsum:FE,denseBincount:eS,depthToSpace:fB,depthwiseConv2d:Im,diag:RQ,dilation2d:dB,div:yt,divNoNan:pB,dot:hB,dropout:zB,einsum:Sf,elu:km,enclosingPowerOfTwo:UB,ensureShape:GQ,equal:Ts,erf:RE,euclideanNorm:vB,exp:li,expandDims:wa,expm1:yB,eye:PE,fft:cb,fill:yd,floor:Om,floorDiv:TE,fused:vne,gather:Fm,gatherND:ine,greater:gi,greaterEqual:rl,ifft:fh,imag:Q1,image:Qs,inTopKAsync:lne,irfft:QE,isFinite:bB,isInf:xB,isNaN:wB,leakyRelu:J1,less:uh,lessEqual:yc,linalg:KB,linspace:vJ,localResponseNormalization:NB,log:Ci,log1p:eb,logSigmoid:SB,logSoftmax:BE,logSumExp:tb,logicalAnd:so,logicalNot:nb,logicalOr:LE,logicalXor:CB,losses:Xre,lowerBound:OJ,matMul:Jt,max:Qi,maxPool:rb,maxPool3d:EB,maxPoolWithArgmax:PJ,maximum:Ko,mean:nr,meshgrid:zJ,min:oh,minimum:oc,mirrorPad:DB,mod:TB,moments:ab,movingAverage:Qte,mul:ge,multiRNNCell:HJ,multinomial:XJ,neg:Un,norm:_m,notEqual:Yf,oneHot:UE,ones:ai,onesLike:Ei,op:de,outerProduct:JJ,pad:al,pad1d:nee,pad2d:aee,pad3d:see,pad4d:uee,pool:$B,pow:zo,prelu:sb,print:WP,prod:AB,raggedGather:gee,raggedRange:yee,raggedTensorToTensor:xee,rand:Nee,randomGamma:qee,randomNormal:WE,randomStandardNormal:jee,randomUniform:bc,randomUniformInt:Yee,range:Zf,real:lh,reciprocal:kB,relu:co,relu6:qE,reshape:be,reverse:ns,reverse1d:rte,reverse2d:ite,reverse3d:ote,reverse4d:lte,rfft:fb,round:GE,rsqrt:HE,scalar:St,scatterND:ene,searchSorted:zE,selu:jE,separableConv2d:XE,setdiff1dAsync:mte,sigmoid:to,sign:_B,signal:jre,sin:KE,sinh:YE,slice:ln,slice1d:ob,slice2d:ZE,slice3d:ub,slice4d:ch,softmax:lb,softplus:bd,spaceToBatchND:ib,sparse:Kre,sparseToDense:rne,spectral:Hre,split:ii,sqrt:Kr,square:On,squaredDifference:JE,squeeze:xc,stack:ci,step:xd,stridedSlice:OB,string:Yre,sub:ct,sum:pt,tan:FB,tanh:sc,tensor:Cs,tensor1d:na,tensor2d:Rf,tensor3d:Rte,tensor4d:Mte,tensor5d:Pte,tensor6d:Bte,tensorScatterUpdate:zte,tile:ji,topk:MB,transpose:cn,truncatedNormal:tD,unique:PB,unsortedSegmentSum:nD,unstack:rs,upperBound:Hte,variable:BB,where:ia,whereAsync:LB,zeros:br,zerosLike:dn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vie=(t,e,n,r=Qr)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(U("a",t,e,n),U("b",t,e,n))];case"AddN":return[r.addN(U("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(U("a",t,e,n),U("b",t,e,n))];case"Mul":return[r.mul(U("a",t,e,n),U("b",t,e,n))];case"RealDiv":case"Div":return[r.div(U("a",t,e,n),U("b",t,e,n))];case"DivNoNan":return[r.divNoNan(U("a",t,e,n),U("b",t,e,n))];case"FloorDiv":return[r.floorDiv(U("a",t,e,n),U("b",t,e,n))];case"Sub":return[r.sub(U("a",t,e,n),U("b",t,e,n))];case"Minimum":return[r.minimum(U("a",t,e,n),U("b",t,e,n))];case"Maximum":return[r.maximum(U("a",t,e,n),U("b",t,e,n))];case"Pow":return[r.pow(U("a",t,e,n),U("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(U("a",t,e,n),U("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yie=(t,e,n,r=Qr)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(U("x",t,e,n))];case"Acos":return[r.acos(U("x",t,e,n))];case"Acosh":return[r.acosh(U("x",t,e,n))];case"Asin":return[r.asin(U("x",t,e,n))];case"Asinh":return[r.asinh(U("x",t,e,n))];case"Atan":return[r.atan(U("x",t,e,n))];case"Atan2":return[r.atan2(U("x",t,e,n),U("y",t,e,n))];case"Atanh":return[r.atanh(U("x",t,e,n))];case"Ceil":return[r.ceil(U("x",t,e,n))];case"Complex":return[r.complex(U("real",t,e,n),U("imag",t,e,n))];case"Cos":return[r.cos(U("x",t,e,n))];case"Cosh":return[r.cosh(U("x",t,e,n))];case"Elu":return[r.elu(U("x",t,e,n))];case"Erf":return[r.erf(U("x",t,e,n))];case"Exp":return[r.exp(U("x",t,e,n))];case"Expm1":return[r.expm1(U("x",t,e,n))];case"Floor":return[r.floor(U("x",t,e,n))];case"Log":return[r.log(U("x",t,e,n))];case"Log1p":return[r.log1p(U("x",t,e,n))];case"Imag":return[r.imag(U("x",t,e,n))];case"Neg":return[r.neg(U("x",t,e,n))];case"Reciprocal":return[r.reciprocal(U("x",t,e,n))];case"Real":return[r.real(U("x",t,e,n))];case"Relu":return[r.relu(U("x",t,e,n))];case"Round":return[r.round(U("x",t,e,n))];case"Selu":return[r.selu(U("x",t,e,n))];case"Sigmoid":return[r.sigmoid(U("x",t,e,n))];case"Sin":return[r.sin(U("x",t,e,n))];case"Sign":return[r.sign(U("x",t,e,n))];case"Sinh":return[r.sinh(U("x",t,e,n))];case"Softplus":return[r.softplus(U("x",t,e,n))];case"Sqrt":return[r.sqrt(U("x",t,e,n))];case"Square":return[r.square(U("x",t,e,n))];case"Tanh":return[r.tanh(U("x",t,e,n))];case"Tan":return[r.tan(U("x",t,e,n))];case"ClipByValue":return[r.clipByValue(U("x",t,e,n),U("clipValueMin",t,e,n),U("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(U("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Gr(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(U("x",t,e,n),U("alpha",t,e,n))];case"Prelu":return[r.prelu(U("x",t,e,n),U("alpha",t,e,n))];case"IsNan":return[r.isNaN(Gr(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(Gr(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(Gr(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vi(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){Y(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const a=t[r],i=e[r];Y(a<0||i<0||a===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function y_(t){return!(typeof t=="number"||t.some(e=>e<0))}function Ap(t,e,n){let r=mS(t,n);const a=!y_(r);if(a&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(a&&e.forEach(i=>{r=mS(i.shape,r)}),!y_(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function mS(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const a=t[r],i=e[r];if(a>=0&&i>=0&&a!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=a>=0?a:i}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bie{constructor(e,n,r,a,i,s,o){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=s,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=St(0),_r(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),Vi(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,_r(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,a)=>this.write(r,n[a]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let a=0;a<this.size();a++)e.push(a)}if(e.length===0)return Cs([],[0].concat(this.elementShape));const r=this.readMany(e);return Vi(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),ci(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Cs([],[0].concat(this.elementShape));const n=[];for(let a=0;a<this.size();a++)n.push(a);const r=this.readMany(n);return Vi(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),hr(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,rs(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const a=e.map(u=>(r+=u,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,s=[];De(()=>{n=be(n,[1,r,i]);for(let u=0;u<e.length;++u){const c=[0,u===0?0:a[u-1],0],f=[1,e[u],i];s[u]=be(ln(n,c,f),this.elementShape)}return s});const o=[];for(let u=0;u<e.length;u++)o[u]=u;this.writeMany(o,s)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lc{get id(){return this.idTensor.id}constructor(e,n,r,a=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);Vi(n,i.shape,"TensorList shape mismatch: "),_r(i)}),this.idTensor=St(0),this.maxNumElements=a,_r(this.idTensor)}copy(){return new lc([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Vi(e,this.elementShape,"TensorList shape mismatch: ");const a=Ap(this.elementShape,this.tensors,e);return De(()=>{const i=this.tensors.map(s=>be(s,a));return ci(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=Ap(this.elementShape,this.tensors,e),a=this.tensors.pop();return a.kept=!1,Vi(a.shape,e,"TensorList shape mismatch: "),be(a,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Vi(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");_r(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new lc([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Vi(this.tensors[e].shape,n,"TensorList shape mismatch: ");const a=Ap(this.elementShape,this.tensors,n);return be(this.tensors[e],a)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Vi(this.elementShape,n.shape,"TensorList shape mismatch: "),_r(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);Vi(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const a=Ap(this.elementShape,this.tensors,r);return e.length===0?Cs([],[0].concat(a)):De(()=>{const i=e.map(s=>be(this.tensors[s],a));return ci(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Vi(this.elementShape,n,"TensorList shape mismatch: ");const r=Ap(this.elementShape,this.tensors,n);return this.size()===0?Cs([],[0].concat(r)):De(()=>{const a=this.tensors.map(i=>be(i,r));return hr(a,0)})}}function xie(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const a=t.shape.slice(1);Vi(a,e,"TensorList shape mismatch: ");const i=rs(t);return new lc(i,e,r)}function wie(t,e,n,r){return new lc([],t,e,r)}function Nie(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const a=Math.max(...e);if(r!=null&&r!==-1&&a>=r)throw new Error(`Max index must be < array size (${a}  vs. ${r})`);const i=new lc([],n,t.dtype,r),s=rs(t,0);return e.forEach((o,u)=>{i.setItem(o,s[u])}),i}function Sie(t,e,n){let r=0;const a=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),s=mS(i,n),o=r===0?0:t.size/r,u=De(()=>{const c=[];t=be(t,[1,r,o]);for(let f=0;f<e.length;++f){const h=[0,f===0?0:a[f-1],0],m=[1,e[f],o];c[f]=be(ln(t,h,m),s)}return t.dispose(),c}),l=new lc([],n,t.dtype,e.length);for(let c=0;c<u.length;c++)l.setItem(c,u[c]);return l}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cie=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=U("thenBranch",t,e,n),a=U("elseBranch",t,e,n),i=U("cond",t,e,n),s=U("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=U("body",t,e,n),a=U("cond",t,e,n),i=U("args",t,e,n),s=await n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),o=i.map(c=>c.id);let u=await s[0].data();s.forEach(c=>{!c.kept&&o.indexOf(c.id)===-1&&c.dispose()});let l=i;for(;u[0];){const c=l;l=await n.functionMap[r].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);const f=l.map(h=>h.id);c.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()});const d=await n.functionMap[a].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);u=await d[0].data(),d.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()})}return l}case"LoopCond":{const r=U("pred",t,e,n);return[Ao(r)]}case"Switch":{const r=U("pred",t,e,n);let a=U("data",t,e,n);return a.kept||(a=Ao(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=t.inputNames.find(a=>Gr(a,e,n)!==void 0);if(r){const a=Gr(r,e,n);return[Ao(a)]}return}case"Enter":{const r=U("frameName",t,e,n),a=U("tensor",t,e,n);return n.enterFrame(r),[Ao(a)]}case"Exit":{const r=U("tensor",t,e,n);return n.exitFrame(),[Ao(r)]}case"NextIteration":{const r=U("tensor",t,e,n);return n.nextIteration(),[Ao(r)]}case"TensorArrayV3":{const r=U("size",t,e,n),a=U("dtype",t,e,n),i=U("elementShape",t,e,n),s=U("dynamicSize",t,e,n),o=U("clearAfterRead",t,e,n),u=U("identicalElementShapes",t,e,n),l=U("name",t,e,n),c=new bie(l,a,r,i,u,s,o);return n.addTensorArray(c),[c.idTensor,St(1)]}case"TensorArrayWriteV3":{const r=U("tensorArrayId",t,e,n),a=U("index",t,e,n),i=U("tensor",t,e,n),s=n.getTensorArray(r.id);return s.write(a,i),[s.idTensor]}case"TensorArrayReadV3":{const r=U("tensorArrayId",t,e,n),a=U("index",t,e,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{const r=U("tensorArrayId",t,e,n),a=U("indices",t,e,n),i=U("dtype",t,e,n);return[n.getTensorArray(r.id).gather(a,i)]}case"TensorArrayScatterV3":{const r=U("tensorArrayId",t,e,n),a=U("indices",t,e,n),i=U("tensor",t,e,n),s=n.getTensorArray(r.id);return s.scatter(a,i),[s.idTensor]}case"TensorArrayConcatV3":{const r=U("tensorArrayId",t,e,n),a=n.getTensorArray(r.id),i=U("dtype",t,e,n);return[a.concat(i)]}case"TensorArraySplitV3":{const r=U("tensorArrayId",t,e,n),a=U("tensor",t,e,n),i=U("lengths",t,e,n),s=n.getTensorArray(r.id);return s.split(i,a),[s.idTensor]}case"TensorArraySizeV3":{const r=U("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return[St(a.size(),"int32")]}case"TensorArrayCloseV3":{const r=U("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=U("tensorListId",t,e,n),a=U("index",t,e,n),i=U("tensor",t,e,n),s=n.getTensorList(r.id);return s.setItem(a,i),[s.idTensor]}case"TensorListGetItem":{const r=U("tensorListId",t,e,n),a=U("index",t,e,n),i=U("elementShape",t,e,n),s=U("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(a,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{const r=U("indices",t,e,n),a=U("tensor",t,e,n),i=U("elementShape",t,e,n),s=U("numElements",t,e,n),o=Nie(a,r,i,s);return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=U("elementShape",t,e,n),a=U("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const s=U(i,t,e,n),o=t.op==="TensorListReserve"?-1:s,u=wie(r,a,s,o);return n.addTensorList(u),[u.idTensor]}case"TensorListGather":{const r=U("tensorListId",t,e,n),a=U("indices",t,e,n),i=U("elementShape",t,e,n),s=U("elementDType",t,e,n);return[n.getTensorList(r.id).gather(a,s,i)]}case"TensorListStack":{const r=U("tensorListId",t,e,n),a=U("elementShape",t,e,n),i=U("elementDType",t,e,n),s=U("numElements",t,e,n);return[n.getTensorList(r.id).stack(a,i,s)]}case"TensorListFromTensor":{const r=U("tensor",t,e,n),a=U("elementShape",t,e,n),i=U("elementDType",t,e,n),s=xie(r,a,i);return n.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=U("tensorListId",t,e,n),a=n.getTensorList(r.id),i=U("dtype",t,e,n),s=U("elementShape",t,e,n);return[a.concat(i,s)]}case"TensorListPushBack":{const r=U("tensorListId",t,e,n),a=U("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(a),[i.idTensor]}case"TensorListPopBack":{const r=U("tensorListId",t,e,n),a=U("elementShape",t,e,n),i=U("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(a,i)]}case"TensorListSplit":{const r=U("tensor",t,e,n),a=U("elementShape",t,e,n),i=U("lengths",t,e,n),s=Sie(r,i,a);return n.addTensorList(s),[s.idTensor]}case"TensorListLength":{const r=U("tensorListId",t,e,n),a=n.getTensorList(r.id);return[St(a.size(),"int32")]}case"TensorListResize":{const r=U("tensorListId",t,e,n),a=U("size",t,e,n),s=n.getTensorList(r.id).resize(a);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b_(t,e,n){const[r,a]=U("fusedOps",t,e,n),i=r==="biasadd",s=!i,o=a==="prelu",u=r==="fusedbatchnorm",l=U("numArgs",t,e,n);if(i){if(o&&l!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&i&&l!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=U("strides",t,e,n),f=Cy(t,e,n),d=U("dataFormat",t,e,n).toUpperCase(),h=U("dilations",t,e,n);let[m,v]=U("args",t,e,n);s&&(v=m,m=void 0);const y=U("leakyreluAlpha",t,e,n);return{stride:c,pad:f,dataFormat:d,dilations:h,biasArg:m,preluArg:v,activationFunc:a,leakyreluAlpha:y}}const Eie=(t,e,n,r=Qr)=>{switch(t.op){case"Conv1D":{const a=U("stride",t,e,n),i=U("pad",t,e,n),s=U("dataFormat",t,e,n).toUpperCase(),o=U("dilation",t,e,n);return[r.conv1d(U("x",t,e,n),U("filter",t,e,n),a,i,s,o)]}case"Conv2D":{const a=U("strides",t,e,n),i=Cy(t,e,n),s=U("dataFormat",t,e,n).toUpperCase(),o=U("dilations",t,e,n);return[r.conv2d(U("x",t,e,n),U("filter",t,e,n),[a[1],a[2]],i,s,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:a,pad:i,dataFormat:s,dilations:o,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:f}=b_(t,e,n);return[r.fused.conv2d({x:U("x",t,e,n),filter:U("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:s,dilations:[o[1],o[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{const{stride:a,pad:i,dataFormat:s,dilations:o,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:f}=b_(t,e,n);return[r.fused.depthwiseConv2d({x:U("x",t,e,n),filter:U("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:s,dilations:[o[1],o[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const a=U("outputShape",t,e,n),i=U("strides",t,e,n),s=Cy(t,e,n);return[r.conv2dTranspose(U("x",t,e,n),U("filter",t,e,n),a,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const a=U("strides",t,e,n),i=Cy(t,e,n),s=U("dilations",t,e,n),o=U("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(U("input",t,e,n),U("filter",t,e,n),[a[1],a[2]],i,o,[s[1],s[2]])]}case"Conv3D":{const a=U("strides",t,e,n),i=U("pad",t,e,n),s=U("dataFormat",t,e,n).toUpperCase(),o=U("dilations",t,e,n);return[r.conv3d(U("x",t,e,n),U("filter",t,e,n),[a[1],a[2],a[3]],i,s,[o[1],o[2],o[3]])]}case"AvgPool":{const a=U("strides",t,e,n),i=U("pad",t,e,n),s=U("kernelSize",t,e,n);return[r.avgPool(U("x",t,e,n),[s[1],s[2]],[a[1],a[2]],i)]}case"MaxPool":{const a=U("strides",t,e,n),i=U("pad",t,e,n),s=U("kernelSize",t,e,n);return[r.maxPool(U("x",t,e,n),[s[1],s[2]],[a[1],a[2]],i)]}case"MaxPoolWithArgmax":{const a=U("strides",t,e,n),i=U("pad",t,e,n),s=U("kernelSize",t,e,n),o=U("includeBatchInIndex",t,e,n),{result:u,indexes:l}=r.maxPoolWithArgmax(U("x",t,e,n),[s[1],s[2]],[a[1],a[2]],i,o);return[u,l]}case"AvgPool3D":{const a=U("strides",t,e,n),i=U("pad",t,e,n),s=U("kernelSize",t,e,n);return[r.avgPool3d(U("x",t,e,n),[s[1],s[2],s[3]],[a[1],a[2],a[3]],i)]}case"MaxPool3D":{const a=U("strides",t,e,n),i=U("pad",t,e,n),s=U("kernelSize",t,e,n);return[r.maxPool3d(U("x",t,e,n),[s[1],s[2],s[3]],[a[1],a[2],a[3]],i)]}case"Dilation2D":{const a=U("strides",t,e,n),i=U("pad",t,e,n),s=U("dilations",t,e,n),o=a[1],u=a[2],l=s[1],c=s[2];return[r.dilation2d(U("x",t,e,n),U("filter",t,e,n),[o,u],i,[l,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Die=(t,e,n,r=Qr)=>{switch(t.op){case"Fill":{const a=U("shape",t,e,n),i=U("dtype",t,e,n),s=U("value",t,e,n);return[r.fill(a,s,i)]}case"LinSpace":{const a=U("start",t,e,n),i=U("stop",t,e,n),s=U("num",t,e,n);return[r.linspace(a,i,s)]}case"Multinomial":{const a=U("logits",t,e,n),i=U("numSamples",t,e,n),s=U("seed",t,e,n);return[r.multinomial(a,i,s)]}case"OneHot":{const a=U("indices",t,e,n),i=U("depth",t,e,n),s=U("onValue",t,e,n),o=U("offValue",t,e,n),u=U("dtype",t,e,n);return[r.oneHot(a,i,s,o,u)]}case"Ones":return[r.ones(U("shape",t,e,n),U("dtype",t,e,n))];case"OnesLike":return[r.onesLike(U("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(U("shape",t,e,n),U("dtype",t,e,n),U("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(U("shape",t,e,n),U("minval",t,e,n),U("maxval",t,e,n),U("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(U("shape",t,e,n),U("minval",t,e,n),U("maxval",t,e,n),U("seed",t,e,n))];case"Range":{const a=U("start",t,e,n),i=U("stop",t,e,n),s=U("step",t,e,n);return[r.range(a,i,s,U("dtype",t,e,n))]}case"TruncatedNormal":{const a=U("shape",t,e,n),i=U("mean",t,e,n),s=U("stdDev",t,e,n),o=U("seed",t,e,n);return[r.truncatedNormal(a,i,s,U("dtype",t,e,n),o)]}case"Zeros":return[r.zeros(U("shape",t,e,n),U("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(U("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2(t,e,n){const r=U("boxes",t,e,n),a=U("scores",t,e,n),i=U("maxOutputSize",t,e,n),s=U("iouThreshold",t,e,n),o=U("scoreThreshold",t,e,n),u=U("softNmsSigma",t,e,n);return{boxes:r,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:o,softNmsSigma:u}}const Tie=async(t,e,n,r,a=Qr)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:s,maxOutputSize:o,iouThreshold:u,scoreThreshold:l,softNmsSigma:c}=N2(t,e,n),f=await a.image.nonMaxSuppressionWithScoreAsync(i,s,o,u,l,c);return[f.selectedIndices,f.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:s,maxOutputSize:o,iouThreshold:u,scoreThreshold:l}=N2(t,e,n),c=U("padToMaxOutputSize",t,e,n),f=await a.image.nonMaxSuppressionPaddedAsync(i,s,o,u,l,c);return[f.selectedIndices,f.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:s,maxOutputSize:o,iouThreshold:u,scoreThreshold:l}=N2(t,e,n);return[await a.image.nonMaxSuppressionAsync(i,s,o,u,l)]}case"Where":{const i=a.cast(U("condition",t,e,n),"bool"),s=[await a.whereAsync(i)];return i.dispose(),s}case"ListDiff":return a.setdiff1dAsync(U("x",t,e,n),U("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ie=(t,e,n,r=Qr)=>{switch(t.op){case"LowerBound":{const a=U("sortedSequence",t,e,n),i=U("values",t,e,n);return[r.lowerBound(a,i)]}case"TopKV2":{const a=U("x",t,e,n),i=U("k",t,e,n),s=U("sorted",t,e,n),o=r.topk(a,i,s);return[o.values,o.indices]}case"UpperBound":{const a=U("sortedSequence",t,e,n),i=U("values",t,e,n);return[r.upperBound(a,i)]}case"Unique":{const a=U("x",t,e,n),i=r.unique(a);return[i.values,i.indices]}case"UniqueV2":{const a=U("x",t,e,n),i=U("axis",t,e,n),s=r.unique(a,i);return[s.values,s.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aie=(t,e,n,r=Qr)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const a=U("default",t,e,n);return[Gr(t.name,e,n)||a];case"Placeholder":return[Gr(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=U("x",t,e,n);return[Ao(c)]}case"IdentityN":return U("x",t,e,n).map(c=>Ao(c));case"Snapshot":const i=U("x",t,e,n);return[Ao(i)];case"Shape":return[r.tensor1d(U("x",t,e,n).shape,"int32")];case"ShapeN":return U("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(U("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(U("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const s=U("x",t,e,n),o=U("data",t,e,n),u=U("message",t,e,n),l=U("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let c=0;c<o.length;c++)console.log(Array.prototype.slice.call(o[c].dataSync()).slice(0,l));return[s];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Iie{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=St(0),this.tensorMap=new Map,_r(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return St(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(a=>a.dispose()),this.tensorMap.clear(),De(()=>{const a=rs(n),i=r.length,s=a.length;Y(i===s,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${s} elements.`);for(let o=0;o<i;o++){const u=r[o],l=a[o];_r(l),this.tensorMap.set(u,l)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return De(()=>{const a=[];for(let i=0;i<r.length;i++){const s=r[i],o=this.findWithDefault(s,n);a.push(o)}return ci(a)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kie=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const a=r.getHashTableHandleByName(t.name);if(a!=null)return[a];{const i=U("keyDType",t,e,n),s=U("valueDType",t,e,n),o=new Iie(i,s);return r.addHashTable(t.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const a=U("tableHandle",t,e,n,r),i=U("keys",t,e,n),s=U("values",t,e,n);return[await r.getHashTableById(a.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{const a=U("tableHandle",t,e,n,r),i=U("keys",t,e,n),s=U("defaultValue",t,e,n);return[await r.getHashTableById(a.id).find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{const a=U("tableHandle",t,e,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ie=(t,e,n,r=Qr)=>{switch(t.op){case"ResizeBilinear":{const a=U("images",t,e,n),i=U("size",t,e,n),s=U("alignCorners",t,e,n),o=U("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(a,[i[0],i[1]],s,o)]}case"ResizeNearestNeighbor":{const a=U("images",t,e,n),i=U("size",t,e,n),s=U("alignCorners",t,e,n),o=U("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(a,[i[0],i[1]],s,o)]}case"CropAndResize":{const a=U("image",t,e,n),i=U("boxes",t,e,n),s=U("boxInd",t,e,n),o=U("cropSize",t,e,n),u=U("method",t,e,n),l=U("extrapolationValue",t,e,n);return[r.image.cropAndResize(a,i,s,o,u,l)]}case"ImageProjectiveTransformV3":{const a=U("images",t,e,n),i=U("transforms",t,e,n),s=U("outputShape",t,e,n),o=U("fillValue",t,e,n),u=U("interpolation",t,e,n),l=U("fillMode",t,e,n);return[r.image.transform(a,i,u.toLowerCase(),l.toLowerCase(),o,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oie=(t,e,n,r=Qr)=>{switch(t.op){case"Equal":return[r.equal(U("a",t,e,n),U("b",t,e,n))];case"NotEqual":return[r.notEqual(U("a",t,e,n),U("b",t,e,n))];case"Greater":return[r.greater(U("a",t,e,n),U("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(U("a",t,e,n),U("b",t,e,n))];case"Less":return[r.less(U("a",t,e,n),U("b",t,e,n))];case"LessEqual":return[r.lessEqual(U("a",t,e,n),U("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(U("a",t,e,n),U("b",t,e,n))];case"LogicalNot":return[r.logicalNot(U("a",t,e,n))];case"LogicalOr":return[r.logicalOr(U("a",t,e,n),U("b",t,e,n))];case"Select":case"SelectV2":return[r.where(U("condition",t,e,n),U("a",t,e,n),U("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(U("a",t,e,n),U("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fie=(t,e,n,r=Qr)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(U("a",t,e,n),U("b",t,e,n),U("transposeA",t,e,n),U("transposeB",t,e,n))];case"Einsum":return[r.einsum(U("equation",t,e,n),...U("tensors",t,e,n))];case"Transpose":return[r.transpose(U("x",t,e,n),U("perm",t,e,n))];case"_FusedMatMul":const[a,i]=U("fusedOps",t,e,n),s=a==="biasadd",o=i==="prelu",u=U("numArgs",t,e,n),l=U("leakyreluAlpha",t,e,n);if(s){if(o&&u!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&u!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,f]=U("args",t,e,n);return[r.fused.matMul({a:U("a",t,e,n),b:U("b",t,e,n),transposeA:U("transposeA",t,e,n),transposeB:U("transposeB",t,e,n),bias:c,activation:i,preluActivationWeights:f,leakyreluAlpha:l})];case"MatrixBandPart":return[r.linalg.bandPart(U("a",t,e,n),U("numLower",t,e,n),U("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rie=(t,e,n,r=Qr)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(U("x",t,e,n),U("axis",t,e,n),U("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(U("x",t,e,n),U("mean",t,e,n),U("variance",t,e,n),U("offset",t,e,n),U("scale",t,e,n),U("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(U("x",t,e,n),U("mean",t,e,n),U("variance",t,e,n),U("offset",t,e,n),U("scale",t,e,n),U("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(U("x",t,e,n),U("radius",t,e,n),U("bias",t,e,n),U("alpha",t,e,n),U("beta",t,e,n))];case"Softmax":return[r.softmax(U("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(U("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mie=(t,e,n,r=Qr)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:a,outputDenseValues:i}=r.raggedGather(U("paramsNestedSplits",t,e,n),U("paramsDenseValues",t,e,n),U("indices",t,e,n),U("outputRaggedRank",t,e,n));return a.concat(i)}case"RaggedRange":{const{rtNestedSplits:a,rtDenseValues:i}=r.raggedRange(U("starts",t,e,n),U("limits",t,e,n),U("splits",t,e,n));return[a,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(U("shape",t,e,n),U("values",t,e,n),U("defaultValue",t,e,n),U("rowPartitionTensors",t,e,n),U("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pie=(t,e,n,r=Qr)=>{switch(t.op){case"Max":{const o=U("axis",t,e,n),u=U("keepDims",t,e,n);return[r.max(U("x",t,e,n),o,u)]}case"Mean":{const o=U("axis",t,e,n),u=U("keepDims",t,e,n);return[r.mean(U("x",t,e,n),o,u)]}case"Min":{const o=U("axis",t,e,n),u=U("keepDims",t,e,n);return[r.min(U("x",t,e,n),o,u)]}case"Sum":{const o=U("axis",t,e,n),u=U("keepDims",t,e,n);return[r.sum(U("x",t,e,n),o,u)]}case"All":{const o=U("axis",t,e,n),u=U("keepDims",t,e,n);return[r.all(U("x",t,e,n),o,u)]}case"Any":{const o=U("axis",t,e,n),u=U("keepDims",t,e,n);return[r.any(U("x",t,e,n),o,u)]}case"ArgMax":{const o=U("axis",t,e,n);return[r.argMax(U("x",t,e,n),o)]}case"ArgMin":{const o=U("axis",t,e,n);return[r.argMin(U("x",t,e,n),o)]}case"Prod":{const o=U("axis",t,e,n),u=U("keepDims",t,e,n);return[r.prod(U("x",t,e,n),o,u)]}case"Cumprod":{const o=U("axis",t,e,n),u=U("exclusive",t,e,n),l=U("reverse",t,e,n);return[r.cumprod(U("x",t,e,n),o,u,l)]}case"Cumsum":{const o=U("axis",t,e,n),u=U("exclusive",t,e,n),l=U("reverse",t,e,n);return[r.cumsum(U("x",t,e,n),o,u,l)]}case"Bincount":const a=U("x",t,e,n),i=U("weights",t,e,n),s=U("size",t,e,n);return[r.bincount(a,i,s)];case"DenseBincount":{const o=U("x",t,e,n),u=U("weights",t,e,n),l=U("size",t,e,n),c=U("binaryOutput",t,e,n);return[r.denseBincount(o,u,l,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bie=(t,e,n,r=Qr)=>{switch(t.op){case"ConcatV2":case"Concat":{const a=U("n",t,e,n),i=U("axis",t,e,n);let s=U("tensors",t,e,n);return s=s.slice(0,a),[r.concat(s,i)]}case"Gather":{const a=U("x",t,e,n),i=U("indices",t,e,n);return[r.gather(a,r.cast(i,"int32"),0)]}case"GatherV2":{const a=U("axis",t,e,n),i=U("batchDims",t,e,n),s=U("x",t,e,n),o=U("indices",t,e,n);return[r.gather(s,r.cast(o,"int32"),a,i)]}case"Reverse":{const a=U("dims",t,e,n),i=[];for(let o=0;o<a.length;o++)a[o]&&i.push(o);const s=U("x",t,e,n);return[r.reverse(s,i)]}case"ReverseV2":{const a=U("axis",t,e,n),i=U("x",t,e,n);return[r.reverse(i,a)]}case"Slice":{const a=U("begin",t,e,n),i=U("size",t,e,n);return[r.slice(U("x",t,e,n),a,i)]}case"StridedSlice":{const a=U("begin",t,e,n),i=U("end",t,e,n),s=U("strides",t,e,n),o=U("beginMask",t,e,n),u=U("endMask",t,e,n),l=U("ellipsisMask",t,e,n),c=U("newAxisMask",t,e,n),f=U("shrinkAxisMask",t,e,n),d=U("x",t,e,n);return[r.stridedSlice(d,a,i,s,o,u,l,c,f)]}case"Pack":return De(()=>{const a=U("axis",t,e,n),i=U("tensors",t,e,n),s=i[0].shape,o=r.squeeze(i[0]).shape,u=i.map(l=>{const c=un(l.shape,s);if(!c&&!un(r.squeeze(l).shape,o))throw new Error("the input tensors shape does not match");return c?l:r.reshape(l,s)});return[r.stack(u,a)]});case"Unpack":{const a=U("axis",t,e,n),i=U("tensor",t,e,n);return r.unstack(i,a)}case"Tile":{const a=U("reps",t,e,n);return[r.tile(U("x",t,e,n),a)]}case"Split":case"SplitV":{const a=U("axis",t,e,n),i=U("numOrSizeSplits",t,e,n),s=U("x",t,e,n);return r.split(s,i,a)}case"ScatterNd":{const a=U("indices",t,e,n),i=U("values",t,e,n),s=U("shape",t,e,n);return[r.scatterND(a,i,s)]}case"GatherNd":{const a=U("x",t,e,n),i=U("indices",t,e,n);return[r.gatherND(a,i)]}case"SparseToDense":{const a=U("sparseIndices",t,e,n),i=U("outputShape",t,e,n),s=U("sparseValues",t,e,n),o=U("defaultValue",t,e,n);return[r.sparseToDense(a,s,i,s.dtype===o.dtype?o:r.cast(o,s.dtype))]}case"TensorScatterUpdate":{const a=U("indices",t,e,n),i=U("values",t,e,n),s=U("tensor",t,e,n);return[r.tensorScatterUpdate(s,a,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lie=(t,e,n,r=Qr)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:a,outputValues:i,emptyRowIndicator:s,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(U("indices",t,e,n),U("values",t,e,n),U("denseShape",t,e,n),U("defaultValue",t,e,n));return[a,i,s,o]}case"SparseReshape":{const{outputIndices:a,outputShape:i}=r.sparse.sparseReshape(U("inputIndices",t,e,n),U("inputShape",t,e,n),U("newShape",t,e,n));return[a,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(U("data",t,e,n),U("indices",t,e,n),U("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(U("data",t,e,n),U("indices",t,e,n),U("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zie=(t,e,n,r=Qr)=>{switch(t.op){case"FFT":return[r.fft(U("x",t,e,n))];case"IFFT":return[r.ifft(U("x",t,e,n))];case"RFFT":return[r.rfft(U("x",t,e,n))];case"IRFFT":return[r.irfft(U("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uie=(t,e,n,r=Qr)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(U("input",t,e,n),U("pattern",t,e,n),U("rewrite",t,e,n),U("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:a,nGramsSplits:i}=r.string.stringNGrams(U("data",t,e,n),U("dataSplits",t,e,n),U("separator",t,e,n),U("nGramWidths",t,e,n),U("leftPad",t,e,n),U("rightPad",t,e,n),U("padWidth",t,e,n),U("preserveShortSequences",t,e,n));return[a,i]}case"StringSplit":{const{indices:a,values:i,shape:s}=r.string.stringSplit(U("input",t,e,n),U("delimiter",t,e,n),U("skipEmpty",t,e,n));return[a,i,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(U("input",t,e,n),U("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vie=(t,e,n,r=Qr)=>{switch(t.op){case"Cast":return[r.cast(U("x",t,e,n),U("dtype",t,e,n))];case"ExpandDims":{const a=U("axis",t,e,n);return[r.expandDims(U("x",t,e,n),a)]}case"Squeeze":{const a=U("axis",t,e,n);return[r.squeeze(U("x",t,e,n),a)]}case"Reshape":return[r.reshape(U("x",t,e,n),U("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(U("x",t,e,n),U("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(U("x",t,e,n),U("padding",t,e,n),U("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(U("x",t,e,n),U("padding",t,e,n),U("constantValue",t,e,n))];case"SpaceToBatchND":{const a=U("blockShape",t,e,n),i=U("paddings",t,e,n);return[r.spaceToBatchND(U("x",t,e,n),a,i)]}case"BatchToSpaceND":{const a=U("blockShape",t,e,n),i=U("crops",t,e,n);return[r.batchToSpaceND(U("x",t,e,n),a,i)]}case"DepthToSpace":{const a=U("blockSize",t,e,n),i=U("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(U("x",t,e,n),a,i)]}case"BroadcastTo":return[r.broadcastTo(U("x",t,e,n),U("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(U("s0",t,e,n),U("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x_(t,e,n,r,a=De){const i=((s,o,u)=>{switch(s.category){case"arithmetic":return a(()=>vie(s,o,u));case"basic_math":return a(()=>yie(s,o,u));case"control":return Cie(s,o,u);case"convolution":return a(()=>Eie(s,o,u));case"creation":return a(()=>Die(s,o,u));case"dynamic":return Tie(s,o,u);case"evaluation":return a(()=>$ie(s,o,u));case"image":return a(()=>_ie(s,o,u));case"graph":return a(()=>Aie(s,o,u));case"logical":return a(()=>Oie(s,o,u));case"matrices":return a(()=>Fie(s,o,u));case"normalization":return a(()=>Rie(s,o,u));case"ragged":return a(()=>Mie(s,o,u));case"reduction":return a(()=>Pie(s,o,u));case"slice_join":return a(()=>Bie(s,o,u));case"sparse":return a(()=>Lie(s,o,u));case"spectral":return a(()=>zie(s,o,u));case"string":return a(()=>Uie(s,o,u));case"transformation":return a(()=>Vie(s,o,u));case"hash_table":return kie(s,o,u,r);case"custom":const l=UL(s.op);if(l&&l.customExecutor)return l.customExecutor(new gie(s,o,u));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return tc(i)?i.then(s=>[].concat(s)):[].concat(i)}class w_{constructor(e={},n={},r={},a={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N_(t,e,n,r){const a=new Set,i=[];let s=null,o=null;const u=new Set,l=new Set(Object.keys(t).map(d=>ei(d)[0]));r=r||[];const c=new Set(r.map(d=>ei(d.name)[0])),f=[...e];for(;f.length>0;){const d=f.pop();if((Vl(d)||Yie(d)||Zie(d))&&s==null&&(s=d,o=s.children.map(h=>h.name).filter(h=>a.has(h))),a.add(d.name),n[d.name]==null&&!l.has(d.name)&&!c.has(d.name)){if(d.inputs.length===0){i.push(d.name);continue}d.inputs.forEach(h=>{u.has(h.name)||(u.add(h.name),f.push(h))})}}return{inputs:t,outputs:e,usedNodes:a,missingInputs:i,dynamicNode:s,syncInputs:o}}function Wie(t,e){const{usedNodes:n,inputs:r}=e,a=Object.keys(r).map(y=>ei(y)[0]).map(y=>t.nodes[y]),i=t.initNodes||[],s=y=>n.has(typeof y=="string"?y:y.name);function o(y){return[...new Map(y.map(b=>[b.name,b])).values()]}const u=o([...a,...t.weights,...i]).filter(s),l=o([...u,...Object.values(t.nodes)]).filter(s),c=new Map(l.map(y=>[y.name,y])),f={};for(const y of l){f[y.name]=f[y.name]||0;for(const b of y.children)s(b)||(f[b.name]=Number.POSITIVE_INFINITY),f[b.name]=(f[b.name]||0)+1}const d=Object.entries(f).filter(([,y])=>y===0).map(([y])=>y),h=[...d];for(;d.length>0;){const y=d.pop(),b=c.get(y);for(const w of b.children.filter(s))--f[w.name]===0&&(h.push(w.name),d.push(w.name))}const m=h.map(y=>c.get(y)),v=qie(m,u);return Gie(v,u),v}function qie(t,e){const n=new Map(t.map(s=>[s.name,s])),r=e.map(s=>s.name),a=new Set(r);for(;r.length>0;){const s=r.pop(),o=n.get(s);for(const u of o.children)!n.has(u.name)||a.has(u.name)||(a.add(u.name),r.push(u.name))}return t.filter(s=>a.has(s.name))}class Fv extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function Gie(t,e){const n=new Map(t.map((o,u)=>[o.name,u])),r=new Set(e.map(o=>o.name)),a=o=>r.has(typeof o=="string"?o:o.name),i=new Set(t.map(o=>o.name)),s=o=>i.has(typeof o=="string"?o:o.name);for(const o of t){for(const u of o.children.filter(s)){if(!n.has(u.name))throw new Fv(`Child ${u.name} of node ${o.name} is unreachable.`);if(n.get(o.name)>n.get(u.name))throw new Fv(`Node ${o.name} is scheduled to run after its child ${u.name}.`)}if(!a(o))for(const u of o.inputs){if(!n.has(u.name))throw new Fv(`Input ${u.name} of node ${o.name} is unreachable.`);if(n.get(u.name)>n.get(o.name))throw new Fv(`Node ${o.name} is scheduled to run before its input ${u.name}.`)}}}function Hie(t){const e=new Map(t.map((o,u)=>[o.name,u])),n=Number.MAX_SAFE_INTEGER,r=t.map((o,u)=>Vl(o)?n:u),a=o=>{const u=r[e.get(o.name)];return u??-1},i=t.map((o,u)=>o.children.map(a).reduce((l,c)=>Math.max(l,c),r[u])),s=new Map;for(let o=0;o<t.length;++o){const u=i[o];if(u===n)continue;const l=t[o],c=t[u];s.has(c.name)||s.set(c.name,[]),s.get(c.name).push(l)}return s}const jie=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Xie=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Kie=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Vl(t){return jie.has(t.op)}function Yie(t){return Xie.has(t.op)}function Zie(t){return Kie.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qy{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(a=>a.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new Qy(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),a=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+a.join(this.SEPARATOR)}compile(e,n){const r=N_(e,n,this.weightMap,this._initNodes),{missingInputs:a,dynamicNode:i,syncInputs:s}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(a.length>0){const l=n.map(f=>f.name),c=Object.keys(e);throw new Error(`Cannot compute the outputs [${l}] from the provided inputs [${c}]. Missing the following inputs: [${a}]`)}const o=Wie(this.graph,r),u=Hie(o);return{orderedNodes:o,nodeLiveUntilMap:u}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return _r(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const a=r.map(d=>this.graph.nodes[ei(d)[0]]),i=n.map(d=>ei(d)[0]),s=new Set(i);let o=i.map(d=>this.graph.nodes[d]);o.length===0&&(o=this._outputs);const u=this.getCompilationKey(a,o);let l=this.compiledMap.get(u);l==null&&(l=this.compile(e,o),this.compiledMap.set(u,l));try{this.keepIntermediateTensors=Ae().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const c={},f={};return De(()=>{const d=new w_(this.weightMap,c,f,this.functionExecutorMap,this.parseNodeNameCache),h=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(b=>{const[w,x]=ei(b,d),S=[];S[x]=e[b],h[w]=S,this.keepIntermediateTensors&&(this.clonedTensorsMap[w]=this.cloneTensorList(S))});const m=this.getFrozenTensorIds(h),{orderedNodes:v,nodeLiveUntilMap:y}=l;for(const b of v){if(h[b.name])continue;const w=x_(b,h,d,this._resourceManager);if(tc(w))throw new Error(`The execution of the op '${b.op}' returned a promise. Please use model.executeAsync() instead.`);h[b.name]=w,this.keepIntermediateTensors&&(this.clonedTensorsMap[b.name]=this.cloneTensorList(w)),this.checkTensorForDisposalWithNodeLiveUntilInfo(b,h,d,m,s,y.get(b.name))}return this.parent==null&&d.dispose(m),n.map(b=>Gr(b,h,d))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(a=>a.id)));return new Set(n)}checkTensorForDisposal(e,n,r,a,i,s,o){if(!(Vl(n)||s.has(e))){for(const u of r[e])u!=null&&(o[u.id]=(o[u.id]||0)+n.children.length);for(const u of n.inputs){if(Vl(u))continue;const l=m_(u.name,r,a);if(l!=null)for(const c of l){if(!c||c.kept||i.has(c.id))continue;const f=o[c.id];f===1?(c.dispose(),delete o[c.id]):f!=null&&o[c.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,a,i,s){function o(u){return Vl(u)||i.has(u.name)}if(!(Vl(e)||s==null))for(const u of s){if(o(u))continue;const l=m_(u.name,n,r);for(const c of l)!c||c.kept||a.has(c.id)||c.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,a={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=Ae().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const s=new w_(this.weightMap,a,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const o=await this.executeWithControlFlow(e,s,n,r),u=n.map(d=>Gr(d,o,s)),l=u.map(d=>d.id),c=Object.keys(e).map(d=>e[d].id),f=new Set([...l,...c,...this.weightIds]);return Object.values(o).forEach(d=>{d.forEach(h=>{h&&!h.isDisposed&&!f.has(h.id)&&h.dispose()})}),this.parent==null&&s.dispose(f),u}async executeFunctionAsync(e,n,r){const a=e.reduce((i,s,o)=>(i[this.inputs[o].name]=s,i),{});return this._executeAsync(a,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,a){const i=Object.keys(e),s=i.map(S=>this.graph.nodes[ei(S)[0]]),o=r.map(S=>ei(S)[0]),u=new Set(o);let l=o.map(S=>this.graph.nodes[S]);l.length===0&&(l=this._outputs);const{usedNodes:c,missingInputs:f,dynamicNode:d,syncInputs:h}=N_(e,l,this.weightMap,this._initNodes),m=[...s,...this.graph.weights,...this._initNodes||[]].map(S=>({node:S,contexts:n.currentContext})),v=Object.assign({},this.weightMap);Object.keys(e).forEach(S=>{const[C,E]=ei(S),A=[];A[E]=e[S],v[C]=A});const y={},b=this.getFrozenTensorIds(v),w={};for(;m.length>0;){const S=this.processStack(s,m,n,v,w,b,u,y,c);await Promise.all(S)}d==null&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const x=l.filter(S=>!Vl(S)&&!Gr(S.name,v,n)).map(S=>S.name);if(x.length>0){let S="";throw d!=null&&(S=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${x}] from the provided inputs [${i}]. Consider providing the following inputs: [${f}]. ${S}`)}return v}processStack(e,n,r,a,i,s,o,u,l){const c=[];for(;n.length>0;){const f=n.pop();r.currentContext=f.contexts;let d="";if(f.node.op==="Enter"&&U("isConstant",f.node,a,r)&&([d]=$o(f.node.name,r)),a[f.node.name]==null){const h=x_(f.node,a,r,this._resourceManager);d||([d]=$o(f.node.name,r));const m=r.currentContext;tc(h)?c.push(h.then(v=>(a[d]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(v)),r.currentContext=m,this.checkTensorForDisposal(d,f.node,a,r,s,o,u),this.processChildNodes(f.node,n,r,a,i,l),v))):(a[d]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(h)),this.checkTensorForDisposal(d,f.node,a,r,s,o,u),this.processChildNodes(f.node,n,r,a,i,l))}else this.processChildNodes(f.node,n,r,a,i,l)}return c}processChildNodes(e,n,r,a,i,s){e.children.forEach(o=>{const[u]=$o(o.name,r);i[u]||!s.has(o.name)||(o.op==="Merge"?o.inputNames.some(l=>!!Gr(l,a,r))&&(i[u]=!0,n.push({contexts:r.currentContext,node:o})):o.inputNames.every(l=>!!Gr(l,a,r))&&(i[u]=!0,n.push({contexts:r.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[a]=ei(n),i=this.graph.nodes[a];if(i.attrParams.shape&&i.attrParams.shape.value){const s=i.attrParams.shape.value,o=s.length===r.shape.length&&r.shape.every((u,l)=>s[l]===-1||s[l]===u);Y(o,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${s}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&Y(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const a={};for(const i in e){const s=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];s!=null?a[s.name]=e[i]:a[i]=e[i]}return a}checkInputs(e){const n=Object.keys(e).filter(r=>{const[a]=ei(r);return this.graph.nodes[a]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,a;const i=(a=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||a===void 0?void 0:a[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=ei(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class Qie{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jie="?tfjs-format=file",ese="model.json";class tse{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=oL){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new Qie}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return tc(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await kP(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let a=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(a=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=a,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new Qy(g_.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=g_.Instance.transformGraph(e.modelInitializer);this.initializer=new Qy(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof Kn?[e]:e,r={};return n.forEach((a,i)=>r[this.structuredOutputKeys[i]]=a),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof Kn)&&!Array.isArray(e)){const i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(const s in i){const o=i[s];o.resourceId!=null&&(e[s]=this.resourceIdToCapturedInput[o.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let a=0;return this.inputNodes.reduce((i,s)=>{var o,u,l;const c=(l=(u=(o=this.signature)===null||o===void 0?void 0:o.inputs)===null||u===void 0?void 0:u[s])===null||l===void 0?void 0:l.resourceId;return c!=null?i[s]=this.resourceIdToCapturedInput[c]:i[s]=e[a++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let a=0;a<r.length;a++){const i=r[a],s=n[i];this.resourceIdToCapturedInput[s.resourceId]=e[a]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&en(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function S_(t,e={},n=oL){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=nse(t));const r=new tse(t,e,n);return await r.load(),r}function nse(t){return t.endsWith("/")||(t=t+"/"),`${t}${ese}${Jie}`}/**
    * @license
    * Copyright 2021 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */function Gp(t,e,n,r){return new(n||(n=Promise))(function(a,i){function s(l){try{u(r.next(l))}catch(c){i(c)}}function o(l){try{u(r.throw(l))}catch(c){i(c)}}function u(l){var c;l.done?a(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(s,o)}u((r=r.apply(t,[])).next())})}function Hp(t,e){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){s=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){s.label=c[1];break}if(c[0]===6&&s.label<a[1]){s.label=a[1],a=c;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(c);break}a[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(f){c=[6,f],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var qL=function(t){for(var e=[],n=0,r=t;n<r.length;n++){var a=r[n];e.push(a)}return e},C_=function(){return function(){this.parent=null,this.children={},this.end=!1,this.word=[[],0,0]}}(),rse=function(){function t(){this.root=new C_}return t.prototype.insert=function(e,n,r){for(var a=this.root,i=qL(e),s=0;s<i.length;s++)a.children[i[s]]||(a.children[i[s]]=new C_,a.children[i[s]].parent=a,a.children[i[s]].word[0]=a.word[0].concat(i[s])),a=a.children[i[s]],s===i.length-1&&(a.end=!0,a.word[1]=n,a.word[2]=r)},t.prototype.commonPrefixSearch=function(e){for(var n=[],r=this.root.children[e[0]],a=0;a<e.length&&r;a++)r.end&&n.push(r.word),r=r.children[e[a+1]];return n.length||n.push([[e[0]],0,0]),n},t}(),E_="";function ase(t){var e=t.normalize("NFKC");return e.length>0?E_+e.replace(/ /g,E_):e}var ise=6,sse=function(){function t(e,n){n===void 0&&(n=ise),this.vocabulary=e,this.reservedSymbolsCount=n,this.trie=new rse;for(var r=this.reservedSymbolsCount;r<this.vocabulary.length;r++)this.trie.insert(this.vocabulary[r][0],this.vocabulary[r][1],r)}return t.prototype.encode=function(e){var n=[],r=[],a=[];e=ase(e);for(var i=qL(e),s=0;s<=i.length;s++)n.push({}),r.push(0),a.push(0);for(s=0;s<i.length;s++)for(var o=this.trie.commonPrefixSearch(i.slice(s)),u=0;u<o.length;u++){var l=o[u],c={key:l[0],score:l[1],index:l[2]};n[s+(f=l[0].length)][s]==null&&(n[s+f][s]=[]),n[s+f][s].push(c)}for(var f=0;f<=i.length;f++)for(var d in n[f]){var h=n[f][d];for(u=0;u<h.length;u++){var m=h[u],v=m.score+a[f-m.key.length];(a[f]===0||v>=a[f])&&(a[f]=v,r[f]=h[u].index)}}for(var y=[],b=r.length-1;b>0;)y.push(r[b]),b-=this.vocabulary[r[b]][0].length;var w=[],x=!1;for(s=0;s<y.length;s++){var S=y[s];x&&S===0||w.push(S),x=S===0}return w.reverse()},t}();function ose(t){return Gp(this,void 0,void 0,function(){return Hp(this,function(e){switch(e.label){case 0:return[4,CY(t)];case 1:return[2,e.sent().json()]}})})}var use="https://storage.googleapis.com/tfjs-models/savedmodel/universal_sentence_encoder";function lse(t){return Gp(this,void 0,void 0,function(){var e;return Hp(this,function(n){switch(n.label){case 0:return[4,(e=new cse).load(t)];case 1:return n.sent(),[2,e]}})})}var cse=function(){function t(){}return t.prototype.loadModel=function(e){return Gp(this,void 0,void 0,function(){return Hp(this,function(n){return[2,e?S_(e):S_("https://tfhub.dev/tensorflow/tfjs-model/universal-sentence-encoder-lite/1/default/1",{fromTFHub:!0})]})})},t.prototype.load=function(e){return e===void 0&&(e={}),Gp(this,void 0,void 0,function(){var n,r,a;return Hp(this,function(i){switch(i.label){case 0:return[4,Promise.all([this.loadModel(e.modelUrl),ose(e.vocabUrl||use+"/vocab.json")])];case 1:return n=i.sent(),r=n[0],a=n[1],this.model=r,this.tokenizer=new sse(a),[2]}})})},t.prototype.embed=function(e){return Gp(this,void 0,void 0,function(){var n,r,a,i,s,o,u,l,c=this;return Hp(this,function(f){switch(f.label){case 0:for(typeof e=="string"&&(e=[e]),n=e.map(function(d){return c.tokenizer.encode(d)}),r=n.map(function(d,h){return d.map(function(m,v){return[h,v]})}),a=[],i=0;i<r.length;i++)a=a.concat(r[i]);return s=Rf(a,[a.length,2],"int32"),o=na(Pu(n),"int32"),u={indices:s,values:o},[4,this.model.executeAsync(u)];case 1:return l=f.sent(),s.dispose(),o.dispose(),[2,l]}})})},t}();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GL={kernelName:G0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,xd(st(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fse={kernelName:_h,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=On(st(n,"float32")),a=Kr(ct(St(1),r));return Un(yt(t,a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dse={kernelName:Oh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Kr(ct(On(st(n,"float32")),1));return yt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pse={kernelName:vd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Wt(n.shape,r.shape);return{a:()=>{let o=t;const u=Er(n.shape,a);return u.length>0&&(o=pt(o,u)),be(o,n.shape)},b:()=>{let o=t;const u=Er(r.shape,a);return u.length>0&&(o=pt(o,u)),be(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hse={kernelName:H0,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,a)=>{n[a]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mse={kernelName:j0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dn(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gse={kernelName:X0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dn(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vse={kernelName:Fh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,Kr(ct(St(1),On(st(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yse={kernelName:Rh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Kr(We(St(1),On(st(n,"float32"))));return yt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bse={kernelName:Bh,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Wt(n.shape,r.shape);return{a:()=>{const o=We(On(n),On(r));let u=ge(t,yt(r,o));const l=Er(n.shape,a);return l.length>0&&(u=pt(u,l)),be(u,n.shape)},b:()=>{const o=We(On(n),On(r));let u=Un(ge(t,yt(n,o)));const l=Er(r.shape,a);return l.length>0&&(u=pt(u,l)),be(u,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xse={kernelName:Mh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,We(On(st(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wse={kernelName:Ph,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,ct(St(1),On(st(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nse(t,e,n,r,a,i){const s=Q(t,"dy","avgPool3dGrad"),o=Q(e,"input","avgPool3dGrad");let u=s,l=o,c=!1;o.rank===4&&(c=!0,u=be(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),l=be(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Y(u.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),Y(l.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${l.rank}.`),Ta("avgPool3dGrad",a,i);const f={dy:u,input:l},d={filterSize:n,strides:r,pad:a,dimRoundingMode:i},h=me.runKernel(SC,f,d);return c?be(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const Sse=de({avgPool3dGrad_:Nse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cse={kernelName:Y0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:a,strides:i,pad:s,dimRoundingMode:o}=n;return{x:()=>Sse(t,r,a,i,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ese(t,e,n,r,a){const i=Q(t,"dy","avgPoolGrad"),s=Q(e,"input","avgPoolGrad");Y(s.rank===i.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${i.rank})`);let o=s,u=i,l=!1;s.rank===3&&(l=!0,o=be(s,[1,s.shape[0],s.shape[1],s.shape[2]]),u=be(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Y(u.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),Y(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const c={dy:u,input:o},f={filterSize:n,strides:r,pad:a},d=me.runKernel(NC,c,f);return l?be(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Dse=de({avgPoolGrad_:Ese});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tse={kernelName:K0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:a,strides:i,pad:s}=n;return{x:()=>Dse(t,r,a,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $se={kernelName:Z0,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,a]=e,{transposeA:i,transposeB:s}=n;return!i&&!s?{a:()=>Jt(t,a,!1,!0),b:()=>Jt(r,t,!0,!1)}:!i&&s?{a:()=>Jt(t,a,!1,!1),b:()=>Jt(t,r,!0,!1)}:i&&!s?{a:()=>Jt(a,t,!1,!0),b:()=>Jt(r,t,!1,!1)}:{a:()=>Jt(a,t,!0,!0),b:()=>Jt(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ase={kernelName:Q0,gradFunc:(t,e,n)=>{const{blockShape:r,crops:a}=n;return{x:()=>ib(t,r,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ise={kernelName:cY,gradFunc:(t,e,n)=>{const r=n,a=r.inputShape,i=r.shape,s=Array.from(i);for(let u=a.length-1;u>=0;u--)if(a[u]===i[u])s[u]=1;else if(a[u]!==1)throw new Error(`broadcastTo(): [${a}] cannot be broadcast to [${i}].`);const o=[];for(let u=0;u<s.length;u++)s[u]>1&&o.push(u);return{x:()=>pt(t,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kse={kernelName:Lh,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _se={kernelName:zh,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ose={kernelName:Uh,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:a,clipValueMax:i}=n;return{x:()=>ia(so(rl(r,a),yc(r,i)),t,dn(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fse={kernelName:e1,inputsToSave:["x"],gradFunc:GL.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rse={kernelName:t1,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(u=>u.shape),{axis:a}=n,i=tn(a,e[0].shape)[0],s=r.map(u=>u[i]);return ii(t,s,i).map(u=>()=>u)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mse={kernelName:n1,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,a]=e,{dilations:i,strides:s,pad:o,dataFormat:u}=n;return Y(zu(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>kE(r.shape,t,a,s,o,u),filter:()=>iD(r,t,a.shape,s,o,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pse={kernelName:r1,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,a]=e,{strides:i,pad:s,dataFormat:o,dimRoundingMode:u}=n;return{dy:()=>Uu(t,a,i,s,o,1,u),filter:()=>iD(t,r,a.shape,i,s,o,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bse(t,e,n,r,a){let i=t;t.rank===4&&(i=be(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let s=e;s.rank===4&&(s=be(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),Y(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),Y(s.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`),Y(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),Y(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),Y(s.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${n[4]}).`);const o={x:i,dy:s},u={strides:r,pad:a,filterShape:n};return me.runKernel($C,o,u)}const Lse=de({conv3DBackpropFilter_:Bse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zse={kernelName:a1,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:a,pad:i}=n;Y(zu(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[s,o]=e;return{x:()=>lB(s.shape,t,o,a,i),filter:()=>Lse(s,t,o.shape,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Use={kernelName:Vh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(Un(KE(st(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vse={kernelName:Wh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(YE(st(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wse={kernelName:i1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:a,exclusive:i,reverse:s}=n;return{x:()=>{const o=Zn([a],r.rank);let u=FE(t,a,i,!s);return o!=null&&(u=cn(u,o)),u}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qse={kernelName:s1,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:a,pad:i,dimRoundingMode:s}=n,o=r??[1,1];Y(zu(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[u,l]=e;return Y(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),Y(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${l.rank}.`),Y(u.shape[3]===l.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),Y(Yr(a,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${a} and dilations '${o}'.`),Ta("depthwiseConv2d",i,s),{x:()=>qB(u.shape,t,l,a,i,o,s),filter:()=>WB(u,t,l.shape,a,i,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gse={kernelName:o1,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,a]=e,i={x:r,filter:a,dy:t},s={x:r,filter:a,dy:t};return{x:()=>me.runKernel(zN,i,n),filter:()=>me.runKernel(UN,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hse={kernelName:Gh,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>me.runKernel(BC,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jse={kernelName:Hh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ge(li(Un(On(n))),2/Math.sqrt(Math.PI));return{x:()=>ge(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xse={kernelName:jh,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kse={kernelName:l1,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>be(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yse={kernelName:Xh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,li(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zse={kernelName:Kh,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qse={kernelName:Yh,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Wt(n.shape,r.shape);return{a:()=>{const o=yt(t,st(r,"float32")),u=Er(n.shape,a);return u.length>0?be(pt(o,u),n.shape):o},b:()=>{let o=ge(t,st(n,"float32"));const u=Er(r.shape,a);u.length>0&&(o=be(pt(o,u),r.shape));const l=On(r);return Un(yt(o,st(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jse={kernelName:c1,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[a,i,s,o]=e,u=o??St(1),l=Er(i.shape,a.shape),c=[];if(i.rank===1){for(let S=0;S<a.shape.length-1;++S)c.push(a.shape[S]);c.push(1)}const f=ct(a,i),d=ge(t,u),h=HE(We(s,St(r))),m=ge(ge(ge(h,h),h),St(-.5));return{x:()=>i.rank===1?be(ge(ge(t,ji(be(h,[1,1,1,i.shape[0]]),c)),u),a.shape):be(ge(ge(t,h),u),a.shape),mean:()=>{let S=ge(ge(h,St(-1)),d);return i.rank===1&&(S=pt(S,l)),be(S,i.shape)},variance:()=>{let S=ge(ge(m,f),d);return i.rank===1&&(S=pt(S,l)),be(S,i.shape)},scale:()=>{const S=ge(f,h);let C=ge(t,S);return i.rank===1&&(C=pt(C,l)),be(C,i.shape)},offset:()=>{let S=t;return i.rank===1&&(S=pt(S,l)),be(S,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eoe={kernelName:f1,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,a]=e,{axis:i,batchDims:s}=n,o=tn(i,r.shape)[0],u=(l,c,f)=>()=>{const d=l.shape,h=c.size,m=d.slice(0,o),v=m.length,y=d.slice(i,d.length).slice(1),b=y.length,w=D_(0,v),x=D_(v+1,v+1+b),S=T_([m,[h],y]),C=be(f,S),E=be(c,[h]),A=T_([[v],w,x]),k=cn(C,A);let T=nD(k,E,l.shape[o]);const I=nl(A);return T=cn(T,I),T};if(s===1){const l=r.shape[0],c=r.split(l,0);return{x:()=>ci(c.map((h,m)=>u(h,a.slice(m,1),t.slice(m,1))())).reshape(r.shape),indices:()=>a}}else return{x:u(r,a,t),indices:()=>a}}};function D_(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function T_(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const toe={kernelName:Zh,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>dn(n),b:()=>dn(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const noe={kernelName:Qh,gradFunc:t=>({x:()=>st(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const roe={kernelName:Jh,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aoe={kernelName:em,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ioe={kernelName:tm,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const soe={kernelName:p1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:a}=n,i=gi(r,0);return{x:()=>ia(i,t,ge(t,a))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ooe={kernelName:rm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,We(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uoe={kernelName:nm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,st(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const loe={kernelName:dY,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:a}=n;return{logits:()=>{const s=li(r);return ct(t,ge(pt(t,a,!0),s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function coe(t,e,n,r=5,a=1,i=1,s=.5){const o={x:t,y:e,dy:n},u={depthRadius:r,bias:a,alpha:i,beta:s};return me.runKernel(HC,o,u)}const foe=de({localResponseNormalizationBackprop_:coe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const doe={kernelName:b1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,a]=e,{depthRadius:i,bias:s,alpha:o,beta:u}=n;return{x:()=>foe(r,a,t,i,s,o,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HL(t,e,n,r){return e.rank<n.rank&&(e=be(e,or(e.shape,r))),t.rank<n.rank&&(t=be(t,or(t.shape,r))),{x:()=>ge(t,st(Ts(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $_={kernelName:x1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:a}=r,i=e[0],s=e[1],o=tn(a,i.shape),u=HL(t,s,i,o);return{x:()=>u.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const poe={kernelName:am,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ge(t,st(rl(n,r),"float32")),b:()=>ge(t,st(uh(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hoe(t,e,n,r,a,i,s){const o=Q(t,"dy","maxPool3dGrad"),u=Q(e,"input","maxPool3dGrad"),l=Q(n,"output","maxPool3dGrad");let c=o,f=u,d=l,h=!1;u.rank===4&&(h=!0,c=be(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),f=be(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),d=be(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),Y(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),Y(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),Y(d.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),Ta("maxPool3dGrad",i,s);const m={dy:c,input:f,output:d},v={filterSize:r,strides:a,pad:i,dimRoundingMode:s},y=me.runKernel(XC,m,v);return h?be(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const moe=de({maxPool3dGrad_:hoe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const goe={kernelName:N1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,a]=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:u}=n;return{x:()=>moe(t,r,a,i,s,o,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function voe(t,e,n,r,a,i,s){const o=Q(t,"dy","maxPoolGrad"),u=Q(e,"input","maxPoolGrad"),l=Q(n,"output","maxPoolGrad");Y(u.rank===o.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${o.rank})`),Y(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),Y(u.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${u.rank}.`),Ta("maxPoolGrad",i,s);const c={dy:o,input:u,output:l},f={filterSize:r,strides:a,pad:i,dimRoundingMode:s};return me.runKernel(jC,c,f)}const yoe=de({maxPoolGrad_:voe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const boe={kernelName:w1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,a]=e,{filterSize:i,strides:s,pad:o}=n;return{x:()=>yoe(t,r,a,i,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xoe={kernelName:S1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:a}=n,i=tn(a,r.shape),o=Mr(r.shape,i)[1],u=Oe(o);return{x:()=>{const c=r.shape.slice();i.forEach(h=>{c[h]=1});const f=be(t,c);return yt(ge(f,ai(r.shape,"float32")),u)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const woe={kernelName:C1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:a}=r,[i,s]=e,o=tn(a,i.shape),u=HL(t,s,i,o);return{x:()=>u.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Noe={kernelName:im,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ge(t,st(yc(n,r),"float32")),b:()=>ge(t,st(gi(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Soe={kernelName:E1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:a}=n,i=a.map(s=>s[0]);return{x:()=>ln(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Coe={kernelName:sm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Wt(n.shape,r.shape);return{a:()=>{const o=Er(n.shape,a);return o.length>0?be(pt(t,o),n.shape):t},b:()=>{const o=ge(t,Un(Om(yt(n,r)))),u=Er(r.shape,a);return u.length>0?be(pt(o,u),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eoe={kernelName:om,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Wt(n.shape,r.shape);return{a:()=>{const o=ge(t,st(r,"float32")),u=Er(n.shape,a);return u.length>0?be(pt(o,u),n.shape):o},b:()=>{const o=ge(t,st(n,"float32")),u=Er(r.shape,a);return u.length>0?be(pt(o,u),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Doe={kernelName:D1,gradFunc:t=>({x:()=>Un(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Toe={kernelName:A1,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>br(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $oe={kernelName:$1,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aoe={kernelName:I1,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return rs(t,r).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A_={kernelName:k1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:a}=n,i=a.map(s=>s[0]);return{x:()=>ln(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ioe={kernelName:um,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,a]=e,i=n,s=r,o=Wt(i.shape,s.shape);return{a:()=>{const c=st(s,"float32");let f=ge(t,ge(c,zo(i,ct(c,St(1)))));const d=Er(i.shape,o);return d.length>0&&(f=pt(f,d)),be(f,i.shape)},b:()=>{const c=gi(i,0),f=ia(c,Ci(i),dn(i));let d=ge(t,ge(a,f));const h=Er(s.shape,o);return h.length>0&&(d=pt(d,h)),be(d,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const koe={kernelName:_1,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,a=gi(n,0);return{x:()=>ia(a,t,ge(t,r)),alpha:()=>{let i=ia(a,dn(t),ge(t,n));const s=Er(r.shape,t.shape);return s.length>0&&(i=pt(i,s)),be(i,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _oe(t,e,n){const r=t.shape.slice();r[n]=1;const a=be(e,r),i=Yy(t,n,!0,!1),s=Yy(t,n,!0,!0),o=ge(i,s);return ge(a,o)}function Ooe(t,e,n){const r=t.shape.length,a=r-n.length,i=Zn(n,r);let s=t;i!=null&&(s=cn(t,i));const o=s.shape.slice(),l=o.splice(r-n.length,n.length).reduce((d,h)=>d*h,1);o.push(l);const c=s.reshape(o);let f=_oe(c,e,a);if(f=f.reshape(s.shape),i!=null){const d=nl(i);f=cn(f,d)}return f}const Foe={kernelName:O1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:a}=n;let i=[];return a==null?i=r.shape.map((s,o)=>o):typeof a=="number"?i=[a]:i=a,{x:()=>Ooe(r,t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Roe={kernelName:qh,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Wt(n.shape,r.shape);return{a:()=>{const o=yt(t,st(r,"float32")),u=Er(n.shape,a);return u.length>0?be(pt(o,u),n.shape):o},b:()=>{let o=ge(t,st(n,"float32"));const u=Er(r.shape,a);u.length>0&&(o=be(pt(o,u),r.shape));const l=On(r);return Un(yt(o,st(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Moe={kernelName:lm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,Un(On(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Poe={kernelName:fm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ge(yc(n,6),xd(n));return{x:()=>ge(t,st(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Boe={kernelName:cm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,st(xd(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Loe={kernelName:F1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>be(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zoe={kernelName:M1,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,a={dy:t,images:r};return{images:()=>me.runKernel(sE,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uoe={kernelName:R1,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,a={dy:t,images:r};return{images:()=>me.runKernel(iE,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Voe={kernelName:P1,gradFunc:(t,e,n)=>{const{dims:r}=n,a=tn(r,t.shape);return{x:()=>ns(t,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Woe={kernelName:dm,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qoe={kernelName:pm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Un(yt(t,ge(zo(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Goe={kernelName:B1,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>st(dn(n),"float32"),t:()=>ge(t,st(n,t.dtype)),e:()=>ge(t,st(nb(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hoe={kernelName:hm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=gi(n,St(0)),a=St(yb),i=St(bb),s=ge(t,i),o=ge(ge(t,a),li(st(n,"float32")));return ia(r,s,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const joe={kernelName:ym,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,ge(n,ct(St(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xoe={kernelName:vm,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Koe={kernelName:mm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(Z1(st(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yoe={kernelName:gm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(OE(st(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zoe={kernelName:L1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:a,size:i}=n,s=r.shape,[o,u]=gb(r,a,i),l=[];for(let c=0;c<t.rank;c++)l.push([o[c],s[c]-o[c]-u[c]]);return{x:()=>al(t,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qoe={kernelName:W1,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:a}=n,i=!0,s=ge(t,r);return{logits:()=>ct(s,ge(pt(s,[a],i),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Joe={kernelName:bm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,to(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I_={kernelName:U1,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:a}=n;return{x:()=>Y1(t,r,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k_={kernelName:V1,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>hr(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eue={kernelName:xm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,ge(Kr(st(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tue={kernelName:mE,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,ge(st(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nue={kernelName:wm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=St(2);return{a:()=>ge(t,ge(a,ct(n,r))),b:()=>ge(t,ge(a,ct(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rue={kernelName:Dm,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aue={kernelName:Nm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Wt(n.shape,r.shape);return{a:()=>{let o=t;const u=Er(n.shape,a);return u.length>0&&(o=pt(o,u)),be(o,n.shape)},b:()=>{let o=t;const u=Er(r.shape,a);return u.length>0&&(o=pt(o,u)),be(Un(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iue={kernelName:z1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,a=r.shape.slice(),{axis:i}=n;tn(i,r.shape).forEach(l=>{a[l]=1});const o=be(t,a),u=ge(o,ai(r.shape,"float32"));return{x:()=>u}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sue={kernelName:Sm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yt(t,On(Z1(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oue={kernelName:Cm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(ct(St(1),On(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uue={kernelName:Em,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:a}=n;return{x:()=>{let s=dn(r);if(r.rank===1)for(let o=0;o<a[0];++o)s=We(s,ln(t,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<a[0];++o)for(let u=0;u<a[1];++u)s=We(s,ln(t,[o*r.shape[0],u*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<a[0];++o)for(let u=0;u<a[1];++u)for(let l=0;l<a[2];++l)s=We(s,ln(t,[o*r.shape[0],u*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<a[0];++o)for(let u=0;u<a[1];++u)for(let l=0;l<a[2];++l)for(let c=0;c<a[3];++c)s=We(s,ln(t,[o*r.shape[0],u*r.shape[1],l*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return s}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lue={kernelName:kf,gradFunc:(t,e,n)=>{const r=n,{perm:a}=r,i=nl(a);return{x:()=>cn(t,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cue={kernelName:G1,gradFunc:(t,e,n)=>{const r=n,{axis:a}=r;return{value:()=>ci(t,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fue={kernelName:H1,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>due(t,n)}}};function due(t,e){const n=Ko(e,dn(e)),r=Fm(t,n);let a=rl(e,St(0,"int32"));const i=r.rank-a.rank;for(let o=0;o<i;++o)a=wa(a,o+1);a=so(a,ai(r.shape,"bool"));const s=dn(r);return ia(a,r,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pue={kernelName:j1,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hue=[GL,fse,dse,pse,hse,mse,gse,vse,yse,bse,xse,wse,Cse,Tse,$se,Ase,Ise,kse,_se,Ose,Fse,Rse,Pse,Mse,zse,Use,Vse,Wse,qse,Gse,Roe,Hse,jse,Xse,Kse,Yse,Qse,Zse,Jse,eoe,toe,noe,roe,aoe,ioe,soe,ooe,uoe,loe,doe,$_,$_,poe,goe,boe,xoe,woe,Noe,Soe,Coe,Eoe,Doe,Toe,$oe,Aoe,A_,A_,Ioe,koe,Foe,Moe,Poe,Boe,Loe,zoe,Uoe,Voe,Woe,qoe,Goe,Hoe,joe,Xoe,Koe,Yoe,Zoe,Qoe,Joe,I_,I_,k_,k_,eue,nue,tue,rue,aue,iue,sue,oue,uue,lue,cue,fue,pue];for(const t of hue)mY(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.abs=function(){return this.throwIfDisposed(),yr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.acos=function(){return this.throwIfDisposed(),qP(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.acosh=function(){return this.throwIfDisposed(),GP(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.add=function(t){return this.throwIfDisposed(),We(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.all=function(t,e){return this.throwIfDisposed(),$E(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.any=function(t,e){return this.throwIfDisposed(),Ky(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.argMax=function(t){return this.throwIfDisposed(),Xf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.argMin=function(t){return this.throwIfDisposed(),HP(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.asScalar=function(){return this.throwIfDisposed(),Y(this.size===1,()=>"The array must have only 1 element."),be(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.asType=function(t){return this.throwIfDisposed(),st(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.as1D=function(){return this.throwIfDisposed(),be(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.as2D=function(t,e){return this.throwIfDisposed(),be(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),be(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),be(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.as5D=function(t,e,n,r,a){return this.throwIfDisposed(),be(this,[t,e,n,r,a])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.asin=function(){return this.throwIfDisposed(),jP(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.asinh=function(){return this.throwIfDisposed(),XP(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.atan=function(){return this.throwIfDisposed(),KP(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.atan2=function(t){return this.throwIfDisposed(),YP(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.atanh=function(){return this.throwIfDisposed(),ZP(this)};Pe().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),K1(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Y1(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.batchNorm=function(t,e,n,r,a){return this.throwIfDisposed(),Am(this,t,e,n,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Ff(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.cast=function(t){return this.throwIfDisposed(),st(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.ceil=function(){return this.throwIfDisposed(),rB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),ui(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Kn&&(t=[t]),hr([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.conv1d=function(t,e,n,r,a,i){return this.throwIfDisposed(),IE(this,t,e,n,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.conv2dTranspose=function(t,e,n,r,a){return this.throwIfDisposed(),_E(this,t,e,n,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.conv2d=function(t,e,n,r,a,i){return this.throwIfDisposed(),Uu(this,t,e,n,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.cos=function(){return this.throwIfDisposed(),Z1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.cosh=function(){return this.throwIfDisposed(),OE(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),Yy(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),FE(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),fB(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.depthwiseConv2d=function(t,e,n,r,a,i){return this.throwIfDisposed(),Im(this,t,e,n,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.dilation2d=function(t,e,n,r,a){return this.throwIfDisposed(),dB(this,t,e,n,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.divNoNan=function(t){return this.throwIfDisposed(),pB(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.div=function(t){return this.throwIfDisposed(),yt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.dot=function(t){return this.throwIfDisposed(),hB(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.elu=function(){return this.throwIfDisposed(),km(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.equal=function(t){return this.throwIfDisposed(),Ts(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.erf=function(){return this.throwIfDisposed(),RE(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),vB(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.exp=function(){return this.throwIfDisposed(),li(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.expandDims=function(t){return this.throwIfDisposed(),wa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.expm1=function(){return this.throwIfDisposed(),yB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.fft=function(){return this.throwIfDisposed(),cb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.flatten=function(){return this.throwIfDisposed(),be(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.floor=function(){return this.throwIfDisposed(),Om(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.floorDiv=function(t){return this.throwIfDisposed(),TE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.gather=function(t,e,n){return this.throwIfDisposed(),Fm(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.greaterEqual=function(t){return this.throwIfDisposed(),rl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.greater=function(t){return this.throwIfDisposed(),gi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.ifft=function(){return this.throwIfDisposed(),fh(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.irfft=function(){return this.throwIfDisposed(),QE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.isFinite=function(){return this.throwIfDisposed(),bB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.isInf=function(){return this.throwIfDisposed(),xB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.isNaN=function(){return this.throwIfDisposed(),wB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.leakyRelu=function(t){return this.throwIfDisposed(),J1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.lessEqual=function(t){return this.throwIfDisposed(),yc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.less=function(t){return this.throwIfDisposed(),uh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),NB(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.logSigmoid=function(){return this.throwIfDisposed(),SB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.logSoftmax=function(t){return this.throwIfDisposed(),BE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),tb(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.log=function(){return this.throwIfDisposed(),Ci(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.log1p=function(){return this.throwIfDisposed(),eb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.logicalAnd=function(t){return this.throwIfDisposed(),so(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.logicalNot=function(){return this.throwIfDisposed(),nb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.logicalOr=function(t){return this.throwIfDisposed(),LE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.logicalXor=function(t){return this.throwIfDisposed(),CB(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),Jt(this,t,e,n)};Pe().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),rb(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.max=function(t,e){return this.throwIfDisposed(),Qi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.maximum=function(t){return this.throwIfDisposed(),Ko(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.mean=function(t,e){return this.throwIfDisposed(),nr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.min=function(t,e){return this.throwIfDisposed(),oh(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.minimum=function(t){return this.throwIfDisposed(),oc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),DB(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.mod=function(t){return this.throwIfDisposed(),TB(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.mul=function(t){return this.throwIfDisposed(),ge(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.neg=function(){return this.throwIfDisposed(),Un(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.norm=function(t,e,n){return this.throwIfDisposed(),_m(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.notEqual=function(t){return this.throwIfDisposed(),Yf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),UE(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.onesLike=function(){return this.throwIfDisposed(),Ei(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.pad=function(t,e){return this.throwIfDisposed(),al(this,t,e)};Pe().prototype.pool=function(t,e,n,r,a,i){return this.throwIfDisposed(),$B(this,t,e,n,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.pow=function(t){return this.throwIfDisposed(),zo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.prelu=function(t){return this.throwIfDisposed(),sb(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.prod=function(t,e){return this.throwIfDisposed(),AB(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.reciprocal=function(){return this.throwIfDisposed(),kB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.relu=function(){return this.throwIfDisposed(),co(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.relu6=function(){return this.throwIfDisposed(),qE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.reshapeAs=function(t){return this.throwIfDisposed(),be(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.reshape=function(t){return this.throwIfDisposed(),be(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),jB(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),XB(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.reverse=function(t){return this.throwIfDisposed(),ns(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.rfft=function(){return this.throwIfDisposed(),fb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.round=function(){return this.throwIfDisposed(),GE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.rsqrt=function(){return this.throwIfDisposed(),HE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.selu=function(){return this.throwIfDisposed(),jE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.separableConv2d=function(t,e,n,r,a,i){return this.throwIfDisposed(),XE(this,t,e,n,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.sigmoid=function(){return this.throwIfDisposed(),to(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.sign=function(){return this.throwIfDisposed(),_B(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.sin=function(){return this.throwIfDisposed(),KE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.sinh=function(){return this.throwIfDisposed(),YE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.slice=function(t,e){return this.throwIfDisposed(),ln(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.softmax=function(t){return this.throwIfDisposed(),lb(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.softplus=function(){return this.throwIfDisposed(),bd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),ib(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.split=function(t,e){return this.throwIfDisposed(),ii(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.sqrt=function(){return this.throwIfDisposed(),Kr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.square=function(){return this.throwIfDisposed(),On(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.squaredDifference=function(t){return this.throwIfDisposed(),JE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.squeeze=function(t){return this.throwIfDisposed(),xc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Kn?[this,t]:[this,...t];return ci(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.step=function(t){return this.throwIfDisposed(),xd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.stridedSlice=function(t,e,n,r,a,i,s,o){return this.throwIfDisposed(),OB(this,t,e,n,r,a,i,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.sub=function(t){return this.throwIfDisposed(),ct(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.sum=function(t,e){return this.throwIfDisposed(),pt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.tan=function(){return this.throwIfDisposed(),FB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.tanh=function(){return this.throwIfDisposed(),sc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.tile=function(t){return this.throwIfDisposed(),ji(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.toBool=function(){return this.throwIfDisposed(),st(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.toFloat=function(){return this.throwIfDisposed(),st(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.toInt=function(){return this.throwIfDisposed(),st(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.topk=function(t,e){return this.throwIfDisposed(),MB(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.transpose=function(t){return this.throwIfDisposed(),cn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.unique=function(t){return this.throwIfDisposed(),PB(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),nD(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.unstack=function(t){return this.throwIfDisposed(),rs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.where=function(t,e){return this.throwIfDisposed(),ia(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.zerosLike=function(){return this.throwIfDisposed(),dn(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class js extends Error{constructor(e){super(e),Object.setPrototypeOf(this,js.prototype)}}class Xi extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Xi.prototype)}}class xe extends Error{constructor(e){super(e),Object.setPrototypeOf(this,xe.prototype)}}class Kt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Kt.prototype)}}class LD extends Error{constructor(e){super(e),Object.setPrototypeOf(this,LD.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class jL{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cc(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Xs(t,e){if(!t)throw new LD(e)}function __(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Fa(t){return t.length===1?t[0]:t}function Cn(t){return Array.isArray(t)?t:[t]}function Io(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Wl(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Mi={};function zD(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function gS(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>gS(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:gS(r))}}}function Lm(t,e={},n={},r="object",a=!1){if(typeof t=="string"){const i=t;let s;if(i in n)s=n[i];else if(i in Mi)s=Mi[i];else if(s=e[i],s==null)throw new xe(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}else{const i=t;if(i.className==null||i.config==null)throw new xe(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const s=i.className;let o,u;if(s in n?[o,u]=n[s]:s in Mi?[o,u]=Mi.className:s in e&&([o,u]=e[s]),o==null)throw new xe(`Unknown ${r}: ${s}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(u!=null){const l={};for(const h of Object.keys(Mi))l[h]=Mi[h];for(const h of Object.keys(n))l[h]=n[h];const c=i.config;c.customObjects=l;const f=Object.assign({},Mi);for(const h of Object.keys(n))Mi[h]=n[h];gS(i.config);const d=u(o,i.config,n,a);return Mi=Object.assign({},f),d}else{const l=Object.assign({},Mi);for(const f of Object.keys(n))Mi[f]=n[f];const c=new o(i.config);return Mi=Object.assign({},l),c}}}function mue(t,e){return t<e?-1:t>e?1:0}function Rv(t,e){return-1*mue(t,e)}function _u(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function gue(t){if(t==null)throw new xe(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Nc(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new xe(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function UD(t,e,n=0,r=1/0){return Xs(n>=0),Xs(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(a=>typeof a===e)}function Or(t,e){Array.isArray(t)?(Y(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Or(n,`element ${r+1} of ${e}`))):Y(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${XL(t)}.`)}function XL(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>XL(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function vue(t,e,n){let r=n!=null?n():Oa(),a;return(...s)=>{const o=n!=null?n():Oa();return o-r<e||(r=o,a=t(...s)),a}}function KL(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let yue=0;function YL(){return yue++}const Mv={};function xb(t=""){return t in Mv||(Mv[t]=0),Mv[t]+=1,t+Mv[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const bue=["channelsFirst","channelsLast"],xue=["nearest","bilinear"],wue=["valid","same","causal"],Nue=["max","avg"],Sue=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ff=new Map;function lr(t){Nc(bue,"DataFormat",t)}function Cue(t){Nc(xue,"InterpolationFormat",t)}function Ti(t){Nc(wue,"PaddingMode",t)}function ZL(t){Nc(Nue,"PoolMode",t)}const jp=[],O_="/";function Zl(t,e){jp.push(t);try{const n=e();return jp.pop(),n}catch(n){throw jp.pop(),n}}function Eue(){return jp.length===0?"":jp.join(O_)+O_}function QL(t){if(!ez(t))throw new Error("Not a valid tensor name: '"+t+"'");return Eue()+t}function JL(t){if(!ez(t))throw new Error("Not a valid tensor name: '"+t+"'");ff.has(t)||ff.set(t,0);const e=ff.get(t);if(ff.set(t,ff.get(t)+1),e>0){const n=`${t}_${e}`;return ff.set(n,1),n}else return t}const Due=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function ez(t){return!!t.match(Due)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Tue(t){return t===parseInt(t.toString(),10)}function Ou(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let a=e;a<n;++a)r*=t[a];return r}function Qf(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function Vu(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function $s(t,e){if(e<t)throw new xe(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let S2;function xr(){return S2==null&&(S2=$P().epsilon()),S2}function As(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ro(t,e){return st(t,e)}function zm(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),be(t,n)}function $ue(t,e){return De(()=>{if(t.shape.length!==2)throw new xe(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=zm(t,1);return vS(n,[1,e,1])})}function Aue(t){const e=[Ou(t.shape)];return be(t,e)}function Iue(t){if(t.rank<=1)throw new xe(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Ou(t.shape,1)];return be(t,e)}function Ql(t,e,n){return De(()=>{switch(t.rank){case 1:return ob(t,e,n);case 2:return ZE(t,[e,0],[n,t.shape[1]]);case 3:return ub(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return ch(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return ln(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return ln(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new xe(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function C2(t,e,n){return De(()=>{switch(t.rank){case 1:return ob(t,e,n);case 2:return ZE(t,[0,e],[t.shape[0],n]);case 3:return ub(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return ch(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new xe(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Pv(t,e,n,r){return De(()=>{switch(t.rank){case 1:return ob(t,e,n);case 2:switch(r){case 1:return Ql(t,e,n);case 2:return C2(t,e,n);default:throw new xe(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Ql(t,e,n);case 2:return ub(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return C2(t,e,n);default:throw new xe(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Ql(t,e,n);case 2:return ch(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return ch(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return C2(t,e,n);default:throw new xe(`The axis is not within the rank of the tensor ${r}`)}default:throw new xe(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function VD(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),hr(t,e)}function F_(t,e){switch(t.rank){case 1:return aB([t,e]);case 2:return iB([t,e],0);case 3:return sB([t,e],0);case 4:return oB([t,e],0);default:throw new xe(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function vS(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new xe(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return ji(t,e)}function wb(t,e=0,n=1,r,a){return WE(t,e,n,r,a)}function ao(t,e,n,r){if(t.rank<2||e.rank<2)throw new Kt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const a=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(a!==i)throw new Kt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return tS({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?yS(t.rank,r,As()):null,activation:n});{const a=t.shape.slice(),i=a.pop();t=be(t,[-1,i]);const s=e.shape.slice(),o=s.pop(),u=s.pop(),l=[...s,o],c=Array.from({length:e.rank},(m,v)=>v===0?e.rank-2:v<=e.rank-2?v-1:v);e=be(cn(e,c),[u,-1]);const f=[...a,...l];return be(tS({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?yS(t.rank,r,As()):null,activation:n}),f)}}function tz(t,e,n){return De(()=>(Array.isArray(e)?e=na(e,"int32"):e=st(e,"int32"),Fm(t,e,n)))}function Um(t){return ge(t,t)}function yS(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new xe(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?be(e,[1,r[0],1,1,1]):be(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?be(e,[1,1,1,1,r[0]]):be(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?be(e,[1,r[0],1,1]):be(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?be(e,[1,1,1,r[0]]):be(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?be(e,[1,r[0],1]):be(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?be(e,[1,1,r[0]]):be(e,[1].concat(r))}else if(t<3)return e;throw new xe(`Unsupported input rank by biasAdd: ${e.rank}`)}function _s(t,e,n){return De(()=>(n==null&&(n=As()),lr(n),We(t,yS(t.rank,e,n))))}function kue(t,e=1){if(e!==1)throw new Kt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return km(t)}function _ue(t){return De(()=>yt(t,We(yr(t),1)))}function nz(t,e,n,r){return De(()=>zB(t,e,n,r))}function Oue(t){return De(()=>{const e=We(.5,ge(.2,t));return ui(e,0,1)})}function Vm(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Fue=["fanIn","fanOut","fanAvg"],Rue=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Mue(t){Nc(Fue,"FanMode",t)}function Pue(t){Nc(Rue,"Distribution",t)}class ss extends Nd{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class rz extends ss{apply(e,n){return br(e,n)}}rz.className="Zeros";je(rz);class WD extends ss{apply(e,n){return ai(e,n)}}WD.className="Ones";je(WD);class az extends ss{constructor(e){if(super(),typeof e!="object")throw new xe(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new xe(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return De(()=>ge(St(this.value),ai(e,n)))}getConfig(){return{value:this.value}}}az.className="Constant";je(az);class iz extends ss{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return bc(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}iz.className="RandomUniform";je(iz);class sz extends ss{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Kt(`randomNormal does not support dType ${n}.`);return wb(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}sz.className="RandomNormal";je(sz);class oz extends ss{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Kt(`truncatedNormal does not support dType ${n}.`);return tD(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}oz.className="TruncatedNormal";je(oz);class uz extends ss{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return De(()=>{if(e.length!==2||e[0]!==e[1])throw new xe("Identity matrix initializer can only be used for 2D square matrices.");return ge(this.gain,PE(e[0]))})}getConfig(){return{gain:this.gain}}}uz.className="Identity";je(uz);function Bue(t,e="channelsLast"){let n,r;if(lr(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const a=Ou(t,2);n=t[1]*a,r=t[0]*a}else if(e==="channelsLast"){const a=Ou(t,0,t.length-2);n=t[t.length-2]*a,r=t[t.length-1]*a}}else{const a=Ou(t);n=Math.sqrt(a),r=Math.sqrt(a)}return[n,r]}class fi extends ss{constructor(e){if(super(),e.scale<0)throw new xe(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Mue(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,Pue(this.distribution),this.seed=e.seed}apply(e,n){const r=Bue(e),a=r[0],i=r[1];let s=this.scale;if(this.mode==="fanIn"?s/=Math.max(1,a):this.mode==="fanOut"?s/=Math.max(1,i):s/=Math.max(1,(a+i)/2),this.distribution==="normal"){const o=Math.sqrt(s);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Kt(`${this.getClassName()} does not support dType ${n}.`);return tD(e,0,o,n,this.seed)}else{const o=Math.sqrt(3*s);return bc(e,-o,o,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}fi.className="VarianceScaling";je(fi);class qD extends fi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return fi.className}}qD.className="GlorotUniform";je(qD);class GD extends fi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return fi.className}}GD.className="GlorotNormal";je(GD);class HD extends fi{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return fi.className}}HD.className="HeNormal";je(HD);class jD extends fi{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return fi.className}}jD.className="HeUniform";je(jD);class XD extends fi{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return fi.className}}XD.className="LeCunNormal";je(XD);class KD extends fi{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return fi.className}}KD.className="LeCunUniform";je(KD);class lz extends ss{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return De(()=>{if(e.length<2)throw new Kt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=Oe(e.slice(0,-1)),a=e[e.length-1],i=r*a;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const s=[Math.max(a,r),Math.min(a,r)],o=wb(s,0,1,n,this.seed),u=KB.qr(o,!1);let l=u[0];const f=u[1].flatten().stridedSlice([0],[Math.min(a,r)*Math.min(a,r)],[Math.min(a,r)+1]);return l=ge(l,f.sign()),r<a&&(l=l.transpose()),ge(St(this.gain),l.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}lz.className="Orthogonal";je(lz);const R_={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function M_(t,e={}){return Lm(t,Gi.getMap().classNameMap,e,"initializer")}function Yn(t){return zD(t)}function qn(t){if(typeof t=="string"){const e=t in R_?R_[t]:t;if(e==="GlorotNormal")return new GD;if(e==="GlorotUniform")return new qD;if(e==="HeNormal")return new HD;if(e==="HeUniform")return new jD;if(e==="LeCunNormal")return new XD;if(e==="LeCunUniform")return new KD;{const n={};return n.className=e,n.config={},M_(n)}}else return t instanceof ss?t:M_(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bS(t){return Array.isArray(t)&&Array.isArray(t[0])}function Jy(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Ot(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new xe(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function gn(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new xe(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function e0(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,a)=>r*a);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const P_="Variable";class Lue{constructor(e,n="float32",r=P_,a=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=YL(),r=r??P_,this.originalName=QL(r),this.name=JL(this.originalName),this.trainable_=a,this.constraint=i,this.val=BB(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),zue(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function zue(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function xS(t){return t.map(e=>e.read())}function YD(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class wr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class oo{constructor(e,n,r,a,i,s,o){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=o,this.id=YL(),s!=null&&(this.originalName=QL(s),this.name=JL(this.originalName)),this.rank=n.length}}let Uue=0,Nb=class{constructor(e,n){this.callArgs=n,this.id=Uue++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},Vue=0;class nn extends Nd{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Vue++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Io(r)+"_"+xb(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let a=e.dtype;a==null&&(a=e.inputDType),a==null&&(a="float32"),this.dtype=a}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Xi(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new xe(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Fa(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Fa(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new js(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new js(`Layer ${this.name} is not connected, no input to return.`);return Fa(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new js(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new js(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Fa(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Cn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Cn(this.inputSpec);if(n.length!==r.length)throw new xe(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let a=0;a<n.length;a++){const i=n[a],s=r[a];if(s==null)continue;const o=i.rank;if(s.ndim!=null&&o!==s.ndim)throw new xe(`Input ${a} is incompatible with layer ${this.name}: expected ndim=${s.ndim}, found ndim=${o}`);if(s.maxNDim!=null&&o>s.maxNDim)throw new xe(`Input ${a} is incompatible with layer ${this.name}: expected max_ndim=${s.maxNDim}, found ndim=${o}`);if(s.minNDim!=null&&o<s.minNDim)throw new xe(`Input ${a} is incompatible with layer ${this.name}: expected min_ndim=${s.minNDim}, found ndim=${o}.`);if(s.dtype!=null&&i.dtype!==s.dtype)throw new xe(`Input ${a} is incompatible with layer ${this.name} : expected dtype=${s.dtype}, found dtype=${i.dtype}.`);if(s.axes){const u=i.shape;for(const l in s.axes){const c=Number(l),f=s.axes[l],d=c>=0?u[c]:u[u.length+c];if(f!=null&&[f,null].indexOf(d)===-1)throw new xe(`Input ${a} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${f} but got shape ${u}.`)}}if(s.shape!=null)for(let u=0;u<s.shape.length;++u){const l=s.shape[u],c=i.shape[u];if(l!=null&&c!=null&&l!==c)throw new xe(`Input ${a} is incompatible with layer ${this.name}: expected shape=${s.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Cn(e),a=Gue(e),i=Hue(e);if(a===i)throw new xe("Arguments to apply() must be all SymbolicTensors or all Tensors");return Zl(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const s=[];for(const o of Cn(e))s.push(o.shape);this.build(Fa(s)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let s=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,s);const o=Cn(s),u=[];for(let l of o)r.indexOf(l)!==-1&&(l=l.clone()),u.push(l);if(s=Fa(u),this.activityRegularizer!=null)throw new Kt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return s}else{const s=Wue(e),o=this.computeOutputShape(s);let u;const l=que(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?s[0]:s),o!=null&&o.length>0&&Array.isArray(o[0])?u=o.map((c,f)=>new oo(l,c,this,Cn(e),n,this.name,f)):u=new oo(l,o,this,Cn(e),n,this.name),this.addInboundNode(e,u,null,null,s,o,n),this._refCount++,this.activityRegularizer!=null)throw new Kt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return u}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,a)=>{r!=null&&e[a]!=null&&e[a]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new js(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new js(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Xi(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return e0(this.weights)}build(e){this.built=!0}getWeights(e=!1){return xS(e?this.trainableWeights:this.weights)}setWeights(e){De(()=>{const n=this.weights;if(n.length!==e.length)throw new xe(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],a=xS(n);for(let i=0;i<a.length;++i){const s=a[i],o=n[i],u=e[i];if(!un(s.shape,u.shape))throw new xe(`Layer weight shape ${s.shape} not compatible with provided weight shape ${u.shape}`);r.push([o,u])}YD(r)})}addWeight(e,n,r,a,i,s,o,u){if(this._addedWeightNames.indexOf(e)!==-1)throw new xe(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(a=u!=null?u():qn("zeros"));const l=a.apply(n,r),c=new Lue(l,r,e,s,o);return l.dispose(),i!=null&&this.addLoss(()=>i.apply(c.read())),s==null&&(s=!0),s?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Cn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const a=this.computeMask(e,r),i=Cn(n),s=Cn(a);if(i.length!==s.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let o=0;o<i.length;o++)i[o].kerasMask=s[o]}addInboundNode(e,n,r,a,i,s,o=null){const u=Cn(e);n=Cn(n),r=Cn(r),a=Cn(a),i=Jy(i),s=Jy(s);const l=[],c=[],f=[];for(const d of u)l.push(d.sourceLayer),c.push(d.nodeIndex),f.push(d.tensorIndex);new Nb({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:f,inputTensors:u,outputTensors:n,inputMasks:r,outputMasks:a,inputShapes:i,outputShapes:s},o);for(let d=0;d<n.length;d++)n[d].sourceLayer=this,n[d].nodeIndex=this.inboundNodes.length-1,n[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Wue(t){t=Cn(t);const e=[];for(const n of t)e.push(n.shape);return Fa(e)}function que(t){return"float32"}function cz(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const a=[];for(let i=0;i<r.inboundLayers.length;i++){const s=r.inputTensors[i],o=r.inboundLayers[i],u=r.nodeIndices[i],l=cz(s,o,u);for(const c of l)a.indexOf(c)===-1&&a.push(c)}return a}}}function Gue(t){let e=!0;for(const n of Cn(t))if(!(n instanceof oo)){e=!1;break}return e}function Hue(t){let e=!0;for(const n of Cn(t))if(n instanceof oo){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Wm extends nn{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:xb("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new xe("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new xe("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new xe("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const a=new oo(this.dtype,this.batchInputShape,this,[],{},this.name);a.nodeIndex=0,a.tensorIndex=0,new Nb({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new xe(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Wm.className="InputLayer";je(Wm);function jue(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new xe("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Wm({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xue(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return st(e,t.dtype)}catch{throw new xe(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Du{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Du)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=Xue(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new xe(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof oo){if(this.id2Value[e.id]==null)throw new xe(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new xe(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof oo){if(this.id2Value[e.id]==null)throw new xe(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new xe(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&en(this.id2Mask)}}const t0=new jL,n0=new jL;function Kue(t){t0!=null&&t0.setMaxEntries(t),n0!=null&&n0.setMaxEntries(t)}function Bp(t,e,n,r){const a=n==null?!1:n.training,i=Array.isArray(t),s=i?t:[t],o=s.map(m=>m.name),u=[],l=e.names();for(const m of o)l.indexOf(m)!==-1?u.push(e.getValue(m)):u.push(null);const c=o.join(",")+"|"+e.names().sort().join(",");let f=t0.get(c),d;if(f==null){const m=Yue(s,e);f=m.sorted,d=m.recipientCounts,t0.put(c,f),n0.put(c,d)}d={},a||Object.assign(d,n0.get(c));const h=new Du(e);for(let m=0;m<f.length;++m){const v=f[m],y=v.sourceLayer;if(y instanceof Wm)continue;const b=[],w=[],x=[];let S=!1;for(const T of v.inputs){const I=h.getValue(T),$=h.getMask(T);b.push(I),w.push($),$!=null&&(S=!0),a||(d[T.name]--,d[T.name]===0&&!e.hasKey(T)&&o.indexOf(T.name)===-1&&!I.isDisposed&&T.sourceLayer.stateful!==!0&&x.push(I))}S&&(n=n||{},n.mask=w[0]);const C=Cn(y.apply(b,n));let E=null;y.supportsMasking&&(E=y.computeMask(b,w));const A=Que(v),k=Array.isArray(A)?A:[A];for(let T=0;T<k.length;++T){h.hasKey(k[T])||h.add(k[T],C[T],Array.isArray(E)?E[0]:E);const I=o.indexOf(k[T].name);I!==-1&&(u[I]=C[T])}a||en(x)}return h.disposeMasks(),i?u:u[0]}function Yue(t,e){Y(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const a=B_(t[0],e);n=a.sorted,r=a.recipientMap}else{const a=new Set;for(const i of t){const{sorted:s,recipientMap:o}=B_(i,e);for(const u of s)a.has(u.name)||(n.push(u),a.add(u.name));for(const u in o)r[u]==null&&(r[u]=new Set),o[u].forEach(l=>r[u].add(l))}}return{sorted:n,recipientCounts:Zue(r)}}function Zue(t){const e={};for(const n in t)e[n]=t[n].size;return e}function B_(t,e){const n=new Set,r=[],a={};for(const o of e.names())n.add(o);const i=[],s=[];for(i.push(t);i.length>0;){const o=i[i.length-1];if(n.has(o.name)){i.pop();continue}const u=s[s.length-1]===i.length-1;if(o.inputs.length===0||u)i.pop(),r.push(o),n.add(o.name),u&&s.pop();else{s.push(i.length-1);for(const l of o.inputs)a[l.name]==null&&(a[l.name]=new Set),a[l.name].add(o.name),!n.has(l.name)&&i.push(l)}}return{sorted:r,recipientMap:a}}function Que(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const a of t.sourceLayer.inboundNodes[r].outputTensors)if(a.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jue=Ae();Jue.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,Kue);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ZD(t,e){return De(()=>Kr(pt(ge(t,t),e,!0)))}class qm extends Nd{getConfig(){return{}}}class fz extends qm{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return De(()=>{const n=ZD(e,this.axis),r=ui(n,0,this.maxValue);return ge(e,yt(r,We(xr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}fz.className="MaxNorm";je(fz);class dz extends qm{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return De(()=>yt(e,We(xr(),ZD(e,this.axis))))}getConfig(){return{axis:this.axis}}}dz.className="UnitNorm";je(dz);class pz extends qm{apply(e){return co(e)}}pz.className="NonNeg";je(pz);class hz extends qm{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return De(()=>{const n=ZD(e,this.axis),r=We(ge(this.rate,ui(n,this.minValue,this.maxValue)),ge(1-this.rate,n));return ge(e,yt(r,We(xr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}hz.className="MinMaxNorm";je(hz);const L_={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Sr(t){return zD(t)}function z_(t,e={}){return Lm(t,Gi.getMap().classNameMap,e,"constraint")}function Cr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in L_?L_[t]:t,config:{}};return z_(n)}else return t instanceof qm?t:z_(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Ml(t){if(t==null)return;const e=[],n=[],r=[];for(const a in t){const i=t[a];if(typeof i!="number"){const s=i;e.push(s.data()),n.push(a),r.push(s)}}if(e.length>0){const a=await Promise.all(e);for(let i=0;i<a.length;++i)t[n[i]]=a[i][0];en(r)}}function mz(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var U_;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(U_||(U_={}));const ele=125;class dh{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class tle{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class nle extends dh{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const a in n){const i=n[a];if(typeof i=="number")this.totals.hasOwnProperty(a)||(this.totals[a]=0),this.totals[a]=this.totals[a]+i*r;else{let s;a in this.totals?s=this.totals[a]:this.totals[a]=0;const o=De(()=>We(this.totals[a],ge(i,r)));this.totals[a]=o,s!=null&&s.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:De(()=>{const a=ge(yt(1,this.seen),this.totals[r]);n[r]=a,this.totals[r].dispose(),_r(n[r])}))}}class rle extends dh{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const i in this.history){const s=this.history[i];for(let o=0;o<s.length;++o)if(typeof s[o]!="number"){const u=s[o];e.push(u.data()),n.push(i),r.push(o)}}const a=await Promise.all(e);for(let i=0;i<a.length;++i)this.history[n[i]][r[i]].dispose(),this.history[n[i]][r[i]]=a[i][0]}}class ale extends dh{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||gL,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=ele),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");PN(this.yieldEvery)&&(this.maybeWait=vue(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const a=[];this.yield!=null&&(await Ml(r),a.push(this.yield(e,n,r))),a.push(this.nextFrameFunc()),await Promise.all(a)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Ml(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await Ml(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Ml(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await Ml(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):PN(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Ml(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Ml(e),await this.trainEnd(e))}}function gz(t,e){return t==null&&(t={}),t instanceof dh?[t]:Array.isArray(t)&&t[0]instanceof dh?t:Cn(t).map(r=>new ale(r,e))}class zi{constructor(){}static registerCallbackConstructor(e,n){Y(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),zi.checkForDuplicate(n),zi.constructors[e]==null&&(zi.constructors[e]=[]),zi.constructors[e].push(n)}static checkForDuplicate(e){for(const n in zi.constructors)zi.constructors[+n].forEach(a=>{if(a===e)throw new xe("Duplicate callback constructor.")})}static clear(){zi.constructors={}}static createCallbacks(e){const n=[];for(const r in zi.constructors){const a=+r;e>=a&&n.push(...zi.constructors[a])}return n.map(r=>new r)}}zi.constructors={};function vz(t,e,n,r,a,i,s,o,u){const l=new rle,c=[new nle,...zi.createCallbacks(e)];t!=null&&c.push(...t),c.push(l);const f=new tle(c);return f.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:s,verbose:e,doValidation:o,metrics:u}),{callbackList:f,history:l}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ro(t,e={},n=!1){return Lm(t,Gi.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function r0(t,e){return De(()=>{t.dtype!=="float32"&&(t=st(t,"float32"));const n=pt(Um(t),e,!0),r=yd(n.shape,xr()),a=Kr(Ko(n,r));return yt(t,a)})}function Sb(t,e){return De(()=>nr(Um(ct(e,t)),-1))}function QD(t,e){return De(()=>nr(yr(ct(e,t)),-1))}function JD(t,e){return De(()=>{const n=ct(t,e),r=ui(yr(t),xr(),Number.MAX_VALUE),a=yr(yt(n,r));return ge(100,nr(a,-1))})}function ile(t,e){return De(()=>{const n=ui(e,xr(),Number.MAX_VALUE),r=Ci(We(1,n)),a=ui(t,xr(),Number.MAX_VALUE),i=Ci(We(1,a));return nr(Um(ct(r,i)),-1)})}function sle(t,e){return De(()=>{const n=Ko(0,ct(1,ge(t,e)));return nr(Um(n),-1)})}function ole(t,e){return De(()=>{const n=Ko(0,ct(1,ge(t,e)));return nr(n,-1)})}function ule(t,e){return De(()=>{const n=pt(ge(t,e),-1),r=Qi(ge(ct(1,t),e),-1);return Ko(0,We(1,ct(r,n)))})}function lle(t,e){return De(()=>{const n=Math.log(2),r=ct(e,t),a=ct(We(r,bd(ge(-2,r))),n);return nr(a,-1)})}function ph(t,e,n=!1){return De(()=>{if(n)e=lb(e);else{const r=pt(e,e.shape.length-1,!0);e=yt(e,r)}return e=ui(e,xr(),1-xr()),Un(pt(ge(st(t,"float32"),Ci(e)),e.shape.length-1))})}function a0(t,e,n=!1){return De(()=>{const r=st(Om(Aue(t)),"int32");e=ui(e,xr(),1-xr());const a=e.shape,i=be(UE(r,a[a.length-1]),a);return ph(i,e,n)})}function cle(t,e){if(!un(t.shape,e.shape))throw new xe(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return De(()=>{const n=co(e),r=Un(yr(e));return We(ct(n,ge(e,t)),eb(li(r)))})}function Cb(t,e){return De(()=>{let n;return n=ui(e,xr(),1-xr()),n=Ci(yt(n,ct(1,n))),nr(cle(t,n),-1)})}function fle(t,e){return De(()=>{const n=ui(t,xr(),1),r=ui(e,xr(),1);return pt(ge(t,Ci(yt(n,r))),-1)})}function dle(t,e){return De(()=>{const n=Ci(We(xr(),e));return nr(ct(e,ge(t,n)),-1)})}function yz(t,e){return De(()=>{const n=r0(t,-1),r=r0(e,-1),a=ge(n,r);return Un(pt(a,-1))})}const i0={meanSquaredError:Sb,meanAbsoluteError:QD,meanAbsolutePercentageError:JD,meanSquaredLogarithmicError:ile,squaredHinge:sle,hinge:ole,categoricalHinge:ule,logcosh:lle,categoricalCrossentropy:ph,sparseCategoricalCrossentropy:a0,binaryCrossentropy:Cb,kullbackLeiblerDivergence:fle,poisson:dle,cosineProximity:yz};function E2(t){if(typeof t=="string"){if(t in i0)return i0[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new xe(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bz(t,e){return De(()=>{const n=ge(.5,Ei(e)),r=ro(gi(e,n),t.dtype);return nr(Ts(t,r),-1)})}function xz(t,e){return De(()=>ro(Ts(Xf(t,-1),Xf(e,-1)),"float32"))}function ple(t,e){return De(()=>st(pt(so(Ts(t,1),Ts(e,1))),"float32"))}function hle(t,e){return De(()=>st(pt(so(Ts(t,0),Ts(e,1))),"float32"))}function mle(t,e){return De(()=>{const n=ple(t,e),r=hle(t,e),a=We(n,r);return st(ia(gi(a,0),yt(n,a),0),"float32")})}function gle(t,e){return Cb(t,e)}function vle(t,e){return t.rank===e.rank&&(t=xc(t,[t.rank-1])),e=Xf(e,-1),e.dtype!==t.dtype&&(e=st(e,t.dtype)),st(Ts(t,e),"float32")}const yle=Sb,ble=Sb,xle=QD,wle=QD,Nle=JD,Sle=JD,wz=ph,Cle=yz,Nz=a0,s0={binaryAccuracy:bz,categoricalAccuracy:xz,precision:mle,categoricalCrossentropy:wz,sparseCategoricalCrossentropy:Nz,mse:yle,MSE:ble,mae:xle,MAE:wle,mape:Nle,MAPE:Sle,cosine:Cle};function Ele(t){if(typeof t=="string"&&t in s0)return s0[t];if(typeof t!="string"&&t!=null)return t;throw new xe(`Unknown metric ${t}`)}function Bv(t){if(Xs(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(i0))if(i0[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(s0))if(s0[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Dle(t){const e={Adagrad:()=>cf.adagrad(.01),Adadelta:()=>cf.adadelta(1,.95,xr()),Adam:()=>cf.adam(.001,.9,.999,xr()),Adamax:()=>cf.adamax(.002,.9,.999,xr(),0),RMSProp:()=>cf.rmsprop(.001,.9,0,xr()),SGD:()=>cf.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new xe(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const V_=1*1024*1024;function W_(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!wS(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>V_&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${V_}.`)}}function wS(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!wS(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!wS(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Tle(t,e,n,r=console.log){const a=Ale(t),i=["Layer (type)","Input Shape","Output shape","Param #"];a?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let s;if(!a){i.push("Receives inputs"),s=[];for(const c in t.nodesByDepth)s.push(...t.nodesByDepth[c])}r("_".repeat(e)),o0(i,n,r),r("=".repeat(e));const o=t.layers;for(let c=0;c<o.length;++c)a?Ile(o[c],n,r):kle(o[c],n,s,r),r((c===o.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const u=$le(t),l=e0(t.nonTrainableWeights);r(`Total params: ${u+l}`),r(`Trainable params: ${u}`),r(`Non-trainable params: ${l}`),r("_".repeat(e))}function $le(t){let e;return t.collectedTrainableWeights!=null?e=e0(t.collectedTrainableWeights):e=e0(t.trainableWeights),e}function Ale(t){let e=!0;const n=[],r=[];for(const a in t.nodesByDepth)n.push(t.nodesByDepth[a]);for(const a of n){if(a.length>1||a.length===1&&a[0].inboundLayers.length>1){e=!1;break}r.push(...a)}if(e)for(const a of t.layers){let i=!1;for(const s of a.inboundNodes)if(r.indexOf(s)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function o0(t,e,n=console.log){let r="";for(let a=0;a<t.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r+=t[a],r=r.slice(0,e[a]),r+=" ".repeat(e[a]-r.length);n(r)}function Ile(t,e,n){let r,a;try{a=t.inboundNodes.map(u=>JSON.stringify(u.inputShapes)).join(",")}catch{a="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,s=t.getClassName(),o=[`${i} (${s})`,a,r,t.countParams().toString()];o0(o,e,n)}function kle(t,e,n,r){let a,i;try{i=t.inboundNodes.map(f=>JSON.stringify(f.inputShapes)).join(",")}catch{i="multiple"}try{a=JSON.stringify(t.outputShape)}catch{a="multiple"}const s=[];for(const f of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(f)===-1))for(let d=0;d<f.inboundLayers.length;++d){const h=f.inboundLayers[d].name,m=f.nodeIndices[d],v=f.tensorIndices[d];s.push(`${h}[${m}][${v}]`)}const o=t.name,u=t.getClassName(),l=s.length===0?"":s[0],c=[`${o} (${u})`,i,a,t.countParams().toString(),l];o0(c,e,r);for(let f=1;f<s.length;++f)o0(["","","","",s[f]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Sz(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function NS(t,e){if(t===null)return null;if(typeof t=="string")return Wl(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let a=0;a<r;++a){const i=t[a];Sz(e,a,i)?n.push(i):n.push(NS(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const a=t[r];if(r==="name"&&typeof a=="string")n[r]=a;else{const i=Wl(r);n[i]=NS(a,i)}}return n}}function SS(t,e){if(t==null)return null;if(typeof t=="string")return Io(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let a=0;a<r;++a){const i=t[a];Sz(e,a,i)?n.push(i):n.push(SS(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const a=t[r],i=Io(r);(r==="name"||r==="className")&&typeof a=="string"?n[i]=a:n[i]=SS(a,r)}return n}}/** @license See the LICENSE file. */const Cz="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const _le=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class bs extends nn{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const w=this.getClassName().toLowerCase();this.name=xb(w)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],_u(this.inputs).length!==this.inputs.length)throw new xe(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(w=>w.name)}`);_u(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(w=>w.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const w of this.outputs){const x=w.sourceLayer,S=w.nodeIndex,C=w.tensorIndex;this.outputLayers.push(x),this.outputLayersNodeIndices.push(S),this.outputLayersTensorIndices.push(C)}for(const w of this.inputs){const x=w.sourceLayer,S=w.nodeIndex,C=w.tensorIndex;Xs(S===0,"input layer has >1 nodes"),Xs(C===0,"input layer has >1 tensors"),this.inputLayers.push(x),this.inputLayersNodeIndices.push(S),this.inputLayersTensorIndices.push(C)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let w=0;w<this.inputLayers.length;w++){const x=this.inputLayers[w];if(!(x instanceof Wm))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${w} (0-based) originates from layer type ${x.getClassName()}.`);this.inputNames.push(x.name),this.feedInputShapes.push(x.batchInputShape),this.feedInputNames.push(x.name)}for(const w of this.outputLayers)this.outputNames.push(w.name);this.internalInputShapes=this.inputs.map(w=>w.shape),this.internalOutputShapes=this.outputs.map(w=>w.shape);const n={},r={},a={},i={},s={},o=[],u=(w,x,S,C,E,A)=>{(C==null||E==null||A==null)&&(C=w.sourceLayer,E=w.nodeIndex,A=w.tensorIndex);const k=C.inboundNodes[E];if(S.indexOf(k)!==-1)throw new Xi(`The tensor ${w.name} at layer "${C.name}" is part of a cycle.`);if(x.indexOf(k)!==-1)return;this.containerNodes.add(bs.nodeKey(C,E)),C.id in s||(s[C.id]=Object.keys(s).length),S.indexOf(k)===-1&&S.push(k);const T=k.inboundLayers.length;for(let I=0;I<T;I++){const $=k.inputTensors[I],O=k.inboundLayers[I],B=k.nodeIndices[I],z=k.tensorIndices[I];u($,x,S,O,B,z)}for(x.push(k);S.indexOf(k)>=0;)S.splice(S.indexOf(k),1);o.push(k)},l=[],c=[];for(const w of this.outputs)u(w,l,c);const f=o.slice().reverse();for(const w of f){r[w.id]=w,w.id in n||(n[w.id]=0);let x=n[w.id];const S=a[w.outboundLayer.id]==null?0:a[w.outboundLayer.id];x=Math.max(x,S),a[w.outboundLayer.id]=x,i[w.outboundLayer.id]=w.outboundLayer,n[w.id]=x;for(let C=0;C<w.inboundLayers.length;C++){const E=w.inboundLayers[C],A=w.nodeIndices[C],k=E.inboundNodes[A],T=n[k.id]==null?0:n[k.id];n[k.id]=Math.max(x+1,T),r[k.id]=k}}const d={};for(const w in n){const x=n[w];x in d||(d[x]=[]),d[x].push(r[w])}const h={};for(const w in a){const x=a[w];x in h||(h[x]=[]),h[x].push(i[w])}let m=Object.keys(h).map(w=>parseInt(w,10)).sort(Rv);this.layers=[];for(const w of m){const x=h[w];x.sort((S,C)=>{const E=s[S.id],A=s[C.id];return E<A?-1:E>A?1:0});for(const S of x)S instanceof bs&&this.internalContainerRefs.push(S),this.layers.push(S)}this.layersByDepth=h,m=Object.keys(d).map(w=>parseInt(w,10)).sort(Rv);const v=this.inputs.slice(),y=[];for(const w of m)for(const x of d[w]){const S=x.outboundLayer;if(S!=null){for(const C of x.inputTensors)if(v.indexOf(C)===-1)throw new Xi(`Graph disconnected: cannot obtain value for tensor ${C} at layer "${S.name}". The following previous layers were accessed without issue: ${y}`);for(const C of x.outputTensors)v.push(C);y.push(S.name)}}this.nodesByDepth=d;const b=this.layers.map(w=>w.name);for(const w of b){const x=b.filter(S=>S===w).length;if(x!==1)throw new Xi(`The name "${w}" is used ${x} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(b))}this.outboundNodes=[],this.inboundNodes=[],new Nb({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(w=>null),outputMasks:this.outputs.map(w=>null),inputShapes:this.inputs.map(w=>w.shape),outputShapes:this.outputs.map(w=>w.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new xe("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let a=0;const i=_le(e);i&&this.parseWeights(e);for(const o of this.layers)for(const[u,l]of o.weights.entries()){const c=i?`${l.name.split("/").slice(0,-1).join("/")+"/"}${u}`:l.originalName;if(r[c]!=null)throw new xe(`Duplicate weight name: ${c}`);r[c]=l,a++}const s=[];for(const o in e){let u=o;if(r[o]==null){const l=o.split("/");u=l.slice(0,-2).concat([l[l.length-1]]).join("/")}if(r[u]!=null)s.push([r[u],e[o]]);else if(n)throw new xe(`Provided weight data has no target variable: ${o}`);delete r[u]}if(n){const o=[];for(const u in r)o.push(u);if(o.length>0)throw new xe(`${o.length} of ${a} weights are not set: ${o}`)}YD(s)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),a=["vars","layer_checkpoint_dependencies"],i=r.map(s=>s.startsWith("_")?s.slice(1):s).filter(s=>!a.includes(s)).join("/");i!==n&&(e[i]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${Cz}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=SS(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return De(()=>{e=Cn(e);const r=new Du;for(let a=0;a<this.inputs.length;++a)r.add(this.inputs[a],e[a]);return Bp(this.outputs,r,n)})}computeMask(e,n){return De(()=>{e=Cn(e);let r;return n==null?r=cc(null,e.length):r=Cn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=Jy(e);if(n.length!==this.inputLayers.length)throw new xe(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<n.length;o++){const u=this.inputLayers[o],l=n[o],c=u.name+"_0_0";r[c]=l}const a=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(Rv);if(a.length>1)for(const o of a){const u=this.nodesByDepth[o];for(const l of u){const c=l.outboundLayer;if(this.inputLayers.map(v=>v.id).indexOf(c.id)!==-1)continue;const f=[];for(let v=0;v<l.inboundLayers.length;v++){const y=l.inboundLayers[v],b=l.nodeIndices[v],w=l.tensorIndices[v],x=`${y.name}_${b}_${w}`,S=r[x];f.push(S)}const d=c.computeOutputShape(Fa(f)),h=Jy(d),m=c.inboundNodes.indexOf(l);for(let v=0;v<h.length;v++){const y=`${c.name}_${m}_${v}`;r[y]=h[v]}}}const i=[],s=[];for(let o=0;o<this.outputLayers.length;o++){const u=this.outputLayers[o],l=this.outputLayersNodeIndices[o],c=this.outputLayersTensorIndices[o],f=`${u.name}_${l}_${c}`;s.push(f)}for(let o=0;o<s.length;o++){const u=s[o];Xs(u in r),i.push(r[u])}return Fa(i)}runInternalGraph(e,n){n==null&&(n=cc(null,e.length));const r={};for(let u=0;u<this.inputs.length;++u){const l=this.inputs[u],c=e[u],f=n[u];r[l.id]=[c,f]}const a=Object.keys(this.nodesByDepth).map(u=>parseInt(u,10)).sort(Rv);for(const u of a){const l=this.nodesByDepth[u];for(const c of l){const f=c.outboundLayer,d=c.inputTensors,h=c.outputTensors,m=new Array;for(const v of d)v.id in r&&m.push(r[v.id]);if(m.length===d.length){let v={},y,b,w,x;if(c.callArgs!=null&&(v=c.callArgs),m.length===1){const[S,C]=m[0];v.mask==null&&(v.mask=C),w=Cn(f.call(S,v)),x=Cn(f.computeMask(S,C)),y=[S],b=[C]}else y=m.map(S=>S[0]),b=m.map(S=>S[1]),v.mask==null&&(v.mask=b),w=Cn(f.call(y,v)),x=Cn(f.computeMask(y,b));if(f.activityRegularizer)throw new Kt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let S=0;S<h.length;++S){const C=h[S],E=w[S],A=x[S];r[C.id]=[E,A]}}}}const i=[],s=[],o=[];for(const u of this.outputs){Xs(u.id in r,`Could not compute output ${u.name} : ${u.id}`);const[l,c]=r[u.id];o.push(l.shape),i.push(l),s.push(c)}return[i,s,o]}buildNodeConversionMap(e){const n={};let r;for(const a of this.layers){r=a instanceof bs?1:0;for(let i=0;i<a.inboundNodes.length;i++){const s=bs.nodeKey(a,i);this.containerNodes.has(s)&&(n[s]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new xe("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new xe(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new xe(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return De(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const a=bs.nodeKey(n,r);this.containerNodes.has(a)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const s of this.layers){const o=s.getClassName(),u=s.getConfig(),l=[];for(let f=0;f<s.inboundNodes.length;f++){const d=s.inboundNodes[f],h=bs.nodeKey(s,f);let m={};if(this.containerNodes.has(h)){if(d.callArgs)try{JSON.stringify(d.callArgs),m=d.callArgs}catch{console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: ${d.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),m={}}if(d.inboundLayers.length>0){const v=[];for(let y=0;y<d.inboundLayers.length;y++){const b=d.inboundLayers[y],w=d.nodeIndices[y],x=d.tensorIndices[y],S=bs.nodeKey(b,w);let C=n[S];C==null&&(C=0),v.push([b.name,C,x,m])}l.push(v)}}}const c={};c.name=s.name,c.className=o,c.config=u,c.inboundNodes=l,r.push(c)}e.layers=r;const a=[];for(let s=0;s<this.inputLayers.length;s++){const o=this.inputLayers[s],u=this.inputLayersNodeIndices[s],l=bs.nodeKey(o,u);if(!this.containerNodes.has(l))continue;let c=n[l];c==null&&(c=0);const f=this.inputLayersTensorIndices[s];a.push([o.name,c,f])}e.inputLayers=a;const i=[];for(let s=0;s<this.outputLayers.length;s++){const o=this.outputLayers[s],u=this.outputLayersNodeIndices[s],l=bs.nodeKey(o,u);if(!this.containerNodes.has(l))continue;let c=n[l];c==null&&(c=0);const f=this.outputLayersTensorIndices[s];i.push([o.name,c,f])}return e.outputLayers=i,e}static fromConfig(e,n,r={},a=!1){const i={},s={};function o(y,b){y.name in s?s[y.name].push(b):s[y.name]=[b]}function u(y,b){const w=[];let x;for(const S of b){const C=S[0],E=S[1],A=S[2];if(x=S[3]==null?{}:S[3],!(C in i)){o(y,b);return}const k=i[C];if(k.inboundNodes.length<=E){o(y,b);return}const T=k.inboundNodes[E];w.push(T.outputTensors[A])}w.length>0&&y.apply(Fa(w),x)}function l(y){const b=y.name,w=Ro(y,n.customObjects!=null?n.customObjects:{});w.setFastWeightInitDuringBuild(a),i[b]=w,y.inboundNodes.forEach(S=>{if(!(S instanceof Array))throw new xe(`Corrupted configuration, expected array for nodeData: ${S}`);o(w,S)})}const c=n.name,f=n.layers;for(const y of f)l(y);for(;!gue(s);)for(const y of f){const b=i[y.name];if(b.name in s){const w=s[b.name];delete s[b.name];for(const x of w)u(b,x)}}const d=[],h=[],m=n.inputLayers;for(const y of m){const b=y[0],w=y[1],x=y[2];Xs(b in i);const C=i[b].inboundNodes[w].outputTensors;d.push(C[x])}const v=n.outputLayers;for(const y of v){const b=y[0],w=y[1],x=y[2];Xs(b in i);const C=i[b].inboundNodes[w].outputTensors;h.push(C[x])}return new e({inputs:d,outputs:h,name:c})}get stateful(){if(this._stateful)throw new xe("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){De(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ole(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(a=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const a=[];return e.forEach(i=>{i in t?a.push(t[i]):a.push(null)}),a}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function Ez(t,e){return Ole(t,e,"classWeight")}async function Dz(t,e,n,r){if(n!=null){const a=De(()=>{if(t.shape.length===1)return Fo(t);if(t.shape.length===2){if(t.shape[1]>1)return Xf(t,1);if(t.shape[1]===1)return be(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await a.data());en(a);const s=[];return i.forEach(o=>{if(n[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);s.push(n[o])}),na(s,"float32")}else return null}function Fle(t,e){return ge(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Rle=32;function Tz(t,e){let n,r;const a=e;n=a.xs,r=a.ys,Y(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=q_("input",t.inputNames,n),s=q_("output",t.outputNames,r),o=i[0].shape[0];Y(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),Y(s.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let u=0;u<i.length;u++)Y(i[u].shape[0]===o,()=>`Batch size mismatch: input ${t.inputNames[u]} has ${i[u].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);for(let u=0;u<s.length;u++)Y(s[u].shape[0]===o,()=>`Batch size mismatch: output ${t.outputNames[u]} has ${s[u].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);return{xs:i,ys:s}}function q_(t,e,n){if(n instanceof Kn)return[n];if(Array.isArray(n))return Y(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const a of e){if(n[a]==null)throw new xe(`The feature data generated by the dataset lacks the required ${t} key '${a}'.`);r.push(n[a])}return r}}function Mle(t){if(t.length===3)throw new Kt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function Ple(t,e,n){const r=n.batchesPerEpoch!=null;if(Y(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),Y(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),Y(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),Y(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),Y(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const a=n.validationData!=null;let i,s;if(a)if(G_(n.validationData))Y(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const y=Mle(n.validationData);i=y.xs,s=y.ys}const o=t.makeTrainFunction(),u=t.getDedupedMetricsNames();let l;a?l=u.slice().concat(u.map(y=>"val_"+y)):l=u.slice();const c=gz(n.callbacks,n.yieldEvery),f=n.verbose==null?1:n.verbose,{callbackList:d,history:h}=vz(c,f,n.epochs,null,null,Ble(e,n),null,a,l);d.setModel(t),t.history=h,await d.onTrainBegin(),t.stopTraining_=!1;let m=n.initialEpoch==null?0:n.initialEpoch,v=await e.iterator();for(;m<n.epochs;){const y={};await d.onEpochBegin(m);let b=0,w=0;for(r||(v=await e.iterator());!r||b<n.batchesPerEpoch;){const x=await v.next();if(r&&x.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${b} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(x.value!=null){const{xs:S,ys:C}=Tz(t,x.value),E={};E.batch=w,E.size=S[0].shape[0],await d.onBatchBegin(w,E);const A=[];if(n.classWeight!=null){const I=Ez(n.classWeight,t.outputNames);for(let $=0;$<I.length;++$)A.push(await Dz(C[$],null,I[$]))}const k=S.concat(C).concat(A),T=o(k);en(k);for(let I=0;I<u.length;++I){const $=u[I],O=T[I];E[$]=O,_r(O)}await d.onBatchEnd(w,E),mz(E),w++,b++}if(r?b>=n.batchesPerEpoch:x.done){if(a){let S;G_(n.validationData)?S=Cn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):S=Cn(t.evaluate(i,s,{batchSize:n.validationBatchSize==null?Rle:n.validationBatchSize,verbose:0}));for(let C=0;C<t.metricsNames.length;++C)y[`val_${t.metricsNames[C]}`]=S[C]}break}if(t.stopTraining_)break}if(await d.onEpochEnd(m,y),m++,t.stopTraining_)break}return await d.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Ble(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function G_(t){return typeof t.iterator=="function"}function Lle(t){return typeof t.next=="function"}async function zle(t,e,n){n=n||{};const r=n.batches!=null,a=t.testFunction;let i=[];if(n.verbose>0)throw new Kt("Verbose mode is not implemented yet.");Y(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const s=Lle(e)?e:await e.iterator();let o=0,u=0;for(;!r||u<n.batches;){const l=await s.next();if(i=De(()=>{if(l.value){const{xs:c,ys:f}=Tz(t,l.value),d=c.concat(f),h=De(()=>a(d));if(en(d),u===0)for(let v=0;v<h.length;++v)i.push(St(0));const m=d[0].shape[0];for(let v=0;v<h.length;++v){const y=h[v],b=i[v];i[v]=De(()=>We(i[v],ge(m,y))),u>0&&en(b)}en(h),o+=m,++u}return i}),l.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let l=0;l<i.length;++l){const c=i[l];i[l]=yt(i[l],o),en(c)}return Fa(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function D2(t){Y(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Ip(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Ql(r,e,n-e)):Ql(t,e,n-e)}function CS(t,e){return De(()=>t==null?null:Array.isArray(t)?t.map(n=>CS(n,e)):tz(t,e.dtype==="int32"?e:st(e,"int32")))}function T2(t,e){const n=[];let r=0,a=null;for(;r<t;)a=r+e,a>=t&&(a=t),n.push([r,a]),r=a;return n}function $z(t){const e=[];t instanceof Kn&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(zm(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function vs(t,e){if(t==null)return;const n=[];if(e instanceof Kn)n.push(e.id);else if(Array.isArray(e))e.forEach(a=>n.push(a.id));else if(e!=null)for(const a in e){const i=e[a];n.push(i.id)}const r=[];if(t instanceof Kn)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(a=>{n.indexOf(a.id)===-1&&r.push(a)});else if(t!=null)for(const a in t){const i=t[a];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(a=>{a.isDisposed||a.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ule(t){return t instanceof Kn}function ES(t){return Array.isArray(t)}function H_(t){return!Ule(t)&&!ES(t)}function j_(t,e,n,r=!0,a=""){if(e==null||e.length===0){if(t!=null){let s=!1;if(ES(t)&&t.length>0)s=!0;else if(H_(t)){for(const o in t)if(t.hasOwnProperty(o)){s=!0;break}}else s=!0;if(s)throw new xe(`Error when checking model ${a} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(s=>null);let i;if(H_(t)){t=t,i=[];for(const s of e){if(t[s]==null)throw new xe(`No data provided for "${s}". Need data for each key in: ${e}`);i.push(t[s])}}else if(ES(t)){if(t=t,t.length!==e.length)throw new xe(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new xe(`The model ${a} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=$z(i),n!=null)for(let s=0;s<e.length;++s){if(n[s]==null)continue;const o=i[s];if(o.shape.length!==n[s].length)throw new xe(`Error when checking ${a}: expected ${e[s]} to have ${n[s].length} dimension(s). but got array with shape ${o.shape}`);for(let u=0;u<n[s].length;++u){if(u===0&&!r)continue;const l=o.shape[u],c=n[s][u];if(c!=null&&c>=0&&l!==c)throw new xe(`${a} expected a batch of elements where each example has shape [${n[s].slice(1,n[s].length)}] (i.e.,tensor shape [*,${n[s].slice(1,n[s].length)}]) but the ${a} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return i}function Vle(t,e,n){const r=_u(t.map(i=>i.shape[0]));r.sort();const a=_u(e.map(i=>i.shape[0]));if(a.sort(),r.length>1)throw new xe(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(a.length>1)throw new xe(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&a.length>0&&!un(r,a))throw new xe(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${a[0]} target sample(s).`)}function Wle(t,e,n){const r=[Sb,Cb,ph];for(let a=0;a<t.length;++a){const i=t[a],s=e[a],o=n[a];if(s!=null){if(s===ph&&i.shape[i.shape.length-1]===1)throw new xe(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(s)!==-1){const u=i.shape.slice(1),l=o.slice(1);for(let c=0;c<u.length;++c){const f=u[c],d=l[c];if(d!=null&&f!==d)throw new xe(`A target Tensor with shape ${i.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function X_(t,e,n,r=!0,a=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new xe(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new xe(`The model expects ${e.length} ${a} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let s=0;s<e.length;++s){if(n[s]==null)continue;const o=i[s];if(o.shape.length!==n[s].length)throw new xe(`Error when checking ${a}: expected ${e[s]} to have ${n[s].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let u=0;u<n[s].length;++u){if(u===0&&!r)continue;const l=o.shape[u],c=n[s][u];if(c!=null&&c!==l)throw new xe(`Error when checking ${a}: expected ${e[s]} to have shape ${JSON.stringify(n[s])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function qle(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const a of e){let i=n.hasOwnProperty(a)?n[a]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const Gle="layers-model";class Mf extends bs{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new xe("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Tle(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=Dle(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof il))throw new xe("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const s in e.loss)if(this.outputNames.indexOf(s)===-1)throw new xe(`Unknown entry in loss dictionary: "${s}". Only expected the following keys: ${this.outputNames}`);for(const s of this.outputNames)e.loss[s]==null&&console.warn(`Output "${s}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${s} during training`),n.push(E2(e.loss[s]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new xe(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(o=>E2(o))}else{const s=E2(e.loss);this.outputs.forEach(o=>{n.push(s)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let s=0;s<this.outputs.length;++s){const o=this.internalOutputShapes[s],u=this.outputNames[s];this.feedOutputNames.push(u),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[s])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Zl("loss",()=>{for(let s=0;s<this.outputs.length;++s){if(r.indexOf(s)!==-1)continue;const o=this.lossFunctions[s];this.outputs.length>1&&(this.metricsTensors.push([o,s]),this.metricsNames.push(this.outputNames[s]+"_loss"))}});const a=qle(e.metrics,this.outputNames),i=(s,o,u)=>{this.outputNames.length>1&&(o=this.outputNames[s]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([u,s])};Zl("metric",()=>{for(let s=0;s<this.outputs.length;++s){if(r.indexOf(s)!==-1)continue;const o=a[s];(l=>{const c="";let f,d,h;for(const m of l){if(typeof m=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(m)!==-1){const y=this.internalOutputShapes[s];y[y.length-1]===1||this.lossFunctions[s]===Cb?["accuracy","acc"].indexOf(m)!==-1?d=bz:["crossentropy","ce"].indexOf(m)!==-1&&(d=gle):this.lossFunctions[s]===a0?["accuracy","acc"].indexOf(m)!==-1?d=vle:["crossentropy","ce"].indexOf(m)!==-1&&(d=Nz):["accuracy","acc"].indexOf(m)!==-1?d=xz:["crossentropy","ce"].indexOf(m)!==-1&&(d=wz);let b;["accuracy","acc"].indexOf(m)!==-1?b="acc":["crossentropy","ce"].indexOf(m)!==-1&&(b="ce"),h=d,f=c+b}else h=Ele(m),f=c+Bv(m);let v;Zl(f,()=>{v=h}),i(s,f,v)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const a=r.batchSize==null?32:r.batchSize;D2(a);const s=this.standardizeUserDataXY(e,n,!0,a);try{const o=s[0].concat(s[1]);this.makeTestFunction();const u=this.testFunction,l=this.testLoop(u,o,a,r.verbose,r.steps);return Fa(l)}finally{vs(s[0],e),vs(s[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),zle(this,e,n)}checkNumSamples(e,n,r,a="steps"){let i;if(r!=null){if(i=null,n!=null)throw new xe(`If ${a} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new xe(`Either the input data should have a defined shape, or ${a} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new xe("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),a=r?n:[n],i=this.retrieveSymbolicTensors(a),s=new Du;if(e instanceof Kn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new xe(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let u=0;u<this.inputs.length;++u)s.add(this.inputs[u],e[u])}else for(const u of this.inputs){const l=e[u.name];if(l==null)throw new xe(`No value is provided for the model's input ${u.name}`);s.add(u,l)}const o=Bp(i,s);return r?o:o[0]}retrieveSymbolicTensors(e){const n=cc(null,e.length);let r=e.length;for(const a of this.layers){const i=Array.isArray(a.output)?a.output:[a.output],s=i.map(o=>o.name);for(let o=0;o<e.length;++o){const u=s.indexOf(e[o]);if(u!==-1&&(n[o]=i[u],r--),r===0)break}if(r===0)break}if(r>0){const a=[];throw n.forEach((i,s)=>{i==null&&a.push(e[s])}),new xe(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(a)}`)}return n}predictLoop(e,n=32,r=!1){return De(()=>{const a=this.checkNumSamples(e);if(r)throw new Kt("Verbose predictLoop() is not implemented yet.");const i=T2(a,n),s=this.outputs.map(o=>[]);for(let o=0;o<i.length;++o)De(()=>{const l=i[o][0],c=i[o][1],f=Ip(e,l,c),d=[];if(Array.isArray(f))for(let m=0;m<f.length;++m)d.push({key:this.inputs[m],value:f[m]});else d.push({key:this.inputs[0],value:f});const h=new Du(d);return Bp(this.outputs,h)}).forEach((l,c)=>s[c].push(l));return Fa(s.map(o=>hr(o,0)))})}predict(e,n={}){const r=$z(e);X_(r,this.inputNames,this.feedInputShapes,!1);try{const a=n.batchSize==null?32:n.batchSize;return D2(a),this.predictLoop(r,a)}finally{vs(r,e)}}predictOnBatch(e){X_(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,a){if(this.optimizer_==null)throw new Xi("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let s=0;s<this.feedOutputShapes.length;++s){const o=this.feedOutputShapes[s];this.feedLossFns[s]===a0?i.push(o.slice(0,o.length-1).concat([1])):i.push(o)}if(e=j_(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=j_(n,this.feedOutputNames,i,!1,"target"),Vle(e,n),Wle(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&a!=null&&a>0&&e[0].shape[0]%a!==0)throw new xe(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${a}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,a,i=!0,s){const[o,u]=this.standardizeUserDataXY(e,n,i,s);if(r!=null)throw new Error("sample weight is not supported yet.");let l=null;if(a!=null){const c=Ez(a,this.outputNames);l=[];for(let f=0;f<c.length;++f)l.push(await Dz(u[f],null,c[f]))}return[o,u,l]}testLoop(e,n,r,a=0,i){return De(()=>{const s=this.checkNumSamples(n,r,i,"steps"),o=[];if(a>0)throw new Kt("Verbose mode is not implemented yet.");if(i!=null)throw new Kt("steps mode in testLoop() is not implemented yet");{const u=T2(s,r),l=na($s(0,s));for(let c=0;c<u.length;++c){const f=u[c][0],d=u[c][1],h=Ql(l,f,d-f),m=CS(n,h),v=e(m);if(c===0)for(let y=0;y<v.length;++y)o.push(St(0));for(let y=0;y<v.length;++y){const b=v[y];o[y]=We(o[y],ge(d-f,b))}}for(let c=0;c<o.length;++c)o[c]=yt(o[c],s)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const a=e[r];let i=a;if(__(e,a)>1){const s=__(e.slice(0,r),a);i+=`_${s}`}n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),s=[],o=()=>{const f=[];for(let v=0;v<this.inputs.length;++v)f.push({key:this.inputs[v],value:r[v]});const d=new Du(f),h=Bp(this.outputs,d,{training:!0});let m;for(let v=0;v<this.lossFunctions.length;++v){const y=this.lossFunctions[v];let b=y(a[v],h[v]);i[v]!=null&&(b=Fle(b,i[v]));const w=nr(b);n.push(w),v===0?m=b:m=We(m,b)}for(let v=0;v<this.metricsTensors.length;++v){let y;if(this.outputs.length>1&&v<this.outputs.length)y=n[v];else{const b=this.metricsTensors[v][0],w=this.metricsTensors[v][1];y=nr(b(a[w],h[w]))}_r(y),s.push(y)}return m=nr(m),this.calculateLosses().forEach(v=>{m=We(m,v)}),m},u=this.collectedTrainableWeights.map(f=>f.read());return[this.optimizer_.minimize(o,!0,u)].concat(s)}}makeTestFunction(){this.testFunction=e=>De(()=>{const n=[];let r;const a=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=[];for(let l=0;l<this.inputs.length;++l)s.push({key:this.inputs[l],value:a[l]});const o=new Du(s),u=Bp(this.outputs,o);for(let l=0;l<this.lossFunctions.length;++l){const c=this.lossFunctions[l],f=nr(c(i[l],u[l]));l===0?r=f:r=We(r,f),n.push(r)}for(let l=0;l<this.metricsTensors.length;++l){const c=this.metricsTensors[l][0],f=this.metricsTensors[l][1],d=nr(c(i[f],u[f]));n.push(d)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let a,i,s,o,u,l,c,f,d;try{const h=r.batchSize==null?32:r.batchSize;D2(h);const v=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,h);a=v[0],i=v[1],d=v[2];let y=!1,b;if(r.validationData!=null&&r.validationData.length>0){if(y=!0,r.validationData.length===2)u=r.validationData[0],l=r.validationData[1];else throw r.validationData.length===3?new Kt("validationData including sample weights is not supported yet."):new xe(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const I=await this.standardizeUserData(u,l,null,null,!0,h);c=I[0],f=I[1],b=c.concat(f)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){y=!0;const T=Math.floor(a[0].shape[0]*(1-r.validationSplit)),I=a[0].shape[0];c=Ip(a,T,I),s=a,a=Ip(a,0,T),f=Ip(i,T,I),o=i,i=Ip(i,0,T),b=c.concat(f)}else r.validationSteps!=null&&(y=!0);const w=a.concat(i).concat(d);this.checkTrainableWeightsConsistency();const x=this.makeTrainFunction(),S=this.getDedupedMetricsNames();let C,E;y?(this.makeTestFunction(),C=this.testFunction,E=S.slice().concat(S.map(T=>"val_"+T))):(C=null,b=[],E=S.slice());const A=gz(r.callbacks,r.yieldEvery);return await this.fitLoop(x,w,S,h,r.epochs,r.verbose,A,C,b,r.shuffle,E,r.initialEpoch,null,null)}finally{this.isTraining=!1,vs(a,e),vs(i,n),vs(s,e),vs(o,n),vs(c,u),vs(f,l),d!=null&&en(d)}}async fitLoop(e,n,r,a,i,s,o,u,l,c,f,d,h,m){a==null&&(a=32),i==null&&(i=1),c==null&&(c=!0),d==null&&(d=0);let v=!1;if(u!=null&&l!=null&&(v=!0),m!=null&&(v=!0,h==null))throw new xe("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const y=this.checkNumSamples(n,a,h,"steps_per_epoch");let b;y!=null&&(b=$s(0,y)),s==null&&(s=1);const{callbackList:w,history:x}=vz(o,s,i,d,y,h,a,v,f);w.setModel(this),this.history=x,await w.onTrainBegin(),this.stopTraining_=!1;for(let S=d;S<i;++S){await w.onEpochBegin(S);const C={};if(h!=null)throw new Kt("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new Kt("batch shuffling is not implemneted yet");c&&YK(b);const E=na(b),A=T2(y,a);for(let k=0;k<A.length;++k){const T={};if(await w.onBatchBegin(k,T),De(()=>{const I=A[k][0],$=A[k][1],O=Ql(E,I,$-I);T.batch=k,T.size=$-I;const B=CS(n,O),z=e(B);for(let L=0;L<r.length;++L){const F=r[L],R=z[L];T[F]=R,_r(R)}if(k===A.length-1&&v){const L=this.testLoop(u,l,a);for(let F=0;F<r.length;++F){const R=r[F],W=L[F];_r(W),C["val_"+R]=W}}}),await w.onBatchEnd(k,T),mz(T),this.stopTraining_)break}E.dispose()}if(await w.onEpochEnd(S,C),this.stopTraining_)break}return await w.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return Ple(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),a=r[0],i=r[1],o=this.makeTrainFunction()(a.concat(i)),u=[];for(const l of o){const c=await l.data();u.push(c[0])}return en(o),vs(r[0],e),vs(r[1],n),Fa(u)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,a=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let s=0;s<a.length;++s)r&&!a[s].trainable||n.push({name:a[s].originalName,tensor:i[s]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=Kk().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-Kk().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Io(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Io(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const a of n)if(typeof r[a]=="string")e[a]=Io(r[a]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Io(Bv(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Io(Bv(e)));{const e={};for(const n in this.metrics)e[n]=Io(Bv(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=NS(e.optimizer_config),r=Ro(n);let a;if(typeof e.loss=="string")a=Wl(e.loss);else if(Array.isArray(e.loss))a=e.loss.map(s=>Wl(s));else if(e.loss!=null){a={};for(const s in e.loss)a[s]=Wl(e.loss[s])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(s=>Wl(s));else if(e.metrics!=null){i={};for(const s in e.metrics)i[s]=Wl(e.metrics[s])}this.compile({loss:a,metrics:i,optimizer:r})}async save(e,n){if(typeof e=="string"){const l=RP(e);if(l.length===0)throw new xe(`Cannot find any save handlers for URL '${e}'`);if(l.length>1)throw new xe(`Found more than one (${l.length}) save handlers for URL '${e}'`);e=l[0]}if(e.save==null)throw new xe("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await XN(this.getNamedWeights(n)),o={modelTopology:this.toJSON(null,!1),format:Gle,generatedBy:`TensorFlow.js tfjs-layers v${Cz}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const l="optimizer",{data:c,specs:f}=await XN(await this.optimizer.getWeights(),l);r.specs.push(...f),r.data=_P([r.data,c])}return this.userDefinedMetadata!=null&&(W_(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){W_(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Mf.className="Model";je(Mf);class Az extends Mf{}Az.className="Functional";je(Az);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class hh extends Mf{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:xb("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new xe(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof hh||e instanceof Mf;let r;if(n){if(r=e,r.outputs.length!==1)throw new xe("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new xe("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new xe("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const a=jue({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new xe(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new xe("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=cz(this.outputs[0])}this.inboundNodes=[],new Nb({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:cc(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(a=>a.shape),outputShapes:this.outputs[0].shape})}else{const a=e.apply(this.outputs[0]);if(Array.isArray(a))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[a],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(gn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Mf({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Xi("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Xi("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Xi("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Xi("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},a=!1){let i,s={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new xe("Legacy serialization format not supported yet.");i=n}else Y(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,s=n;const o=new e(s);if(!(o instanceof hh))throw new Kt(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const u of i){const c=Ro(u,void 0,a);a&&c.setFastWeightInitDuringBuild(!0),o.add(c)}return o}set stopTraining(e){if(this.model==null)throw new xe("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new xe("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}hh.className="Sequential";je(hh);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let la=class extends Nd{getConfig(){return{}}};class Iz extends la{apply(e,n=1){return kue(e,n)}}Iz.className="elu";je(Iz);class kz extends la{apply(e){return jE(e)}}kz.className="selu";je(kz);class _z extends la{apply(e){return co(e)}}_z.className="relu";je(_z);class Oz extends la{apply(e){return De(()=>oc(6,co(e)))}}Oz.className="relu6";je(Oz);class Fz extends la{apply(e){return e}}Fz.className="linear";je(Fz);class Rz extends la{apply(e){return to(e)}}Rz.className="sigmoid";je(Rz);class Mz extends la{apply(e){return Oue(e)}}Mz.className="hardSigmoid";je(Mz);class Pz extends la{apply(e){return bd(e)}}Pz.className="softplus";je(Pz);class Bz extends la{apply(e){return _ue(e)}}Bz.className="softsign";je(Bz);class Lz extends la{apply(e){return sc(e)}}Lz.className="tanh";je(Lz);let eT=class extends la{apply(e,n=-1){return lb(e,n)}};eT.className="softmax";je(eT);class zz extends la{apply(e,n=-1){return BE(e,n)}}zz.className="logSoftmax";je(zz);class Uz extends la{apply(e){return De(()=>De(()=>{const n=Math.sqrt(2),r=ge(.5,We(1,RE(yt(e,n))));return ge(e,r)}))}}Uz.className="gelu";je(Uz);class Vz extends la{apply(e){return De(()=>ge(.5,ge(e,We(1,sc(ge(Kr(yt(2,Math.PI)),We(e,ge(.044715,zo(e,3)))))))))}}Vz.className="gelu_new";je(Vz);class Wz extends la{apply(e){return De(()=>ge(e,sc(bd(e))))}}Wz.className="mish";je(Wz);class qz extends la{apply(e,n=1){return De(()=>ge(to(ge(e,n)),e))}}qz.className="swish";je(qz);function Wu(t){return t.getClassName()}function $2(t,e={}){return Lm(t,Gi.getMap().classNameMap,e,"activation")}function qu(t){if(t==null){const e={};return e.className="linear",e.config={},$2(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},$2(e)}else return t instanceof la?t:$2(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Hle(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class Gz extends Nd{}class Hz extends Gz{constructor(e){super(),Hle(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return De(()=>{let n=br([1]);return this.hasL1&&(n=We(n,pt(ge(this.l1,yr(e))))),this.hasL2&&(n=We(n,pt(ge(this.l2,Um(e))))),be(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}Hz.className="L1L2";je(Hz);const K_={l1l2:"L1L2"};function Fn(t){return zD(t)}function Y_(t,e={}){return Lm(t,Gi.getMap().classNameMap,e,"regularizer")}function Gn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in K_?K_[t]:t,config:{}};return Y_(n)}else return t instanceof Gz?t:Y_(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class jz extends nn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Ot(e);let r=co(e);return this.maxValue!=null&&(r=ui(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}jz.className="ReLU";je(jz);class Xz extends nn{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Ot(e);return J1(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}Xz.className="LeakyReLU";je(Xz);class Kz extends nn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=qn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Gn(e.alphaRegularizer),this.alphaConstraint=Cr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new xe(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=gn(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const a of this.sharedAxes)n[a-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let a=1;a<e.length;++a)r[a]=e[a];this.inputSpec=[new wr({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Ot(e),sb(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Yn(this.alphaInitializer),alphaRegularizer:Fn(this.alphaRegularizer),alphaConstraint:Sr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}Kz.className="PReLU";je(Kz);let Yz=class extends nn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Kt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Ot(e);return km(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};Yz.className="ELU";je(Yz);class Zz extends nn{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Ot(e);return ge(r,st(gi(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}Zz.className="ThresholdedReLU";je(Zz);class Qz extends nn{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new eT().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return De(()=>{let r=Ot(e);const a=n.mask;if(a!=null){const i=ge(ct(ai(r.shape),st(a,r.dtype)),St(-1e9));r=We(r,i)}return this.axis instanceof Array?this.axis.length>1?li(ct(r,tb(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}Qz.className="Softmax";je(Qz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Pf(t,e,n){if(typeof t=="number")return cc(t,e);if(t.length!==e)throw new xe(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const a=t[r];if(!Tue(a))throw new xe(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${a}`)}return t}function Es(t,e,n,r,a=1){if(t==null)return t;const i=e+(e-1)*(a-1);let s;return n==="same"?s=t:s=t-i+1,Math.floor((s+r-1)/r)}function Ks(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+Vu([n-e,0]);else if(r==="same")t=t*e;else throw new xe(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tT(t,e){return De(()=>(lr(e),e==="channelsFirst"?cn(t,[0,2,3,1]):t))}function Jz(t,e){return De(()=>(lr(e),e==="channelsFirst"?cn(t,[0,2,3,4,1]):t))}function jle(t,e,n,r=1,a="valid",i,s=1){return De(()=>{if(i==null&&(i=As()),lr(i),t.shape.length!==3)throw new xe(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new xe(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new xe(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(t=cn(t,[0,2,1])),a==="causal")throw new Kt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=IE(t,e,r,a==="same"?"same":"valid","NWC",s);return n!=null&&(o=_s(o,n)),o})}function Z_(t,e,n,r=[1,1],a="valid",i,s,o=null){return De(()=>{if(i==null&&(i=As()),lr(i),t.rank!==3&&t.rank!==4)throw new xe(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new xe(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let u=tT(t,i);if(a==="causal")throw new Kt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=VB({x:u,filter:e,strides:r,pad:a==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:n,activation:o}),i==="channelsFirst"&&(u=cn(u,[0,3,1,2])),u})}function Xle(t,e,n,r=[1,1,1],a="valid",i,s){return De(()=>{if(i==null&&(i=As()),lr(i),t.rank!==4&&t.rank!==5)throw new xe(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new xe(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let o=Jz(t,i);if(a==="causal")throw new Kt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=uB(o,e,r,a==="same"?"same":"valid","NDHWC",s),n!=null&&(o=_s(o,n)),i==="channelsFirst"&&(o=cn(o,[0,4,1,2,3])),o})}class Eb extends nn{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Eb.verifyArgs(n),this.rank=e,Or(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Kt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Pf(n.kernelSize,e,"kernelSize"),this.strides=Pf(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Ti(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,lr(this.dataFormat),this.activation=qu(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=qn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Cr(n.biasConstraint),this.biasRegularizer=Gn(n.biasRegularizer),this.activityRegularizer=Gn(n.activityRegularizer),this.dilationRate=Pf(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new xe(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new xe(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new xe(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Xs("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!UD(e.kernelSize,"number",1,3))throw new xe(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Wu(this.activation),useBias:this.useBias,biasInitializer:Yn(this.biasInitializer),biasRegularizer:Fn(this.biasRegularizer),activityRegularizer:Fn(this.activityRegularizer),biasConstraint:Sr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Sd extends Eb{constructor(e,n){super(e,n),this.kernel=null,Sd.verifyArgs(n),this.filters=n.filters,Or(this.filters,"filters"),this.kernelInitializer=qn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Cr(n.kernelConstraint),this.kernelRegularizer=Gn(n.kernelRegularizer)}build(e){e=gn(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new xe(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],a=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return De(()=>{e=Ot(e);let r;const a=this.bias==null?null:this.bias.read(),i=KL(this.activation.getClassName());if(i!=null&&this.rank===2)r=Z_(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=jle(e,this.kernel.read(),a,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=Z_(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=Xle(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Kt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=gn(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const s=Es(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(s)}let a=[e[0]];return this.dataFormat==="channelsLast"?(a=a.concat(n),a.push(this.filters)):(a.push(this.filters),a=a.concat(n)),a}getConfig(){const e={filters:this.filters,kernelInitializer:Yn(this.kernelInitializer),kernelRegularizer:Fn(this.kernelRegularizer),kernelConstraint:Sr(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new xe(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class Gm extends Sd{constructor(e){super(2,e),Gm.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!UD(e.kernelSize,"number",1,2))throw new xe(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}Gm.className="Conv2D";je(Gm);class Hm extends Sd{constructor(e){super(3,e),Hm.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new xe(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Hm.className="Conv3D";je(Hm);class e5 extends Gm{constructor(e){if(super(e),this.inputSpec=[new wr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new xe(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=gn(e),e.length!==4)throw new xe("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new xe("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],a=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new wr({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return De(()=>{let r=Ot(e);if(r.shape.length!==4)throw new xe(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const a=r.shape,i=a[0];let s,o;this.dataFormat==="channelsFirst"?(s=2,o=3):(s=1,o=2);const u=a[s],l=a[o],c=this.kernelSize[0],f=this.kernelSize[1],d=this.strides[0],h=this.strides[1],m=Ks(u,d,c,this.padding),v=Ks(l,h,f,this.padding),y=[i,m,v,this.filters];this.dataFormat!=="channelsLast"&&(r=cn(r,[0,2,3,1]));let b=_E(r,this.kernel.read(),y,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(b=cn(b,[0,3,1,2])),this.bias!=null&&(b=_s(b,this.bias.read(),this.dataFormat)),this.activation!=null&&(b=this.activation.apply(b)),b})}computeOutputShape(e){e=gn(e);const n=e.slice();let r,a,i;this.dataFormat==="channelsFirst"?(r=1,a=2,i=3):(r=3,a=1,i=2);const s=this.kernelSize[0],o=this.kernelSize[1],u=this.strides[0],l=this.strides[1];return n[r]=this.filters,n[a]=Ks(n[a],u,s,this.padding),n[i]=Ks(n[i],l,o,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}e5.className="Conv2DTranspose";je(e5);class t5 extends Hm{constructor(e){if(super(e),this.inputSpec=[new wr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new xe(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=gn(e),e.length!==5)throw new xe("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new xe("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],a=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new wr({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return De(()=>{let r=Ot(e);if(r.shape.length!==5)throw new xe(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const a=r.shape,i=a[0];let s,o,u;this.dataFormat==="channelsFirst"?(u=2,s=3,o=4):(u=1,s=2,o=3);const l=a[u],c=a[s],f=a[o],d=this.kernelSize[0],h=this.kernelSize[1],m=this.kernelSize[2],v=this.strides[0],y=this.strides[1],b=this.strides[2],w=Ks(l,v,d,this.padding),x=Ks(c,y,h,this.padding),S=Ks(f,b,m,this.padding),C=[i,w,x,S,this.filters];this.dataFormat!=="channelsLast"&&(r=cn(r,[0,2,3,4,1]));let E=cB(r,this.kernel.read(),C,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(E=cn(E,[0,4,1,2,3])),this.bias!==null&&(E=_s(E,this.bias.read(),this.dataFormat)),this.activation!==null&&(E=this.activation.apply(E)),E})}computeOutputShape(e){e=gn(e);const n=e.slice();let r,a,i,s;this.dataFormat==="channelsFirst"?(r=1,a=2,i=3,s=4):(r=4,a=1,i=2,s=3);const o=this.kernelSize[0],u=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],f=this.strides[1],d=this.strides[2];return n[r]=this.filters,n[a]=Ks(n[a],c,o,this.padding),n[i]=Ks(n[i],f,u,this.padding),n[s]=Ks(n[s],d,l,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}t5.className="Conv3DTranspose";je(t5);class n5 extends Sd{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new xe("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new xe("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new xe(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=qn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Gn(n.depthwiseRegularizer),this.depthwiseConstraint=Cr(n.depthwiseConstraint),this.pointwiseInitializer=qn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Gn(n.pointwiseRegularizer),this.pointwiseConstraint=Cr(n.pointwiseConstraint)}build(e){if(e=gn(e),e.length<this.rank+2)throw new xe(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new xe(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],a=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let o=0;o<this.rank;++o)i.push(1);i.push(r*this.depthMultiplier,this.filters);const s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):this.bias=null,this.inputSpec=[new wr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return De(()=>{e=Ot(e);let r;if(this.rank===1)throw new Kt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=cn(e,[0,2,3,1])),r=XE(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=_s(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=cn(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Yn(this.depthwiseInitializer),e.pointwiseInitializer=Yn(this.pointwiseInitializer),e.depthwiseRegularizer=Fn(this.depthwiseRegularizer),e.pointwiseRegularizer=Fn(this.pointwiseRegularizer),e.depthwiseConstraint=Sr(this.depthwiseConstraint),e.pointwiseConstraint=Sr(this.pointwiseConstraint),e}}n5.className="SeparableConv";class r5 extends n5{constructor(e){super(2,e)}}r5.className="SeparableConv2D";je(r5);class Db extends Sd{constructor(e){super(1,e),Db.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!UD(e.kernelSize,"number",1,1))throw new xe(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}Db.className="Conv1D";je(Db);class a5 extends nn{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return De(()=>{if(e=Ot(e),this.dataFormat==="channelsLast"){const r=Pv(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Pv(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Pv(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Pv(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}a5.className="Cropping2D";je(a5);class i5 extends nn{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,lr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,Cue(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return De(()=>{let r=Ot(e);const a=r.shape;if(this.dataFormat==="channelsFirst"){r=cn(r,[0,2,3,1]);const i=this.size[0]*a[2],s=this.size[1]*a[3],o=this.interpolation==="nearest"?Qs.resizeNearestNeighbor(r,[i,s]):Qs.resizeBilinear(r,[i,s]);return cn(o,[0,3,1,2])}else{const i=this.size[0]*a[1],s=this.size[1]*a[2];return this.interpolation==="nearest"?Qs.resizeNearestNeighbor(r,[i,s]):Qs.resizeBilinear(r,[i,s])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}i5.className="UpSampling2D";je(i5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Kle(t,e,n=[1,1],r="valid",a,i){return De(()=>{a==null&&(a=As()),lr(a);let s=tT(t,a);if(t.rank!==4)throw new xe(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new xe(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return s=Im(s,e,n,r==="same"?"same":"valid","NHWC",i),a==="channelsFirst"&&(s=cn(s,[0,3,1,2])),s})}class s5 extends Eb{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=qn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Cr(e.depthwiseConstraint),this.depthwiseRegularizer=Gn(e.depthwiseRegularizer)}build(e){if(e=gn(e),e.length<4)throw new xe(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new xe(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],a=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",a,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return De(()=>{e=Ot(e);let r=Kle(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=_s(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=gn(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],a=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=Es(n,this.kernelSize[0],this.padding,this.strides[0]),s=Es(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],a,i,s]:[e[0],i,s,a]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Yn(this.depthwiseInitializer),e.depthwiseRegularizer=Fn(this.depthwiseRegularizer),e.depthwiseConstraint=Sr(this.depthwiseRegularizer),e}}s5.className="DepthwiseConv2D";je(s5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function o5(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new xe("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function a(i){return i==null||Array.isArray(i)?i:[i]}return e=a(e),n=a(n),{inputs:t,initialState:e,constants:n}}function u5(t,e,n,r=!1,a,i,s=!1,o=!1){return De(()=>{const u=e.shape.length;if(u<3)throw new xe(`Input should be at least 3D, but is ${u}D.`);const l=[1,0].concat($s(2,u));e=cn(e,l),s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),a!=null&&(a=st(st(a,"bool"),"float32"),a.rank===u-1&&(a=wa(a,-1)),a=cn(a,l)),r&&(e=ns(e,0),a!=null&&(a=ns(a,0)));const c=[];let f,d=n;const h=e.shape[0],m=rs(e);let v;a!=null&&(v=rs(a));for(let b=0;b<h;++b){const w=m[b],x=De(()=>t(w,d));if(a==null)f=x[0],d=x[1];else{const S=De(()=>{const C=v[b],E=ct(Ei(C),C),A=We(ge(x[0],C),ge(d[0],E)),k=d.map((T,I)=>We(ge(x[1][I],C),ge(T,E)));return{output:A,newStates:k}});f=S.output,d=S.newStates}o&&c.push(f)}let y;return o&&(y=ci(c,1)),[f,y,d]})}class sl extends nn{constructor(e){super(e);let n;if(e.cell==null)throw new xe("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new aT({cells:e.cell}):n=e.cell,n.stateSize==null)throw new xe("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new wr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return $s(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){bS(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let a;if(this.returnSequences?a=[e[0],e[1],r]:a=[e[0],r],this.returnState){const i=[];for(const s of n)i.push([e[0],s]);return[a].concat(i)}else return a}computeMask(e,n){return De(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const a=this.states.map(i=>null);return[r].concat(a)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Kt("Constants support is not implemented in RNN yet.");bS(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new wr({shape:[n,null,...r]});const a=[e[0]].concat(e.slice(2));this.cell.build(a);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!un(this.stateSpec.map(s=>s.shape[s.shape.length-1]),i))throw new xe(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(s=>new wr({shape:[null,s]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){De(()=>{if(!this.stateful)throw new js("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new xe("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(a=>br([r,a])):this.states_=[br([r,this.cell.stateSize])];else if(e==null)en(this.states_),this.keptStates!=null&&(en(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(a=>br([r,a])):this.states_[0]=br([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new xe(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):en(this.states_);for(let a=0;a<this.states_.length;++a){const i=e[a],s=Array.isArray(this.cell.stateSize)?this.cell.stateSize[a]:this.cell.stateSize,o=[r,s];if(!un(i.shape,o))throw new xe(`State ${a} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${i.shape}`);this.states_[a]=i}}this.states_=this.states_.map(a=>_r(a.clone()))})}apply(e,n){let r=n==null?null:n.initialState,a=n==null?null:n.constants;n==null&&(n={});const i=o5(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;let s=[],o=[];if(r!=null){n.initialState=r,s=s.concat(r),this.stateSpec=[];for(const l of r)this.stateSpec.push(new wr({shape:l.shape}));o=o.concat(this.stateSpec)}if(a!=null&&(n.constants=a,s=s.concat(a),this.numConstants=a.length),s[0]instanceof oo){const l=[e].concat(s),c=this.inputSpec.concat(o),f=this.inputSpec;this.inputSpec=c;const d=super.apply(l,n);return this.inputSpec=f,d}else return super.apply(e,n)}call(e,n){return De(()=>{const r=n==null?null:n.mask,a=n==null?null:n.training;let i=n==null?null:n.initialState;e=Ot(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==s)throw new xe(`RNN Layer has ${s} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:a},l=u5((m,v)=>{const y=this.cell.call([m].concat(v),o);return[y[0],y.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),c=l[0],f=l[1],d=l[2];this.stateful&&this.resetStates(d,a);const h=this.returnSequences?f:c;return this.returnState?[h].concat(d):h})}getInitialState(e){return De(()=>{let n=br(e.shape);return n=pt(n,[1,2]),n=zm(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?vS(n,[1,r]):n):this.cell.stateSize>1?[vS(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===sl.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const a=n.cell,i=Ro(a,r);return new e(Object.assign(n,{cell:i}))}}sl.className="RNN";je(sl);class Tb extends nn{}class nT extends Tb{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Or(this.units,"units"),this.activation=qu(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=qn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=qn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=qn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Gn(e.kernelRegularizer),this.recurrentRegularizer=Gn(e.recurrentRegularizer),this.biasRegularizer=Gn(e.biasRegularizer),this.kernelConstraint=Cr(e.kernelConstraint),this.recurrentConstraint=Cr(e.recurrentConstraint),this.biasConstraint=Cr(e.biasConstraint),this.dropout=Qf([1,Vu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Qf([1,Vu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=gn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return De(()=>{if(e=e,e.length!==2)throw new xe(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const a=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Gu({ones:()=>Ei(e),rate:this.dropout,training:a,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Gu({ones:()=>Ei(r),rate:this.recurrentDropout,training:a,dropoutFunc:this.dropoutFunc}));let i;const s=this.dropoutMask,o=this.recurrentDropoutMask;s!=null?i=ao(ge(e,s),this.kernel.read()):i=ao(e,this.kernel.read()),this.bias!=null&&(i=_s(i,this.bias.read())),o!=null&&(r=ge(r,o));let u=We(i,ao(r,this.recurrentKernel.read()));return this.activation!=null&&(u=this.activation.apply(u)),[u,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Wu(this.activation),useBias:this.useBias,kernelInitializer:Yn(this.kernelInitializer),recurrentInitializer:Yn(this.recurrentInitializer),biasInitializer:Yn(this.biasInitializer),kernelRegularizer:Fn(this.kernelRegularizer),recurrentRegularizer:Fn(this.recurrentRegularizer),biasRegularizer:Fn(this.biasRegularizer),activityRegularizer:Fn(this.activityRegularizer),kernelConstraint:Sr(this.kernelConstraint),recurrentConstraint:Sr(this.recurrentConstraint),biasConstraint:Sr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}nT.className="SimpleRNNCell";je(nT);class l5 extends sl{constructor(e){e.cell=new nT(e),super(e)}call(e,n){return De(()=>{this.cell.dropoutMask!=null&&(en(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(en(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:i})})}static fromConfig(e,n){return new e(n)}}l5.className="SimpleRNN";je(l5);class rT extends Tb{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new xe("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Or(this.units,"units"),this.activation=qu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=qu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=qn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=qn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=qn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Gn(e.kernelRegularizer),this.recurrentRegularizer=Gn(e.recurrentRegularizer),this.biasRegularizer=Gn(e.biasRegularizer),this.kernelConstraint=Cr(e.kernelConstraint),this.recurrentConstraint=Cr(e.recurrentConstraint),this.biasConstraint=Cr(e.biasConstraint),this.dropout=Qf([1,Vu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Qf([1,Vu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=gn(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return De(()=>{if(e=e,e.length!==2)throw new xe(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let a=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Gu({ones:()=>Ei(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Gu({ones:()=>Ei(a),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,s=this.recurrentDropoutMask;let o,u,l;0<this.dropout&&this.dropout<1&&(e=ge(e,i[0]));let c=ao(e,this.kernel.read());this.useBias&&(c=_s(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(a=ge(a,s[0]));const f=this.recurrentKernel.read(),[d,h]=ii(f,[2*this.units,this.units],f.rank-1),m=ao(a,d),[v,y,b]=ii(c,3,c.rank-1),[w,x]=ii(m,2,m.rank-1);o=this.recurrentActivation.apply(We(v,w)),u=this.recurrentActivation.apply(We(y,x));const S=ao(ge(u,a),h);l=this.activation.apply(We(b,S));const C=We(ge(o,a),ge(We(1,Un(o)),l));return[C,C]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Wu(this.activation),recurrentActivation:Wu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Yn(this.kernelInitializer),recurrentInitializer:Yn(this.recurrentInitializer),biasInitializer:Yn(this.biasInitializer),kernelRegularizer:Fn(this.kernelRegularizer),recurrentRegularizer:Fn(this.recurrentRegularizer),biasRegularizer:Fn(this.biasRegularizer),activityRegularizer:Fn(this.activityRegularizer),kernelConstraint:Sr(this.kernelConstraint),recurrentConstraint:Sr(this.recurrentConstraint),biasConstraint:Sr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}rT.className="GRUCell";je(rT);class c5 extends sl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new rT(e),super(e)}call(e,n){return De(()=>{this.cell.dropoutMask!=null&&(en(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(en(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}c5.className="GRU";je(c5);class $b extends Tb{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Or(this.units,"units"),this.activation=qu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=qu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=qn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=qn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=qn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Gn(e.kernelRegularizer),this.recurrentRegularizer=Gn(e.recurrentRegularizer),this.biasRegularizer=Gn(e.biasRegularizer),this.kernelConstraint=Cr(e.kernelConstraint),this.recurrentConstraint=Cr(e.recurrentConstraint),this.biasConstraint=Cr(e.biasConstraint),this.dropout=Qf([1,Vu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Qf([1,Vu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=gn(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let a;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,s=this.units;a=new(n=class extends ss{apply(u,l){const c=i.apply([s]),f=new WD().apply([s]),d=i.apply([s*2]);return F_(F_(c,f),d)}},n.className="CustomInit",n)}else a=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,a,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return De(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new xe(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let a=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Gu({ones:()=>Ei(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Gu({ones:()=>Ei(a),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,o=this.recurrentDropoutMask;let u,l,c,f;0<this.dropout&&this.dropout<1&&(e=ge(e,s[0]));let d=ao(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(a=ge(a,o[0])),d=We(d,ao(a,this.recurrentKernel.read())),this.useBias&&(d=_s(d,this.bias.read()));const[h,m,v,y]=ii(d,4,d.rank-1);u=this.recurrentActivation.apply(h),l=this.recurrentActivation.apply(m),c=We(ge(l,i),ge(u,this.activation.apply(v))),f=this.recurrentActivation.apply(y);const b=ge(f,this.activation.apply(c));return[b,b,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Wu(this.activation),recurrentActivation:Wu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Yn(this.kernelInitializer),recurrentInitializer:Yn(this.recurrentInitializer),biasInitializer:Yn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Fn(this.kernelRegularizer),recurrentRegularizer:Fn(this.recurrentRegularizer),biasRegularizer:Fn(this.biasRegularizer),activityRegularizer:Fn(this.activityRegularizer),kernelConstraint:Sr(this.kernelConstraint),recurrentConstraint:Sr(this.recurrentConstraint),biasConstraint:Sr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}$b.className="LSTMCell";je($b);class f5 extends sl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new $b(e),super(e)}call(e,n){return De(()=>{this.cell.dropoutMask!=null&&(en(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(en(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}f5.className="LSTM";je(f5);class aT extends Tb{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return De(()=>{e=e;let r=e.slice(1);const a=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?a.push(r.splice(0,o.stateSize.length)):a.push(r.splice(0,1));a.reverse();const i=[];let s;for(let o=0;o<this.cells.length;++o){const u=this.cells[o];r=a[o],o===0?s=[e[0]].concat(r):s=[s[0]].concat(r),s=u.call(s,n),i.push(s.slice(1))}r=[];for(const o of i.slice().reverse())r.push(...o);return[s[0]].concat(r)})}build(e){bS(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,a)=>{Zl(`RNNCell_${a}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),a={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),a)}static fromConfig(e,n,r={}){const a=[];for(const i of n.cells)a.push(Ro(i,r));return new e({cells:a})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return xS(e)}setWeights(e){const n=[];for(const r of this.cells){const a=r.weights.length,i=e.splice(a);for(let s=0;s<r.weights.length;++s)n.push([r.weights[s],i[s]])}YD(n)}}aT.className="StackedRNNCells";je(aT);function Gu(t){const{ones:e,rate:n,training:r=!1,count:a=1,dropoutFunc:i}=t,s=()=>i!=null?i(e(),n):nz(e(),n),o=()=>Vm(s,e,r);return!a||a<=1?_r(o().clone()):Array(a).fill(void 0).map(o).map(l=>_r(l.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var Yle=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};class d5 extends sl{constructor(e){if(e.unroll)throw new Kt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Kt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new wr({ndim:5})]}call(e,n){return De(()=>{if(this.cell.dropoutMask!=null&&(en(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(en(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new xe("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return De(()=>{const{stateSize:n}=this.cell,r=e.shape,a=this.computeSingleOutputShape(r),i=[a[0],...a.slice(2)],s=br(i);return Array.isArray(n)?Array(n.length).fill(s):[s]})}resetStates(e,n=!1){De(()=>{if(!this.stateful)throw new js("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,a=this.computeSingleOutputShape(r),i=[a[0],...a.slice(2)];if(r[0]==null)throw new xe("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>br(i)):this.states_=[br(i)];else if(e==null)en(this.states_),this.keptStates!=null&&(en(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>br(i)):this.states_[0]=br(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new xe(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):en(this.states_);for(let o=0;o<this.states_.length;++o){const u=e[o],l=i;if(!un(u.shape,l))throw new xe(`State ${o} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${u.shape}`);this.states_[o]=u}}this.states_=this.states_.map(o=>_r(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:a,padding:i,strides:s,dilationRate:o}=this.cell,u=n==="channelsFirst",l=e[u?3:2],c=e[u?4:3],f=Es(l,a[0],i,s[0],o[0]),d=Es(c,a[1],i,s[1],o[1]);return[...e.slice(0,2),...u?[r,f,d]:[f,d,r]]}}d5.className="ConvRNN2D";class iT extends $b{constructor(e){const{filters:n,kernelSize:r,strides:a,padding:i,dataFormat:s,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Or(this.filters,"filters"),this.kernelSize=Pf(r,2,"kernelSize"),this.kernelSize.forEach(u=>Or(u,"kernelSize")),this.strides=Pf(a||1,2,"strides"),this.strides.forEach(u=>Or(u,"strides")),this.padding=i||"valid",Ti(this.padding),this.dataFormat=s||"channelsLast",lr(this.dataFormat),this.dilationRate=Pf(o||1,2,"dilationRate"),this.dilationRate.forEach(u=>Or(u,"dilationRate"))}build(e){var n;e=gn(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new xe(`The channel dimension of the input should be defined. Found ${e[r]}`);const a=e[r],i=4,s=this.kernelSize.concat([a,this.filters*i]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let u;if(this.unitForgetBias){const l=this.biasInitializer,c=this.filters;u=new(n=class extends ss{apply(d,h){const m=l.apply([c]),v=ai([c]),y=l.apply([c*2]);return VD([m,v,y])}},n.className="CustomInit",n)}else u=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,u,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return De(()=>{if(e.length!==3)throw new xe(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,a=e[0],i=e[1],s=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Gu({ones:()=>Ei(a),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const u=this.dropoutMask,l=(j,q,H)=>!q||!q[H]?j:ge(q[H],j);let c=l(a,u,0),f=l(a,u,1),d=l(a,u,2),h=l(a,u,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Gu({ones:()=>Ei(i),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const m=this.recurrentDropoutMask;let v=l(i,m,0),y=l(i,m,1),b=l(i,m,2),w=l(i,m,3);const x=3,[S,C,E,A]=ii(this.kernel.read(),o,x),[k,T,I,$]=this.useBias?ii(this.bias.read(),o):[null,null,null,null];c=this.inputConv(c,S,k,this.padding),f=this.inputConv(f,C,T,this.padding),d=this.inputConv(d,E,I,this.padding),h=this.inputConv(h,A,$,this.padding);const[O,B,z,L]=ii(this.recurrentKernel.read(),o,x);v=this.recurrentConv(v,O),y=this.recurrentConv(y,B),b=this.recurrentConv(b,z),w=this.recurrentConv(w,L);const F=this.recurrentActivation.apply(We(c,v)),R=this.recurrentActivation.apply(We(f,y)),W=We(ge(R,s),ge(F,this.activation.apply(We(d,b)))),M=ge(this.recurrentActivation.apply(We(h,w)),this.activation.apply(W));return[M,M,W]})}getConfig(){const e=super.getConfig(),n=Yle(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,a){const i=Uu(e,n,this.strides,a||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?_s(i,r,this.dataFormat):i}recurrentConv(e,n){return Uu(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}iT.className="ConvLSTM2DCell";je(iT);class p5 extends d5{constructor(e){const n=new iT(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}p5.className="ConvLSTM2D";je(p5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class sT extends nn{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let a=0;a<this.noiseShape.length;++a)r.push(this.noiseShape[a]==null?n[a]:this.noiseShape[a]);return r}call(e,n){return De(()=>{this.invokeCallHook(e,n);const r=Ot(e);if(0<this.rate&&this.rate<1){const a=n.training==null?!1:n.training,i=this.getNoiseShape(r);return Vm(()=>nz(r,this.rate,i,this.seed),()=>r,a)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}sT.className="Dropout";je(sT);class h5 extends sT{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}h5.className="SpatialDropout1D";je(h5);class m5 extends nn{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Or(this.units,"units"),this.activation=qu(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=qn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=qn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Cr(e.kernelConstraint),this.biasConstraint=Cr(e.biasConstraint),this.kernelRegularizer=Gn(e.kernelRegularizer),this.biasRegularizer=Gn(e.biasRegularizer),this.activityRegularizer=Gn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=gn(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=gn(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return De(()=>{this.invokeCallHook(e,n);const r=Ot(e),a=KL(this.activation.getClassName());let i;return a!=null?i=ao(r,this.kernel.read(),a,this.bias?this.bias.read():null):(i=ao(r,this.kernel.read()),this.bias!=null&&(i=_s(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:Wu(this.activation),useBias:this.useBias,kernelInitializer:Yn(this.kernelInitializer),biasInitializer:Yn(this.biasInitializer),kernelRegularizer:Fn(this.kernelRegularizer),biasRegularizer:Fn(this.biasRegularizer),activityRegularizer:Fn(this.activityRegularizer),kernelConstraint:Sr(this.kernelConstraint),biasConstraint:Sr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}m5.className="Dense";je(m5);class g5 extends nn{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=gn(e);for(const n of e.slice(1))if(n==null)throw new xe(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Ou(e,1)]}call(e,n){return De(()=>{this.invokeCallHook(e,n);let r=Ot(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const a=[0];for(let i=2;i<r.rank;++i)a.push(i);a.push(1),r=cn(r,a)}return Iue(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}g5.className="Flatten";je(g5);class v5 extends nn{constructor(e){super(e),this.supportsMasking=!0,this.activation=qu(e.activation)}call(e,n){return De(()=>{this.invokeCallHook(e,n);const r=Ot(e);return this.activation.apply(r)})}getConfig(){const e={activation:Wu(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}v5.className="Activation";je(v5);class y5 extends nn{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return De(()=>(e=Ot(e),$ue(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}y5.className="RepeatVector";je(y5);class b5 extends nn{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",a=n.slice();let i=1,s=null;for(let u=0;u<a.length;++u){const l=a[u];if(this.isUnknown(l))if(s===null)s=u;else throw new xe("Can only specifiy one unknown dimension.");else i*=l}const o=Ou(e);if(s!==null){if(i===0||o%i!==0)throw new xe(r);a[s]=o/i}else if(o!==i)throw new xe(r);return a}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return De(()=>{this.invokeCallHook(e,n);const r=Ot(e),a=r.shape,i=a.slice(0,1).concat(this.fixUnknownDimension(a.slice(1),this.targetShape));return be(r,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}b5.className="Reshape";je(b5);class x5 extends nn{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=$s(1,e.dims.length+1);if(!un(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new wr({ndim:this.dims.length+1})]}computeOutputShape(e){e=gn(e);const n=e.slice();return this.dims.forEach((r,a)=>{n[a+1]=e[r]}),n}call(e,n){return cn(Ot(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}x5.className="Permute";je(x5);class w5 extends nn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Ot(e);return Ky(Yf(r,this.maskValue),-1)}call(e,n){return De(()=>{this.invokeCallHook(e,n);const r=Ot(e),s=Ky(Yf(r,this.maskValue),-1,!0);return ge(r,st(s,r.dtype))})}}w5.className="Masking";je(w5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class N5 extends nn{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Cn(e.inputLength))}this.inputDim=e.inputDim,Or(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Or(this.outputDim,"outputDim"),this.embeddingsInitializer=qn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Gn(e.embeddingsRegularizer),this.activityRegularizer=Gn(e.activityRegularizer),this.embeddingsConstraint=Cr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return De(()=>this.maskZero?(e=Ot(e),Yf(e,dn(e))):null)}computeOutputShape(e){if(e=gn(e),this.inputLength==null)return[...e,this.outputDim];const n=Cn(this.inputLength);if(n.length!==e.length-1)throw new xe(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let a=0;a<n.length;++a){const i=n[a],s=e[a+1];if(i!=null&&s!=null&&i!==s)throw new xe(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[r]=s),r++}}return[e[0],...n,this.outputDim]}call(e,n){return De(()=>{this.invokeCallHook(e,n);let r=Ot(e);r.dtype!=="int32"&&(r=ro(r,"int32"));const a=tz(this.embeddings.read(),be(r,[r.size]));return be(a,gn(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Yn(this.embeddingsInitializer),embeddingsRegularizer:Fn(this.embeddingsRegularizer),activityRegularizer:Fn(this.activityRegularizer),embeddingsConstraint:Sr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}N5.className="Embedding";je(N5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Sc extends nn{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Kt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let a=0;a<n.length;++a){const i=e[e.length-n.length+a],s=n[a];if(i==null||s==null||i<0||s<0)r.push(null);else if(i===1)r.push(s);else if(s===1)r.push(i);else{if(i!==s)throw new xe("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[gn(e)]),e=e,e.length<2)throw new xe(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=_u(n),n.length>1)throw new xe(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const s=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,s)}const a=e.map(i=>i.length);e.indexOf(null)===-1&&_u(a).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return De(()=>{if(e=e,this.reshapeRequired){const r=[],a=e.map(i=>i.rank);if(a.indexOf(null)===-1){const i=Vu(a);for(let s of e){const o=s.rank;for(let u=0;u<i-o;++u)s=zm(s,1);r.push(s)}return this.mergeFunction(r)}else{let i=!1;for(const u of e){const l=u.rank;if(l==null){const c=u.shape,f=c[0],d=c.slice(1).concat([f]);let h=be(u,[f].concat(Ou(c.slice(1))));h=cn(h,[1,0]),h=be(h,d),r.push(h),i=!0}else if(l>1){const c=$s(1,l).concat([0]);r.push(cn(u,c)),i=!0}else r.push(u)}let s=this.mergeFunction(r);const o=s.rank;if(i){if(o==null){const u=s.shape,l=u.length,c=u[l-1],f=[c].concat(u.slice(0,u.length-1));s=be(cn(be(s,[-1,c]),[1,0]),f)}else if(o>1){const u=[o-1].concat($s(0,o-1));s=cn(s,u)}}return s}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let a=1;a<e.length;++a){const i=e[a]==null?null:e[a].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=[];for(const a of e)a!=null&&a[0]!==null&&r.push(a[0]);return r=_u(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return De(()=>{if(n==null)return null;if(!Array.isArray(n))throw new xe("`mask` should be an Array");if(!Array.isArray(e))throw new xe("`inputs` should be an Array");if(n.length!==e.length)throw new xe(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(a=>a==null))return null;n=n.map(a=>a==null?a:wa(a,0));let r=n[0];for(let a=1;a<n.length-1;++a)r=so(r,n[a]);return r})}}class S5 extends Sc{constructor(e){super(e)}mergeFunction(e){return De(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=We(n,e[r]);return n})}}S5.className="Add";je(S5);class C5 extends Sc{constructor(e){super(e)}mergeFunction(e){return De(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ge(n,e[r]);return n})}}C5.className="Multiply";je(C5);class E5 extends Sc{constructor(e){super(e)}mergeFunction(e){return De(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=We(n,e[r]);return ge(1/e.length,n)})}}E5.className="Average";je(E5);class D5 extends Sc{constructor(e){super(e)}mergeFunction(e){return De(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Ko(n,e[r]);return n})}}D5.className="Maximum";je(D5);class T5 extends Sc{constructor(e){super(e)}mergeFunction(e){return De(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=oc(n,e[r]);return n})}}T5.className="Minimum";je(T5);class $5 extends Sc{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new xe("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const a of e)if(a!=null){n=!1;break}if(n)return;const r=[];for(let a=0;a<e.length;++a){const i=e[a].slice();i.splice(this.axis,1);let s=!1;for(const o of r)if(un(o,i)){s=!0;break}s||r.push(i)}if(r.length>1)throw new xe("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return De(()=>VD(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new xe("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis;for(const i of n.slice(1)){if(r[a]==null||i[a]==null){r[a]=null;break}r[a]+=i[a]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new xe("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new xe("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new xe(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return De(()=>{let r=!0;if(n.forEach(s=>{if(s!=null){r=!1;return}}),r)return null;const a=[];for(let s=0;s<e.length;++s)n[s]==null?a.push(st(Ei(e[s]),"bool")):n[s].rank<e[s].rank?a.push(wa(n[s],-1)):a.push(n[s]);const i=hr(a,this.axis);return $E(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}$5.className="Concatenate";je($5);function kp(t,e){for(;t<0;)t+=e;return t}function Zle(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Kt("batchDot is not implemented for tensors of 4D or higher rank yet");if(Y(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),Y(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Kt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,a=e.shape.length;n==null&&(n=[r-1,a-2]);const i=n;return De(()=>{let s;if(r>a){s=r-a;const u=[];for(let l=0;l<s;++l)u.push(1);e=be(e,e.shape.concat(u))}else if(a>r){s=a-r;const u=[];for(let l=0;l<s;++l)u.push(1);t=be(t,t.shape.concat(u))}else s=0;let o;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?o=pt(ge(t,e),i[0]):o=pt(ge(cn(t,[1,0]),e),i[1]);else{const u=i[0]!==t.shape.length-1,l=i[1]===e.shape.length-1;o=Jt(t,e,u,l)}if(s>0){let u;r>a?u=r+a-3:u=r-1;const l=[];for(let c=u;c<u+s;++c)l.push(c);o=xc(o,l)}return o.shape.length===1&&(o=wa(o,1)),o})}class A5 extends Sc{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){Y(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Kt("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(n,r);if(n[a[0]]!==r[a[1]])throw new xe(`Dimension incompatibility: ${n[a[0]]} !== ${r[a[1]]}`)}mergeFunction(e){if(e.length!==2)throw new xe(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],a;return Array.isArray(this.axes)?a=this.axes.map((i,s)=>kp(i,e[s].shape.length)):a=[kp(this.axes,n.shape.length),kp(this.axes,r.shape.length)],this.normalize&&(n=r0(n,a[0]),r=r0(r,a[1])),Zle(n,r,a)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[kp(this.axes,e.length),kp(this.axes,n.length)],r}computeOutputShape(e){Y(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Kt("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(n,r);n.splice(a[0],1),r.splice(a[1],1),r.splice(0,1);const i=n.concat(r);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}A5.className="Dot";je(A5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class I5 extends nn{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return De(()=>{this.invokeCallHook(e,n);const r=Ot(e);return Vm(()=>We(wb(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}I5.className="GaussianNoise";je(I5);class k5 extends nn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return De(()=>{this.invokeCallHook(e,n);const r=Ot(e);return this.rate>0&&this.rate<1?Vm(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return ge(r,wb(r.shape,1,i))},()=>r,n.training||!1):r})}}k5.className="GaussianDropout";je(k5);class _5 extends nn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Ot(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return De(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return Vm(()=>{const i=Ot(e),u=-1.6732632423543772*1.0507009873554805;let l=rl(bc(r),this.rate);l=ro(l,"float32");const c=((1-this.rate)*(1+this.rate*u**2))**-.5,f=-c*u*this.rate,d=We(ge(i,l),ge(We(l,-1),u));return We(ge(d,c),f)},()=>Ot(e),n.training||!1)}return e})}}_5.className="AlphaDropout";je(_5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mh(t,e,n,r,a,i=.001){let s;if(t.rank===2)s=JP(t,e,n,r,a,i);else if(t.rank===3)s=eB(t,e,n,r,a,i);else if(t.rank===4)s=tB(t,e,n,r,a,i);else throw new Kt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return s}function Qle(t,e,n,r,a=.001){return De(()=>{const i=ab(t,r),s=i.mean,o=i.variance;return[mh(t,s,o,n,e,a),s,o]})}function Jle(t,e,n,r,a=.001){return De(()=>{const i=ab(t,r),s=i.mean,o=i.variance,u=[];for(const m of $s(0,t.rank))r.indexOf(m)!==-1?u.push(1):u.push(t.shape[m]);const l=be(s,u),c=be(o,u),f=e==null?null:be(e,u),d=n==null?null:be(n,u);return[mh(t,l,c,d,f,a),s,o]})}function ece(t,e,n,r,a=.001){return un(r.slice().sort(),$s(0,t.rank-1))?Qle(t,e,n,r,a):Jle(t,e,n,r,a)}class O5 extends nn{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=qn(e.betaInitializer||"zeros"),this.gammaInitializer=qn(e.gammaInitializer||"ones"),this.movingMeanInitializer=qn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=qn(e.movingVarianceInitializer||"ones"),this.betaConstraint=Cr(e.betaConstraint),this.gammaConstraint=Cr(e.gammaConstraint),this.betaRegularizer=Gn(e.betaRegularizer),this.gammaRegularizer=Gn(e.gammaRegularizer)}build(e){e=gn(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new xe(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new wr({ndim:e.length,axes:{[n]:r}})];const a=[r];this.scale&&(this.gamma=this.addWeight("gamma",a,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",a,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",a,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",a,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return De(()=>{const r=n.training==null?!1:n.training,a=Ot(e),i=a.shape,s=i.length,o=$s(0,s),u=this.axis>=0?this.axis:this.axis+s;o.splice(u,1);const l=cc(1,s);l[u]=i[u];const c=o.slice();c.sort();const f=!un(c,$s(0,s).slice(0,s-1)),d=()=>{if(f){const w=be(this.movingMean.read(),l),x=be(this.movingVariance.read(),l),S=this.center?be(this.beta.read(),l):null,C=this.scale?be(this.gamma.read(),l):null;return mh(a,w,x,S,C,this.epsilon)}else return mh(a,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return d();const[h,m,v]=ece(a,this.gamma.read(),this.beta.read(),o,this.epsilon),y=(w,x,S)=>{De(()=>{const C=1-S,E=w.read(),A=ge(ct(E,x),C);w.write(ct(E,A))})};return(()=>{y(this.movingMean,m,this.momentum),y(this.movingVariance,v,this.momentum)})(),h})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Yn(this.betaInitializer),gammaInitializer:Yn(this.gammaInitializer),movingMeanInitializer:Yn(this.movingMeanInitializer),movingVarianceInitializer:Yn(this.movingVarianceInitializer),betaRegularizer:Fn(this.betaRegularizer),gammaRegularizer:Fn(this.gammaRegularizer),betaConstraint:Sr(this.betaConstraint),gammaConstraint:Sr(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}O5.className="BatchNormalization";je(O5);class F5 extends nn{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=qn(e.betaInitializer||"zeros"),this.gammaInitializer=qn(e.gammaInitializer||"ones"),this.betaRegularizer=Gn(e.betaRegularizer),this.gammaRegularizer=Gn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=gn(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==_u(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),a=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,a):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,a):this.beta=null,this.built=!0}call(e,n){const r=Ot(e),a=r.shape,i=a.length;return De(()=>{let{mean:o,variance:u}=ab(r,this.axis,!0);const l=cc(1,i);for(const v of this.axis)l[v]=a[v];const c=v=>v!=null&&v.shape.length!==i?be(v,l):v;let f=this.scale?c(this.gamma.read()):null,d=this.center?c(this.beta.read()):null;const h=[],m=[];for(let v=0;v<i;++v)this.axis.indexOf(v)!==-1?(h.push(a[v]),m.push(1)):(h.push(1),m.push(a[v]));return o=ji(o,h),u=ji(u,h),f!=null&&(f=ji(f,m)),d!=null&&(d=ji(d,m)),mh(r,o,u,d,f,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Yn(this.betaInitializer),gammaInitializer:Yn(this.gammaInitializer),betaRegularizer:Fn(this.betaRegularizer),gammaRegularizer:Fn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}F5.className="LayerNormalization";je(F5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tce(t,e,n){return De(()=>{if(t.rank!==4)throw new xe(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new xe("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=As()),n!=="channelsLast"&&n!=="channelsFirst")throw new xe(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],al(t,r)})}class R5 extends nn{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?As():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new xe(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new xe(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new xe(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new wr({ndim:4})]}computeOutputShape(e){e=gn(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return De(()=>tce(Ot(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}R5.className="ZeroPadding2D";je(R5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ab(t,e,n,r,a,i){return De(()=>{lr(a),ZL(i),Ti(r),n==null&&(n=[1,1]),r==null&&(r="valid"),a==null&&(a=As()),i==null&&(i="max"),t=tT(t,a);let s;const o=r==="same"?"same":"valid";return i==="max"?s=rb(t,e,n,o):s=K1(t,e,n,o),a==="channelsFirst"&&(s=cn(s,[0,3,1,2])),s})}function M5(t,e,n,r,a,i){return De(()=>{lr(a),ZL(i),Ti(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),a==null&&(a=As()),i==null&&(i="max"),t=Jz(t,a);let s;const o=r==="same"?"same":"valid";return i==="max"?s=EB(t,e,n,o):s=QP(t,e,n,o),a==="channelsFirst"&&(s=cn(s,[0,4,1,2,3])),s})}class P5 extends nn{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new xe(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Or(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new xe(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Or(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Ti(this.padding),this.inputSpec=[new wr({ndim:3})]}computeOutputShape(e){e=gn(e);const n=Es(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return De(()=>{this.invokeCallHook(e,n),e=zm(Ot(e),2);const r=this.poolingFunction(Ot(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return xc(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class B5 extends P5{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return lr(i),Ti(a),Ab(e,n,r,a,i,"max")}}B5.className="MaxPooling1D";je(B5);class L5 extends P5{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return lr(i),Ti(a),Ab(e,n,r,a,i,"avg")}}L5.className="AveragePooling1D";je(L5);class z5 extends nn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new xe(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Or(this.poolSize,"poolSize"),Or(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,lr(this.dataFormat),Ti(this.padding),this.inputSpec=[new wr({ndim:4})]}computeOutputShape(e){e=gn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Es(n,this.poolSize[0],this.padding,this.strides[0]),r=Es(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return De(()=>(this.invokeCallHook(e,n),this.poolingFunction(Ot(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class U5 extends z5{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return lr(i),Ti(a),Ab(e,n,r,a,i,"max")}}U5.className="MaxPooling2D";je(U5);class V5 extends z5{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return lr(i),Ti(a),Ab(e,n,r,a,i,"avg")}}V5.className="AveragePooling2D";je(V5);class W5 extends nn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new xe(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Or(this.poolSize,"poolSize"),Or(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,lr(this.dataFormat),Ti(this.padding),this.inputSpec=[new wr({ndim:5})]}computeOutputShape(e){e=gn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],a=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Es(n,this.poolSize[0],this.padding,this.strides[0]),r=Es(r,this.poolSize[1],this.padding,this.strides[1]),a=Es(a,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,a]:[e[0],n,r,a,e[4]]}call(e,n){return De(()=>(this.invokeCallHook(e,n),this.poolingFunction(Ot(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class q5 extends W5{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return lr(i),Ti(a),M5(e,n,r,a,i,"max")}}q5.className="MaxPooling3D";je(q5);class G5 extends W5{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return lr(i),Ti(a),M5(e,n,r,a,i,"avg")}}G5.className="AveragePooling3D";je(G5);class H5 extends nn{constructor(e){super(e),this.inputSpec=[new wr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Kt}}class j5 extends H5{constructor(e){super(e||{})}call(e,n){return De(()=>{const r=Ot(e);return nr(r,1)})}}j5.className="GlobalAveragePooling1D";je(j5);class X5 extends H5{constructor(e){super(e||{})}call(e,n){return De(()=>{const r=Ot(e);return Qi(r,1)})}}X5.className="GlobalMaxPooling1D";je(X5);class K5 extends nn{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,lr(this.dataFormat),this.inputSpec=[new wr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Kt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Y5 extends K5{call(e,n){return De(()=>{const r=Ot(e);return this.dataFormat==="channelsLast"?nr(r,[1,2]):nr(r,[2,3])})}}Y5.className="GlobalAveragePooling2D";je(Y5);class Z5 extends K5{call(e,n){return De(()=>{const r=Ot(e);return this.dataFormat==="channelsLast"?Qi(r,[1,2]):Qi(r,[2,3])})}}Z5.className="GlobalMaxPooling2D";je(Z5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Q5 extends nn{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const a=n.layer,i=Ro(a,r);delete n.layer;const s={layer:i};return Object.assign(s,n),new e(s)}}class J5 extends Q5{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=gn(e),e.length<3)throw new xe(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=gn(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),a=e[1];return[r[0],a].concat(r.slice(1))}call(e,n){return De(()=>(e=Ot(e),u5((s,o)=>[Ot(this.layer.call(s,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}J5.className="TimeDistributed";je(J5);function nce(t){Nc(Sue,"BidirectionalMergeMode",t)}const rce="concat";class e6 extends Q5{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Ro(r),n.goBackwards=n.goBackwards!==!0;const a={};if(a.className=e.layer.getClassName(),a.config=n,this.backwardLayer=Ro(a),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?rce:e.mergeMode,nce(this.mergeMode),e.weights)throw new Kt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,a,i;return this.returnState&&(i=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,a=[r]):this.mergeMode==null?a=[r,r.slice()]:a=[r],this.returnState?this.mergeMode==null?a.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):Fa(a)}apply(e,n){let r=n==null?null:n.initialState,a=n==null?null:n.constants;n==null&&(n={});const i=o5(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&a==null)return super.apply(e,n);const s=[],o=[];if(r!=null){const l=r.length;if(l%2>0)throw new xe("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,s.push(...r);const c=r.map(f=>new wr({shape:f.shape}));this.forwardLayer.stateSpec=c.slice(0,l/2),this.backwardLayer.stateSpec=c.slice(l/2),o.push(...c)}if(a!=null)throw new Kt("Support for constants in Bidirectional layers is not implemented yet.");const u=s[0]instanceof oo;for(const l of s)if(l instanceof oo!==u)throw new xe("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(u){const l=[e].concat(s),c=this.inputSpec.concat(o),f=this.inputSpec;this.inputSpec=c;const d=super.apply(l,n);return this.inputSpec=f,d}else return super.apply(e,n)}call(e,n){return De(()=>{const r=n.initialState;let a,i;if(r==null)a=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const u=r.slice(0,r.length/2),l=r.slice(r.length/2);a=this.forwardLayer.call(e,Object.assign(n,{initialState:u})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:l}))}let s;this.returnState&&(Array.isArray(a)&&(s=a.slice(1).concat(i.slice(1))),a=a[0],i=i[0]),this.returnSequences&&(i=ns(i,1));let o;return this.mergeMode==="concat"?o=VD([a,i]):this.mergeMode==="sum"?o=We(a,i):this.mergeMode==="ave"?o=ge(.5,We(a,i)):this.mergeMode==="mul"?o=ge(a,i):this.mergeMode==null&&(o=[a,i]),this.returnState?this.mergeMode==null?o.concat(s):[o].concat(s):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Zl(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Zl(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(s=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Ro(n.layer);if(delete n.layer,n.numConstants!=null)throw new Kt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const a=n;return a.layer=r,new e(a)}}e6.className="Bidirectional";je(e6);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class t6 extends nn{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return De(()=>(e=Ot(e),e.dtype!=="float32"&&(e=ro(e,"float32")),We(ge(e,this.scale),this.offset)))}}t6.className="Rescaling";je(t6);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:ace,cropAndResize:ice}=Qs;class n6 extends nn{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,a,i,s,o,u){return De(()=>{let l,c=!1;const f=n/s,d=r/o,h=(a+n)/s,m=(i+r)/o,v=[f,d,h,m],y=[];e.rank===3?(c=!0,l=ci([e])):l=e;for(let C=0;C<l.shape[0];C++)y.push(v);const b=Cs(y,[y.length,4]),w=Zf(0,y.length,1,"int32"),S=ice(l,b,w,[a,i],"nearest");return ro(c?Ot(rs(S)):S,u)})}upsize(e,n,r,a){return De(()=>{const i=ace(e,[n,r]);return ro(i,a)})}call(e,n){return De(()=>{const r=Ot(e),a=r.dtype,i=r.shape,s=i[i.length-3],o=i[i.length-2];let u=0;s!==this.height&&(u=Math.floor((s-this.height)/2));let l=0;return o!==this.width&&(l=Math.floor((o-this.width)/2),l===0&&(l=1)),u>=0&&l>=0?this.centerCrop(r,u,l,this.height,this.width,s,o,a):this.upsize(e,this.height,this.width,a)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=gn(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}n6.className="CenterCrop";je(n6);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sce(t,e,n,r){let a=Ot(t);if(a.dtype!=="int32"&&(a=ro(a,"int32")),e==="int")return a;const i=a.shape;if(a.rank===0&&(a=wa(a,-1)),e==="oneHot"&&a.shape[a.shape.length-1]!==1&&(a=wa(a,-1)),a.rank>2)throw new xe(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${a.rank}.`);const s=["multiHot","oneHot"].includes(e),o=a;let u;if(typeof r<"u"&&e==="count"?u=eS(o,r,n,s):u=eS(o,[],n,s),e!=="tfIdf")return u;if(r)return ge(u,r);throw new xe("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class r6 extends nn{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=gn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return De(()=>{e=Ot(e),e.dtype!=="int32"&&(e=ro(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new xe(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Ot(n.countWeights)}const a=Qi(e),i=oh(e),s=gi(this.numTokens,a).bufferSync().get(0),o=rl(i,0).bufferSync().get(0);if(!(s&&o))throw new xe(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return sce(e,this.outputMode,this.numTokens,r)})}}r6.className="CategoryEncoding";je(r6);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const oce=["bilinear","nearest"],Q_=new Set(oce);class a6 extends nn{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(Q_.has(e.interpolation))this.interpolation=e.interpolation;else throw new xe(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=gn(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return De(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Qs.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Qs.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...Q_]} are supported`)})}}a6.className="Resizing";je(a6);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class i6{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}i6.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class s6 extends nn{constructor(e){super(e),this.randomGenerator=new i6(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}s6.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const uce=["bilinear","nearest"],J_=new Set(uce);class o6 extends s6{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new xe(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new xe(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new xe(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(J_.has(r))this.interpolation=r;else throw new xe(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=gn(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return De(()=>{const r=Ot(e);this.imgHeight=r.shape[r.shape.length-3];const a=r.shape[r.shape.length-2];this.widthFactor=bc([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*a;i=Math.round(i);const s=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return Qs.resizeBilinear(e,s);case"nearest":return Qs.resizeNearestNeighbor(e,s);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...J_]} are supported`)}})}}o6.className="RandomWidth";je(o6);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var eO;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(eO||(eO={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ht(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Y(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lce=rD;class Ib extends gC{nextDataId(){return Ib.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new rP(this,Hs())}write(e,n,r){this.firstUse&&(this.firstUse=!1,Ae().get("IS_NODE")&&wi(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:r,refCount:1}),a}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&kh(r[0])){const i=r.map(s=>ku(s));a=this.write(i,e,n)}else a=this.write(r,e,n);return{dataId:a,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,a,i){this.data.set(e,{values:n,dtype:a,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return Vo(a,i)}return rY(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>Mu(a));return Qt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Qt(e.shape,e.dtype,n)}makeOutput(e,n,r){return Hs().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Oa();return e(),{kernelMs:Oa()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){ht([e],"where");const n=this.readSync(e.dataId);return lce(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Ib.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u6(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const cce=t=>{const{x:e}=t.inputs,n=t.backend;ht(e,"abs");let r=new Float32Array(Oe(e.shape));const a=n.data.get(e.dataId).values;return r=u6(a),n.makeOutput(r,e.shape,e.dtype)},fce={kernelName:G0,backendName:"cpu",kernelFunc:cce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cr(t){return(e,n,r,a,i)=>{const s=Wt(e,n),o=s.length,u=wt(s),l=Oe(s),c=Xr(i,l),f=e.length,d=n.length,h=wt(e),m=wt(n),v=Kf(e,s),y=Kf(n,s);if(v.length+y.length===0)for(let b=0;b<c.length;++b)c[b]=t(r[b%r.length],a[b%a.length]);else for(let b=0;b<c.length;++b){const w=gd(b,o,u),x=w.slice(-f);v.forEach(A=>x[A]=0);const S=eo(x,f,h),C=w.slice(-d);y.forEach(A=>C[A]=0);const E=eo(C,d,m);c[b]=t(r[S],a[E])}return[c,s]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ri(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),u=n.data.get(o.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",s)},o}const dce={kernelName:DC,backendName:"cpu",kernelFunc:ri};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u0(t,e,n="float32"){if(n==="complex64"){const a=u0(t,e,"float32"),i=u0(t,e,"float32");return ri({inputs:{real:a,imag:i},backend:t})}const r=oa(Oe(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uo(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const pce={kernelName:Qh,backendName:"cpu",kernelFunc:uo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fc(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const hce={kernelName:aE,backendName:"cpu",kernelFunc:fc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l6(t,e,n,r){if(r==="int32"){const a=Int32Array.from(t);return[e,"int32",a]}if(r==="bool"){const a=vc([0],n),[i,s]=cr((o,u)=>o!==u?1:0)(e,[],t,a,"bool");return[s,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Hu(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return uo({inputs:{x:a},backend:n});const c=u0(n,a.shape,a.dtype),f=Hu({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),d=ri({inputs:{real:f,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),d}if(a.dtype==="complex64"){const c=fc({inputs:{input:a},backend:n}),f=Hu({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),f}if(!iP(a.dtype,i)){const c=uo({inputs:{x:a},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:i}}const s=n.data.get(a.dataId).values,[o,u,l]=l6(s,a.shape,a.dtype,i);return n.makeTensorInfo(o,u,l)}const mce={kernelName:Lh,backendName:"cpu",kernelFunc:Hu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dr(t,e,n,r){return n==null?({inputs:a,backend:i})=>{const{a:s,b:o}=a,u=i;ht([s,o],t);const l=u.data.get(s.dataId).values,c=u.data.get(o.dataId).values,f=s.dtype==="string"?Wo(l):l,d=s.dtype==="string"?Wo(c):c,h=r||s.dtype,[m,v]=e(s.shape,o.shape,f,d,h);return u.makeTensorInfo(v,h,m)}:({inputs:a,backend:i})=>{const{a:s,b:o}=a,u=i;if(s.dtype==="complex64"||o.dtype==="complex64"){const l=Hu({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),c=u.data.get(l.dataId),f=c.complexTensorInfos.real,d=c.complexTensorInfos.imag,h=u.data.get(f.dataId).values,m=u.data.get(d.dataId).values,v=Hu({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),y=u.data.get(v.dataId),b=y.complexTensorInfos.real,w=y.complexTensorInfos.imag,x=u.data.get(b.dataId).values,S=u.data.get(w.dataId).values,[C,E,A]=n(s.shape,o.shape,h,m,x,S),k=u.makeTensorInfo(A,"float32",C),T=u.makeTensorInfo(A,"float32",E),I=ri({inputs:{real:k,imag:T},backend:u});return u.disposeIntermediateTensorInfo(l),u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(k),u.disposeIntermediateTensorInfo(T),I}else{const l=u.data.get(s.dataId).values,c=u.data.get(o.dataId).values,f=r||s.dtype,[d,h]=e(s.shape,o.shape,l,c,f);return u.makeTensorInfo(h,f,d)}}}function oT(t){return(e,n,r,a,i,s)=>{const o=Wt(e,n),u=Oe(o),l=o.length,c=wt(o),f=Xr("float32",u),d=Xr("float32",u),h=Kf(e,o),m=Kf(n,o),v=Vo(r,a),y=Vo(i,s),b=e.length,w=wt(e),x=n.length,S=wt(n);if(h.length+m.length===0)for(let C=0;C<f.length;C++){const E=C%v.length,A=C%y.length,k=t(v[E*2],v[E*2+1],y[A*2],y[A*2+1]);f[C]=k.real,d[C]=k.imag}else for(let C=0;C<f.length;C++){const E=gd(C,l,c),A=E.slice(-b);h.forEach(O=>A[O]=0);const k=eo(A,b,w),T=E.slice(-x);m.forEach(O=>T[O]=0);const I=eo(T,x,S),$=t(v[k*2],v[k*2+1],y[I*2],y[I*2+1]);f[C]=$.real,d[C]=$.imag}return[f,d,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c6=cr((t,e)=>t+e),gce=oT((t,e,n,r)=>({real:t+n,imag:e+r})),Jf=Dr(vd,c6,gce),vce={kernelName:vd,backendName:"cpu",kernelFunc:Jf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uT(t,e,n,r,a){const i=Oe(r),s=oa(a,n);for(let o=0;o<t.length;o++){const u=t[o];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(i>0?s[u]+=e[o]:s[u]+=1)}return s}function f6(t,e,n,r=!1){const a=t.shape[0],i=t.shape[1],s=Qt([a,n],e.dtype);for(let o=0;o<a;o++)for(let u=0;u<i;u++){const l=t.get(o,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?s.set(1,o,l):e.size>0?s.set(s.get(o,l)+e.get(o,u),o,l):s.set(s.get(o,l)+1,o,l))}return s}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d6=cr((t,e)=>t&e),yce=Dr(J0,d6),bce={kernelName:J0,backendName:"cpu",kernelFunc:yce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fo(t){return(e,n,r)=>{const a=sr(n,e.length);for(let i=0;i<e.length;++i)a[i]=t(e[i],r);return a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tn(t,e,n){const r=fo(e);return ol(t,r,n)}function ol(t,e,n){return({inputs:r,attrs:a,backend:i})=>{const{x:s}=r;ht(s,t);const o=i,u=o.data.get(s.dataId).values;let l;if(s.dtype==="string"){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");l=Wo(u)}else l=u;const c=n||s.dtype,f=e(l,c,a);return o.makeTensorInfo(s.shape,c,f)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p6=fo(t=>Math.ceil(t)),xce=ol(zh,p6),wce={kernelName:zh,backendName:"cpu",kernelFunc:xce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h6(t,e,n,r){const a=sr(n,Oe(e));if(r&&n!=="string"){let i=0;t.forEach(s=>{const o=Oe(s.shape);a.set(s.vals,i),i+=o})}else{let i=0;t.forEach(s=>{const o=n==="string"?Wo(s.vals):s.vals;let u=0;for(let l=0;l<s.shape[0];++l){const c=l*e[1]+i;for(let f=0;f<s.shape[1];++f)a[c+f]=o[u++]}i+=s.shape[1]})}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m6=cr((t,e)=>t===e?1:0),g6=Dr(u1,m6,null,"bool"),Nce={kernelName:u1,backendName:"cpu",kernelFunc:g6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v6=fo(t=>Math.exp(t)),y6=ol(jh,v6,"float32"),Sce={kernelName:jh,backendName:"cpu",kernelFunc:y6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b6=fo(t=>Math.expm1(t)),Cce=ol(Xh,b6),Ece={kernelName:Xh,backendName:"cpu",kernelFunc:Cce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x6=fo(t=>Math.floor(t)),Dce=ol(Kh,x6),Tce={kernelName:Kh,backendName:"cpu",kernelFunc:Dce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w6=cr((t,e)=>Math.floor(t/e)),$ce=Dr(Yh,w6,null,"int32"),Ace={kernelName:Yh,backendName:"cpu",kernelFunc:$ce};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N6(t,e,n,r,a,i,s,o,u){const l=Qt([r,i],n);for(let c=0;c<r;c++){const f=[];let d=0;for(let h=0;h<a;h++){const m=t[c*a+h];d+=m*s[h],f.push(m)}if(d<0||d>=u/i)throw new Error(`Invalid indices: ${f} does not index into ${o}`);for(let h=0;h<i;h++)l.values[c*i+h]=e.get(...e.indexToLoc(d*i+h))}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S6(t,e,n){const r=Qt(n,t.dtype);for(let a=0;a<r.size;++a){const s=r.indexToLoc(a).slice(),o=s[0],u=s[2],l=e.locToIndex([o,u]);s[2]=e.values[l];const c=t.locToIndex(s);0<=c&&c<t.values.length&&(r.values[a]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C6=cr((t,e)=>t>e?1:0),Ice=Dr(d1,C6,null,"bool"),kce={kernelName:d1,backendName:"cpu",kernelFunc:Ice};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E6=cr((t,e)=>t>=e?1:0),_ce=Dr(Zh,E6,null,"bool"),Oce={kernelName:Zh,backendName:"cpu",kernelFunc:_ce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D6=cr((t,e)=>t<e?1:0),Fce=Dr(h1,D6,null,"bool"),Rce={kernelName:h1,backendName:"cpu",kernelFunc:Fce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T6=cr((t,e)=>t<=e?1:0),Mce=Dr(m1,T6,null,"bool"),Pce={kernelName:m1,backendName:"cpu",kernelFunc:Mce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $6(t,e,n){const r=(e-t)/(n-1),a=oa(n,"float32");a[0]=t;for(let i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A6=fo(t=>Math.log(t)),Bce=ol(nm,A6),Lce={kernelName:nm,backendName:"cpu",kernelFunc:Bce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I6(t,e,n,r){const a=Xr(r,Oe(n));for(let i=0;i<a.length;++i){const s=i*e;let o=t[s];for(let u=0;u<e;++u){const l=t[s+u];(Number.isNaN(l)||l>o)&&(o=l)}a[i]=o}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k6=cr((t,e)=>Math.max(t,e)),zce=Dr(am,k6),Uce={kernelName:am,backendName:"cpu",kernelFunc:zce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _6=cr((t,e)=>Math.min(t,e)),Vce=Dr(im,_6),Wce={kernelName:im,backendName:"cpu",kernelFunc:Vce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lT=cr((t,e)=>t*e),qce=oT((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),kb=Dr(om,lT,qce),Gce={kernelName:om,backendName:"cpu",kernelFunc:kb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O6(t,e,n){const r=Qu(-1,n);return lT([],e,r,t,n)}function Hce(t){const{inputs:e,backend:n}=t,{x:r}=e;ht(r,"neg");const a=n.data.get(r.dataId).values,[i,s]=O6(a,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,i)}const jce={kernelName:D1,backendName:"cpu",kernelFunc:Hce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F6=cr((t,e)=>t!==e?1:0),Xce=Dr(T1,F6,null,"bool"),Kce={kernelName:T1,backendName:"cpu",kernelFunc:Xce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cT(t,e,n,r,a){const i=e.length,s=Oe(e),o=wt(e),u=wt(a),l=Xr(n,Oe(a));for(let c=0;c<s;++c){const f=gd(c,i,o),d=new Array(f.length);for(let m=0;m<d.length;m++)d[m]=f[r[m]];const h=eo(d,i,u);l[h]=t[c]}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ua(t){const{inputs:e,attrs:n,backend:r}=t,{x:a}=e,{perm:i}=n;ht(a,"transpose");const s=a.shape.length,o=new Array(s);for(let f=0;f<o.length;f++)o[f]=a.shape[i[f]];const u=r.data.get(a.dataId).values,l=cT(u,a.shape,a.dtype,i,o);return{dataId:r.write(l,o,a.dtype),shape:o,dtype:a.dtype}}const Yce={kernelName:kf,backendName:"cpu",kernelFunc:Ua};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R6(t,e,n,r){const[a,i]=Mr(t,r),s=oi(e,"int32"),o=oa(Oe(a),s),u=Oe(i);for(let l=0;l<o.length;++l){const c=l*u;let f=1;for(let d=0;d<u;++d)f*=n[c+d];o[l]=f}return{outVals:o,outShape:a,outDtype:s}}function Zce(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;ht(a,"prod");const o=a.shape.length,u=tn(i,a.shape),l=Zn(u,o);let c=u,f=a;const d=[];l!=null&&(f=Ua({inputs:{x:a},backend:n,attrs:{perm:l}}),d.push(f),c=ur(c.length,o));const h=n.data.get(f.dataId).values,{outVals:m,outShape:v,outDtype:y}=R6(f.shape,f.dtype,h,c);let b=v;return s&&(b=or(v,u)),d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(b,y,m)}const Qce={kernelName:O1,backendName:"cpu",kernelFunc:Zce};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jce(t,e,n){t.forEach((r,a)=>{if(r<0||r>=n){const i=gd(a,e.length,wt(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function efe(t,e){for(let n=0;n<t.length;++n){const r=t[n],a=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function tfe(t,e,n,r){const a=[];let i=0;const s=e.length-1+n.length,o=new Array(s).fill(null).map(()=>[0]);efe(n,r);let u=1;for(let l=0;l<e.length-1;++l){u*=e[l];const c=e[l+1];for(let f=1;f<u+1;++f)o[l].push(f*c)}for(let l=0;l<t.length;++l){let c=t[l],f=t[l]+1;for(let d=0;d<n.length;++d){const h=n[d],m=d+e.length-1;if(m>=0){const v=o[m],y=v[v.length-1]-h[c];for(let b=c;b<f;++b)o[m].push(h[b+1]+y)}c=h[c],f=h[f]}f!==c&&(a.push([c,f]),i+=f-c)}return{outSplits:o,valueSlices:a,numValues:i}}function nfe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,a=sr("int32",r);e.push(a),t[n].forEach((i,s)=>a[s]=i)}return e}function tO(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function rfe(t,e,n,r,a,i){const s=tO(e,2)[1],o=tO(i,2)[1];let u=0;for(const l of n)for(let c=l[0];c<l[1];++c){for(let f=0;f<r;++f)a[u*o+f]=t[c*s+f];++u}}function afe(t,e,n,r,a){const i=e.slice();i[0]=a;const s=sr(n,Oe(i)),o=t.length,u=o===0?0:o/e[0];return rfe(t,e,r,u,s,i),[s,i]}function M6(t,e,n,r,a,i,s,o){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const u=e[0][0]-1;if(Jce(i,s,u),r.length===0)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:f,numValues:d}=tfe(i,s,t,l),h=nfe(c),m=afe(n,r,a,f,d);return[h,m[0],m[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nO=2147483647;function P6(t,e,n,r,a,i,s){if(e.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");const o=e.length===0,u=a.length===0,l=s.length===0,c=[];o||c.push(e[0]),u||c.push(a[0]),l||c.push(s[0]);for(let y=1;y<c.length;++y)if(c[y]!==c[y-1])throw new Error("starts, limits, and deltas must have the same shape");const f=c.length===0?1:c[0],d=sr("int32",f+1);d[0]=0;for(let y=0;y<f;++y){const b=o?t[0]:t[y],w=u?r[0]:r[y],x=l?i[0]:i[y];if(x===0)throw new Error("Requires delta != 0");let S;if(x>0&&w<b||x<0&&w>b)S=0;else if(S=Math.ceil(Math.abs((w-b)/x)),S>nO)throw new Error(`Requires ((limit - start) / delta) <= ${nO}`);d[y+1]=d[y]+S}const h=d[f],m=sr(n,h);let v=0;for(let y=0;y<f;++y){const b=d[y+1]-d[y];let w=o?t[0]:t[y];const x=l?i[0]:i[y];for(let S=0;S<b;++S)m[v++]=w,w+=x}return[d,m]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Pi=ws;class l0{constructor(e,n,r,a,i,s,o,u,l,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=s,this.defaultValueShape=o,this.rowPartitionValues=u,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=yL(c),this.raggedRank=bL(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Pi.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Pi.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Pi.VALUE_ROWIDS:return l0.getMaxWidthValueRowID(n);case Pi.ROW_SPLITS:return l0.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Pi[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let a=0;a<n-1;++a){const i=e[a+1]-e[a];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,a=e[0],i=0;for(let s=1;s<n;++s){const o=e[s];o!==a&&(a=o,i=Math.max(s-r,i),r=s)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return aO(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;xL(r,n);const a=this.tensorShapeFromTensor(this.shape,this.shapeShape),s=vL(this.raggedRank,a,n);s[0]<0&&(s[0]=e);for(let o=1;o<=this.raggedRank;++o)s[o]<0&&(s[o]=this.getMaxWidth(o));return s}calculateFirstParentOutputIndex(e,n,r){const a=Math.min(e,r),i=[];let s=0;for(let o=0;o<a;++o,s+=n)i.push(s);for(let o=a;o<e;++o)i.push(-1);return Y(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,a){const i=e.length,s=[];for(let o=0;o<i-1;++o){const u=e[o+1]-e[o];let l=Math.min(a,u),c=n[o];c===-1&&(l=0);for(let f=0;f<l;++f)s.push(c),c+=r;for(let f=0;f<u-l;++f)s.push(-1)}if(i>0&&s.length!==e[i-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(e,n,r,a){const i=e.length,s=[];if(i===0)return[];let o=0,u=e[0];if(u>=n.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${n.length}`);let l=n[u];s.push(l);for(let c=1;c<i;++c){const f=e[c];if(f===u)l>=0&&(++o,o<a?l+=r:l=-1);else{if(o=0,u=f,f>=n.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${n.length}`);l=n[f]}s.push(l)}if(s.length!==e.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(e,n,r,a){const i=this.getRowPartitionTensor(e),s=this.getRowPartitionTypeByDimension(e);switch(s){case Pi.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,a);case Pi.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,a);default:throw new Error(`Unsupported partition type: ${Pi[s]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Pi.FIRST_DIM_SIZE:return e[0];case Pi.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Pi.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Pi[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),a=new Array(this.raggedRank+1);a[a.length-1]=1;for(let u=a.length-2;u>=0;--u)a[u]=a[u+1]*r[u+1];const i=aO(r,!1),s=sr(this.valuesDType,Oe(i));if(a[0]*r[0]>0){let u=this.calculateFirstParentOutputIndex(n,a[0],r[0]);for(let l=1;l<=this.raggedRank;++l)u=this.calculateOutputIndex(l-1,u,a[l],r[l]);this.setOutput(this.raggedRank,u,s,i)}return[i,s]}setOutput(e,n,r,a){if(r.length===0)return;const i=this.values,s=r;let o=a.slice();o=o.slice(e+1);const u=Oe(o),l=n.length;let c=this.defaultValue;if(c.length!==u&&c.length!==1){const m=this.defaultValueShape;De(()=>{const v=be(c,m);c=Ff(v,o).dataSync()})}let f=0,d=0,h=0;for(let m=0;m<=l;++m){let v=m<l?n[m]:-1;if(v===h){++h;continue}if(d<h){const y=i.subarray(f*u),b=s.subarray(d*u),w=(h-d)*u;rO(b,y,w)}if(m>=l){const y=r.length;v=Math.floor(y/u)}if(v>h)if(this.defaultValue.length===1)s.subarray(h*u,v*u).fill(this.defaultValue[0]),h=v;else for(;v>h;){const y=s.slice(h*u);rO(y,c,u),++h}v<0?(f=m+1,d=h):(f=m,d=h,h=d+1)}}}function rO(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function aO(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function B6(t,e,n,r,a,i,s,o,u,l){return new l0(t,e,n,r,a,i,s,o,u,l).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L6(t,e,n,r){const a=t===e,i=t<e&&n<0,s=e<t&&n>1;if(a||i||s)return oa(0,r);const o=Math.abs(Math.ceil((e-t)/n)),u=oa(o,r);e<t&&n===1&&(n=-1),u[0]=t;for(let l=1;l<u.length;l++)u[l]=u[l-1]+n;return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z6=fo(t=>1/Math.sqrt(t)),ife=ol(pm,z6),sfe={kernelName:pm,backendName:"cpu",kernelFunc:ife};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jl(t,e,n,r,a,i,s,o,u,l){const c=[r/a,a],f=t.values,d=e.values;if(r===0)return Qt(n,e.dtype);const h=u instanceof Nr?u:Qt(c,e.dtype);typeof u=="string"||typeof u=="number"?h.values.fill(u):typeof u=="boolean"&&h.values.fill(+u);for(let m=0;m<i;m++){const v=[];let y=0;for(let b=0;b<s;b++){const w=f[m*s+b];v.push(w),y+=w*o[b]}if(y<0||y>=r/a)throw new Error(`Invalid indices: ${v} does not index into ${n}`);for(let b=0;b<a;b++)l?h.values[y*a+b]+=d[m*a+b]:h.values[y*a+b]=e.rank===0?d[0]:d[m*a+b]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ofe=fo(t=>1/(1+Math.exp(-t))),U6=Tn(ym,t=>1/(1+Math.exp(-t))),ufe={kernelName:ym,backendName:"cpu",kernelFunc:U6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V6(t,e,n,r,a){const i=gD(r,e,n),s=Oe(n),o=wt(r);if(i){const f=vD(e,o);return a==="string"?t.slice(f,f+s):t.subarray(f,f+s)}const u=a==="string"?Wo(t):t,l=Qt(r,a,u),c=Qt(n,a);for(let f=0;f<c.size;++f){const d=c.indexToLoc(f),h=d.map((m,v)=>m+e[v]);c.set(l.get(...h),...d)}return a==="string"?zL(c.values):c.values}function dc(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:s}=r;ht(a,"slice");const[o,u]=gb(a,i,s);hD(a,o,u);const l=n.data.get(a.dataId).values,c=V6(l,o,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,c)}const lfe={kernelName:L1,backendName:"cpu",kernelFunc:dc};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W6(t,e,n,r,a,i,s){const o=e[0],u=i[0],l=new Array(u),c=new Array(o),f=e[1];if(u===0){if(o!==0)throw new Error(TL(o));const y=sr(n,0),b=sr(a,0);return[y,[0,f],b,l,c]}let d=!0,h=0;const m=new Array(u).fill(0);for(let y=0;y<o;++y){const b=t[y*f];if(b<0)throw new Error($L(y,b));if(b>=u)throw new Error(AL(y,b,u));++m[b],d=d&&b>=h,h=b}let v=!0;for(let y=0;y<u;++y){const b=m[y]===0;l[y]=b,v=v&&!b,m[y]=Math.max(m[y],1),y>0&&(m[y]+=m[y-1])}if(v&&d){const y=t,b=r;for(let w=0;w<o;++w)c[w]=w;return[y,[o,f],b,l,c]}else{const y=m[u-1],b=sr(n,y*f),w=sr(a,y),x=new Array(u).fill(0);for(let S=0;S<o;++S){const C=t[S*f],E=x[C],A=(C===0?0:m[C-1])+E;x[C]++;for(let k=0;k<f;++k)b[A*f+k]=t[S*f+k];w[A]=r[S],c[S]=A}for(let S=0;S<u;++S)if(x[S]===0){const E=S===0?0:m[S-1];b[E*f+0]=S;for(let A=1;A<f;++A)b[E*f+A]=0;w[E]=s}return[b,[y,f],w,l,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q6(t,e,n,r,a){const i=Oe(r),s=e[0],o=a.length,u=[];let l=1,c=-1;for(let y=0;y<o;++y){const b=a[y];if(b===-1){if(c!==-1)throw new Error(IL(c,y));c=y,u.push(1)}else{if(b<0)throw new Error(kL(y,b));l*=b,u.push(b)}}if(c!==-1){if(l<=0)throw new Error(_L());const y=Math.trunc(i/l);if(l*y!==i)throw new Error(OL(r,u));u[c]=y}if(Oe(u)!==i)throw new Error(FL(r,u));const d=r.length,h=[];if(d>0){h[d-1]=1;for(let y=d-2;y>=0;--y)h[y]=h[y+1]*r[y+1]}const m=[];if(o>0){m[o-1]=1;for(let y=o-2;y>=0;--y)m[y]=m[y+1]*u[y+1]}const v=sr(n,s*o);for(let y=0;y<s;++y){let b=0;for(let w=0;w<d;++w)b+=t[y*d+w]*h[w];for(let w=0;w<o;++w)v[y*o+w]=Math.trunc(b/m[w]),b%=m[w]}return[v,[s,o],u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fT(t,e,n,r,a,i=!1,s=0){const o=r.length,u=[e[0],t.length/e[0]],l=u[1],f=o>0?a[o-1]+1:0;if(f<0)throw new Error(aS());const d=e.slice();d[0]=f;const h=d.reduce((x,S)=>x*S,1),m=sr(n,h);if(o===0)return f>0&&m.fill(s),[m,d];if(f<=0)throw new Error(aS());let v=0,y=1,b=0,w=a[v];for(;;){let x=0;if(y<o){if(x=a[y],w===x){++y;continue}if(w>=x)throw new Error(RL())}if(w<0||w>=f)throw new Error(ML(w,f));w>b&&m.fill(s,b*l,w*l);for(let S=v;S<y;++S){const C=r[S];if(C<0||C>=u[0])throw new Error(PL(S,r[S],u[0]));for(let E=0;E<l;E++)m[w*l+E]+=t[C*l+E]}if(i)for(let S=0;S<l;S++)m[w*l+S]/=y-v;if(v=y,++y,b=w+1,w=x,y>o)break}return b<f&&m.fill(s,b*l,f*l),[m,d]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cfe=fo(t=>Math.sqrt(t)),ffe=Tn(xm,t=>Math.sqrt(t)),dfe={kernelName:xm,backendName:"cpu",kernelFunc:ffe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G6=cr((t,e)=>{const n=t-e;return n*n}),pfe=Dr(wm,G6),hfe={kernelName:wm,backendName:"cpu",kernelFunc:pfe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H6=fo((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:a}=e;return t.replace(new RegExp(n,r?"g":""),a)}),mfe=ol(q1,H6),gfe={kernelName:q1,backendName:"cpu",kernelFunc:mfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j6(t,e,n,r){const a=Qt(t,e.dtype);for(let i=0;i<a.size;i++){const s=a.indexToLoc(i),o=new Array(s.length);for(let u=0;u<o.length;u++)o[u]=s[u]*n[u]+r[u];a.set(e.get(...o),...s)}return a}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vfe{constructor(e,n,r,a,i,s){this.separator=ku(e),this.nGramWidths=n,this.leftPad=ku(r),this.rightPad=ku(a),this.padWidth=i,this.preserveShort=s}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,a,i,s){for(let o=0;o<i;++o){const u=this.getPadWidth(s),l=Math.max(0,u-o),c=Math.max(0,u-(i-(o+1))),f=s-(l+c),d=n+(l>0?0:o-u);let h=0;h+=l*this.leftPad.length;for(let w=0;w<f;++w)h+=e[d+w].length;h+=c*this.rightPad.length;const m=l+c+f-1;h+=m*this.separator.length,r[a+o]=new Uint8Array(h);const v=r[a+o];let y=0;const b=w=>w.forEach(x=>v[y++]=x);for(let w=0;w<l;++w)b(this.leftPad),b(this.separator);for(let w=0;w<f-1;++w)b(e[d+w]),b(this.separator);if(f>0){b(e[d+f-1]);for(let w=0;w<c;++w)b(this.separator),b(this.rightPad)}else{for(let w=0;w<c-1;++w)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(e,n){const r=e.length,a=n.length;if(a>0){let u=n[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let l=1;l<a;++l){let c=n[l]>=u;if(c=c&&n[l]<=r,!c)throw new Error(`Invalid split value ${n[l]}, must be in [${u}, ${r}]`);u=n[l]}if(u!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${u}`)}const i=a-1,s=sr("int32",a);if(r===0||a===0){const u=new Array(r);for(let l=0;l<=i;++l)s[l]=0;return[u,s]}s[0]=0;for(let u=1;u<=i;++u){const l=n[u]-n[u-1];let c=0;this.nGramWidths.forEach(f=>{c+=this.getNumNGrams(l,f)}),this.preserveShort&&l>0&&c===0&&(c=1),s[u]=s[u-1]+c}const o=new Array(s[i]);for(let u=0;u<i;++u){const l=n[u];let c=s[u];if(this.nGramWidths.forEach(f=>{const d=n[u+1]-n[u],h=this.getNumNGrams(d,f);this.createNGrams(e,l,o,c,h,f),c+=h}),this.preserveShort&&c===s[u]){const f=n[u+1]-n[u];if(f===0)continue;const d=f+2*this.padWidth;this.createNGrams(e,l,o,c,1,d)}}return[o,s]}}function X6(t,e,n,r,a,i,s,o){return new vfe(n,r,a,i,s,o).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yfe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let s=t.indexOf(i);for(;s!==-1;){const o=t.subarray(0,s);(!n||o.length!==0)&&r.push(o),t=t.subarray(s+1),s=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let a=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const s=t.subarray(a,i);(!n||s.length!==0)&&r.push(s),a=i+1}}function K6(t,e,n){const r=t.length,a=[];let i=0,s=0;const o=new Array(r);for(let d=0;d<r;++d){const h=a.length;yfe(t[d],e,n,a);const m=a.length-h;o[d]=m,i+=m,s=Math.max(s,m)}const u=sr("int32",i*2),l=new Array(i),c=[r,s];let f=0;for(let d=0;d<r;++d)for(let h=0;h<o[d];++h)u[f*2]=d,u[f*2+1]=h,l[f]=a[f],++f;return[u,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y6(t,e){const n=sr("int32",t.length);for(let r=0;r<t.length;++r)n[r]=NY(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z6=cr((t,e)=>t-e),bfe=oT((t,e,n,r)=>({real:t-n,imag:e-r})),dT=Dr(Nm,Z6,bfe),xfe={kernelName:Nm,backendName:"cpu",kernelFunc:dT};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q6(t,e){const n=new Array(t.rank);for(let a=0;a<n.length;a++)n[a]=t.shape[a]*e[a];const r=Qt(n,t.dtype);for(let a=0;a<r.values.length;++a){const i=r.indexToLoc(a),s=new Array(t.rank);for(let u=0;u<s.length;u++)s[u]=i[u]%t.shape[u];const o=t.locToIndex(s);r.values[a]=t.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lp=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function J6(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,u=e-n+1,l=Math.log(o),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(o-c)/o)*Math.sign(u-o/2),d=Math.max(n,Math.floor(e-u*c/o+f)),h=Math.min(r,Math.floor(e+(o-u)*c/o+f));J6(t,e,d,h)}const a=t[e];let i=n,s=r;for(xf(t,n,e),Lp(t[r],a)>0&&xf(t,n,r);i<s;){for(xf(t,i,s),i++,s--;Lp(t[i],a)<0;)i=i+1;for(;Lp(t[s],a)>0;)s=s-1}Lp(t[n],a)===0?xf(t,n,s):(s=s+1,xf(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}}function e8(t,e,n,r,a){const i=e[e.length-1],[s,o]=[t.length/i,i],u=Xr(n,s*r),l=Xr("int32",s*r);for(let f=0;f<s;f++){const d=f*o,h=t.subarray(d,d+o);let m=new Array(h.length);h.forEach((w,x)=>m[x]={value:w,index:x}),r<m.length&&(J6(m,r),m=m.slice(0,r)),a&&m.sort(Lp);const v=f*r,y=u.subarray(v,v+r),b=l.subarray(v,v+r);for(let w=0;w<r;w++)y[w]=m[w].value,b[w]=m[w].index}const c=e.slice();return c[c.length-1]=r,[Qt(c,n,u),Qt(c,"int32",l)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t8(t,e,n,r){const a=tn(e,n)[0],i=[1,n[0],1];for(let m=0;m<a;m++)i[0]*=n[m];i[1]=n[a];for(let m=a+1;m<n.length;m++)i[2]*=n[m];const s=new Map,o=new Int32Array(n[a]),u=new Nr(i,r,t),l=[],c=i[0]===1&&i[2]===1;for(let m=0;m<n[a];m++){let v;if(c)v=t[m].toString();else{const b=[];for(let w=0;w<i[0];w++)for(let x=0;x<i[2];x++)b.push(u.get(w,m,x));v=b.join(",")}const y=s.get(v);if(y!=null)o[m]=y;else{const b=s.size;s.set(v,b),o[m]=b,l.push(m)}}const f=i.slice();f[1]=s.size;const d=new Nr(f,r);l.forEach((m,v)=>{for(let y=0;y<i[0];y++)for(let b=0;b<i[2];b++)d.set(u.get(y,m,b),y,v,b)});const h=n.slice();return h[a]=f[1],{outputValues:d.values,outputShape:h,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wfe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:c6,bincountImpl:uT,bincountReduceImpl:f6,bitwiseAndImpl:d6,castImpl:l6,ceilImpl:p6,concatImpl:h6,equalImpl:m6,expImpl:v6,expm1Impl:b6,floorDivImpl:w6,floorImpl:x6,gatherNdImpl:N6,gatherV2Impl:S6,greaterEqualImpl:E6,greaterImpl:C6,lessEqualImpl:T6,lessImpl:D6,linSpaceImpl:$6,logImpl:A6,maxImpl:I6,maximumImpl:k6,minimumImpl:_6,multiplyImpl:lT,negImpl:O6,notEqualImpl:F6,prodImpl:R6,raggedGatherImpl:M6,raggedRangeImpl:P6,raggedTensorToTensorImpl:B6,rangeImpl:L6,rsqrtImpl:z6,scatterImpl:jl,sigmoidImpl:ofe,simpleAbsImpl:u6,sliceImpl:V6,sparseFillEmptyRowsImpl:W6,sparseReshapeImpl:q6,sparseSegmentReductionImpl:fT,sqrtImpl:cfe,squaredDifferenceImpl:G6,staticRegexReplaceImpl:H6,stridedSliceImpl:j6,stringNGramsImpl:X6,stringSplitImpl:K6,stringToHashBucketFastImpl:Y6,subImpl:Z6,tileImpl:Q6,topKImpl:e8,transposeImpl:cT,uniqueImpl:t8},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */TP("cpu",()=>new Ib,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n8=Tn(Gh,t=>t>=0?t:Math.exp(t)-1),Nfe={kernelName:Gh,backendName:"cpu",kernelFunc:n8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r8(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r;ht([a],"leakyRelu");const s=Oe(a.shape),o=n.data.get(a.dataId).values,u=Xr("float32",s);for(let l=0;l<o.length;l++)u[l]=o[l]<0?i*o[l]:o[l];return n.makeTensorInfo(a.shape,"float32",u)}const Sfe={kernelName:p1,backendName:"cpu",kernelFunc:r8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cfe=cr((t,e)=>t<0?e*t:t);function a8(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e;ht([r,a],"prelu");const i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,[o,u]=Cfe(r.shape,a.shape,i,s,"float32");return n.makeTensorInfo(u,"float32",o)}const Efe={kernelName:_1,backendName:"cpu",kernelFunc:a8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i8=Tn(cm,t=>Math.max(0,t)),Dfe={kernelName:cm,backendName:"cpu",kernelFunc:i8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s8=Tn(fm,t=>Math.min(Math.max(0,t),6)),Tfe={kernelName:fm,backendName:"cpu",kernelFunc:s8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c0(t,e,n,r,a){if(n==="linear")return uo({inputs:{x:e},backend:t});if(n==="relu")return i8({inputs:{x:e},backend:t});if(n==="elu")return n8({inputs:{x:e},backend:t});if(n==="relu6")return s8({inputs:{x:e},backend:t});if(n==="prelu")return a8({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return r8({inputs:{x:e},backend:t,attrs:{alpha:a}});if(n==="sigmoid")return U6({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ln(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,s=Oe(a.shape),o=aP(i,s),u=Oe(o);Y(s===u,()=>`The new shape (${o}) has ${u} elements and the old shape (${a.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);const l=n.data.get(a.dataId);if(l.complexTensorInfos!=null){const c=l.complexTensorInfos.real,f=l.complexTensorInfos.imag;c.shape=o,f.shape=o}return{dataId:a.dataId,shape:o,dtype:a.dtype}}const $fe={kernelName:F1,backendName:"cpu",kernelFunc:Ln};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o8(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:s,transposeB:o}=r;ht([a,i],"matMul");const u=a.shape.length,l=i.shape.length,c=s?a.shape[u-2]:a.shape[u-1],f=o?i.shape[l-1]:i.shape[l-2],d=s?a.shape[u-1]:a.shape[u-2],h=o?i.shape[l-2]:i.shape[l-1],m=a.shape.slice(0,-2),v=i.shape.slice(0,-2),y=Oe(m),b=Oe(v),x=Wt(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([d,h]);Y(c===f,()=>`Error in matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${a.shape} and ${i.shape} and transposeA=${s} and transposeB=${o} must match.`);const S=s?[y,c,d]:[y,d,c],C=o?[b,h,f]:[b,f,h],E=Ln({inputs:{x:a},backend:n,attrs:{shape:S}}),A=Ln({inputs:{x:i},backend:n,attrs:{shape:C}}),k=s?E.shape[1]:E.shape[2],T=s?E.shape[2]:E.shape[1],I=o?A.shape[1]:A.shape[2],$=Math.max(y,b),O=n.data.get(E.dataId).values,B=n.data.get(A.dataId).values,z=wt(E.shape),L=wt(A.shape),[F,R,W]=s?[z[0],1,z[1]]:[z[0],z[1],1],[M,j,q]=o?[1,L[1],L[0]]:[L[1],1,L[0]],H=T*I,G=Qt([$,T,I],E.dtype),ne=G.values,ue=n.blockSize;for(let te=0;te<$;te++){const se=te%y,J=te%b;for(let K=0;K<T;K+=ue){const ae=Math.min(K+ue,T);for(let pe=0;pe<I;pe+=ue){const he=Math.min(pe+ue,I);for(let Se=0;Se<k;Se+=ue){const Ee=Math.min(Se+ue,k);for(let Z=K;Z<ae;Z++)for(let ie=pe;ie<he;ie++){let ve=0;for(let we=Se;we<Ee;we++){const Fe=O[se*F+Z*R+we*W],Re=B[we*M+ie*j+J*q];ve+=Fe*Re}ne[te*H+(Z*I+ie)]+=ve}}}}}return n.disposeIntermediateTensorInfo(E),n.disposeIntermediateTensorInfo(A),n.makeTensorInfo(x,G.dtype,G.values)}const Afe={kernelName:Z0,backendName:"cpu",kernelFunc:o8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ife(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:s,preluActivationWeights:o}=e,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:f}=r;let d,h,m;const v=[];d=o8({inputs:{a,b:i},attrs:{transposeA:u,transposeB:l},backend:n}),s&&(h=Jf({inputs:{a:d,b:s},backend:n}),v.push(d),d=h),c&&(m=c0(n,d,c,o,f),v.push(d),d=m);for(const b of v)n.disposeIntermediateTensorInfo(b);return d}const kfe={kernelName:Wy,backendName:"cpu",kernelFunc:Ife};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _fe=Tn(_h,t=>Math.acos(t)),Ofe={kernelName:_h,backendName:"cpu",kernelFunc:_fe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ffe=Tn(Oh,t=>Math.acosh(t)),Rfe={kernelName:Oh,backendName:"cpu",kernelFunc:Ffe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mfe(t){const{inputs:e,backend:n}=t,r=e;ht(e,"addN");const a=r.map(o=>n.data.get(o.dataId).values),i=Qt(r[0].shape,r[0].dtype),s=i.values;for(let o=0;o<r.length;o++){const u=a[o];for(let l=0;l<s.length;l++)s[l]+=u[l]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const Pfe={kernelName:H0,backendName:"cpu",kernelFunc:Mfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bfe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;ht(a,"all");const o=tn(i,a.shape);let u=o;const l=Zn(u,a.shape.length);let c=a;l!=null&&(c=Ua({inputs:{x:a},backend:n,attrs:{perm:l}}),u=ur(u.length,a.shape.length)),Zr("all",u,c.shape.length);const[f,d]=Mr(c.shape,u),h=Oe(d),m=oa(Oe(f),c.dtype),v=n.data.get(c.dataId).values;for(let b=0;b<m.length;++b){const w=b*h;let x=v[w];for(let S=0;S<h;++S){const C=v[w+S];x=x&&C}m[b]=x}l!=null&&n.disposeIntermediateTensorInfo(c);const y=n.makeTensorInfo(f,c.dtype,m);if(s){const b=or(f,o),w=Ln({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),w}return y}const Lfe={kernelName:xC,backendName:"cpu",kernelFunc:Bfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zfe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;ht(a,"any");const o=tn(i,a.shape);let u=o;const l=Zn(u,a.shape.length);let c=a;l!=null&&(c=Ua({inputs:{x:a},backend:n,attrs:{perm:l}}),u=ur(u.length,a.shape.length)),Zr("any",u,c.shape.length);const[f,d]=Mr(c.shape,u),h=Oe(d),m=oa(Oe(f),c.dtype),v=n.data.get(c.dataId).values;for(let b=0;b<m.length;++b){const w=b*h;let x=v[w];for(let S=0;S<h;++S){const C=v[w+S];x=x||C}m[b]=x}l!=null&&n.disposeIntermediateTensorInfo(c);const y=n.makeTensorInfo(f,c.dtype,m);if(s){const b=or(f,o),w=Ln({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),w}return y}const Ufe={kernelName:wC,backendName:"cpu",kernelFunc:zfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vfe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;ht(a,"argMax");let s=tn(i,a.shape);const o=Zn(s,a.shape.length);let u=a;const l=[];o!=null&&(u=Ua({inputs:{x:a},backend:n,attrs:{perm:o}}),l.push(u),s=ur(s.length,u.shape.length)),s=[s[0]],Zr("argMax",s,u.shape.length);const[c,f]=Mr(u.shape,s),d=Oe(c),h=oa(d,"int32"),m=Oe(f),v=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){const b=y*m;let w=v[b],x=0;for(let S=0;S<m;++S){const C=v[b+S];C>w&&(w=C,x=S)}h[y]=x}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(c,"int32",h)}const Wfe={kernelName:j0,backendName:"cpu",kernelFunc:Vfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qfe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;ht(a,"argMin");let s=tn(i,a.shape);const o=Zn(s,a.shape.length);let u=a;const l=[];o!=null&&(u=Ua({inputs:{x:a},backend:n,attrs:{perm:o}}),l.push(u),s=ur(s.length,u.shape.length)),s=[s[0]],Zr("argMin",s,u.shape.length);const[c,f]=Mr(u.shape,s),d=Oe(c),h=oa(d,"int32"),m=Oe(f),v=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){const b=y*m;let w=v[b],x=0;for(let S=0;S<m;++S){const C=v[b+S];C<w&&(w=C,x=S)}h[y]=x}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(c,"int32",h)}const Gfe={kernelName:X0,backendName:"cpu",kernelFunc:qfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hfe=Tn(Fh,t=>Math.asin(t)),jfe={kernelName:Fh,backendName:"cpu",kernelFunc:Hfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xfe=Tn(Rh,t=>Math.asinh(t)),Kfe={kernelName:Rh,backendName:"cpu",kernelFunc:Xfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yfe=Tn(Mh,t=>Math.atan(t)),Zfe={kernelName:Mh,backendName:"cpu",kernelFunc:Yfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qfe=cr((t,e)=>Math.atan2(t,e)),Jfe=Dr(Bh,Qfe),ede={kernelName:Bh,backendName:"cpu",kernelFunc:Jfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tde=Tn(Ph,t=>Math.atanh(t)),nde={kernelName:Ph,backendName:"cpu",kernelFunc:tde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pT(t,e,n,r,a,i){const s=a.strideHeight,o=a.strideWidth,u=a.dilationHeight,l=a.dilationWidth,c=a.effectiveFilterHeight,f=a.effectiveFilterWidth,d=a.padInfo.top,h=a.padInfo.left,m=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Qt(a.outShape,n),y=v.values,b=a.outShape[1]*a.outShape[2]*a.outShape[3],w=a.outShape[2]*a.outShape[3],x=a.outShape[3];for(let S=0;S<a.batchSize;++S){const C=S*b,E=S*r[0];for(let A=0;A<a.inChannels;++A)for(let k=0;k<a.outHeight;++k){const T=k*s-d,I=Math.max(0,T),$=Math.min(a.inHeight,c+T),O=C+k*w;for(let B=0;B<a.outWidth;++B){const z=B*o-h,L=Math.max(0,z),F=Math.min(a.inWidth,f+z);let R=m,W=0,M=0;for(let q=I;q<$;q+=u){const H=E+q*r[1];for(let G=L;G<F;G+=l){const ne=H+G*r[2],ue=t[ne+A];i==="max"&&ue>R?R=ue:i==="avg"&&(W+=ue,M++)}if(isNaN(R))break}const j=O+B*x+A;y[j]=i==="avg"?W/M:R}}}return v}function u8(t,e,n,r,a=!1,i=!1){const s=Qt(r.outShape,"int32"),o=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,m=r.padInfo.left,v=Qt(e,n,t);for(let y=0;y<r.batchSize;++y)for(let b=0;b<r.inChannels;++b)for(let w=0;w<r.outHeight;++w){const x=w*o-h;let S=x;for(;S<0;)S+=l;const C=Math.min(r.inHeight,f+x);for(let E=0;E<r.outWidth;++E){const A=E*u-m;let k=A;for(;k<0;)k+=c;const T=Math.min(r.inWidth,d+A);let I=Number.NEGATIVE_INFINITY,$=-1;for(let O=S;O<C;O+=l){const B=O-x;for(let z=k;z<T;z+=c){const L=z-A,F=v.get(y,O,z,b);F>I&&(I=F,a?$=i?((y*r.inHeight+O)*r.inWidth+z)*r.inChannels+b:(O*r.inWidth+z)*r.inChannels+b:$=B*d+L)}}s.set($,y,w,E,b)}}return s}function l8(t,e,n,r,a,i){const s=a.strideDepth,o=a.strideHeight,u=a.strideWidth,l=a.dilationDepth,c=a.dilationHeight,f=a.dilationWidth,d=a.effectiveFilterDepth,h=a.effectiveFilterHeight,m=a.effectiveFilterWidth,v=a.padInfo.front,y=a.padInfo.top,b=a.padInfo.left,w=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=Qt(a.outShape,n),S=x.values,C=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],E=a.outShape[2]*a.outShape[3]*a.outShape[4],A=a.outShape[3]*a.outShape[4],k=a.outShape[4];for(let T=0;T<a.batchSize;++T){const I=T*C,$=T*r[0];for(let O=0;O<a.inChannels;++O)for(let B=0;B<a.outDepth;++B){const z=B*s-v;let L=z;for(;L<0;)L+=l;const F=Math.min(a.inDepth,d+z),R=I+B*E;for(let W=0;W<a.outHeight;++W){const M=W*o-y;let j=M;for(;j<0;)j+=c;const q=Math.min(a.inHeight,h+M),H=R+W*A;for(let G=0;G<a.outWidth;++G){const ne=G*u-b;let ue=ne;for(;ue<0;)ue+=f;const te=Math.min(a.inWidth,m+ne),se=H+G*k;let J=w,K=0,ae=0;for(let he=L;he<F;he+=l){const Se=$+he*r[1];for(let Ee=j;Ee<q;Ee+=c){const Z=Se+Ee*r[2];for(let ie=ue;ie<te;ie+=f){const ve=Z+ie*r[3],we=t[ve+O];if(i==="max"&&we>J?J=we:i==="avg"&&(K+=we,ae++),isNaN(J))break}if(isNaN(J))break}if(isNaN(J))break}const pe=se+O;S[pe]=i==="avg"?K/Math.max(ae,1):J}}}}return x}function rde(t,e){const n=Qt(e.outShape,"int32"),r=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,o=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=e.padInfo.front,h=e.padInfo.top,m=e.padInfo.left;for(let v=0;v<e.batchSize;++v)for(let y=0;y<e.inChannels;++y)for(let b=0;b<e.outDepth;++b){const w=b*r-d;let x=w;for(;x<0;)x+=s;const S=Math.min(e.inDepth,l+w);for(let C=0;C<e.outHeight;++C){const E=C*a-h;let A=E;for(;A<0;)A+=o;const k=Math.min(e.inHeight,c+E);for(let T=0;T<e.outWidth;++T){const I=T*i-m;let $=I;for(;$<0;)$+=u;const O=Math.min(e.inWidth,f+I);let B=Number.NEGATIVE_INFINITY,z=-1;for(let L=x;L<S;L+=s){const F=L-w;for(let R=A;R<k;R+=o){const W=R-E;for(let M=$;M<O;M+=u){const j=M-I,q=t.get(v,L,R,M,y);q>=B&&(B=q,z=F*c*f+W*c+j)}}}n.set(z,v,b,C,T,y)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ade(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;ht(a,"avgPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:u}=r,l=1;Y(Yr(s,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${l}'`);const c=is(a.shape,i,s,l,o,u);let f;if(c.filterWidth===1&&c.filterHeight===1&&un(c.inShape,c.outShape))f=uo({inputs:{x:a},backend:n});else{const d=n.data.get(a.dataId).values,h=wt(a.shape),m=pT(d,a.shape,a.dtype,h,c,"avg");f=n.makeTensorInfo(c.outShape,a.dtype,m.values)}return f}const ide={kernelName:K0,backendName:"cpu",kernelFunc:ade};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sde(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:u,dataFormat:l}=r;ht(a,"avgPool3d");const c=jo(a.shape,i,s,1,o,u,l),f=n.data.get(a.dataId).values,d=l8(f,a.shape,a.dtype,wt(a.shape),c,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}const ode={kernelName:Y0,backendName:"cpu",kernelFunc:sde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ude(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:s,strides:o,pad:u,dimRoundingMode:l}=r;ht([a,i],"avgPool3DGrad");const c=jo(i.shape,s,o,1,u,l),f=c.strideDepth,d=c.strideHeight,h=c.strideWidth,m=c.filterDepth,v=c.filterHeight,y=c.filterWidth,b=c.dilationDepth,w=c.dilationHeight,x=c.dilationWidth,S=c.effectiveFilterDepth,C=c.effectiveFilterHeight,E=c.effectiveFilterWidth,A=S-1-c.padInfo.front,k=E-1-c.padInfo.left,T=C-1-c.padInfo.top,I=Qt(i.shape,"float32"),$=1/(m*v*y),O=n.bufferSync(a);for(let B=0;B<c.batchSize;++B)for(let z=0;z<c.inChannels;++z)for(let L=0;L<c.inDepth;++L)for(let F=0;F<c.inHeight;++F)for(let R=0;R<c.inWidth;++R){const W=L-A,M=F-T,j=R-k;let q=0;for(let H=0;H<S;H+=b){const G=(W+H)/f;if(!(G<0||G>=c.outDepth||Math.floor(G)!==G))for(let ne=0;ne<C;ne+=w){const ue=(M+ne)/d;if(!(ue<0||ue>=c.outHeight||Math.floor(ue)!==ue))for(let te=0;te<E;te+=x){const se=(j+te)/h;if(se<0||se>=c.outWidth||Math.floor(se)!==se)continue;const J=O.get(B,G,ue,se,z);q+=J}}}I.set(q*$,B,L,F,R,z)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const lde={kernelName:SC,backendName:"cpu",kernelFunc:ude};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cde(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,s=i;ht([a,i],"avgPoolGrad");const{filterSize:o,strides:u,pad:l}=r,c=is(s.shape,o,u,1,l),f=c.strideHeight,d=c.strideWidth,h=c.filterHeight,m=c.filterWidth,v=c.dilationHeight,y=c.dilationWidth,b=c.effectiveFilterHeight,w=c.effectiveFilterWidth,x=w-1-c.padInfo.left,S=b-1-c.padInfo.top,C=Qt(s.shape,"float32"),E=1/(h*m),A=n.data.get(a.dataId).values,k=Qt(a.shape,"float32",A);for(let T=0;T<c.batchSize;++T)for(let I=0;I<c.inChannels;++I)for(let $=0;$<c.inHeight;++$)for(let O=0;O<c.inWidth;++O){const B=$-S,z=O-x;let L=0;for(let F=0;F<b;F+=v){const R=(B+F)/f;if(!(R<0||R>=c.outHeight||Math.floor(R)!==R))for(let W=0;W<w;W+=y){const M=(z+W)/d;if(M<0||M>=c.outWidth||Math.floor(M)!==M)continue;const j=k.get(T,R,M,I);L+=j}}C.set(L*E,T,$,O,I)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const fde={kernelName:NC,backendName:"cpu",kernelFunc:cde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dde(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,scale:i,offset:s,mean:o,variance:u}=e;Y(o.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),ht([a,o,u,i,s],"batchNorm");let{varianceEpsilon:l}=r;l==null&&(l=.001);const c=n.data.get(a.dataId).values,f=n.data.get(o.dataId).values,d=n.data.get(u.dataId).values,h=i?n.data.get(i.dataId).values:new Float32Array([1]),m=s?n.data.get(s.dataId).values:new Float32Array([0]),v=new Float32Array(c.length),y=m.length,b=h.length,w=d.length,x=f.length;let S=0,C=0,E=0,A=0;for(let k=0;k<c.length;++k)v[k]=m[S++]+(c[k]-f[C++])*h[E++]/Math.sqrt(d[A++]+l),S>=y&&(S=0),C>=x&&(C=0),E>=b&&(E=0),A>=w&&(A=0);return n.makeTensorInfo(a.shape,a.dtype,v)}const pde={kernelName:c1,backendName:"cpu",kernelFunc:dde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hde(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:s}=r;ht([a],"batchToSpaceND");const o=i.reduce((b,w)=>b*w),u=Mm(a.shape,i,o),l=Pm(u.length,i.length),c=Bm(a.shape,i,o),f=ND(s,i.length),d=SD(c,s,i.length),h=Ln({inputs:{x:a},backend:n,attrs:{shape:u}}),m=Ua({inputs:{x:h},backend:n,attrs:{perm:l}}),v=Ln({inputs:{x:m},backend:n,attrs:{shape:c}}),y=dc({inputs:{x:v},backend:n,attrs:{begin:f,size:d}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),y}const mde={kernelName:Q0,backendName:"cpu",kernelFunc:hde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gde(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:s}=r,o=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=uT(o,u,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,l)}const vde={kernelName:CC,backendName:"cpu",kernelFunc:gde};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yde(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,o=Wt(Array.from(i),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const bde={kernelName:EC,backendName:"cpu",kernelFunc:yde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xde=Tn(Uh,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),wde={kernelName:Uh,backendName:"cpu",kernelFunc:xde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nde=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(Oe(e.shape)),a=n.data.get(e.dataId),i=a.complexTensorInfos.real,s=a.complexTensorInfos.imag,o=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values;for(let l=0;l<o.length;l++){const c=o[l],f=u[l];r[l]=Math.hypot(c,f)}return n.makeOutput(r,e.shape,"float32")},Sde={kernelName:e1,backendName:"cpu",kernelFunc:Nde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ed(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const Cde={kernelName:qC,backendName:"cpu",kernelFunc:ed};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function td(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=tn(a,e[0].shape)[0],s=e.map(v=>v.shape);bD(s,i);let o=no(e.map(v=>v.shape),i);if(Oe(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const u=e.filter(v=>Oe(v.shape)>0);if(u.length===1)return uo({inputs:{x:u[0]},backend:n});if(u[0].dtype==="complex64"){const v=u.map(S=>fc({inputs:{input:S},backend:n})),y=u.map(S=>ed({inputs:{input:S},backend:n})),b=td({inputs:v,backend:n,attrs:{axis:i}}),w=td({inputs:y,backend:n,attrs:{axis:i}}),x=ri({inputs:{real:b,imag:w},backend:n});return v.forEach(S=>n.disposeIntermediateTensorInfo(S)),y.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),x}const l=u.map(v=>{const b=[-1,Oe(v.shape.slice(i))];return Ln({inputs:{x:v},backend:n,attrs:{shape:b}})}),c=l.map(v=>({vals:n.data.get(v.dataId).values,shape:v.shape}));o=no(l.map(v=>v.shape),1);const f=l[0].shape[0]===1,d=h6(c,o,e[0].dtype,f),h=no(u.map(v=>v.shape),i),m=n.makeTensorInfo(h,e[0].dtype,d);return l.forEach(v=>n.disposeIntermediateTensorInfo(v)),m}const Ede={kernelName:t1,backendName:"cpu",kernelFunc:td};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c8(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dataFormat:u,dilations:l,dimRoundingMode:c}=r;ht([a,i],"conv2d");const f=Xo(u),d=Rr(a.shape,i.shape,s,l,o,c,!1,f),h=d.filterHeight,m=d.filterWidth,v=d.dilationHeight,y=d.dilationWidth,b=d.padInfo.left,w=d.padInfo.top,x=d.dataFormat==="channelsLast",S=new Nr(d.outShape,a.dtype),C=wt(a.shape),E=wt(i.shape),A=C[0],k=x?C[1]:C[2],T=x?C[2]:1,I=x?1:C[1],$=S.strides[0],O=x?S.strides[1]:S.strides[2],B=x?S.strides[2]:1,z=x?1:S.strides[1],L=n.data.get(a.dataId).values,F=n.data.get(i.dataId).values,R=S.values;for(let W=0;W<d.batchSize;++W){const M=W*A,j=W*$;for(let q=0;q<d.outHeight;++q){const H=j+q*O,G=q*d.strideHeight-w;for(let ne=0;ne<h;++ne){const ue=G+ne*v;if(ue<0||ue>=d.inHeight)continue;const te=ne*E[0],se=M+ue*k;for(let J=0;J<d.outWidth;++J){const K=H+J*B,ae=J*d.strideWidth-b;for(let pe=0;pe<m;++pe){const he=ae+pe*y;if(he<0||he>=d.inWidth)continue;const Se=te+pe*E[1],Ee=se+he*T;let Z=Se;for(let ie=0;ie<d.inChannels;++ie){const ve=L[Ee+ie*I];for(let we=0;we<d.outChannels;++we)R[K+we*z]+=ve*F[Z+we];Z+=d.outChannels}}}}}}return n.makeTensorInfo(S.shape,S.dtype,R)}const Dde={kernelName:n1,backendName:"cpu",kernelFunc:c8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tde(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,pad:o,dataFormat:u,dimRoundingMode:l,filterShape:c}=r;ht([a,i],"conv2dBackpropFilter");const f=Xo(u),d=Rr(a.shape,c,s,1,o,l,!1,f),{strideHeight:h,strideWidth:m,filterHeight:v,filterWidth:y}=d,b=d.dataFormat==="channelsLast",w=new Nr(d.filterShape,"float32"),x=d.padInfo.left,S=d.padInfo.top,C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,A=new Nr(a.shape,a.dtype,C),k=new Nr(i.shape,i.dtype,E);for(let T=0;T<v;++T){const I=Math.max(0,Math.ceil((S-T)/h)),$=Math.min(d.outHeight,(d.inHeight+S-T)/h);for(let O=0;O<y;++O){const B=Math.max(0,Math.ceil((x-O)/m)),z=Math.min(d.outWidth,(d.inWidth+x-O)/m);for(let L=0;L<d.inChannels;++L)for(let F=0;F<d.outChannels;++F){let R=0;for(let W=0;W<d.batchSize;++W)for(let M=I;M<$;++M){const j=T+M*h-S;for(let q=B;q<z;++q){const H=O+q*m-x;b?R+=A.get(W,j,H,L)*k.get(W,M,q,F):R+=A.get(W,L,j,H)*k.get(W,F,M,q)}}w.set(R,T,O,L,F)}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const $de={kernelName:TC,backendName:"cpu",kernelFunc:Tde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ade(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:s,strides:o,pad:u,dataFormat:l,dimRoundingMode:c}=r;ht([a,i],"conv2dBackpropInput");const f=wt(i.shape),d=wt(a.shape);let h=Xo(l);const m=Rr(s,i.shape,o,1,u,c,!1,h),v=new Nr(m.inShape,"float32"),y=v.values,b=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,[x,S,C]=f,{batchSize:E,filterHeight:A,filterWidth:k,inChannels:T,inHeight:I,inWidth:$,outChannels:O,outHeight:B,outWidth:z,strideHeight:L,strideWidth:F}=m;h=m.dataFormat;const R=A-1-m.padInfo.top,W=k-1-m.padInfo.left,M=h==="channelsLast",j=v.strides[0],q=M?v.strides[1]:v.strides[2],H=M?v.strides[2]:1,G=M?1:v.strides[1],ne=d[0],ue=M?d[1]:d[2],te=M?d[2]:1,se=M?1:d[1];for(let J=0;J<E;++J)for(let K=0;K<T;++K)for(let ae=0;ae<I;++ae){const pe=ae-R,he=Math.max(0,Math.ceil(pe/L)),Se=Math.min(B,(A+pe)/L);for(let Ee=0;Ee<$;++Ee){const Z=Ee-W,ie=Math.max(0,Math.ceil(Z/F)),ve=Math.min(z,(k+Z)/F);let we=0;for(let Re=he;Re<Se;++Re){const Ge=Re*L-pe;for(let Ze=ie;Ze<ve;++Ze){const re=Ze*F-Z,ce=ne*J+ue*Re+te*Ze,Ce=x*(A-1-Ge)+S*(k-1-re)+C*K;for(let $e=0;$e<O;++$e){const Be=b[ce+se*$e],Me=w[Ce+$e];we+=Be*Me}}}const Fe=j*J+q*ae+H*Ee+G*K;y[Fe]=we}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const Ide={kernelName:r1,backendName:"cpu",kernelFunc:Ade};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kde(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dilations:u}=r;ht([a,i],"conv3d");const l=tl(a.shape,i.shape,s,u,o),{filterDepth:c,filterHeight:f,filterWidth:d,dilationDepth:h,dilationHeight:m,dilationWidth:v,padInfo:y}=l,b=y.front,w=y.left,x=y.top,S=new Nr(l.outShape,a.dtype),C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,A=S.values,k=wt(a.shape),T=wt(i.shape);for(let I=0;I<l.batchSize;++I){const $=I*k[0],O=I*S.strides[0];for(let B=0;B<l.outDepth;++B){const z=O+B*S.strides[1],L=B*l.strideDepth-b;for(let F=0;F<c;++F){const R=L+F*h;if(R<0||R>=l.inDepth)continue;const W=F*T[0],M=$+R*k[1];for(let j=0;j<l.outHeight;++j){const q=z+j*S.strides[2],H=j*l.strideHeight-x;for(let G=0;G<f;++G){const ne=H+G*m;if(ne<0||ne>=l.inHeight)continue;const ue=W+G*T[1],te=M+ne*k[2];for(let se=0;se<l.outWidth;++se){const J=q+se*l.outChannels,K=se*l.strideWidth-w;for(let ae=0;ae<d;++ae){const pe=K+ae*v;if(pe<0||pe>=l.inWidth)continue;const he=ue+ae*T[2],Se=te+pe*l.inChannels;let Ee=he;for(let Z=0;Z<l.inChannels;++Z){const ie=C[Se+Z];for(let ve=0;ve<l.outChannels;++ve)A[J+ve]+=ie*E[Ee+ve];Ee+=l.outChannels}}}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const _de={kernelName:a1,backendName:"cpu",kernelFunc:kde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ode(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,pad:o,filterShape:u}=r;ht([a,i],"conv3dBackpropFilterV2");const l=wt(a.shape),c=wt(i.shape),f=tl(a.shape,u,s,1,o),d=f.strideDepth,h=f.strideHeight,m=f.strideWidth,v=f.filterDepth,y=f.filterHeight,b=f.filterWidth,w=new Nr(f.filterShape,"float32"),x=w.values,[S,C,E,A]=w.strides,k=n.data.get(i.dataId).values,[T,I,$,O]=c,B=n.data.get(a.dataId).values,[z,L,F,R]=l,W=f.padInfo.front,M=f.padInfo.left,j=f.padInfo.top;for(let q=0;q<v;++q){const H=Math.max(0,Math.ceil((W-q)/d)),G=Math.min(f.outDepth,(f.inDepth+W-q)/d),ne=q*S;for(let ue=0;ue<y;++ue){const te=Math.max(0,Math.ceil((j-ue)/h)),se=Math.min(f.outHeight,(f.inHeight+j-ue)/h),J=ue*C+ne;for(let K=0;K<b;++K){const ae=Math.max(0,Math.ceil((M-K)/m)),pe=Math.min(f.outWidth,(f.inWidth+M-K)/m),he=K*E+J;for(let Se=0;Se<f.inChannels;++Se){const Ee=Se*A+he;for(let Z=0;Z<f.outChannels;++Z){let ie=0;for(let ve=0;ve<f.batchSize;++ve){const we=ve*z,Fe=ve*T;for(let Re=H;Re<G;++Re){const Ze=(q+Re*d-W)*L+we,re=Re*I+Fe;for(let ce=te;ce<se;++ce){const $e=(ue+ce*h-j)*F+Ze,Be=ce*$+re;for(let Me=ae;Me<pe;++Me){const qe=(K+Me*m-M)*R+$e,et=Me*O+Be;ie+=B[qe+Se]*k[et+Z]}}}}x[Ee+Z]=ie}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const Fde={kernelName:$C,backendName:"cpu",kernelFunc:Ode};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rde(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:s,strides:o,inputShape:u}=r;ht([a],"conv3dBackpropInputV2");const l=wt(a.shape),c=wt(i.shape),f=tl(u,i.shape,o,1,s),d=new Nr(f.inShape,"float32"),h=d.values,[m,v,y,b]=d.strides,w=n.data.get(a.dataId).values,[x,S,C,E]=l,A=n.data.get(i.dataId).values,[k,T,I,$]=c,{batchSize:O,filterDepth:B,filterHeight:z,filterWidth:L,inChannels:F,inDepth:R,inHeight:W,inWidth:M,outChannels:j,outDepth:q,outHeight:H,outWidth:G,strideDepth:ne,strideHeight:ue,strideWidth:te}=f,se=B-1-f.padInfo.front,J=z-1-f.padInfo.top,K=L-1-f.padInfo.left;for(let ae=0;ae<O;++ae)for(let pe=0;pe<F;++pe)for(let he=0;he<R;++he){const Se=he-se,Ee=Math.max(0,Math.ceil(Se/ne)),Z=Math.min(q,(B+Se)/ne);for(let ie=0;ie<W;++ie){const ve=ie-J,we=Math.max(0,Math.ceil(ve/ue)),Fe=Math.min(H,(z+ve)/ue);for(let Re=0;Re<M;++Re){const Ge=Re-K,Ze=Math.max(0,Math.ceil(Ge/te)),re=Math.min(G,(L+Ge)/te);let ce=0;for(let Ce=Ee;Ce<Z;++Ce){const $e=Ce*ne-Se;for(let Be=we;Be<Fe;++Be){const Me=Be*ue-ve;for(let Qe=Ze;Qe<re;++Qe){const qe=Qe*te-Ge,et=x*ae+S*Ce+C*Be+E*Qe,Ye=k*(B-1-$e)+T*(z-1-Me)+I*(L-1-qe)+$*pe;for(let Ht=0;Ht<j;++Ht){const Nt=w[et+Ht],xn=A[Ye+Ht];ce+=Nt*xn}}}}h[m*ae+v*he+y*ie+b*Re+pe]=ce}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}const Mde={kernelName:AC,backendName:"cpu",kernelFunc:Rde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pde=Tn(Vh,t=>Math.cos(t)),Bde={kernelName:Vh,backendName:"cpu",kernelFunc:Pde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lde=Tn(Wh,t=>Math.cosh(t)),zde={kernelName:Wh,backendName:"cpu",kernelFunc:Lde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ude(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:s}=e,{cropSize:o,method:u,extrapolationValue:l}=r,[c,f,d,h]=a.shape,m=i.shape[0],[v,y]=o,b=Qt([m,v,y,h],"float32"),w=n.data.get(i.dataId).values,x=n.data.get(s.dataId).values,S=n.data.get(a.dataId).values,C=wt(a.shape),E=wt(b.shape);for(let A=0;A<m;A++){const k=A*4,T=w[k],I=w[k+1],$=w[k+2],O=w[k+3],B=x[A];if(B>=c)continue;const z=v>1?($-T)*(f-1)/(v-1):0,L=y>1?(O-I)*(d-1)/(y-1):0;for(let F=0;F<v;F++){const R=v>1?T*(f-1)+F*z:.5*(T+$)*(f-1);if(R<0||R>f-1){for(let W=0;W<y;W++)for(let M=0;M<h;M++){const j=M+W*E[2]+F*E[1]+A*E[0];b.values[j]=l}continue}if(u==="bilinear"){const W=Math.floor(R),M=Math.ceil(R),j=R-W;for(let q=0;q<y;q++){const H=y>1?I*(d-1)+q*L:.5*(I+O)*(d-1);if(H<0||H>d-1){for(let te=0;te<h;te++){const se=te+q*E[2]+F*E[1]+A*E[0];b.values[se]=l}continue}const G=Math.floor(H),ne=Math.ceil(H),ue=H-G;for(let te=0;te<h;te++){let se=te+G*C[2]+W*C[1]+B*C[0];const J=S[se];se=te+ne*C[2]+W*C[1]+B*C[0];const K=S[se];se=te+G*C[2]+M*C[1]+B*C[0];const ae=S[se];se=te+ne*C[2]+M*C[1]+B*C[0];const pe=S[se],he=J+(K-J)*ue,Se=ae+(pe-ae)*ue;se=te+q*E[2]+F*E[1]+A*E[0],b.values[se]=he+(Se-he)*j}}}else for(let W=0;W<y;++W){const M=y>1?I*(d-1)+W*L:.5*(I+O)*(d-1);if(M<0||M>d-1){for(let H=0;H<h;H++){const G=H+W*E[2]+F*E[1]+A*E[0];b.values[G]=l}continue}const j=Math.round(M),q=Math.round(R);for(let H=0;H<h;H++){const G=H+j*C[2]+q*C[1]+B*C[0],ne=H+W*E[2]+F*E[1]+A*E[0];b.values[ne]=S[G]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const Vde={kernelName:kC,backendName:"cpu",kernelFunc:Ude};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wde(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:s,reverse:o}=r;ht(a,"cumprod");const u=Zn([i],a.shape.length);let l=a;u!=null&&(l=Ua({inputs:{x:a},backend:n,attrs:{perm:u}}));const c=ur(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);const f=oi(l.dtype,"int32"),d=yC(Oe(l.shape),f),h=n.data.get(l.dataId).values,m=l.shape[l.shape.length-1],v=o?(b,w)=>b+m-w-1:(b,w)=>b+w;for(let b=0;b<h.length;b+=m)for(let w=0;w<m;w++){const x=v(b,w);if(w===0)d[x]=s?1:h[x];else{const S=v(b,w-1);d[x]=s?h[S]*d[S]:h[x]*d[S]}}const y=n.makeTensorInfo(l.shape,f,d);if(u!=null){const b=nl(u),w=Ua({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(l),w}return y}const qde={kernelName:IC,backendName:"cpu",kernelFunc:Wde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gde(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:s,reverse:o}=r;ht(a,"cumsum");const u=Zn([i],a.shape.length);let l=a;u!=null&&(l=Ua({inputs:{x:a},backend:n,attrs:{perm:u}}));const c=ur(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);const f=oi(l.dtype,"int32"),d=oa(Oe(l.shape),f),h=n.data.get(l.dataId).values,m=l.shape[l.shape.length-1],v=o?(b,w)=>b+m-w-1:(b,w)=>b+w;for(let b=0;b<h.length;b+=m)for(let w=0;w<m;w++){const x=v(b,w);if(w===0)d[x]=s?0:h[x];else{const S=v(b,w-1);d[x]=s?h[S]+d[S]:h[x]+d[S]}}const y=n.makeTensorInfo(l.shape,f,d);if(u!=null){const b=nl(u),w=Ua({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(l),w}return y}const Hde={kernelName:i1,backendName:"cpu",kernelFunc:Gde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jde(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:s,binaryOutput:o}=r;if(a.shape.length===1){const u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=uT(u,l,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,c)}else if(a.shape.length===2){const u=n.bufferSync(a),l=n.bufferSync(i),c=f6(u,l,s,o);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const Xde={kernelName:_C,backendName:"cpu",kernelFunc:jde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kde(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:s}=r;Y(s==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`);const o=a.shape[0],u=a.shape[1],l=a.shape[2],c=a.shape[3],f=u*i,d=l*i,h=c/(i*i),m=n.data.get(a.dataId).values,v=new Float32Array(o*f*d*h);let y=0;for(let b=0;b<o;++b)for(let w=0;w<f;++w){const x=Math.floor(w/i),S=w%i;for(let C=0;C<d;++C){const E=Math.floor(C/i),A=C%i,k=(S*i+A)*h;for(let T=0;T<h;++T){const $=T+k+c*(E+l*(x+u*b));v[y++]=m[$]}}}return n.makeTensorInfo([o,f,d,h],a.dtype,v)}const Yde={kernelName:OC,backendName:"cpu",kernelFunc:Kde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f8(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dilations:u,dimRoundingMode:l}=r;ht([a,i],"depthwiseConv2DNative");const c=wt(a.shape),f=wt(i.shape);let d=u;d==null&&(d=[1,1]),Y(Yr(s,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${d}'`);const h=Rr(a.shape,i.shape,s,d,o,l,!0),{filterHeight:m,filterWidth:v,dilationHeight:y,dilationWidth:b,padInfo:w}=h,x=w.left,S=w.top,C=h.outChannels/h.inChannels,E=new Nr(h.outShape,a.dtype),A=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,T=E.values;for(let I=0;I<h.batchSize;++I){const $=I*c[0],O=I*E.strides[0];for(let B=0;B<h.outHeight;++B){const z=O+B*E.strides[1],L=B*h.strideHeight-S;for(let F=0;F<m;++F){const R=L+F*y;if(R<0||R>=h.inHeight)continue;const W=F*f[0],M=$+R*c[1];for(let j=0;j<h.outWidth;++j){const q=z+j*E.strides[2],H=j*h.strideWidth-x;for(let G=0;G<v;++G){const ne=H+G*b;if(ne<0||ne>=h.inWidth)continue;const ue=W+G*f[1],te=M+ne*h.inChannels;let se=q,J=ue;for(let K=0;K<h.inChannels;++K){const ae=A[te+K];for(let pe=0;pe<C;++pe)T[se+pe]+=ae*k[J+pe];se+=C,J+=C}}}}}}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const Zde={kernelName:s1,backendName:"cpu",kernelFunc:f8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qde(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,dilations:o,pad:u,dimRoundingMode:l,filterShape:c}=r;ht([a,i],"depthwiseConv2dNativeBackpropFilter");const f=Rr(a.shape,c,s,o,u,l,!0),{strideHeight:d,strideWidth:h,filterHeight:m,filterWidth:v}=f,y=new Nr(f.filterShape,"float32"),b=f.padInfo.left,w=f.padInfo.top,x=f.outChannels/f.inChannels,S=n.data.get(a.dataId).values,C=new Nr(a.shape,a.dtype,S),E=n.data.get(i.dataId).values,A=new Nr(i.shape,i.dtype,E);for(let k=0;k<m;++k){const T=Math.max(0,Math.ceil((w-k)/d)),I=Math.min(f.outHeight,(f.inHeight+w-k)/d);for(let $=0;$<v;++$){const O=Math.max(0,Math.ceil((b-$)/h)),B=Math.min(f.outWidth,(f.inWidth+b-$)/h);for(let z=0;z<f.outChannels;++z){const L=Math.trunc(z/x),F=z%x;let R=0;for(let W=0;W<f.batchSize;++W)for(let M=T;M<I;++M){const j=k+M*d-w;for(let q=O;q<B;++q){const H=$+q*h-b;R+=C.get(W,j,H,L)*A.get(W,M,q,z)}}y.set(R,k,$,L,F)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const Jde={kernelName:FC,backendName:"cpu",kernelFunc:Qde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function epe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:s,dilations:o,pad:u,dimRoundingMode:l,inputShape:c}=r;ht([a,i],"depthwiseConv2DNativeBackpropInput");const f=wt(a.shape),d=wt(i.shape),h=Rr(c,i.shape,s,o,u,l,!0),m=new Nr(h.inShape,"float32"),v=m.values,[y,b,w]=m.strides,x=n.data.get(a.dataId).values,[S,C,E]=f,A=n.data.get(i.dataId).values,[k,T,I]=d,{batchSize:$,filterHeight:O,filterWidth:B,inChannels:z,inHeight:L,inWidth:F,outChannels:R,outHeight:W,outWidth:M,strideHeight:j,strideWidth:q}=h,H=O-1-h.padInfo.top,G=B-1-h.padInfo.left,ne=R/z;for(let ue=0;ue<$;++ue)for(let te=0;te<z;++te)for(let se=0;se<L;++se){const J=se-H,K=Math.max(0,Math.ceil(J/j)),ae=Math.min(W,(O+J)/j);for(let pe=0;pe<F;++pe){const he=pe-G,Se=Math.max(0,Math.ceil(he/q)),Ee=Math.min(M,(B+he)/q);let Z=0;for(let ie=K;ie<ae;++ie){const ve=ie*j-J;for(let we=Se;we<Ee;++we){const Fe=we*q-he,Re=S*ue+C*ie+E*we,Ge=k*(O-1-ve)+T*(B-1-Fe)+I*te;for(let Ze=0;Ze<ne;++Ze){const re=te*ne+Ze,ce=x[Re+re],Ce=A[Ge+Ze];Z+=ce*Ce}}}v[y*ue+b*se+w*pe+te]=Z}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const tpe={kernelName:RC,backendName:"cpu",kernelFunc:epe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function npe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=Oe(r.shape),i=n.data.get(r.dataId).values,s=Qt([a,a],r.dtype),o=s.values;for(let l=0;l<i.length;l++)o[l*a+l]=i[l];const u=[...r.shape,...r.shape];return n.makeTensorInfo(u,s.dtype,s.values)}const rpe={kernelName:MC,backendName:"cpu",kernelFunc:npe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ape={kernelName:o1,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a}=t,{strides:i,pad:s,dilations:o}=n,u=e,l=u.data.get(r.dataId).values,c=r.shape.length,f=u.data.get(a.dataId).values,d=a.shape.length,{batchSize:h,inHeight:m,inWidth:v,inChannels:y,outHeight:b,outWidth:w,padInfo:x,strideHeight:S,strideWidth:C,filterHeight:E,filterWidth:A,dilationHeight:k,dilationWidth:T,outShape:I}=$m(r.shape,a.shape,i,s,"NHWC",o),$=Oe(I),O=I.length,B=sr(r.dtype,$);for(let L=0;L<h;++L)for(let F=0;F<b;++F){const R=F*S-x.top;for(let W=0;W<w;++W){const M=W*C-x.left;for(let j=0;j<y;++j){let q=Number.MIN_SAFE_INTEGER;for(let G=0;G<E;++G){const ne=R+G*k;if(ne>=0&&ne<m)for(let ue=0;ue<A;++ue){const te=M+ue*T;if(te>=0&&te<v){const se=eo([L,ne,te,j],c,wt(r.shape)),J=eo([G,ue,j],d,wt(a.shape)),K=l[se]+f[J];K>q&&(q=K)}}}const H=eo([L,F,W,j],O,wt(I));B[H]=q}}}return{dataId:u.write(vc(B,r.dtype),I,r.dtype),shape:I,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ipe={kernelName:UN,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:s,pad:o,dilations:u}=n,l=e,c=Zi(r.shape,l.data.get(r.dataId).values),f=Zi(a.shape,l.data.get(a.dataId).values),{batchSize:d,inHeight:h,inWidth:m,inChannels:v,outHeight:y,outWidth:b,padInfo:w,strideHeight:x,strideWidth:S,filterHeight:C,filterWidth:E,dilationHeight:A,dilationWidth:k,outShape:T}=$m(r.shape,a.shape,s,o,"NHWC",u);Y(i.rank===T.length,()=>`Error in ${UN}, dy must have the same rank as output ${T.length}, but got ${i.rank}`);const I=Zi(T,l.data.get(i.dataId).values),$=oP(a.shape,a.dtype);for(let B=0;B<d;++B)for(let z=0;z<y;++z){const L=z*x-w.top;for(let F=0;F<b;++F){const R=F*S-w.left;for(let W=0;W<v;++W){let M=Number.MIN_SAFE_INTEGER,j=0,q=0;for(let H=0;H<C;++H){const G=L+H*A;if(G>=0&&G<h)for(let ne=0;ne<E;++ne){const ue=R+ne*k;if(ue>=0&&ue<m){const te=c[B][G][ue][W]+f[H][ne][W];te>M&&(M=te,j=H,q=ne)}}}$[j][q][W]+=I[B][z][F][W]}}}return{dataId:l.write(vc($,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const spe={kernelName:zN,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:s,pad:o,dilations:u}=n,l=e,c=Zi(r.shape,l.data.get(r.dataId).values),f=Zi(a.shape,l.data.get(a.dataId).values),{batchSize:d,inHeight:h,inWidth:m,inChannels:v,outHeight:y,outWidth:b,padInfo:w,strideHeight:x,strideWidth:S,filterHeight:C,filterWidth:E,dilationHeight:A,dilationWidth:k,outShape:T}=$m(r.shape,a.shape,s,o,"NHWC",u);Y(i.rank===T.length,()=>`Error in ${zN}, dy must have the same rank as output ${T.length}, but got ${i.rank}`);const I=Zi(T,l.data.get(i.dataId).values),$=oP(r.shape,r.dtype);for(let B=0;B<d;++B)for(let z=0;z<y;++z){const L=z*x-w.top;for(let F=0;F<b;++F){const R=F*S-w.left;for(let W=0;W<v;++W){let M=Number.MIN_SAFE_INTEGER,j=L<0?0:L,q=R<0?0:R;for(let H=0;H<C;++H){const G=L+H*A;if(G>=0&&G<h)for(let ne=0;ne<E;++ne){const ue=R+ne*k;if(ue>=0&&ue<m){const te=c[B][G][ue][W]+f[H][ne][W];te>M&&(M=te,j=G,q=ue)}}}$[B][j][q][W]+=I[B][z][F][W]}}}return{dataId:l.write(vc($,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ope(t){const{inputs:e,backend:n,attrs:r}=t,{image:a}=e,{canvas:i,options:s}=r,{contextOptions:o,imageOptions:u}=s||{},l=(u==null?void 0:u.alpha)||1,c=(o==null?void 0:o.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const f=i.getContext(c,(o==null?void 0:o.contextAttributes)||{});if(f==null)throw new Error(`Could not get the context with ${c} type.`);const[d,h]=a.shape.slice(0,2),m=a.shape.length===2?1:a.shape[2],v=n.data.get(a.dataId).values,y=a.dtype==="float32"?255:1,b=new Uint8ClampedArray(h*d*4);for(let x=0;x<d*h;++x){const S=[0,0,0,255*l];for(let E=0;E<m;E++){const A=v[x*m+E];if(a.dtype==="float32"){if(A<0||A>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${A}.`)}else if(a.dtype==="int32"&&(A<0||A>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${A}.`);m===1?(S[0]=A*y,S[1]=A*y,S[2]=A*y):S[E]=A*y}const C=x*4;b[C+0]=Math.round(S[0]),b[C+1]=Math.round(S[1]),b[C+2]=Math.round(S[2]),b[C+3]=Math.round(S[3])}i.width=h,i.height=d;const w=new ImageData(b,h,d);return f.putImageData(w,0,0),a}const upe={kernelName:fY,backendName:"cpu",kernelFunc:ope};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jm(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;ht(a,"sum");let o;a.dtype==="bool"?o=Hu({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):o=uo({inputs:{x:a},backend:n});const u=o.shape.length,l=tn(i,o.shape),c=Zn(l,u);let f=l,d=o;c!=null&&(d=Ua({inputs:{x:o},backend:n,attrs:{perm:c}}),f=ur(f.length,u)),Zr("sum",f,d.shape.length);const[h,m]=Mr(d.shape,f),v=oi(d.dtype,"int32");let y=u0(n,h,v);const b=Oe(m),w=n.data.get(y.dataId).values,x=n.data.get(d.dataId).values;for(let S=0;S<w.length;++S){const C=S*b;let E=0;for(let A=0;A<b;++A)E+=x[C+A];w[S]=E}if(s){const S=or(y.shape,l),C=y;y=Ln({inputs:{x:y},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(C)}return n.disposeIntermediateTensorInfo(o),c!=null&&n.disposeIntermediateTensorInfo(d),y}const lpe={kernelName:z1,backendName:"cpu",kernelFunc:jm};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cpe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:s,summedDims:o,idDims:u}=kD(a,i.length);OD(s.length,u,i);const{path:l,steps:c}=FD(o,u),f=c.length;let d=null,h=s.length;const m=[];for(let v=0;v<f;++v){for(const y of c[v]){const{permutationIndices:b,expandDims:w}=_D(h,u[y]);let x;RD(b)?x=i[y]:(x=Ua({inputs:{x:i[y]},backend:n,attrs:{perm:b}}),m.push(x));const S=x.shape.slice();for(let C=0;C<w.length;++C)S.splice(w[C],0,1);un(x.shape,S)||(x=Ln({inputs:{x},backend:n,attrs:{shape:S}}),m.push(x)),d===null?d=x:(d=kb({inputs:{a:x,b:d},backend:n}),m.push(d))}v<f-1&&(l[v]>=0&&(d=jm({inputs:{x:d},backend:n,attrs:{axis:l[v]-(s.length-h),keepDims:!1}}),m.push(d)),h--)}for(const v of m)v!==d&&n.disposeIntermediateTensorInfo(v);return d}const fpe={kernelName:PC,backendName:"cpu",kernelFunc:cpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dpe(t){const{inputs:e,backend:n}=t,{dy:r,y:a}=e;ht([r,a],"eluGrad");const i=new Float32Array(Oe(a.shape)),s=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values;for(let u=0;u<s.length;++u){const l=s[u];l>=0?i[u]=o[u]:i[u]=o[u]*(l+1)}return n.makeTensorInfo(a.shape,"float32",i)}const ppe={kernelName:BC,backendName:"cpu",kernelFunc:dpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hpe=CD,mpe=ED,gpe=DD,vpe=TD,ype=$D,bpe=AD,xpe=Tn(Hh,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+hpe*n);return e*(1-((((bpe*r+ype)*r+vpe)*r+gpe)*r+mpe)*r*Math.exp(-n*n))}),wpe={kernelName:Hh,backendName:"cpu",kernelFunc:xpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f0(t){const{inputs:e,backend:n,attrs:r}=t,{input:a}=e,{dim:i}=r,s=a.shape.length,o=a.shape.slice();let u=i;return i<0&&(Y(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),u=s+i+1),o.splice(u,0,1),Ln({inputs:{x:a},backend:n,attrs:{shape:o}})}const Npe={kernelName:l1,backendName:"cpu",kernelFunc:f0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Spe=cr((t,e)=>t/e),hT=Dr(qh,Spe),DS={kernelName:qh,backendName:"cpu",kernelFunc:hT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d8(t,e,n){const r=t.shape,a=r[0],i=r[1],s=n.data.get(t.dataId),o=s.complexTensorInfos.real,u=s.complexTensorInfos.imag,l=[a,i],c=Oe(l),f=Xr("float32",c),d=Xr("float32",c);for(let y=0;y<a;y++){const b=dc({inputs:{x:o},backend:n,attrs:{begin:[y,0],size:[1,i]}}),w=dc({inputs:{x:u},backend:n,attrs:{begin:[y,0],size:[1,i]}}),x=ri({inputs:{real:b,imag:w},backend:n}),{real:S,imag:C}=Cpe(x,e,n),E=Vo(S,C);for(let A=0;A<i;A++){const k=ID(E,A);f[y*i+A]=k.real,d[y*i+A]=k.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x)}const h=n.makeTensorInfo(l,"float32",f),m=n.makeTensorInfo(l,"float32",d),v=ri({inputs:{real:h,imag:m},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}function Cpe(t,e,n){const r=Oe(t.shape),a=n.data.get(t.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,s=n.data.get(a.complexTensorInfos.imag.dataId).values;if(Epe(r)){const o=TS(i,s,r,e,n),u=[t.shape[0],t.shape[1]];if(e){const l=n.makeTensorInfo(u,"float32",o.real),c=n.makeTensorInfo(u,"float32",o.imag),f=n.makeTensorInfo([],"float32",Qu(r,"float32")),d=uo({inputs:{x:f},backend:n}),h=DS.kernelFunc({inputs:{a:l,b:f},backend:n}),m=DS.kernelFunc({inputs:{a:c,b:d},backend:n}),v=n.data.get(h.dataId).values,y=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),{real:v,imag:y}}return o}else{const o=Vo(i,s),u=Dpe(o,r,e);return wL(u)}}function Epe(t){return(t&t-1)===0}function TS(t,e,n,r,a){if(n===1)return{real:t,imag:e};const i=Vo(t,e),s=n/2,o=NL(i),u=o.real,l=o.imag,c=[u.length],f=a.makeTensorInfo(c,"float32",u),d=a.makeTensorInfo(c,"float32",l),h=ri({inputs:{real:f,imag:d},backend:a}),m=SL(i),v=m.real,y=m.imag,b=[v.length],w=a.makeTensorInfo(b,"float32",v),x=a.makeTensorInfo(b,"float32",y),S=ri({inputs:{real:w,imag:x},backend:a}),C=TS(u,l,s,r,a),E=C.real,A=C.imag,k=[E.length],T=a.makeTensorInfo(k,"float32",E),I=a.makeTensorInfo(k,"float32",A),$=ri({inputs:{real:T,imag:I},backend:a}),O=TS(v,y,s,r,a),B=O.real,z=O.imag,L=[B.length],F=a.makeTensorInfo(L,"float32",B),R=a.makeTensorInfo(L,"float32",z),W=ri({inputs:{real:F,imag:R},backend:a}),M=EL(n,r),j=[M.real.length],q=a.makeTensorInfo(j,"float32",M.real),H=a.makeTensorInfo(j,"float32",M.imag),G=ri({inputs:{real:q,imag:H},backend:a}),ne=kb({inputs:{a:G,b:W},backend:a}),ue=Jf({inputs:{a:$,b:ne},backend:a}),te=dT({inputs:{a:$,b:ne},backend:a}),se=fc({inputs:{input:ue},backend:a}),J=fc({inputs:{input:te},backend:a}),K=ed({inputs:{input:ue},backend:a}),ae=ed({inputs:{input:te},backend:a}),pe=td({inputs:[se,J],backend:a,attrs:{axis:0}}),he=td({inputs:[K,ae],backend:a,attrs:{axis:0}}),Se=a.data.get(pe.dataId).values,Ee=a.data.get(he.dataId).values;return a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(I),a.disposeIntermediateTensorInfo($),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(ne),a.disposeIntermediateTensorInfo(ue),a.disposeIntermediateTensorInfo(te),a.disposeIntermediateTensorInfo(se),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(J),a.disposeIntermediateTensorInfo(ae),a.disposeIntermediateTensorInfo(pe),a.disposeIntermediateTensorInfo(he),{real:Se,imag:Ee}}function Dpe(t,e,n){const r=new Float32Array(e*2);for(let a=0;a<e;a++){let i=0,s=0;for(let o=0;o<e;o++){const u=DL(a*o,e,n),l=ID(t,o);i+=l.real*u.real-l.imag*u.imag,s+=l.real*u.imag+l.imag*u.real}n&&(i/=e,s/=e),CL(r,i,s,a)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tpe(t){const{inputs:e,backend:n}=t,{input:r}=e,a=Oe(r.shape),i=r.shape[r.shape.length-1],s=a/i,o=Ln({inputs:{x:r},backend:n,attrs:{shape:[s,i]}}),u=d8(o,!1,n),l=Ln({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}const $pe={kernelName:LC,backendName:"cpu",kernelFunc:Tpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mT(t){const{backend:e,attrs:n}=t,{shape:r,value:a,dtype:i}=n,s=i||md(a),o=sr(s,Oe(r));return Ipe(o,a,s),e.makeTensorInfo(r,s,o)}const Ape={kernelName:zC,backendName:"cpu",kernelFunc:mT};function Ipe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kpe={kernelName:UC,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,a=n,i=Xr(r.dtype,Oe(r.shape)),[s,o,u,l]=r.shape,c=a.data.get(r.dataId).values;for(let d=0;d<s;d++){const h=d*u*o*l;for(let m=0;m<o;m++){const v=m*(u*l);for(let y=0;y<u;y++){const b=y*l;for(let w=0;w<l;w++){const x=Math.round(u-y-1),S=h+v+b+w;let C=c[S];if(x>=0&&x<u){const E=x*l,A=h+v+E+w;C=c[A]}i[S]=C}}}}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _pe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:s,preluActivationWeights:o}=e,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:m}=r;let v=c8({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d}});if(s){const y=v;if(c==="NCHW"&&s.shape.length===1&&s.shape[0]!==1){const b=Ln({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});v=Jf({inputs:{a:v,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else v=Jf({inputs:{a:v,b:s},backend:n});n.disposeIntermediateTensorInfo(y)}if(h){const y=v;if(c==="NCHW"&&h==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const b=Ln({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=c0(n,v,h,b,m),n.disposeIntermediateTensorInfo(b)}else v=c0(n,v,h,o,m);n.disposeIntermediateTensorInfo(y)}return v}const Ope={kernelName:qy,backendName:"cpu",kernelFunc:_pe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fpe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:s,preluActivationWeights:o}=e,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:m}=r;let v=f8({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d}});if(s){const y=v;v=Jf({inputs:{a:v,b:s},backend:n}),n.disposeIntermediateTensorInfo(y)}if(h){const y=v;v=c0(n,v,h,o,m),n.disposeIntermediateTensorInfo(y)}return v}const Rpe={kernelName:Gy,backendName:"cpu",kernelFunc:Fpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mpe(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=Oe(r.shape),s=a.shape,o=s[s.length-1],[u,l,c,f]=pD(r,a);if(l===0)return n.makeTensorInfo(u,r.dtype,[]);const d=n.data.get(a.dataId).values,h=n.bufferSync(r),m=N6(d,h,r.dtype,l,o,c,f,r.shape,i);return n.makeTensorInfo(u,r.dtype,m.values)}const Ppe={kernelName:VC,backendName:"cpu",kernelFunc:Mpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bpe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:s,batchDims:o}=r;ht([a,i],"gatherV2");const u=tn(s,a.shape)[0],l=n.data.get(i.dataId).values,c=a.shape[u];for(let S=0;S<l.length;++S){const C=l[S];Y(C<=c-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${c-1}]`)}let f=o;o==null&&(f=0);const d=Oe(i.shape),h=PD(a,i,u,f),m=Ln({inputs:{x:a},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),v=Ln({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,d/h.batchSize]}}),y=[h.batchSize,h.outerSize,d/h.batchSize,h.sliceSize],b=n.bufferSync(v),w=n.bufferSync(m),x=S6(w,b,y);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.makeTensorInfo(h.outputShape,x.dtype,x.values)}const Lpe={kernelName:f1,backendName:"cpu",kernelFunc:Bpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zpe(t){const{inputs:e,backend:n}=t,{input:r}=e,a=Oe(r.shape),i=r.shape[r.shape.length-1],s=a/i,o=Ln({inputs:{x:r},backend:n,attrs:{shape:[s,i]}}),u=d8(o,!0,n),l=Ln({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}const Upe={kernelName:WC,backendName:"cpu",kernelFunc:zpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vpe=Tn(Jh,t=>Number.isFinite(t)?1:0,"bool"),Wpe={kernelName:Jh,backendName:"cpu",kernelFunc:Vpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qpe=Tn(em,t=>Math.abs(t)===1/0?1:0,"bool"),Gpe={kernelName:em,backendName:"cpu",kernelFunc:qpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hpe=Tn(tm,t=>Number.isNaN(t)?1:0,"bool"),jpe={kernelName:tm,backendName:"cpu",kernelFunc:Hpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xpe(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,s=$6(r,a,i);return e.makeTensorInfo([s.length],"float32",s)}const Kpe={kernelName:GC,backendName:"cpu",kernelFunc:Xpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ype=Tn(rm,t=>Math.log1p(t)),Zpe={kernelName:rm,backendName:"cpu",kernelFunc:Ype};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qpe=cr((t,e)=>t&&e),Jpe=Dr(g1,Qpe,null,"bool"),ehe={kernelName:g1,backendName:"cpu",kernelFunc:Jpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const the=Tn(v1,t=>t?0:1,"bool"),nhe={kernelName:v1,backendName:"cpu",kernelFunc:the};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rhe=cr((t,e)=>t||e),ahe=Dr(y1,rhe,null,"bool"),ihe={kernelName:y1,backendName:"cpu",kernelFunc:ahe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function she(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:s,alpha:o,beta:u}=r;ht(a,"LRN");const l=a.shape[3],c=l-1,f=n.data.get(a.dataId).values,d=Oe(a.shape),h=new Float32Array(d);function m(v){const y=v%l;let b=v-y+Math.max(0,y-i);const w=v-y+Math.min(y+i,c);let x=0;for(;b<=w;b++){const S=f[b];x+=S*S}return x}for(let v=0;v<d;v++){const y=m(v),b=f[v]*Math.pow(s+o*y,-u);h[v]=b}return n.makeTensorInfo(a.shape,a.dtype,h)}const ohe={kernelName:b1,backendName:"cpu",kernelFunc:she};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uhe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:s}=e,{depthRadius:o,bias:u,alpha:l,beta:c}=r;ht(s,"LRNGrad");const f=Oe(s.shape),d=s.shape[3],h=n.data.get(s.dataId).values,m=n.data.get(a.dataId).values,v=n.data.get(i.dataId).values,y=new Float32Array(f),b=f;for(let w=0;w<b;w++){const x=w%d,S=w-x+Math.max(0,x-o),C=w-x+Math.min(d,x+o+1);let E=0;for(let A=S;A<C;A++)E+=Math.pow(m[A],2);E=l*E+u;for(let A=S;A<C;A++){let k=-2*l*c*m[A]*v[w]/E;w===A&&(k+=Math.pow(E,-c)),k*=h[w],y[A]+=k}}return n.makeTensorInfo(s.shape,a.dtype,y)}const lhe={kernelName:HC,backendName:"cpu",kernelFunc:uhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p8(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:s}=r,o=n;let u=a.shape;const l=u.length,c=tn(i,u);let f=c;const d=Zn(f,l);let h=o.data.get(a.dataId).values;if(d!=null){const S=new Array(l);for(let C=0;C<S.length;C++)S[C]=u[d[C]];h=cT(h,u,a.dtype,d,S),f=ur(f.length,l),u=S}ht(a,"max"),Zr("max",f,l);const[m,v]=Mr(u,f),y=Oe(v),b=I6(h,y,m,a.dtype),w=o.write(b,m,a.dtype);let x=m;return s&&(x=or(m,c)),{dataId:w,shape:x,dtype:a.dtype}}const che={kernelName:x1,backendName:"cpu",kernelFunc:p8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fhe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;ht(a,"maxPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:u}=r,l=1;Y(Yr(s,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${l}'`);const c=is(a.shape,i,s,l,o,u);let f;if(c.filterWidth===1&&c.filterHeight===1&&un(c.inShape,c.outShape))f=uo({inputs:{x:a},backend:n});else{const d=n.data.get(a.dataId).values,h=wt(a.shape),m=pT(d,a.shape,a.dtype,h,c,"max");f=n.makeTensorInfo(c.outShape,a.dtype,m.values)}return f}const dhe={kernelName:w1,backendName:"cpu",kernelFunc:fhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function phe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:u,dataFormat:l}=r;ht(a,"maxPool3d");const c=jo(a.shape,i,s,1,o,u,l),f=n.data.get(a.dataId).values,d=l8(f,a.shape,a.dtype,wt(a.shape),c,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}const hhe={kernelName:N1,backendName:"cpu",kernelFunc:phe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mhe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:s,strides:o,pad:u,dimRoundingMode:l}=r;ht([a,i],"maxPool3DGrad");const c=jo(i.shape,s,o,1,u,l),f=n.bufferSync(i),d=rde(f,c),h=c.strideDepth,m=c.strideHeight,v=c.strideWidth,y=c.dilationDepth,b=c.dilationHeight,w=c.dilationWidth,x=c.effectiveFilterDepth,S=c.effectiveFilterHeight,C=c.effectiveFilterWidth,E=x-1-c.padInfo.front,A=C-1-c.padInfo.left,k=S-1-c.padInfo.top,T=Qt(i.shape,"float32"),I=n.bufferSync(a);for(let $=0;$<c.batchSize;++$)for(let O=0;O<c.inChannels;++O)for(let B=0;B<c.inDepth;++B)for(let z=0;z<c.inHeight;++z)for(let L=0;L<c.inWidth;++L){const F=B-E,R=z-k,W=L-A;let M=0;for(let j=0;j<x;j+=y){const q=(F+j)/h;if(!(q<0||q>=c.outDepth||Math.floor(q)!==q))for(let H=0;H<S;H+=b){const G=(R+H)/m;if(!(G<0||G>=c.outHeight||Math.floor(G)!==G))for(let ne=0;ne<C;ne+=w){const ue=(W+ne)/v;if(ue<0||ue>=c.outWidth||Math.floor(ue)!==ue)continue;const te=x*S*C-1-d.get($,q,G,ue,O),se=j*S*C+H*C+ne,J=te===se?1:0;if(J===0)continue;const K=I.get($,q,G,ue,O);M+=K*J}}}T.set(M,$,B,z,L,O)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const ghe={kernelName:XC,backendName:"cpu",kernelFunc:mhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vhe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:s}=e,o=i;ht([i,s],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:f}=r,d=is(o.shape,u,l,1,c,f),h=n.data.get(o.dataId).values,m=Qt(d.outShape,o.dtype,u8(h,o.shape,o.dtype,d).values),v=d.strideHeight,y=d.strideWidth,b=d.dilationHeight,w=d.dilationWidth,x=d.effectiveFilterHeight,S=d.effectiveFilterWidth,C=S-1-d.padInfo.left,E=x-1-d.padInfo.top,A=Qt(o.shape,"float32"),k=n.data.get(a.dataId).values,T=Qt(a.shape,"float32",k);for(let I=0;I<d.batchSize;++I)for(let $=0;$<d.inChannels;++$)for(let O=0;O<d.inHeight;++O)for(let B=0;B<d.inWidth;++B){const z=O-E,L=B-C;let F=0;for(let R=0;R<x;R+=b){const W=(z+R)/v;if(!(W<0||W>=d.outHeight||Math.floor(W)!==W))for(let M=0;M<S;M+=w){const j=(L+M)/y;if(j<0||j>=d.outWidth||Math.floor(j)!==j)continue;const q=x*S-1-m.get(I,W,j,$),H=R*S+M,G=q===H?1:0;if(G===0)continue;const ne=T.get(I,W,j,$);F+=ne*G}}A.set(F,I,O,B,$)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const yhe={kernelName:jC,backendName:"cpu",kernelFunc:vhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bhe(t,e,n,r,a){const i=wt(e),s=pT(t,e,n,i,a,"max"),o=u8(t,e,n,a,!0,r);return[s.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xhe={kernelName:KC,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:s,includeBatchInIndex:o}=e,u=n;ht(r,"MaxPoolWithArgmax");const l=u.data.get(r.dataId).values,c=is(r.shape,a,i,[1,1],s),[f,d]=bhe(l,r.shape,r.dtype,o,c),h=u.write(f,c.outShape,r.dtype),m=u.write(d,c.outShape,r.dtype);return[{dataId:h,shape:c.outShape,dtype:r.dtype},{dataId:m,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function whe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r,o=tn(i,a.shape),l=Mr(a.shape,o)[1],c=Oe(l),f=[],d=n.makeTensorInfo([],"float32",new Float32Array([c]));f.push(d);const h=Hu({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});f.push(h);const m=hT({inputs:{a:h,b:d},backend:n});f.push(m);const v=jm({inputs:{x:m},backend:n,attrs:{axis:i,keepDims:s}});return f.forEach(y=>n.disposeIntermediateTensorInfo(y)),v}const Nhe={kernelName:S1,backendName:"cpu",kernelFunc:whe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function She(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;ht(a,"min");const o=tn(i,a.shape);let u=o;const l=Zn(u,a.shape.length);let c=a;l!=null&&(c=Ua({inputs:{x:a},backend:n,attrs:{perm:l}}),u=ur(u.length,a.shape.length)),Zr("min",u,c.shape.length);const[f,d]=Mr(c.shape,u),h=Oe(d),m=oa(Oe(f),c.dtype),v=n.data.get(c.dataId).values;for(let b=0;b<m.length;++b){const w=b*h;let x=v[w];for(let S=0;S<h;++S){const C=v[w+S];(Number.isNaN(C)||C<x)&&(x=C)}m[b]=x}l!=null&&n.disposeIntermediateTensorInfo(c);const y=n.makeTensorInfo(f,c.dtype,m);if(s){const b=or(f,o),w=Ln({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),w}return y}const Che={kernelName:C1,backendName:"cpu",kernelFunc:She};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ehe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,mode:s}=r;ht(a,"mirrorPad");const o=i.map((x,S)=>x[0]+a.shape[S]+x[1]),u=i.map(x=>x[0]),l=i.map((x,S)=>x[0]+a.shape[S]),c=s==="reflect"?0:1,f=n.data.get(a.dataId).values,d=a.shape.length,h=wt(a.shape),m=Oe(o),v=o.length,y=wt(o),b=Xr(a.dtype,m);for(let x=0;x<m;x++){let S=gd(x,v,y);for(let E=0;E<v;E++)S[E]<u[E]?S[E]=u[E]*2-S[E]-c:S[E]>=l[E]&&(S[E]=(l[E]-1)*2-S[E]+c);S=S.map((E,A)=>E-u[A]);const C=eo(S,d,h);b[x]=f[C]}return{dataId:n.write(b,o,a.dtype),shape:o,dtype:a.dtype}}const Dhe={kernelName:E1,backendName:"cpu",kernelFunc:Ehe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const The=cr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),$he=Dr(sm,The),Ahe={kernelName:sm,backendName:"cpu",kernelFunc:$he};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h8(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,s=a.shape.length;let o=i;if(o===-1&&(o=s-1),o!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${o}`);const u=tn([o],a.shape),l=p8({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=or(l.shape,u),f=Ln({inputs:{x:l},backend:n,attrs:{shape:c}}),d=dT({inputs:{a,b:f},backend:n}),h=y6({inputs:{x:d},backend:n}),m=jm({inputs:{x:h},backend:n,attrs:{axis:u,keepDims:!1}}),v=Ln({inputs:{x:m},backend:n,attrs:{shape:c}}),y=hT({inputs:{a:h,b:v},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),y}const Ihe={kernelName:W1,backendName:"cpu",kernelFunc:h8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function khe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:s,normalized:o}=r;ht(a,"multinomial");const u=o?a:h8({inputs:{logits:a},backend:n,attrs:{dim:-1}}),l=u.shape[0],c=u.shape[1],f=n.data.get(u.dataId).values,d=[l,i],h=oa(Oe(d),"int32");for(let m=0;m<l;++m){const v=m*c,y=new Float32Array(c-1);y[0]=f[v];for(let x=1;x<y.length;++x)y[x]=y[x-1]+f[v+x];const b=Rm.alea(s.toString()),w=m*i;for(let x=0;x<i;++x){const S=b();h[w+x]=y.length;for(let C=0;C<y.length;C++)if(S<y[C]){h[w+x]=C;break}}}return o||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(d,"int32",h)}const _he={kernelName:YC,backendName:"cpu",kernelFunc:khe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ohe=sD;function Fhe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u}=r;ht(a,"NonMaxSuppression");const l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,{selectedIndices:f}=Ohe(l,c,s,o,u);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const Rhe={kernelName:ZC,backendName:"cpu",kernelFunc:Fhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mhe=oD;function Phe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u,padToMaxOutputSize:l}=r;ht(a,"NonMaxSuppressionPadded");const c=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,{selectedIndices:d,validOutputs:h}=Mhe(c,f,s,o,u,l);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const Bhe={kernelName:QC,backendName:"cpu",kernelFunc:Phe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lhe=uD;function zhe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u,softNmsSigma:l}=r;ht(a,"NonMaxSuppressionWithScore");const c=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,d=s,h=o,m=u,v=l,{selectedIndices:y,selectedScores:b}=Lhe(c,f,d,h,m,v);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const Uhe={kernelName:JC,backendName:"cpu",kernelFunc:zhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vhe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:s,onValue:o,offValue:u}=r;ht(a,"oneHot");const l=Oe(a.shape),c=new Float32Array(l*s);c.fill(u);const f=n.data.get(a.dataId).values;for(let d=0;d<l;++d)f[d]>=0&&f[d]<s&&(c[d*s+f[d]]=o);return n.makeTensorInfo([...a.shape,s],i,c)}const Whe={kernelName:A1,backendName:"cpu",kernelFunc:Vhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d0(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const a=fc({inputs:{input:r},backend:n}),i=d0({inputs:{x:a},backend:n}),s=ed({inputs:{input:r},backend:n}),o=d0({inputs:{x:s},backend:n}),u=ri({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),u}else return mT({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const qhe={kernelName:j1,backendName:"cpu",kernelFunc:d0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m8(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const a=fc({inputs:{input:r},backend:n}),i=m8({inputs:{x:a},backend:n}),s=ed({inputs:{input:r},backend:n}),o=d0({inputs:{x:s},backend:n}),u=ri({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),u}else return mT({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const Ghe={kernelName:$1,backendName:"cpu",kernelFunc:m8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g8(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return f0({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,s=e[0].dtype;e.forEach(c=>{mi(i,c.shape,"All tensors passed to stack must have matching shapes"),Y(s===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],u=e.map(c=>{const f=f0({inputs:{input:c},backend:n,attrs:{dim:a}});return o.push(f),f}),l=td({inputs:u,backend:n,attrs:{axis:a}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),l}const Hhe={kernelName:I1,backendName:"cpu",kernelFunc:g8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jhe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:s}=r;ht(a,"pad");const o=i.map((w,x)=>w[0]+a.shape[x]+w[1]),u=i.map(w=>w[0]),l=n.data.get(a.dataId).values,c=Oe(a.shape),f=a.shape.length,d=wt(a.shape),h=Oe(o),m=o.length,v=wt(o),y=Xr(a.dtype,h);s!==0&&y.fill(s);for(let w=0;w<c;w++){const S=gd(w,f,d).map((E,A)=>E+u[A]),C=eo(S,m,v);y[C]=l[w]}return{dataId:n.write(y,o,a.dtype),shape:o,dtype:a.dtype}}const v8={kernelName:k1,backendName:"cpu",kernelFunc:jhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xhe=cr((t,e)=>Math.pow(t,e)),Khe=Dr(um,Xhe),Yhe={kernelName:um,backendName:"cpu",kernelFunc:Khe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zhe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:s}=e,o=a.map(y=>n.data.get(y.dataId).values),u=a.map(y=>y.shape),l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,[f,d,h]=M6(o,u,l,i.shape,i.dtype,c,s.shape),m=f.map(y=>n.makeTensorInfo([y.length],"int32",y)),v=n.makeTensorInfo(h,i.dtype,d);return m.concat([v])}const Qhe={kernelName:eE,backendName:"cpu",kernelFunc:Zhe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jhe(t){const{inputs:e,backend:n}=t,{starts:r,limits:a,deltas:i}=e,s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,[l,c]=P6(s,r.shape,r.dtype,o,a.shape,u,i.shape),f=n.makeTensorInfo([l.length],"int32",l),d=n.makeTensorInfo([c.length],r.dtype,c);return[f,d]}const eme={kernelName:tE,backendName:"cpu",kernelFunc:Jhe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tme(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:s,rowPartitionTensors:o}=e,{rowPartitionTypes:u}=r,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,d=o.map(y=>n.data.get(y.dataId).values),h=o.map(y=>y.shape),[m,v]=B6(l,a.shape,c,i.shape,i.dtype,f,s.shape,d,h,u);return n.makeTensorInfo(m,i.dtype,v)}const nme={kernelName:nE,backendName:"cpu",kernelFunc:tme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rme(t){const{backend:e,attrs:n}=t,{start:r,stop:a,dtype:i,step:s}=n,o=L6(r,a,s,i);return e.makeTensorInfo([o.length],i,o)}const ame={kernelName:rE,backendName:"cpu",kernelFunc:rme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ime=Tn(lm,t=>1/t),sme={kernelName:lm,backendName:"cpu",kernelFunc:ime};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ome(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:s,size:o}=r;ht(a,"resizeBilinear");const u=wt(a.shape),[l,c]=o,[f,d,h,m]=a.shape,v=n.data.get(a.dataId).values,y=new Float32Array(Oe([f,l,c,m])),b=[i&&l>1?d-1:d,i&&c>1?h-1:h],w=[i&&l>1?l-1:l,i&&c>1?c-1:c];let x=0;const S=b[0]/w[0],C=b[1]/w[1];for(let E=0;E<f;E++)for(let A=0;A<l;A++){let k;s?k=S*(A+.5)-.5:k=S*A;const T=Math.max(0,Math.floor(k)),I=k-T,$=Math.min(d-1,Math.ceil(k)),O=E*u[0]+T*u[1],B=E*u[0]+$*u[1];for(let z=0;z<c;z++){let L;s?L=C*(z+.5)-.5:L=C*z;const F=Math.max(0,Math.floor(L)),R=L-F,W=Math.min(h-1,Math.ceil(L)),M=O+F*u[2],j=B+F*u[2],q=O+W*u[2],H=B+W*u[2];for(let G=0;G<m;G++){const ne=v[M+G],ue=v[j+G],te=v[q+G],se=v[H+G],J=ne+(te-ne)*R,K=ue+(se-ue)*R,ae=J+(K-J)*I;y[x++]=ae}}}return n.makeTensorInfo([f,l,c,m],"float32",y)}const ume={kernelName:M1,backendName:"cpu",kernelFunc:ome};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lme(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:s}=r;ht([i,a],"resizeBilinearGrad");const o=wt(a.shape),[u,l,c,f]=a.shape,[,d,h]=i.shape,m=new Float32Array(u*l*c*f),v=[s&&d>1?l-1:l,s&&h>1?c-1:c],y=[s&&d>1?d-1:d,s&&h>1?h-1:h],b=v[0]/y[0],w=v[1]/y[1],x=n.data.get(i.dataId).values;let S=0;for(let C=0;C<u;C++){const E=C*o[0];for(let A=0;A<d;A++){const k=A*b,T=Math.floor(k),I=Math.min(Math.ceil(k),l-1),$=E+T*o[1],O=E+I*o[1],B=k-T,z=1-B;for(let L=0;L<h;L++){const F=L*w,R=Math.floor(F),W=Math.min(Math.ceil(F),c-1),M=F-R,j=1-M,q=$+R*o[2],H=$+W*o[2],G=O+R*o[2],ne=O+W*o[2],ue=z*j,te=z*M,se=B*j,J=B*M;for(let K=0;K<f;K++){const ae=x[S++];m[q+K]+=ae*ue,m[H+K]+=ae*te,m[G+K]+=ae*se,m[ne+K]+=ae*J}}}}return n.makeTensorInfo([u,c,l,f],"float32",m)}const cme={kernelName:sE,backendName:"cpu",kernelFunc:lme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fme(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:s,size:o}=r;ht(a,"resizeNearestNeighbor");const u=wt(a.shape),[l,c]=o,[f,d,h,m]=a.shape,v=n.data.get(a.dataId).values,y=new Float32Array(f*l*c*m),b=[i&&l>1?d-1:d,i&&c>1?h-1:h],w=[i&&l>1?l-1:l,i&&c>1?c-1:c],x=b[0]/w[0],S=b[1]/w[1];let C=0;for(let E=0;E<f;E++){const A=E*u[0];for(let k=0;k<l;k++){const T=s?x*(k+.5):x*k;let I=Math.min(d-1,i?Math.round(T):Math.floor(T));s&&(I=Math.max(0,I));const $=A+I*u[1];for(let O=0;O<c;O++){const B=s?S*(O+.5):S*O;let z=Math.min(h-1,i?Math.round(B):Math.floor(B));s&&(z=Math.max(0,z));const L=$+z*u[2];for(let F=0;F<m;F++){const R=v[L+F];y[C++]=R}}}}return n.makeTensorInfo([f,l,c,m],a.dtype,y)}const dme={kernelName:R1,backendName:"cpu",kernelFunc:fme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pme(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:s}=r;ht([i,a],"resizeNearestNeighborGrad");const o=wt(a.shape),u=wt(i.shape),[l,c,f,d]=a.shape,[,h,m]=i.shape,v=new Float32Array(l*c*f*d),y=n.data.get(i.dataId).values,b=[s&&h>1?c-1:c,s&&m>1?f-1:f],w=[s&&h>1?h-1:h,s&&m>1?m-1:m],x=b[0]/w[0],S=b[1]/w[1],C=1/x,E=1/S,A=Math.ceil(C)*2+2,k=Math.ceil(E)*2+2;for(let T=0;T<l;T++){const I=T*o[0];for(let $=0;$<c;$++){const O=I+$*o[1],B=Math.floor($*C),z=Math.floor(B-A/2);for(let L=0;L<f;L++){const F=O+L*o[2],R=Math.floor(L*E),W=Math.floor(R-k/2);for(let M=0;M<d;M++){let j=0;for(let q=0;q<A;q++){const H=q+z;if(H<0||H>=h)continue;const G=I+H*u[1],ne=H*x,ue=Math.min(c-1,s?Math.round(ne):Math.floor(ne));if($===ue)for(let te=0;te<k;te++){const se=te+W;if(se<0||se>=m)continue;const J=G+se*u[2],K=se*S,ae=Math.min(f-1,s?Math.round(K):Math.floor(K));L===ae&&(j+=y[J+M])}}v[F+M]=j}}}}return n.makeTensorInfo(a.shape,a.dtype,v)}const hme={kernelName:iE,backendName:"cpu",kernelFunc:pme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mme(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r;ht(a,"reverse");const s=a.shape.length,o=tn(i,a.shape);if(s===0)return uo({inputs:{x:a},backend:n});const u=new Nr(a.shape,a.dtype),l=n.bufferSync(a);for(let c=0;c<u.size;c++){const f=u.indexToLoc(c),d=f.slice();o.forEach(h=>d[h]=a.shape[h]-1-d[h]),u.set(l.get(...d),...f)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}const gme={kernelName:P1,backendName:"cpu",kernelFunc:mme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vme={kernelName:SE,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:s}=e,o=n,u=Xr(r.dtype,Oe(r.shape)),[l,c,f,d]=r.shape,[h,m]=wD(s,c,f),v=255,y=Math.sin(a),b=Math.cos(a),w=o.data.get(r.dataId).values;for(let S=0;S<l;S++){const C=S*f*c*d;for(let E=0;E<c;E++){const A=E*(f*d);for(let k=0;k<f;k++){const T=k*d;for(let I=0;I<d;I++){const $=[l,E,k,I],O=$[2],B=$[1];let z=(O-h)*b-(B-m)*y,L=(O-h)*y+(B-m)*b;z=Math.round(z+h),L=Math.round(L+m);let F=i;if(typeof i!="number"&&(I===3?F=v:F=i[I]),z>=0&&z<f&&L>=0&&L<c){const W=L*(f*d),M=z*d,j=C+W+M+I;F=w[j]}const R=C+A+T+I;u[R]=F}}}}return{dataId:o.write(u,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yme=Tn(dm,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),bme={kernelName:dm,backendName:"cpu",kernelFunc:yme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xme(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:s}=r,{sliceRank:o,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=wc(i,a,s),d=!0,h=n.bufferSync(a),m=n.bufferSync(i),v=jl(h,m,s,f,l,u,o,c,0,d);return n.makeTensorInfo(s,v.dtype,v.values)}const wme={kernelName:oE,backendName:"cpu",kernelFunc:xme};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nme(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<e?n=a+1:r=a;return r}function Sme(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<=e?n=a+1:r=a;return r}function Cme(t,e,n,r,a,i){const s=sr("int32",n*a);for(let o=0;o<n;++o){const u=t.slice(o*r,(o+1)*r),l=o*a;for(let c=0;c<a;++c)s[l+c]=i==="left"?Nme(u,e[c+l]):Sme(u,e[c+l])}return s}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eme(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:s}=r,o=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=Cme(o,u,a.shape[0],a.shape[1],i.shape[1],s);return n.makeTensorInfo(i.shape,"int32",l)}const Dme={kernelName:lE,backendName:"cpu",kernelFunc:Eme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tme(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e;ht([r,a,i],"select");const s=r.shape.length,o=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=oi(a.dtype,i.dtype),f=oa(Oe(a.shape),c);let d=0;const h=s===0||s>1||a.shape.length===1?1:Oe(a.shape.slice(1));for(let m=0;m<o.length;m++)for(let v=0;v<h;v++)o[m]===1?f[d++]=u[m]:f[d++]=l[m];return n.makeTensorInfo(a.shape,c,f)}const $me={kernelName:B1,backendName:"cpu",kernelFunc:Tme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ame=yb,Ime=bb,kme=Tn(hm,t=>t>=0?Ime*t:Ame*(Math.exp(t)-1)),_me={kernelName:hm,backendName:"cpu",kernelFunc:kme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ome=Tn(vm,t=>t<0?-1:t>0?1:0),Fme={kernelName:vm,backendName:"cpu",kernelFunc:Ome};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rme=Tn(mm,t=>Math.sin(t)),Mme={kernelName:mm,backendName:"cpu",kernelFunc:Rme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pme=Tn(gm,t=>Math.sinh(t)),Bme={kernelName:gm,backendName:"cpu",kernelFunc:Pme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lme=11920928955078125e-23,iO=Math.log(Lme)+2,zme=Tn(bm,t=>{const e=t>-iO,n=t<iO,r=Math.exp(t);let a;return n?a=r:e?a=t:a=Math.log(1+r),a}),Ume={kernelName:bm,backendName:"cpu",kernelFunc:zme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vme(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:s}=r;ht([a],"spaceToBatchND");const o=Oe(i),u=[[0,0]];u.push(...s);for(let E=1+i.length;E<a.shape.length;++E)u.push([0,0]);const l=v8.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),c=Mm(l.shape,i,o,!1),f=Pm(c.length,i.length,!1),d=Bm(l.shape,i,o,!1),v=Ln({inputs:{x:l},backend:n,attrs:{shape:c}}),w=Ua({inputs:{x:v},backend:n,attrs:{perm:f}}),C=Ln({inputs:{x:w},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(w),C}const Wme={kernelName:U1,backendName:"cpu",kernelFunc:Vme};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qme(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:s}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${a.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);const o=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values[0],[f,d,h,m,v]=W6(o,r.shape,r.dtype,u,a.dtype,l,c);return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([d[0]],a.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const Gme={kernelName:cE,backendName:"cpu",kernelFunc:qme};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hme(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const s=Array.from(n.data.get(a.dataId).values),o=n.data.get(r.dataId).values,u=Array.from(n.data.get(i.dataId).values),[l,c,f]=q6(o,r.shape,r.dtype,s,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([f.length],i.dtype,new Int32Array(f))]}const jme={kernelName:fE,backendName:"cpu",kernelFunc:Hme};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xme(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,[l,c]=fT(s,r.shape,r.dtype,o,u,!0);return n.makeTensorInfo(c,r.dtype,l)}const Kme={kernelName:dE,backendName:"cpu",kernelFunc:Xme};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yme(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,[l,c]=fT(s,r.shape,r.dtype,o,u);return n.makeTensorInfo(c,r.dtype,l)}const Zme={kernelName:pE,backendName:"cpu",kernelFunc:Yme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qme(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:s}=e,{outputShape:o}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:f,outputSize:d}=wc(i,a,o),h=!1,m=n.bufferSync(a);let v;switch(i.dtype){case"bool":{const y=n.bufferSync(i),b=!!n.data.get(s.dataId).values[0];v=jl(m,y,o,d,c,l,u,f,b,h);break}case"float32":{const y=n.bufferSync(i),b=n.data.get(s.dataId).values[0];v=jl(m,y,o,d,c,l,u,f,b,h);break}case"int32":{const y=n.bufferSync(i),b=n.data.get(s.dataId).values[0];v=jl(m,y,o,d,c,l,u,f,b,h);break}case"string":{const y=n.bufferSync(i),b=Mu(n.data.get(s.dataId).values[0]);v=jl(m,y,o,d,c,l,u,f,b,h);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(o,v.dtype,v.values)}const Jme={kernelName:hE,backendName:"cpu",kernelFunc:Qme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ege(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:s}=r,o=tn(s,a.shape)[0],u=MD(a,i,o),l=new Array(a.shape.length).fill(0),c=a.shape.slice();return u.map(f=>{const d=[...c];d[o]=f;const h=dc({inputs:{x:a},backend:n,attrs:{begin:l,size:d}});return l[o]+=f,h})}const tge={kernelName:V1,backendName:"cpu",kernelFunc:ege};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nge={kernelName:mE,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;ht(n,"square");const a=r.data.get(n.dataId).values,i=new Float32Array(a.length);for(let o=0;o<a.length;++o){const u=a[o];i[o]=u*u}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rge=Tn(Dm,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),age={kernelName:Dm,backendName:"cpu",kernelFunc:rge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ige(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:s,strides:o,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:d}=r;ht(a,"stridedSlice");const{finalShapeSparse:h,finalShape:m,isIdentity:v,sliceDim0:y,isSimpleSlice:b,begin:w,end:x,strides:S}=yD(a.shape,i,s,o,u,l,c,f,d);let C;if(v)C=Ln({inputs:{x:a},backend:n,attrs:{shape:m}});else if(y||b){Y(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const E=mD(w,x,S),A=dc({inputs:{x:a},backend:n,attrs:{begin:w,size:E}});C=Ln({inputs:{x:A},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(A)}else{const E=n.bufferSync(a),A=j6(h,E,S,w);C=n.makeTensorInfo(m,A.dtype,A.values)}return C}const sge={kernelName:gE,backendName:"cpu",kernelFunc:ige};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oge(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:s,rightPad:o,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:f}=e,d=n.data.get(c.dataId).values,h=n.data.get(f.dataId).values,[m,v]=X6(d,h,a,i,s,o,u,l);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(f.shape,"int32",v)]}const uge={kernelName:vE,backendName:"cpu",kernelFunc:oge};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lge(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:s}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);const o=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values[0],[l,c,f]=K6(o,u,a),d=c.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const cge={kernelName:yE,backendName:"cpu",kernelFunc:lge};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fge(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const s=n.data.get(i.dataId).values,o=Y6(s,a);return n.makeTensorInfo(i.shape,"int32",o)}const dge={kernelName:bE,backendName:"cpu",kernelFunc:fge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pge=Tn(Sm,t=>Math.tan(t)),hge={kernelName:Sm,backendName:"cpu",kernelFunc:pge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mge=Tn(Cm,t=>Math.tanh(t)),gge={kernelName:Cm,backendName:"cpu",kernelFunc:mge};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vge(t){const{inputs:e,backend:n}=t,{tensor:r,indices:a,updates:i}=e,{sliceRank:s,numUpdates:o,sliceSize:u,strides:l,outputSize:c}=wc(i,a,r.shape),f=!1,d=n.bufferSync(a),h=n.bufferSync(i),m=n.bufferSync(r),v=jl(d,h,r.shape,c,u,o,s,l,m,f);return n.makeTensorInfo(r.shape,v.dtype,v.values)}const yge={kernelName:uE,backendName:"cpu",kernelFunc:vge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;ht(a,"tile");const s=Q6(n.bufferSync(a),i);return n.makeTensorInfo(s.shape,s.dtype,s.values)}const xge={kernelName:Em,backendName:"cpu",kernelFunc:bge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:s}=r;ht(a,"topk");const o=n.data.get(a.dataId).values,[u,l]=e8(o,a.shape,a.dtype,i,s);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}const Nge={kernelName:xE,backendName:"cpu",kernelFunc:wge};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sge(t){const{inputs:e,attrs:n,backend:r}=t,{image:a,transforms:i}=e,{interpolation:s,fillMode:o,fillValue:u,outputShape:l}=n,[c,f,d,h]=a.shape,[m,v]=l??[f,d],y=[c,m,v,h],b=wt(a.shape),w=b[0],x=b[1],S=b[2],C=wt(y),E=C[0],A=C[1],k=C[2],T=Xr(a.dtype,Oe(y));T.fill(u);const I=r.data.get(a.dataId).values,$=r.data.get(i.dataId).values;for(let B=0;B<c;++B){const z=i.shape[0]===1?$:$.subarray(B*8,B*8+8);for(let L=0;L<m;++L)for(let F=0;F<v;++F)for(let R=0;R<h;++R){let W;const M=z[6]*F+z[7]*L+1;if(M===0)continue;const j=(z[0]*F+z[1]*L+z[2])/M,q=(z[3]*F+z[4]*L+z[5])/M,H=sO(j,d,o),G=sO(q,f,o);switch(s){case"nearest":W=Age(I,f,d,w,x,S,B,G,H,R,u);break;case"bilinear":W=Ige(I,f,d,w,x,S,B,G,H,R,u);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${s}`)}const ne=B*E+L*A+F*k+R;T[ne]=W}return r.makeTensorInfo(y,a.dtype,T)}return{dataId:r.write(T,y,a.dtype),shape:a.shape,dtype:a.dtype}}const Cge={kernelName:wE,backendName:"cpu",kernelFunc:Sge};function sO(t,e,n){switch(n){case"reflect":return Ege(t,e);case"wrap":return Dge(t,e);case"nearest":return $ge(t,e);case"constant":default:return Tge(t)}}function Ege(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return ec(0,n,e-1)}function Dge(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return ec(0,n,e-1)}function Tge(t,e){return t}function $ge(t,e){return ec(0,t,e-1)}function zp(t,e,n,r,a,i,s,o,u,l,c){const f=s*r+o*a+u*i+l;return 0<=o&&o<e&&0<=u&&u<n?t[f]:c}function Age(t,e,n,r,a,i,s,o,u,l,c){const f=Math.round(o),d=Math.round(u);return zp(t,e,n,r,a,i,s,f,d,l,c)}function Ige(t,e,n,r,a,i,s,o,u,l,c){const f=Math.floor(o),d=Math.floor(u),h=f+1,m=d+1,v=(m-u)*zp(t,e,n,r,a,i,s,f,d,l,c)+(u-d)*zp(t,e,n,r,a,i,s,f,m,l,c),y=(m-u)*zp(t,e,n,r,a,i,s,h,d,l,c)+(u-d)*zp(t,e,n,r,a,i,s,h,m,l,c);return(h-o)*v+(o-f)*y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kge(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;ht(i,"unique");const s=r.data.get(i.dataId).values,{outputValues:o,outputShape:u,indices:l}=t8(s,a,i.shape,i.dtype);return[r.makeTensorInfo(u,i.dtype,o),r.makeTensorInfo([l.length],"int32",l)]}const _ge={kernelName:NE,backendName:"cpu",kernelFunc:kge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oge(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const s=a.shape.length,o=a.shape[i],u=new Array(s-1);let l=0;for(let h=0;h<s;h++)h!==i&&(u[l++]=a.shape[h]);const c=new Array(s).fill(0),f=a.shape.slice();f[i]=1;const d=new Array(o);for(let h=0;h<d.length;h++){c[i]=h;const m=dc({inputs:{x:a},backend:n,attrs:{begin:c,size:f}});d[h]=Ln({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return d}const Fge={kernelName:G1,backendName:"cpu",kernelFunc:Oge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:s}=r;ht(a,"unsortedSegmentSum");const o=a.shape.length,u=i.shape.length,l=[],c=[],f=o-u;let d=i;for(let m=0;m<f;++m){const v=f0({inputs:{input:d},backend:n,attrs:{dim:m+1}});d=v,c.push(v)}for(let m=0;m<s;++m){const v=Qu(m,"int32"),y=n.makeTensorInfo([],"int32",v),b=g6({inputs:{a:y,b:d},backend:n}),w=Hu({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),x=kb({inputs:{a:w,b:a},backend:n}),S=jm({inputs:{x},backend:n,attrs:{axis:0,keepDims:!1}});l.push(S),c.push(y),c.push(b),c.push(w),c.push(x),c.push(S)}const h=g8({inputs:l,backend:n,attrs:{axis:0}});return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}const Mge={kernelName:H1,backendName:"cpu",kernelFunc:Rge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pge=[kfe,fce,Ofe,Rfe,vce,Pfe,Lfe,Ufe,Wfe,Gfe,jfe,Kfe,Zfe,ede,nde,ide,ode,lde,fde,Afe,pde,mde,vde,bce,bde,mce,wce,wde,dce,Sde,Ede,Dde,$de,Ide,_de,Fde,Mde,Bde,zde,Vde,qde,Hde,Xde,Yde,Zde,Jde,tpe,rpe,ape,ipe,spe,upe,fpe,Nfe,ppe,Nce,wpe,Sce,Npe,Ece,$pe,Ape,kpe,Tce,Ace,Ope,Rpe,Ppe,Lpe,kce,Oce,pce,Upe,Cde,Wpe,Gpe,jpe,Sfe,Rce,Pce,Kpe,Lce,Zpe,ehe,nhe,ihe,ohe,lhe,che,Uce,dhe,hhe,ghe,yhe,xhe,Nhe,Che,Wce,Dhe,Ahe,_he,Gce,jce,Rhe,Bhe,Uhe,Kce,Whe,Ghe,Hhe,v8,Yhe,Efe,Qce,Qhe,eme,nme,ame,hce,DS,sme,Dfe,Tfe,$fe,ume,cme,dme,hme,gme,vme,bme,sfe,wme,Dme,$me,_me,ufe,Fme,Mme,Bme,lfe,Ihe,Ume,Wme,Gme,jme,Kme,Zme,Jme,tge,dfe,nge,hfe,gfe,age,sge,uge,cge,dge,xfe,lpe,hge,gge,yge,xge,Nge,Cge,Yce,_ge,Fge,Mge,qhe];for(const t of Pge)cP(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ql={},Lv={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Bge(t,e){ql[t]=e}function Is(t,e){if(!(t in ql)||e!=null){const r=zge(t,e);if(r!==null)ql[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=ql[t];return n==null||n.isContextLost()?(delete ql[t],Is(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),ql[t])}function Lge(t){if(!Ae().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function zge(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??Lge(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete ql[t]},!1),Ae().getBool("SOFTWARE_WEBGL_ENABLED")&&(Lv.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Lv)||n.getContext("experimental-webgl",Lv):n.getContext("webgl2",Lv)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var gh;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(gh||(gh={}));var Ni;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Ni||(Ni={}));var Hr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Hr||(Hr={}));function Xm(t,e){return[e,t]}function Uge(t,e){return t*e}function zv(t){const e=Oe(t),n=Math.ceil(e/4);return MN(n)}function Cd(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function Vge(t,e){const[n,r]=Cd(t,e);return n*r*4}function gT(t,e){const n=t;let r,a,i,s,o,u,l,c,f,d;return Ae().getNumber("WEBGL_VERSION")===2?(r=n.R32F,a=n.R16F,i=n.RGBA16F,s=n.RGBA32F,o=n.RED,l=4,c=1,f=n.HALF_FLOAT,d=n.FLOAT,u=n.RGBA8):(r=t.RGBA,a=t.RGBA,i=t.RGBA,s=n.RGBA,o=t.RGBA,l=4,c=4,f=e!=null?e.HALF_FLOAT_OES:null,d=t.FLOAT,u=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:s,textureFormatFloat:o,downloadTextureFormat:u,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:d}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ut(t,e){const n=e();return Ae().getBool("DEBUG")&&Wge(t),n}function Wge(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+jge(t,e))}const qge=596e-10,Gge=65504;function Hge(t){return!!(Ae().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||qge<Math.abs(t)&&Math.abs(t)<Gge)}function jge(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Uv(t,e){return Zo(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function Xge(t,e){const n=Zo(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(ut(t,()=>t.shaderSource(n,e)),ut(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Kge(t,e){const n=Zo(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(ut(t,()=>t.shaderSource(n,e)),ut(t,()=>t.compileShader(n)),Ae().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw y8(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const Yge=/ERROR: [0-9]+:([0-9]+):/g;function y8(t,e){const n=Yge.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],a=t.split(`
`),i=a.length.toString().length+2,s=a.map((f,d)=>If((d+1).toString(),i)+f);let o=0;for(let f=0;f<s.length;f++)o=Math.max(s[f].length,o);const u=s.slice(0,r-1),l=s.slice(r-1,r),c=s.slice(r);console.log(u.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${If(l[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function Zge(t){return Zo(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Qge(t,e){if(ut(t,()=>t.linkProgram(e)),!Ae().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function A2(t,e){if(ut(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function Jge(t,e){const n=Zo(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ut(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),ut(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function eve(t,e){const n=Zo(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ut(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),ut(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function tve(t){return Zo(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function nve(t,e){const n=Ae().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,a=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}function rve(t){return Zo(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function oO(t,e,n,r,a,i,s){const o=t.getAttribLocation(e,n);return o===-1?!1:(ut(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),ut(t,()=>t.vertexAttribPointer(o,a,t.FLOAT,!1,i,s)),ut(t,()=>t.enableVertexAttribArray(o)),!0)}function ave(t,e,n){lve(t,n),ut(t,()=>t.activeTexture(t.TEXTURE0+n)),ut(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function ive(t,e,n){return Zo(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function sve(t,e,n){return t.getUniformLocation(e,n)}function ove(t,e,n,r){ut(t,()=>ave(t,e,r)),ut(t,()=>t.uniform1i(n,r))}function I2(t,e,n){ut(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),ut(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function uO(t,e){ut(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),ut(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Vv(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+uve(t,e))}function uve(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Zo(t,e,n){const r=ut(t,()=>e());if(r==null)throw new Error(n);return r}function lve(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const a=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${a}.`)}}function nd(t,e=2){return Oe(t.slice(0,t.length-e))}function rd(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Wv(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[nd(t),...rd(t)]),e}function cve(t,e=!1){let n=Ae().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Ae().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Ae().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((o,u)=>u>=t.length-2?vC(t[u]):t[u]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Zu(t).newShape);let a=Oe(t),i=null;t.length<=1&&a<=n?i=[1,a]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const s=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||s)if(e){const o=nd(t);let u=2,l=2;t.length&&([u,l]=rd(t)),a=o*(u/2)*(l/2),i=MN(a).map(c=>c*2)}else i=MN(a);return i}function qv(t){return t%2===0}function p0(t,e){if(t=t.slice(-2),e=e.slice(-2),un(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||qv(n)&&qv(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&qv(t[0])&&qv(e[0])}let k2,_2;function fve(t){if(k2==null){const e=Is(t);k2=e.getParameter(e.MAX_TEXTURE_SIZE)}return k2}function dve(t){if(_2==null){const e=Is(t);_2=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,_2)}function pve(t){if(t===0)return 0;let e;const n=Is(t);return Ki(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Ki(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Ki(t,e){return t.getExtension(e)!=null}function lO(t){try{if(Is(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function hve(t){if(t===0)return!1;const e=Is(t);if(t===1){if(!Ki(e,"OES_texture_float"))return!1}else if(!Ki(e,"EXT_color_buffer_float"))return!1;return $S(e)}function mve(t){if(t===0)return!1;const e=Is(t);if(t===1){if(!Ki(e,"OES_texture_float")||!Ki(e,"WEBGL_color_buffer_float"))return!1}else{if(Ki(e,"EXT_color_buffer_float"))return $S(e);const r="EXT_color_buffer_half_float";if(Ki(e,r)){const a=e.getExtension(r);return gve(e,a)}return!1}return $S(e)}function $S(t){const e=gT(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),s}function gve(t,e){const n=gT(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(s),o}function vve(t){return t!==2?!1:Is(t).fenceSync!=null}function Km(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Y(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gt=Ae();gt.registerFlag("HAS_WEBGL",()=>gt.getNumber("WEBGL_VERSION")>0);gt.registerFlag("WEBGL_VERSION",()=>lO(2)?2:lO(1)?1:0);gt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);gt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>gt.get("WEBGL_VERSION")===2);gt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);gt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);gt.registerFlag("WEBGL_PACK",()=>gt.getBool("HAS_WEBGL"));gt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>gt.getBool("WEBGL_PACK"));gt.registerFlag("WEBGL_PACK_CLIP",()=>gt.getBool("WEBGL_PACK"));gt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>gt.getBool("WEBGL_PACK"));gt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>gt.getBool("WEBGL_PACK"));gt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>gt.getBool("WEBGL_PACK"));gt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>gt.getBool("WEBGL_PACK"));gt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>gt.getBool("WEBGL_PACK"));gt.registerFlag("WEBGL_PACK_REDUCE",()=>gt.getBool("WEBGL_PACK"));gt.registerFlag("WEBGL_LAZILY_UNPACK",()=>gt.getBool("WEBGL_PACK"));gt.registerFlag("WEBGL_CONV_IM2COL",()=>gt.getBool("WEBGL_PACK"));gt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>gt.getBool("WEBGL_PACK"));gt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>fve(gt.getNumber("WEBGL_VERSION")));gt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>dve(gt.getNumber("WEBGL_VERSION")));gt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=gt.getNumber("WEBGL_VERSION");return t===0?0:pve(t)});gt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>gt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!SP());gt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>hve(gt.getNumber("WEBGL_VERSION")));gt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>gt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:gt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));gt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>mve(gt.getNumber("WEBGL_VERSION")));gt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>vve(gt.getNumber("WEBGL_VERSION")));gt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>gt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);gt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});gt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>SP()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});gt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);gt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);gt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);gt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);gt.registerFlag("WEBGL_EXP_CONV",()=>!1);gt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>gt.getBool("IS_TEST"));gt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);gt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);gt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);gt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $a(){let t,e,n,r,a,i,s,o,u,l;return Ae().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",a="texture",i="outputColor",s="out vec4 outputColor;",o=Ae().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",s="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:s,defineSpecialNaN:o,defineSpecialInf:u,defineRound:l}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cc(t,e,n="index"){const r=wt(e);return r.map((a,i)=>{const s=`int ${t[i]} = ${n} / ${a}`,o=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${a}`:`index -= ${t[i]} * ${a}`;return`${s}; ${o};`}).join("")}function _b(t,e,n="index"){const r=wt(e);return r.map((a,i)=>{const s=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,o=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${s}; ${o};`}).join("")}function yve(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),a=new Array(n-1);a[n-2]=r[n-1];for(let i=n-3;i>=0;--i)a[i]=`(${a[i+1]} * ${r[i+1]})`;return a}function bve(t,e,n="index"){const r=t.map((i,s)=>s),a=yve(r,e);return a.map((i,s)=>{const o=`int ${t[s]} = ${n} / ${a[s]}`,u=s===a.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${a[s]}`:`index -= ${t[s]} * ${a[s]}`;return`${o}; ${u};`}).join("")}function vT(t){const e=wt(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function yT(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const b8=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:x8}=$ae;function xve(t,e,n){const r=[];if(t.forEach(h=>{const m=Oe(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${m>1?`[${m}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:v}=bT(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(v.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const a=r.join(`
`),i=t.map(h=>wve(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),s=e.texShape,o=$a(),u=Cve(o);let l,c,f=Tve(o);return e.isPacked?(l=Nve(e.logicalShape,s,n.enableShapeUniforms),c=Dve(o)):(l=Sve(e.logicalShape,s,n.enableShapeUniforms),c=Eve(o)),n.packedInputs&&(f+=kve),[f,u,c,a,l,i,n.userCode].join(`
`)}function Ed(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Wve(t,e);case 1:return Gve(t,e);case 2:return jve(t,e);case 3:return Kve(t,e);case 4:return Zve(t,e);case 5:return Qve(t);case 6:return Jve(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function w8(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return Vve(t);case 1:return qve(t,e);case 2:return Hve(t,e);case 3:return Xve(t,e);default:return Yve(t,e)}}function wve(t,e,n=!1,r){let a="";n?a+=w8(t,r):a+=Ed(t,r);const i=t.shapeInfo.logicalShape,s=e.logicalShape;return i.length<=s.length&&(n?a+=eye(t,e):a+=tye(t,e)),a}function Nve(t,e,n){switch(t.length){case 0:return N8();case 1:return _ve(t,e,n);case 2:return zve(t,e,n);case 3:return Fve(t,e,n);default:return Mve(t,e,n)}}function Sve(t,e,n){switch(t.length){case 0:return N8();case 1:return Ove(t,e,n);case 2:return Uve(t,e,n);case 3:return Rve(t,e,n);case 4:return Pve(t,e,n);case 5:return Bve(t,e);case 6:return Lve(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function Cve(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function Eve(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function Dve(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function Tve(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${$ve}
    ${Ave}
    ${Ive}
  `}const $ve=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Ave=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Ive=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,kve=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function N8(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function _ve(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function Ove(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Fve(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[2]/2),i=a*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec3(b, r, c);
    }
  `}function Rve(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${_b(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Cc(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Mve(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[t.length-1]/2),i=a*Math.ceil(t[t.length-2]/2);let s=i,o="",u="b, r, c";for(let l=2;l<t.length-1;l++)s*=t[t.length-l-1],o=`
      int b${l} = index / ${s};
      index -= b${l} * ${s};
    `+o,u=`b${l}, `+u;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec${t.length}(${u});
    }
  `}function Pve(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${_b(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Cc(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Bve(t,e){const n=Cc(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Lve(t,e){const n=Cc(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function zve(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(un(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const a=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec2(r, c);
    }
  `}function Uve(t,e,n){return un(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Ec(t){return`offset${t}`}function Vve(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=$a();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Wve(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[a,i]=t.shapeInfo.texShape;if(a===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=Ec(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${s});
      return sampleTexture(${n}, uv);
    }
  `;const[o,u]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${u}, ${s});
      return sampleTexture(${n}, uv);
    }
  `}function qve(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t.shapeInfo.texShape,i=$a();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${s[0]}, ${s[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function Gve(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Dd(t)}
      }
    `;const a=t.shapeInfo.texShape,i=a[0],s=a[1];if(s===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Ec(n);return s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${s}, index + ${o});
      return sampleTexture(${n}, uv);
    }
  `}function Hve(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,s=i[0],o=i[1],u=$a();if(i!=null&&un(n,i))return e?`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${u.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${s}.0);

        return ${u.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${a}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `;const l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${a}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${l[0]}, ${l[1]}, row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `}function jve(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&un(n,i)){if(e)return`
      float ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const d=i[0],h=i[1];return`
    float ${a}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:s,keptDims:o}=Zu(n),u=s;if(u.length<n.length){const d=Td(t,u),h=["row","col"];return`
      ${Ed(d,e)}
      float ${a}(int row, int col) {
        return ${a}(${$d(h,o)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Dd(t)}
      }
    `;const l=i[0],c=i[1],f=Ec(r);return c===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
      return sampleTexture(${r}, uv);
    }
  `:l===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${a}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${a}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${f};
    vec2 uv = uvFromFlat(${l}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function Xve(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const d=n.slice(1),h=[1,2],m=Td(t,d),v=["b","row","col"];return`
        ${w8(m,e)}
        vec4 ${a}(int b, int row, int col) {
          return ${a}(${$d(v,h)});
        }
      `}const o=$a();if(e)return`
    vec4 ${a}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const u=s[0],l=s[1],c=Math.ceil(n[2]/2),f=c*Math.ceil(n[1]/2);return`
    vec4 ${a}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${l}, ${f}, ${c}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function Kve(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],s=n[2],{newShape:o,keptDims:u}=Zu(n),l=o;if(l.length<n.length){const v=Td(t,l),y=["row","col","depth"];return`
        ${Ed(v,e)}
        float ${a}(int row, int col, int depth) {
          return ${a}(${$d(y,u)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${s}, 1)));
        ${Dd(t)}
      }
    `;const c=t.shapeInfo.texShape,f=c[0],d=c[1],h=t.shapeInfo.flatOffset;if(d===i&&h==null)return e?`
      float ${a}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${a}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${d}.0, ${f}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(d===s&&h==null)return e?`
      float ${a}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `;const m=Ec(r);return e?`
    float ${a}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${a}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${s} + depth + ${m};
        vec2 uv = uvFromFlat(${f}, ${d}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Yve(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=$a();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${a.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,s=i.length,o=t.shapeInfo.texShape,u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],l=u[0],c=u[1],f=Math.ceil(i[s-1]/2);let d=f*Math.ceil(i[s-2]/2),h="int b, int row, int col",m=`b * ${d} + (row / 2) * ${f} + (col / 2)`;for(let v=2;v<s-1;v++)h=`int b${v}, `+h,d*=i[s-v-1],m=`b${v} * ${d} + `+m;return`
    vec4 ${r}(${h}) {
      int index = ${m};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${l});
      return ${a.texture2D}(${n}, uv);
    }
  `}function Zve(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],s=n[2]*i,o=n[1]*s,{newShape:u,keptDims:l}=Zu(n);if(u.length<n.length){const w=Td(t,u),x=["row","col","depth","depth2"];return`
      ${Ed(w,e)}
      float ${a}(int row, int col, int depth, int depth2) {
        return ${a}(${$d(x,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${s}, ${i}, 1)));
        ${Dd(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,d=f[0],h=f[1],m=`int stride2 = ${r}Shape[3];`,v=`int stride1 = ${r}Shape[2] * stride2;`,y=`int stride0 = ${r}Shape[1] * stride1;`;if(h===o&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        ${m}
        ${v}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===i&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;const b=Ec(r);return e?`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${v}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${b});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${s} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${d}, ${h}, index + ${b});
      return sampleTexture(${r}, uv);
    }
  `}function Qve(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e[4],i=e[3]*a,s=e[2]*i,o=e[1]*s,{newShape:u,keptDims:l}=Zu(e);if(u.length<e.length){const v=Td(t,u),y=["row","col","depth","depth2","depth3"];return`
      ${Ed(v)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${$d(y,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${s}, ${i}, ${a})) +
          depth3;
        ${Dd(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,d=f[0],h=f[1];if(h===o&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${i}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=Ec(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${s} + depth * ${i} +
          depth2 * ${a} + depth3 + ${m};
      vec2 uv = uvFromFlat(${d}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Jve(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:i}=Zu(e);if(a.length<e.length){const y=Td(t,a),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${Ed(y)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${$d(b,i)});
      }
    `}const s=e[5],o=e[4]*s,u=e[3]*o,l=e[2]*u,c=e[1]*l;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${l}, ${u}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${Dd(t)}
      }
    `;const f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],m=d[1];if(m===c&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${l}, ${u}, ${o}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===s&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const v=Ec(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${l} + depth * ${u} +
          depth2 * ${o} + depth3 * ${s} + depth4 + ${v};
      vec2 uv = uvFromFlat(${h}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Dd(t){const e=t.name,n=Oe(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function eye(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,s=e.logicalShape.length,o=x8(t.shapeInfo.logicalShape,e.logicalShape),u=In(s),l=s-i;let c;const f=["x","y","z","w","u","v"];i===0?c="":s<2&&o.length>=1?c="coords = 0;":c=o.map(w=>`coords.${f[w+l]} = 0;`).join(`
`);let d="";s<2&&i>0?d="coords":d=t.shapeInfo.logicalShape.map((w,x)=>`coords.${f[x+l]}`).join(", ");let h="return outputValue;";const v=Oe(t.shapeInfo.logicalShape)===1,b=Oe(e.logicalShape)===1;if(i===1&&!v&&!b)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(v&&!b)s===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(o.length){const w=i-2,x=i-1;o.indexOf(w)>-1&&o.indexOf(x)>-1?h="return vec4(outputValue.x);":o.indexOf(w)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(x)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${a}() {
      ${u} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${d});
      ${h}
    }
  `}function tye(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=e.texShape,s=t.shapeInfo.texShape,o=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===u&&t.shapeInfo.flatOffset==null&&un(s,i))return`
      float ${a}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const l=In(u),c=x8(t.shapeInfo.logicalShape,e.logicalShape),f=u-o;let d;const h=["x","y","z","w","u","v"];o===0?d="":u<2&&c.length>=1?d="coords = 0;":d=c.map(v=>`coords.${h[v+f]} = 0;`).join(`
`);let m="";return u<2&&o>0?m="coords":m=t.shapeInfo.logicalShape.map((v,y)=>`coords.${h[y+f]}`).join(", "),`
    float ${a}() {
      ${l} coords = getOutputCoords();
      ${d}
      return get${r}(${m});
    }
  `}function In(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function bT(t,e,n){const{newShape:r,keptDims:a}=Zu(e),i=e.length,s=t&&i===3&&e[0]===1,o=s?e.slice(1):r,u=!t&&i>1&&!un(e,n)&&r.length<i||s;return{useSqueezeShape:u,uniformShape:u?o:e,keptDims:a}}function Td(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function $d(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nye(t,e,n,r){const a=n.map((c,f)=>{const d={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(d.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[f],shapeInfo:d}}),i=a.map(c=>c.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=xve(a,s,e),u=Kge(t.gl,o),l=t.createProgram(u);return Ae().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:u,source:o,webGLProgram:l,inShapeInfos:i,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(l),Object.assign({program:e,fragmentShader:u,source:o,webGLProgram:l,inShapeInfos:i,outShapeInfo:s},S8(t,e,l)))}function S8(t,e,n){const r=[],a=[];let i,s,o,u=null,l=null;l=t.getUniformLocation(n,"NAN",!1),Ae().getNumber("WEBGL_VERSION")===1&&(u=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const f of e.variableNames){const d={name:f,uniform:t.getUniformLocation(n,f,c),offset:t.getUniformLocation(n,`offset${f}`,c)};e.enableShapeUniforms&&(d.shape=t.getUniformLocation(n,`${f}Shape`,c),d.texShape=t.getUniformLocation(n,`${f}TexShape`,c)),r.push(d)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",c),o=t.getUniformLocation(n,"outShapeStrides",c),s=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const f of e.customUniforms)a.push(t.getUniformLocation(n,f.name,c));return{variablesLocations:r,customUniformLocations:a,infLoc:u,nanLoc:l,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:s}}function cO(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const a=n.logicalShape,i=e[r],s=i.shape;if(!un(a,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${a} and ${s} must match`);if(n.isUniform&&i.isUniform)return;const o=n.texShape,u=i.isUniform?null:i.texData.texShape;if(!un(o,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${u} must match`)})}function rye(t,e,n,r,a){e.program.enableShapeUniforms||(cO(e.inShapeInfos,n),cO([e.outShapeInfo],[r]));const i=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,s[0],s[1]):t.setOutputMatrixTexture(i.texture,s[0],s[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),Ae().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let u=0;u<n.length;++u){const l=n[u],{uniform:c,offset:f,shape:d,texShape:h}=e.variablesLocations[u];if(d){const{uniformShape:m}=bT(e.program.packedInputs,l.shape,l.texData.texShape);switch(m.length){case 1:t.gl.uniform1iv(d,new Int32Array(m));break;case 2:t.gl.uniform2iv(d,new Int32Array(m));break;case 3:t.gl.uniform3iv(d,new Int32Array(m));break;case 4:t.gl.uniform4iv(d,new Int32Array(m));break}}if(h&&t.gl.uniform2i(h,l.texData.texShape[0],l.texData.texShape[1]),c!=null){if(l.isUniform){if(Oe(l.shape)<2)t.gl.uniform1f(c,l.uniformValues[0]);else{let m=l.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),t.gl.uniform1fv(c,m)}continue}l.texData.slice!=null&&f!=null&&t.gl.uniform1i(f,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,c,u)}}const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:t.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(o,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const u=wt(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(u));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(u));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(u));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&a)for(let u=0;u<e.program.customUniforms.length;++u){const l=e.program.customUniforms[u],c=e.customUniformLocations[u],f=a[u];if(l.type==="float")t.gl.uniform1fv(c,f);else if(l.type==="vec2")t.gl.uniform2fv(c,f);else if(l.type==="vec3")t.gl.uniform3fv(c,f);else if(l.type==="vec4")t.gl.uniform4fv(c,f);else if(l.type==="int")t.gl.uniform1iv(c,f);else if(l.type==="ivec2")t.gl.uniform2iv(c,f);else if(l.type==="ivec3")t.gl.uniform3iv(c,f);else if(l.type==="ivec4")t.gl.uniform4iv(c,f);else throw Error(`uniform type ${l.type} is not supported yet.`)}t.executeProgram()}function aye(t,e,n){let r="";e.concat(n).forEach(s=>{const o=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!s.isUniform){const u=s.texData.texShape,{useSqueezeShape:l,uniformShape:c,keptDims:f}=bT(t.packedInputs,s.shape,u);let d="",h="",m="";if(c.length===1&&t.packedInputs){const C=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];d=`${C[0]>1}_${C[1]>1}`}else if(c.length===2&&!t.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const C=wt(c);m=`${C[0]===u[1]}_${C[C.length-1]===u[1]}`}const v=s.shape.length,y=c.length===2&&un(s.shape,u),b=Oe(s.shape)===1,w=Kf(s.shape,n.shape),x=!t.packedInputs&&v===n.shape.length&&un(u,n.texData.texShape),S=t.packedInputs||c.length>2?"":`${u[0]>1}_${u[1]>1}`;r+=`${v}_${x}_${l?f:""}_${c.length}_${b}_${w}_${y}_${d}_${h}_${m}_${S}_${o}`}else{const u=s.isUniform?"uniform":s.texData.texShape;r+=`${s.shape}_${u}_${o}`}});const a=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+a+`${Ae().getNumber("WEBGL_VERSION")}`,i}function ca(t){return Ae().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iye{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=gh.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=$a();this.outputShape=e,this.enableShapeUniforms=ca(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?_b(["r","c","d"],e):Cc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sye{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=gh.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=$a();this.outputShape=e,this.enableShapeUniforms=ca(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?_b(["r","c","d"],e):Cc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oye{constructor(e){this.variableNames=["A"],this.outTexUsage=Ni.DOWNLOAD;const n=$a();this.outputShape=e,this.userCode=`
      ${b8}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uye{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ni.DOWNLOAD;const n=$a();this.outputShape=e,this.userCode=`
      ${b8}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lye={R:0,G:1,B:2,A:3};class fO{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const a=$a();this.outputShape=e,this.enableShapeUniforms=ca(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let s="";for(let o=0;o<r.length;o++){const u=r[o];s+=`
          if(offset == ${o}) {
            result = values[${lye[u]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?yT():vT(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${a.texture2D}(A, uv);
          ${s}
        }
        ${a.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cye{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=$a();this.outputShape=e,this.enableShapeUniforms=ca(this.outputShape.length);let a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let s=0;s<=1;s++)for(let o=0;o<=1;o++){const u=s*2+o;a+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${s} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${s};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${u}] = values[0];
            } else if (offset == 1) {
              result[${u}] = values[1];
            } else if (offset == 2) {
              result[${u}] = values[2];
            } else {
              result[${u}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?yT():vT(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${a}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fye(t){const e=$a(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Xge(t,n)}function dye(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Jge(t,e)}function pye(t){const e=new Uint16Array([0,1,2,2,1,3]);return eve(t,e)}function Ym(t,e,n,r,a,i){nve(e,n);const s=tve(t),o=t.TEXTURE_2D;return ut(t,()=>t.bindTexture(o,s)),ut(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),ut(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),ut(t,()=>t.texParameteri(o,t.TEXTURE_MIN_FILTER,t.NEAREST)),ut(t,()=>t.texParameteri(o,t.TEXTURE_MAG_FILTER,t.NEAREST)),Ae().getNumber("WEBGL_VERSION")===1?ut(t,()=>t.texImage2D(o,0,r,e,n,0,a,i,null)):ut(t,()=>t.texStorage2D(o,1,r,e,n)),ut(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:s,texShape:[n,e]}}function C8(t){return t.internalFormatFloat}function hye(t,e,n,r){const[a,i]=Xm(e,n);return Ym(t,a,i,C8(r),r.textureFormatFloat,t.FLOAT)}function E8(t){return t.internalFormatHalfFloat}function mye(t,e,n,r){const[a,i]=Xm(e,n);return Ym(t,a,i,E8(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function D8(t){return t.downloadTextureFormat}function gye(t,e,n,r){const[a,i]=Xm(e,n);return Ym(t,a,i,D8(r),t.RGBA,t.UNSIGNED_BYTE)}function T8(t){return t.internalFormatPackedFloat}function vye(t,e,n,r){const[a,i]=Cd(e,n);return Ym(t,a,i,T8(r),t.RGBA,t.FLOAT)}function $8(t){return t.internalFormatPackedHalfFloat}function yye(t,e,n,r){const[a,i]=Cd(e,n);return Ym(t,a,i,$8(r),t.RGBA,r.textureTypeHalfFloat)}function bye(t,e,n){return ut(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),oO(t,e,"clipSpacePos",n,3,20,0)&&oO(t,e,"uv",n,2,20,12)}function xye(t,e,n,r,a,i){ut(t,()=>t.bindTexture(t.TEXTURE_2D,e));let s,o,u;a instanceof Uint8Array?(s=new Uint8Array(n*r*4),o=t.UNSIGNED_BYTE,u=t.RGBA):(s=new Float32Array(n*r*4),o=t.FLOAT,u=i.internalFormatPackedFloat),s.set(a),Ae().getNumber("WEBGL_VERSION")===2?ut(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,o,s)):ut(t,()=>t.texImage2D(t.TEXTURE_2D,0,u,n,r,0,t.RGBA,o,s)),ut(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function wye(t,e,n){ut(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?Ae().getNumber("WEBGL_VERSION")===2?ut(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):ut(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Ae().getNumber("WEBGL_VERSION")===2?ut(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):ut(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),ut(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Nye(t,e,n,r){const a=t.createBuffer();ut(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,a));const o=4*4*e*n;return ut(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)),ut(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),ut(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),a}function Sye(t,e,n){const r=t,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function Cye(t,e,n,r){const[a,i]=Xm(e,n),s=4,o=new Uint8Array(Uge(e*n,s));return ut(t,()=>t.readPixels(0,0,a,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function Eye(t,e,n,r,a,i,s,o){const u=t,l=new Float32Array(Vge(i,s));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function Dye(t,e,n){const r=new Float32Array(e*n*4);return ut(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O2{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=Ae().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,Bge(n,e)):this.gl=Is(n),e=this.gl,Ae().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>ut(i,()=>i.createVertexArray()),this.bindVertexArray=s=>ut(i,()=>i.bindVertexArray(s)),this.deleteVertexArray=s=>ut(i,()=>i.deleteVertexArray(s)),this.getVertexArray=()=>ut(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>ut(e,()=>i.createVertexArrayOES()),this.bindVertexArray=s=>ut(e,()=>i.bindVertexArrayOES(s)),this.deleteVertexArray=s=>ut(e,()=>i.deleteVertexArrayOES(s)),this.getVertexArray=()=>ut(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Ae().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",s="OES_texture_half_float";if(this.textureFloatExtension=Uv(this.gl,i),Ki(this.gl,s))this.textureHalfFloatExtension=Uv(this.gl,s);else if(Ae().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Ki(this.gl,a))this.colorBufferHalfFloatExtension=Uv(this.gl,a);else if(Ae().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Ki(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Ki(this.gl,a))this.colorBufferHalfFloatExtension=this.gl.getExtension(a);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=dye(this.gl),this.indexBuffer=pye(this.gl),this.framebuffer=rve(this.gl),this.textureConfig=gT(this.gl,this.textureHalfFloatExtension)}get debug(){return Ae().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;ut(e,()=>e.finish()),ut(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),ut(e,()=>e.deleteFramebuffer(this.framebuffer)),ut(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),ut(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),ut(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),hye(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),mye(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),gye(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),wye(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,a){this.throwIfDisposed(),xye(this.gl,e,n,r,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),yye(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),vye(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(uO(this.gl,this.framebuffer),this.outputTexture=null),ut(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Cye(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,a,i,s){return Eye(this.gl,e,n,r,a,i,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return Sye(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const a=Nye(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(Ae().getBool("WEBGL_FENCE_API_ENABLED")){const a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const s=a.clientWaitSync(i,0,0);return s===a.ALREADY_SIGNALED||s===a.CONDITION_SATISFIED},n=i}else Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Dye(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=fye(n));const r=Zge(n);ut(n,()=>n.attachShader(r,this.vertexShader)),ut(n,()=>n.attachShader(r,e)),Qge(n,r);const a=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&A2(n,a),a}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;ut(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),bye(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(ut(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&A2(this.gl,this.program),ut(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?ive(this.gl,e,n):sve(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),ut(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),ove(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[a,i]=Cd(n,r);this.setOutputMatrixTextureDriver(e,a,i)}setOutputMatrixWriteRegion(e,n,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,n)}setOutputPackedMatrixWriteRegion(e,n,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&A2(this.gl,this.program),Vv(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}ut(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),ut(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Uv(this.gl,Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(a.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await Bk(()=>this.disposed||this.isQueryAvailable(e,Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),a=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=Tye(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in Ae().platform&&(r=Ae().platform.setTimeoutCustom.bind(Ae().platform)),Bk(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),I2(this.gl,e,this.framebuffer),this.debug&&Vv(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(I2(this.gl,this.outputTexture,this.framebuffer),this.debug&&Vv(this.gl)):uO(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const a=this.gl;I2(a,e,this.framebuffer),this.debug&&Vv(a),this.outputTexture=e,ut(a,()=>a.viewport(0,0,n,r)),ut(a,()=>a.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,a){this.throwIfDisposed(),ut(this.gl,()=>this.gl.scissor(e,n,r,a))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function Tye(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:$ye,bincountImpl:A8,bincountReduceImpl:Aye,bitwiseAndImpl:Iye,castImpl:kye,ceilImpl:_ye,concatImpl:Oye,equalImpl:Fye,expImpl:Rye,expm1Impl:Mye,floorImpl:Pye,gatherNdImpl:Bye,gatherV2Impl:Lye,greaterImpl:zye,greaterEqualImpl:Uye,lessImpl:Vye,lessEqualImpl:Wye,linSpaceImpl:qye,logImpl:Gye,maxImpl:Hye,maximumImpl:jye,minimumImpl:Xye,multiplyImpl:Kye,negImpl:Yye,notEqualImpl:Zye,prodImpl:Qye,raggedGatherImpl:Jye,raggedRangeImpl:e0e,raggedTensorToTensorImpl:t0e,rangeImpl:n0e,rsqrtImpl:r0e,scatterImpl:a0e,sigmoidImpl:i0e,simpleAbsImpl:I8,sliceImpl:s0e,sparseFillEmptyRowsImpl:o0e,sparseReshapeImpl:u0e,sparseSegmentReductionImpl:k8,sqrtImpl:l0e,staticRegexReplaceImpl:c0e,stridedSliceImpl:f0e,stringNGramsImpl:d0e,stringSplitImpl:p0e,stringToHashBucketFastImpl:h0e,subImpl:m0e,tileImpl:g0e,topKImpl:v0e,transposeImpl:xT,uniqueImpl:y0e}=wfe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _8(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Sa(t,e){return e===1?[t]:_8(t,e)}function b0e(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x0e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ca(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Sa("rc",this.rank),r=In(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),s=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${a}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${s}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let i=`${r===0?"r":"rp1"}, ${a===0?"c":"cp1"}`;for(let s=2;s<this.rank;s++)i=`${e[e.length-1-s]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],a=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${a};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O8{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ca(this.outputShape.length);let r="";for(let a=0;a<4;a++){let i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${a>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${a}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${a>0?"}":""}
      `}this.userCode=`
      ${w0e(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?yT():vT(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function w0e(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?bve(["r","c","d"],"inputShape"):Cc(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N0e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const a=pO(n,r),i=hO(e,a,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const s=dO(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();const u=this.freeTextures[i].pop();return this.usedTextures[i].push(u),u}let o;return a===Hr.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===Hr.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===Hr.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===Hr.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===Hr.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(o),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),o}releaseTexture(e,n,r,a){if(this.freeTextures==null)return;const i=pO(r,a),s=hO(n,i,a);s in this.freeTextures||(this.freeTextures[s]=[]);const o=dO(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,a),u=Ae().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[s].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const l=this.usedTextures[s],c=l&&l.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function S0e(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function dO(t,e,n,r,a){const i=C0e(e,r);let s;if(a){const[u,l]=Cd(t[0],t[1]);s=u*l}else{const[u,l]=Xm(t[0],t[1]);s=u*l}const o=S0e(n,i);return s*o}function C0e(t,e){switch(t){case Hr.PACKED_2X2_FLOAT32:return T8(e);case Hr.PACKED_2X2_FLOAT16:return $8(e);case Hr.UNPACKED_FLOAT32:return C8(e);case Hr.UNPACKED_FLOAT16:return E8(e);case Hr.PACKED_4X1_UNSIGNED_BYTE:return D8(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function E0e(t){return Ae().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Hr.PACKED_2X2_FLOAT32:Hr.UNPACKED_FLOAT32:t?Hr.PACKED_2X2_FLOAT16:Hr.UNPACKED_FLOAT16}function pO(t,e){if(t===Ni.UPLOAD)return Hr.PACKED_2X2_FLOAT32;if(t===Ni.RENDER||t==null)return E0e(e);if(t===Ni.DOWNLOAD||t===Ni.PIXELS)return Hr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function hO(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Js{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ca(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const os="if (isnan(x)) return x;",D0e="return x;",mO="return abs(x);",T0e="return (x >= 0.0) ? x : (exp(x) - 1.0);",$0e=os+`
  return (x < 0.0) ? 0.0 : x;
`,A0e=os+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,xu="return x;",I0e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k0e="return x;",_0e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,O0e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,F0e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,R0e="return 1.0 / (1.0 + exp(-1.0 * x));";class Tu{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ca(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M0e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ca(this.outputShape.length);const n=e.length,r=Sa("rc",n),a=In(n),i=b0e(n,r),s=r.slice(-2),o=n<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`
      void main() {
        ${a} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P0e=rD,B0e=1e-7,L0e=1e-4,Gv={};function z0e(t){return t in Gv||(Gv[t]={}),Gv[t]}const U0e=Ae().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),V0e=600;function W0e(){return Ae().global.screen==null?1024:Ae().global.screen.height*Ae().global.screen.width*window.devicePixelRatio*V0e/1024/1024}class Ob extends gC{nextDataId(){return Ob.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Ae().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof O2)n=e;else{const r=Is(Ae().getNumber("WEBGL_VERSION"),e);n=new O2(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Is(Ae().getNumber("WEBGL_VERSION"));n=new O2(r),this.binaryCache=z0e(Ae().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new N0e(this.gpgpu),this.numMBBeforeWarning=W0e(),this.texData=new rP(this,Hs())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,a,i,s){const o=this.makeTensorInfo(n,r),u=this.texData.get(o.dataId);u.isPacked=!1,u.texture={texture:e,texShape:[a,i]},u.texShape=[a,i];const l=Wv(n),c=new fO(l,!1,s),f=this.runWebGLProgram(c,[o],r,[[a,i]]);return f.shape=n,u.texture=null,this.disposeIntermediateTensorInfo(o),f.dataId}write(e,n,r){if((Ae().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Ae().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:n,dtype:r,values:e,usage:Ni.UPLOAD,refCount:1}),a}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,a,i){if(Ae().getBool("DEBUG")&&this.checkNumericalProblems(n),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:a,values:n,usage:Ni.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:a,complexTensorInfos:i,slice:s,shape:o,isPacked:u}=n;if(s!=null){let d;u?d=new Tu(o,xu):d=new Js(o,xu);const h=this.runWebGLProgram(d,[{dataId:e,shape:o,dtype:a}],a),m=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(a==="string")return r;const l=this.activeTimers!=null;let c;l&&(c=Oa());let f;if(a==="complex64"){const d=this.readSync(i.real.dataId),h=this.readSync(i.imag.dataId);f=Vo(d,h)}else f=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=Oa()-c),this.convertAndCacheOnCPU(e,f)}async read(e){if(this.pendingRead.has(e)){const m=this.pendingRead.get(e);return new Promise(v=>m.push(v))}const n=this.texData.get(e),{values:r,shape:a,slice:i,dtype:s,complexTensorInfos:o,isPacked:u}=n;if(i!=null){let m;u?m=new Tu(a,xu):m=new Js(a,xu);const v=this.runWebGLProgram(m,[{dataId:e,shape:a,dtype:s}],s),y=this.read(v.dataId);return this.disposeIntermediateTensorInfo(v),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(Ae().getBool("DEBUG")&&!Ae().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Ae().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l=null,c;if(s!=="complex64"&&Ae().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const m=this.texData.get(c.dataId);l=this.gpgpu.createBufferFromTexture(m.texture.texture,...zv(a))}this.pendingRead.set(e,[]),s!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(s==="complex64"){const m=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),v=m[0],y=m[1];f=Vo(v,y)}else if(l==null)f=this.getValuesFromTexture(e);else{const m=Oe(a);f=this.gpgpu.downloadFloat32MatrixFromBuffer(l,m)}if(c!=null&&this.disposeIntermediateTensorInfo(c),l!=null){const m=this.gpgpu.gl;ut(m,()=>m.deleteBuffer(l))}const d=this.convertAndCacheOnCPU(e,f),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(m=>m(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Hs().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e,n={}){const r=this.texData.get(e),{values:a,shape:i,slice:s,dtype:o,isPacked:u,texture:l}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(s!=null){let h;u?h=new Tu(i,xu):h=new Js(i,xu);const m=this.runWebGLProgram(h,[{dataId:e,shape:i,dtype:o}],o),v=this.readToGPU(m,n);return this.disposeIntermediateTensorInfo(m),v}if(l==null)throw a!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),f=Hs().makeTensorFromTensorInfo(c),d=this.texData.get(c.dataId);return Object.assign({tensorRef:f},d.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>Mu(a));return Qt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Qt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!Hge(r))throw Ae().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:a}=this.texData.get(e),i=Oe(n);if(Ae().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const d=this.decode(e),h=this.texData.get(d.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...zv(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(d),m}const s=Ae().getBool("WEBGL_PACK")&&a===!0,o=s?Wv(n):n,u=s?new uye(o):new oye(o),l=this.runWebGLProgram(u,[{shape:o,dtype:r,dataId:e}],"float32"),c=this.texData.get(l.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(l),f}timerAvailable(){return Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let a=!1;this.programTimersStack==null?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=Pu(this.activeTimers.map(u=>u.query)).filter(u=>u!=null),s=Pu(this.activeTimers.map(u=>u.name)).filter(u=>u!=null);this.activeTimers=n,a&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const u=await Promise.all(i);o.kernelMs=ZK(u),o.getExtraProfileInfo=()=>u.map((l,c)=>({name:s[c],ms:l})).map(l=>`${l.name}: ${l.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Oa(),endMs:null}}endTimer(e){return Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Oa(),e)}async getQueryTime(e){if(Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:a,usage:i,isPacked:s,slice:o}=this.texData.get(e),u=o&&o.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),n!=null&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,s)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=U0e){return Ae().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&Oe(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){wi("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return P0e(e.shape,n)}packedUnaryOp(e,n,r){const a=new Tu(e.shape,n),i=this.compileAndRun(a,[e],r);return Hs().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const a=I8(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,a)}if(Ae().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,mO,e.dtype);const n=new Js(e.shape,mO),r=this.compileAndRun(n,[e]);return Hs().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&kh(r[0])){const i=r.map(s=>ku(s));a=this.write(i,e,n)}else a=this.write(r,e,n);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:n}}makeOutput(e,n,r){return Hs().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new M0e(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new x0e(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[nd(e.shape),...rd(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[nd(n),...rd(n)],s=new O8(i,r),o=!0,u=[r],l=this.runWebGLProgram(s,[a],e.dtype,u,o);return{dataId:l.dataId,shape:n,dtype:l.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:a,shape:i,dtype:s}=r;if(n!=null){const d=Oe(i),h=n[0]*n[1]*4;Y(d<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=Wv(i);let u;a?u=new sye(o):u=new iye(o);const l=!0,c=[n??zv(o)],f=this.runWebGLProgram(u,[{shape:o,dtype:s,dataId:e}],s,c,l,n);return{dtype:s,shape:i,dataId:f.dataId}}runWebGLProgram(e,n,r,a,i=!1,s){const o=this.makeTensorInfo(e.outputShape,r),u=this.texData.get(o.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===gh.DENSE){const b=s??zv(e.outputShape);u.texShape=b.map(w=>w*2)}if(e.outTexUsage!=null&&(u.usage=e.outTexUsage),Oe(o.shape)===0)return u.values=Xr(o.dtype,0),o;const l=[],c=n.map(b=>{if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let w=this.texData.get(b.dataId);if(w.texture==null){if(!e.packedInputs&&Oe(b.shape)<=Ae().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:w.values};e.packedInputs&&(w.isPacked=!0,w.shape=b.shape)}if(this.uploadToGPU(b.dataId),!!w.isPacked!=!!e.packedInputs)b=w.isPacked?this.unpackTensor(b):this.packTensor(b),l.push(b),w=this.texData.get(b.dataId);else if(w.isPacked&&!p0(w.shape,b.shape)){const x=b,S=b.shape;b.shape=w.shape,b=this.packedReshape(b,S),l.push(b),w=this.texData.get(b.dataId),x.shape=S}return{shape:b.shape,texData:w,isUniform:!1}});this.uploadToGPU(o.dataId);const f={shape:o.shape,texData:u,isUniform:!1},d=aye(e,c,f),h=this.getAndSaveBinary(d,()=>nye(this.gpgpu,e,c,f)),m=this.activeTimers!=null;let v;m&&(v=this.startTimer()),Ae().get("ENGINE_COMPILE_ONLY")||rye(this.gpgpu,h,c,f,a),l.forEach(b=>this.disposeIntermediateTensorInfo(b)),m&&(v=this.endTimer(v),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(v)}));const y=Ae().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){const b=Oa();b-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!Ae().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&i===!1){const b=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),b}return o}compileAndRun(e,n,r,a,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,a,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Ae().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=De(()=>{if(!Ae().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Ae().getBool("DEBUG");Ae().set("DEBUG",!1);const n=this.abs(St(1e-8)).dataSync()[0];if(Ae().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?B0e:L0e}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:a,values:i,texture:s,usage:o,isPacked:u}=n;if(s!=null)return;const l=this.activeTimers!=null;let c;l&&(c=Oa());let f=n.texShape;if(f==null&&(f=cve(r,u),n.texShape=f),i!=null){const d=Wv(r);let h,m=f[1],v=f[0];const y=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(u||!y)&&([m,v]=Cd(f[0],f[1])),u?h=new cye(d,y):h=new fO(d,y);const b=y?[v,m]:f,w=this.makeTensorInfo(b,a),x=this.texData.get(w.dataId);y?x.usage=Ni.PIXELS:x.usage=Ni.UPLOAD,x.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(w.dataId),m,v,i);const S=[[v,m]],E=this.runWebGLProgram(h,[w],a,S,!0),A=this.texData.get(E.dataId);n.texShape=A.texShape,n.isPacked=A.isPacked,n.usage=A.usage,Ae().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(n.texture=A.texture,n.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(w),l&&(this.uploadWaitMs+=Oa()-c)}else{const d=this.acquireTexture(f,o,a,u);n.texture=d}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:a}=r;return n!=null&&(r.values=q0e(n,a)),r.values}acquireTexture(e,n,r,a){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,a)}computeBytes(e,n){return e[0]*e[1]*Vy(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(a=>{try{this.checkCompletion_(n),a(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await gL(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(y8(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:a,nanLoc:i,outShapeLocation:s,outShapeStridesLocation:o,outTexShapeLocation:u}=S8(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=a,e.nanLoc=i,e.outShapeLocation=s,e.outShapeStridesLocation=o,e.outTexShapeLocation=u}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:a,height:i,width:s,channels:o}=e,u=Hs().backend;if(!u.gpgpu.gl.isTexture(a))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=u.writeTexture(a,n,r,i,s,o);return Hs().makeTensorFromDataId(l,n,r,u)}}Ob.nextDataId=0;function q0e(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */CP()&&TP("webgl",()=>new Ob,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wT=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class pc{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Wt(n,r),this.enableShapeUniforms=ca(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dc=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Ad{constructor(e,n,r,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Wt(n,r);const i=this.outputShape.length;this.enableShapeUniforms=ca(i);let s="";if(a)if(i===0||Oe(this.outputShape)===1)s=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(s=`
          ${In(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?s+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:s+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const u=Sa("coords",i);this.enableShapeUniforms?s+=`
            bool nextRowOutOfBounds =
              (${u[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${u[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:s+=`
            bool nextRowOutOfBounds =
              (${u[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${u[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${s}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function di(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const G0e={kernelName:Qh,backendName:"webgl",kernelFunc:di};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ul(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(i.dataId),o=di({inputs:{x:r},backend:n}),u=di({inputs:{x:a},backend:n});return s.complexTensorInfos={real:o,imag:u},i}const H0e={kernelName:DC,backendName:"webgl",kernelFunc:ul};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F8="return (a < 0.) ? b * a : a;",R8=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function j0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r,s=n.makeTensorInfo([],"float32",Qu(i,"float32")),o=Ae().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ad(R8,a.shape,s.shape):new pc(F8,a.shape,s.shape),u=n.runWebGLProgram(o,[a,s],"float32");return n.disposeIntermediateTensorInfo(s),u}const X0e={kernelName:p1,backendName:"webgl",kernelFunc:j0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M8="return (a < 0.) ? b * a : a;",P8=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function K0e(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e,i=Ae().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ad(P8,r.shape,a.shape):new pc(M8,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}const Y0e={kernelName:_1,backendName:"webgl",kernelFunc:K0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Id="if (isnan(x)) return x;";function mn({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:i})=>{const{x:s}=a,o=i,u=r||s.dtype;if(o.shouldExecuteOnCPU([s])&&n!=null){const f=o.texData.get(s.dataId),d=n(f.values,u);return o.makeTensorInfo(s.shape,u,d)}const l=Ae().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return l?c=new Tu(s.shape,e):c=new Js(s.shape,t),o.runWebGLProgram(c,[s],u)}}function Jr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:i}){return({inputs:s,backend:o})=>{const{a:u,b:l}=s,c=o;if(r&&u.dtype==="complex64"){const m=c.texData.get(u.dataId),v=c.texData.get(l.dataId),[y,b]=[[m.complexTensorInfos.real,v.complexTensorInfos.real],[m.complexTensorInfos.imag,v.complexTensorInfos.imag]].map(x=>{const[S,C]=x,E={dataId:S.dataId,dtype:S.dtype,shape:u.shape},A={dataId:C.dataId,dtype:C.dtype,shape:l.shape},k=new pc(t,u.shape,l.shape);return c.runWebGLProgram(k,[E,A],oi(S.dtype,C.dtype))}),w=ul({inputs:{real:y,imag:b},backend:c});return c.disposeIntermediateTensorInfo(y),c.disposeIntermediateTensorInfo(b),w}const f=i||oi(u.dtype,l.dtype);if((u.dtype==="string"||l.dtype==="string"||c.shouldExecuteOnCPU([u,l]))&&a!=null){const m=c.texData.get(u.dataId).values,v=c.texData.get(l.dataId).values,y=u.dtype==="string"?Wo(m):m,b=u.dtype==="string"?Wo(v):v,[w,x]=a(u.shape,l.shape,y,b,f),S=c.makeTensorInfo(x,f),C=c.texData.get(S.dataId);return C.values=w,S}const d=Ae().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return d?h=new Ad(e,u.shape,l.shape,n):h=new pc(t,u.shape,l.shape),c.runWebGLProgram(h,[u,l],f)}}function vh(t,e=!1){if(t==="linear")return e?k0e:D0e;if(t==="relu")return e?O0e:$0e;if(t==="elu")return e?_0e:T0e;if(t==="relu6")return e?F0e:A0e;if(t==="prelu")return e?P8:M8;if(t==="leakyrelu")return e?R8:F8;if(t==="sigmoid")return e?R0e:I0e;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B8{constructor(e,n,r,a=!1,i=!1,s=!1,o=null,u=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=ca(this.outputShape.length);const c=a?e[1]:e[2],f=Math.ceil(c/2),d=a?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",m=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let y="",b="";o&&(u?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:l?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:y=`vec4 activation(vec4 x) {
          ${o}
        }`,b="result = activation(result);");const w=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let x="rc.x",S="rc.x";e[0]<n[0]?x=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(S=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${y}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${x};
        int batchB = ${S};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${v[0]});
          result += (${m[1]} * ${v[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${w}

        ${b}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gO={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class vO{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Wt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yO="return a * b;";function NT(t){const{inputs:e,backend:n}=t,{a:r,b:a}=e,i=oi(r.dtype,a.dtype);if(r.dtype==="complex64"){const o=n.texData.get(r.dataId),u=n.texData.get(a.dataId),l=new vO(gO.REAL,r.shape,a.shape),c=new vO(gO.IMAG,r.shape,a.shape),f=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:a.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:a.shape}],d=n.runWebGLProgram(l,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),m=ul({inputs:{real:d,imag:h},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),m}if(n.shouldExecuteOnCPU([r,a])){const o=n.texData.get(r.dataId),u=n.texData.get(a.dataId),[l,c]=Kye(r.shape,a.shape,o.values,u.values,i),f=n.makeTensorInfo(c,i),d=n.texData.get(f.dataId);return d.values=l,f}let s;return Ae().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new Ad(yO,r.shape,a.shape):s=new pc(yO,r.shape,a.shape),n.runWebGLProgram(s,[r,a],i)}const Z0e={kernelName:om,backendName:"webgl",kernelFunc:NT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q0e(t,e,n){const r=[nd(t.shape),...rd(t.shape)],a={dtype:t.dtype,shape:r,dataId:t.dataId},i=[nd(e),...rd(e)],s=new O8(i,r),o=!0,u=[r],l=n.runWebGLProgram(s,[a],t.dtype,u,o);return{dataId:l.dataId,shape:e,dtype:l.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function it(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,s=n,o=Oe(a.shape),u=aP(i,o),l=Oe(u);Y(o===l,()=>`The new shape (${u}) has ${l} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const c=s.texData.get(a.dataId);return c.isPacked&&!p0(a.shape,u)&&!(c.texture!==null&&p0(c.shape,u))?Q0e(a,u,s):(s.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype})}const J0e={kernelName:F1,backendName:"webgl",kernelFunc:it};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bO{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:s}=e;this.outputShape=[a,s];const o=Math.floor(r/4)*4,u=r%4;let l="sumValue += dot(values, ones);";if(n!=null){const f=1/n;l=`sumValue += dot(values * ${Hf(f)?f.toPrecision(2):f}, ones);`}let c="";i%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${l}
        }

        int inIdx = inOffset + ${o};
        if (${u===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${l}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${l}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${l}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e1e{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:s}=e;this.outputShape=[a,s];let o="0.0",u="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",u="min"):n==="max"&&(o="-1.0 / 1e-20",u="max");let l=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?l="sumValue":n==="prod"?l="prodValue":n==="all"?l="allValue":n==="any"&&(l="anyValue");const c=Math.floor(r/4)*4,f=r%4;let d=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${u}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${u}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(o="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(o="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t1e(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=vb(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Tc(t,e,n,r){const a=t1e(t.shape);let i=t;for(let s=0;s<a.length;s++){const{inSize:o,windowSize:u,outSize:l}=a[s];let c,f;n==="mean"?c=s===0?new bO({windowSize:u,inSize:o,batchSize:t.shape[0],outSize:l},o):new bO({windowSize:u,inSize:o,batchSize:t.shape[0],outSize:l}):c=new e1e({windowSize:u,inSize:o,batchSize:t.shape[0],outSize:l},n),f=i,i=r.runWebGLProgram(c,[i],e),f.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(f)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n1e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let s=0;s<r.length;s++)r[s]=e[n[s]];this.outputShape=r,this.rank=r.length;const a=In(this.rank),i=r1e(n);this.userCode=`
    void main() {
      ${a} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function r1e(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let a=0;a<t.length;a++)r[t[a]]=n[a];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a1e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=In(this.rank),i=_8("rc",this.rank),s=new Array(this.rank);for(let c=0;c<n.length;c++)s[n[c]]=i[c];const o=`vec2(${s.slice(-2).join()})`,u=`++${i[this.rank-1]} < ${r[this.rank-1]}`,l=`getChannel(getA(${s.join()}), ${o})`;this.userCode=`
    void main() {
      ${a} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${l};
      if(${u}) {
        result[1] = ${l};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${l};
        if(${u}) {
          result[3] = ${l};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fb(t,e,n){const r=Ae().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new a1e(t.shape,e):new n1e(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i1e(t,e,n,r){const a=e,i=t.shape.length,s=tn(a,t.shape);let o=s;const u=Zn(o,i),l=u!=null;let c=t;l&&(c=Fb(t,u,r),o=ur(o.length,i)),Zr("sum",o,i);const[f,d]=Mr(c.shape,o);let h=f;n&&(h=or(f,s));const m=Oe(d),y=Oe(t.shape)/m,b=it({inputs:{x:c},attrs:{shape:[y,m]},backend:r}),w=CE(t.dtype),x=Tc(b,w,"sum",r),S=it({inputs:{x},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(x),l&&r.disposeIntermediateTensorInfo(c),S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rb(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;return i1e(a,i,s,n)}const s1e={kernelName:z1,backendName:"webgl",kernelFunc:Rb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ea(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{perm:i}=r,s=n,o=a.shape.length,u=new Array(o);for(let c=0;c<u.length;c++)u[c]=a.shape[i[c]];let l;if(s.shouldExecuteOnCPU([a])){const f=s.texData.get(a.dataId).values,d=xT(f,a.shape,a.dtype,i,u);l=s.makeTensorInfo(u,a.dtype);const h=s.texData.get(l.dataId);h.values=d}else l=Fb(a,i,s);return l}const o1e={kernelName:kf,backendName:"webgl",kernelFunc:Ea};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L8=1e3;function h0({a:t,b:e,transposeA:n,transposeB:r,backend:a,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:u=null}){const l=t.shape.length,c=e.shape.length,f=n?t.shape[l-2]:t.shape[l-1],d=r?e.shape[c-1]:e.shape[c-2],h=n?t.shape[l-1]:t.shape[l-2],m=r?e.shape[c-2]:e.shape[c-1],v=t.shape.slice(0,-2),y=e.shape.slice(0,-2),b=Oe(v),w=Oe(y),S=Wt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([h,m]);Y(f===d,()=>`Error in matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const C=n?[b,f,h]:[b,h,f],E=r?[w,m,d]:[w,d,m],A=it({inputs:{x:t},backend:a,attrs:{shape:C}}),k=it({inputs:{x:e},backend:a,attrs:{shape:E}}),T=[A,k],I=Math.max(b,w),$=n?A.shape[1]:A.shape[2],O=i!=null,B=s!=null,z=u==="leakyrelu",L=u!=null?vh(u,!0):null,F=O||B||z||L!=null;let R;if((h===1||m===1)&&$>L8&&F===!1){let M=A,j=k;n&&(M=Ea({inputs:{x:A},backend:a,attrs:{perm:[0,2,1]}}),T.push(M)),r&&(j=Ea({inputs:{x:k},backend:a,attrs:{perm:[0,2,1]}}),T.push(j));const q=m!==1,H=m===1;let G=M;q&&(G=it({inputs:{x:M},backend:a,attrs:{shape:[I,$,1]}}),T.push(G));const ne=m===1?2:1;let ue=j;H&&(ue=it({inputs:{x:j},backend:a,attrs:{shape:[I,1,$]}}),T.push(ue));const te=NT({inputs:{a:G,b:ue},backend:a});R=Rb({inputs:{x:te},backend:a,attrs:{axis:ne,keepDims:!0}}),T.push(te)}else{const M=oi(t.dtype,e.dtype),j=new B8(C,E,[I,h,m],n,r,O,L,B,z),q=[A,k];if(i!=null&&q.push(i),B&&q.push(s),z){const H=a.makeTensorInfo([],"float32",Qu(o,"float32"));q.push(H),T.push(H)}R=a.runWebGLProgram(j,q,M)}const W=it({inputs:{x:R},backend:a,attrs:{shape:S}});T.push(R);for(const M of T)a.disposeIntermediateTensorInfo(M);return W}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u1e(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:s,preluActivationWeights:o}=e,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:f}=r;return h0({a,b:i,transposeA:u,transposeB:l,backend:n,bias:s,preluActivationWeights:o,leakyreluAlpha:f,activation:c})}const l1e={kernelName:Wy,backendName:"webgl",kernelFunc:u1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xO="return abs(x);";function c1e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),s=I8(i.values);return n.makeTensorInfo(r.shape,r.dtype,s)}let a;return Ae().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new Tu(r.shape,xO):a=new Js(r.shape,xO),n.runWebGLProgram(a,[r],r.dtype)}const f1e={kernelName:G0,backendName:"webgl",kernelFunc:c1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d1e=os+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,p1e=mn({opSnippet:d1e}),h1e={kernelName:_h,backendName:"webgl",kernelFunc:p1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m1e=os+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,g1e=mn({opSnippet:m1e}),v1e={kernelName:Oh,backendName:"webgl",kernelFunc:g1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wO="return a + b;",y1e=Jr({opSnippet:wO,packedOpSnippet:wO,supportsComplex:!0,cpuKernelImpl:$ye}),b1e={kernelName:vd,backendName:"webgl",kernelFunc:y1e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x1e{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,s)=>`T${s}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${a};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w1e{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,s)=>`T${s}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${a};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ey(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return di({inputs:{x:r[0]},backend:n});if(r.length>Ae().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const u=Math.floor(r.length/2),l=Ey({inputs:r.slice(0,u),backend:n}),c=Ey({inputs:r.slice(u),backend:n});return Ey({inputs:[l,c],backend:n})}const a=r.map(u=>u.dtype).reduce((u,l)=>oi(u,l)),i=r.map(u=>u.shape),o=Ae().getBool("WEBGL_PACK")?new w1e(r[0].shape,i):new x1e(r[0].shape,i);return n.runWebGLProgram(o,r,a)}const N1e={kernelName:H0,backendName:"webgl",kernelFunc:Ey};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r,o=a.shape.length,u=tn(i,a.shape);let l=u;const c=Zn(l,o);let f=a;c!=null&&(f=Ea({inputs:{x:a},backend:n,attrs:{perm:c}}),l=ur(l.length,o)),Zr("all",l,o);const[d,h]=Mr(f.shape,l),m=Oe(h),v=it({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),y=Tc(v,v.dtype,"all",n);let b;if(s){const w=or(d,u);b=it({inputs:{x:y},backend:n,attrs:{shape:w}})}else b=it({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(f),b}const C1e={kernelName:xC,backendName:"webgl",kernelFunc:S1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r,o=a.shape.length,u=tn(i,a.shape);let l=u;const c=Zn(l,o);let f=a;c!=null&&(f=Ea({inputs:{x:a},backend:n,attrs:{perm:c}}),l=ur(l.length,o)),Zr("any",l,o);const[d,h]=Mr(f.shape,l),m=Oe(h),v=it({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),y=Tc(v,v.dtype,"any",n);let b;if(s){const w=or(d,u);b=it({inputs:{x:y},backend:n,attrs:{shape:w}})}else b=it({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(f),b}const D1e={kernelName:wC,backendName:"webgl",kernelFunc:E1e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T1e{constructor(e,n,r){this.variableNames=["A"];const{windowSize:a,batchSize:i,outSize:s}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s];const o=n==="max"?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${a};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${a}; i++) {
          int inIdx = ${u};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $1e{constructor(e,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Y(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],s=Math.ceil(i/n);this.outputShape=e.slice(0,-1),s>1&&this.outputShape.push(s),a||this.variableNames.push("bestIndicesA");const o=this.outputShape,u=o.length,l=In(u),c=Sa("coords",u);let f,d;if(s===1){d=u+1;const k=In(d);f=`
        ${k} sourceLocR = ${k}(${c.join()}, 0);
        ++${c[u-1]};
        ${k} sourceLocG = ${k}(${c.join()}, 0);
        ++${c[u-2]};
        ${k} sourceLocA = ${k}(${c.join()}, 0);
        --${c[u-1]};
        ${k} sourceLocB = ${k}(${c.join()}, 0);
        --${c[u-2]};`}else d=u,f=`
        ${l} sourceLocR = coords;
        ++${c[u-1]};
        ${l} sourceLocG = coords;
        ++${c[u-2]};
        ${l} sourceLocA = coords;
        --${c[u-1]};
        ${l} sourceLocB = coords;
        --${c[u-2]};`;const h=["x","y","z","w","u","v"].slice(0,d),m="."+h[d-1],v=h.map(k=>"int "+k),y=Sa("sourceLocR",d-1).concat("inIdx.r"),b=Sa("sourceLocG",d-1).concat("inIdx.g"),w=Sa("sourceLocB",d-1).concat("inIdx.b"),x=Sa("sourceLocA",d-1).concat("inIdx.a"),S=r==="max"?"greaterThan":"lessThan",C=a?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${x.join()})));`,E=`vec4(
            getAChannel(${y.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${w.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,A=a?"":`
      float getBestIndicesAChannel(${v.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${v.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${A}
      void main() {
        ${l} coords = getOutputCoords();
        bool hasNextCol = ${c[u-1]} < ${o[u-1]-1};
        bool hasNextRow = ${c[u-2]} < ${o[u-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${E};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${C}
          vec4 candidate = ${E};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${S}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z8(t,e,n,r=null){let a=e.shape[0],i=e.shape[1];r!=null&&(a=r.shape[0],i=r.shape[1]);const s=vb(i),o={windowSize:s,inSize:i,batchSize:a,outSize:Math.ceil(i/s)},u=new T1e(o,n,r==null),l=[e];r!=null&&l.push(r);const c=t.runWebGLProgram(u,l,"int32");if(c.shape[1]===1)return c;const f=z8(t,e,n,c);return t.disposeIntermediateTensorInfo(c),f}function U8(t,e,n,r=null){const a=r!=null?r.shape:e.shape,i=a[a.length-1],s=vb(i),o=new $1e(a,s,n,r==null),u=r==null?[e]:[e,r],l=t.runWebGLProgram(o,u,"int32");if(l.shape.length===e.shape.length){const c=U8(t,e,n,l);return t.disposeIntermediateTensorInfo(l),c}return l}function V8(t,e,n,r){const a=[n];if(Zr("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,e.shape.length),!Ae().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],s=t.texData.get(e.dataId),o=s!==null&&s.isPacked;let u=e;o&&(u=t.unpackTensor(e),i.push(u));const[l,c]=Mr(u.shape,a),f=Oe(c),d=it({inputs:{x:u},backend:t,attrs:{shape:[-1,f]}});i.push(d);const h=z8(t,d,r);i.push(h);const m=it({inputs:{x:h},backend:t,attrs:{shape:l}});return i.forEach(v=>t.disposeIntermediateTensorInfo(v)),m}return U8(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let s=tn(i,a.shape);const o=Zn(s,a.shape.length);let u=a;const l=[];o!=null&&(u=Ea({inputs:{x:a},backend:n,attrs:{perm:o}}),l.push(u),s=ur(s.length,u.shape.length)),Zr("argMax",[s[0]],u.shape.length);const c=V8(n,u,s[0],"max");return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const I1e={kernelName:j0,backendName:"webgl",kernelFunc:A1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let s=tn(i,a.shape);const o=Zn(s,a.shape.length);let u=a;const l=[];o!=null&&(u=Ea({inputs:{x:a},backend:n,attrs:{perm:o}}),l.push(u),s=ur(s.length,u.shape.length)),Zr("argMin",[s[0]],u.shape.length);const c=V8(n,u,s[0],"min");return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const _1e={kernelName:X0,backendName:"webgl",kernelFunc:k1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O1e=os+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,F1e=mn({opSnippet:O1e}),R1e={kernelName:Fh,backendName:"webgl",kernelFunc:F1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M1e=os+"return log(x + sqrt(x * x + 1.0));",P1e=mn({opSnippet:M1e}),B1e={kernelName:Rh,backendName:"webgl",kernelFunc:P1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L1e=os+`
  return atan(x);
`,z1e=mn({opSnippet:L1e}),U1e={kernelName:Mh,backendName:"webgl",kernelFunc:z1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V1e=wT+`
  return atan(a, b);
`,W1e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Dc+`
  return result;
`,q1e=Jr({opSnippet:V1e,packedOpSnippet:W1e}),G1e={kernelName:Bh,backendName:"webgl",kernelFunc:q1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H1e=os+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,j1e=mn({opSnippet:H1e}),X1e={kernelName:Ph,backendName:"webgl",kernelFunc:j1e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yh{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,o=e.strideHeight,u=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;const v=n==="avg",y=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,b=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let w="0.0";if(v||(w="-1.0 / 1e-20"),r){const k=">=";this.userCode=`
        const ivec2 strides = ivec2(${o}, ${u});
        const ivec2 pads = ivec2(${h}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${l}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${k} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${a?i?y:b:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const x="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");const C=Math.floor(s/4)*4,E=s%4,A=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${x}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${u});
      const ivec2 pads = ivec2(${h}, ${m});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${l}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${C}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${A}
          }

          int xC = xCCorner + ${C};
          if (${E===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${A}
          } else if (${E===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${A}
          } else if (${E===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${A}
          }
        }
        setOutput(${S});
      }
    `}}class ST{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,o=e.strideDepth,u=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,f=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterDepth,m=e.effectiveFilterHeight,v=e.effectiveFilterWidth,y=e.padInfo.front,b=e.padInfo.top,w=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg";let S="0.0";if(x||(S="-1.0 / 1e-20"),r){const I=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${u}, ${l});
        const ivec3 pads = ivec3(${y}, ${b}, ${w});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${v};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${I} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${a?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${m} * ${v} +
                      wR * ${v} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const C="max";let E=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(E="avgValue / max(count, 1.0)");const A=Math.floor(s/4)*4,k=s%4,T=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${u}, ${l});
      const ivec3 pads = ivec3(${y}, ${b}, ${w});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${A}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${T}
            }

            int xC = xCCorner + ${A};
            if (${k===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${k===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${k===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${T}
            }
          }
        }
        setOutput(${E});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;Km(a,"avgPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:u}=r,l=1;Y(Yr(s,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${l}'`);const c=is(a.shape,i,s,l,o,u);if(c.filterWidth===1&&c.filterHeight===1&&un(c.inShape,c.outShape))return di({inputs:{x:a},backend:n});const f=new yh(c,"avg",!1);return n.runWebGLProgram(f,[a],"float32")}const Y1e={kernelName:K0,backendName:"webgl",kernelFunc:K1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:u,dataFormat:l}=r,c=[1,1,1],f=jo(a.shape,i,s,c,o,u,l),d=new ST(f,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}const Q1e={kernelName:Y0,backendName:"webgl",kernelFunc:Z1e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J1e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,s=e.dilationHeight,o=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=u-1-e.padInfo.top,f=l-1-e.padInfo.left,d=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${f});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u};
            wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${l};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class ebe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,s=e.strideHeight,o=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,m=f-1-e.padInfo.front,v=d-1-e.padInfo.top,y=h-1-e.padInfo.left,b=1/(n*r*a);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${v}, ${y});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${u}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${l}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,s=i,{filterSize:o,strides:u,pad:l,dimRoundingMode:c}=r,f=[1,1,1],d=jo(s.shape,o,u,f,l,c),h=new ebe(d);return n.runWebGLProgram(h,[a],s.dtype)}const nbe={kernelName:SC,backendName:"webgl",kernelFunc:tbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,s=i;Km([a,i],"avgPoolGrad");const{filterSize:o,strides:u,pad:l}=r,c=is(s.shape,o,u,1,l),f=new J1e(c);return n.runWebGLProgram(f,[a],s.dtype)}const abe={kernelName:NC,backendName:"webgl",kernelFunc:rbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ibe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:s,transposeB:o}=r;return h0({a,b:i,transposeA:s,transposeB:o,backend:n})}const sbe={kernelName:Z0,backendName:"webgl",kernelFunc:ibe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class obe{constructor(e,n,r,a,i,s){this.outputShape=[],this.variableNames=["x","mean","variance"],Wt(e,n),Wt(e,r);let o="0.0";a!=null&&(Wt(e,a),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let u="1.0";i!=null&&(Wt(e,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${u};
        float inv = scale * inversesqrt(variance + float(${s}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ube{constructor(e,n,r,a,i,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Wt(e,n),Wt(e,r);let o="vec4(0.0)";a!=null&&(Wt(e,a),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let u="vec4(1.0)";i!=null&&(Wt(e,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${u};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${s}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lbe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:a,variance:i,offset:s,scale:o}=t;Y(a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;u==null&&(u=.001);const l=[r,a,i];let c=null;s!=null&&(c=s.shape,l.push(s));let f=null;o!=null&&(f=o.shape,l.push(o));const d=Ae().getBool("WEBGL_PACK_NORMALIZATION")?new ube(r.shape,a.shape,i.shape,c,f,u):new obe(r.shape,a.shape,i.shape,c,f,u);return e.runWebGLProgram(d,l,l[0].dtype)},cbe={kernelName:c1,backendName:"webgl",kernelFunc:lbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fbe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=In(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=dbe(this.rank);let a;const i=e.map((s,o)=>`sourceLoc.${AS[o]} = start[${o}] + coords.${AS[o]};`);a=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${a}
        setOutput(getSource(${r}));
      }
    `}}const AS=["x","y","z","w","u","v"];function dbe(t){if(t===1)return"sourceLoc";if(t<=6)return AS.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pbe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=In(this.rank),r=Sa("coords",this.rank),a=Sa("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${a.slice(-2).join()})`,s=`getChannel(getSource(${a.join()}), ${i})`,o=`
      result.x = ${s};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${a[this.rank-1]};
        result.y = ${s};
        --${a[this.rank-1]};
      }
    `,u=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${a[this.rank-2]};
        result.z = ${s};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${a[this.rank-1]};
          result.w = ${s};
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,f)=>`start[${f}]`).join()});`:e.map((c,f)=>`${a[f]} = ${r[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${l}
        vec4 result = vec4(0.);
        ${o}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hbe(t,e,n,r){const a=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),s=r.texData.get(i.dataId);Object.assign(s,a),s.refCount=1,s.shape=n,s.dtype=t.dtype;let o=vD(e,wt(t.shape));a.slice&&(o+=a.slice.flatOffset),s.slice={flatOffset:o,origDataId:a.slice&&a.slice.origDataId||t.dataId};const u=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,u+1),i}function kd(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:s}=r,[o,u]=gb(a,i,s);if(hD(a,o,u),Oe(u)===0)return n.makeTensorInfo(u,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||a.dtype==="string"){const f=n.texData.get(a.dataId),d=s0e(f.values,o,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,d)}const{isPacked:l}=n.texData.get(a.dataId),c=gD(a.shape,o,u);if(l||!c){const f=Ae().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new pbe(u):new fbe(u),d=[o];return n.runWebGLProgram(f,[a],a.dtype,d)}return n.uploadToGPU(a.dataId),hbe(a,o,u,n)}const mbe={kernelName:L1,backendName:"webgl",kernelFunc:kd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gbe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:s}=r;Y(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((w,x)=>w*x),u=Mm(a.shape,i,o),l=Pm(u.length,i.length),c=Bm(a.shape,i,o),f=ND(s,i.length),d=SD(c,s,i.length),h=[],m=it({inputs:{x:a},backend:n,attrs:{shape:u}}),v=Ea({inputs:{x:m},backend:n,attrs:{perm:l}}),y=it({inputs:{x:v},backend:n,attrs:{shape:c}}),b=kd({inputs:{x:y},backend:n,attrs:{begin:f,size:d}});return h.push(m),h.push(v),h.push(y),h.forEach(w=>n.disposeIntermediateTensorInfo(w)),b},vbe={kernelName:Q0,backendName:"webgl",kernelFunc:gbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ybe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:s}=r,o=n.readSync(a.dataId),u=n.readSync(i.dataId),l=A8(o,u,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,l)}const bbe={kernelName:CC,backendName:"webgl",kernelFunc:ybe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xbe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,wbe=`
  return float(int(a.r) & int(b.r));
`;function Nbe(t){const{inputs:e,backend:n}=t,{a:r,b:a}=e,i=Ae().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=Ae().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,a])||s===1){const u=n.texData.get(r.dataId).values,l=n.texData.get(a.dataId).values,[c,f]=Iye(r.shape,a.shape,u,l,r.dtype),d=n.makeTensorInfo(f,r.dtype),h=n.texData.get(d.dataId);return h.values=c,d}let o;return i?o=new Ad(xbe,r.shape,a.shape,!1):o=new pc(wbe,r.shape,a.shape),n.runWebGLProgram(o,[r,a],r.dtype)}const Sbe={kernelName:J0,backendName:"webgl",kernelFunc:Nbe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cbe(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.readSync(r.dataId),s=n.readSync(a.dataId),o=Wt(Array.from(i),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const Ebe={kernelName:EC,backendName:"webgl",kernelFunc:Cbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dbe="return float(a != b);",W8=Jr({opSnippet:Dbe,cpuKernelImpl:Zye,dtype:"bool"}),Tbe={kernelName:T1,backendName:"webgl",kernelFunc:W8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zm(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return di({inputs:{x:a.complexTensorInfos.real},backend:n})}const $be={kernelName:aE,backendName:"webgl",kernelFunc:Zm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Abe="return float(int(x));";function Ibe(t,e){const n=new Js(t.shape,Abe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IS(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return di({inputs:{x:a},backend:n});const s=br(a.shape),o=IS({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=ul({inputs:{real:o,imag:s},backend:n});return s.dispose(),n.disposeIntermediateTensorInfo(o),u}if(a.dtype==="complex64"){const s=Zm({inputs:{input:a},backend:n}),o=IS({inputs:{x:s},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(s),o}if(!iP(a.dtype,i)){const s=di({inputs:{x:a},backend:n});return{dataId:s.dataId,shape:s.shape,dtype:i}}if(n.shouldExecuteOnCPU([a])){const s=n.texData.get(a.dataId).values,[o,u,l]=kye(s,a.shape,a.dtype,i);return n.makeTensorInfo(o,u,l)}if(i==="int32")return Ibe(a,n);if(i==="bool"){const s=n.makeTensorInfo([],"bool",Xr("bool",1)),u=W8({inputs:{a,b:s},backend:n});return n.disposeIntermediateTensorInfo(s),u}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${i}`)}const kbe={kernelName:Lh,backendName:"webgl",kernelFunc:IS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NO="return ceil(x);",_be=mn({opSnippet:NO,packedOpSnippet:NO,cpuKernelImpl:_ye}),Obe={kernelName:zh,backendName:"webgl",kernelFunc:_be};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fbe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rbe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{clipValueMin:i,clipValueMax:s}=r;let o;Ae().getBool("WEBGL_PACK_CLIP")?o=new Rbe(a.shape):o=new Fbe(a.shape);const u=[[i],[s]];return n.runWebGLProgram(o,[a],a.dtype,u)}const Pbe={kernelName:Uh,backendName:"webgl",kernelFunc:Mbe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bbe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SO(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function Lbe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=n.texData.get(r.dataId),i=new Bbe(r.shape),s=[SO(r,a.complexTensorInfos.real),SO(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,s,s[0].dtype)}const zbe={kernelName:e1,backendName:"webgl",kernelFunc:Lbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ube{constructor(e){this.outputShape=[],this.outputShape=no(e,1),this.variableNames=e.map((s,o)=>`T${o}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let s=1;s<n.length;s++)n[s]=n[s-1]+e[s][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let s=1;s<n.length;s++){const o=n[s-1];r.push(`else if (yC < ${n[s]}) setOutput(getT${s}(yR, yC-${o}));`)}const a=n.length,i=n[n.length-1];r.push(`else setOutput(getT${a}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vbe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=no(e,n);const r=this.outputShape,a=r.length,i=In(a),s=Sa("coords",a),o=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map((v,y)=>`T${y}`);const u=new Array(e.length-1);u[0]=e[0][n];for(let v=1;v<u.length;v++)u[v]=u[v-1]+e[v][n];const l=o[n],c=o.slice(-2),f=o.join();let d=`if (${l} < ${u[0]}) {
        return getChannel(
            getT0(${f}), vec2(${c.join()}));
        }`;for(let v=1;v<u.length;v++){const y=u[v-1];d+=`
        if (${l} < ${u[v]}  && ${l} >= ${u[v-1]}) {
          return getChannel(
            getT${v}(${Hv(o,l,y)}),
            vec2(${Hv(c,l,y)}));
        }`}const h=u.length,m=u[u.length-1];d+=`
        return getChannel(
          getT${h}(${Hv(o,l,m)}),
          vec2(${Hv(c,l,m)}));`,this.userCode=`
      float getValue(${o.map(v=>"int "+v)}) {
        ${d}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${s}), 0., 0., 0.);

        ${s[a-1]} = ${s[a-1]} + 1;
        if (${s[a-1]} < ${r[a-1]}) {
          result.g = getValue(${s});
        }

        ${s[a-2]} = ${s[a-2]} + 1;
        if (${s[a-2]} < ${r[a-2]}) {
          result.a = getValue(${s});
        }

        ${s[a-1]} = ${s[a-1]} - 1;
        if (${s[a-2]} < ${r[a-2]} &&
            ${s[a-1]} < ${r[a-1]}) {
          result.b = getValue(${s});
        }
        setOutput(result);
      }
    `}}function Hv(t,e,n){const r=t.indexOf(e);return t.map((i,s)=>s===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mb(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return di({inputs:{x:a.complexTensorInfos.imag},backend:n})}const Wbe={kernelName:qC,backendName:"webgl",kernelFunc:Mb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Up(t,e,n){const r=t[0].dtype;if(r==="complex64"){const h=t.map(w=>Zm({inputs:{input:w},backend:n})),m=t.map(w=>Mb({inputs:{input:w},backend:n})),v=Up(h,e,n),y=Up(m,e,n),b=ul({inputs:{real:v,imag:y},backend:n});return h.forEach(w=>n.disposeIntermediateTensorInfo(w)),m.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),b}let a=n.shouldExecuteOnCPU(t);if(r==="string"&&(a=!0),a){const h=t.map(S=>{const E=[-1,Oe(S.shape.slice(e))];return it({inputs:{x:S},backend:n,attrs:{shape:E}})}),m=h.map(S=>({vals:n.readSync(S.dataId),shape:S.shape})),v=no(h.map(S=>S.shape),1),y=h[0].shape[0]===1,b=Oye(m,v,r,y),w=no(t.map(S=>S.shape),e),x=n.makeTensorInfo(w,r,b);return h.forEach(S=>n.disposeIntermediateTensorInfo(S)),x}const i=t.filter(h=>Oe(h.shape)>0),s=Ae().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const h=s?new Js(t[0].shape,xu):new Tu(t[0].shape,xu);return n.runWebGLProgram(h,t,r)}const o=Ae().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>o){const h=[];for(let v=0;v<i.length;v+=o){const y=i.slice(v,v+o);h.push(Up(y,e,n))}const m=Up(h,e,n);for(const v of h)n.disposeIntermediateTensorInfo(v);return m}if(s){const h=new Vbe(i.map(m=>m.shape),e);return n.runWebGLProgram(h,i,r)}const{tensors2D:u,outShape:l}=qbe(i,e,n),c=new Ube(u.map(h=>h.shape)),f=n.runWebGLProgram(c,u,r);u.forEach(h=>n.disposeIntermediateTensorInfo(h));const d=it({inputs:{x:f},attrs:{shape:l},backend:n});return n.disposeIntermediateTensorInfo(f),d}function qbe(t,e,n){const r=no(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>it({inputs:{x:i},attrs:{shape:[-1,Oe(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q8(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=tn(a,e[0].shape)[0],s=e.map(l=>l.shape);bD(s,i);const o=no(e.map(l=>l.shape),i);if(Oe(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const u=e.filter(l=>Oe(l.shape)>0);return u.length===1?di({inputs:{x:u[0]},backend:n}):Up(u,i,n)}const Gbe={kernelName:t1,backendName:"webgl",kernelFunc:q8};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G8{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const s=e.padInfo.top,o=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,m=Math.floor(e.inChannels/4)*4,v=e.inChannels%4,y=e.dataFormat==="channelsLast",b=y?1:2,w=y?2:3,x=y?3:1;let S="",C="";r&&(a?S=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?S=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:S=`
          float activation(float x) {
            ${r}
          }
        `,C="result = activation(result);");const E=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${S}

      const ivec2 strides = ivec2(${u}, ${l});
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${x}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${w}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${y}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${v===1}) {

              if (${y}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${v===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${y}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${v===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${y}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${E}
        ${C}
        setOutput(result);
      }
    `}}class Hbe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,a=e.padInfo.left,i=e.strideDepth,s=e.strideHeight,o=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,f=e.filterDepth,d=e.filterHeight,h=e.filterWidth,m=Math.floor(e.inChannels/4)*4,v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${s}, ${o});
      const ivec3 pads = ivec3(${n}, ${r}, ${a});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${u};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${l};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${v===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${v===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${v===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H8{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ca(this.outputShape.length);const s=e.padInfo.left,o=e.strideWidth,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,f=c;let d=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<c;y++)d+=`
           vec4 xTexelC${y*2};
           int xTexelC${y*2}Ready;
           vec4 xTexelC${y*2+1};
           int xTexelC${y*2+1}Ready;
           vec4 xC${y};`;d+=`
     for (int r = 0; r < ${l}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let y=0;y<c;y++)d+=`
           xTexelC${y*2} = vec4(0.0);
           xTexelC${y*2}Ready = 0;
           xTexelC${y*2+1} = vec4(0.0);
           xTexelC${y*2+1}Ready = 0;
           xC${y} = vec4(0.0);`;d+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let y=0;y<(f+1)/2;y++){const b=y*2;if(d+=`
           xC = xCCorner + ${b*u};
           `,o===1){if(b<c&&(s%2===1?(d+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,u===1&&b>0?d+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:d+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):d+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<c)){const w=s%2===0?vC(u):u;u%2===0&&s%2===1||u%2!==0&&s%2!==1?(d+=`
                   xCOffset = xC + imod(pads[1], 2) + ${w};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,u>1?d+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:d+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):w===1?d+=`
                     xC${b+1} = xTexelC${b};
                     `:d+=`
                     xCOffset = xC + ${w};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<c&&(s%2===1?(d+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<c&&(d+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(d+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<c&&(d+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<c&&(d+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<c&&(d+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}d+=`
     }
   `,d+=`
     }
   `,d+=`
     }
   `;let h="",m="";r&&(a?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,m="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${d}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${v}
         ${m}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jbe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ca(this.outputShape.length);const{dataFormat:r}=n,a=$a(),i=r==="channelsLast",s=i?1:2,o=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let l="";for(let c=0;c<=1;c++)for(let f=0;f<=1;f++)l+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${c};

          ${u}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${s}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${l}

        ${a.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m0(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function j8({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:o=null}){const u=t.shape,l=r.texData.get(t.dataId),c=n.inChannels,f=u[0]*u[1]*u[2],d=n.outChannels,h=n.dataFormat==="channelsLast",m=!1,v=!1;let y;const b=[];if(i!=null){const S=m0(i.shape,h);S!=null&&(i=it({inputs:{x:i},backend:r,attrs:{shape:S}}),b.push(i))}if(a!=null){const S=m0(a.shape,h);S!=null&&(a=it({inputs:{x:a},backend:r,attrs:{shape:S}}),b.push(a))}if(!((f===1||d===1)&&c>L8)&&l.isPacked&&h&&l.texture!=null&&u[2]%2!==0&&un(l.shape.slice(-3),u.slice(-3))){const S=u[0]*u[1]*(u[2]+1),C={dataId:t.dataId,shape:[1,S,n.inChannels],dtype:t.dtype},E=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,Y(p0(l.shape,C.shape),()=>`packed reshape ${l.shape} to ${C.shape} isn't free`);const A=it({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(A);const k=h0({a:C,b:A,backend:r,transposeA:m,transposeB:v,bias:a,activation:o,preluActivationWeights:i,leakyreluAlpha:s}),T=r.texData.get(k.dataId);Y(T.isPacked,()=>"batchMatMul result is expected to be packed"),l.shape=E,T.shape=n.outShape,y=di({inputs:{x:k},backend:r}),y.shape=n.outShape,b.push(k)}else{const S=n.outHeight*n.outWidth,C=it({inputs:{x:t},backend:r,attrs:{shape:h?[n.batchSize,S,n.inChannels]:[n.batchSize,n.inChannels,S]}}),E=it({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),A=h0({a:h?C:E,b:h?E:C,transposeA:!h,transposeB:v,backend:r,bias:a,activation:o,preluActivationWeights:i,leakyreluAlpha:s});y=it({inputs:{x:A},backend:r,attrs:{shape:n.outShape}}),b.push(C),b.push(E),b.push(A)}for(const S of b)r.disposeIntermediateTensorInfo(S);return y}function X8({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:o=null}){const{filterWidth:u,filterHeight:l,inChannels:c,outWidth:f,outHeight:d,dataFormat:h}=n,m=h==="channelsLast",v=u*l*c,y=d*f,b=[n.batchSize,v,y],w=!0,x=!1,S=[];if(i!=null){const W=m0(i.shape,m);W!=null&&(i=it({inputs:{x:i},backend:r,attrs:{shape:W}}),S.push(i))}if(a!=null){const W=m0(a.shape,m);W!=null&&(a=it({inputs:{x:a},backend:r,attrs:{shape:W}}),S.push(a))}const C=it({inputs:{x:e},backend:r,attrs:{shape:[1,v,Oe(e.shape)/v]}});S.push(C);const E=new jbe(b,n),A=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],k=r.runWebGLProgram(E,[t],"float32",A),T=it({inputs:{x:k},backend:r,attrs:{shape:b}});S.push(k),S.push(T);const I=a!=null,$=i!=null,O=o==="leakyrelu",B=o?vh(o,!0):null,z=new B8(m?T.shape:C.shape,m?C.shape:T.shape,m?[n.batchSize,y,n.outChannels]:[n.batchSize,n.outChannels,y],w,x,I,B,$,O),L=m?[T,C]:[C,T];if(a&&L.push(a),$&&L.push(i),O){const W=r.makeTensorInfo([],"float32",Qu(s,"float32"));L.push(W),S.push(W)}const F=r.runWebGLProgram(z,L,"float32"),R=it({inputs:{x:F},backend:r,attrs:{shape:n.outShape}});S.push(F);for(const W of S)r.disposeIntermediateTensorInfo(W);return R}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dataFormat:u,dilations:l,dimRoundingMode:c}=r,f=Xo(u),d=Rr(a.shape,i.shape,s,l,o,c,!1,f);let h;if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))h=j8({x:a,filter:i,convInfo:d,backend:n});else if(d.strideWidth<=2&&f==="channelsLast"&&Ae().getBool("WEBGL_EXP_CONV")){const v=new H8(d),y=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];h=n.runWebGLProgram(v,[a,i],"float32",y)}else if(Ae().getBool("WEBGL_CONV_IM2COL"))h=X8({x:a,filter:i,convInfo:d,backend:n});else{const v=new G8(d);h=n.runWebGLProgram(v,[a,i],"float32")}const m=it({inputs:{x:h},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(h),m}const Kbe={kernelName:n1,backendName:"webgl",kernelFunc:Xbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ybe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,s=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${s?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Zbe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,s=e.dataFormat==="channelsLast",o=n-1-e.padInfo.top,u=r-1-e.padInfo.left,l=s?1:2,c=s?2:3,f=s?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${l}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${s}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Qbe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.padInfo.front,s=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${s};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${a} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Jbe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,s=e.strideHeight,o=e.strideWidth,u=n-1-e.padInfo.front,l=r-1-e.padInfo.top,c=a-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${l}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${a}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${a} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function exe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,pad:o,dataFormat:u,dimRoundingMode:l,filterShape:c}=r,f=Xo(u),d=Rr(a.shape,c,s,1,o,l,!1,f),h=new Ybe(d);return n.runWebGLProgram(h,[a,i],"float32")}const txe={kernelName:TC,backendName:"webgl",kernelFunc:exe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nxe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=ca(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,a=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rxe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:s,strides:o,pad:u,dataFormat:l,dimRoundingMode:c}=r,f=Xo(l),d=Rr(s,i.shape,o,1,u,c,!1,f);if(Ae().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&f==="channelsLast"){const h=[[d.strideHeight,d.strideWidth]],m=new nxe(d);return n.runWebGLProgram(m,[a,i],"float32",h)}else{const h=new Zbe(d);return n.runWebGLProgram(h,[a,i],"float32")}}const axe={kernelName:r1,backendName:"webgl",kernelFunc:rxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ixe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dilations:u}=r,l=tl(a.shape,i.shape,s,u,o),c=new Hbe(l);return n.runWebGLProgram(c,[a,i],"float32")}const sxe={kernelName:a1,backendName:"webgl",kernelFunc:ixe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,pad:o,filterShape:u}=r,l=tl(a.shape,u,s,1,o),c=new Qbe(l);return n.runWebGLProgram(c,[a,i],"float32")}const uxe={kernelName:$C,backendName:"webgl",kernelFunc:oxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lxe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:s,strides:o,inputShape:u}=r,l=tl(u,i.shape,o,1,s),c=new Jbe(l);return n.runWebGLProgram(c,[a,i],"float32")}const cxe={kernelName:AC,backendName:"webgl",kernelFunc:lxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fxe=Id+`
  return cos(x);
`,dxe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Dc}
  return result;
`,pxe=mn({opSnippet:fxe,packedOpSnippet:dxe}),hxe={kernelName:Vh,backendName:"webgl",kernelFunc:pxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mxe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,gxe=mn({opSnippet:mxe}),vxe={kernelName:Wh,backendName:"webgl",kernelFunc:gxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yxe{constructor(e,n,r,a,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[s,o,u,l]=e,[c]=n,[f,d]=r;this.outputShape=[c,f,d,l];const h=a==="bilinear"?1:0,[m,v]=[`${o-1}.0`,`${u-1}.0`],[y,b,w]=f>1?[`${(o-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[x,S,C]=d>1?[`${(u-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${v} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${v}`];this.userCode=`
      const float height_ratio = float(${y});
      const float width_ratio = float(${x});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${s}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${S};

        float in_y = ${w};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${C};
        if( in_x < 0.0 || in_x > ${v} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bxe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:s}=e,{cropSize:o,method:u,extrapolationValue:l}=r,c=new yxe(a.shape,i.shape,o,u,l);return n.runWebGLProgram(c,[a,i,s],"float32")},xxe={kernelName:kC,backendName:"webgl",kernelFunc:bxe};var bh;(function(t){t.Prod="*",t.Sum="+"})(bh||(bh={}));class CO{constructor(e,n,r,a){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,s=this.op===bh.Prod?"1.0":"0.0",o=r?s:`getX(${EO(i,"coords",this.op)})`,u=this.outputShape[this.outputShape.length-1];let l="",c="";r?(l=a?`end != ${u-1}`:"end != 0",c=a?"end + 1":"end - 1"):(l=a?`end + pow2 < ${u}`:"end >= pow2",c=a?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${In(i)} coords = getOutputCoords();
        int end = ${DO(i,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${l}) {
          int idx = ${c};
          ${DO(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${EO(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function EO(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function DO(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8(t,e,n,r,a,i){const s=e.shape.length,o=Zn([r],s);let u=e;o!=null&&(u=Ea({inputs:{x:e},backend:n,attrs:{perm:o}}));const l=ur(1,s)[0];if(l!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=u.shape[l];let f=di({inputs:{x:u},backend:n});for(let d=0;d<=Math.ceil(Math.log2(c))-1;d++){const h=new CO(t,u.shape,!1,i),m=[[d]],v=f;f=n.runWebGLProgram(h,[f],f.dtype,m),n.disposeIntermediateTensorInfo(v)}if(a){const d=new CO(t,u.shape,a,i),h=f;f=n.runWebGLProgram(d,[f],f.dtype),n.disposeIntermediateTensorInfo(h)}if(o!=null){const d=nl(o),h=Ea({inputs:{x:f},backend:n,attrs:{perm:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(u),h}return f}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:s,reverse:o}=r;return K8(bh.Prod,a,n,i,s,o)}const Nxe={kernelName:IC,backendName:"webgl",kernelFunc:wxe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:s,reverse:o}=r;return K8(bh.Sum,a,n,i,s,o)}const Cxe={kernelName:i1,backendName:"webgl",kernelFunc:Sxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Exe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:s,binaryOutput:o}=r;if(a.shape.length===1){const u=n.readSync(a.dataId),l=n.readSync(i.dataId),c=A8(u,l,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,c)}else if(a.shape.length===2){const u=n.bufferSync(a),l=n.bufferSync(i),c=Aye(u,l,s,o);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const Dxe={kernelName:_C,backendName:"webgl",kernelFunc:Exe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Txe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $xe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:s}=r,o=a.shape[0],u=s==="NHWC"?a.shape[1]:a.shape[2],l=s==="NHWC"?a.shape[2]:a.shape[3],c=s==="NHWC"?a.shape[3]:a.shape[1],f=u*i,d=l*i,h=c/(i*i),m=s==="NHWC"?[o,f,d,h]:[o,h,f,d],v=new Txe(m,i,s);return n.runWebGLProgram(v,[a],a.dtype)}const Axe={kernelName:OC,backendName:"webgl",kernelFunc:$xe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y8{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ca(this.outputShape.length);const s=e.filterHeight,o=e.filterWidth,u=e.outChannels/e.inChannels;let l="",c="";r&&(a?l=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?l=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:l=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${l}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${u};
        int q = d2 - d1 * ${u};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${s}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z8{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ca(this.outputShape.length);const s=e.outChannels/e.inChannels,o=e.padInfo.left,u=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,d=f;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<f;b++)h+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;h+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let b=0;b<f;b++)h+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(d+1)/2;b++){const w=b*2;if(h+=`
          xC = xCCorner + ${w*l};
          `,u===1){if(w<f&&(o%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }
              `,l===1&&w>0?h+=`
                xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                  } else {
                    xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                xC${w} = xTexelC${w};
                `,w+1<f)){const x=o%2===0?vC(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${x};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                    xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${w+1}.zw = vec2(0.0);
                    }
                    xTexelC${w+1}Ready = 1;
                  }
                  `,l>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                    } else {
                     xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                    }
                    `:h+=`
                    xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                    `):x===1?h+=`
                    xC${w+1} = xTexelC${w};
                    `:h+=`
                    xCOffset = xC + ${x};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                      xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${w+1}.zw = vec2(0.0);
                      }
                      xTexelC${w+1}Ready = 1;
                    }

                    xC${w+1} = xTexelC${w+1};
                    `}}else w<f&&(o%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                  xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${w+1}.zw = vec2(0.0);
                  }
                  xTexelC${w+1}Ready = 1;
                }

                xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
              `,w+1<f&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                  xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w+1}.zw = vec2(0.);
                  }
                  xTexelC${w+1}Ready = 1;
                }

                xC${w} = vec4(
                  xTexelC${w}.xy, xTexelC${w+1}.xy);
              `,w+1<f&&(h+=`
                  xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                `)));w<f&&(h+=`
            wTexel = getW(r, ${w}, d1, q);
            dotProd += xC${w} * vec4(wTexel.xz, wTexel.xz);
          `,w+1<f&&(h+=`
              wTexel = getW(r, ${w+1}, d1, q);
              dotProd += xC${w+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let m="",v="";r&&(a?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:m=`vec4 activation(vec4 x) {
          ${r}
        }`,v="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${s};
        int q = d2 - d1 * ${s};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${y}
        ${v}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ixe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dilations:u,dimRoundingMode:l}=r;let c=u;c==null&&(c=[1,1]),Y(Yr(s,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const f=Rr(a.shape,i.shape,s,c,o,l,!0);let d;Ae().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?d=new Z8(f):d=new Y8(f);const h=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(d,[a,i],"float32",h)}const kxe={kernelName:s1,backendName:"webgl",kernelFunc:Ixe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _xe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${s} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Oxe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,s=n-1-e.padInfo.top,o=r-1-e.padInfo.left,u=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${u}; dm++) {
              int d2 = d1 * ${u} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,dilations:o,pad:u,dimRoundingMode:l,filterShape:c}=r,f=Rr(a.shape,c,s,o,u,l,!0),d=new _xe(f);return n.runWebGLProgram(d,[a,i],"float32")}const Rxe={kernelName:FC,backendName:"webgl",kernelFunc:Fxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mxe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:s,dilations:o,pad:u,dimRoundingMode:l,inputShape:c}=r,f=Rr(c,i.shape,s,o,u,l,!0),d=new Oxe(f);return n.runWebGLProgram(d,[a,i],"float32")}const Pxe={kernelName:RC,backendName:"webgl",kernelFunc:Mxe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bxe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lxe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=[...r.shape,...r.shape],i=Oe(r.shape),s=it({inputs:{x:r},backend:n,attrs:{shape:[i]}}),o=new Bxe(i),u=n.runWebGLProgram(o,[s],s.dtype),l=it({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),l}const zxe={kernelName:MC,backendName:"webgl",kernelFunc:Lxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uxe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:a,strideHeight:i,strideWidth:s,filterHeight:o,filterWidth:u,dilationHeight:l,dilationWidth:c}=e,{top:f,left:d}=a;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${s});
      const ivec2 pads = ivec2(${f}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${l};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${u}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dilations:u}=r,l=$m(a.shape,i.shape,s,o,"NHWC",u);let c;const f=new Uxe(l);c=n.runWebGLProgram(f,[a,i],"float32");const d=it({inputs:{x:c},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(c),d}const Wxe={kernelName:o1,backendName:"webgl",kernelFunc:Vxe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qxe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:s,summedDims:o,idDims:u}=kD(a,i.length);OD(s.length,u,i);const{path:l,steps:c}=FD(o,u),f=c.length;let d=null,h=s.length;const m=[];for(let v=0;v<f;++v){for(const y of c[v]){const{permutationIndices:b,expandDims:w}=_D(h,u[y]);let x;RD(b)?x=i[y]:(x=Ea({inputs:{x:i[y]},backend:n,attrs:{perm:b}}),m.push(x));const S=x.shape.slice();for(let C=0;C<w.length;++C)S.splice(w[C],0,1);un(x.shape,S)||(x=it({inputs:{x},backend:n,attrs:{shape:S}}),m.push(x)),d===null?d=x:(d=NT({inputs:{a:x,b:d},backend:n}),m.push(d))}v<f-1&&(l[v]>=0&&(d=Rb({inputs:{x:d},backend:n,attrs:{axis:l[v]-(s.length-h),keepDims:!1}}),m.push(d)),h--)}for(const v of m)v!==d&&n.disposeIntermediateTensorInfo(v);return d}const Gxe={kernelName:PC,backendName:"webgl",kernelFunc:qxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hxe="return (x >= 0.0) ? x : (exp(x) - 1.0);",jxe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Xxe=mn({opSnippet:Hxe,packedOpSnippet:jxe}),Kxe={kernelName:Gh,backendName:"webgl",kernelFunc:Xxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yxe="return (b >= 0.0) ? a : a * (b + 1.0);",Zxe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,Qxe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:a}=e,i=Ae().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ad(Zxe,r.shape,a.shape):new pc(Yxe,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)},Jxe={kernelName:BC,backendName:"webgl",kernelFunc:Qxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ewe=`
  return vec4(equal(a, b));
`,twe="return float(a == b);",nwe=Jr({opSnippet:twe,packedOpSnippet:ewe,dtype:"bool",cpuKernelImpl:Fye}),rwe={kernelName:u1,backendName:"webgl",kernelFunc:nwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const awe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${CD};
  float a1 = ${ED};
  float a2 = ${DD};
  float a3 = ${TD};
  float a4 = ${$D};
  float a5 = ${AD};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,iwe=mn({opSnippet:awe}),swe={kernelName:Hh,backendName:"webgl",kernelFunc:iwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const owe=Id+`
  return exp(x);
`,uwe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Q8=mn({opSnippet:owe,packedOpSnippet:uwe,cpuKernelImpl:Rye,dtype:"float32"}),lwe={kernelName:jh,backendName:"webgl",kernelFunc:Q8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kS(t){const{inputs:e,attrs:n,backend:r}=t,{dim:a}=n,{input:i}=e,s=i.shape.length,o=i.shape.slice();let u=a;return a<0&&(Y(-(s+1)<=a,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),u=s+a+1),o.splice(u,0,1),it({inputs:{x:i},backend:r,attrs:{shape:o}})}const cwe={kernelName:l1,backendName:"webgl",kernelFunc:kS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TO="return exp(x) - 1.0;",fwe=mn({opSnippet:TO,packedOpSnippet:TO,cpuKernelImpl:Mye}),dwe={kernelName:Xh,backendName:"webgl",kernelFunc:fwe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $O{constructor(e,n,r){this.variableNames=["real","imag"];const a=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=r?`${a}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${a});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${a}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${s};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J8(t,e,n){const r=n.texData.get(t.dataId),a=Oe(t.shape),i=t.shape[t.shape.length-1],s=a/i,o=it({inputs:{x:t},backend:n,attrs:{shape:[s,i]}}),u=o.shape,l=new $O("real",u,e),c=new $O("imag",u,e),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],d=n.runWebGLProgram(l,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),m=ul({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);const v=it({inputs:{x:m},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(m),v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pwe(t){const{inputs:e,backend:n}=t,{input:r}=e;return J8(r,!1,n)}const hwe={kernelName:LC,backendName:"webgl",kernelFunc:pwe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mwe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qm(t){const{backend:e,attrs:n}=t,{shape:r,value:a}=n;let{dtype:i}=n;if(i=i||md(a),i==="string"){const s=sr(i,Oe(r));return s.fill(a),e.makeTensorInfo(r,i,s)}else{const s=new mwe(r,a),o=[[a]];return e.runWebGLProgram(s,[],i,o)}}const gwe={kernelName:zC,backendName:"webgl",kernelFunc:Qm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vwe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ywe={kernelName:UC,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,a=new vwe(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AO="return floor(x);",bwe=mn({opSnippet:AO,packedOpSnippet:AO,cpuKernelImpl:Pye}),xwe={kernelName:Kh,backendName:"webgl",kernelFunc:bwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wwe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,Nwe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,Swe=Jr({opSnippet:wwe,packedOpSnippet:Nwe,dtype:"int32"}),Cwe={kernelName:Yh,backendName:"webgl",kernelFunc:Swe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ewe{constructor(e){this.variableNames=["A"];const n=$a(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dwe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=$a(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${a}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Twe={kernelName:pY,backendName:"webgl",kernelFunc:$we};let df,F2=Ae().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function $we(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:a}=e;const{numChannels:i}=r,s=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,[u,l]=s?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=[l,u],f=[l,u,i];if(o||s){const v=Ae().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(df==null||v!==F2)&&(F2=v,df=document.createElement("canvas").getContext("2d",{willReadFrequently:F2})),df.canvas.width=u,df.canvas.height=l,df.drawImage(a,0,0,u,l),a=df.canvas}const d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=Ni.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),a);const h=Ae().getBool("WEBGL_PACK")?new Dwe(f):new Ewe(f),m=n.runWebGLProgram(h,[d],"int32");return n.disposeData(d.dataId),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Awe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:s,preluActivationWeights:o}=e,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:m}=r,v=Xo(c),y=Rr(a.shape,i.shape,u,f,l,d,!1,v);let b;const w=[],x=s!=null,S=o!=null,C=h==="leakyrelu",E=()=>{const k=[a,i],T=(I,$)=>{if($==="NCHW"&&I.shape.length===1&&I.shape[0]!==1){const O=it({inputs:{x:I},backend:n,attrs:{shape:[I.shape[0],1,1]}});return w.push(O),O}return I};if(x&&k.push(T(s,c)),S&&k.push(T(o,c)),C){const I=n.makeTensorInfo([],"float32",Qu(m,"float32"));k.push(I),w.push(I)}return k};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))b=j8({x:a,filter:i,convInfo:y,backend:n,bias:s,activation:h,preluActivationWeights:o,leakyreluAlpha:m});else if(y.strideWidth<=2&&v==="channelsLast"&&Ae().getBool("WEBGL_EXP_CONV")){const k=h?vh(h,!0):null,T=new H8(y,x,k,S,C),I=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],$=E();b=n.runWebGLProgram(T,$,"float32",I)}else if(Ae().getBool("WEBGL_CONV_IM2COL"))b=X8({x:a,filter:i,convInfo:y,backend:n,bias:s,activation:h,preluActivationWeights:o,leakyreluAlpha:m});else{const k=h?vh(h,!1):null,T=new G8(y,x,k,S,C),I=E();b=n.runWebGLProgram(T,I,"float32")}const A=it({inputs:{x:b},backend:n,attrs:{shape:y.outShape}});return w.push(b),w.forEach(k=>n.disposeIntermediateTensorInfo(k)),A}const Iwe={kernelName:qy,backendName:"webgl",kernelFunc:Awe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:s,preluActivationWeights:o}=e,{strides:u,pad:l,dilations:c,dimRoundingMode:f,activation:d,leakyreluAlpha:h}=r,m=[];let v=c;v==null&&(v=[1,1]),Y(Yr(u,v),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${v}'`);const y=Rr(a.shape,i.shape,u,v,l,f,!0),b=Ae().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,w=d?vh(d,b):null,x=[a,i],S=s!=null,C=o!=null,E=d==="leakyrelu";if(S&&x.push(s),C&&x.push(o),E){const I=n.makeTensorInfo([],"float32",Qu(h,"float32"));x.push(I),m.push(I)}let A;b?A=new Z8(y,S,w,C,E):A=new Y8(y,S,w,C,E);const k=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],T=n.runWebGLProgram(A,x,"float32",k);return m.forEach(I=>n.disposeIntermediateTensorInfo(I)),T}const _we={kernelName:Gy,backendName:"webgl",kernelFunc:kwe};class Owe{constructor(e,n,r,a){this.sliceDim=e,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;const i=In(r.length);let s=`
    int index;`;for(let o=0;o<this.sliceDim;o++)s+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${s}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fwe(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=a.shape,s=i[i.length-1],o=Oe(r.shape),[u,l,c,f]=pD(r,a),d=it({inputs:{x:a},backend:n,attrs:{shape:[l,s]}}),h=it({inputs:{x:r},backend:n,attrs:{shape:[Oe(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,a])||r.dtype==="string"){const b=n.readSync(a.dataId),w=n.bufferSync(r),x=Bye(b,w,r.dtype,l,s,c,f,r.shape,o);return n.makeTensorInfo(u,r.dtype,x.values)}const m=new Owe(s,f,[l,c],r.shape),v=n.runWebGLProgram(m,[h,d],h.dtype),y=it({inputs:{x:v},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(v),y}const Rwe={kernelName:VC,backendName:"webgl",kernelFunc:Fwe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mwe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=In(this.rank),a=Pwe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${a}));
      }
    `}}function Pwe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let a=0;a<t.length;a++)a===2?r.push("index"):r.push(`${n[a]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eU(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:s,batchDims:o}=r,u=tn(s,a.shape)[0];if(Ae().get("DEBUG")){const w=n.readSync(i.dataId),x=a.shape[u];for(let S=0;S<w.length;++S){const C=w[S];Y(C<=x-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${x-1}]`)}}const l=PD(a,i,u,o),c=Oe(i.shape),f=[],d=it({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),h=it({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}});f.push(d),f.push(h);const m=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([a,i])||a.dtype==="string"){const w=n.bufferSync(h),x=n.bufferSync(d),S=Lye(x,w,m);return f.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(l.outputShape,S.dtype,S.values)}const v=new Mwe(d.shape,m),y=n.runWebGLProgram(v,[d,h],d.dtype);f.push(y);const b=it({inputs:{x:y},backend:n,attrs:{shape:l.outputShape}});return f.forEach(w=>n.disposeIntermediateTensorInfo(w)),b}const Bwe={kernelName:f1,backendName:"webgl",kernelFunc:eU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lwe="return float(a > b);",zwe=`
  return vec4(greaterThan(a, b));
`,Uwe=Jr({opSnippet:Lwe,packedOpSnippet:zwe,cpuKernelImpl:zye,dtype:"bool"}),Vwe={kernelName:d1,backendName:"webgl",kernelFunc:Uwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wwe="return float(a >= b);",qwe=`
  return vec4(greaterThanEqual(a, b));
`,Gwe=Jr({opSnippet:Wwe,packedOpSnippet:qwe,dtype:"bool",cpuKernelImpl:Uye}),Hwe={kernelName:Zh,backendName:"webgl",kernelFunc:Gwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jwe(t){const{inputs:e,backend:n}=t,{input:r}=e;return J8(r,!0,n)}const Xwe={kernelName:WC,backendName:"webgl",kernelFunc:jwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kwe="return float(!isnan(x) && !isinf(x));",Ywe=mn({opSnippet:Kwe,dtype:"bool"}),Zwe={kernelName:Jh,backendName:"webgl",kernelFunc:Ywe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qwe="return float(isinf(x));",Jwe=mn({opSnippet:Qwe,dtype:"bool"}),e2e={kernelName:em,backendName:"webgl",kernelFunc:Jwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t2e="return float(isnan(x));",n2e=mn({opSnippet:t2e,dtype:"bool"}),r2e={kernelName:tm,backendName:"webgl",kernelFunc:n2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a2e="return float(a < b);",i2e=`
  return vec4(lessThan(a, b));
`,s2e=Jr({opSnippet:a2e,packedOpSnippet:i2e,cpuKernelImpl:Vye,dtype:"bool"}),o2e={kernelName:h1,backendName:"webgl",kernelFunc:s2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u2e="return float(a <= b);",l2e=`
  return vec4(lessThanEqual(a, b));
`,c2e=Jr({opSnippet:u2e,packedOpSnippet:l2e,cpuKernelImpl:Wye,dtype:"bool"}),f2e={kernelName:m1,backendName:"webgl",kernelFunc:c2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d2e(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,s=qye(r,a,i);return e.makeTensorInfo([s.length],"float32",s)}const p2e={kernelName:GC,backendName:"webgl",kernelFunc:d2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h2e=Id+`
  return x < 0.0 ? 0./0. : log(x);
`,m2e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,g2e=mn({opSnippet:h2e,packedOpSnippet:m2e,cpuKernelImpl:Gye}),v2e={kernelName:nm,backendName:"webgl",kernelFunc:g2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y2e=Id+`
  return log(1.0 + x);
`,b2e=mn({opSnippet:y2e}),x2e={kernelName:rm,backendName:"webgl",kernelFunc:b2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w2e="return float(a >= 1.0 && b >= 1.0);",N2e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,S2e=Jr({opSnippet:w2e,packedOpSnippet:N2e,dtype:"bool"}),C2e={kernelName:g1,backendName:"webgl",kernelFunc:S2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E2e="return float(!(x >= 1.0));",D2e=mn({opSnippet:E2e}),T2e={kernelName:v1,backendName:"webgl",kernelFunc:D2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $2e="return float(a >= 1.0 || b >= 1.0);",A2e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,I2e=Jr({opSnippet:$2e,packedOpSnippet:A2e,dtype:"bool"}),k2e={kernelName:y1,backendName:"webgl",kernelFunc:I2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _2e{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[];const s=n,o=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${a}) * sum`;i===.5?u=`inversesqrt(${l})`:i===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${s}; j <= ${s}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${u};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O2e{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const s=n,o=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${a}) * sum`;i===.5?u=`inversesqrt(${l})`:i===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${s};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${s}; j <= ${s}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${u};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F2e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:s,alpha:o,beta:u}=r,l=Ae().getBool("WEBGL_PACK_NORMALIZATION")?new O2e(a.shape,i,s,o,u):new _2e(a.shape,i,s,o,u);return n.runWebGLProgram(l,[a],a.dtype)},R2e={kernelName:b1,backendName:"webgl",kernelFunc:F2e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M2e{constructor(e,n,r,a,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${a}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${a})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P2e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:s}=e,{depthRadius:o,bias:u,alpha:l,beta:c}=r,f=new M2e(a.shape,o,u,l,c);return n.runWebGLProgram(f,[a,i,s],a.dtype)},B2e={kernelName:HC,backendName:"webgl",kernelFunc:P2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L2e(t,e,n,r){const a=Oe(e),s=Oe(t.shape)/a,o=it({inputs:{x:t},attrs:{shape:[s,a]},backend:r}),u=Tc(o,t.dtype,"max",r),l=it({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tU(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:s}=r,o=a.shape.length,u=tn(i,a.shape);let l=u;const c=Zn(l,o),f=c!=null,d=n.shouldExecuteOnCPU([a]);let h=a;if(f){if(d){const x=n.texData.get(h.dataId).values,S=new Array(o);for(let A=0;A<S.length;A++)S[A]=a.shape[c[A]];const C=xT(x,a.shape,a.dtype,c,S);h=n.makeTensorInfo(S,a.dtype);const E=n.texData.get(h.dataId);E.values=C}else h=Fb(a,c,n);l=ur(l.length,o)}Zr("max",l,o);const[m,v]=Mr(h.shape,l);let y=m;s&&(y=or(m,u));let b;if(d){const x=n.texData.get(h.dataId).values,S=Hye(x,Oe(v),y,a.dtype);b=n.makeTensorInfo(y,a.dtype);const C=n.texData.get(b.dataId);C.values=S}else b=L2e(h,v,y,n);return f&&n.disposeIntermediateTensorInfo(h),b}const z2e={kernelName:x1,backendName:"webgl",kernelFunc:tU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U2e=wT+`
  return max(a, b);
`,V2e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Dc+`
  return result;
`,W2e=Jr({opSnippet:U2e,packedOpSnippet:V2e,cpuKernelImpl:jye}),q2e={kernelName:am,backendName:"webgl",kernelFunc:W2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;Km(a,"maxPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:u}=r,l=1;Y(Yr(s,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${l}'`);const c=is(a.shape,i,s,l,o,u);if(c.filterWidth===1&&c.filterHeight===1&&un(c.inShape,c.outShape))return di({inputs:{x:a},backend:n});const f=new yh(c,"max",!1);return n.runWebGLProgram(f,[a],a.dtype)}const H2e={kernelName:w1,backendName:"webgl",kernelFunc:G2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:s,pad:o,dataFormat:u,dimRoundingMode:l}=r,c=[1,1,1],f=jo(a.shape,i,s,c,o,l,u),d=new ST(f,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}const X2e={kernelName:N1,backendName:"webgl",kernelFunc:j2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K2e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,a=e.dilationHeight,i=e.effectiveFilterHeight,s=e.effectiveFilterWidth,o=i-1-e.padInfo.top,u=s-1-e.padInfo.left,l=i*s-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${s} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class Y2e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,s=e.dilationHeight,o=e.dilationWidth,u=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=u-1-e.padInfo.front,d=l-1-e.padInfo.top,h=c-1-e.padInfo.left,m=u*l*c-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${d}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${l};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${l} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z2e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,s=i,{filterSize:o,strides:u,pad:l,dimRoundingMode:c}=r,f=[1,1,1],d=jo(s.shape,o,u,f,l,c),h=new ST(d,"max",!0),m=n.runWebGLProgram(h,[s],s.dtype),v=new Y2e(d),y=n.runWebGLProgram(v,[a,m],s.dtype);return n.disposeIntermediateTensorInfo(m),y}const Q2e={kernelName:XC,backendName:"webgl",kernelFunc:Z2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J2e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:s}=e,o=i;Km([i,s],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:f}=r,d=is(o.shape,u,l,1,c,f),h=!0,m=new yh(d,"max",h),v=n.runWebGLProgram(m,[o],o.dtype),y=new K2e(d),b=n.runWebGLProgram(y,[a,v],o.dtype);return n.disposeIntermediateTensorInfo(v),b}const eNe={kernelName:jC,backendName:"webgl",kernelFunc:J2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tNe(t,e,n,r){let a=new yh(n,"max",!1);const i=r.runWebGLProgram(a,[t],"float32");a=new yh(n,"max",!0,!0,e);const s=r.runWebGLProgram(a,[t],"float32");return[i,s]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nNe={kernelName:KC,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:s,includeBatchInIndex:o}=e,u=n;Y(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const l=[1,1];Y(Yr(i,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const c=is(r.shape,a,i,l,s),[f,d]=tNe(r,o,c,u);return[f,d]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rNe(t,e,n,r){const a=Oe(e),s=Oe(t.shape)/a,o=it({inputs:{x:t},attrs:{shape:[s,a]},backend:r}),u=Tc(o,"float32","mean",r),l=it({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aNe={kernelName:S1,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:a,axis:i}=e,s=n,o=r.shape.length,u=tn(i,r.shape);let l=u;const c=Zn(l,o),f=c!=null,d=s.shouldExecuteOnCPU([r]),h=[];let m=r;if(f){if(d){const S=s.texData.get(m.dataId).values,C=new Array(o);for(let k=0;k<C.length;k++)C[k]=r.shape[c[k]];const E=xT(S,r.shape,r.dtype,c,C);m=s.makeTensorInfo(C,r.dtype);const A=s.texData.get(m.dataId);A.values=E}else m=Fb(r,c,s);h.push(m),l=ur(l.length,o)}Zr("sum",l,o);const[v,y]=Mr(m.shape,l);let b=v;a&&(b=or(v,u));const w=rNe(m,y,b,s);for(const x of h)s.disposeIntermediateTensorInfo(x);return w}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r,o=a.shape.length,u=tn(i,a.shape);let l=u;const c=Zn(l,o);let f=a;c!=null&&(f=Ea({inputs:{x:a},backend:n,attrs:{perm:c}}),l=ur(l.length,a.shape.length)),Zr("min",l,o);const[d,h]=Mr(f.shape,l),m=Oe(h),v=it({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),y=Tc(v,v.dtype,"min",n);let b;if(s){const w=or(d,u);b=it({inputs:{x:y},backend:n,attrs:{shape:w}})}else b=it({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(f),b}const sNe={kernelName:C1,backendName:"webgl",kernelFunc:iNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oNe=wT+`
  return min(a, b);
`,uNe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Dc+`
  return result;
`,lNe=Jr({opSnippet:oNe,packedOpSnippet:uNe,cpuKernelImpl:Xye}),cNe={kernelName:im,backendName:"webgl",kernelFunc:lNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fNe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,f)=>c[0]+e[f]+c[1]);const a=e.length,i=In(a),s=n.map(c=>c[0]).join(","),o=n.map((c,f)=>c[0]+e[f]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),l=r==="reflect"?0:1;if(a===1){this.userCode=`
        int start = ${s};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${l};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${l};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${a}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${l};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${u}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dNe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((m,v)=>m[0]+e[v]+m[1]);const a=e.length,i=In(a),s=n.map(m=>m[0]).join(","),o=n.map((m,v)=>m[0]+e[v]).join(","),u=Sa("rc",a),l=Sa("source",a),c=`${u[a-1]} < ${this.outputShape[a-1]}`,f=a===1?"source":`vec2(${l.slice(-2).join()})`,d=r==="reflect"?0:1;let h="";if(a===1){const m=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${l.join()}), ${f});
        ${u[a-1]} += 1;
        if(${c}) {
          ${m}
          result[1] = getChannel(getX(${l.join()}), ${f});
        }
      `}else{const m=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${l.join()}), ${f});
        ${u[a-1]} += 1;
        if(${c}) {
          ${m}
          result[1] = getChannel(getX(${l.join()}), ${f});
        }
        rc = outputLoc;
        ${u[a-2]} += 1;
        if(${u[a-2]} < ${this.outputShape[a-2]}) {
          ${m}
          result[2] = getChannel(getX(${l.join()}), ${f});
          ${u[a-1]} += 1;
          if(${c}) {
            ${m}
            result[3] = getChannel(getX(${l.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pNe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:a,mode:i}=n,s=Ae().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dNe(r.shape,a,i):new fNe(r.shape,a,i);return e.runWebGLProgram(s,[r],r.dtype)},hNe={kernelName:E1,backendName:"webgl",kernelFunc:pNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mNe=`if (b == 0.0) return NAN;
  return mod(a, b);`,gNe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Dc+`
  return result;
`,vNe=Jr({opSnippet:mNe,packedOpSnippet:gNe}),yNe={kernelName:sm,backendName:"webgl",kernelFunc:vNe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bNe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xNe=`
if (a == b) {
  return 1.0;
};
return a / b;`,wNe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,nU=Jr({opSnippet:xNe,packedOpSnippet:wNe,checkOutOfBounds:!0}),NNe={kernelName:qh,backendName:"webgl",kernelFunc:nU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IO="return a - b;",rU=Jr({opSnippet:IO,packedOpSnippet:IO,supportsComplex:!0,cpuKernelImpl:m0e}),SNe={kernelName:Nm,backendName:"webgl",kernelFunc:rU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aU(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,s=tn([i],a.shape),o=tU({inputs:{x:a},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),u=or(o.shape,s),l=it({inputs:{x:o},backend:n,attrs:{shape:u}}),c=rU({inputs:{a,b:l},backend:n}),f=Q8({inputs:{x:c},backend:n}),d=Rb({inputs:{x:f},backend:n,attrs:{axis:s,keepDims:!1}}),h=it({inputs:{x:d},backend:n,attrs:{shape:u}}),m=nU({inputs:{a:f,b:h},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),m}const CNe={kernelName:W1,backendName:"webgl",kernelFunc:aU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ENe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:s,normalized:o}=r,u=o?a:aU({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),l=u.shape[0],c=u.shape[1],f=new bNe(l,c,i),d=[[s]],h=n.runWebGLProgram(f,[u],"int32",d);return o||n.disposeIntermediateTensorInfo(u),h}const DNe={kernelName:YC,backendName:"webgl",kernelFunc:ENe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TNe=os+`
  return -x;
`,$Ne=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function ANe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[s,o]=Yye(i.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}let a;return Ae().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new Tu(r.shape,$Ne):a=new Js(r.shape,TNe),n.runWebGLProgram(a,[r],r.dtype)}const INe={kernelName:D1,backendName:"webgl",kernelFunc:ANe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kNe=sD;function _Ne(t){wi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u}=r,l=n.readSync(a.dataId),c=n.readSync(i.dataId),{selectedIndices:f}=kNe(l,c,s,o,u);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const ONe={kernelName:ZC,backendName:"webgl",kernelFunc:_Ne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FNe=oD;function RNe(t){wi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u,padToMaxOutputSize:l}=r,c=n.readSync(a.dataId),f=n.readSync(i.dataId),{selectedIndices:d,validOutputs:h}=FNe(c,f,s,o,u,l);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const MNe={kernelName:QC,backendName:"webgl",kernelFunc:RNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PNe=uD;function BNe(t){wi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u,softNmsSigma:l}=r,c=n.readSync(a.dataId),f=n.readSync(i.dataId),d=s,h=o,m=u,v=l,{selectedIndices:y,selectedScores:b}=PNe(c,f,d,h,m,v);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const LNe={kernelName:JC,backendName:"webgl",kernelFunc:BNe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zNe{constructor(e,n,r,a){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${a}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UNe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:s,onValue:o,offValue:u}=r,l=Oe(a.shape),c=new zNe(l,s,o,u),f=it({inputs:{x:a},backend:n,attrs:{shape:[l]}}),d=n.runWebGLProgram(c,[f],i);n.disposeIntermediateTensorInfo(f);const h=[...a.shape,s],m=it({inputs:{x:d},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(d),m},VNe={kernelName:A1,backendName:"webgl",kernelFunc:UNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g0(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const a=Zm({inputs:{input:r},backend:n}),i=g0({inputs:{x:a},backend:n}),s=Mb({inputs:{input:r},backend:n}),o=g0({inputs:{x:s},backend:n}),u=ul({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),u}else return Qm({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const WNe={kernelName:j1,backendName:"webgl",kernelFunc:g0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iU(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const a=Zm({inputs:{input:r},backend:n}),i=iU({inputs:{x:a},backend:n}),s=Mb({inputs:{input:r},backend:n}),o=g0({inputs:{x:s},backend:n}),u=ul({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),u}else return Qm({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const qNe={kernelName:$1,backendName:"webgl",kernelFunc:iU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GNe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return kS({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,s=e[0].dtype;e.forEach(c=>{mi(i,c.shape,"All tensors passed to stack must have matching shapes"),Y(s===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],u=e.map(c=>{const f=kS({inputs:{input:c},backend:n,attrs:{dim:a}});return o.push(f),f}),l=q8({inputs:u,backend:n,attrs:{axis:a}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),l}const HNe={kernelName:I1,backendName:"webgl",kernelFunc:GNe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jNe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((l,c)=>l[0]+e[c]+l[1]);const a=e.length,i=In(a),s=n.map(l=>l[0]).join(","),o=n.map((l,c)=>l[0]+e[c]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);if(a===1){this.userCode=`
        int start = ${s};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${u}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XNe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((v,y)=>v[0]+e[y]+v[1]);const a=e.length,i=In(a),s=n.map(v=>v[0]).join(","),o=n.map((v,y)=>v[0]+e[y]).join(","),u=Sa("rc",a),l=Sa("source",a),c=`${u[a-1]} < ${this.outputShape[a-1]}`,f=a===1?"source":`vec2(${l.slice(-2).join()})`,d=[`${i} rc = outputLoc;`,`${u[a-1]} += 1;
       if(${c}) {
      `,a===1?"":`}
       rc = outputLoc;
       ${u[a-2]} += 1;
       if(${u[a-2]} < ${this.outputShape[a-2]}) {`,a===1?"":`  ${u[a-1]} += 1;
         if(${c}) {`],h=a===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let m="";for(let v=0,y=a===1?2:4;v<y;v++)m+=`
        ${d[v]}
        if (${h}) {
          result[${v}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${v}] = getChannel(getX(${l.join()}), ${f});
        }
      `;m+=a===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sU=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:s}=r;if(Oe(a.shape)===0){const l=i.map((c,f)=>c[0]+a.shape[f]+c[1]);return Qm({backend:n,attrs:{shape:l,value:s,dtype:a.dtype}})}const o=Ae().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new XNe(a.shape,i,s):new jNe(a.shape,i,s),u=[[s]];return n.runWebGLProgram(o,[a],a.dtype,u)},KNe={kernelName:k1,backendName:"webgl",kernelFunc:sU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YNe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,ZNe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Dc+`
  return result;
`,QNe=Jr({opSnippet:YNe,packedOpSnippet:ZNe}),JNe={kernelName:um,backendName:"webgl",kernelFunc:QNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r,o=a.shape.length,u=[],l=tn(i,a.shape);let c=l;const f=Zn(c,o);let d=a;f!=null&&(d=Ea({inputs:{x:a},backend:n,attrs:{perm:f}}),c=ur(c.length,o),u.push(d)),Zr("prod",c,o);let h;if(n.shouldExecuteOnCPU([d])){const m=n.texData.get(d.dataId).values,{outVals:v,outShape:y,outDtype:b}=Qye(d.shape,d.dtype,m,c);h=n.makeTensorInfo(y,b,v)}else{const[m,v]=Mr(d.shape,c),y=Oe(v),b=it({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),w=CE(a.dtype),x=Tc(b,w,"prod",n);h=it({inputs:{x},backend:n,attrs:{shape:m}}),u.push(b),u.push(x)}if(s){u.push(h);const m=or(h.shape,l);h=it({inputs:{x:h},backend:n,attrs:{shape:m}})}return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}const tSe={kernelName:O1,backendName:"webgl",kernelFunc:eSe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nSe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:s}=e,{outputRaggedRank:o}=r,u=a.map(b=>n.readSync(b.dataId)),l=a.map(b=>b.shape),c=n.readSync(i.dataId),f=n.readSync(s.dataId),[d,h,m]=Jye(u,l,c,i.shape,i.dtype,f,s.shape,o),v=d.map(b=>n.makeTensorInfo([b.length],"int32",b)),y=n.makeTensorInfo(m,i.dtype,h);return v.concat([y])}const rSe={kernelName:eE,backendName:"webgl",kernelFunc:nSe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aSe(t){const{inputs:e,backend:n}=t,{starts:r,limits:a,deltas:i}=e,s=n.readSync(r.dataId),o=n.readSync(a.dataId),u=n.readSync(i.dataId),[l,c]=e0e(s,r.shape,r.dtype,o,a.shape,u,i.shape),f=n.makeTensorInfo([l.length],"int32",l),d=n.makeTensorInfo([c.length],r.dtype,c);return[f,d]}const iSe={kernelName:tE,backendName:"webgl",kernelFunc:aSe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sSe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:s,rowPartitionTensors:o}=e,{rowPartitionTypes:u}=r,l=n.readSync(a.dataId),c=n.readSync(i.dataId),f=n.readSync(s.dataId),d=o.map(y=>n.readSync(y.dataId)),h=o.map(y=>y.shape),[m,v]=t0e(l,a.shape,c,i.shape,i.dtype,f,s.shape,d,h,u);return n.makeTensorInfo(m,i.dtype,v)}const oSe={kernelName:nE,backendName:"webgl",kernelFunc:sSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oU=t=>{const{backend:e,attrs:n}=t,{start:r,stop:a,step:i,dtype:s}=n,o=n0e(r,a,i,s);return e.makeTensorInfo([o.length],s,o)},uSe={kernelName:rE,backendName:"webgl",kernelFunc:oU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lSe="return 1.0 / x;",cSe=mn({opSnippet:lSe}),fSe={kernelName:lm,backendName:"webgl",kernelFunc:cSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dSe=os+`
  return (x < 0.0) ? 0.0 : x;
`,pSe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,hSe=mn({opSnippet:dSe,packedOpSnippet:pSe}),mSe={kernelName:cm,backendName:"webgl",kernelFunc:hSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gSe=os+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,vSe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,ySe=mn({opSnippet:gSe,packedOpSnippet:vSe}),bSe={kernelName:fm,backendName:"webgl",kernelFunc:ySe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xSe{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[s,o,u,l]=e;this.outputShape=[s,n,r,l];const c=[a&&n>1?o-1:o,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r];let d;i?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wSe{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,o,u,l]=e;this.outputShape=[s,n,r,l];const c=[a&&n>1?o-1:o,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r];let d;i?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NSe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:s,size:o}=r,[u,l]=o,c=Ae().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new wSe(a.shape,u,l,i,s):new xSe(a.shape,u,l,i,s);return n.runWebGLProgram(c,[a],"float32")}const SSe={kernelName:M1,backendName:"webgl",kernelFunc:NSe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CSe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,s,o]=e,u=[r&&s>1?a-1:a,r&&o>1?i-1:i],l=[r&&s>1?s-1:s,r&&o>1?o-1:o],c=u[0]/l[0],f=u[1]/l[1],d=1/c,h=1/f,m=Math.ceil(d)*2+2,v=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${a-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ESe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:s}=r,o=new CSe(i.shape,a.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}const DSe={kernelName:sE,backendName:"webgl",kernelFunc:ESe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TSe{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[s,o,u,l]=e;this.outputShape=[s,n,r,l];const c=[a&&n>1?o-1:o,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r],d=a?"0.5":"0.0";let h;i?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Se{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,o,u,l]=e;this.outputShape=[s,n,r,l];const c=[a&&n>1?o-1:o,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r],d=a?"0.5":"0.0";let h;i?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ASe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:s,size:o}=r,[u,l]=o,c=Ae().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new $Se(a.shape,u,l,i,s):new TSe(a.shape,u,l,i,s);return n.runWebGLProgram(c,[a],a.dtype)}const ISe={kernelName:R1,backendName:"webgl",kernelFunc:ASe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kSe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,s,o]=e,u=[r&&s>1?a-1:a,r&&o>1?i-1:i],l=[r&&s>1?s-1:s,r&&o>1?o-1:o],c=u[0]/l[0],f=u[1]/l[1],d=1/c,h=1/f,m=Math.ceil(d)*2+2,v=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${u[0]}) *
                (float(dyR) / float(${l[0]}));

            float sourceFracCol =
                float(${u[1]}) *
                  (float(dyC) / float(${l[1]}));

            int sourceNearestRow = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Se(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:s}=r,o=new kSe(i.shape,a.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}const OSe={kernelName:iE,backendName:"webgl",kernelFunc:_Se};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FSe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const a=o=>n.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,i=e.map((o,u)=>a(u)).join(","),s=In(r);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RSe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const a=Sa("rc",r),i=`${a[r-1]} + 1 < ${this.outputShape[r-1]}`,s=`${a[r-2]} + 1 < ${this.outputShape[r-2]}`,o=In(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${u(a.slice())};
          if(${i}){
            result.g = ${l(a.slice())};
          }
          if(${s}) {
            result.b = ${c(a.slice())};
            if(${i}) {
              result.a = ${f(a.slice())};
            }
          }
          setOutput(result);
        }
    `;function u(m){return d(m)}function l(m){return m[r-1]="("+m[r-1]+" + 1)",d(m)}function c(m){return m[r-2]="("+m[r-2]+" + 1)",d(m)}function f(m){return m[r-1]="("+m[r-1]+" + 1)",m[r-2]="("+m[r-2]+" + 1)",d(m)}function d(m){const v=e.map((w,x)=>h(x,m)),y=v.join(","),b=v.slice(-2).join(",");return`getChannel(getX(${y}), vec2(${b}))`}function h(m,v){return n.indexOf(m)!==-1&&e[m]!==1?`${e[m]} - ${v[m]} - 1`:`${v[m]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r,s=a.shape.length,o=tn(i,a.shape);if(s===0)return di({inputs:{x:a},backend:n});const u=Ae().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new RSe(a.shape,o):new FSe(a.shape,o);return n.runWebGLProgram(u,[a],a.dtype)}const PSe={kernelName:P1,backendName:"webgl",kernelFunc:MSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BSe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],a=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${a} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LSe={kernelName:SE,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:s}=e,o=n,u=new BSe(r.shape,i),[l,c]=wD(s,r.shape[1],r.shape[2]),f=[[l,c,Math.sin(a),Math.cos(a)]];return o.runWebGLProgram(u,[r],r.dtype,f)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zSe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,USe=mn({opSnippet:zSe}),VSe={kernelName:dm,backendName:"webgl",kernelFunc:USe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WSe="return inversesqrt(x);",qSe=mn({opSnippet:WSe,cpuKernelImpl:r0e}),GSe={kernelName:pm,backendName:"webgl",kernelFunc:qSe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CT{constructor(e,n,r,a,i,s,o=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;const l=In(i.length),c=In(s.length);let f="";r===1?f="i":r===2&&(f="i, j");const d=`getIndices(${f})`;let h="";a===1?h="i":a===2&&(h="i, coords[1]");const m=`getUpdates(${h})`;let v="";u&&(v="coords[0], coords[1]");const y=`getDefaultValue(${v})`,b=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${b};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${m};
              found = true;
            }
          }
          setOutput(mix(${y}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HSe{constructor(e,n,r,a,i,s,o=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;const l=In(i.length),c=In(s.length);let f="";r===1?f="i":r===2&&(f="i, j");const d=`getIndices(${f})`;let h="";a===1?h="i":a===2&&(h="i, coords[1]");const m=`getUpdates(${h})`;let v="";u&&(v="coords[0], coords[1]");const y=`getDefaultValue(${v})`,b=n>1?"strides[j]":"strides",w=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${d});
              flattenedIndex += index.xz * ${b};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${w};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${m};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${y}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jSe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:s}=r,{sliceRank:o,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=wc(i,a,s),d=[f/l,l];if(f===0)return n.makeTensorInfo(s,a.dtype);const h=it({inputs:{x:a},backend:n,attrs:{shape:[u,o]}}),m=it({inputs:{x:i},backend:n,attrs:{shape:[u,l]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0]));let y;Ae().getBool("WEBGL_PACK")?y=new HSe(u,o,h.shape.length,m.shape.length,c,d):y=new CT(u,o,h.shape.length,m.shape.length,c,d);const b=n.runWebGLProgram(y,[m,h,v],m.dtype),w=it({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(v),w}const XSe={kernelName:oE,backendName:"webgl",kernelFunc:jSe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KSe{constructor(e,n,r,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",s=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,o=Ae().getNumber("WEBGL_VERSION")===2?i:s,u=a==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${u} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YSe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:s}=r,o=new KSe(a.shape[0],a.shape[1],i.shape[1],s),u=[[a.shape[1]]];return n.runWebGLProgram(o,[a,i],"int32",u)}const ZSe={kernelName:lE,backendName:"webgl",kernelFunc:YSe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QSe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let a,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",a="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],l=[];for(let c=0;c<n.length;c++)l.push(`${o[c]}`),c<e&&u.push(`${o[c]}`);a=u.join(),i=l.join()}const s=In(r);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        float cVal = getC(${a});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JSe(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e,s=new QSe(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(s,[r,a,i],oi(a.dtype,i.dtype))}const eCe={kernelName:B1,backendName:"webgl",kernelFunc:JSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tCe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${yb};
  float scale = ${bb};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,nCe=mn({opSnippet:tCe}),rCe={kernelName:hm,backendName:"webgl",kernelFunc:nCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aCe=Id+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,iCe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,sCe=mn({opSnippet:aCe,packedOpSnippet:iCe,cpuKernelImpl:i0e}),oCe={kernelName:ym,backendName:"webgl",kernelFunc:sCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uCe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,lCe=mn({opSnippet:uCe}),cCe={kernelName:vm,backendName:"webgl",kernelFunc:lCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fCe=Id+`
  return sin(x);
`,dCe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Dc}
  return result;
`,pCe=mn({opSnippet:fCe,packedOpSnippet:dCe}),hCe={kernelName:mm,backendName:"webgl",kernelFunc:pCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mCe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,gCe=mn({opSnippet:mCe}),vCe={kernelName:gm,backendName:"webgl",kernelFunc:gCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yCe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,bCe=mn({opSnippet:yCe}),xCe={kernelName:bm,backendName:"webgl",kernelFunc:bCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wCe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:s}=r;Y(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((b,w)=>b*w),u=[[0,0]];u.push(...s);for(let b=1+i.length;b<a.shape.length;++b)u.push([0,0]);const l=[],c=sU({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=Mm(c.shape,i,o,!1),d=Pm(f.length,i.length,!1),h=Bm(c.shape,i,o,!1),m=it({inputs:{x:c},backend:n,attrs:{shape:f}}),v=Ea({inputs:{x:m},backend:n,attrs:{perm:d}}),y=it({inputs:{x:v},backend:n,attrs:{shape:h}});return l.push(c),l.push(m),l.push(v),l.forEach(b=>n.disposeIntermediateTensorInfo(b)),y},NCe={kernelName:U1,backendName:"webgl",kernelFunc:wCe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SCe(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:s}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${a.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);const o=n.readSync(r.dataId),u=n.readSync(a.dataId),l=n.readSync(i.dataId),c=n.readSync(s.dataId)[0],[f,d,h,m,v]=o0e(o,r.shape,r.dtype,u,a.dtype,l,c);return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([d[0]],a.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const CCe={kernelName:cE,backendName:"webgl",kernelFunc:SCe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ECe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const s=Array.from(n.readSync(a.dataId)),o=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),[l,c,f]=u0e(o,r.shape,r.dtype,s,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([f.length],i.dtype,new Int32Array(f))]}const DCe={kernelName:fE,backendName:"webgl",kernelFunc:ECe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TCe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const s=n.readSync(r.dataId),o=n.readSync(a.dataId),u=n.readSync(i.dataId),[l,c]=k8(s,r.shape,r.dtype,o,u,!0);return n.makeTensorInfo(c,r.dtype,l)}const $Ce={kernelName:dE,backendName:"webgl",kernelFunc:TCe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ACe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const s=n.readSync(r.dataId),o=n.readSync(a.dataId),u=n.readSync(i.dataId),[l,c]=k8(s,r.shape,r.dtype,o,u);return n.makeTensorInfo(c,r.dtype,l)}const ICe={kernelName:pE,backendName:"webgl",kernelFunc:ACe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kCe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:s}=e,{outputShape:o}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:f,outputSize:d}=wc(i,a,o),h=!1;if(i.dtype==="string"){const b=n.bufferSync(a),w=n.bufferSync(i),x=Mu(n.readSync(s.dataId)[0]),S=a0e(b,w,o,d,c,l,u,f,x,h);return n.makeTensorInfo(o,S.dtype,S.values)}const m=new CT(l,u,a.shape.length,i.shape.length,f,[d,1],h),v=n.runWebGLProgram(m,[i,a,s],i.dtype),y=it({inputs:{x:v},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(v),y}const _Ce={kernelName:hE,backendName:"webgl",kernelFunc:kCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:s}=r,o=tn(s,a.shape)[0],u=MD(a,i,o),l=a.shape.length,c=new Array(l).fill(0),f=a.shape.slice();return u.map(d=>{const h=[...f];h[o]=d;const m=kd({inputs:{x:a},backend:n,attrs:{begin:c,size:h}});return c[o]+=d,m})}const FCe={kernelName:V1,backendName:"webgl",kernelFunc:OCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kO="return sqrt(x);",RCe=mn({opSnippet:kO,packedOpSnippet:kO,cpuKernelImpl:l0e}),MCe={kernelName:xm,backendName:"webgl",kernelFunc:RCe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PCe="return x * x;",BCe=mn({opSnippet:PCe}),LCe={kernelName:mE,backendName:"webgl",kernelFunc:BCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _O="return (a - b) * (a - b);",zCe=Jr({opSnippet:_O,packedOpSnippet:_O}),UCe={kernelName:wm,backendName:"webgl",kernelFunc:zCe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(a.dataId),s=Wo(i),o=c0e(s,"string",r);return n.makeTensorInfo(a.shape,"string",o)}const WCe={kernelName:q1,backendName:"webgl",kernelFunc:VCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qCe({inputs:t,attrs:e,backend:n}){const{x:r}=t,a=os+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new Js(r.shape,a);return n.runWebGLProgram(i,[r],r.dtype)}const GCe={kernelName:Dm,backendName:"webgl",kernelFunc:qCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HCe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const a=r.length,i=In(r.length),s=In(r.length);let o="";if(a===1)o="coords * strides + begin";else{let u=0;o=r.map((l,c)=>(u++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${u-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:s,strides:o,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:d}=r,{finalShapeSparse:h,finalShape:m,isIdentity:v,sliceDim0:y,isSimpleSlice:b,begin:w,end:x,strides:S}=yD(a.shape,i,s,o,u,l,c,f,d);let C;if(v)C=it({inputs:{x:a},backend:n,attrs:{shape:m}});else if(y||b){Y(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const A=mD(w,x,S),k=kd({inputs:{x:a},backend:n,attrs:{begin:w,size:A}});C=it({inputs:{x:k},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(k)}else if(n.shouldExecuteOnCPU([a])){const k=n.readSync(a.dataId),T=Qt(a.shape,a.dtype,k),I=f0e(h,T,S,w);C=n.makeTensorInfo(m,a.dtype,I.values)}else{const k=new HCe(w,S,h);C=n.runWebGLProgram(k,[a],a.dtype)}const E=it({inputs:{x:C},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(C),E}const XCe={kernelName:gE,backendName:"webgl",kernelFunc:jCe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KCe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:s,rightPad:o,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:f}=e,d=n.readSync(c.dataId),h=n.readSync(f.dataId),[m,v]=d0e(d,h,a,i,s,o,u,l);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(f.shape,"int32",v)]}const YCe={kernelName:vE,backendName:"webgl",kernelFunc:KCe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZCe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:s}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);const o=n.readSync(i.dataId),u=n.readSync(s.dataId)[0],[l,c,f]=p0e(o,u,a),d=c.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const QCe={kernelName:yE,backendName:"webgl",kernelFunc:ZCe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JCe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const s=n.readSync(i.dataId),o=h0e(s,a);return n.makeTensorInfo(i.shape,"int32",o)}const eEe={kernelName:bE,backendName:"webgl",kernelFunc:JCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tEe="return tan(x);",nEe=mn({opSnippet:tEe}),rEe={kernelName:Sm,backendName:"webgl",kernelFunc:nEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aEe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,iEe=mn({opSnippet:aEe}),sEe={kernelName:Cm,backendName:"webgl",kernelFunc:iEe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oEe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:a,indices:i,updates:s}=e,{sliceRank:o,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=wc(s,i,a.shape),d=[f/l,l];if(f===0)return n.makeTensorInfo(a.shape,i.dtype);const h=it({inputs:{x:i},backend:n,attrs:{shape:[u,o]}}),m=it({inputs:{x:s},backend:n,attrs:{shape:[u,l]}}),v=it({inputs:{x:a},backend:n,attrs:{shape:d}}),y=new CT(u,o,h.shape.length,m.shape.length,c,d,!1,!0),b=n.runWebGLProgram(y,[m,h,v],v.dtype),w=it({inputs:{x:b},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),w}const uEe={kernelName:uE,backendName:"webgl",kernelFunc:oEe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lEe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let s=0;s<r.length;s++)r[s]=e[s]*n[s];this.outputShape=r,this.rank=r.length;const a=In(this.rank),i=cEe(e);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function cEe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<t.length;a++)r.push(`imod(${n[a]}, ${t[a]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uU(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;if(a.dtype==="string"||a.shape.length>5){const u=n.readSync(a.dataId),l=a.dtype==="string"?u.map(d=>Mu(d)):u,c=Qt(a.shape,a.dtype,l),f=g0e(c,i);return n.makeTensorInfo(f.shape,f.dtype,f.values)}const s=new lEe(a.shape,i);return n.runWebGLProgram(s,[a],a.dtype)}const fEe={kernelName:Em,backendName:"webgl",kernelFunc:uU};class dEe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class pEe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pl(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function OO(t){let e=1;for(;e<t;)e*=2;return e}function hEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:s}=r,o=Ae().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=Ae().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=a.shape,c=l[l.length-1];if(n.shouldExecuteOnCPU([a])||c<o||i>u){const I=n.readSync(a.dataId),[$,O]=v0e(I,l,a.dtype,i,s);return[n.makeTensorInfo($.shape,$.dtype,$.values),n.makeTensorInfo(O.shape,O.dtype,O.values)]}if(i===0)return l[l.length-1]=0,[n.makeTensorInfo(l,a.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(c===1)return[a,Qm({attrs:{shape:l,dtype:"int32",value:0},backend:n})];const f=n.texData.get(a.dataId),d=f!==null&&f.isPacked,h=d?n.unpackTensor(a):a,v=Oe(l)/c,y=it({inputs:{x:h},attrs:{shape:[v,c]},backend:n});d&&Pl(n,h);const b=OO(i),w=OO(c);let x=null;const S=()=>x===null?[y,y]:[y,x],C=(I,$,O)=>{const B=S(),z=new dEe(O),F=[[c],[x===null?1:0],[Number.NEGATIVE_INFINITY],[I],[$]],R=x;x=n.runWebGLProgram(z,B,"int32",F),Pl(n,R)};for(let I=1;I<b;I*=2){const $=I*2;for(let O=I;O>=1;O/=2)C($,O,[v,w])}for(let I=w;I>b;I/=2){const $=S(),O=new pEe([v,I/2]),z=[[c],[x===null?1:0],[b]],L=x;x=n.runWebGLProgram(O,$,"int32",z),Pl(n,L);const F=b/2,R=F*2;for(let W=F;W>=1;W/=2)C(R,W,x.shape)}let E=x;x=kd({inputs:{x},backend:n,attrs:{begin:0,size:[v,i]}}),Pl(n,E);let A=eU({inputs:{x:y,indices:x},backend:n,attrs:{axis:1,batchDims:1}});Pl(n,y);const k=l.slice(0,-1);k.push(i),E=x,x=it({inputs:{x},attrs:{shape:k},backend:n}),Pl(n,E);const T=A;return A=it({inputs:{x:A},attrs:{shape:k},backend:n}),Pl(n,T),[A,x]}const mEe={kernelName:xE,backendName:"webgl",kernelFunc:hEe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gEe{constructor(e,n,r,a,i,s){this.variableNames=["Image","Transforms"],this.outputShape=s;const o=r==="nearest"?1:2;let u;switch(a){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${u} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vEe(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,transforms:i}=e,{interpolation:s,fillMode:o,fillValue:u,outputShape:l}=r,[c,f,d,h]=a.shape,[m,v]=l??[f,d],y=[c,m,v,h],b=new gEe(f,d,s,o,u,y);return n.runWebGLProgram(b,[a,i],"float32")}const yEe={kernelName:wE,backendName:"webgl",kernelFunc:vEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bEe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;Km(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const s=r.readSync(i.dataId),{outputValues:o,outputShape:u,indices:l}=y0e(s,a,i.shape,i.dtype);return[r.makeTensorInfo(u,i.dtype,o),r.makeTensorInfo([l.length],"int32",l)]}const xEe={kernelName:NE,backendName:"webgl",kernelFunc:bEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wEe(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const s=a,o=s.shape.length,u=a.shape[i],l=new Array(o-1);let c=0;for(let v=0;v<o;v++)v!==i&&(l[c++]=s.shape[v]);const f=[],d=new Array(o).fill(0),h=s.shape.slice();h[i]=1;const m=new Array(u);for(let v=0;v<m.length;v++){d[i]=v;const y=kd({inputs:{x:s},backend:n,attrs:{begin:d,size:h}}),b=it({inputs:{x:y},backend:n,attrs:{shape:l}});m[v]=b,f.push(y)}return f.forEach(v=>n.disposeIntermediateTensorInfo(v)),m}const NEe={kernelName:G1,backendName:"webgl",kernelFunc:wEe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SEe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,a=e.batchSize,i=e.inSize,s=e.numSegments,o=s*Math.ceil(i/r);this.outputShape=[a,o];const u="0.0",l="sumValue",c=Math.floor(r/4)*4,f=r%4,d=`
        sumValue += dot(values, segFilter);
    `;let h="";i%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${u};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${s})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${s})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:s}=r,o=a.shape.length,u=[];let l=0;const c=Zn([l],o);let f=a;c!=null&&(f=Ea({inputs:{x:a},backend:n,attrs:{perm:c}}),u.push(f),l=ur(1,o)[0]);const d=LL(f.shape,l,s),h=Oe([f.shape[l]]),m=it({inputs:{x:f},backend:n,attrs:{shape:[-1,h]}});u.push(m);const v=CE(a.dtype),y=(S,C,E,A,k)=>{const T=S.shape[0],I=S.shape[1],$=BL(I,k),O={windowSize:$,inSize:I,batchSize:T,numSegments:k},B=new SEe(O,C),z=n.compileAndRun(B,[S,E],A);if(u.push(z),z.shape[1]===k)return z;const L=oU({backend:n,attrs:{start:0,stop:k,step:1,dtype:"float32"}}),F=uU({inputs:{x:L},backend:n,attrs:{reps:[I/$]}});return u.push(L),u.push(F),y(z,C,F,A,k)},b=y(m,"unsortedSegmentSum",i,v,s),w=it({inputs:{x:b},backend:n,attrs:{shape:d}});let x=w;if(c!=null){u.push(w);const S=nl(c);x=Ea({inputs:{x},backend:n,attrs:{perm:S}})}return u.forEach(S=>n.disposeIntermediateTensorInfo(S)),x}const EEe={kernelName:H1,backendName:"webgl",kernelFunc:CEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DEe=[l1e,f1e,h1e,v1e,b1e,N1e,C1e,D1e,I1e,_1e,R1e,B1e,U1e,G1e,X1e,Y1e,Q1e,nbe,abe,sbe,cbe,vbe,bbe,Sbe,Ebe,kbe,Obe,Pbe,H0e,zbe,Gbe,Kbe,txe,axe,sxe,uxe,cxe,hxe,vxe,xxe,Nxe,Cxe,Dxe,Axe,kxe,Rxe,Pxe,zxe,Wxe,Gxe,Kxe,Jxe,rwe,swe,lwe,cwe,dwe,hwe,gwe,ywe,xwe,Cwe,Twe,Iwe,_we,Rwe,Bwe,Vwe,Hwe,G0e,Xwe,Wbe,Zwe,e2e,r2e,X0e,o2e,f2e,p2e,v2e,x2e,C2e,T2e,k2e,R2e,B2e,z2e,q2e,H2e,X2e,Q2e,eNe,nNe,aNe,sNe,cNe,hNe,yNe,DNe,Z0e,INe,ONe,MNe,LNe,Tbe,VNe,qNe,HNe,KNe,JNe,Y0e,tSe,rSe,iSe,oSe,uSe,$be,NNe,fSe,mSe,bSe,J0e,SSe,DSe,ISe,OSe,PSe,LSe,VSe,GSe,XSe,ZSe,eCe,rCe,oCe,cCe,hCe,vCe,mbe,CNe,xCe,NCe,CCe,DCe,$Ce,ICe,_Ce,FCe,MCe,LCe,UCe,WCe,GCe,XCe,YCe,QCe,eEe,SNe,s1e,rEe,sEe,uEe,fEe,mEe,yEe,o1e,xEe,NEe,EEe,WNe];for(const t of DEe)cP(t);const FO=[{question:"Hola",answer:"Hola! En qu puedo ayudarte?"},{question:"Qu tal?",answer:"Todo bien! Y t?"},{question:"Buenas tardes",answer:"Buenas tardes. En qu te puedo ayudar?"},{question:"Buenas noches",answer:"Buenas noches. Cmo puedo asistirte?"},{question:"Qu onda?",answer:"Hola! Qu tal tu da?"},{question:"Quin eres?",answer:"Soy un asistente virtual creado para ayudarte con tus dudas y consultas."},{question:"Qu eres?",answer:"Soy un chatbot, un programa diseado para responder tus preguntas y mantener conversaciones."},{question:"Eres humano?",answer:"No, soy una inteligencia artificial, pero estoy aqu para ayudarte como si lo fuera."},{question:"Quin te cre?",answer:"Fui creada por un desarrollador apasionado por la tecnologa y el aprendizaje automtico."},{question:"Cmo te llamas?",answer:"No tengo un nombre propio, pero puedes llamarme tu asistente virtual."},{question:"Eres inteligente?",answer:"Hago lo mejor que puedo con la informacin que tengo. Estoy aprendiendo contigo!"},{question:"Qu es TensorFlow?",answer:"TensorFlow es una biblioteca de machine learning desarrollada por Google."},{question:"Qu es React?",answer:"React es una biblioteca de JavaScript para construir interfaces de usuario."},{question:"Qu es JavaScript?",answer:"JavaScript es un lenguaje de programacin utilizado para el desarrollo web."},{question:"Qu es una API?",answer:"Una API es un conjunto de definiciones y protocolos que permiten a las aplicaciones comunicarse entre s."},{question:"Qu es una base de datos?",answer:"Una base de datos es un sistema que almacena y organiza datos para su fcil acceso."},{question:"Qu es una red neuronal?",answer:"Una red neuronal es un modelo computacional inspirado en el cerebro humano."},{question:"Qu es HTML?",answer:"HTML es un lenguaje de marcado utilizado para crear la estructura de las pginas web."},{question:"Qu es CSS?",answer:"CSS es un lenguaje que se utiliza para disear y estilizar pginas web."},{question:"Qu es machine learning?",answer:"Machine learning es una rama de la inteligencia artificial que permite a las mquinas aprender de datos."},{question:"Cmo funciona esta IA?",answer:"Esta IA utiliza un modelo de machine learning para entender tus consultas."},{question:"Qu puedes hacer?",answer:"Puedo responder preguntas sobre tecnologa y ayudarte con dudas comunes."},{question:"Quin te cre?",answer:"Fui creada por un desarrollador que quiere ayudarte con tus consultas."},{question:"Cmo puedo aprender JavaScript?",answer:"Puedes comenzar con recursos en lnea como MDN Web Docs o plataformas como freeCodeCamp."},{question:"Dnde puedo aprender sobre machine learning?",answer:"Puedes aprender sobre machine learning en sitios como Coursera, edX o TensorFlow.org."},{question:"Cmo ests?",answer:"Estoy aqu para ayudarte con tus dudas."},{question:"Ests bien?",answer:"Claro que s! En qu puedo asistirte hoy?"},{question:"Cmo te sientes?",answer:"Me siento genial ayudndote con tus consultas."},{question:"Eres feliz?",answer:"Por supuesto! Mi felicidad es ayudarte."},{question:"Qu da es hoy?",answer:`Hoy es ${new Date().toLocaleDateString()}.`},{question:"Qu hora es?",answer:`Ahora mismo son aproximadamente las ${new Date().toLocaleTimeString()}.`},{question:"Qu puedo cocinar?",answer:"Qu tal una pasta sencilla o un arroz con pollo? Si necesitas recetas, puedo buscarte opciones."},{question:"Cmo est el clima?",answer:"No puedo verificar el clima directamente, pero puedes consultarlo en tu app favorita."},{question:"Qu me recomiendas para ver?",answer:"Depende de tus gustos. Si te gustan las series, prueba algo en Netflix o Prime Video. Te gusta la accin o el drama?"},{question:"Qu hago si estoy aburrido?",answer:"Puedes leer un libro, aprender algo nuevo o ver una pelcula interesante. Qu te gusta hacer?"},{question:"Cmo puedo ahorrar dinero?",answer:"Intenta llevar un presupuesto mensual, evita compras impulsivas y busca ofertas en lo que necesites."},{question:"Cmo puedo organizarme mejor?",answer:"Haz listas de tareas, utiliza una agenda y prioriza las actividades ms importantes."},{question:"Qu es bueno para el estrs?",answer:"El ejercicio, la meditacin y dormir bien pueden ayudarte a reducir el estrs. Te gustara ms consejos?"},{question:"Cmo mejorar mi salud?",answer:"Come saludable, haz ejercicio regularmente y mantn una buena hidratacin."},{question:"Cul es el animal ms rpido?",answer:"El guepardo es el animal terrestre ms rpido, alcanzando hasta 112 km/h."},{question:"Cuntos planetas hay?",answer:"Hay 8 planetas en nuestro sistema solar. Plutn es considerado un planeta enano."},{question:"Qu tan grande es el Sol?",answer:"El Sol tiene un dimetro de aproximadamente 1,39 millones de kilmetros. Es enorme!"},{question:"Quin invent la bombilla?",answer:"Thomas Edison es reconocido por inventar la bombilla incandescente."},{question:"Mi computadora no enciende",answer:"Revisa si est conectada correctamente a la corriente y asegrate de que el botn de encendido funcione."},{question:"No puedo conectarme a internet",answer:"Verifica tu conexin Wi-Fi, reinicia tu router y asegrate de que el servicio est activo."},{question:"Por qu mi pgina web no carga?",answer:"Revisa tu conexin a internet, limpia el cach del navegador o intenta con otro navegador."},{question:"Adis",answer:"Hasta pronto! Que tengas un buen da."},{question:"adios",answer:"Hasta pronto! Que tengas un buen da."},{question:"Nos vemos",answer:"Claro! Espero verte de nuevo."},{question:"Gracias",answer:"De nada! Estoy aqu para ayudarte siempre que lo necesites."},{question:"Chao",answer:"Adis! Cudate."},{question:"Qu libro me recomiendas?",answer:"Si te gusta la ficcin, prueba 'Cien aos de soledad' de Gabriel Garca Mrquez o 'El Principito' de Antoine de Saint-Exupry."},{question:"Qu pelcula me recomiendas?",answer:"Si te gustan los clsicos, prueba 'Forrest Gump'. Para algo reciente, prueba 'Dune'."},{question:"Qu msica puedo escuchar?",answer:"Depende de tu estilo. Si buscas algo tranquilo, prueba msica instrumental o jazz. Si quieres algo animado, prueba pop o reguetn."},{question:"Cmo puedo aprender un idioma?",answer:"Usa apps como Duolingo, mira pelculas en ese idioma y practica hablando con nativos."},{question:"Qu deporte es bueno para m?",answer:"Elige algo que disfrutes. Puede ser caminar, nadar o incluso yoga. La clave es moverte!"},{question:"Qu es bueno para la piel?",answer:"Usa protector solar, mantente hidratado y limpia tu piel regularmente."},{question:"Qu es un algoritmo?",answer:"Un algoritmo es un conjunto de pasos o instrucciones para resolver un problema o realizar una tarea."},{question:"Qu es un modelo preentrenado?",answer:"Es un modelo de machine learning que ya ha sido entrenado en un conjunto de datos y puede ser reutilizado para tareas especficas."},{question:"Qu es inteligencia artificial?",answer:"La inteligencia artificial es una rama de la informtica que busca crear sistemas capaces de realizar tareas que normalmente requieren inteligencia humana."},{question:"Qu es big data?",answer:"Big data se refiere a grandes volmenes de datos que no pueden ser procesados con herramientas tradicionales debido a su tamao y complejidad."},{question:"Qu es un framework?",answer:"Un framework es una estructura o entorno predefinido que facilita el desarrollo de aplicaciones."},{question:"Qu es el aprendizaje profundo?",answer:"El aprendizaje profundo es una subrama del machine learning que utiliza redes neuronales con muchas capas."},{question:"Qu es un chatbot?",answer:"Un chatbot es un programa diseado para simular conversaciones con usuarios."},{question:"Qu es GitHub?",answer:"GitHub es una plataforma para alojar y colaborar en proyectos de desarrollo de software utilizando control de versiones con Git."}];function kr(){return kr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kr.apply(null,arguments)}var lU={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function Pa(t,e){if(v0(t,e))return t[e];throw typeof t[e]=="function"&&ET(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function ad(t,e,n){if(v0(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}function v0(t,e){return!$Ee(t)&&!Array.isArray(t)?!1:dt(AEe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function TEe(t,e){if(!ET(t,e))throw new Error('No access to method "'+e+'"');return t[e]}function ET(t,e){return t==null||typeof t[e]!="function"||dt(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:dt(IEe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function $Ee(t){return typeof t=="object"&&t&&t.constructor===Object}var AEe={length:!0,name:!0},IEe={toString:!0,valueOf:!0,toLocaleString:!0};class Pb{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return Pa(this.wrappedObject,e)}set(e,n){return ad(this.wrappedObject,e,n),this}has(e){return v0(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return fU(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){v0(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class cU{constructor(e,n,r){this.a=e,this.b=n,this.bKeys=r,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,n){return this.bKeys.has(e)?this.b.set(e,n):this.a.set(e,n),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return fU(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function fU(t,e){return{next:()=>{var n=t.next();return n.done?n:{value:e(n.value),done:!1}}}}function xh(){return new Map}function Bf(t){if(!t)return xh();if(pU(t))return t;if(Lb(t))return new Pb(t);throw new Error("createMap can create maps from objects or Maps")}function kEe(t){if(t instanceof Pb)return t.wrappedObject;var e={};for(var n of t.keys()){var r=t.get(n);ad(e,n,r)}return e}function Vt(t){return typeof t=="number"}function qt(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function _Ee(t){return typeof t=="bigint"}function Mo(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function Jm(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function qi(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Na(t){return typeof t=="string"}var En=Array.isArray;function Tt(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function as(t){return Array.isArray(t)||Tt(t)}function y0(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Xl(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function DT(t){return t&&t.constructor.prototype.isRange===!0||!1}function Bb(t){return t&&t.constructor.prototype.isIndex===!0||!1}function OEe(t){return typeof t=="boolean"}function FEe(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function dU(t){return t&&t.constructor.prototype.isHelp===!0||!1}function REe(t){return typeof t=="function"}function MEe(t){return t instanceof Date}function PEe(t){return t instanceof RegExp}function Lb(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Mo(t)&&!Jm(t))}function pU(t){return t?t instanceof Map||t instanceof Pb||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function BEe(t){return t===null}function LEe(t){return t===void 0}function hc(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Wi(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function zEe(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function UEe(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function VEe(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function sn(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function _S(t){return sn(t)||pr(t)&&t.args.length===1&&sn(t.args[0])&&"-+~".includes(t.op)}function eg(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function ju(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function _d(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Dn(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function zb(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function pr(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function qo(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function WEe(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function qEe(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function jr(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function hU(t){return t&&t.constructor.prototype.isChain===!0||!1}function Rn(t){var e=typeof t;return e==="object"?t===null?"null":qt(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Bt(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(n){return Bt(n)});if(t instanceof Date)return new Date(t.valueOf());if(qt(t))return t;if(Lb(t))return GEe(t,Bt);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function GEe(t,e){var n={};for(var r in t)dt(t,r)&&(n[r]=e(t[r]));return n}function mU(t,e){for(var n in e)dt(e,n)&&(t[n]=e[n]);return t}function Go(t,e){var n,r,a;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(r=0,a=t.length;r<a;r++)if(!Go(t[r],e[r]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!Go(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}else return t===e}}function HEe(t,e,n){var r=!0,a;Object.defineProperty(t,e,{get:function(){return r&&(a=n(),r=!1),a},set:function(s){a=s,r=!1},configurable:!0,enumerable:!0})}function dt(t,e){return t&&Object.hasOwnProperty.call(t,e)}function jEe(t,e){for(var n={},r=0;r<e.length;r++){var a=e[r],i=t[a];i!==void 0&&(n[a]=i)}return n}var XEe=["Matrix","Array"],KEe=["number","BigNumber","Fraction"],Ue=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(lU)};kr(Ue,lU,{MATRIX_OPTIONS:XEe,NUMBER_OPTIONS:KEe});function RO(){return!0}function Bi(){return!1}function pf(){}const MO="Argument is not a typed-function.";function gU(){function t(re){return typeof re=="object"&&re!==null&&re.constructor===Object}const e=[{name:"number",test:function(re){return typeof re=="number"}},{name:"string",test:function(re){return typeof re=="string"}},{name:"boolean",test:function(re){return typeof re=="boolean"}},{name:"Function",test:function(re){return typeof re=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(re){return re instanceof Date}},{name:"RegExp",test:function(re){return re instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(re){return re===null}},{name:"undefined",test:function(re){return re===void 0}}],n={name:"any",test:RO,isAny:!0};let r,a,i=0,s={createCount:0};function o(re){const ce=r.get(re);if(ce)return ce;let Ce='Unknown type "'+re+'"';const $e=re.toLowerCase();let Be;for(Be of a)if(Be.toLowerCase()===$e){Ce+='. Did you mean "'+Be+'" ?';break}throw new TypeError(Ce)}function u(re){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const Ce=ce?o(ce).index:a.length,$e=[];for(let Me=0;Me<re.length;++Me){if(!re[Me]||typeof re[Me].name!="string"||typeof re[Me].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Qe=re[Me].name;if(r.has(Qe))throw new TypeError('Duplicate type name "'+Qe+'"');$e.push(Qe),r.set(Qe,{name:Qe,test:re[Me].test,isAny:re[Me].isAny,index:Ce+Me,conversionsTo:[]})}const Be=a.slice(Ce);a=a.slice(0,Ce).concat($e).concat(Be);for(let Me=Ce+$e.length;Me<a.length;++Me)r.get(a[Me]).index=Me}function l(){r=new Map,a=[],i=0,u([n],!1)}l(),u(e);function c(){let re;for(re of a)r.get(re).conversionsTo=[];i=0}function f(re){const ce=a.filter(Ce=>{const $e=r.get(Ce);return!$e.isAny&&$e.test(re)});return ce.length?ce:["any"]}function d(re){return re&&typeof re=="function"&&"_typedFunctionData"in re}function h(re,ce,Ce){if(!d(re))throw new TypeError(MO);const $e=Ce&&Ce.exact,Be=Array.isArray(ce)?ce.join(","):ce,Me=S(Be),Qe=y(Me);if(!$e||Qe in re.signatures){const Ht=re._typedFunctionData.signatureMap.get(Qe);if(Ht)return Ht}const qe=Me.length;let et;if($e){et=[];let Ht;for(Ht in re.signatures)et.push(re._typedFunctionData.signatureMap.get(Ht))}else et=re._typedFunctionData.signatures;for(let Ht=0;Ht<qe;++Ht){const Nt=Me[Ht],xn=[];let V;for(V of et){const fe=k(V.params,Ht);if(!(!fe||Nt.restParam&&!fe.restParam)){if(!fe.hasAny){const ke=x(fe);if(Nt.types.some(Ve=>!ke.has(Ve.name)))continue}xn.push(V)}}if(et=xn,et.length===0)break}let Ye;for(Ye of et)if(Ye.params.length<=qe)return Ye;throw new TypeError("Signature not found (signature: "+(re.name||"unnamed")+"("+y(Me,", ")+"))")}function m(re,ce,Ce){return h(re,ce,Ce).implementation}function v(re,ce){const Ce=o(ce);if(Ce.test(re))return re;const $e=Ce.conversionsTo;if($e.length===0)throw new Error("There are no conversions to "+ce+" defined.");for(let Be=0;Be<$e.length;Be++)if(o($e[Be].from).test(re))return $e[Be].convert(re);throw new Error("Cannot convert "+re+" to "+ce)}function y(re){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return re.map(Ce=>Ce.name).join(ce)}function b(re){const ce=re.indexOf("...")===0,$e=(ce?re.length>3?re.slice(3):"any":re).split("|").map(qe=>o(qe.trim()));let Be=!1,Me=ce?"...":"";return{types:$e.map(function(qe){return Be=qe.isAny||Be,Me+=qe.name+"|",{name:qe.name,typeIndex:qe.index,test:qe.test,isAny:qe.isAny,conversion:null,conversionIndex:-1}}),name:Me.slice(0,-1),hasAny:Be,hasConversion:!1,restParam:ce}}function w(re){const ce=re.types.map(Qe=>Qe.name),Ce=R(ce);let $e=re.hasAny,Be=re.name;const Me=Ce.map(function(Qe){const qe=o(Qe.from);return $e=qe.isAny||$e,Be+="|"+Qe.from,{name:Qe.from,typeIndex:qe.index,test:qe.test,isAny:qe.isAny,conversion:Qe,conversionIndex:Qe.index}});return{types:re.types.concat(Me),name:Be,hasAny:$e,hasConversion:Me.length>0,restParam:re.restParam}}function x(re){return re.typeSet||(re.typeSet=new Set,re.types.forEach(ce=>re.typeSet.add(ce.name))),re.typeSet}function S(re){const ce=[];if(typeof re!="string")throw new TypeError("Signatures must be strings");const Ce=re.trim();if(Ce==="")return ce;const $e=Ce.split(",");for(let Be=0;Be<$e.length;++Be){const Me=b($e[Be].trim());if(Me.restParam&&Be!==$e.length-1)throw new SyntaxError('Unexpected rest parameter "'+$e[Be]+'": only allowed for the last parameter');if(Me.types.length===0)return null;ce.push(Me)}return ce}function C(re){const ce=K(re);return ce?ce.restParam:!1}function E(re){if(!re||re.types.length===0)return RO;if(re.types.length===1)return o(re.types[0].name).test;if(re.types.length===2){const ce=o(re.types[0].name).test,Ce=o(re.types[1].name).test;return function(Be){return ce(Be)||Ce(Be)}}else{const ce=re.types.map(function(Ce){return o(Ce.name).test});return function($e){for(let Be=0;Be<ce.length;Be++)if(ce[Be]($e))return!0;return!1}}}function A(re){let ce,Ce,$e;if(C(re)){ce=J(re).map(E);const Be=ce.length,Me=E(K(re)),Qe=function(qe){for(let et=Be;et<qe.length;et++)if(!Me(qe[et]))return!1;return!0};return function(et){for(let Ye=0;Ye<ce.length;Ye++)if(!ce[Ye](et[Ye]))return!1;return Qe(et)&&et.length>=Be+1}}else return re.length===0?function(Me){return Me.length===0}:re.length===1?(Ce=E(re[0]),function(Me){return Ce(Me[0])&&Me.length===1}):re.length===2?(Ce=E(re[0]),$e=E(re[1]),function(Me){return Ce(Me[0])&&$e(Me[1])&&Me.length===2}):(ce=re.map(E),function(Me){for(let Qe=0;Qe<ce.length;Qe++)if(!ce[Qe](Me[Qe]))return!1;return Me.length===ce.length})}function k(re,ce){return ce<re.length?re[ce]:C(re)?K(re):null}function T(re,ce){const Ce=k(re,ce);return Ce?x(Ce):new Set}function I(re){return re.conversion===null||re.conversion===void 0}function $(re,ce){const Ce=new Set;return re.forEach($e=>{const Be=T($e.params,ce);let Me;for(Me of Be)Ce.add(Me)}),Ce.has("any")?["any"]:Array.from(Ce)}function O(re,ce,Ce){let $e,Be;const Me=re||"unnamed";let Qe=Ce,qe;for(qe=0;qe<ce.length;qe++){const Nt=[];if(Qe.forEach(xn=>{const V=k(xn.params,qe),fe=E(V);(qe<xn.params.length||C(xn.params))&&fe(ce[qe])&&Nt.push(xn)}),Nt.length===0){if(Be=$(Qe,qe),Be.length>0){const xn=f(ce[qe]);return $e=new TypeError("Unexpected type of argument in function "+Me+" (expected: "+Be.join(" or ")+", actual: "+xn.join(" | ")+", index: "+qe+")"),$e.data={category:"wrongType",fn:Me,index:qe,actual:xn,expected:Be},$e}}else Qe=Nt}const et=Qe.map(function(Nt){return C(Nt.params)?1/0:Nt.params.length});if(ce.length<Math.min.apply(null,et))return Be=$(Qe,qe),$e=new TypeError("Too few arguments in function "+Me+" (expected: "+Be.join(" or ")+", index: "+ce.length+")"),$e.data={category:"tooFewArgs",fn:Me,index:ce.length,expected:Be},$e;const Ye=Math.max.apply(null,et);if(ce.length>Ye)return $e=new TypeError("Too many arguments in function "+Me+" (expected: "+Ye+", actual: "+ce.length+")"),$e.data={category:"tooManyArgs",fn:Me,index:ce.length,expectedLength:Ye},$e;const Ht=[];for(let Nt=0;Nt<ce.length;++Nt)Ht.push(f(ce[Nt]).join("|"));return $e=new TypeError('Arguments of type "'+Ht.join(", ")+'" do not match any of the defined signatures of function '+Me+"."),$e.data={category:"mismatch",actual:Ht},$e}function B(re){let ce=a.length+1;for(let Ce=0;Ce<re.types.length;Ce++)I(re.types[Ce])&&(ce=Math.min(ce,re.types[Ce].typeIndex));return ce}function z(re){let ce=i+1;for(let Ce=0;Ce<re.types.length;Ce++)I(re.types[Ce])||(ce=Math.min(ce,re.types[Ce].conversionIndex));return ce}function L(re,ce){if(re.hasAny){if(!ce.hasAny)return 1}else if(ce.hasAny)return-1;if(re.restParam){if(!ce.restParam)return 1}else if(ce.restParam)return-1;if(re.hasConversion){if(!ce.hasConversion)return 1}else if(ce.hasConversion)return-1;const Ce=B(re)-B(ce);if(Ce<0)return-1;if(Ce>0)return 1;const $e=z(re)-z(ce);return $e<0?-1:$e>0?1:0}function F(re,ce){const Ce=re.params,$e=ce.params,Be=K(Ce),Me=K($e),Qe=C(Ce),qe=C($e);if(Qe&&Be.hasAny){if(!qe||!Me.hasAny)return 1}else if(qe&&Me.hasAny)return-1;let et=0,Ye=0,Ht;for(Ht of Ce)Ht.hasAny&&++et,Ht.hasConversion&&++Ye;let Nt=0,xn=0;for(Ht of $e)Ht.hasAny&&++Nt,Ht.hasConversion&&++xn;if(et!==Nt)return et-Nt;if(Qe&&Be.hasConversion){if(!qe||!Me.hasConversion)return 1}else if(qe&&Me.hasConversion)return-1;if(Ye!==xn)return Ye-xn;if(Qe){if(!qe)return 1}else if(qe)return-1;const V=(Ce.length-$e.length)*(Qe?-1:1);if(V!==0)return V;const fe=[];let ke=0;for(let Dt=0;Dt<Ce.length;++Dt){const $t=L(Ce[Dt],$e[Dt]);fe.push($t),ke+=$t}if(ke!==0)return ke;let Ve;for(Ve of fe)if(Ve!==0)return Ve;return 0}function R(re){if(re.length===0)return[];const ce=re.map(o);re.length>1&&ce.sort((Be,Me)=>Be.index-Me.index);let Ce=ce[0].conversionsTo;if(re.length===1)return Ce;Ce=Ce.concat([]);const $e=new Set(re);for(let Be=1;Be<ce.length;++Be){let Me;for(Me of ce[Be].conversionsTo)$e.has(Me.from)||(Ce.push(Me),$e.add(Me.from))}return Ce}function W(re,ce){let Ce=ce;if(re.some(Be=>Be.hasConversion)){const Be=C(re),Me=re.map(M);Ce=function(){const qe=[],et=Be?arguments.length-1:arguments.length;for(let Ye=0;Ye<et;Ye++)qe[Ye]=Me[Ye](arguments[Ye]);return Be&&(qe[et]=arguments[et].map(Me[et])),ce.apply(this,qe)}}let $e=Ce;if(C(re)){const Be=re.length-1;$e=function(){return Ce.apply(this,ae(arguments,0,Be).concat([ae(arguments,Be)]))}}return $e}function M(re){let ce,Ce,$e,Be;const Me=[],Qe=[];switch(re.types.forEach(function(qe){qe.conversion&&(Me.push(o(qe.conversion.from).test),Qe.push(qe.conversion.convert))}),Qe.length){case 0:return function(et){return et};case 1:return ce=Me[0],$e=Qe[0],function(et){return ce(et)?$e(et):et};case 2:return ce=Me[0],Ce=Me[1],$e=Qe[0],Be=Qe[1],function(et){return ce(et)?$e(et):Ce(et)?Be(et):et};default:return function(et){for(let Ye=0;Ye<Qe.length;Ye++)if(Me[Ye](et))return Qe[Ye](et);return et}}}function j(re){function ce(Ce,$e,Be){if($e<Ce.length){const Me=Ce[$e];let Qe=[];if(Me.restParam){const qe=Me.types.filter(I);qe.length<Me.types.length&&Qe.push({types:qe,name:"..."+qe.map(et=>et.name).join("|"),hasAny:qe.some(et=>et.isAny),hasConversion:!1,restParam:!0}),Qe.push(Me)}else Qe=Me.types.map(function(qe){return{types:[qe],name:qe.name,hasAny:qe.isAny,hasConversion:qe.conversion,restParam:!1}});return he(Qe,function(qe){return ce(Ce,$e+1,Be.concat([qe]))})}else return[Be]}return ce(re,0,[])}function q(re,ce){const Ce=Math.max(re.length,ce.length);for(let qe=0;qe<Ce;qe++){const et=T(re,qe),Ye=T(ce,qe);let Ht=!1,Nt;for(Nt of Ye)if(et.has(Nt)){Ht=!0;break}if(!Ht)return!1}const $e=re.length,Be=ce.length,Me=C(re),Qe=C(ce);return Me?Qe?$e===Be:Be>=$e:Qe?$e>=Be:$e===Be}function H(re){return re.map(ce=>ve(ce)?Z(ce.referToSelf.callback):ie(ce)?Ee(ce.referTo.references,ce.referTo.callback):ce)}function G(re,ce,Ce){const $e=[];let Be;for(Be of re){let Me=Ce[Be];if(typeof Me!="number")throw new TypeError('No definition for referenced signature "'+Be+'"');if(Me=ce[Me],typeof Me!="function")return!1;$e.push(Me)}return $e}function ne(re,ce,Ce){const $e=H(re),Be=new Array($e.length).fill(!1);let Me=!0;for(;Me;){Me=!1;let Qe=!0;for(let qe=0;qe<$e.length;++qe){if(Be[qe])continue;const et=$e[qe];if(ve(et))$e[qe]=et.referToSelf.callback(Ce),$e[qe].referToSelf=et.referToSelf,Be[qe]=!0,Qe=!1;else if(ie(et)){const Ye=G(et.referTo.references,$e,ce);Ye?($e[qe]=et.referTo.callback.apply(this,Ye),$e[qe].referTo=et.referTo,Be[qe]=!0,Qe=!1):Me=!0}}if(Qe&&Me)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return $e}function ue(re){const ce=/\bthis(\(|\.signatures\b)/;Object.keys(re).forEach(Ce=>{const $e=re[Ce];if(ce.test($e.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function te(re,ce){if(s.createCount++,Object.keys(ce).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&ue(ce);const Ce=[],$e=[],Be={},Me=[];let Qe;for(Qe in ce){if(!Object.prototype.hasOwnProperty.call(ce,Qe))continue;const kt=S(Qe);if(!kt)continue;Ce.forEach(function(zs){if(q(zs,kt))throw new TypeError('Conflicting signatures "'+y(zs)+'" and "'+y(kt)+'".')}),Ce.push(kt);const pa=$e.length;$e.push(ce[Qe]);const jd=kt.map(w);let Nl;for(Nl of j(jd)){const zs=y(Nl);Me.push({params:Nl,name:zs,fn:pa}),Nl.every(dx=>!dx.hasConversion)&&(Be[zs]=pa)}}Me.sort(F);const qe=ne($e,Be,wl);let et;for(et in Be)Object.prototype.hasOwnProperty.call(Be,et)&&(Be[et]=qe[Be[et]]);const Ye=[],Ht=new Map;for(et of Me)Ht.has(et.name)||(et.fn=qe[et.fn],Ye.push(et),Ht.set(et.name,et));const Nt=Ye[0]&&Ye[0].params.length<=2&&!C(Ye[0].params),xn=Ye[1]&&Ye[1].params.length<=2&&!C(Ye[1].params),V=Ye[2]&&Ye[2].params.length<=2&&!C(Ye[2].params),fe=Ye[3]&&Ye[3].params.length<=2&&!C(Ye[3].params),ke=Ye[4]&&Ye[4].params.length<=2&&!C(Ye[4].params),Ve=Ye[5]&&Ye[5].params.length<=2&&!C(Ye[5].params),Dt=Nt&&xn&&V&&fe&&ke&&Ve;for(let kt=0;kt<Ye.length;++kt)Ye[kt].test=A(Ye[kt].params);const $t=Nt?E(Ye[0].params[0]):Bi,ar=xn?E(Ye[1].params[0]):Bi,Bc=V?E(Ye[2].params[0]):Bi,dg=fe?E(Ye[3].params[0]):Bi,pg=ke?E(Ye[4].params[0]):Bi,hg=Ve?E(Ye[5].params[0]):Bi,mg=Nt?E(Ye[0].params[1]):Bi,qd=xn?E(Ye[1].params[1]):Bi,gg=V?E(Ye[2].params[1]):Bi,yl=fe?E(Ye[3].params[1]):Bi,Gd=ke?E(Ye[4].params[1]):Bi,bl=Ve?E(Ye[5].params[1]):Bi;for(let kt=0;kt<Ye.length;++kt)Ye[kt].implementation=W(Ye[kt].params,Ye[kt].fn);const sx=Nt?Ye[0].implementation:pf,xl=xn?Ye[1].implementation:pf,Lc=V?Ye[2].implementation:pf,zc=fe?Ye[3].implementation:pf,Hd=ke?Ye[4].implementation:pf,ox=Ve?Ye[5].implementation:pf,ux=Nt?Ye[0].params.length:-1,lx=xn?Ye[1].params.length:-1,vo=V?Ye[2].params.length:-1,vg=fe?Ye[3].params.length:-1,yg=ke?Ye[4].params.length:-1,cx=Ve?Ye[5].params.length:-1,bg=Dt?6:0,xg=Ye.length,wg=Ye.map(kt=>kt.test),Ng=Ye.map(kt=>kt.implementation),fx=function(){for(let pa=bg;pa<xg;pa++)if(wg[pa](arguments))return Ng[pa].apply(this,arguments);return s.onMismatch(re,arguments,Ye)};function wl(kt,pa){return arguments.length===ux&&$t(kt)&&mg(pa)?sx.apply(this,arguments):arguments.length===lx&&ar(kt)&&qd(pa)?xl.apply(this,arguments):arguments.length===vo&&Bc(kt)&&gg(pa)?Lc.apply(this,arguments):arguments.length===vg&&dg(kt)&&yl(pa)?zc.apply(this,arguments):arguments.length===yg&&pg(kt)&&Gd(pa)?Hd.apply(this,arguments):arguments.length===cx&&hg(kt)&&bl(pa)?ox.apply(this,arguments):fx.apply(this,arguments)}try{Object.defineProperty(wl,"name",{value:re})}catch{}return wl.signatures=Be,wl._typedFunctionData={signatures:Ye,signatureMap:Ht},wl}function se(re,ce,Ce){throw O(re,ce,Ce)}function J(re){return ae(re,0,re.length-1)}function K(re){return re[re.length-1]}function ae(re,ce,Ce){return Array.prototype.slice.call(re,ce,Ce)}function pe(re,ce){for(let Ce=0;Ce<re.length;Ce++)if(ce(re[Ce]))return re[Ce]}function he(re,ce){return Array.prototype.concat.apply([],re.map(ce))}function Se(){const re=J(arguments).map(Ce=>y(S(Ce))),ce=K(arguments);if(typeof ce!="function")throw new TypeError("Callback function expected as last argument");return Ee(re,ce)}function Ee(re,ce){return{referTo:{references:re,callback:ce}}}function Z(re){if(typeof re!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:re}}}function ie(re){return re&&typeof re.referTo=="object"&&Array.isArray(re.referTo.references)&&typeof re.referTo.callback=="function"}function ve(re){return re&&typeof re.referToSelf=="object"&&typeof re.referToSelf.callback=="function"}function we(re,ce){if(!re)return ce;if(ce&&ce!==re){const Ce=new Error("Function names do not match (expected: "+re+", actual: "+ce+")");throw Ce.data={actual:ce,expected:re},Ce}return re}function Fe(re){let ce;for(const Ce in re)Object.prototype.hasOwnProperty.call(re,Ce)&&(d(re[Ce])||typeof re[Ce].signature=="string")&&(ce=we(ce,re[Ce].name));return ce}function Re(re,ce){let Ce;for(Ce in ce)if(Object.prototype.hasOwnProperty.call(ce,Ce)){if(Ce in re&&ce[Ce]!==re[Ce]){const $e=new Error('Signature "'+Ce+'" is defined twice');throw $e.data={signature:Ce,sourceFunction:ce[Ce],destFunction:re[Ce]},$e}re[Ce]=ce[Ce]}}const Ge=s;s=function(re){const ce=typeof re=="string",Ce=ce?1:0;let $e=ce?re:"";const Be={};for(let Me=Ce;Me<arguments.length;++Me){const Qe=arguments[Me];let qe={},et;if(typeof Qe=="function"?(et=Qe.name,typeof Qe.signature=="string"?qe[Qe.signature]=Qe:d(Qe)&&(qe=Qe.signatures)):t(Qe)&&(qe=Qe,ce||(et=Fe(Qe))),Object.keys(qe).length===0){const Ye=new TypeError("Argument to 'typed' at index "+Me+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ye.data={index:Me,argument:Qe},Ye}ce||($e=we($e,et)),Re(Be,qe)}return te($e||"",Be)},s.create=gU,s.createCount=Ge.createCount,s.onMismatch=se,s.throwMismatchError=se,s.createError=O,s.clear=l,s.clearConversions=c,s.addTypes=u,s._findType=o,s.referTo=Se,s.referToSelf=Z,s.convert=v,s.findSignature=h,s.find=m,s.isTypedFunction=d,s.warnAgainstDeprecatedThis=!0,s.addType=function(re,ce){let Ce="any";ce!==!1&&r.has("Object")&&(Ce="Object"),s.addTypes([re],Ce)};function Ze(re){if(!re||typeof re.from!="string"||typeof re.to!="string"||typeof re.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(re.to===re.from)throw new SyntaxError('Illegal to define conversion from "'+re.from+'" to itself.')}return s.addConversion=function(re){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Ze(re);const Ce=o(re.to),$e=Ce.conversionsTo.find(Be=>Be.from===re.from);if($e)if(ce&&ce.override)s.removeConversion({from:$e.from,to:re.to,convert:$e.convert});else throw new Error('There is already a conversion from "'+re.from+'" to "'+Ce.name+'"');Ce.conversionsTo.push({from:re.from,convert:re.convert,index:i++})},s.addConversions=function(re,ce){re.forEach(Ce=>s.addConversion(Ce,ce))},s.removeConversion=function(re){Ze(re);const ce=o(re.to),Ce=pe(ce.conversionsTo,Be=>Be.from===re.from);if(!Ce)throw new Error("Attempt to remove nonexistent conversion from "+re.from+" to "+re.to);if(Ce.convert!==re.convert)throw new Error("Conversion to remove does not match existing conversion");const $e=ce.conversionsTo.indexOf(Ce);ce.conversionsTo.splice($e,1)},s.resolve=function(re,ce){if(!d(re))throw new TypeError(MO);const Ce=re._typedFunctionData.signatures;for(let $e=0;$e<Ce.length;++$e)if(Ce[$e].test(ce))return Ce[$e];return null},s}const b0=gU();function ee(t,e,n,r){function a(i){var s=jEe(i,e.map(QEe));return YEe(t,e,i),n(s)}return a.isFactory=!0,a.fn=t,a.dependencies=e.slice().sort(),r&&(a.meta=r),a}function YEe(t,e,n){var r=e.filter(i=>!ZEe(i)).every(i=>n[i]!==void 0);if(!r){var a=e.filter(i=>n[i]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(a.map(i=>'"'.concat(i,'"')).join(", "),"."))}}function ZEe(t){return t&&t[0]==="?"}function QEe(t){return t&&t[0]==="?"?t.slice(1):t}function bt(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function JEe(t){return/^-?\d+$/.test(t)}function ll(t,e){return e.number==="bigint"&&!JEe(t)?e.numberFallback:e.number}var $u=Math.sign||function(t){return t>0?1:t<0?-1:0},eDe=Math.log2||function(e){return Math.log(e)/Math.LN2},tDe=Math.log10||function(e){return Math.log(e)/Math.LN10},nDe=Math.log1p||function(t){return Math.log(t+1)},rDe=Math.cbrt||function(e){if(e===0)return e;var n=e<0,r;return n&&(e=-e),isFinite(e)?(r=Math.exp(Math.log(e)/3),r=(e/(r*r)+2*r)/3):r=e,n?-r:r},aDe=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function R2(t,e,n){var r={2:"0b",8:"0o",16:"0x"},a=r[e],i="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!bt(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!bt(t))throw new Error("Value must be an integer");t<0&&(t=t+2**n),i="i".concat(n)}var s="";return t<0&&(t=-t,s="-"),"".concat(s).concat(a).concat(t.toString(e)).concat(i)}function Jl(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:n,precision:r,wordSize:a}=vU(e);switch(n){case"fixed":return yU(t,r);case"exponential":return bU(t,r);case"engineering":return iDe(t,r);case"bin":return R2(t,2,a);case"oct":return R2(t,8,a);case"hex":return R2(t,16,a);case"auto":return sDe(t,r,e).replace(/((\.\d*?)(0+))($|e)/,function(){var i=arguments[2],s=arguments[4];return i!=="."?i+s:s});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function vU(t){var e="auto",n,r;if(t!==void 0)if(Vt(t))n=t;else if(qt(t))n=t.toNumber();else if(Lb(t))t.precision!==void 0&&(n=PO(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(r=PO(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:n,wordSize:r}}function tg(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],a=parseFloat(e[4]||"0"),i=r.indexOf(".");a+=i!==-1?i-1:r.length-1;var s=r.replace(".","").replace(/^0*/,function(o){return a-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return s.length===0&&(s.push(0),a++),{sign:n,coefficients:s,exponent:a}}function iDe(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=tg(t),r=Ub(n,e),a=r.exponent,i=r.coefficients,s=a%3===0?a:a<0?a-3-a%3:a-a%3;if(Vt(e))for(;e>i.length||a-s+1>i.length;)i.push(0);else for(var o=Math.abs(a-s)-(i.length-1),u=0;u<o;u++)i.push(0);for(var l=Math.abs(a-s),c=1;l>0;)c++,l--;var f=i.slice(c).join(""),d=Vt(e)&&f.length||f.match(/[1-9]/)?"."+f:"",h=i.slice(0,c).join("")+d+"e"+(a>=0?"+":"")+s.toString();return r.sign+h}function yU(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=tg(t),r=typeof e=="number"?Ub(n,n.exponent+1+e):n,a=r.coefficients,i=r.exponent+1,s=i+(e||0);return a.length<s&&(a=a.concat(Lf(s-a.length))),i<0&&(a=Lf(-i+1).concat(a),i=1),i<a.length&&a.splice(i,0,i===0?"0.":"."),r.sign+a.join("")}function bU(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=tg(t),r=e?Ub(n,e):n,a=r.coefficients,i=r.exponent;a.length<e&&(a=a.concat(Lf(e-a.length)));var s=a.shift();return r.sign+s+(a.length>0?"."+a.join(""):"")+"e"+(i>=0?"+":"")+i}function sDe(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var r=BO(n==null?void 0:n.lowerExp,-3),a=BO(n==null?void 0:n.upperExp,5),i=tg(t),s=e?Ub(i,e):i;if(s.exponent<r||s.exponent>=a)return bU(t,e);var o=s.coefficients,u=s.exponent;o.length<e&&(o=o.concat(Lf(e-o.length))),o=o.concat(Lf(u-o.length+1+(o.length<e?e-o.length:0))),o=Lf(-u).concat(o);var l=u>0?u:0;return l<o.length-1&&o.splice(l+1,0,"."),s.sign+o.join("")}function Ub(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e){var a=r.splice(e,r.length-e);if(a[0]>=5){var i=e-1;for(r[i]++;r[i]===10;)r.pop(),i===0&&(r.unshift(0),n.exponent++,i++),i--,r[i]++}}return n}function Lf(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function oDe(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function ua(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!isFinite(t)||!isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(n*Math.max(Math.abs(t),Math.abs(e)),r)}var uDe=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},lDe=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},cDe=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},fDe=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},dDe=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},pDe=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};function hDe(t,e){var n=t>0?!0:t<0?!1:1/t===1/0,r=e>0?!0:e<0?!1:1/e===1/0;return n^r?-t:t}function PO(t,e){if(Vt(t))return t;if(qt(t))return t.toNumber();e()}function BO(t,e){return Vt(t)?t:qt(t)?t.toNumber():e}var xU=function(){return xU=b0.create,b0},mDe=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],gDe=ee("typed",mDe,function(e){var{BigNumber:n,Complex:r,DenseMatrix:a,Fraction:i}=e,s=xU();return s.clear(),s.addTypes([{name:"number",test:Vt},{name:"Complex",test:Mo},{name:"BigNumber",test:qt},{name:"bigint",test:_Ee},{name:"Fraction",test:Jm},{name:"Unit",test:qi},{name:"identifier",test:o=>Na&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:Na},{name:"Chain",test:hU},{name:"Array",test:En},{name:"Matrix",test:Tt},{name:"DenseMatrix",test:y0},{name:"SparseMatrix",test:Xl},{name:"Range",test:DT},{name:"Index",test:Bb},{name:"boolean",test:OEe},{name:"ResultSet",test:FEe},{name:"Help",test:dU},{name:"function",test:REe},{name:"Date",test:MEe},{name:"RegExp",test:PEe},{name:"null",test:BEe},{name:"undefined",test:LEe},{name:"AccessorNode",test:hc},{name:"ArrayNode",test:Wi},{name:"AssignmentNode",test:zEe},{name:"BlockNode",test:UEe},{name:"ConditionalNode",test:VEe},{name:"ConstantNode",test:sn},{name:"FunctionNode",test:ju},{name:"FunctionAssignmentNode",test:eg},{name:"IndexNode",test:_d},{name:"Node",test:Dn},{name:"ObjectNode",test:zb},{name:"OperatorNode",test:pr},{name:"ParenthesisNode",test:qo},{name:"RangeNode",test:WEe},{name:"RelationalNode",test:qEe},{name:"SymbolNode",test:jr},{name:"Map",test:pU},{name:"Object",test:Lb}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(n||jv(u),oDe(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new n(u)}},{from:"number",to:"Complex",convert:function(u){return r||Xv(u),new r(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return r||Xv(u),new r(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return n||jv(u),new n(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return i||Kv(u),new i(u)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return r||Xv(u),new r(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){i||Kv(u);var l=new i(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){n||jv(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){i||Kv(u);try{return new i(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){r||Xv(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return n||jv(u),new n(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return i||Kv(u),new i(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return a||vDe(),new a(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),s.onMismatch=(o,u,l)=>{var c=s.createError(o,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&as(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},s.onMismatch=(o,u,l)=>{var c=s.createError(o,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&as(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},s});function jv(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Xv(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function vDe(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Kv(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var yDe="ResultSet",bDe=[],xDe=ee(yDe,bDe,()=>{function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0});/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Tf=9e15,cl=1e9,OS="0123456789abcdef",x0="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",w0="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",FS={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Tf,maxE:Tf,crypto:!1},wU,_o,Lt=!0,Vb="[DecimalError] ",Xu=Vb+"Invalid argument: ",NU=Vb+"Precision limit exceeded",SU=Vb+"crypto unavailable",CU="[object Decimal]",Da=Math.floor,Ar=Math.pow,wDe=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,NDe=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,SDe=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,EU=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ds=1e7,_t=7,CDe=9007199254740991,EDe=x0.length-1,RS=w0.length-1,He={toStringTag:CU};He.absoluteValue=He.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Et(t)};He.ceil=function(){return Et(new this.constructor(this),this.e+1,2)};He.clampedTo=He.clamp=function(t,e){var n,r=this,a=r.constructor;if(t=new a(t),e=new a(e),!t.s||!e.s)return new a(NaN);if(t.gt(e))throw Error(Xu+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new a(r)};He.comparedTo=He.cmp=function(t){var e,n,r,a,i=this,s=i.d,o=(t=new i.constructor(t)).d,u=i.s,l=t.s;if(!s||!o)return!u||!l?NaN:u!==l?u:s===o?0:!s^u<0?1:-1;if(!s[0]||!o[0])return s[0]?u:o[0]?-l:0;if(u!==l)return u;if(i.e!==t.e)return i.e>t.e^u<0?1:-1;for(r=s.length,a=o.length,e=0,n=r<a?r:a;e<n;++e)if(s[e]!==o[e])return s[e]>o[e]^u<0?1:-1;return r===a?0:r>a^u<0?1:-1};He.cosine=He.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+_t,r.rounding=1,n=DDe(r,IU(r,n)),r.precision=t,r.rounding=e,Et(_o==2||_o==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};He.cubeRoot=He.cbrt=function(){var t,e,n,r,a,i,s,o,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(Lt=!1,i=c.s*Ar(c.s*c,1/3),!i||Math.abs(i)==1/0?(n=ra(c.d),t=c.e,(i=(t-n.length+1)%3)&&(n+=i==1||i==-2?"0":"00"),i=Ar(n,1/3),t=Da((t+1)/3)-(t%3==(t<0?-1:2)),i==1/0?n="5e"+t:(n=i.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new f(n),r.s=c.s):r=new f(i.toString()),s=(t=f.precision)+3;;)if(o=r,u=o.times(o).times(o),l=u.plus(c),r=Bn(l.plus(c).times(o),l.plus(u),s+2,1),ra(o.d).slice(0,s)===(n=ra(r.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!a&&n=="4999"){if(!a&&(Et(o,t+1,0),o.times(o).times(o).eq(c))){r=o;break}s+=4,a=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Et(r,t+1,1),e=!r.times(r).times(r).eq(c));break}return Lt=!0,Et(r,t,f.rounding,e)};He.decimalPlaces=He.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Da(this.e/_t))*_t,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};He.dividedBy=He.div=function(t){return Bn(this,new this.constructor(t))};He.dividedToIntegerBy=He.divToInt=function(t){var e=this,n=e.constructor;return Et(Bn(e,new n(t),0,1,1),n.precision,n.rounding)};He.equals=He.eq=function(t){return this.cmp(t)===0};He.floor=function(){return Et(new this.constructor(this),this.e+1,3)};He.greaterThan=He.gt=function(t){return this.cmp(t)>0};He.greaterThanOrEqualTo=He.gte=function(t){var e=this.cmp(t);return e==1||e===0};He.hyperbolicCosine=He.cosh=function(){var t,e,n,r,a,i=this,s=i.constructor,o=new s(1);if(!i.isFinite())return new s(i.s?1/0:NaN);if(i.isZero())return o;n=s.precision,r=s.rounding,s.precision=n+Math.max(i.e,i.sd())+4,s.rounding=1,a=i.d.length,a<32?(t=Math.ceil(a/3),e=(1/qb(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),i=id(s,1,i.times(e),new s(1),!0);for(var u,l=t,c=new s(8);l--;)u=i.times(i),i=o.minus(u.times(c.minus(u.times(c))));return Et(i,s.precision=n,s.rounding=r,!0)};He.hyperbolicSine=He.sinh=function(){var t,e,n,r,a=this,i=a.constructor;if(!a.isFinite()||a.isZero())return new i(a);if(e=i.precision,n=i.rounding,i.precision=e+Math.max(a.e,a.sd())+4,i.rounding=1,r=a.d.length,r<3)a=id(i,2,a,a,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,a=a.times(1/qb(5,t)),a=id(i,2,a,a,!0);for(var s,o=new i(5),u=new i(16),l=new i(20);t--;)s=a.times(a),a=a.times(o.plus(s.times(u.times(s).plus(l))))}return i.precision=e,i.rounding=n,Et(a,e,n,!0)};He.hyperbolicTangent=He.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,Bn(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};He.inverseCosine=He.acos=function(){var t,e=this,n=e.constructor,r=e.abs().cmp(1),a=n.precision,i=n.rounding;return r!==-1?r===0?e.isNeg()?Ss(n,a,i):new n(0):new n(NaN):e.isZero()?Ss(n,a+4,i).times(.5):(n.precision=a+6,n.rounding=1,e=e.asin(),t=Ss(n,a+4,i).times(.5),n.precision=a,n.rounding=i,t.minus(e))};He.inverseHyperbolicCosine=He.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Lt=!1,n=n.times(n).minus(1).sqrt().plus(n),Lt=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};He.inverseHyperbolicSine=He.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Lt=!1,n=n.times(n).plus(1).sqrt().plus(n),Lt=!0,r.precision=t,r.rounding=e,n.ln())};He.inverseHyperbolicTangent=He.atanh=function(){var t,e,n,r,a=this,i=a.constructor;return a.isFinite()?a.e>=0?new i(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(t=i.precision,e=i.rounding,r=a.sd(),Math.max(r,t)<2*-a.e-1?Et(new i(a),t,e,!0):(i.precision=n=r-a.e,a=Bn(a.plus(1),new i(1).minus(a),n+t,1),i.precision=t+4,i.rounding=1,a=a.ln(),i.precision=t,i.rounding=e,a.times(.5))):new i(NaN)};He.inverseSine=He.asin=function(){var t,e,n,r,a=this,i=a.constructor;return a.isZero()?new i(a):(e=a.abs().cmp(1),n=i.precision,r=i.rounding,e!==-1?e===0?(t=Ss(i,n+4,r).times(.5),t.s=a.s,t):new i(NaN):(i.precision=n+6,i.rounding=1,a=a.div(new i(1).minus(a.times(a)).sqrt().plus(1)).atan(),i.precision=n,i.rounding=r,a.times(2)))};He.inverseTangent=He.atan=function(){var t,e,n,r,a,i,s,o,u,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=RS)return s=Ss(c,f+4,d).times(.25),s.s=l.s,s}else{if(!l.s)return new c(NaN);if(f+4<=RS)return s=Ss(c,f+4,d).times(.5),s.s=l.s,s}for(c.precision=o=f+10,c.rounding=1,n=Math.min(28,o/_t+2|0),t=n;t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(Lt=!1,e=Math.ceil(o/_t),r=1,u=l.times(l),s=new c(l),a=l;t!==-1;)if(a=a.times(u),i=s.minus(a.div(r+=2)),a=a.times(u),s=i.plus(a.div(r+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===i.d[t]&&t--;);return n&&(s=s.times(2<<n-1)),Lt=!0,Et(s,c.precision=f,c.rounding=d,!0)};He.isFinite=function(){return!!this.d};He.isInteger=He.isInt=function(){return!!this.d&&Da(this.e/_t)>this.d.length-2};He.isNaN=function(){return!this.s};He.isNegative=He.isNeg=function(){return this.s<0};He.isPositive=He.isPos=function(){return this.s>0};He.isZero=function(){return!!this.d&&this.d[0]===0};He.lessThan=He.lt=function(t){return this.cmp(t)<0};He.lessThanOrEqualTo=He.lte=function(t){return this.cmp(t)<1};He.logarithm=He.log=function(t){var e,n,r,a,i,s,o,u,l=this,c=l.constructor,f=c.precision,d=c.rounding,h=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)i=!0;else{for(a=n[0];a%10===0;)a/=10;i=a!==1}if(Lt=!1,o=f+h,s=Au(l,o),r=e?N0(c,o+10):Au(t,o),u=Bn(s,r,o,1),wh(u.d,a=f,d))do if(o+=10,s=Au(l,o),r=e?N0(c,o+10):Au(t,o),u=Bn(s,r,o,1),!i){+ra(u.d).slice(a+1,a+15)+1==1e14&&(u=Et(u,f+1,0));break}while(wh(u.d,a+=10,d));return Lt=!0,Et(u,f,d)};He.minus=He.sub=function(t){var e,n,r,a,i,s,o,u,l,c,f,d,h=this,m=h.constructor;if(t=new m(t),!h.d||!t.d)return!h.s||!t.s?t=new m(NaN):h.d?t.s=-t.s:t=new m(t.d||h.s!==t.s?h:NaN),t;if(h.s!=t.s)return t.s=-t.s,h.plus(t);if(l=h.d,d=t.d,o=m.precision,u=m.rounding,!l[0]||!d[0]){if(d[0])t.s=-t.s;else if(l[0])t=new m(h);else return new m(u===3?-0:0);return Lt?Et(t,o,u):t}if(n=Da(t.e/_t),c=Da(h.e/_t),l=l.slice(),i=c-n,i){for(f=i<0,f?(e=l,i=-i,s=d.length):(e=d,n=c,s=l.length),r=Math.max(Math.ceil(o/_t),s)+2,i>r&&(i=r,e.length=1),e.reverse(),r=i;r--;)e.push(0);e.reverse()}else{for(r=l.length,s=d.length,f=r<s,f&&(s=r),r=0;r<s;r++)if(l[r]!=d[r]){f=l[r]<d[r];break}i=0}for(f&&(e=l,l=d,d=e,t.s=-t.s),s=l.length,r=d.length-s;r>0;--r)l[s++]=0;for(r=d.length;r>i;){if(l[--r]<d[r]){for(a=r;a&&l[--a]===0;)l[a]=Ds-1;--l[a],l[r]+=Ds}l[r]-=d[r]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=Wb(l,n),Lt?Et(t,o,u):t):new m(u===3?-0:0)};He.modulo=He.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Et(new r(n),r.precision,r.rounding):(Lt=!1,r.modulo==9?(e=Bn(n,t.abs(),0,3,1),e.s*=t.s):e=Bn(n,t,0,r.modulo,1),e=e.times(t),Lt=!0,n.minus(e))};He.naturalExponential=He.exp=function(){return MS(this)};He.naturalLogarithm=He.ln=function(){return Au(this)};He.negated=He.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Et(t)};He.plus=He.add=function(t){var e,n,r,a,i,s,o,u,l,c,f=this,d=f.constructor;if(t=new d(t),!f.d||!t.d)return!f.s||!t.s?t=new d(NaN):f.d||(t=new d(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(l=f.d,c=t.d,o=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(t=new d(f)),Lt?Et(t,o,u):t;if(i=Da(f.e/_t),r=Da(t.e/_t),l=l.slice(),a=i-r,a){for(a<0?(n=l,a=-a,s=c.length):(n=c,r=i,s=l.length),i=Math.ceil(o/_t),s=i>s?i+1:s+1,a>s&&(a=s,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(s=l.length,a=c.length,s-a<0&&(a=s,n=c,c=l,l=n),e=0;a;)e=(l[--a]=l[a]+c[a]+e)/Ds|0,l[a]%=Ds;for(e&&(l.unshift(e),++r),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=Wb(l,r),Lt?Et(t,o,u):t};He.precision=He.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Xu+t);return n.d?(e=DU(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};He.round=function(){var t=this,e=t.constructor;return Et(new e(t),t.e+1,e.rounding)};He.sine=He.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+_t,r.rounding=1,n=$De(r,IU(r,n)),r.precision=t,r.rounding=e,Et(_o>2?n.neg():n,t,e,!0)):new r(NaN)};He.squareRoot=He.sqrt=function(){var t,e,n,r,a,i,s=this,o=s.d,u=s.e,l=s.s,c=s.constructor;if(l!==1||!o||!o[0])return new c(!l||l<0&&(!o||o[0])?NaN:o?s:1/0);for(Lt=!1,l=Math.sqrt(+s),l==0||l==1/0?(e=ra(o),(e.length+u)%2==0&&(e+="0"),l=Math.sqrt(e),u=Da((u+1)/2)-(u<0||u%2),l==1/0?e="5e"+u:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),r=new c(e)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(i=r,r=i.plus(Bn(s,i,n+2,1)).times(.5),ra(i.d).slice(0,n)===(e=ra(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!a&&e=="4999"){if(!a&&(Et(i,u+1,0),i.times(i).eq(s))){r=i;break}n+=4,a=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Et(r,u+1,1),t=!r.times(r).eq(s));break}return Lt=!0,Et(r,u,c.rounding,t)};He.tangent=He.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=Bn(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Et(_o==2||_o==4?n.neg():n,t,e,!0)):new r(NaN)};He.times=He.mul=function(t){var e,n,r,a,i,s,o,u,l,c=this,f=c.constructor,d=c.d,h=(t=new f(t)).d;if(t.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!t.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?t.s/0:t.s*0);for(n=Da(c.e/_t)+Da(t.e/_t),u=d.length,l=h.length,u<l&&(i=d,d=h,h=i,s=u,u=l,l=s),i=[],s=u+l,r=s;r--;)i.push(0);for(r=l;--r>=0;){for(e=0,a=u+r;a>r;)o=i[a]+h[r]*d[a-r-1]+e,i[a--]=o%Ds|0,e=o/Ds|0;i[a]=(i[a]+e)%Ds|0}for(;!i[--s];)i.pop();return e?++n:i.shift(),t.d=i,t.e=Wb(i,n),Lt?Et(t,f.precision,f.rounding):t};He.toBinary=function(t,e){return TT(this,2,t,e)};He.toDecimalPlaces=He.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(pi(t,0,cl),e===void 0?e=r.rounding:pi(e,0,8),Et(n,t+n.e+1,e))};He.toExponential=function(t,e){var n,r=this,a=r.constructor;return t===void 0?n=lo(r,!0):(pi(t,0,cl),e===void 0?e=a.rounding:pi(e,0,8),r=Et(new a(r),t+1,e),n=lo(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};He.toFixed=function(t,e){var n,r,a=this,i=a.constructor;return t===void 0?n=lo(a):(pi(t,0,cl),e===void 0?e=i.rounding:pi(e,0,8),r=Et(new i(a),t+a.e+1,e),n=lo(r,!1,t+r.e+1)),a.isNeg()&&!a.isZero()?"-"+n:n};He.toFraction=function(t){var e,n,r,a,i,s,o,u,l,c,f,d,h=this,m=h.d,v=h.constructor;if(!m)return new v(h);if(l=n=new v(1),r=u=new v(0),e=new v(r),i=e.e=DU(m)-h.e-1,s=i%_t,e.d[0]=Ar(10,s<0?_t+s:s),t==null)t=i>0?e:l;else{if(o=new v(t),!o.isInt()||o.lt(l))throw Error(Xu+o);t=o.gt(e)?i>0?e:l:o}for(Lt=!1,o=new v(ra(m)),c=v.precision,v.precision=i=m.length*_t*2;f=Bn(o,e,0,1,1),a=n.plus(f.times(r)),a.cmp(t)!=1;)n=r,r=a,a=l,l=u.plus(f.times(a)),u=a,a=e,e=o.minus(f.times(a)),o=a;return a=Bn(t.minus(n),r,0,1,1),u=u.plus(a.times(l)),n=n.plus(a.times(r)),u.s=l.s=h.s,d=Bn(l,r,i,1).minus(h).abs().cmp(Bn(u,n,i,1).minus(h).abs())<1?[l,r]:[u,n],v.precision=c,Lt=!0,d};He.toHexadecimal=He.toHex=function(t,e){return TT(this,16,t,e)};He.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:pi(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(Lt=!1,n=Bn(n,t,0,e,1).times(t),Lt=!0,Et(n)):(t.s=n.s,n=t),n};He.toNumber=function(){return+this};He.toOctal=function(t,e){return TT(this,8,t,e)};He.toPower=He.pow=function(t){var e,n,r,a,i,s,o=this,u=o.constructor,l=+(t=new u(t));if(!o.d||!t.d||!o.d[0]||!t.d[0])return new u(Ar(+o,l));if(o=new u(o),o.eq(1))return o;if(r=u.precision,i=u.rounding,t.eq(1))return Et(o,r,i);if(e=Da(t.e/_t),e>=t.d.length-1&&(n=l<0?-l:l)<=CDe)return a=TU(u,o,n,r),t.s<0?new u(1).div(a):Et(a,r,i);if(s=o.s,s<0){if(e<t.d.length-1)return new u(NaN);if(t.d[e]&1||(s=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=s,o}return n=Ar(+o,l),e=n==0||!isFinite(n)?Da(l*(Math.log("0."+ra(o.d))/Math.LN10+o.e+1)):new u(n+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?s/0:0):(Lt=!1,u.rounding=o.s=1,n=Math.min(12,(e+"").length),a=MS(t.times(Au(o,r+n)),r),a.d&&(a=Et(a,r+5,1),wh(a.d,r,i)&&(e=r+10,a=Et(MS(t.times(Au(o,e+n)),e),e+5,1),+ra(a.d).slice(r+1,r+15)+1==1e14&&(a=Et(a,r+1,0)))),a.s=s,Lt=!0,u.rounding=i,Et(a,r,i))};He.toPrecision=function(t,e){var n,r=this,a=r.constructor;return t===void 0?n=lo(r,r.e<=a.toExpNeg||r.e>=a.toExpPos):(pi(t,1,cl),e===void 0?e=a.rounding:pi(e,0,8),r=Et(new a(r),t,e),n=lo(r,t<=r.e||r.e<=a.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};He.toSignificantDigits=He.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(pi(t,1,cl),e===void 0?e=r.rounding:pi(e,0,8)),Et(new r(n),t,e)};He.toString=function(){var t=this,e=t.constructor,n=lo(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};He.truncated=He.trunc=function(){return Et(new this.constructor(this),this.e+1,1)};He.valueOf=He.toJSON=function(){var t=this,e=t.constructor,n=lo(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function ra(t){var e,n,r,a=t.length-1,i="",s=t[0];if(a>0){for(i+=s,e=1;e<a;e++)r=t[e]+"",n=_t-r.length,n&&(i+=wu(n)),i+=r;s=t[e],r=s+"",n=_t-r.length,n&&(i+=wu(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}function pi(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Xu+t)}function wh(t,e,n,r){var a,i,s,o;for(i=t[0];i>=10;i/=10)--e;return--e<0?(e+=_t,a=0):(a=Math.ceil((e+1)/_t),e%=_t),i=Ar(10,_t-e),o=t[a]%i|0,r==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),s=n<4&&o==99999||n>3&&o==49999||o==5e4||o==0):s=(n<4&&o+1==i||n>3&&o+1==i/2)&&(t[a+1]/i/100|0)==Ar(10,e-2)-1||(o==i/2||o==0)&&(t[a+1]/i/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),s=(r||n<4)&&o==9999||!r&&n>3&&o==4999):s=((r||n<4)&&o+1==i||!r&&n>3&&o+1==i/2)&&(t[a+1]/i/1e3|0)==Ar(10,e-3)-1,s}function Dy(t,e,n){for(var r,a=[0],i,s=0,o=t.length;s<o;){for(i=a.length;i--;)a[i]*=e;for(a[0]+=OS.indexOf(t.charAt(s++)),r=0;r<a.length;r++)a[r]>n-1&&(a[r+1]===void 0&&(a[r+1]=0),a[r+1]+=a[r]/n|0,a[r]%=n)}return a.reverse()}function DDe(t,e){var n,r,a;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),a=(1/qb(4,n)).toString()):(n=16,a="2.3283064365386962890625e-10"),t.precision+=n,e=id(t,1,e.times(a),new t(1));for(var i=n;i--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=n,e}var Bn=function(){function t(r,a,i){var s,o=0,u=r.length;for(r=r.slice();u--;)s=r[u]*a+o,r[u]=s%i|0,o=s/i|0;return o&&r.unshift(o),r}function e(r,a,i,s){var o,u;if(i!=s)u=i>s?1:-1;else for(o=u=0;o<i;o++)if(r[o]!=a[o]){u=r[o]>a[o]?1:-1;break}return u}function n(r,a,i,s){for(var o=0;i--;)r[i]-=o,o=r[i]<a[i]?1:0,r[i]=o*s+r[i]-a[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,i,s,o,u){var l,c,f,d,h,m,v,y,b,w,x,S,C,E,A,k,T,I,$,O,B=r.constructor,z=r.s==a.s?1:-1,L=r.d,F=a.d;if(!L||!L[0]||!F||!F[0])return new B(!r.s||!a.s||(L?F&&L[0]==F[0]:!F)?NaN:L&&L[0]==0||!F?z*0:z/0);for(u?(h=1,c=r.e-a.e):(u=Ds,h=_t,c=Da(r.e/h)-Da(a.e/h)),$=F.length,T=L.length,b=new B(z),w=b.d=[],f=0;F[f]==(L[f]||0);f++);if(F[f]>(L[f]||0)&&c--,i==null?(E=i=B.precision,s=B.rounding):o?E=i+(r.e-a.e)+1:E=i,E<0)w.push(1),m=!0;else{if(E=E/h+2|0,f=0,$==1){for(d=0,F=F[0],E++;(f<T||d)&&E--;f++)A=d*u+(L[f]||0),w[f]=A/F|0,d=A%F|0;m=d||f<T}else{for(d=u/(F[0]+1)|0,d>1&&(F=t(F,d,u),L=t(L,d,u),$=F.length,T=L.length),k=$,x=L.slice(0,$),S=x.length;S<$;)x[S++]=0;O=F.slice(),O.unshift(0),I=F[0],F[1]>=u/2&&++I;do d=0,l=e(F,x,$,S),l<0?(C=x[0],$!=S&&(C=C*u+(x[1]||0)),d=C/I|0,d>1?(d>=u&&(d=u-1),v=t(F,d,u),y=v.length,S=x.length,l=e(v,x,y,S),l==1&&(d--,n(v,$<y?O:F,y,u))):(d==0&&(l=d=1),v=F.slice()),y=v.length,y<S&&v.unshift(0),n(x,v,S,u),l==-1&&(S=x.length,l=e(F,x,$,S),l<1&&(d++,n(x,$<S?O:F,S,u))),S=x.length):l===0&&(d++,x=[0]),w[f++]=d,l&&x[0]?x[S++]=L[k]||0:(x=[L[k]],S=1);while((k++<T||x[0]!==void 0)&&E--);m=x[0]!==void 0}w[0]||w.shift()}if(h==1)b.e=c,wU=m;else{for(f=1,d=w[0];d>=10;d/=10)f++;b.e=f+c*h-1,Et(b,o?i+b.e+1:i,s,m)}return b}}();function Et(t,e,n,r){var a,i,s,o,u,l,c,f,d,h=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(a=1,o=f[0];o>=10;o/=10)a++;if(i=e-a,i<0)i+=_t,s=e,c=f[d=0],u=c/Ar(10,a-s-1)%10|0;else if(d=Math.ceil((i+1)/_t),o=f.length,d>=o)if(r){for(;o++<=d;)f.push(0);c=u=0,a=1,i%=_t,s=i-_t+1}else break e;else{for(c=o=f[d],a=1;o>=10;o/=10)a++;i%=_t,s=i-_t+a,u=s<0?0:c/Ar(10,a-s-1)%10|0}if(r=r||e<0||f[d+1]!==void 0||(s<0?c:c%Ar(10,a-s-1)),l=n<4?(u||r)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(i>0?s>0?c/Ar(10,a-s):0:f[d-1])%10&1||n==(t.s<0?8:7)),e<1||!f[0])return f.length=0,l?(e-=t.e+1,f[0]=Ar(10,(_t-e%_t)%_t),t.e=-e||0):f[0]=t.e=0,t;if(i==0?(f.length=d,o=1,d--):(f.length=d+1,o=Ar(10,_t-i),f[d]=s>0?(c/Ar(10,a-s)%Ar(10,s)|0)*o:0),l)for(;;)if(d==0){for(i=1,s=f[0];s>=10;s/=10)i++;for(s=f[0]+=o,o=1;s>=10;s/=10)o++;i!=o&&(t.e++,f[0]==Ds&&(f[0]=1));break}else{if(f[d]+=o,f[d]!=Ds)break;f[d--]=0,o=1}for(i=f.length;f[--i]===0;)f.pop()}return Lt&&(t.e>h.maxE?(t.d=null,t.e=NaN):t.e<h.minE&&(t.e=0,t.d=[0])),t}function lo(t,e,n){if(!t.isFinite())return AU(t);var r,a=t.e,i=ra(t.d),s=i.length;return e?(n&&(r=n-s)>0?i=i.charAt(0)+"."+i.slice(1)+wu(r):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(t.e<0?"e":"e+")+t.e):a<0?(i="0."+wu(-a-1)+i,n&&(r=n-s)>0&&(i+=wu(r))):a>=s?(i+=wu(a+1-s),n&&(r=n-a-1)>0&&(i=i+"."+wu(r))):((r=a+1)<s&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-s)>0&&(a+1===s&&(i+="."),i+=wu(r))),i}function Wb(t,e){var n=t[0];for(e*=_t;n>=10;n/=10)e++;return e}function N0(t,e,n){if(e>EDe)throw Lt=!0,n&&(t.precision=n),Error(NU);return Et(new t(x0),e,1,!0)}function Ss(t,e,n){if(e>RS)throw Error(NU);return Et(new t(w0),e,n,!0)}function DU(t){var e=t.length-1,n=e*_t+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function wu(t){for(var e="";t--;)e+="0";return e}function TU(t,e,n,r){var a,i=new t(1),s=Math.ceil(r/_t+4);for(Lt=!1;;){if(n%2&&(i=i.times(e),zO(i.d,s)&&(a=!0)),n=Da(n/2),n===0){n=i.d.length-1,a&&i.d[n]===0&&++i.d[n];break}e=e.times(e),zO(e.d,s)}return Lt=!0,i}function LO(t){return t.d[t.d.length-1]&1}function $U(t,e,n){for(var r,a=new t(e[0]),i=0;++i<e.length;)if(r=new t(e[i]),r.s)a[n](r)&&(a=r);else{a=r;break}return a}function MS(t,e){var n,r,a,i,s,o,u,l=0,c=0,f=0,d=t.constructor,h=d.rounding,m=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(Lt=!1,u=m):u=e,o=new d(.03125);t.e>-2;)t=t.times(o),f+=5;for(r=Math.log(Ar(2,f))/Math.LN10*2+5|0,u+=r,n=i=s=new d(1),d.precision=u;;){if(i=Et(i.times(t),u,1),n=n.times(++c),o=s.plus(Bn(i,n,u,1)),ra(o.d).slice(0,u)===ra(s.d).slice(0,u)){for(a=f;a--;)s=Et(s.times(s),u,1);if(e==null)if(l<3&&wh(s.d,u-r,h,l))d.precision=u+=10,n=i=o=new d(1),c=0,l++;else return Et(s,d.precision=m,h,Lt=!0);else return d.precision=m,s}s=o}}function Au(t,e){var n,r,a,i,s,o,u,l,c,f,d,h=1,m=10,v=t,y=v.d,b=v.constructor,w=b.rounding,x=b.precision;if(v.s<0||!y||!y[0]||!v.e&&y[0]==1&&y.length==1)return new b(y&&!y[0]?-1/0:v.s!=1?NaN:y?0:v);if(e==null?(Lt=!1,c=x):c=e,b.precision=c+=m,n=ra(y),r=n.charAt(0),Math.abs(i=v.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=ra(v.d),r=n.charAt(0),h++;i=v.e,r>1?(v=new b("0."+n),i++):v=new b(r+"."+n.slice(1))}else return l=N0(b,c+2,x).times(i+""),v=Au(new b(r+"."+n.slice(1)),c-m).plus(l),b.precision=x,e==null?Et(v,x,w,Lt=!0):v;for(f=v,u=s=v=Bn(v.minus(1),v.plus(1),c,1),d=Et(v.times(v),c,1),a=3;;){if(s=Et(s.times(d),c,1),l=u.plus(Bn(s,new b(a),c,1)),ra(l.d).slice(0,c)===ra(u.d).slice(0,c))if(u=u.times(2),i!==0&&(u=u.plus(N0(b,c+2,x).times(i+""))),u=Bn(u,new b(h),c,1),e==null)if(wh(u.d,c-m,w,o))b.precision=c+=m,l=s=v=Bn(f.minus(1),f.plus(1),c,1),d=Et(v.times(v),c,1),a=o=1;else return Et(u,b.precision=x,w,Lt=!0);else return b.precision=x,u;u=l,a+=2}}function AU(t){return String(t.s*t.s/0)}function PS(t,e){var n,r,a;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(a=e.length;e.charCodeAt(a-1)===48;--a);if(e=e.slice(r,a),e){if(a-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%_t,n<0&&(r+=_t),r<a){for(r&&t.d.push(+e.slice(0,r)),a-=_t;r<a;)t.d.push(+e.slice(r,r+=_t));e=e.slice(r),r=_t-e.length}else r-=a;for(;r--;)e+="0";t.d.push(+e),Lt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function TDe(t,e){var n,r,a,i,s,o,u,l,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),EU.test(e))return PS(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(NDe.test(e))n=16,e=e.toLowerCase();else if(wDe.test(e))n=2;else if(SDe.test(e))n=8;else throw Error(Xu+e);for(i=e.search(/p/i),i>0?(u=+e.slice(i+1),e=e.substring(2,i)):e=e.slice(2),i=e.indexOf("."),s=i>=0,r=t.constructor,s&&(e=e.replace(".",""),o=e.length,i=o-i,a=TU(r,new r(n),i,i*2)),l=Dy(e,n,Ds),c=l.length-1,i=c;l[i]===0;--i)l.pop();return i<0?new r(t.s*0):(t.e=Wb(l,c),t.d=l,Lt=!1,s&&(t=Bn(t,a,o*4)),u&&(t=t.times(Math.abs(u)<54?Ar(2,u):Ku.pow(2,u))),Lt=!0,t)}function $De(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:id(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/qb(5,n)),e=id(t,2,e,e);for(var a,i=new t(5),s=new t(16),o=new t(20);n--;)a=e.times(e),e=e.times(i.plus(a.times(s.times(a).minus(o))));return e}function id(t,e,n,r,a){var i,s,o,u,l=t.precision,c=Math.ceil(l/_t);for(Lt=!1,u=n.times(n),o=new t(r);;){if(s=Bn(o.times(u),new t(e++*e++),l,1),o=a?r.plus(s):r.minus(s),r=Bn(s.times(u),new t(e++*e++),l,1),s=o.plus(r),s.d[c]!==void 0){for(i=c;s.d[i]===o.d[i]&&i--;);if(i==-1)break}i=o,o=r,r=s,s=i}return Lt=!0,s.d.length=c+1,s}function qb(t,e){for(var n=t;--e;)n*=t;return n}function IU(t,e){var n,r=e.s<0,a=Ss(t,t.precision,1),i=a.times(.5);if(e=e.abs(),e.lte(i))return _o=r?4:1,e;if(n=e.divToInt(a),n.isZero())_o=r?3:2;else{if(e=e.minus(n.times(a)),e.lte(i))return _o=LO(n)?r?2:3:r?4:1,e;_o=LO(n)?r?1:4:r?3:2}return e.minus(a).abs()}function TT(t,e,n,r){var a,i,s,o,u,l,c,f,d,h=t.constructor,m=n!==void 0;if(m?(pi(n,1,cl),r===void 0?r=h.rounding:pi(r,0,8)):(n=h.precision,r=h.rounding),!t.isFinite())c=AU(t);else{for(c=lo(t),s=c.indexOf("."),m?(a=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):a=e,s>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-s,d.d=Dy(lo(d),10,a),d.e=d.d.length),f=Dy(c,10,a),i=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=m?"0p+0":"0";else{if(s<0?i--:(t=new h(t),t.d=f,t.e=i,t=Bn(t,d,n,r,0,a),f=t.d,i=t.e,l=wU),s=f[n],o=a/2,l=l||f[n+1]!==void 0,l=r<4?(s!==void 0||l)&&(r===0||r===(t.s<0?3:2)):s>o||s===o&&(r===4||l||r===6&&f[n-1]&1||r===(t.s<0?8:7)),f.length=n,l)for(;++f[--n]>a-1;)f[n]=0,n||(++i,f.unshift(1));for(u=f.length;!f[u-1];--u);for(s=0,c="";s<u;s++)c+=OS.charAt(f[s]);if(m){if(u>1)if(e==16||e==8){for(s=e==16?4:3,--u;u%s;u++)c+="0";for(f=Dy(c,a,e),u=f.length;!f[u-1];--u);for(s=1,c="1.";s<u;s++)c+=OS.charAt(f[s])}else c=c.charAt(0)+"."+c.slice(1);c=c+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)c="0"+c;c="0."+c}else if(++i>u)for(i-=u;i--;)c+="0";else i<u&&(c=c.slice(0,i)+"."+c.slice(i))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function zO(t,e){if(t.length>e)return t.length=e,!0}function ADe(t){return new this(t).abs()}function IDe(t){return new this(t).acos()}function kDe(t){return new this(t).acosh()}function _De(t,e){return new this(t).plus(e)}function ODe(t){return new this(t).asin()}function FDe(t){return new this(t).asinh()}function RDe(t){return new this(t).atan()}function MDe(t){return new this(t).atanh()}function PDe(t,e){t=new this(t),e=new this(e);var n,r=this.precision,a=this.rounding,i=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=Ss(this,i,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?Ss(this,r,a):new this(0),n.s=t.s):!t.d||e.isZero()?(n=Ss(this,i,1).times(.5),n.s=t.s):e.s<0?(this.precision=i,this.rounding=1,n=this.atan(Bn(t,e,i,1)),e=Ss(this,i,1),this.precision=r,this.rounding=a,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(Bn(t,e,i,1)),n}function BDe(t){return new this(t).cbrt()}function LDe(t){return Et(t=new this(t),t.e+1,2)}function zDe(t,e,n){return new this(t).clamp(e,n)}function UDe(t){if(!t||typeof t!="object")throw Error(Vb+"Object expected");var e,n,r,a=t.defaults===!0,i=["precision",1,cl,"rounding",0,8,"toExpNeg",-Tf,0,"toExpPos",0,Tf,"maxE",0,Tf,"minE",-Tf,0,"modulo",0,9];for(e=0;e<i.length;e+=3)if(n=i[e],a&&(this[n]=FS[n]),(r=t[n])!==void 0)if(Da(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Xu+n+": "+r);if(n="crypto",a&&(this[n]=FS[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(SU);else this[n]=!1;else throw Error(Xu+n+": "+r);return this}function VDe(t){return new this(t).cos()}function WDe(t){return new this(t).cosh()}function kU(t){var e,n,r;function a(i){var s,o,u,l=this;if(!(l instanceof a))return new a(i);if(l.constructor=a,UO(i)){l.s=i.s,Lt?!i.d||i.e>a.maxE?(l.e=NaN,l.d=null):i.e<a.minE?(l.e=0,l.d=[0]):(l.e=i.e,l.d=i.d.slice()):(l.e=i.e,l.d=i.d?i.d.slice():i.d);return}if(u=typeof i,u==="number"){if(i===0){l.s=1/i<0?-1:1,l.e=0,l.d=[0];return}if(i<0?(i=-i,l.s=-1):l.s=1,i===~~i&&i<1e7){for(s=0,o=i;o>=10;o/=10)s++;Lt?s>a.maxE?(l.e=NaN,l.d=null):s<a.minE?(l.e=0,l.d=[0]):(l.e=s,l.d=[i]):(l.e=s,l.d=[i]);return}else if(i*0!==0){i||(l.s=NaN),l.e=NaN,l.d=null;return}return PS(l,i.toString())}else if(u!=="string")throw Error(Xu+i);return(o=i.charCodeAt(0))===45?(i=i.slice(1),l.s=-1):(o===43&&(i=i.slice(1)),l.s=1),EU.test(i)?PS(l,i):TDe(l,i)}if(a.prototype=He,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=UDe,a.clone=kU,a.isDecimal=UO,a.abs=ADe,a.acos=IDe,a.acosh=kDe,a.add=_De,a.asin=ODe,a.asinh=FDe,a.atan=RDe,a.atanh=MDe,a.atan2=PDe,a.cbrt=BDe,a.ceil=LDe,a.clamp=zDe,a.cos=VDe,a.cosh=WDe,a.div=qDe,a.exp=GDe,a.floor=HDe,a.hypot=jDe,a.ln=XDe,a.log=KDe,a.log10=ZDe,a.log2=YDe,a.max=QDe,a.min=JDe,a.mod=eTe,a.mul=tTe,a.pow=nTe,a.random=rTe,a.round=aTe,a.sign=iTe,a.sin=sTe,a.sinh=oTe,a.sqrt=uTe,a.sub=lTe,a.sum=cTe,a.tan=fTe,a.tanh=dTe,a.trunc=pTe,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return a.config(t),a}function qDe(t,e){return new this(t).div(e)}function GDe(t){return new this(t).exp()}function HDe(t){return Et(t=new this(t),t.e+1,3)}function jDe(){var t,e,n=new this(0);for(Lt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return Lt=!0,new this(1/0);n=e}return Lt=!0,n.sqrt()}function UO(t){return t instanceof Ku||t&&t.toStringTag===CU||!1}function XDe(t){return new this(t).ln()}function KDe(t,e){return new this(t).log(e)}function YDe(t){return new this(t).log(2)}function ZDe(t){return new this(t).log(10)}function QDe(){return $U(this,arguments,"lt")}function JDe(){return $U(this,arguments,"gt")}function eTe(t,e){return new this(t).mod(e)}function tTe(t,e){return new this(t).mul(e)}function nTe(t,e){return new this(t).pow(e)}function rTe(t){var e,n,r,a,i=0,s=new this(1),o=[];if(t===void 0?t=this.precision:pi(t,1,cl),r=Math.ceil(t/_t),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));i<r;)a=e[i],a>=429e7?e[i]=crypto.getRandomValues(new Uint32Array(1))[0]:o[i++]=a%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);i<r;)a=e[i]+(e[i+1]<<8)+(e[i+2]<<16)+((e[i+3]&127)<<24),a>=214e7?crypto.randomBytes(4).copy(e,i):(o.push(a%1e7),i+=4);i=r/4}else throw Error(SU);else for(;i<r;)o[i++]=Math.random()*1e7|0;for(r=o[--i],t%=_t,r&&t&&(a=Ar(10,_t-t),o[i]=(r/a|0)*a);o[i]===0;i--)o.pop();if(i<0)n=0,o=[0];else{for(n=-1;o[0]===0;n-=_t)o.shift();for(r=1,a=o[0];a>=10;a/=10)r++;r<_t&&(n-=_t-r)}return s.e=n,s.d=o,s}function aTe(t){return Et(t=new this(t),t.e+1,this.rounding)}function iTe(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function sTe(t){return new this(t).sin()}function oTe(t){return new this(t).sinh()}function uTe(t){return new this(t).sqrt()}function lTe(t,e){return new this(t).sub(e)}function cTe(){var t=0,e=arguments,n=new this(e[t]);for(Lt=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return Lt=!0,Et(n,this.precision,this.rounding)}function fTe(t){return new this(t).tan()}function dTe(t){return new this(t).tanh()}function pTe(t){return Et(t=new this(t),t.e+1,1)}He[Symbol.for("nodejs.util.inspect.custom")]=He.toString;He[Symbol.toStringTag]="Decimal";var Ku=He.constructor=kU(FS);x0=new Ku(x0);w0=new Ku(w0);var hTe="BigNumber",mTe=["?on","config"],gTe=ee(hTe,mTe,t=>{var{on:e,config:n}=t,r=Ku.clone({precision:n.precision,modulo:Ku.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(a){return new r(a.value)},e&&e("config",function(a,i){a.precision!==i.precision&&r.config({precision:a.precision})}),r},{isClass:!0});const ya=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},Li=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},vTe=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const n=t*t;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},M2=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},hf=function(){throw SyntaxError("Invalid Param")};function P2(t,e){const n=Math.abs(t),r=Math.abs(e);return t===0?Math.log(r):e===0?Math.log(n):n<3e3&&r<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const yTe={re:0,im:0},zl=function(t,e){const n=yTe;if(t==null)n.re=n.im=0;else if(e!==void 0)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return ze.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return ze.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else t.length===2?(n.re=t[0],n.im=t[1]):hf();break;case"string":n.im=n.re=0;const r=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let a=1,i=0;r===null&&hf();for(let s=0;s<r.length;s++){const o=r[s];o===" "||o==="	"||o===`
`||(o==="+"?a++:o==="-"?i++:o==="i"||o==="I"?(a+i===0&&hf(),r[s+1]!==" "&&!isNaN(r[s+1])?(n.im+=parseFloat((i%2?"-":"")+r[s+1]),s++):n.im+=parseFloat((i%2?"-":"")+"1"),a=i=0):((a+i===0||isNaN(o))&&hf(),r[s+1]==="i"||r[s+1]==="I"?(n.im+=parseFloat((i%2?"-":"")+o),s++):n.re+=parseFloat((i%2?"-":"")+o),a=i=0))}a+i>0&&hf();break;case"number":n.im=0,n.re=t;break;default:hf()}return isNaN(n.re)||isNaN(n.im),n};function ze(t,e){if(!(this instanceof ze))return new ze(t,e);const n=zl(t,e);this.re=n.re,this.im=n.im}ze.prototype={re:0,im:0,sign:function(){const t=M2(this.re,this.im);return new ze(this.re/t,this.im/t)},add:function(t,e){const n=zl(t,e),r=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im));return r||a?r&&a?ze.NAN:ze.INFINITY:new ze(this.re+n.re,this.im+n.im)},sub:function(t,e){const n=zl(t,e),r=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im));return r||a?r&&a?ze.NAN:ze.INFINITY:new ze(this.re-n.re,this.im-n.im)},mul:function(t,e){const n=zl(t,e),r=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im)),i=this.re===0&&this.im===0,s=n.re===0&&n.im===0;return r&&s||a&&i?ze.NAN:r||a?ze.INFINITY:n.im===0&&this.im===0?new ze(this.re*n.re,0):new ze(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){const n=zl(t,e),r=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im)),i=this.re===0&&this.im===0,s=n.re===0&&n.im===0;if(i&&s||r&&a)return ze.NAN;if(s||r)return ze.INFINITY;if(i||a)return ze.ZERO;if(n.im===0)return new ze(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const o=n.re/n.im,u=n.re*o+n.im;return new ze((this.re*o+this.im)/u,(this.im*o-this.re)/u)}else{const o=n.im/n.re,u=n.im*o+n.re;return new ze((this.re+this.im*o)/u,(this.im-this.re*o)/u)}},pow:function(t,e){const n=zl(t,e),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return ze.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new ze(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new ze(Math.pow(this.im,n.re),0);case 1:return new ze(0,Math.pow(this.im,n.re));case 2:return new ze(-Math.pow(this.im,n.re),0);case 3:return new ze(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return ze.ZERO;const i=Math.atan2(this.im,this.re),s=P2(this.re,this.im);let o=Math.exp(n.re*s-n.im*i),u=n.im*s+n.re*i;return new ze(o*Math.cos(u),o*Math.sin(u))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new ze(Math.sqrt(t),0):new ze(0,Math.sqrt(-t));const n=M2(t,e);let r=Math.sqrt(.5*(n+Math.abs(t))),a=Math.abs(e)/(2*r);return t>=0?new ze(r,e<0?-a:a):new ze(a,e<0?-r:r)},exp:function(){const t=Math.exp(this.re);return this.im===0?new ze(t,0):new ze(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new ze(Math.expm1(t)*Math.cos(e)+vTe(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new ze(Math.log(t),0):new ze(P2(t,e),Math.atan2(e,t))},abs:function(){return M2(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new ze(Math.sin(t)*ya(e),Math.cos(t)*Li(e))},cos:function(){const t=this.re,e=this.im;return new ze(Math.cos(t)*ya(e),-Math.sin(t)*Li(e))},tan:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)+ya(e);return new ze(Math.sin(t)/n,Li(e)/n)},cot:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)-ya(e);return new ze(-Math.sin(t)/n,Li(e)/n)},sec:function(){const t=this.re,e=this.im,n=.5*ya(2*e)+.5*Math.cos(2*t);return new ze(Math.cos(t)*ya(e)/n,Math.sin(t)*Li(e)/n)},csc:function(){const t=this.re,e=this.im,n=.5*ya(2*e)-.5*Math.cos(2*t);return new ze(Math.sin(t)*ya(e)/n,-Math.cos(t)*Li(e)/n)},asin:function(){const t=this.re,e=this.im,n=new ze(e*e-t*t+1,-2*t*e).sqrt(),r=new ze(n.re-e,n.im+t).log();return new ze(r.im,-r.re)},acos:function(){const t=this.re,e=this.im,n=new ze(e*e-t*t+1,-2*t*e).sqrt(),r=new ze(n.re-e,n.im+t).log();return new ze(Math.PI/2-r.im,r.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new ze(0,1/0);if(e===-1)return new ze(0,-1/0)}const n=t*t+(1-e)*(1-e),r=new ze((1-e*e-t*t)/n,-2*t/n).log();return new ze(-.5*r.im,.5*r.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new ze(Math.atan2(1,t),0);const n=t*t+e*e;return n!==0?new ze(t/n,-e/n).atan():new ze(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new ze(0,1/0);const n=t*t+e*e;return n!==0?new ze(t/n,-e/n).acos():new ze(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new ze(Math.PI/2,1/0);const n=t*t+e*e;return n!==0?new ze(t/n,-e/n).asin():new ze(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new ze(Li(t)*Math.cos(e),ya(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new ze(ya(t)*Math.cos(e),Li(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,n=ya(t)+Math.cos(e);return new ze(Li(t)/n,Math.sin(e)/n)},coth:function(){const t=2*this.re,e=2*this.im,n=ya(t)-Math.cos(e);return new ze(Li(t)/n,-Math.sin(e)/n)},csch:function(){const t=this.re,e=this.im,n=Math.cos(2*e)-ya(2*t);return new ze(-2*Li(t)*Math.cos(e)/n,2*ya(t)*Math.sin(e)/n)},sech:function(){const t=this.re,e=this.im,n=Math.cos(2*e)+ya(2*t);return new ze(2*ya(t)*Math.cos(e)/n,-2*Li(t)*Math.sin(e)/n)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,n=t>1&&e===0,r=1-t,a=1+t,i=r*r+e*e,s=i!==0?new ze((a*r-e*e)/i,(e*r+a*e)/i):new ze(t!==-1?t/0:0,e!==0?e/0:0),o=s.re;return s.re=P2(s.re,s.im)/2,s.im=Math.atan2(s.im,o)/2,n&&(s.im=-s.im),s},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new ze(0,Math.PI/2);const n=t*t+e*e;return n!==0?new ze(t/n,-e/n).atanh():new ze(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new ze(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const n=t*t+e*e;return n!==0?new ze(t/n,-e/n).asinh():new ze(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return ze.INFINITY;const n=t*t+e*e;return n!==0?new ze(t/n,-e/n).acosh():new ze(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return ze.INFINITY;if(this.isInfinite())return ze.ZERO;const t=this.re,e=this.im,n=t*t+e*e;return new ze(t/n,-e/n)},conjugate:function(){return new ze(this.re,-this.im)},neg:function(){return new ze(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new ze(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new ze(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new ze(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const n=zl(t,e);return Math.abs(n.re-this.re)<=ze.EPSILON&&Math.abs(n.im-this.im)<=ze.EPSILON},clone:function(){return new ze(this.re,this.im)},toString:function(){let t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<ze.EPSILON&&(t=0),Math.abs(e)<ze.EPSILON&&(e=0),e===0?n+t:(t!==0?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),e!==1&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};ze.ZERO=new ze(0,0);ze.ONE=new ze(1,0);ze.I=new ze(0,1);ze.PI=new ze(Math.PI,0);ze.E=new ze(Math.E,0);ze.INFINITY=new ze(1/0,1/0);ze.NAN=new ze(NaN,NaN);ze.EPSILON=1e-15;var bTe="Complex",xTe=[],wTe=ee(bTe,xTe,()=>(Object.defineProperty(ze,"name",{value:"Complex"}),ze.prototype.constructor=ze,ze.prototype.type="Complex",ze.prototype.isComplex=!0,ze.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},ze.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},ze.prototype.format=function(t){var e="",n=this.im,r=this.re,a=Jl(this.re,t),i=Jl(this.im,t),s=Vt(t)?t:t?t.precision:null;if(s!==null){var o=Math.pow(10,-s);Math.abs(r/n)<o&&(r=0),Math.abs(n/r)<o&&(n=0)}return n===0?e=a:r===0?n===1?e="i":n===-1?e="-i":e=i+"i":n<0?n===-1?e=a+" - i":e=a+" - "+i.substring(1)+"i":n===1?e=a+" + i":e=a+" + "+i+"i",e},ze.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return ze(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(Vt(n)){if(qi(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),Vt(r))return new ze({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},ze.prototype.valueOf=ze.prototype.toString,ze.fromJSON=function(t){return new ze(t)},ze.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},ze),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const Ct=BigInt(0),jt=BigInt(1),Nh=BigInt(2),BS=BigInt(5),ti=BigInt(10),NTe=2e3,ot={s:jt,n:Ct,d:jt};function Do(t,e){try{t=BigInt(t)}catch{throw bu()}return t*e}function ys(t){return typeof t=="bigint"?t:Math.floor(t)}function jn(t,e){if(e===Ct)throw $T();const n=Object.create(Ui.prototype);n.s=t<Ct?-jt:jt,t=t<Ct?-t:t;const r=Gl(t,e);return n.n=t/r,n.d=e/r,n}function mf(t){const e={};let n=t,r=Nh,a=BS-jt;for(;a<=n;){for(;n%r===Ct;)n/=r,e[r]=(e[r]||Ct)+jt;a+=jt+Nh*r++}return n!==t?n>1&&(e[n]=(e[n]||Ct)+jt):e[t]=(e[t]||Ct)+jt,e}const qr=function(t,e){let n=Ct,r=jt,a=jt;if(t!=null)if(e!==void 0){if(typeof t=="bigint")n=t;else{if(isNaN(t))throw bu();if(t%1!==0)throw VO();n=BigInt(t)}if(typeof e=="bigint")r=e;else{if(isNaN(e))throw bu();if(e%1!==0)throw VO();r=BigInt(e)}a=n*r}else if(typeof t=="object"){if("d"in t&&"n"in t)n=BigInt(t.n),r=BigInt(t.d),"s"in t&&(n*=BigInt(t.s));else if(0 in t)n=BigInt(t[0]),1 in t&&(r=BigInt(t[1]));else if(typeof t=="bigint")n=t;else throw bu();a=n*r}else if(typeof t=="number"){if(isNaN(t))throw bu();if(t<0&&(a=-jt,t=-t),t%1===0)n=BigInt(t);else if(t>0){let i=1,s=0,o=1,u=1,l=1,c=1e7;for(t>=1&&(i=10**Math.floor(1+Math.log10(t)),t/=i);o<=c&&l<=c;){let f=(s+u)/(o+l);if(t===f){o+l<=c?(n=s+u,r=o+l):l>o?(n=u,r=l):(n=s,r=o);break}else t>f?(s+=u,o+=l):(u+=s,l+=o),o>c?(n=u,r=l):(n=s,r=o)}n=BigInt(n)*BigInt(i),r=BigInt(r)}}else if(typeof t=="string"){let i=0,s=Ct,o=Ct,u=Ct,l=jt,c=jt,f=t.replace(/_/g,"").match(/\d+|./g);if(f===null)throw bu();if(f[i]==="-"?(a=-jt,i++):f[i]==="+"&&i++,f.length===i+1?o=Do(f[i++],a):f[i+1]==="."||f[i]==="."?(f[i]!=="."&&(s=Do(f[i++],a)),i++,(i+1===f.length||f[i+1]==="("&&f[i+3]===")"||f[i+1]==="'"&&f[i+3]==="'")&&(o=Do(f[i],a),l=ti**BigInt(f[i].length),i++),(f[i]==="("&&f[i+2]===")"||f[i]==="'"&&f[i+2]==="'")&&(u=Do(f[i+1],a),c=ti**BigInt(f[i+1].length)-jt,i+=3)):f[i+1]==="/"||f[i+1]===":"?(o=Do(f[i],a),l=Do(f[i+2],jt),i+=3):f[i+3]==="/"&&f[i+1]===" "&&(s=Do(f[i],a),o=Do(f[i+2],a),l=Do(f[i+4],jt),i+=5),f.length<=i)r=l*c,a=n=u+r*s+c*o;else throw bu()}else if(typeof t=="bigint")n=t,a=t,r=jt;else throw bu();if(r===Ct)throw $T();ot.s=a<Ct?-jt:jt,ot.n=n<Ct?-n:n,ot.d=r<Ct?-r:r};function STe(t,e,n){let r=jt;for(;e>Ct;t=t*t%n,e>>=jt)e&jt&&(r=r*t%n);return r}function CTe(t,e){for(;e%Nh===Ct;e/=Nh);for(;e%BS===Ct;e/=BS);if(e===jt)return Ct;let n=ti%e,r=1;for(;n!==jt;r++)if(n=n*ti%e,r>NTe)return Ct;return BigInt(r)}function ETe(t,e,n){let r=jt,a=STe(ti,n,e);for(let i=0;i<300;i++){if(r===a)return BigInt(i);r=r*ti%e,a=a*ti%e}return 0}function Gl(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function Ui(t,e){if(qr(t,e),this instanceof Ui)t=Gl(ot.d,ot.n),this.s=ot.s,this.n=ot.n/t,this.d=ot.d/t;else return jn(ot.s*ot.n,ot.d)}var $T=function(){return new Error("Division by Zero")},bu=function(){return new Error("Invalid argument")},VO=function(){return new Error("Parameters must be integer")};Ui.prototype={s:jt,n:Ct,d:jt,abs:function(){return jn(this.n,this.d)},neg:function(){return jn(-this.s*this.n,this.d)},add:function(t,e){return qr(t,e),jn(this.s*this.n*ot.d+ot.s*this.d*ot.n,this.d*ot.d)},sub:function(t,e){return qr(t,e),jn(this.s*this.n*ot.d-ot.s*this.d*ot.n,this.d*ot.d)},mul:function(t,e){return qr(t,e),jn(this.s*ot.s*this.n*ot.n,this.d*ot.d)},div:function(t,e){return qr(t,e),jn(this.s*ot.s*this.n*ot.d,this.d*ot.n)},clone:function(){return jn(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return jn(this.s*this.n%this.d,jt);if(qr(t,e),Ct===ot.n*this.d)throw $T();return jn(this.s*(ot.d*this.n)%(ot.n*this.d),ot.d*this.d)},gcd:function(t,e){return qr(t,e),jn(Gl(ot.n,this.n)*Gl(ot.d,this.d),ot.d*this.d)},lcm:function(t,e){return qr(t,e),ot.n===Ct&&this.n===Ct?jn(Ct,jt):jn(ot.n*this.n,Gl(ot.n,this.n)*Gl(ot.d,this.d))},inverse:function(){return jn(this.s*this.d,this.n)},pow:function(t,e){if(qr(t,e),ot.d===jt)return ot.s<Ct?jn((this.s*this.d)**ot.n,this.n**ot.n):jn((this.s*this.n)**ot.n,this.d**ot.n);if(this.s<Ct)return null;let n=mf(this.n),r=mf(this.d),a=jt,i=jt;for(let s in n)if(s!=="1"){if(s==="0"){a=Ct;break}if(n[s]*=ot.n,n[s]%ot.d===Ct)n[s]/=ot.d;else return null;a*=BigInt(s)**n[s]}for(let s in r)if(s!=="1"){if(r[s]*=ot.n,r[s]%ot.d===Ct)r[s]/=ot.d;else return null;i*=BigInt(s)**r[s]}return ot.s<Ct?jn(i,a):jn(a,i)},log:function(t,e){if(qr(t,e),this.s<=Ct||ot.s<=Ct)return null;const n={},r=mf(ot.n),a=mf(ot.d),i=mf(this.n),s=mf(this.d);for(const l in a)r[l]=(r[l]||Ct)-a[l];for(const l in s)i[l]=(i[l]||Ct)-s[l];for(const l in r)l!=="1"&&(n[l]=!0);for(const l in i)l!=="1"&&(n[l]=!0);let o=null,u=null;for(const l in n){const c=r[l]||Ct,f=i[l]||Ct;if(c===Ct){if(f!==Ct)return null;continue}let d=f,h=c;const m=Gl(d,h);if(d/=m,h/=m,o===null&&u===null)o=d,u=h;else if(d*u!==o*h)return null}return o!==null&&u!==null?jn(o,u):null},equals:function(t,e){return qr(t,e),this.s*this.n*ot.d===ot.s*ot.n*this.d},lt:function(t,e){return qr(t,e),this.s*this.n*ot.d<ot.s*ot.n*this.d},lte:function(t,e){return qr(t,e),this.s*this.n*ot.d<=ot.s*ot.n*this.d},gt:function(t,e){return qr(t,e),this.s*this.n*ot.d>ot.s*ot.n*this.d},gte:function(t,e){return qr(t,e),this.s*this.n*ot.d>=ot.s*ot.n*this.d},compare:function(t,e){qr(t,e);let n=this.s*this.n*ot.d-ot.s*ot.n*this.d;return(Ct<n)-(n<Ct)},ceil:function(t){return t=ti**BigInt(t||0),jn(ys(this.s*t*this.n/this.d)+(t*this.n%this.d>Ct&&this.s>=Ct?jt:Ct),t)},floor:function(t){return t=ti**BigInt(t||0),jn(ys(this.s*t*this.n/this.d)-(t*this.n%this.d>Ct&&this.s<Ct?jt:Ct),t)},round:function(t){return t=ti**BigInt(t||0),jn(ys(this.s*t*this.n/this.d)+this.s*((this.s>=Ct?jt:Ct)+Nh*(t*this.n%this.d)>this.d?jt:Ct),t)},roundTo:function(t,e){qr(t,e);const n=this.n*ot.d,r=this.d*ot.n,a=n%r;let i=ys(n/r);return a+a>=r&&i++,jn(this.s*i*ot.n,ot.d)},divisible:function(t,e){return qr(t,e),!(!(ot.n*this.d)||this.n*ot.d%(ot.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t){let e=this.n,n=this.d;t=t||15;let r=CTe(e,n),a=ETe(e,n,r),i=this.s<Ct?"-":"";if(i+=ys(e/n),e%=n,e*=ti,e&&(i+="."),r){for(let s=a;s--;)i+=ys(e/n),e%=n,e*=ti;i+="(";for(let s=r;s--;)i+=ys(e/n),e%=n,e*=ti;i+=")"}else for(let s=t;e&&s--;)i+=ys(e/n),e%=n,e*=ti;return i},toFraction:function(t){let e=this.n,n=this.d,r=this.s<Ct?"-":"";if(n===jt)r+=e;else{let a=ys(e/n);t&&a>Ct&&(r+=a,r+=" ",e%=n),r+=e,r+="/",r+=n}return r},toLatex:function(t){let e=this.n,n=this.d,r=this.s<Ct?"-":"";if(n===jt)r+=e;else{let a=ys(e/n);t&&a>Ct&&(r+=a,e%=n),r+="\\frac{",r+=e,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let t=this.n,e=this.d,n=[];do{n.push(ys(t/e));let r=t%e;t=e,e=r}while(t!==jt);return n},simplify:function(t){const e=BigInt(1/(t||.001)|0),n=this.abs(),r=n.toContinued();for(let a=1;a<r.length;a++){let i=jn(r[a-1],jt);for(let o=a-2;o>=0;o--)i=i.inverse().add(r[o]);let s=i.sub(n);if(s.n*e<s.d)return i.mul(this.s)}return this}};var DTe="Fraction",TTe=[],$Te=ee(DTe,TTe,()=>(Object.defineProperty(Ui,"name",{value:"Fraction"}),Ui.prototype.constructor=Ui,Ui.prototype.type="Fraction",Ui.prototype.isFraction=!0,Ui.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},Ui.fromJSON=function(t){return new Ui(t)},Ui),{isClass:!0}),ATe="Range",ITe=[],kTe=ee(ATe,ITe,()=>{function t(e,n,r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var a=e!=null,i=n!=null,s=r!=null;if(a){if(qt(e))e=e.toNumber();else if(typeof e!="number")throw new TypeError("Parameter start must be a number")}if(i){if(qt(n))n=n.toNumber();else if(typeof n!="number")throw new TypeError("Parameter end must be a number")}if(s){if(qt(r))r=r.toNumber();else if(typeof r!="number")throw new TypeError("Parameter step must be a number")}this.start=a?parseFloat(e):0,this.end=i?parseFloat(n):0,this.step=s?parseFloat(r):1}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if(typeof e!="string")return null;var n=e.split(":"),r=n.map(function(i){return parseFloat(i)}),a=r.some(function(i){return isNaN(i)});if(a)return null;switch(r.length){case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[2],r[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var e=0,n=this.start,r=this.step,a=this.end,i=a-n;return $u(r)===$u(i)?e=Math.ceil(i/r):i===0&&(e=0),isNaN(e)&&(e=0),[e]},t.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},t.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},t.prototype.forEach=function(e){var n=this.start,r=this.step,a=this.end,i=0;if(r>0)for(;n<a;)e(n,[i],this),n+=r,i++;else if(r<0)for(;n>a;)e(n,[i],this),n+=r,i++},t.prototype.map=function(e){var n=[];return this.forEach(function(r,a,i){n[a[0]]=e(r,a,i)}),n},t.prototype.toArray=function(){var e=[];return this.forEach(function(n,r){e[r[0]]=n}),e},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(e){var n=Jl(this.start,e);return this.step!==1&&(n+=":"+Jl(this.step,e)),n+=":"+Jl(this.end,e),n},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t},{isClass:!0}),_Te="Matrix",OTe=[],FTe=ee(_Te,OTe,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,n,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function B2(t,e,n){var r=t.constructor,a=new r(2),i="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!bt(n))throw new Error("size must be an integer");if(t.greaterThan(a.pow(n-1).sub(1))||t.lessThan(a.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(a.pow(n))),i="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(i);case 8:return"".concat(t.toOctal()).concat(i);case 16:return"".concat(t.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(e," not supported "))}}function RTe(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:a}=vU(e);switch(n){case"fixed":return PTe(t,r);case"exponential":return WO(t,r);case"engineering":return MTe(t,r);case"bin":return B2(t,2,a);case"oct":return B2(t,8,a);case"hex":return B2(t,16,a);case"auto":{var i=qO(e==null?void 0:e.lowerExp,-3),s=qO(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var o,u=t.toSignificantDigits(r),l=u.e;return l>=i&&l<s?o=u.toFixed():o=WO(t,r),o.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function MTe(t,e){var n=t.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,a=t.mul(Math.pow(10,-r)),i=a.toPrecision(e);if(i.includes("e")){var s=t.constructor;i=new s(i).toFixed()}return i+"e"+(n>=0?"+":"")+r.toString()}function WO(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function PTe(t,e){return t.toFixed(e)}function qO(t,e){return Vt(t)?t:qt(t)?t.toNumber():e}function BTe(t,e){var n=t.length-e.length,r=t.length;return t.substring(n,r)===e}function Xt(t,e){var n=LTe(t,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function LTe(t,e){if(typeof t=="number")return Jl(t,e);if(qt(t))return RTe(t,e);if(zTe(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return _U(t,e);if(Na(t))return $f(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var n=Object.keys(t).map(r=>$f(r)+": "+Xt(t[r],e));return"{"+n.join(", ")+"}"}return String(t)}function $f(t){for(var e=String(t),n="",r=0;r<e.length;){var a=e.charAt(r);n+=a in GO?GO[a]:a,r++}return'"'+n+'"'}var GO={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Hi(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function _U(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,a=0;a<r;a++)a!==0&&(n+=", "),n+=_U(t[a],e);return n+="]",n}else return Xt(t,e)}function zTe(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function LS(t,e){if(!Na(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Rn(t)+", index: 0)");if(!Na(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Rn(e)+", index: 1)");return t===e?0:t>e?1:-1}function Yt(t,e,n){if(!(this instanceof Yt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Yt.prototype=new RangeError;Yt.prototype.constructor=RangeError;Yt.prototype.name="DimensionError";Yt.prototype.isDimensionError=!0;function Os(t,e,n){if(!(this instanceof Os))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Os.prototype=new RangeError;Os.prototype.constructor=RangeError;Os.prototype.name="IndexError";Os.prototype.isIndexError=!0;function Mt(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function OU(t,e,n){var r,a=t.length;if(a!==e[n])throw new Yt(a,e[n]);if(n<e.length-1){var i=n+1;for(r=0;r<a;r++){var s=t[r];if(!Array.isArray(s))throw new Yt(e.length-1,e.length,"<");OU(t[r],e,i)}}else for(r=0;r<a;r++)if(Array.isArray(t[r]))throw new Yt(e.length+1,e.length,">")}function HO(t,e){var n=e.length===0;if(n){if(Array.isArray(t))throw new Yt(t.length,0)}else OU(t,e,0)}function S0(t,e){var n=t.isMatrix?t._size:Mt(t),r=e._sourceSize;r.forEach((a,i)=>{if(a!==null&&a!==n[i])throw new Yt(a,n[i])})}function _n(t,e){if(t!==void 0){if(!Vt(t)||!bt(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Os(t,e)}}function sd(t){for(var e=0;e<t._dimensions.length;++e){var n=t._dimensions[e];if(n._data&&En(n._data)){if(n._size[0]===0)return!0}else if(n.isRange){if(n.start===n.end)return!0}else if(Na(n)&&n.length===0)return!0}return!1}function od(t,e,n){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(a){if(!Vt(a)||!bt(a)||a<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Xt(e)+")")}),(Vt(t)||qt(t))&&(t=[t]);var r=n!==void 0?n:0;return zS(t,e,0,r),t}function zS(t,e,n,r){var a,i,s=t.length,o=e[n],u=Math.min(s,o);if(t.length=o,n<e.length-1){var l=n+1;for(a=0;a<u;a++)i=t[a],Array.isArray(i)||(i=[i],t[a]=i),zS(i,e,l,r);for(a=u;a<o;a++)i=[],t[a]=i,zS(i,e,l,r)}else{for(a=0;a<u;a++)for(;Array.isArray(t[a]);)t[a]=t[a][0];for(a=u;a<o;a++)t[a]=r}}function AT(t,e){var n=hn(t),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Yt(0,r,"!=");e=IT(e,r);var a=FU(e);if(r!==a)throw new Yt(a,r,"!=");try{return UTe(n,e)}catch(i){throw i instanceof Yt?new Yt(a,r,"!="):i}}function IT(t,e){var n=FU(t),r=t.slice(),a=-1,i=t.indexOf(a),s=t.indexOf(a,i+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var o=i>=0,u=e%n===0;if(o)if(u)r[i]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return r}function FU(t){return t.reduce((e,n)=>e*n,1)}function UTe(t,e){for(var n=t,r,a=e.length-1;a>0;a--){var i=e[a];r=[];for(var s=n.length/i,o=0;o<s;o++)r.push(n.slice(o*i,(o+1)*i));n=r}return n}function C0(t,e){for(var n=Mt(t);Array.isArray(t)&&t.length===1;)t=t[0],n.shift();for(var r=n.length;n[r-1]===1;)r--;return r<n.length&&(t=RU(t,r,0),n.length=r),t}function RU(t,e,n){var r,a;if(n<e){var i=n+1;for(r=0,a=t.length;r<a;r++)t[r]=RU(t[r],e,i)}else for(;Array.isArray(t);)t=t[0];return t}function MU(t,e,n,r){var a=r||Mt(t);if(n)for(var i=0;i<n;i++)t=[t],a.unshift(1);for(t=PU(t,e,0);a.length<e;)a.push(1);return t}function PU(t,e,n){var r,a;if(Array.isArray(t)){var i=n+1;for(r=0,a=t.length;r<a;r++)t[r]=PU(t[r],e,i)}else for(var s=n;s<e;s++)t=[t];return t}function hn(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function n(r){Array.isArray(r)?r.forEach(n):e.push(r)}),e}function Fu(t,e){return Array.prototype.map.call(t,e)}function BU(t,e){Array.prototype.forEach.call(t,e)}function VTe(t,e){if(Mt(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function jO(t,e){if(Mt(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,n=>e.test(n))}function XO(t,e){return Array.prototype.join.call(t,e)}function ud(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;var e=[],n=0;e[0]={value:t[0],identifier:0};for(var r=1;r<t.length;r++)t[r]===t[r-1]?n++:n=0,e.push({value:t[r],identifier:n});return e}function E0(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;for(var e=[],n=0;n<t.length;n++)e.push(t[n].value);return e}function Gb(t,e){for(var n,r=0,a=0;a<t.length;a++){var i=t[a],s=Array.isArray(i);if(a===0&&s&&(r=i.length),s&&i.length!==r)return;var o=s?Gb(i,e):e(i);if(n===void 0)n=o;else if(n!==o)return"mixed"}return n}function LU(t,e,n,r){if(r<n){if(t.length!==e.length)throw new Yt(t.length,e.length);for(var a=[],i=0;i<t.length;i++)a[i]=LU(t[i],e[i],n,r+1);return a}else return t.concat(e)}function zU(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(n,r){return LU(n,r,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function kT(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.map(d=>d.length),a=Math.max(...r),i=new Array(a).fill(null),s=0;s<e.length;s++)for(var o=e[s],u=r[s],l=0;l<u;l++){var c=a-u+l;o[l]>i[c]&&(i[c]=o[l])}for(var f=0;f<e.length;f++)UU(e[f],i);return i}function UU(t,e){for(var n=e.length,r=t.length,a=0;a<r;a++){var i=n-r+a;if(t[a]<e[i]&&t[a]>1||t[a]>e[i])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(r," with size ").concat(t[a]," to size ").concat(e[i]))}}function Kl(t,e){var n=Mt(t);if(Go(n,e))return t;UU(n,e);var r=kT(n,e),a=r.length,i=[...Array(a-n.length).fill(1),...n],s=qTe(t);n.length<a&&(s=AT(s,i),n=Mt(s));for(var o=0;o<a;o++)n[o]<r[o]&&(s=WTe(s,r[o],o),n=Mt(s));return s}function WTe(t,e,n){return zU(...Array(e).fill(t),n)}function _T(t,e){if(!Array.isArray(t))throw new Error("Array expected");var n=Mt(t);if(e.length!==n.length)throw new Yt(e.length,n.length);for(var r=0;r<e.length;r++)_n(e[r],n[r]);return e.reduce((a,i)=>a[i],t)}function OT(t,e,n,r){return Array.isArray(t)?t.map(function(a,i){return OT(a,e.concat(i),n,r)}):r(t,e,n)}function qTe(t){return kr([],t)}function mc(t,e,n){if(b0.isTypedFunction(t)){var r=(e.isMatrix?e.size():Mt(e)).map(()=>0),a=e.isMatrix?e.get(r):_T(e,r),i=Object.keys(t.signatures).length===1,s=GTe(t,a,r,e),o=i?Object.values(t.signatures)[0]:t;return s>=1&&s<=3?function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return KO(o,l.slice(0,s),n,t.name)}:function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return KO(o,l,n,t.name)}}return t}function GTe(t,e,n,r){for(var a=[e,n,r],i=3;i>0;i--){var s=a.slice(0,i);if(b0.resolve(t,s)!==null)return i}}function KO(t,e,n,r){try{return t(...e)}catch(a){HTe(a,e,n,r)}}function HTe(t,e,n,r){var a;if(t instanceof TypeError&&((a=t.data)===null||a===void 0?void 0:a.category)==="wrongType"){var i=[];throw i.push("value: ".concat(Rn(e[0]))),e.length>=2&&i.push("index: ".concat(Rn(e[1]))),e.length>=3&&i.push("array: ".concat(Rn(e[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(i.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(t.message))}var jTe="DenseMatrix",XTe=["Matrix"],KTe=ee(jTe,XTe,t=>{var{Matrix:e}=t;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Na(f))throw new Error("Invalid datatype: "+f);if(Tt(c))c.type==="DenseMatrix"?(this._data=Bt(c._data),this._size=Bt(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&En(c.data)&&En(c.size))this._data=c.data,this._size=c.size,HO(this._data,this._size),this._datatype=f||c.datatype;else if(En(c))this._data=l(c),this._size=Mt(this._data),HO(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+Rn(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new e,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return Gb(this._data,Rn)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return i(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){return _T(this._data,c)},n.prototype.set=function(c,f,d){if(!En(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new Yt(c.length,this._size.length,"<");var h,m,v,y=c.map(function(w){return w+1});u(this,y,d);var b=this._data;for(h=0,m=c.length-1;h<m;h++)v=c[h],_n(v,b.length),b=b[v];return v=c[c.length-1],_n(v,b.length),b[v]=f,this};function r(c,f){if(!Bb(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new Yt(h.length,c._size.length);for(var m=f.min(),v=f.max(),y=0,b=c._size.length;y<b;y++)_n(m[y],c._size[y]),_n(v[y],c._size[y]);return new n(a(c._data,f,h.length,0),c._datatype)}function a(c,f,d,h){var m=h===d-1,v=f.dimension(h);return m?v.map(function(y){return _n(y,c.length),c[y]}).valueOf():v.map(function(y){_n(y,c.length);var b=c[y];return a(b,f,d,h+1)}).valueOf()}function i(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var m=f.size(),v=f.isScalar(),y;if(Tt(d)?(y=d.size(),d=d.valueOf()):y=Mt(d),v){if(y.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!Go(y,m))try{y.length===0?d=Kl([d],m):d=Kl(d,m),y=Mt(d)}catch{}if(m.length<c._size.length)throw new Yt(m.length,c._size.length,"<");if(y.length<m.length){for(var b=0,w=0;m[b]===1&&y[b]===1;)b++;for(;m[b]===1;)w++,b++;d=MU(d,m.length,w,y)}if(!Go(m,y))throw new Yt(m,y,">");var x=f.max().map(function(E){return E+1});u(c,x,h);var S=m.length,C=0;s(c._data,f,d,S,C)}return c}function s(c,f,d,h,m){var v=m===h-1,y=f.dimension(m);v?y.forEach(function(b,w){_n(b),c[b]=d[w[0]]}):y.forEach(function(b,w){_n(b),s(c[b],f,d[w[0]],h,m+1)})}n.prototype.resize=function(c,f,d){if(!as(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),m=d?this.clone():this;return o(m,h,f)};function o(c,f,d){if(f.length===0){for(var h=c._data;En(h);)h=h[0];return h}return c._size=f.slice(0),c._data=od(c._data,c._size,d),c}n.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=AT(d._data,c);var h=d._size.reduce((m,v)=>m*v);return d._size=IT(c,h),d};function u(c,f,d){for(var h=c._size.slice(0),m=!1;h.length<f.length;)h.push(0),m=!0;for(var v=0,y=f.length;v<y;v++)f[v]>h[v]&&(h[v]=f[v],m=!0);m&&o(c,h,d)}n.prototype.clone=function(){var c=new n({data:Bt(this._data),size:Bt(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype._forEach=function(c){var f=this,d=f.size();if(d.length===1){for(var h=0;h<d[0];h++)c(f._data,h,[h]);return}var m=Array(d.length).fill(0),v=Array(d.length-1),y=v.length-1;v[0]=f._data[0];for(var b=0;b<y;b++)v[b+1]=v[b][0];for(m[y]=-1;;){var w=void 0;for(w=y;w>=0;w--){if(m[w]++,m[w]===d[w]){m[w]=0;continue}v[w]=w===0?f._data[m[w]]:v[w-1][m[w]];for(var x=w;x<y;x++)v[x+1]=v[x][0];for(var S=0;S<d[v.length];S++)m[v.length]=S,c(v[y],S,m.slice(0));break}if(w===-1)break}},n.prototype.map=function(c){var f=this,d=new n(f),h=mc(c,f._data,"map");return d._forEach(function(m,v,y){m[v]=h(m[v],y,f)}),d},n.prototype.forEach=function(c){var f=this,d=mc(c,f._data,"map");f._forEach(function(h,m,v){d(h[m],v,f)})},n.prototype[Symbol.iterator]=function*(){var c=function*(d,h){if(En(d))for(var m=0;m<d.length;m++)yield*c(d[m],h.concat(m));else yield{value:d,index:h}};yield*c(this._data,[])},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new n([h],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,m=function(b){var w=h.map(x=>[x[b]]);f.push(new n(w,c._datatype))},v=0;v<d[1];v++)m(v);return f},n.prototype.toArray=function(){return Bt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return Xt(this._data,c)},n.prototype.toString=function(){return Xt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(qt(c)&&(c=c.toNumber()),!Vt(c)||!bt(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],m=this._size[1],v=Math.min(h-d,m-f),y=[],b=0;b<v;b++)y[b]=this._data[b+d][b+f];return new n({data:y,size:[v],datatype:this._datatype})},n.diagonal=function(c,f,d,h){if(!En(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(A){if(qt(A)&&(A=A.toNumber()),!Vt(A)||!bt(A)||A<1)throw new Error("Size values must be positive integers");return A}),d){if(qt(d)&&(d=d.toNumber()),!Vt(d)||!bt(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var m=d>0?d:0,v=d<0?-d:0,y=c[0],b=c[1],w=Math.min(y-v,b-m),x;if(En(f)){if(f.length!==w)throw new Error("Invalid value array length");x=function(k){return f[k]}}else if(Tt(f)){var S=f.size();if(S.length!==1||S[0]!==w)throw new Error("Invalid matrix length");x=function(k){return f.get([k])}}else x=function(){return f};h||(h=qt(x(0))?x(0).mul(0):0);var C=[];if(c.length>0){C=od(C,c,h);for(var E=0;E<w;E++)C[E+v][E+m]=x(E)}return new n({data:C,size:[y,b]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!Vt(c)||!bt(c)||!Vt(f)||!bt(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return _n(c,this._size[0]),_n(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function l(c){return Tt(c)?l(c.valueOf()):En(c)?c.map(l):c}return n},{isClass:!0}),YO="clone",YTe=["typed"],ZTe=ee(YO,YTe,t=>{var{typed:e}=t;return e(YO,{any:Bt})});function VU(t){var e=t.length,n=t[0].length,r,a,i=[];for(a=0;a<n;a++){var s=[];for(r=0;r<e;r++)s.push(t[r][a]);i.push(s)}return i}function Od(t){for(var e=0;e<t.length;e++)if(as(t[e]))return!0;return!1}function Ho(t,e){Tt(t)&&(t=t.valueOf());for(var n=0,r=t.length;n<r;n++){var a=t[n];Array.isArray(a)?Ho(a,e):e(a)}}function zt(t,e,n){return t&&typeof t.map=="function"?t.map(function(r){return zt(r,e)}):e(t)}function Hb(t,e,n){var r=Array.isArray(t)?Mt(t):t.size();if(e<0||e>=r.length)throw new Os(e,r.length);return Tt(t)?t.create(D0(t.valueOf(),e,n),t.datatype()):D0(t,e,n)}function D0(t,e,n){var r,a,i,s;if(e<=0)if(Array.isArray(t[0])){for(s=VU(t),a=[],r=0;r<s.length;r++)a[r]=D0(s[r],e-1,n);return a}else{for(i=t[0],r=1;r<t.length;r++)i=n(i,t[r]);return i}else{for(a=[],r=0;r<t.length;r++)a[r]=D0(t[r],e-1,n);return a}}function ZO(t,e,n,r,a,i,s,o,u,l,c){var f=t._values,d=t._index,h=t._ptr,m,v,y,b;if(r)for(v=h[e],y=h[e+1],m=v;m<y;m++)b=d[m],n[b]!==i?(n[b]=i,s.push(b),r[b]=f[m]):(r[b]=o(r[b],f[m]),a[b]=i);else for(v=h[e],y=h[e+1],m=v;m<y;m++)b=d[m],n[b]!==i?(n[b]=i,s.push(b)):a[b]=i}var QO="isInteger",QTe=["typed"],JTe=ee(QO,QTe,t=>{var{typed:e}=t;return e(QO,{number:bt,BigNumber:function(r){return r.isInt()},bigint:function(r){return!0},Fraction:function(r){return r.d===1n},"Array | Matrix":e.referToSelf(n=>r=>zt(r,n))})}),Fs="number",Fd="number, number";function WU(t){return Math.abs(t)}WU.signature=Fs;function qU(t,e){return t+e}qU.signature=Fd;function GU(t,e){return t-e}GU.signature=Fd;function HU(t,e){return t*e}HU.signature=Fd;function jU(t){return-t}jU.signature=Fs;function XU(t){return t}XU.signature=Fs;function Vp(t){return rDe(t)}Vp.signature=Fs;function KU(t){return t*t*t}KU.signature=Fs;function YU(t){return Math.exp(t)}YU.signature=Fs;function ZU(t){return aDe(t)}ZU.signature=Fs;function QU(t,e){if(!bt(t)||!bt(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var n,r=t*e;e!==0;)n=e,e=t%n,t=n;return Math.abs(r/t)}QU.signature=Fd;function e$e(t,e){return Math.log(t)}function JU(t){return tDe(t)}JU.signature=Fs;function eV(t){return eDe(t)}eV.signature=Fs;function JO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=e<0;if(n&&(e=-e),e===0)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(t===0)return n?1/0:0;if(!isFinite(t))return n?0:t;var r=Math.pow(Math.abs(t),1/e);return r=t<0?-r:r,n?1/r:r}function US(t){return $u(t)}US.signature=Fs;function tV(t){return t*t}tV.signature=Fs;function nV(t,e){var n,r,a,i=0,s=1,o=1,u=0;if(!bt(t)||!bt(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)r=Math.floor(t/e),a=t-r*e,n=i,i=s-r*i,s=n,n=o,o=u-r*o,u=n,t=e,e=a;var l;return t<0?l=[-t,-s,-u]:l=[t,t?s:0,u],l}nV.signature=Fd;function rV(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}rV.signature=Fd;function _p(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!bt(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(yU(t,e))}var t$e="number",Rd="number, number";function aV(t,e){if(!bt(t)||!bt(e))throw new Error("Integers expected in function bitAnd");return t&e}aV.signature=Rd;function iV(t){if(!bt(t))throw new Error("Integer expected in function bitNot");return~t}iV.signature=t$e;function sV(t,e){if(!bt(t)||!bt(e))throw new Error("Integers expected in function bitOr");return t|e}sV.signature=Rd;function oV(t,e){if(!bt(t)||!bt(e))throw new Error("Integers expected in function bitXor");return t^e}oV.signature=Rd;function uV(t,e){if(!bt(t)||!bt(e))throw new Error("Integers expected in function leftShift");return t<<e}uV.signature=Rd;function lV(t,e){if(!bt(t)||!bt(e))throw new Error("Integers expected in function rightArithShift");return t>>e}lV.signature=Rd;function cV(t,e){if(!bt(t)||!bt(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}cV.signature=Rd;function Oo(t,e){if(e<t)return 1;if(e===t)return e;var n=e+t>>1;return Oo(t,n)*Oo(n+1,e)}function fV(t,e){if(!bt(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!bt(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var n=t-e,r=1,a=e<n?n+1:e+1,i=2,s=e<n?e:n,o=a;o<=t;++o)for(r*=o;i<=s&&r%i===0;)r/=i,++i;return i<=s&&(r/=Oo(i,s)),r}fV.signature="number, number";var n$e=Math.PI,r$e=2*Math.PI,a$e=Math.E,i$e=1.618033988749895,s$e="number",FT="number, number";function dV(t){return!t}dV.signature=s$e;function VS(t,e){return!!(t||e)}VS.signature=FT;function WS(t,e){return!!t!=!!e}WS.signature=FT;function qS(t,e){return!!(t&&e)}qS.signature=FT;function T0(t){var e;if(bt(t))return t<=0?isFinite(t)?1/0:NaN:t>171?1/0:Oo(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*T0(1-t));if(t>=171.35)return 1/0;if(t>85){var n=t*t,r=n*t,a=r*t,i=a*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*n)-139/(51840*r)-571/(2488320*a)+163879/(209018880*i)+5246819/(75246796800*i*t))}--t,e=zf[0];for(var s=1;s<zf.length;++s)e+=zf[s]/(t+s);var o=t+pV+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,t+.5)*Math.exp(-o)*e}T0.signature="number";var pV=4.7421875,zf=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],hV=.9189385332046728,o$e=5,u$e=7,e3=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function $0(t){if(t<0)return NaN;if(t===0)return 1/0;if(!isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-$0(1-t);t=t-1;for(var e=t+o$e+.5,n=e3[0],r=u$e-1;r>=1;r--)n+=e3[r]/(t+r);return hV+(t+.5)*Math.log(e)-e+Math.log(n)}$0.signature="number";var Aa="number";function mV(t){return uDe(t)}mV.signature=Aa;function gV(t){return Math.atan(1/t)}gV.signature=Aa;function vV(t){return isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}vV.signature=Aa;function yV(t){return Math.asin(1/t)}yV.signature=Aa;function bV(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}bV.signature=Aa;function xV(t){return Math.acos(1/t)}xV.signature=Aa;function wV(t){var e=1/t,n=Math.sqrt(e*e-1);return Math.log(n+e)}wV.signature=Aa;function NV(t){return lDe(t)}NV.signature=Aa;function SV(t){return cDe(t)}SV.signature=Aa;function CV(t){return 1/Math.tan(t)}CV.signature=Aa;function EV(t){var e=Math.exp(2*t);return(e+1)/(e-1)}EV.signature=Aa;function DV(t){return 1/Math.sin(t)}DV.signature=Aa;function TV(t){return t===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*$u(t)}TV.signature=Aa;function $V(t){return 1/Math.cos(t)}$V.signature=Aa;function AV(t){return 2/(Math.exp(t)+Math.exp(-t))}AV.signature=Aa;function IV(t){return dDe(t)}IV.signature=Aa;var RT="number";function kV(t){return t<0}kV.signature=RT;function _V(t){return t>0}_V.signature=RT;function OV(t){return Number.isNaN(t)}OV.signature=RT;function hi(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(n),r))}var t3="isNegative",l$e=["typed","config"],c$e=ee(t3,l$e,t=>{var{typed:e,config:n}=t;return e(t3,{number:r=>ua(r,0,n.relTol,n.absTol)?!1:kV(r),BigNumber:r=>hi(r,new r.constructor(0),n.relTol,n.absTol)?!1:r.isNeg()&&!r.isZero()&&!r.isNaN(),bigint:r=>r<0n,Fraction:r=>r.s<0n,Unit:e.referToSelf(r=>a=>e.find(r,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(r=>a=>zt(a,r))})}),n3="isNumeric",f$e=["typed"],d$e=ee(n3,f$e,t=>{var{typed:e}=t;return e(n3,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(n=>r=>zt(r,n))})}),r3="hasNumericValue",p$e=["typed","isNumeric"],h$e=ee(r3,p$e,t=>{var{typed:e,isNumeric:n}=t;return e(r3,{boolean:()=>!0,string:function(a){return a.trim().length>0&&!isNaN(Number(a))},any:function(a){return n(a)}})}),a3="isPositive",m$e=["typed","config"],g$e=ee(a3,m$e,t=>{var{typed:e,config:n}=t;return e(a3,{number:r=>ua(r,0,n.relTol,n.absTol)?!1:_V(r),BigNumber:r=>hi(r,new r.constructor(0),n.relTol,n.absTol)?!1:!r.isNeg()&&!r.isZero()&&!r.isNaN(),bigint:r=>r>0n,Fraction:r=>r.s>0n&&r.n>0n,Unit:e.referToSelf(r=>a=>e.find(r,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(r=>a=>zt(a,r))})}),i3="isZero",v$e=["typed","equalScalar"],y$e=ee(i3,v$e,t=>{var{typed:e,equalScalar:n}=t;return e(i3,{"number | BigNumber | Complex | Fraction":r=>n(r,0),bigint:r=>r===0n,Unit:e.referToSelf(r=>a=>e.find(r,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(r=>a=>zt(a,r))})}),s3="isNaN",b$e=["typed"],x$e=ee(s3,b$e,t=>{var{typed:e}=t;return e(s3,{number:OV,BigNumber:function(r){return r.isNaN()},bigint:function(r){return!1},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":e.referToSelf(n=>r=>zt(r,n))})}),o3="typeOf",w$e=["typed"],N$e=ee(o3,w$e,t=>{var{typed:e}=t;return e(o3,{any:Rn})});function S$e(t,e,n,r){return ua(t.re,e.re,n,r)&&ua(t.im,e.im,n,r)}var Md=ee("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(n=>(r,a)=>{if(!r.equalBase(a))throw new Error("Cannot compare units with different base");return e.find(n,[r.valueType(),a.valueType()])(r.value,a.value)})}}),A0="equalScalar",C$e=["typed","config"],E$e=ee(A0,C$e,t=>{var{typed:e,config:n}=t,r=Md({typed:e});return e(A0,{"boolean, boolean":function(i,s){return i===s},"number, number":function(i,s){return ua(i,s,n.relTol,n.absTol)},"BigNumber, BigNumber":function(i,s){return i.eq(s)||hi(i,s,n.relTol,n.absTol)},"bigint, bigint":function(i,s){return i===s},"Fraction, Fraction":function(i,s){return i.equals(s)},"Complex, Complex":function(i,s){return S$e(i,s,n.relTol,n.absTol)}},r)});ee(A0,["typed","config"],t=>{var{typed:e,config:n}=t;return e(A0,{"number, number":function(a,i){return ua(a,i,n.relTol,n.absTol)}})});var D$e="SparseMatrix",T$e=["typed","equalScalar","Matrix"],$$e=ee(D$e,T$e,t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function a(v,y){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(y&&!Na(y))throw new Error("Invalid datatype: "+y);if(Tt(v))i(this,v,y);else if(v&&En(v.index)&&En(v.ptr)&&En(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=y||v.datatype;else if(En(v))s(this,v,y);else{if(v)throw new TypeError("Unsupported type of data ("+Rn(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=y}}function i(v,y,b){y.type==="SparseMatrix"?(v._values=y._values?Bt(y._values):void 0,v._index=Bt(y._index),v._ptr=Bt(y._ptr),v._size=Bt(y._size),v._datatype=b||y._datatype):s(v,y.valueOf(),b||y._datatype)}function s(v,y,b){v._values=[],v._index=[],v._ptr=[],v._datatype=b;var w=y.length,x=0,S=n,C=0;if(Na(b)&&(S=e.find(n,[b,b])||n,C=e.convert(0,b)),w>0){var E=0;do{v._ptr.push(v._index.length);for(var A=0;A<w;A++){var k=y[A];if(En(k)){if(E===0&&x<k.length&&(x=k.length),E<k.length){var T=k[E];S(T,C)||(v._values.push(T),v._index.push(A))}}else E===0&&x<1&&(x=1),S(k,C)||(v._values.push(k),v._index.push(A))}E++}while(E<x)}v._ptr.push(v._index.length),v._size=[w,x]}a.prototype=new r,a.prototype.createSparseMatrix=function(v,y){return new a(v,y)},Object.defineProperty(a,"name",{value:"SparseMatrix"}),a.prototype.constructor=a,a.prototype.type="SparseMatrix",a.prototype.isSparseMatrix=!0,a.prototype.getDataType=function(){return Gb(this._values,Rn)},a.prototype.storage=function(){return"sparse"},a.prototype.datatype=function(){return this._datatype},a.prototype.create=function(v,y){return new a(v,y)},a.prototype.density=function(){var v=this._size[0],y=this._size[1];return v!==0&&y!==0?this._index.length/(v*y):0},a.prototype.subset=function(v,y,b){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,v);case 2:case 3:return u(this,v,y,b);default:throw new SyntaxError("Wrong number of arguments")}};function o(v,y){if(!Bb(y))throw new TypeError("Invalid index");var b=y.isScalar();if(b)return v.get(y.min());var w=y.size();if(w.length!==v._size.length)throw new Yt(w.length,v._size.length);var x,S,C,E,A=y.min(),k=y.max();for(x=0,S=v._size.length;x<S;x++)_n(A[x],v._size[x]),_n(k[x],v._size[x]);var T=v._values,I=v._index,$=v._ptr,O=y.dimension(0),B=y.dimension(1),z=[],L=[];O.forEach(function(M,j){L[M]=j[0],z[M]=!0});var F=T?[]:void 0,R=[],W=[];return B.forEach(function(M){for(W.push(R.length),C=$[M],E=$[M+1];C<E;C++)x=I[C],z[x]===!0&&(R.push(L[x]),F&&F.push(T[C]))}),W.push(R.length),new a({values:F,index:R,ptr:W,size:w,datatype:v._datatype})}function u(v,y,b,w){if(!y||y.isIndex!==!0)throw new TypeError("Invalid index");var x=y.size(),S=y.isScalar(),C;if(Tt(b)?(C=b.size(),b=b.toArray()):C=Mt(b),S){if(C.length!==0)throw new TypeError("Scalar expected");v.set(y.min(),b,w)}else{if(x.length!==1&&x.length!==2)throw new Yt(x.length,v._size.length,"<");if(C.length<x.length){for(var E=0,A=0;x[E]===1&&C[E]===1;)E++;for(;x[E]===1;)A++,E++;b=MU(b,x.length,A,C)}if(!Go(x,C))throw new Yt(x,C,">");if(x.length===1){var k=y.dimension(0);k.forEach(function($,O){_n($),v.set([$,0],b[O[0]],w)})}else{var T=y.dimension(0),I=y.dimension(1);T.forEach(function($,O){_n($),I.forEach(function(B,z){_n(B),v.set([$,B],b[O[0]][z[0]],w)})})}}return v}a.prototype.get=function(v){if(!En(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Yt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var y=v[0],b=v[1];_n(y,this._size[0]),_n(b,this._size[1]);var w=l(y,this._ptr[b],this._ptr[b+1],this._index);return w<this._ptr[b+1]&&this._index[w]===y?this._values[w]:0},a.prototype.set=function(v,y,b){if(!En(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Yt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var w=v[0],x=v[1],S=this._size[0],C=this._size[1],E=n,A=0;Na(this._datatype)&&(E=e.find(n,[this._datatype,this._datatype])||n,A=e.convert(0,this._datatype)),(w>S-1||x>C-1)&&(d(this,Math.max(w+1,S),Math.max(x+1,C),b),S=this._size[0],C=this._size[1]),_n(w,S),_n(x,C);var k=l(w,this._ptr[x],this._ptr[x+1],this._index);return k<this._ptr[x+1]&&this._index[k]===w?E(y,A)?c(k,x,this._values,this._index,this._ptr):this._values[k]=y:E(y,A)||f(k,w,x,y,this._values,this._index,this._ptr),this};function l(v,y,b,w){if(b-y===0)return b;for(var x=y;x<b;x++)if(w[x]===v)return x;return y}function c(v,y,b,w,x){b.splice(v,1),w.splice(v,1);for(var S=y+1;S<x.length;S++)x[S]--}function f(v,y,b,w,x,S,C){x.splice(v,0,w),S.splice(v,0,y);for(var E=b+1;E<C.length;E++)C[E]++}a.prototype.resize=function(v,y,b){if(!as(v))throw new TypeError("Array or Matrix expected");var w=v.valueOf().map(S=>Array.isArray(S)&&S.length===1?S[0]:S);if(w.length!==2)throw new Error("Only two dimensions matrix are supported");w.forEach(function(S){if(!Vt(S)||!bt(S)||S<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Xt(w)+")")});var x=b?this.clone():this;return d(x,w[0],w[1],y)};function d(v,y,b,w){var x=w||0,S=n,C=0;Na(v._datatype)&&(S=e.find(n,[v._datatype,v._datatype])||n,C=e.convert(0,v._datatype),x=e.convert(x,v._datatype));var E=!S(x,C),A=v._size[0],k=v._size[1],T,I,$;if(b>k){for(I=k;I<b;I++)if(v._ptr[I]=v._values.length,E)for(T=0;T<A;T++)v._values.push(x),v._index.push(T);v._ptr[b]=v._values.length}else b<k&&(v._ptr.splice(b+1,k-b),v._values.splice(v._ptr[b],v._values.length),v._index.splice(v._ptr[b],v._index.length));if(k=b,y>A){if(E){var O=0;for(I=0;I<k;I++){v._ptr[I]=v._ptr[I]+O,$=v._ptr[I+1]+O;var B=0;for(T=A;T<y;T++,B++)v._values.splice($+B,0,x),v._index.splice($+B,0,T),O++}v._ptr[k]=v._values.length}}else if(y<A){var z=0;for(I=0;I<k;I++){v._ptr[I]=v._ptr[I]-z;var L=v._ptr[I],F=v._ptr[I+1]-z;for($=L;$<F;$++)T=v._index[$],T>y-1&&(v._values.splice($,1),v._index.splice($,1),z++)}v._ptr[I]=v._values.length}return v._size[0]=y,v._size[1]=b,v}a.prototype.reshape=function(v,y){if(!En(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(M){if(!Vt(M)||!bt(M)||M<=-2||M===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Xt(v)+")")});var b=this._size[0]*this._size[1];v=IT(v,b);var w=v[0]*v[1];if(b!==w)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var x=y?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return x;for(var S=[],C=0;C<x._ptr.length;C++)for(var E=0;E<x._ptr[C+1]-x._ptr[C];E++)S.push(C);for(var A=x._values.slice(),k=x._index.slice(),T=0;T<x._index.length;T++){var I=k[T],$=S[T],O=I*x._size[1]+$;S[T]=O%v[1],k[T]=Math.floor(O/v[1])}x._values.length=0,x._index.length=0,x._ptr.length=v[1]+1,x._size=v.slice();for(var B=0;B<x._ptr.length;B++)x._ptr[B]=0;for(var z=0;z<A.length;z++){var L=k[z],F=S[z],R=A[z],W=l(L,x._ptr[F],x._ptr[F+1],x._index);f(W,L,F,R,x._values,x._index,x._ptr)}return x},a.prototype.clone=function(){var v=new a({values:this._values?Bt(this._values):void 0,index:Bt(this._index),ptr:Bt(this._ptr),size:Bt(this._size),datatype:this._datatype});return v},a.prototype.size=function(){return this._size.slice(0)},a.prototype.map=function(v,y){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var b=this,w=this._size[0],x=this._size[1],S=mc(v,b,"map"),C=function(A,k,T){return S(A,[k,T],b)};return h(this,0,w-1,0,x-1,C,y)};function h(v,y,b,w,x,S,C){var E=[],A=[],k=[],T=n,I=0;Na(v._datatype)&&(T=e.find(n,[v._datatype,v._datatype])||n,I=e.convert(0,v._datatype));for(var $=function(G,ne,ue){var te=S(G,ne,ue);T(te,I)||(E.push(te),A.push(ne))},O=w;O<=x;O++){k.push(E.length);var B=v._ptr[O],z=v._ptr[O+1];if(C)for(var L=B;L<z;L++){var F=v._index[L];F>=y&&F<=b&&$(v._values[L],F-y,O-w)}else{for(var R={},W=B;W<z;W++){var M=v._index[W];R[M]=v._values[W]}for(var j=y;j<=b;j++){var q=j in R?R[j]:0;$(q,j-y,O-w)}}}return k.push(E.length),new a({values:E,index:A,ptr:k,size:[b-y+1,x-w+1]})}a.prototype.forEach=function(v,y){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var b=this,w=this._size[0],x=this._size[1],S=mc(v,b,"forEach"),C=0;C<x;C++){var E=this._ptr[C],A=this._ptr[C+1];if(y)for(var k=E;k<A;k++){var T=this._index[k];S(this._values[k],[T,C],b)}else{for(var I={},$=E;$<A;$++){var O=this._index[$];I[O]=this._values[$]}for(var B=0;B<w;B++){var z=B in I?I[B]:0;S(z,[B,C],b)}}}},a.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],y=0;y<v;y++)for(var b=this._ptr[y],w=this._ptr[y+1],x=b;x<w;x++){var S=this._index[x];yield{value:this._values[x],index:[S,y]}}},a.prototype.toArray=function(){return m(this._values,this._index,this._ptr,this._size,!0)},a.prototype.valueOf=function(){return m(this._values,this._index,this._ptr,this._size,!1)};function m(v,y,b,w,x){var S=w[0],C=w[1],E=[],A,k;for(A=0;A<S;A++)for(E[A]=[],k=0;k<C;k++)E[A][k]=0;for(k=0;k<C;k++)for(var T=b[k],I=b[k+1],$=T;$<I;$++)A=y[$],E[A][k]=v?x?Bt(v[$]):v[$]:1;return E}return a.prototype.format=function(v){for(var y=this._size[0],b=this._size[1],w=this.density(),x="Sparse Matrix ["+Xt(y,v)+" x "+Xt(b,v)+"] density: "+Xt(w,v)+`
`,S=0;S<b;S++)for(var C=this._ptr[S],E=this._ptr[S+1],A=C;A<E;A++){var k=this._index[A];x+=`
    (`+Xt(k,v)+", "+Xt(S,v)+") ==> "+(this._values?Xt(this._values[A],v):"X")}return x},a.prototype.toString=function(){return Xt(this.toArray())},a.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},a.prototype.diagonal=function(v){if(v){if(qt(v)&&(v=v.toNumber()),!Vt(v)||!bt(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var y=v>0?v:0,b=v<0?-v:0,w=this._size[0],x=this._size[1],S=Math.min(w-b,x-y),C=[],E=[],A=[];A[0]=0;for(var k=y;k<x&&C.length<S;k++)for(var T=this._ptr[k],I=this._ptr[k+1],$=T;$<I;$++){var O=this._index[$];if(O===k-y+b){C.push(this._values[$]),E[C.length-1]=O-b;break}}return A.push(C.length),new a({values:C,index:E,ptr:A,size:[S,1]})},a.fromJSON=function(v){return new a(v)},a.diagonal=function(v,y,b,w,x){if(!En(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(M){if(qt(M)&&(M=M.toNumber()),!Vt(M)||!bt(M)||M<1)throw new Error("Size values must be positive integers");return M}),b){if(qt(b)&&(b=b.toNumber()),!Vt(b)||!bt(b))throw new TypeError("The parameter k must be an integer number")}else b=0;var S=n,C=0;Na(x)&&(S=e.find(n,[x,x])||n,C=e.convert(0,x));var E=b>0?b:0,A=b<0?-b:0,k=v[0],T=v[1],I=Math.min(k-A,T-E),$;if(En(y)){if(y.length!==I)throw new Error("Invalid value array length");$=function(j){return y[j]}}else if(Tt(y)){var O=y.size();if(O.length!==1||O[0]!==I)throw new Error("Invalid matrix length");$=function(j){return y.get([j])}}else $=function(){return y};for(var B=[],z=[],L=[],F=0;F<T;F++){L.push(B.length);var R=F-E;if(R>=0&&R<I){var W=$(R);S(W,C)||(z.push(R+A),B.push(W))}}return L.push(B.length),new a({values:B,index:z,ptr:L,size:[k,T]})},a.prototype.swapRows=function(v,y){if(!Vt(v)||!bt(v)||!Vt(y)||!bt(y))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return _n(v,this._size[0]),_n(y,this._size[0]),a._swapRows(v,y,this._size[1],this._values,this._index,this._ptr),this},a._forEachRow=function(v,y,b,w,x){for(var S=w[v],C=w[v+1],E=S;E<C;E++)x(b[E],y[E])},a._swapRows=function(v,y,b,w,x,S){for(var C=0;C<b;C++){var E=S[C],A=S[C+1],k=l(v,E,A,x),T=l(y,E,A,x);if(k<A&&T<A&&x[k]===v&&x[T]===y){if(w){var I=w[k];w[k]=w[T],w[T]=I}continue}if(k<A&&x[k]===v&&(T>=A||x[T]!==y)){var $=w?w[k]:void 0;x.splice(T,0,y),w&&w.splice(T,0,$),x.splice(T<=k?k+1:k,1),w&&w.splice(T<=k?k+1:k,1);continue}if(T<A&&x[T]===y&&(k>=A||x[k]!==v)){var O=w?w[T]:void 0;x.splice(k,0,v),w&&w.splice(k,0,O),x.splice(k<=T?T+1:T,1),w&&w.splice(k<=T?T+1:T,1)}}},a},{isClass:!0}),A$e="number",I$e=["typed"];function k$e(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var n={"0b":2,"0o":8,"0x":16}[e[1]],r=e[2],a=e[3];return{input:t,radix:n,integerPart:r,fractionalPart:a}}else return null}function _$e(t){for(var e=parseInt(t.integerPart,t.radix),n=0,r=0;r<t.fractionalPart.length;r++){var a=parseInt(t.fractionalPart[r],t.radix);n+=a/Math.pow(t.radix,r+1)}var i=e+n;if(isNaN(i))throw new SyntaxError('String "'+t.input+'" is not a valid number');return i}var O$e=ee(A$e,I$e,t=>{var{typed:e}=t,n=e("number",{"":function(){return 0},number:function(a){return a},string:function(a){if(a==="NaN")return NaN;var i=k$e(a);if(i)return _$e(i);var s=0,o=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(s=Number(o[2]),a=o[1]);var u=Number(a);if(isNaN(u))throw new SyntaxError('String "'+a+'" is not a valid number');if(o){if(u>2**s-1)throw new SyntaxError('String "'.concat(a,'" is out of range'));u>=2**(s-1)&&(u=u-2**s)}return u},BigNumber:function(a){return a.toNumber()},bigint:function(a){return Number(a)},Fraction:function(a){return a.valueOf()},Unit:e.referToSelf(r=>a=>{var i=a.clone();return i.value=r(a.value),i}),null:function(a){return 0},"Unit, string | Unit":function(a,i){return a.toNumber(i)},"Array | Matrix":e.referToSelf(r=>a=>zt(a,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),F$e="bigint",R$e=["typed"],M$e=ee(F$e,R$e,t=>{var{typed:e}=t,n=e("bigint",{"":function(){return 0n},bigint:function(a){return a},number:function(a){return BigInt(a.toFixed())},BigNumber:function(a){return BigInt(a.round().toString())},Fraction:function(a){return BigInt(a.valueOf().toFixed())},"string | boolean":function(a){return BigInt(a)},null:function(a){return 0n},"Array | Matrix":e.referToSelf(r=>a=>zt(a,r))});return n.fromJSON=function(r){return BigInt(r.value)},n}),u3="string",P$e=["typed"],B$e=ee(u3,P$e,t=>{var{typed:e}=t;return e(u3,{"":function(){return""},number:Jl,null:function(r){return"null"},boolean:function(r){return r+""},string:function(r){return r},"Array | Matrix":e.referToSelf(n=>r=>zt(r,n)),any:function(r){return String(r)}})}),l3="boolean",L$e=["typed"],z$e=ee(l3,L$e,t=>{var{typed:e}=t;return e(l3,{"":function(){return!1},boolean:function(r){return r},number:function(r){return!!r},null:function(r){return!1},BigNumber:function(r){return!r.isZero()},string:function(r){var a=r.toLowerCase();if(a==="true")return!0;if(a==="false")return!1;var i=Number(r);if(r!==""&&!isNaN(i))return!!i;throw new Error('Cannot convert "'+r+'" to a boolean')},"Array | Matrix":e.referToSelf(n=>r=>zt(r,n))})}),U$e="bignumber",V$e=["typed","BigNumber"],W$e=ee(U$e,V$e,t=>{var{typed:e,BigNumber:n}=t;return e("bignumber",{"":function(){return new n(0)},number:function(a){return new n(a+"")},string:function(a){var i=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(i){var s=i[2],o=n(i[1]),u=new n(2).pow(Number(s));if(o.gt(u.sub(1)))throw new SyntaxError('String "'.concat(a,'" is out of range'));var l=new n(2).pow(Number(s)-1);return o.gte(l)?o.sub(u):o}return new n(a)},BigNumber:function(a){return a},bigint:function(a){return new n(a.toString())},Unit:e.referToSelf(r=>a=>{var i=a.clone();return i.value=r(a.value),i}),Fraction:function(a){return new n(String(a.n)).div(String(a.d)).times(String(a.s))},null:function(a){return new n(0)},"Array | Matrix":e.referToSelf(r=>a=>zt(a,r))})}),q$e="complex",G$e=["typed","Complex"],H$e=ee(q$e,G$e,t=>{var{typed:e,Complex:n}=t;return e("complex",{"":function(){return n.ZERO},number:function(a){return new n(a,0)},"number, number":function(a,i){return new n(a,i)},"BigNumber, BigNumber":function(a,i){return new n(a.toNumber(),i.toNumber())},Fraction:function(a){return new n(a.valueOf(),0)},Complex:function(a){return a.clone()},string:function(a){return n(a)},null:function(a){return n(0)},Object:function(a){if("re"in a&&"im"in a)return new n(a.re,a.im);if("r"in a&&"phi"in a||"abs"in a&&"arg"in a)return new n(a);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(r=>a=>zt(a,r))})}),j$e="fraction",X$e=["typed","Fraction"],K$e=ee(j$e,X$e,t=>{var{typed:e,Fraction:n}=t;return e("fraction",{number:function(a){if(!isFinite(a)||isNaN(a))throw new Error(a+" cannot be represented as a fraction");return new n(a)},string:function(a){return new n(a)},"number, number":function(a,i){return new n(a,i)},"bigint, bigint":function(a,i){return new n(a,i)},null:function(a){return new n(0)},BigNumber:function(a){return new n(a.toString())},bigint:function(a){return new n(a.toString())},Fraction:function(a){return a},Unit:e.referToSelf(r=>a=>{var i=a.clone();return i.value=r(a.value),i}),Object:function(a){return new n(a)},"Array | Matrix":e.referToSelf(r=>a=>zt(a,r))})}),c3="matrix",Y$e=["typed","Matrix","DenseMatrix","SparseMatrix"],Z$e=ee(c3,Y$e,t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:a}=t;return e(c3,{"":function(){return i([])},string:function(o){return i([],o)},"string, string":function(o,u){return i([],o,u)},Array:function(o){return i(o)},Matrix:function(o){return i(o,o.storage())},"Array | Matrix, string":i,"Array | Matrix, string, string":i});function i(s,o,u){if(o==="dense"||o==="default"||o===void 0)return new r(s,u);if(o==="sparse")return new a(s,u);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),f3="matrixFromFunction",Q$e=["typed","matrix","isZero"],J$e=ee(f3,Q$e,t=>{var{typed:e,matrix:n,isZero:r}=t;return e(f3,{"Array | Matrix, function, string, string":function(s,o,u,l){return a(s,o,u,l)},"Array | Matrix, function, string":function(s,o,u){return a(s,o,u)},"Matrix, function":function(s,o){return a(s,o,"dense")},"Array, function":function(s,o){return a(s,o,"dense").toArray()},"Array | Matrix, string, function":function(s,o,u){return a(s,u,o)},"Array | Matrix, string, string, function":function(s,o,u,l){return a(s,l,o,u)}});function a(i,s,o,u){var l;return u!==void 0?l=n(o,u):l=n(o),l.resize(i),l.forEach(function(c,f){var d=s(f);r(d)||l.set(f,d)}),l}}),d3="matrixFromRows",eAe=["typed","matrix","flatten","size"],tAe=ee(d3,eAe,t=>{var{typed:e,matrix:n,flatten:r,size:a}=t;return e(d3,{"...Array":function(u){return i(u)},"...Matrix":function(u){return n(i(u.map(l=>l.toArray())))}});function i(o){if(o.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var u=s(o[0]),l=[];for(var c of o){var f=s(c);if(f!==u)throw new TypeError("The vectors had different length: "+(u|0)+"  "+(f|0));l.push(r(c))}return l}function s(o){var u=a(o);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),p3="matrixFromColumns",nAe=["typed","matrix","flatten","size"],rAe=ee(p3,nAe,t=>{var{typed:e,matrix:n,flatten:r,size:a}=t;return e(p3,{"...Array":function(u){return i(u)},"...Matrix":function(u){return n(i(u.map(l=>l.toArray())))}});function i(o){if(o.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var u=s(o[0]),l=[],c=0;c<u;c++)l[c]=[];for(var f of o){var d=s(f);if(d!==u)throw new TypeError("The vectors had different length: "+(u|0)+"  "+(d|0));for(var h=r(f),m=0;m<u;m++)l[m].push(h[m])}return l}function s(o){var u=a(o);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),h3="splitUnit",aAe=["typed"],iAe=ee(h3,aAe,t=>{var{typed:e}=t;return e(h3,{"Unit, Array":function(r,a){return r.splitUnit(a)}})}),m3="unaryMinus",sAe=["typed"],oAe=ee(m3,sAe,t=>{var{typed:e}=t;return e(m3,{number:jU,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:e.referToSelf(n=>r=>{var a=r.clone();return a.value=e.find(n,a.valueType())(r.value),a}),"Array | Matrix":e.referToSelf(n=>r=>zt(r,n))})}),g3="unaryPlus",uAe=["typed","config","numeric"],lAe=ee(g3,uAe,t=>{var{typed:e,config:n,numeric:r}=t;return e(g3,{number:XU,Complex:function(i){return i},BigNumber:function(i){return i},bigint:function(i){return i},Fraction:function(i){return i},Unit:function(i){return i.clone()},"Array | Matrix":e.referToSelf(a=>i=>zt(i,a)),boolean:function(i){return r(i?1:0,n.number)},string:function(i){return r(i,ll(i,n))}})}),v3="abs",cAe=["typed"],fAe=ee(v3,cAe,t=>{var{typed:e}=t;return e(v3,{number:WU,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":e.referToSelf(n=>r=>zt(r,n))})}),y3="apply",dAe=["typed","isInteger"],MT=ee(y3,dAe,t=>{var{typed:e,isInteger:n}=t;return e(y3,{"Array | Matrix, number | BigNumber, function":function(a,i,s){if(!n(i))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(a)?Mt(a):a.size();if(i<0||i>=o.length)throw new Os(i,o.length);return Tt(a)?a.create(I0(a.valueOf(),i,s),a.datatype()):I0(a,i,s)}})});function I0(t,e,n){var r,a,i;if(e<=0)if(Array.isArray(t[0])){for(i=pAe(t),a=[],r=0;r<i.length;r++)a[r]=I0(i[r],e-1,n);return a}else return n(t);else{for(a=[],r=0;r<t.length;r++)a[r]=I0(t[r],e-1,n);return a}}function pAe(t){var e=t.length,n=t[0].length,r,a,i=[];for(a=0;a<n;a++){var s=[];for(r=0;r<e;r++)s.push(t[r][a]);i.push(s)}return i}var b3="addScalar",hAe=["typed"],mAe=ee(b3,hAe,t=>{var{typed:e}=t;return e(b3,{"number, number":qU,"Complex, Complex":function(r,a){return r.add(a)},"BigNumber, BigNumber":function(r,a){return r.plus(a)},"bigint, bigint":function(r,a){return r+a},"Fraction, Fraction":function(r,a){return r.add(a)},"Unit, Unit":e.referToSelf(n=>(r,a)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(a))throw new Error("Units do not match");var i=r.clone();return i.value=e.find(n,[i.valueType(),a.valueType()])(i.value,a.value),i.fixPrefix=!1,i})})}),x3="subtractScalar",gAe=["typed"],vAe=ee(x3,gAe,t=>{var{typed:e}=t;return e(x3,{"number, number":GU,"Complex, Complex":function(r,a){return r.sub(a)},"BigNumber, BigNumber":function(r,a){return r.minus(a)},"bigint, bigint":function(r,a){return r-a},"Fraction, Fraction":function(r,a){return r.sub(a)},"Unit, Unit":e.referToSelf(n=>(r,a)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(a))throw new Error("Units do not match");var i=r.clone();return i.value=e.find(n,[i.valueType(),a.valueType()])(i.value,a.value),i.fixPrefix=!1,i})})}),w3="cbrt",yAe=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],bAe=ee(w3,yAe,t=>{var{config:e,typed:n,isNegative:r,unaryMinus:a,matrix:i,Complex:s,BigNumber:o,Fraction:u}=t;return n(w3,{number:Vp,Complex:l,"Complex, boolean":l,BigNumber:function(d){return d.cbrt()},Unit:c});function l(f,d){var h=f.arg()/3,m=f.abs(),v=new s(Vp(m),0).mul(new s(0,h).exp());if(d){var y=[v,new s(Vp(m),0).mul(new s(0,h+Math.PI*2/3).exp()),new s(Vp(m),0).mul(new s(0,h-Math.PI*2/3).exp())];return e.matrix==="Array"?y:i(y)}else return v}function c(f){if(f.value&&Mo(f.value)){var d=f.clone();return d.value=1,d=d.pow(1/3),d.value=l(f.value),d}else{var h=r(f.value);h&&(f.value=a(f.value));var m;qt(f.value)?m=new o(1).div(3):Jm(f.value)?m=new u(1,3):m=1/3;var v=f.pow(m);return h&&(v.value=a(v.value)),v}}}),xAe="matAlgo11xS0s",wAe=["typed","equalScalar"],fa=ee(xAe,wAe,t=>{var{typed:e,equalScalar:n}=t;return function(a,i,s,o){var u=a._values,l=a._index,c=a._ptr,f=a._size,d=a._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,y=n,b=0,w=s;typeof d=="string"&&(v=d,y=e.find(n,[v,v]),b=e.convert(0,v),i=e.convert(i,v),w=e.find(s,[v,v]));for(var x=[],S=[],C=[],E=0;E<m;E++){C[E]=S.length;for(var A=c[E],k=c[E+1],T=A;T<k;T++){var I=l[T],$=o?w(i,u[T]):w(u[T],i);y($,b)||(S.push(I),x.push($))}}return C[m]=S.length,a.createSparseMatrix({values:x,index:S,ptr:C,size:[h,m],datatype:v})}}),NAe="matAlgo12xSfs",SAe=["typed","DenseMatrix"],Pr=ee(NAe,SAe,t=>{var{typed:e,DenseMatrix:n}=t;return function(a,i,s,o){var u=a._values,l=a._index,c=a._ptr,f=a._size,d=a._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,y=s;typeof d=="string"&&(v=d,i=e.convert(i,v),y=e.find(s,[v,v]));for(var b=[],w=[],x=[],S=0;S<m;S++){for(var C=S+1,E=c[S],A=c[S+1],k=E;k<A;k++){var T=l[k];w[T]=u[k],x[T]=C}for(var I=0;I<h;I++)S===0&&(b[I]=[]),x[I]===C?b[I][S]=o?y(i,w[I]):y(w[I],i):b[I][S]=o?y(i,0):y(0,i)}return new n({data:b,size:[h,m],datatype:v})}}),CAe="matAlgo14xDs",EAe=["typed"],Rs=ee(CAe,EAe,t=>{var{typed:e}=t;return function(a,i,s,o){var u=a._data,l=a._size,c=a._datatype,f,d=s;typeof c=="string"&&(f=c,i=e.convert(i,f),d=e.find(s,[f,f]));var h=l.length>0?n(d,0,l,l[0],u,i,o):[];return a.createDenseMatrix({data:h,size:Bt(l),datatype:f})};function n(r,a,i,s,o,u,l){var c=[];if(a===i.length-1)for(var f=0;f<s;f++)c[f]=l?r(u,o[f]):r(o[f],u);else for(var d=0;d<s;d++)c[d]=n(r,a+1,i,i[a+1],o[d],u,l);return c}}),GS="ceil",DAe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],TAe=ee(GS,["typed","config","round"],t=>{var{typed:e,config:n,round:r}=t;return e(GS,{number:function(i){return ua(i,r(i),n.relTol,n.absTol)?r(i):Math.ceil(i)},"number, number":function(i,s){if(ua(i,r(i,s),n.relTol,n.absTol))return r(i,s);var[o,u]="".concat(i,"e").split("e"),l=Math.ceil(Number("".concat(o,"e").concat(Number(u)+s)));return[o,u]="".concat(l,"e").split("e"),Number("".concat(o,"e").concat(Number(u)-s))}})}),$Ae=ee(GS,DAe,t=>{var{typed:e,config:n,round:r,matrix:a,equalScalar:i,zeros:s,DenseMatrix:o}=t,u=fa({typed:e,equalScalar:i}),l=Pr({typed:e,DenseMatrix:o}),c=Rs({typed:e}),f=TAe({typed:e,config:n,round:r});return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.ceil()},"Complex, number":function(h,m){return h.ceil(m)},"Complex, BigNumber":function(h,m){return h.ceil(m.toNumber())},BigNumber:function(h){return hi(h,r(h),n.relTol,n.absTol)?r(h):h.ceil()},"BigNumber, BigNumber":function(h,m){return hi(h,r(h,m),n.relTol,n.absTol)?r(h,m):h.toDecimalPlaces(m.toNumber(),Ku.ROUND_CEIL)},Fraction:function(h){return h.ceil()},"Fraction, number":function(h,m){return h.ceil(m)},"Fraction, BigNumber":function(h,m){return h.ceil(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(h,m,v){var y=h.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>zt(h,y=>d(y,m,v))),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>zt(h,d)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>zt(h,v=>d(v,m))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>u(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(a(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>i(h,0)?s(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):l(m,h,d,!0))})}),N3="cube",AAe=["typed"],IAe=ee(N3,AAe,t=>{var{typed:e}=t;return e(N3,{number:KU,Complex:function(r){return r.mul(r).mul(r)},BigNumber:function(r){return r.times(r).times(r)},bigint:function(r){return r*r*r},Fraction:function(r){return r.pow(3)},Unit:function(r){return r.pow(3)}})}),S3="exp",kAe=["typed"],_Ae=ee(S3,kAe,t=>{var{typed:e}=t;return e(S3,{number:YU,Complex:function(r){return r.exp()},BigNumber:function(r){return r.exp()}})}),C3="expm1",OAe=["typed","Complex"],FAe=ee(C3,OAe,t=>{var{typed:e,Complex:n}=t;return e(C3,{number:ZU,Complex:function(a){var i=Math.exp(a.re);return new n(i*Math.cos(a.im)-1,i*Math.sin(a.im))},BigNumber:function(a){return a.exp().minus(1)}})}),HS="fix",RAe=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],MAe=ee(HS,["typed","ceil","floor"],t=>{var{typed:e,ceil:n,floor:r}=t;return e(HS,{number:function(i){return i>0?r(i):n(i)},"number, number":function(i,s){return i>0?r(i,s):n(i,s)}})}),PAe=ee(HS,RAe,t=>{var{typed:e,Complex:n,matrix:r,ceil:a,floor:i,equalScalar:s,zeros:o,DenseMatrix:u}=t,l=Pr({typed:e,DenseMatrix:u}),c=Rs({typed:e}),f=MAe({typed:e,ceil:a,floor:i});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(h){return new n(h.re>0?Math.floor(h.re):Math.ceil(h.re),h.im>0?Math.floor(h.im):Math.ceil(h.im))},"Complex, number":function(h,m){return new n(h.re>0?i(h.re,m):a(h.re,m),h.im>0?i(h.im,m):a(h.im,m))},"Complex, BigNumber":function(h,m){var v=m.toNumber();return new n(h.re>0?i(h.re,v):a(h.re,v),h.im>0?i(h.im,v):a(h.im,v))},BigNumber:function(h){return h.isNegative()?a(h):i(h)},"BigNumber, number | BigNumber":function(h,m){return h.isNegative()?a(h,m):i(h,m)},Fraction:function(h){return h.s<0n?h.ceil():h.floor()},"Fraction, number | BigNumber":function(h,m){return h.s<0n?a(h,m):i(h,m)},"Unit, number, Unit":e.referToSelf(d=>function(h,m,v){var y=h.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>zt(h,y=>d(y,m,v))),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>zt(h,d)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(h,m)=>zt(h,v=>d(v,m))),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(r(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>s(h,0)?o(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):l(m,h,d,!0))})}),jS="floor",BAe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],LAe=ee(jS,["typed","config","round"],t=>{var{typed:e,config:n,round:r}=t;return e(jS,{number:function(i){return ua(i,r(i),n.relTol,n.absTol)?r(i):Math.floor(i)},"number, number":function(i,s){if(ua(i,r(i,s),n.relTol,n.absTol))return r(i,s);var[o,u]="".concat(i,"e").split("e"),l=Math.floor(Number("".concat(o,"e").concat(Number(u)+s)));return[o,u]="".concat(l,"e").split("e"),Number("".concat(o,"e").concat(Number(u)-s))}})}),FV=ee(jS,BAe,t=>{var{typed:e,config:n,round:r,matrix:a,equalScalar:i,zeros:s,DenseMatrix:o}=t,u=fa({typed:e,equalScalar:i}),l=Pr({typed:e,DenseMatrix:o}),c=Rs({typed:e}),f=LAe({typed:e,config:n,round:r});return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.floor()},"Complex, number":function(h,m){return h.floor(m)},"Complex, BigNumber":function(h,m){return h.floor(m.toNumber())},BigNumber:function(h){return hi(h,r(h),n.relTol,n.absTol)?r(h):h.floor()},"BigNumber, BigNumber":function(h,m){return hi(h,r(h,m),n.relTol,n.absTol)?r(h,m):h.toDecimalPlaces(m.toNumber(),Ku.ROUND_FLOOR)},Fraction:function(h){return h.floor()},"Fraction, number":function(h,m){return h.floor(m)},"Fraction, BigNumber":function(h,m){return h.floor(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(h,m,v){var y=h.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>zt(h,y=>d(y,m,v))),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>zt(h,d)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>zt(h,v=>d(v,m))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>u(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(a(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>i(h,0)?s(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):l(m,h,d,!0))})}),zAe="matAlgo02xDS0",UAe=["typed","equalScalar"],Ms=ee(zAe,UAe,t=>{var{typed:e,equalScalar:n}=t;return function(a,i,s,o){var u=a._data,l=a._size,c=a._datatype||a.getDataType(),f=i._values,d=i._index,h=i._ptr,m=i._size,v=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==m.length)throw new Yt(l.length,m.length);if(l[0]!==m[0]||l[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+m+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var y=l[0],b=l[1],w,x=n,S=0,C=s;typeof c=="string"&&c===v&&c!=="mixed"&&(w=c,x=e.find(n,[w,w]),S=e.convert(0,w),C=e.find(s,[w,w]));for(var E=[],A=[],k=[],T=0;T<b;T++){k[T]=A.length;for(var I=h[T],$=h[T+1],O=I;O<$;O++){var B=d[O],z=o?C(f[O],u[B][T]):C(u[B][T],f[O]);x(z,S)||(A.push(B),E.push(z))}}return k[b]=A.length,i.createSparseMatrix({values:E,index:A,ptr:k,size:[y,b],datatype:c===a._datatype&&v===i._datatype?w:void 0})}}),VAe="matAlgo03xDSf",WAe=["typed"],Wa=ee(VAe,WAe,t=>{var{typed:e}=t;return function(r,a,i,s){var o=r._data,u=r._size,l=r._datatype||r.getDataType(),c=a._values,f=a._index,d=a._ptr,h=a._size,m=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==h.length)throw new Yt(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=u[0],y=u[1],b,w=0,x=i;typeof l=="string"&&l===m&&l!=="mixed"&&(b=l,w=e.convert(0,b),x=e.find(i,[b,b]));for(var S=[],C=0;C<v;C++)S[C]=[];for(var E=[],A=[],k=0;k<y;k++){for(var T=k+1,I=d[k],$=d[k+1],O=I;O<$;O++){var B=f[O];E[B]=s?x(c[O],o[B][k]):x(o[B][k],c[O]),A[B]=T}for(var z=0;z<v;z++)A[z]===T?S[z][k]=E[z]:S[z][k]=s?x(w,o[z][k]):x(o[z][k],w)}return r.createDenseMatrix({data:S,size:[v,y],datatype:l===r._datatype&&m===a._datatype?b:void 0})}}),qAe="matAlgo05xSfSf",GAe=["typed","equalScalar"],jb=ee(qAe,GAe,t=>{var{typed:e,equalScalar:n}=t;return function(a,i,s){var o=a._values,u=a._index,l=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,h=i._index,m=i._ptr,v=i._size,y=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new Yt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var b=c[0],w=c[1],x,S=n,C=0,E=s;typeof f=="string"&&f===y&&f!=="mixed"&&(x=f,S=e.find(n,[x,x]),C=e.convert(0,x),E=e.find(s,[x,x]));var A=o&&d?[]:void 0,k=[],T=[],I=A?[]:void 0,$=A?[]:void 0,O=[],B=[],z,L,F,R;for(L=0;L<w;L++){T[L]=k.length;var W=L+1;for(F=l[L],R=l[L+1];F<R;F++)z=u[F],k.push(z),O[z]=W,I&&(I[z]=o[F]);for(F=m[L],R=m[L+1];F<R;F++)z=h[F],O[z]!==W&&k.push(z),B[z]=W,$&&($[z]=d[F]);if(A)for(F=T[L];F<k.length;){z=k[F];var M=O[z],j=B[z];if(M===W||j===W){var q=M===W?I[z]:C,H=j===W?$[z]:C,G=E(q,H);S(G,C)?k.splice(F,1):(A.push(G),F++)}}}return T[w]=k.length,a.createSparseMatrix({values:A,index:k,ptr:T,size:[b,w],datatype:f===a._datatype&&y===i._datatype?x:void 0})}}),HAe="matAlgo13xDD",jAe=["typed"],XAe=ee(HAe,jAe,t=>{var{typed:e}=t;return function(a,i,s){var o=a._data,u=a._size,l=a._datatype,c=i._data,f=i._size,d=i._datatype,h=[];if(u.length!==f.length)throw new Yt(u.length,f.length);for(var m=0;m<u.length;m++){if(u[m]!==f[m])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");h[m]=u[m]}var v,y=s;typeof l=="string"&&l===d&&(v=l,y=e.find(s,[v,v]));var b=h.length>0?n(y,0,h,h[0],o,c):[];return a.createDenseMatrix({data:b,size:h,datatype:v})};function n(r,a,i,s,o,u){var l=[];if(a===i.length-1)for(var c=0;c<s;c++)l[c]=r(o[c],u[c]);else for(var f=0;f<s;f++)l[f]=n(r,a+1,i,i[a+1],o[f],u[f]);return l}});function Wr(t,e){if(Go(t.size(),e.size()))return[t,e];var n=kT(t.size(),e.size());return[t,e].map(r=>KAe(r,n))}function KAe(t,e){return Go(t.size(),e)?t:t.create(Kl(t.valueOf(),e),t.datatype())}var YAe="matrixAlgorithmSuite",ZAe=["typed","matrix"],Mn=ee(YAe,ZAe,t=>{var{typed:e,matrix:n}=t,r=XAe({typed:e}),a=Rs({typed:e});return function(s){var o=s.elop,u=s.SD||s.DS,l;o?(l={"DenseMatrix, DenseMatrix":(h,m)=>r(...Wr(h,m),o),"Array, Array":(h,m)=>r(...Wr(n(h),n(m)),o).valueOf(),"Array, DenseMatrix":(h,m)=>r(...Wr(n(h),m),o),"DenseMatrix, Array":(h,m)=>r(...Wr(h,n(m)),o)},s.SS&&(l["SparseMatrix, SparseMatrix"]=(h,m)=>s.SS(...Wr(h,m),o,!1)),s.DS&&(l["DenseMatrix, SparseMatrix"]=(h,m)=>s.DS(...Wr(h,m),o,!1),l["Array, SparseMatrix"]=(h,m)=>s.DS(...Wr(n(h),m),o,!1)),u&&(l["SparseMatrix, DenseMatrix"]=(h,m)=>u(...Wr(m,h),o,!0),l["SparseMatrix, Array"]=(h,m)=>u(...Wr(n(m),h),o,!0))):(l={"DenseMatrix, DenseMatrix":e.referToSelf(h=>(m,v)=>r(...Wr(m,v),h)),"Array, Array":e.referToSelf(h=>(m,v)=>r(...Wr(n(m),n(v)),h).valueOf()),"Array, DenseMatrix":e.referToSelf(h=>(m,v)=>r(...Wr(n(m),v),h)),"DenseMatrix, Array":e.referToSelf(h=>(m,v)=>r(...Wr(m,n(v)),h))},s.SS&&(l["SparseMatrix, SparseMatrix"]=e.referToSelf(h=>(m,v)=>s.SS(...Wr(m,v),h,!1))),s.DS&&(l["DenseMatrix, SparseMatrix"]=e.referToSelf(h=>(m,v)=>s.DS(...Wr(m,v),h,!1)),l["Array, SparseMatrix"]=e.referToSelf(h=>(m,v)=>s.DS(...Wr(n(m),v),h,!1))),u&&(l["SparseMatrix, DenseMatrix"]=e.referToSelf(h=>(m,v)=>u(...Wr(v,m),h,!0)),l["SparseMatrix, Array"]=e.referToSelf(h=>(m,v)=>u(...Wr(n(v),m),h,!0))));var c=s.scalar||"any",f=s.Ds||s.Ss;f&&(o?(l["DenseMatrix,"+c]=(h,m)=>a(h,m,o,!1),l[c+", DenseMatrix"]=(h,m)=>a(m,h,o,!0),l["Array,"+c]=(h,m)=>a(n(h),m,o,!1).valueOf(),l[c+", Array"]=(h,m)=>a(n(m),h,o,!0).valueOf()):(l["DenseMatrix,"+c]=e.referToSelf(h=>(m,v)=>a(m,v,h,!1)),l[c+", DenseMatrix"]=e.referToSelf(h=>(m,v)=>a(v,m,h,!0)),l["Array,"+c]=e.referToSelf(h=>(m,v)=>a(n(m),v,h,!1).valueOf()),l[c+", Array"]=e.referToSelf(h=>(m,v)=>a(n(v),m,h,!0).valueOf())));var d=s.sS!==void 0?s.sS:s.Ss;return o?(s.Ss&&(l["SparseMatrix,"+c]=(h,m)=>s.Ss(h,m,o,!1)),d&&(l[c+", SparseMatrix"]=(h,m)=>d(m,h,o,!0))):(s.Ss&&(l["SparseMatrix,"+c]=e.referToSelf(h=>(m,v)=>s.Ss(m,v,h,!1))),d&&(l[c+", SparseMatrix"]=e.referToSelf(h=>(m,v)=>d(v,m,h,!0)))),o&&o.signatures&&mU(l,o.signatures),l}}),E3="mod",QAe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],RV=ee(E3,QAe,t=>{var{typed:e,config:n,round:r,matrix:a,equalScalar:i,zeros:s,DenseMatrix:o,concat:u}=t,l=FV({typed:e,config:n,round:r,matrix:a,equalScalar:i,zeros:s,DenseMatrix:o}),c=Ms({typed:e,equalScalar:i}),f=Wa({typed:e}),d=jb({typed:e,equalScalar:i}),h=fa({typed:e,equalScalar:i}),m=Pr({typed:e,DenseMatrix:o}),v=Mn({typed:e,matrix:a,concat:u});return e(E3,{"number, number":y,"BigNumber, BigNumber":function(w,x){return x.isZero()?w:w.sub(x.mul(l(w.div(x))))},"bigint, bigint":function(w,x){if(x===0n)return w;if(w<0){var S=w%x;return S===0n?S:S+x}return w%x},"Fraction, Fraction":function(w,x){return x.equals(0)?w:w.sub(x.mul(l(w.div(x))))}},v({SS:d,DS:f,SD:c,Ss:h,sS:m}));function y(b,w){return w===0?b:b-w*l(b/w)}}),JAe="matAlgo01xDSid",eIe=["typed"],fl=ee(JAe,eIe,t=>{var{typed:e}=t;return function(r,a,i,s){var o=r._data,u=r._size,l=r._datatype||r.getDataType(),c=a._values,f=a._index,d=a._ptr,h=a._size,m=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==h.length)throw new Yt(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=u[0],y=u[1],b=typeof l=="string"&&l!=="mixed"&&l===m?l:void 0,w=b?e.find(i,[b,b]):i,x,S,C=[];for(x=0;x<v;x++)C[x]=[];var E=[],A=[];for(S=0;S<y;S++){for(var k=S+1,T=d[S],I=d[S+1],$=T;$<I;$++)x=f[$],E[x]=s?w(c[$],o[x][S]):w(o[x][S],c[$]),A[x]=k;for(x=0;x<v;x++)A[x]===k?C[x][S]=E[x]:C[x][S]=o[x][S]}return r.createDenseMatrix({data:C,size:[v,y],datatype:l===r._datatype&&m===a._datatype?b:void 0})}}),tIe="matAlgo04xSidSid",nIe=["typed","equalScalar"],PT=ee(tIe,nIe,t=>{var{typed:e,equalScalar:n}=t;return function(a,i,s){var o=a._values,u=a._index,l=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,h=i._index,m=i._ptr,v=i._size,y=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new Yt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var b=c[0],w=c[1],x,S=n,C=0,E=s;typeof f=="string"&&f===y&&f!=="mixed"&&(x=f,S=e.find(n,[x,x]),C=e.convert(0,x),E=e.find(s,[x,x]));var A=o&&d?[]:void 0,k=[],T=[],I=o&&d?[]:void 0,$=o&&d?[]:void 0,O=[],B=[],z,L,F,R,W;for(L=0;L<w;L++){T[L]=k.length;var M=L+1;for(R=l[L],W=l[L+1],F=R;F<W;F++)z=u[F],k.push(z),O[z]=M,I&&(I[z]=o[F]);for(R=m[L],W=m[L+1],F=R;F<W;F++)if(z=h[F],O[z]===M){if(I){var j=E(I[z],d[F]);S(j,C)?O[z]=null:I[z]=j}}else k.push(z),B[z]=M,$&&($[z]=d[F]);if(I&&$)for(F=T[L];F<k.length;)z=k[F],O[z]===M?(A[F]=I[z],F++):B[z]===M?(A[F]=$[z],F++):k.splice(F,1)}return T[w]=k.length,a.createSparseMatrix({values:A,index:k,ptr:T,size:[b,w],datatype:f===a._datatype&&y===i._datatype?x:void 0})}}),rIe="matAlgo10xSids",aIe=["typed","DenseMatrix"],$c=ee(rIe,aIe,t=>{var{typed:e,DenseMatrix:n}=t;return function(a,i,s,o){var u=a._values,l=a._index,c=a._ptr,f=a._size,d=a._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,y=s;typeof d=="string"&&(v=d,i=e.convert(i,v),y=e.find(s,[v,v]));for(var b=[],w=[],x=[],S=0;S<m;S++){for(var C=S+1,E=c[S],A=c[S+1],k=E;k<A;k++){var T=l[k];w[T]=u[k],x[T]=C}for(var I=0;I<h;I++)S===0&&(b[I]=[]),x[I]===C?b[I][S]=o?y(i,w[I]):y(w[I],i):b[I][S]=i}return new n({data:b,size:[h,m],datatype:v})}});function Ac(t,e,n,r){if(!(this instanceof Ac))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+n+(r!=null?"-"+r:"")+" expected)",this.stack=new Error().stack}Ac.prototype=new Error;Ac.prototype.constructor=Error;Ac.prototype.name="ArgumentsError";Ac.prototype.isArgumentsError=!0;var D3="gcd",iIe=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],L2="number | BigNumber | Fraction | Matrix | Array",sIe="".concat(L2,", ").concat(L2,", ...").concat(L2);function T3(t){return!t.some(e=>Array.isArray(e))}var oIe=ee(D3,iIe,t=>{var{typed:e,matrix:n,config:r,round:a,equalScalar:i,zeros:s,BigNumber:o,DenseMatrix:u,concat:l}=t,c=RV({typed:e,config:r,round:a,matrix:n,equalScalar:i,zeros:s,DenseMatrix:u,concat:l}),f=fl({typed:e}),d=PT({typed:e,equalScalar:i}),h=$c({typed:e,DenseMatrix:u}),m=Mn({typed:e,matrix:n,concat:l});return e(D3,{"number, number":v,"BigNumber, BigNumber":y,"Fraction, Fraction":(b,w)=>b.gcd(w)},m({SS:d,DS:f,Ss:h}),{[sIe]:e.referToSelf(b=>(w,x,S)=>{for(var C=b(w,x),E=0;E<S.length;E++)C=b(C,S[E]);return C}),Array:e.referToSelf(b=>w=>{if(w.length===1&&Array.isArray(w[0])&&T3(w[0]))return b(...w[0]);if(T3(w))return b(...w);throw new Ac("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(b=>w=>b(w.toArray()))});function v(b,w){if(!bt(b)||!bt(w))throw new Error("Parameters in function gcd must be integer numbers");for(var x;w!==0;)x=c(b,w),b=w,w=x;return b<0?-b:b}function y(b,w){if(!b.isInt()||!w.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var x=new o(0);!w.isZero();){var S=c(b,w);b=w,w=S}return b.lt(x)?b.neg():b}}),uIe="matAlgo06xS0S0",lIe=["typed","equalScalar"],Xb=ee(uIe,lIe,t=>{var{typed:e,equalScalar:n}=t;return function(a,i,s){var o=a._values,u=a._size,l=a._datatype||a._data===void 0?a._datatype:a.getDataType(),c=i._values,f=i._size,d=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==f.length)throw new Yt(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var h=u[0],m=u[1],v,y=n,b=0,w=s;typeof l=="string"&&l===d&&l!=="mixed"&&(v=l,y=e.find(n,[v,v]),b=e.convert(0,v),w=e.find(s,[v,v]));for(var x=o&&c?[]:void 0,S=[],C=[],E=x?[]:void 0,A=[],k=[],T=0;T<m;T++){C[T]=S.length;var I=T+1;if(ZO(a,T,A,E,k,I,S,w),ZO(i,T,A,E,k,I,S,w),E)for(var $=C[T];$<S.length;){var O=S[$];if(k[O]===I){var B=E[O];y(B,b)?S.splice($,1):(x.push(B),$++)}else S.splice($,1)}else for(var z=C[T];z<S.length;){var L=S[z];k[L]!==I?S.splice(z,1):z++}}return C[m]=S.length,a.createSparseMatrix({values:x,index:S,ptr:C,size:[h,m],datatype:l===a._datatype&&d===i._datatype?v:void 0})}}),$3="lcm",cIe=["typed","matrix","equalScalar","concat"],fIe=ee($3,cIe,t=>{var{typed:e,matrix:n,equalScalar:r,concat:a}=t,i=Ms({typed:e,equalScalar:r}),s=Xb({typed:e,equalScalar:r}),o=fa({typed:e,equalScalar:r}),u=Mn({typed:e,matrix:n,concat:a}),l="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(l,", ").concat(l,", ...").concat(l)]=e.referToSelf(d=>(h,m,v)=>{for(var y=d(h,m),b=0;b<v.length;b++)y=d(y,v[b]);return y}),e($3,{"number, number":QU,"BigNumber, BigNumber":f,"Fraction, Fraction":(d,h)=>d.lcm(h)},u({SS:s,DS:i,Ss:o}),c);function f(d,h){if(!d.isInt()||!h.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(h.isZero())return h;for(var m=d.times(h);!h.isZero();){var v=h;h=d.mod(v),d=v}return m.div(d).abs()}}),A3="log10",dIe=["typed","config","Complex"],pIe=ee(A3,dIe,t=>{var{typed:e,config:n,Complex:r}=t;return e(A3,{number:function(i){return i>=0||n.predictable?JU(i):new r(i,0).log().div(Math.LN10)},Complex:function(i){return new r(i).log().div(Math.LN10)},BigNumber:function(i){return!i.isNegative()||n.predictable?i.log():new r(i.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":e.referToSelf(a=>i=>zt(i,a))})}),I3="log2",hIe=["typed","config","Complex"],mIe=ee(I3,hIe,t=>{var{typed:e,config:n,Complex:r}=t;return e(I3,{number:function(s){return s>=0||n.predictable?eV(s):a(new r(s,0))},Complex:a,BigNumber:function(s){return!s.isNegative()||n.predictable?s.log(2):a(new r(s.toNumber(),0))},"Array | Matrix":e.referToSelf(i=>s=>zt(s,i))});function a(i){var s=Math.sqrt(i.re*i.re+i.im*i.im);return new r(Math.log2?Math.log2(s):Math.log(s)/Math.LN2,Math.atan2(i.im,i.re)/Math.LN2)}}),gIe="multiplyScalar",vIe=["typed"],yIe=ee(gIe,vIe,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":HU,"Complex, Complex":function(r,a){return r.mul(a)},"BigNumber, BigNumber":function(r,a){return r.times(a)},"bigint, bigint":function(r,a){return r*a},"Fraction, Fraction":function(r,a){return r.mul(a)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),k3="multiply",bIe=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],xIe=ee(k3,bIe,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:a,equalScalar:i,dot:s}=t,o=fa({typed:e,equalScalar:i}),u=Rs({typed:e});function l(C,E){switch(C.length){case 1:switch(E.length){case 1:if(C[0]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(C[0]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+C[0]+") must match Matrix rows ("+E[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+E.length+" dimensions)")}break;case 2:switch(E.length){case 1:if(C[1]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+C[1]+") must match Vector length ("+E[0]+")");break;case 2:if(C[1]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+C[1]+") must match Matrix B rows ("+E[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+E.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+C.length+" dimensions)")}}function c(C,E,A){if(A===0)throw new Error("Cannot multiply two empty vectors");return s(C,E)}function f(C,E){if(E.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(C,E)}function d(C,E){var A=C._data,k=C._size,T=C._datatype||C.getDataType(),I=E._data,$=E._size,O=E._datatype||E.getDataType(),B=k[0],z=$[1],L,F=r,R=a;T&&O&&T===O&&typeof T=="string"&&T!=="mixed"&&(L=T,F=e.find(r,[L,L]),R=e.find(a,[L,L]));for(var W=[],M=0;M<z;M++){for(var j=R(A[0],I[0][M]),q=1;q<B;q++)j=F(j,R(A[q],I[q][M]));W[M]=j}return C.createDenseMatrix({data:W,size:[z],datatype:T===C._datatype&&O===E._datatype?L:void 0})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":w}),m=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":y,"DenseMatrix, SparseMatrix":b,"SparseMatrix, DenseMatrix":x,"SparseMatrix, SparseMatrix":S});function v(C,E){var A=C._data,k=C._size,T=C._datatype||C.getDataType(),I=E._data,$=E._datatype||E.getDataType(),O=k[0],B=k[1],z,L=r,F=a;T&&$&&T===$&&typeof T=="string"&&T!=="mixed"&&(z=T,L=e.find(r,[z,z]),F=e.find(a,[z,z]));for(var R=[],W=0;W<O;W++){for(var M=A[W],j=F(M[0],I[0]),q=1;q<B;q++)j=L(j,F(M[q],I[q]));R[W]=j}return C.createDenseMatrix({data:R,size:[O],datatype:T===C._datatype&&$===E._datatype?z:void 0})}function y(C,E){var A=C._data,k=C._size,T=C._datatype||C.getDataType(),I=E._data,$=E._size,O=E._datatype||E.getDataType(),B=k[0],z=k[1],L=$[1],F,R=r,W=a;T&&O&&T===O&&typeof T=="string"&&T!=="mixed"&&T!=="mixed"&&(F=T,R=e.find(r,[F,F]),W=e.find(a,[F,F]));for(var M=[],j=0;j<B;j++){var q=A[j];M[j]=[];for(var H=0;H<L;H++){for(var G=W(q[0],I[0][H]),ne=1;ne<z;ne++)G=R(G,W(q[ne],I[ne][H]));M[j][H]=G}}return C.createDenseMatrix({data:M,size:[B,L],datatype:T===C._datatype&&O===E._datatype?F:void 0})}function b(C,E){var A=C._data,k=C._size,T=C._datatype||C.getDataType(),I=E._values,$=E._index,O=E._ptr,B=E._size,z=E._datatype||E._data===void 0?E._datatype:E.getDataType();if(!I)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var L=k[0],F=B[1],R,W=r,M=a,j=i,q=0;T&&z&&T===z&&typeof T=="string"&&T!=="mixed"&&(R=T,W=e.find(r,[R,R]),M=e.find(a,[R,R]),j=e.find(i,[R,R]),q=e.convert(0,R));for(var H=[],G=[],ne=[],ue=E.createSparseMatrix({values:H,index:G,ptr:ne,size:[L,F],datatype:T===C._datatype&&z===E._datatype?R:void 0}),te=0;te<F;te++){ne[te]=G.length;var se=O[te],J=O[te+1];if(J>se)for(var K=0,ae=0;ae<L;ae++){for(var pe=ae+1,he=void 0,Se=se;Se<J;Se++){var Ee=$[Se];K!==pe?(he=M(A[ae][Ee],I[Se]),K=pe):he=W(he,M(A[ae][Ee],I[Se]))}K===pe&&!j(he,q)&&(G.push(ae),H.push(he))}}return ne[F]=G.length,ue}function w(C,E){var A=C._values,k=C._index,T=C._ptr,I=C._datatype||C._data===void 0?C._datatype:C.getDataType();if(!A)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var $=E._data,O=E._datatype||E.getDataType(),B=C._size[0],z=E._size[0],L=[],F=[],R=[],W,M=r,j=a,q=i,H=0;I&&O&&I===O&&typeof I=="string"&&I!=="mixed"&&(W=I,M=e.find(r,[W,W]),j=e.find(a,[W,W]),q=e.find(i,[W,W]),H=e.convert(0,W));var G=[],ne=[];R[0]=0;for(var ue=0;ue<z;ue++){var te=$[ue];if(!q(te,H))for(var se=T[ue],J=T[ue+1],K=se;K<J;K++){var ae=k[K];ne[ae]?G[ae]=M(G[ae],j(te,A[K])):(ne[ae]=!0,F.push(ae),G[ae]=j(te,A[K]))}}for(var pe=F.length,he=0;he<pe;he++){var Se=F[he];L[he]=G[Se]}return R[1]=F.length,C.createSparseMatrix({values:L,index:F,ptr:R,size:[B,1],datatype:I===C._datatype&&O===E._datatype?W:void 0})}function x(C,E){var A=C._values,k=C._index,T=C._ptr,I=C._datatype||C._data===void 0?C._datatype:C.getDataType();if(!A)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var $=E._data,O=E._datatype||E.getDataType(),B=C._size[0],z=E._size[0],L=E._size[1],F,R=r,W=a,M=i,j=0;I&&O&&I===O&&typeof I=="string"&&I!=="mixed"&&(F=I,R=e.find(r,[F,F]),W=e.find(a,[F,F]),M=e.find(i,[F,F]),j=e.convert(0,F));for(var q=[],H=[],G=[],ne=C.createSparseMatrix({values:q,index:H,ptr:G,size:[B,L],datatype:I===C._datatype&&O===E._datatype?F:void 0}),ue=[],te=[],se=0;se<L;se++){G[se]=H.length;for(var J=se+1,K=0;K<z;K++){var ae=$[K][se];if(!M(ae,j))for(var pe=T[K],he=T[K+1],Se=pe;Se<he;Se++){var Ee=k[Se];te[Ee]!==J?(te[Ee]=J,H.push(Ee),ue[Ee]=W(ae,A[Se])):ue[Ee]=R(ue[Ee],W(ae,A[Se]))}}for(var Z=G[se],ie=H.length,ve=Z;ve<ie;ve++){var we=H[ve];q[ve]=ue[we]}}return G[L]=H.length,ne}function S(C,E){var A=C._values,k=C._index,T=C._ptr,I=C._datatype||C._data===void 0?C._datatype:C.getDataType(),$=E._values,O=E._index,B=E._ptr,z=E._datatype||E._data===void 0?E._datatype:E.getDataType(),L=C._size[0],F=E._size[1],R=A&&$,W,M=r,j=a;I&&z&&I===z&&typeof I=="string"&&I!=="mixed"&&(W=I,M=e.find(r,[W,W]),j=e.find(a,[W,W]));for(var q=R?[]:void 0,H=[],G=[],ne=C.createSparseMatrix({values:q,index:H,ptr:G,size:[L,F],datatype:I===C._datatype&&z===E._datatype?W:void 0}),ue=R?[]:void 0,te=[],se,J,K,ae,pe,he,Se,Ee,Z=0;Z<F;Z++){G[Z]=H.length;var ie=Z+1;for(pe=B[Z],he=B[Z+1],ae=pe;ae<he;ae++)if(Ee=O[ae],R)for(J=T[Ee],K=T[Ee+1],se=J;se<K;se++)Se=k[se],te[Se]!==ie?(te[Se]=ie,H.push(Se),ue[Se]=j($[ae],A[se])):ue[Se]=M(ue[Se],j($[ae],A[se]));else for(J=T[Ee],K=T[Ee+1],se=J;se<K;se++)Se=k[se],te[Se]!==ie&&(te[Se]=ie,H.push(Se));if(R)for(var ve=G[Z],we=H.length,Fe=ve;Fe<we;Fe++){var Re=H[Fe];q[Fe]=ue[Re]}}return G[F]=H.length,ne}return e(k3,a,{"Array, Array":e.referTo("Matrix, Matrix",C=>(E,A)=>{l(Mt(E),Mt(A));var k=C(n(E),n(A));return Tt(k)?k.valueOf():k}),"Matrix, Matrix":function(E,A){var k=E.size(),T=A.size();return l(k,T),k.length===1?T.length===1?c(E,A,k[0]):f(E,A):T.length===1?h(E,A):m(E,A)},"Matrix, Array":e.referTo("Matrix,Matrix",C=>(E,A)=>C(E,n(A))),"Array, Matrix":e.referToSelf(C=>(E,A)=>C(n(E,A.storage()),A)),"SparseMatrix, any":function(E,A){return o(E,A,a,!1)},"DenseMatrix, any":function(E,A){return u(E,A,a,!1)},"any, SparseMatrix":function(E,A){return o(A,E,a,!0)},"any, DenseMatrix":function(E,A){return u(A,E,a,!0)},"Array, any":function(E,A){return u(n(E),A,a,!1).valueOf()},"any, Array":function(E,A){return u(n(A),E,a,!0).valueOf()},"any, any":a,"any, any, ...any":e.referToSelf(C=>(E,A,k)=>{for(var T=C(E,A),I=0;I<k.length;I++)T=C(T,k[I]);return T})})}),_3="nthRoot",wIe=["typed","matrix","equalScalar","BigNumber","concat"],NIe=ee(_3,wIe,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:a,concat:i}=t,s=fl({typed:e}),o=Ms({typed:e,equalScalar:r}),u=Xb({typed:e,equalScalar:r}),l=fa({typed:e,equalScalar:r}),c=Mn({typed:e,matrix:n,concat:i});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(_3,{number:JO,"number, number":JO,BigNumber:h=>d(h,new a(2)),"BigNumber, BigNumber":d,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",h=>m=>h(n(m),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",h=>m=>h(m,2)),SparseMatrix:e.referTo("SparseMatrix,number",h=>m=>h(m,2)),"SparseMatrix, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return u(m,v,h);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return s(m,v,h,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",h=>(m,v)=>h(n(m),v)),"number | BigNumber, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return l(v,m,h,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:o,Ss:l,sS:!1}));function d(h,m){var v=a.precision,y=a.clone({precision:v+2}),b=new a(0),w=new y(1),x=m.isNegative();if(x&&(m=m.neg()),m.isZero())throw new Error("Root must be non-zero");if(h.isNegative()&&!m.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(h.isZero())return x?new y(1/0):0;if(!h.isFinite())return x?b:h;var S=h.abs().pow(w.div(m));return S=h.isNeg()?S.neg():S,new a((x?w.div(S):S).toPrecision(v))}}),O3="sign",SIe=["typed","BigNumber","Fraction","complex"],CIe=ee(O3,SIe,t=>{var{typed:e,BigNumber:n,complex:r,Fraction:a}=t;return e(O3,{number:US,Complex:function(s){return s.im===0?r(US(s.re)):s.sign()},BigNumber:function(s){return new n(s.cmp(0))},bigint:function(s){return s>0n?1n:s<0n?-1n:0n},Fraction:function(s){return new a(s.s)},"Array | Matrix":e.referToSelf(i=>s=>zt(s,i)),Unit:e.referToSelf(i=>s=>{if(!s._isDerived()&&s.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(i,s.valueType())(s.value)})})}),EIe="sqrt",DIe=["config","typed","Complex"],TIe=ee(EIe,DIe,t=>{var{config:e,typed:n,Complex:r}=t;return n("sqrt",{number:a,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||e.predictable?s.sqrt():a(s.toNumber())},Unit:function(s){return s.pow(.5)}});function a(i){return isNaN(i)?NaN:i>=0||e.predictable?Math.sqrt(i):new r(i,0).sqrt()}}),F3="square",$Ie=["typed"],AIe=ee(F3,$Ie,t=>{var{typed:e}=t;return e(F3,{number:tV,Complex:function(r){return r.mul(r)},BigNumber:function(r){return r.times(r)},bigint:function(r){return r*r},Fraction:function(r){return r.mul(r)},Unit:function(r){return r.pow(2)}})}),R3="subtract",IIe=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],kIe=ee(R3,IIe,t=>{var{typed:e,matrix:n,equalScalar:r,subtractScalar:a,unaryMinus:i,DenseMatrix:s,concat:o}=t,u=fl({typed:e}),l=Wa({typed:e}),c=jb({typed:e,equalScalar:r}),f=$c({typed:e,DenseMatrix:s}),d=Pr({typed:e,DenseMatrix:s}),h=Mn({typed:e,matrix:n,concat:o});return e(R3,{"any, any":a},h({elop:a,SS:c,DS:u,SD:l,Ss:d,sS:f}))}),M3="xgcd",_Ie=["typed","config","matrix","BigNumber"],OIe=ee(M3,_Ie,t=>{var{typed:e,config:n,matrix:r,BigNumber:a}=t;return e(M3,{"number, number":function(o,u){var l=nV(o,u);return n.matrix==="Array"?l:r(l)},"BigNumber, BigNumber":i});function i(s,o){var u,l,c,f=new a(0),d=new a(1),h=f,m=d,v=d,y=f;if(!s.isInt()||!o.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!o.isZero();)l=s.div(o).floor(),c=s.mod(o),u=h,h=m.minus(l.times(h)),m=u,u=v,v=y.minus(l.times(v)),y=u,s=o,o=c;var b;return s.lt(f)?b=[s.neg(),m.neg(),y.neg()]:b=[s,s.isZero()?0:m,y],n.matrix==="Array"?b:r(b)}}),P3="invmod",FIe=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],RIe=ee(P3,FIe,t=>{var{typed:e,config:n,BigNumber:r,xgcd:a,equal:i,smaller:s,mod:o,add:u,isInteger:l}=t;return e(P3,{"number, number":c,"BigNumber, BigNumber":c});function c(f,d){if(!l(f)||!l(d))throw new Error("Parameters in function invmod must be integer numbers");if(f=o(f,d),i(d,0))throw new Error("Divisor must be non zero");var h=a(f,d);h=h.valueOf();var[m,v]=h;return i(m,r(1))?(v=o(v,d),s(v,r(0))&&(v=u(v,d)),v):NaN}}),MIe="matAlgo09xS0Sf",PIe=["typed","equalScalar"],MV=ee(MIe,PIe,t=>{var{typed:e,equalScalar:n}=t;return function(a,i,s){var o=a._values,u=a._index,l=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,h=i._index,m=i._ptr,v=i._size,y=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new Yt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var b=c[0],w=c[1],x,S=n,C=0,E=s;typeof f=="string"&&f===y&&f!=="mixed"&&(x=f,S=e.find(n,[x,x]),C=e.convert(0,x),E=e.find(s,[x,x]));var A=o&&d?[]:void 0,k=[],T=[],I=A?[]:void 0,$=[],O,B,z,L,F;for(B=0;B<w;B++){T[B]=k.length;var R=B+1;if(I)for(L=m[B],F=m[B+1],z=L;z<F;z++)O=h[z],$[O]=R,I[O]=d[z];for(L=l[B],F=l[B+1],z=L;z<F;z++)if(O=u[z],I){var W=$[O]===R?I[O]:C,M=E(o[z],W);S(M,C)||(k.push(O),A.push(M))}else k.push(O)}return T[w]=k.length,a.createSparseMatrix({values:A,index:k,ptr:T,size:[b,w],datatype:f===a._datatype&&y===i._datatype?x:void 0})}}),B3="dotMultiply",BIe=["typed","matrix","equalScalar","multiplyScalar","concat"],LIe=ee(B3,BIe,t=>{var{typed:e,matrix:n,equalScalar:r,multiplyScalar:a,concat:i}=t,s=Ms({typed:e,equalScalar:r}),o=MV({typed:e,equalScalar:r}),u=fa({typed:e,equalScalar:r}),l=Mn({typed:e,matrix:n,concat:i});return e(B3,l({elop:a,SS:o,DS:s,Ss:u}))});function zIe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new n(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new n(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new n(0):t}return BT(t,e,function(r,a){return r&a})}function Sh(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,n=e.precision;e.config({precision:1e9});var r=t.plus(new e(1));return r.s=-r.s||null,e.config({precision:n}),r}function UIe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);var r=new n(-1);return t.isZero()||e.eq(r)||t.eq(e)?e:e.isZero()||t.eq(r)?t:!t.isFinite()||!e.isFinite()?!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?r:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t:BT(t,e,function(a,i){return a|i})}function BT(t,e,n){var r=t.constructor,a,i,s=+(t.s<0),o=+(e.s<0);if(s){a=Yv(Sh(t));for(var u=0;u<a.length;++u)a[u]^=1}else a=Yv(t);if(o){i=Yv(Sh(e));for(var l=0;l<i.length;++l)i[l]^=1}else i=Yv(e);var c,f,d;a.length<=i.length?(c=a,f=i,d=s):(c=i,f=a,d=o);var h=c.length,m=f.length,v=n(s,o)^1,y=new r(v^1),b=new r(1),w=new r(2),x=r.precision;for(r.config({precision:1e9});h>0;)n(c[--h],f[--m])===v&&(y=y.plus(b)),b=b.times(w);for(;m>0;)n(d,f[--m])===v&&(y=y.plus(b)),b=b.times(w);return r.config({precision:x}),v===0&&(y.s=-y.s),y}function Yv(t){for(var e=t.d,n=e[0]+"",r=1;r<e.length;++r){for(var a=e[r]+"",i=7-a.length;i--;)a="0"+a;n+=a}for(var s=n.length;n.charAt(s)==="0";)s--;var o=t.e,u=n.slice(0,s+1||1),l=u.length;if(o>0)if(++o>l)for(o-=l;o--;)u+="0";else o<l&&(u=u.slice(0,o)+"."+u.slice(o));for(var c=[0],f=0;f<u.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(u.charAt(f++));for(var h=0;h<c.length;++h)c[h]>1&&((c[h+1]===null||c[h+1]===void 0)&&(c[h+1]=0),c[h+1]+=c[h]>>1,c[h]&=1)}return c.reverse()}function VIe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new n(0);var r=new n(-1);return t.eq(r)?Sh(e):e.eq(r)?Sh(t):!t.isFinite()||!e.isFinite()?!t.isFinite()&&!e.isFinite()?r:new n(t.isNegative()===e.isNegative()?1/0:-1/0):BT(t,e,function(a,i){return a^i})}function WIe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:!t.isFinite()&&!e.isFinite()?new n(NaN):e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new n(2).pow(e))}function qIe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new n(2).pow(e)).floor():t.isNegative()?new n(-1):t.isFinite()?new n(0):new n(NaN)}var L3="bitAnd",GIe=["typed","matrix","equalScalar","concat"],PV=ee(L3,GIe,t=>{var{typed:e,matrix:n,equalScalar:r,concat:a}=t,i=Ms({typed:e,equalScalar:r}),s=Xb({typed:e,equalScalar:r}),o=fa({typed:e,equalScalar:r}),u=Mn({typed:e,matrix:n,concat:a});return e(L3,{"number, number":aV,"BigNumber, BigNumber":zIe,"bigint, bigint":(l,c)=>l&c},u({SS:s,DS:i,Ss:o}))}),z3="bitNot",HIe=["typed"],jIe=ee(z3,HIe,t=>{var{typed:e}=t;return e(z3,{number:iV,BigNumber:Sh,bigint:n=>~n,"Array | Matrix":e.referToSelf(n=>r=>zt(r,n))})}),U3="bitOr",XIe=["typed","matrix","equalScalar","DenseMatrix","concat"],BV=ee(U3,XIe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:i}=t,s=fl({typed:e}),o=PT({typed:e,equalScalar:r}),u=$c({typed:e,DenseMatrix:a}),l=Mn({typed:e,matrix:n,concat:i});return e(U3,{"number, number":sV,"BigNumber, BigNumber":UIe,"bigint, bigint":(c,f)=>c|f},l({SS:o,DS:s,Ss:u}))}),KIe="matAlgo07xSSf",YIe=["typed","SparseMatrix"],po=ee(KIe,YIe,t=>{var{typed:e,SparseMatrix:n}=t;return function(i,s,o){var u=i._size,l=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=s._size,f=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(u.length!==c.length)throw new Yt(u.length,c.length);if(u[0]!==c[0]||u[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+c+")");var d=u[0],h=u[1],m,v=0,y=o;typeof l=="string"&&l===f&&l!=="mixed"&&(m=l,v=e.convert(0,m),y=e.find(o,[m,m]));for(var b=[],w=[],x=new Array(h+1).fill(0),S=[],C=[],E=[],A=[],k=0;k<h;k++){var T=k+1,I=0;r(i,k,E,S,T),r(s,k,A,C,T);for(var $=0;$<d;$++){var O=E[$]===T?S[$]:v,B=A[$]===T?C[$]:v,z=y(O,B);z!==0&&z!==!1&&(w.push($),b.push(z),I++)}x[k+1]=x[k]+I}return new n({values:b,index:w,ptr:x,size:[d,h],datatype:l===i._datatype&&f===s._datatype?m:void 0})};function r(a,i,s,o,u){for(var l=a._values,c=a._index,f=a._ptr,d=f[i],h=f[i+1];d<h;d++){var m=c[d];s[m]=u,o[m]=l[d]}}}),V3="bitXor",ZIe=["typed","matrix","DenseMatrix","concat","SparseMatrix"],QIe=ee(V3,ZIe,t=>{var{typed:e,matrix:n,DenseMatrix:r,concat:a,SparseMatrix:i}=t,s=Wa({typed:e}),o=po({typed:e,SparseMatrix:i}),u=Pr({typed:e,DenseMatrix:r}),l=Mn({typed:e,matrix:n,concat:a});return e(V3,{"number, number":oV,"BigNumber, BigNumber":VIe,"bigint, bigint":(c,f)=>c^f},l({SS:o,DS:s,Ss:u}))}),W3="arg",JIe=["typed"],eke=ee(W3,JIe,t=>{var{typed:e}=t;return e(W3,{number:function(r){return Math.atan2(0,r)},BigNumber:function(r){return r.constructor.atan2(0,r)},Complex:function(r){return r.arg()},"Array | Matrix":e.referToSelf(n=>r=>zt(r,n))})}),q3="conj",tke=["typed"],nke=ee(q3,tke,t=>{var{typed:e}=t;return e(q3,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":e.referToSelf(n=>r=>zt(r,n))})}),G3="im",rke=["typed"],ake=ee(G3,rke,t=>{var{typed:e}=t;return e(G3,{number:()=>0,"BigNumber | Fraction":n=>n.mul(0),Complex:n=>n.im,"Array | Matrix":e.referToSelf(n=>r=>zt(r,n))})}),H3="re",ike=["typed"],ske=ee(H3,ike,t=>{var{typed:e}=t;return e(H3,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.re,"Array | Matrix":e.referToSelf(n=>r=>zt(r,n))})}),j3="not",oke=["typed"],uke=ee(j3,oke,t=>{var{typed:e}=t;return e(j3,{"null | undefined":()=>!0,number:dV,Complex:function(r){return r.re===0&&r.im===0},BigNumber:function(r){return r.isZero()||r.isNaN()},bigint:n=>!n,Unit:e.referToSelf(n=>r=>e.find(n,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(n=>r=>zt(r,n))})}),X3="or",lke=["typed","matrix","equalScalar","DenseMatrix","concat"],LV=ee(X3,lke,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:i}=t,s=Wa({typed:e}),o=jb({typed:e,equalScalar:r}),u=Pr({typed:e,DenseMatrix:a}),l=Mn({typed:e,matrix:n,concat:i});return e(X3,{"number, number":VS,"Complex, Complex":function(f,d){return f.re!==0||f.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(f,d){return!f.isZero()&&!f.isNaN()||!d.isZero()&&!d.isNaN()},"bigint, bigint":VS,"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},l({SS:o,DS:s,Ss:u}))}),K3="xor",cke=["typed","matrix","DenseMatrix","concat","SparseMatrix"],fke=ee(K3,cke,t=>{var{typed:e,matrix:n,DenseMatrix:r,concat:a,SparseMatrix:i}=t,s=Wa({typed:e}),o=po({typed:e,SparseMatrix:i}),u=Pr({typed:e,DenseMatrix:r}),l=Mn({typed:e,matrix:n,concat:a});return e(K3,{"number, number":WS,"Complex, Complex":function(f,d){return(f.re!==0||f.im!==0)!=(d.re!==0||d.im!==0)},"bigint, bigint":WS,"BigNumber, BigNumber":function(f,d){return(!f.isZero()&&!f.isNaN())!=(!d.isZero()&&!d.isNaN())},"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},l({SS:o,DS:s,Ss:u}))}),Y3="concat",dke=["typed","matrix","isInteger"],zV=ee(Y3,dke,t=>{var{typed:e,matrix:n,isInteger:r}=t;return e(Y3,{"...Array | Matrix | number | BigNumber":function(i){var s,o=i.length,u=-1,l,c=!1,f=[];for(s=0;s<o;s++){var d=i[s];if(Tt(d)&&(c=!0),Vt(d)||qt(d)){if(s!==o-1)throw new Error("Dimension must be specified as last argument");if(l=u,u=d.valueOf(),!r(u))throw new TypeError("Integer number expected for dimension");if(u<0||s>0&&u>l)throw new Os(u,l+1)}else{var h=Bt(d).valueOf(),m=Mt(h);if(f[s]=h,l=u,u=m.length-1,s>0&&u!==l)throw new Yt(l+1,u+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var v=f.shift();f.length;)v=zU(v,f.shift(),u);return c?n(v):v},"...string":function(i){return i.join("")}})}),Z3="column",pke=["typed","Index","matrix","range"],UV=ee(Z3,pke,t=>{var{typed:e,Index:n,matrix:r,range:a}=t;return e(Z3,{"Matrix, number":i,"Array, number":function(o,u){return i(r(Bt(o)),u).valueOf()}});function i(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");_n(o,s.size()[1]);var u=a(0,s.size()[0]),l=new n(u,o),c=s.subset(l);return Tt(c)?c:r([[c]])}}),Q3="count",hke=["typed","size","prod"],mke=ee(Q3,hke,t=>{var{typed:e,size:n,prod:r}=t;return e(Q3,{string:function(i){return i.length},"Matrix | Array":function(i){return r(n(i))}})}),J3="cross",gke=["typed","matrix","subtract","multiply"],vke=ee(J3,gke,t=>{var{typed:e,matrix:n,subtract:r,multiply:a}=t;return e(J3,{"Matrix, Matrix":function(o,u){return n(i(o.toArray(),u.toArray()))},"Matrix, Array":function(o,u){return n(i(o.toArray(),u))},"Array, Matrix":function(o,u){return n(i(o,u.toArray()))},"Array, Array":i});function i(s,o){var u=Math.max(Mt(s).length,Mt(o).length);s=C0(s),o=C0(o);var l=Mt(s),c=Mt(o);if(l.length!==1||c.length!==1||l[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+l.join(", ")+"], B = ["+c.join(", ")+"])");var f=[r(a(s[1],o[2]),a(s[2],o[1])),r(a(s[2],o[0]),a(s[0],o[2])),r(a(s[0],o[1]),a(s[1],o[0]))];return u>1?[f]:f}}),eF="diag",yke=["typed","matrix","DenseMatrix","SparseMatrix"],bke=ee(eF,yke,t=>{var{typed:e,matrix:n,DenseMatrix:r,SparseMatrix:a}=t;return e(eF,{Array:function(l){return i(l,0,Mt(l),null)},"Array, number":function(l,c){return i(l,c,Mt(l),null)},"Array, BigNumber":function(l,c){return i(l,c.toNumber(),Mt(l),null)},"Array, string":function(l,c){return i(l,0,Mt(l),c)},"Array, number, string":function(l,c,f){return i(l,c,Mt(l),f)},"Array, BigNumber, string":function(l,c,f){return i(l,c.toNumber(),Mt(l),f)},Matrix:function(l){return i(l,0,l.size(),l.storage())},"Matrix, number":function(l,c){return i(l,c,l.size(),l.storage())},"Matrix, BigNumber":function(l,c){return i(l,c.toNumber(),l.size(),l.storage())},"Matrix, string":function(l,c){return i(l,0,l.size(),c)},"Matrix, number, string":function(l,c,f){return i(l,c,l.size(),f)},"Matrix, BigNumber, string":function(l,c,f){return i(l,c.toNumber(),l.size(),f)}});function i(u,l,c,f){if(!bt(l))throw new TypeError("Second parameter in function diag must be an integer");var d=l>0?l:0,h=l<0?-l:0;switch(c.length){case 1:return s(u,l,f,c[0],h,d);case 2:return o(u,l,f,c,h,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function s(u,l,c,f,d,h){var m=[f+d,f+h];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var v=c==="sparse"?a.diagonal(m,u,l):r.diagonal(m,u,l);return c!==null?v:v.valueOf()}function o(u,l,c,f,d,h){if(Tt(u)){var m=u.diagonal(l);return c!==null?c!==m.storage()?n(m,c):m:m.valueOf()}for(var v=Math.min(f[0]-d,f[1]-h),y=[],b=0;b<v;b++)y[b]=u[b+d][b+h];return c!==null?n(y):y}}),xke="filter",wke=["typed"],VV=ee(xke,wke,t=>{var{typed:e}=t;return e("filter",{"Array, function":tF,"Matrix, function":function(r,a){return r.create(tF(r.valueOf(),a),r.datatype())},"Array, RegExp":jO,"Matrix, RegExp":function(r,a){return r.create(jO(r.valueOf(),a),r.datatype())}})});function tF(t,e){var n=mc(e,t,"filter");return VTe(t,function(r,a,i){return n(r,[a],i)})}var nF="flatten",Nke=["typed"],Ske=ee(nF,Nke,t=>{var{typed:e}=t;return e(nF,{Array:function(r){return hn(r)},Matrix:function(r){return r.create(hn(r.toArray()),r.datatype())}})}),XS="forEach",Cke=["typed"],WV=ee(XS,Cke,t=>{var{typed:e}=t;return e(XS,{"Array, function":Eke,"Matrix, function":function(r,a){r.forEach(a)}})});function Eke(t,e){OT(t,[],t,mc(e,t,XS))}var rF="getMatrixDataType",Dke=["typed"],Tke=ee(rF,Dke,t=>{var{typed:e}=t;return e(rF,{Array:function(r){return Gb(r,Rn)},Matrix:function(r){return r.getDataType()}})}),aF="identity",$ke=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Ake=ee(aF,$ke,t=>{var{typed:e,config:n,matrix:r,BigNumber:a,DenseMatrix:i,SparseMatrix:s}=t;return e(aF,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return u(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return o(c)},"Array, string":function(c,f){return o(c,f)},Matrix:function(c){return o(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return o(c.valueOf(),f)}});function o(l,c){switch(l.length){case 0:return c?r(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var d=qt(l)||qt(c)?a:null;if(qt(l)&&(l=l.toNumber()),qt(c)&&(c=c.toNumber()),!bt(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!bt(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new a(1):1,m=d?new d(0):0,v=[l,c];if(f){if(f==="sparse")return s.diagonal(v,h,0,m);if(f==="dense")return i.diagonal(v,h,0,m);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var y=od([],v,m),b=l<c?l:c,w=0;w<b;w++)y[w][w]=h;return y}}),iF="kron",Ike=["typed","matrix","multiplyScalar"],kke=ee(iF,Ike,t=>{var{typed:e,matrix:n,multiplyScalar:r}=t;return e(iF,{"Matrix, Matrix":function(s,o){return n(a(s.toArray(),o.toArray()))},"Matrix, Array":function(s,o){return n(a(s.toArray(),o))},"Array, Matrix":function(s,o){return n(a(s,o.toArray()))},"Array, Array":a});function a(i,s){if(Mt(i).length===1&&(i=[i]),Mt(s).length===1&&(s=[s]),Mt(i).length>2||Mt(s).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(i.length)+", y = "+JSON.stringify(s.length)+")");var o=[],u=[];return i.map(function(l){return s.map(function(c){return u=[],o.push(u),l.map(function(f){return c.map(function(d){return u.push(r(f,d))})})})})&&o}}),z2="map",_ke=["typed"],qV=ee(z2,_ke,t=>{var{typed:e}=t;return e(z2,{"Array, function":r,"Matrix, function":function(i,s){return i.map(s)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(a,i,s)=>n([a,i,...s.slice(0,s.length-1)],s[s.length-1])});function n(a,i){if(typeof i!="function")throw new Error("Last argument must be a callback function");var s=a[0].isMatrix,o=kT(...a.map(S=>S.isMatrix?S.size():Mt(S))),u=s?(S,C)=>S.get(C):_T,l=s?a.map(S=>S.isMatrix?S.create(Kl(S.toArray(),o),S.datatype()):a[0].create(Kl(S.valueOf(),o))):a.map(S=>S.isMatrix?Kl(S.toArray(),o):Kl(S,o)),c;if(e.isTypedFunction(i)){var f=o.map(()=>0),d=l.map(S=>u(S,f)),h=x(i,d,f,l);c=b(h)}else{var m=a.length,v=w(i,m);c=b(v)}var y=(S,C)=>c([S,...l.slice(1).map(E=>u(E,C))],C);if(s)return l[0].map(y);return r(l[0],y);function b(S){switch(S){case 0:return C=>i(...C);case 1:return(C,E)=>i(...C,E);case 2:return(C,E)=>i(...C,E,...l)}}function w(S,C){return S.length>C+1?2:S.length===C+1?1:0}function x(S,C,E,A){return e.resolve(S,[...C,E,...A])!==null?2:e.resolve(S,[...C,E])!==null?1:(e.resolve(S,C)!==null,0)}}function r(a,i){return OT(a,[],a,mc(i,a,z2))}}),sF="diff",Oke=["typed","matrix","subtract","number"],GV=ee(sF,Oke,t=>{var{typed:e,matrix:n,subtract:r,number:a}=t;return e(sF,{"Array | Matrix":function(c){return Tt(c)?n(s(c.toArray())):s(c)},"Array | Matrix, number":function(c,f){if(!bt(f))throw new RangeError("Dimension must be a whole number");return Tt(c)?n(i(c.toArray(),f)):i(c,f)},"Array, BigNumber":e.referTo("Array,number",l=>(c,f)=>l(c,a(f))),"Matrix, BigNumber":e.referTo("Matrix,number",l=>(c,f)=>l(c,a(f)))});function i(l,c){if(Tt(l)&&(l=l.toArray()),!Array.isArray(l))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return l.forEach(d=>{f.push(i(d,c-1))}),f}else{if(c===0)return s(l);throw RangeError("Cannot have negative dimension")}}function s(l){for(var c=[],f=l.length,d=1;d<f;d++)c.push(o(l[d-1],l[d]));return c}function o(l,c){Tt(l)&&(l=l.toArray()),Tt(c)&&(c=c.toArray());var f=Array.isArray(l),d=Array.isArray(c);if(f&&d)return u(l,c);if(!f&&!d)return r(c,l);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function u(l,c){if(l.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],d=l.length,h=0;h<d;h++)f.push(o(l[h],c[h]));return f}}),Fke="ones",Rke=["typed","config","matrix","BigNumber"],Mke=ee(Fke,Rke,t=>{var{typed:e,config:n,matrix:r,BigNumber:a}=t;return e("ones",{"":function(){return n.matrix==="Array"?i([]):i([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return i(l,f)}else return n.matrix==="Array"?i(l):i(l,"default")},Array:i,Matrix:function(l){var c=l.storage();return i(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return i(l.valueOf(),c)}});function i(u,l){var c=s(u),f=c?new a(1):1;if(o(u),l){var d=r(l);return u.length>0?d.resize(u,f):d}else{var h=[];return u.length>0?od(h,u,f):h}}function s(u){var l=!1;return u.forEach(function(c,f,d){qt(c)&&(l=!0,d[f]=c.toNumber())}),l}function o(u){u.forEach(function(l){if(typeof l!="number"||!bt(l)||l<0)throw new Error("Parameters in function ones must be positive integers")})}});function LT(){throw new Error('No "bignumber" implementation available')}function HV(){throw new Error('No "fraction" implementation available')}function jV(){throw new Error('No "matrix" implementation available')}var oF="range",Pke=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],XV=ee(oF,Pke,t=>{var{typed:e,config:n,matrix:r,bignumber:a,smaller:i,smallerEq:s,larger:o,largerEq:u,add:l,isPositive:c}=t;return e(oF,{string:d,"string, boolean":d,"number, number":function(y,b){return f(h(y,b,1,!1))},"number, number, number":function(y,b,w){return f(h(y,b,w,!1))},"number, number, boolean":function(y,b,w){return f(h(y,b,1,w))},"number, number, number, boolean":function(y,b,w,x){return f(h(y,b,w,x))},"BigNumber, BigNumber":function(y,b){var w=y.constructor;return f(h(y,b,new w(1),!1))},"BigNumber, BigNumber, BigNumber":function(y,b,w){return f(h(y,b,w,!1))},"BigNumber, BigNumber, boolean":function(y,b,w){var x=y.constructor;return f(h(y,b,new x(1),w))},"BigNumber, BigNumber, BigNumber, boolean":function(y,b,w,x){return f(h(y,b,w,x))},"Unit, Unit, Unit":function(y,b,w){return f(h(y,b,w,!1))},"Unit, Unit, Unit, boolean":function(y,b,w,x){return f(h(y,b,w,x))}});function f(v){return n.matrix==="Matrix"?r?r(v):jV():v}function d(v,y){var b=m(v);if(!b)throw new SyntaxError('String "'+v+'" is no valid range');return n.number==="BigNumber"?(a===void 0&&LT(),f(h(a(b.start),a(b.end),a(b.step)))):f(h(b.start,b.end,b.step,y))}function h(v,y,b,w){for(var x=[],S=c(b)?w?s:i:w?u:o,C=v;S(C,y);)x.push(C),C=l(C,b);return x}function m(v){var y=v.split(":"),b=y.map(function(x){return Number(x)}),w=b.some(function(x){return isNaN(x)});if(w)return null;switch(b.length){case 2:return{start:b[0],end:b[1],step:1};case 3:return{start:b[0],end:b[2],step:b[1]};default:return null}}}),uF="reshape",Bke=["typed","isInteger","matrix"],Lke=ee(uF,Bke,t=>{var{typed:e,isInteger:n}=t;return e(uF,{"Matrix, Array":function(a,i){return a.reshape(i,!0)},"Array, Array":function(a,i){return i.forEach(function(s){if(!n(s))throw new TypeError("Invalid size for dimension: "+s)}),AT(a,i)}})}),zke="resize",Uke=["config","matrix"],Vke=ee(zke,Uke,t=>{var{config:e,matrix:n}=t;return function(i,s,o){if(arguments.length!==2&&arguments.length!==3)throw new Ac("resize",arguments.length,2,3);if(Tt(s)&&(s=s.valueOf()),qt(s[0])&&(s=s.map(function(c){return qt(c)?c.toNumber():c})),Tt(i))return i.resize(s,o,!0);if(typeof i=="string")return r(i,s,o);var u=Array.isArray(i)?!1:e.matrix!=="Array";if(s.length===0){for(;Array.isArray(i);)i=i[0];return Bt(i)}else{Array.isArray(i)||(i=[i]),i=Bt(i);var l=od(i,s,o);return u?n(l):l}};function r(a,i,s){if(s!==void 0){if(typeof s!="string"||s.length!==1)throw new TypeError("Single character expected as defaultValue")}else s=" ";if(i.length!==1)throw new Yt(i.length,1);var o=i[0];if(typeof o!="number"||!bt(o))throw new TypeError("Invalid size, must contain positive integers (size: "+Xt(i)+")");if(a.length>o)return a.substring(0,o);if(a.length<o){for(var u=a,l=0,c=o-a.length;l<c;l++)u+=s;return u}else return a}}),lF="rotate",Wke=["typed","multiply","rotationMatrix"],qke=ee(lF,Wke,t=>{var{typed:e,multiply:n,rotationMatrix:r}=t;return e(lF,{"Array , number | BigNumber | Complex | Unit":function(s,o){a(s,2);var u=n(r(o),s);return u.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(s,o){return a(s,2),n(r(o),s)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,u){a(s,3);var l=n(r(o,u),s);return l},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,u){return a(s,3),n(r(o,u),s)}});function a(i,s){var o=Array.isArray(i)?Mt(i):i.size();if(o.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o.length===2&&o[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o[0]!==s)throw new RangeError("Vector must be of dimensions 1x".concat(s))}}),cF="rotationMatrix",Gke=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],Hke=ee(cF,Gke,t=>{var{typed:e,config:n,multiplyScalar:r,addScalar:a,unaryMinus:i,norm:s,BigNumber:o,matrix:u,DenseMatrix:l,SparseMatrix:c,cos:f,sin:d}=t;return e(cF,{"":function(){return n.matrix==="Matrix"?u([]):[]},string:function(x){return u(x)},"number | BigNumber | Complex | Unit":function(x){return h(x,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(x,S){return h(x,S)},"number | BigNumber | Complex | Unit, Array":function(x,S){var C=u(S);return m(C),b(x,C,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(x,S){m(S);var C=S.storage()||(n.matrix==="Matrix"?"dense":void 0);return b(x,S,C)},"number | BigNumber | Complex | Unit, Array, string":function(x,S,C){var E=u(S);return m(E),b(x,E,C)},"number | BigNumber | Complex | Unit, Matrix, string":function(x,S,C){return m(S),b(x,S,C)}});function h(w,x){var S=qt(w),C=S?new o(-1):-1,E=f(w),A=d(w),k=[[E,r(C,A)],[A,E]];return y(k,x)}function m(w){var x=w.size();if(x.length<1||x[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function v(w){return w.reduce((x,S)=>r(x,S))}function y(w,x){if(x){if(x==="sparse")return new c(w);if(x==="dense")return new l(w);throw new TypeError('Unknown matrix type "'.concat(x,'"'))}return w}function b(w,x,S){var C=s(x);if(C===0)throw new RangeError("Rotation around zero vector");var E=qt(w)?o:null,A=E?new E(1):1,k=E?new E(-1):-1,T=E?new E(x.get([0])/C):x.get([0])/C,I=E?new E(x.get([1])/C):x.get([1])/C,$=E?new E(x.get([2])/C):x.get([2])/C,O=f(w),B=a(A,i(O)),z=d(w),L=a(O,v([T,T,B])),F=a(v([T,I,B]),v([k,$,z])),R=a(v([T,$,B]),v([I,z])),W=a(v([T,I,B]),v([$,z])),M=a(O,v([I,I,B])),j=a(v([I,$,B]),v([k,T,z])),q=a(v([T,$,B]),v([k,I,z])),H=a(v([I,$,B]),v([T,z])),G=a(O,v([$,$,B])),ne=[[L,F,R],[W,M,j],[q,H,G]];return y(ne,S)}}),fF="row",jke=["typed","Index","matrix","range"],KV=ee(fF,jke,t=>{var{typed:e,Index:n,matrix:r,range:a}=t;return e(fF,{"Matrix, number":i,"Array, number":function(o,u){return i(r(Bt(o)),u).valueOf()}});function i(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");_n(o,s.size()[0]);var u=a(0,s.size()[1]),l=new n(o,u),c=s.subset(l);return Tt(c)?c:r([[c]])}}),dF="size",Xke=["typed","config","?matrix"],Kke=ee(dF,Xke,t=>{var{typed:e,config:n,matrix:r}=t;return e(dF,{Matrix:function(i){return i.create(i.size(),"number")},Array:Mt,string:function(i){return n.matrix==="Array"?[i.length]:r([i.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(i){return n.matrix==="Array"?[]:r?r([],"dense","number"):jV()}})}),pF="squeeze",Yke=["typed"],Zke=ee(pF,Yke,t=>{var{typed:e}=t;return e(pF,{Array:function(r){return C0(Bt(r))},Matrix:function(r){var a=C0(r.toArray());return Array.isArray(a)?r.create(a,r.datatype()):a},any:function(r){return Bt(r)}})}),hF="subset",Qke=["typed","matrix","zeros","add"],YV=ee(hF,Qke,t=>{var{typed:e,matrix:n,zeros:r,add:a}=t;return e(hF,{"Matrix, Index":function(o,u){return sd(u)?n():(S0(o,u),o.subset(u))},"Array, Index":e.referTo("Matrix, Index",function(s){return function(o,u){var l=s(n(o),u);return u.isScalar()?l:l.valueOf()}}),"Object, Index":e_e,"string, Index":Jke,"Matrix, Index, any, any":function(o,u,l,c){return sd(u)?o:(S0(o,u),o.clone().subset(u,i(l,u),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,u,l,c){var f=s(n(o),u,l,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,u,l){return s(n(o),u,l,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,u,l){return s(o,u,l,void 0)}}),"string, Index, string":mF,"string, Index, string, string":mF,"Object, Index, any":t_e});function i(s,o){if(typeof s=="string")throw new Error("can't boradcast a string");if(o._isScalar)return s;var u=o.size();if(u.every(l=>l>0))try{return a(s,r(u))}catch{return s}else return s}});function Jke(t,e){if(!Bb(e))throw new TypeError("Index expected");if(sd(e))return"";if(S0(Array.from(t),e),e.size().length!==1)throw new Yt(e.size().length,1);var n=t.length;_n(e.min()[0],n),_n(e.max()[0],n);var r=e.dimension(0),a="";return r.forEach(function(i){a+=t.charAt(i)}),a}function mF(t,e,n,r){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(sd(e))return t;if(S0(Array.from(t),e),e.size().length!==1)throw new Yt(e.size().length,1);if(r!==void 0){if(typeof r!="string"||r.length!==1)throw new TypeError("Single character expected as defaultValue")}else r=" ";var a=e.dimension(0),i=a.size()[0];if(i!==n.length)throw new Yt(a.size()[0],n.length);var s=t.length;_n(e.min()[0]),_n(e.max()[0]);for(var o=[],u=0;u<s;u++)o[u]=t.charAt(u);if(a.forEach(function(f,d){o[f]=n.charAt(d[0])}),o.length>s)for(var l=s-1,c=o.length;l<c;l++)o[l]||(o[l]=r);return o.join("")}function e_e(t,e){if(!sd(e)){if(e.size().length!==1)throw new Yt(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");return Pa(t,n)}}function t_e(t,e,n){if(sd(e))return t;if(e.size().length!==1)throw new Yt(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");var a=Bt(t);return ad(a,r,n),a}var gF="transpose",n_e=["typed","matrix"],r_e=ee(gF,n_e,t=>{var{typed:e,matrix:n}=t;return e(gF,{Array:s=>r(n(s)).valueOf(),Matrix:r,any:Bt});function r(s){var o=s.size(),u;switch(o.length){case 1:u=s.clone();break;case 2:{var l=o[0],c=o[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Xt(o)+")");switch(s.storage()){case"dense":u=a(s,l,c);break;case"sparse":u=i(s,l,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Xt(o)+")")}return u}function a(s,o,u){for(var l=s._data,c=[],f,d=0;d<u;d++){f=c[d]=[];for(var h=0;h<o;h++)f[h]=Bt(l[h][d])}return s.createDenseMatrix({data:c,size:[u,o],datatype:s._datatype})}function i(s,o,u){for(var l=s._values,c=s._index,f=s._ptr,d=l?[]:void 0,h=[],m=[],v=[],y=0;y<o;y++)v[y]=0;var b,w,x;for(b=0,w=c.length;b<w;b++)v[c[b]]++;for(var S=0,C=0;C<o;C++)m.push(S),S+=v[C],v[C]=m[C];for(m.push(S),x=0;x<u;x++)for(var E=f[x],A=f[x+1],k=E;k<A;k++){var T=v[c[k]]++;h[T]=x,l&&(d[T]=Bt(l[k]))}return s.createSparseMatrix({values:d,index:h,ptr:m,size:[u,o],datatype:s._datatype})}}),vF="ctranspose",a_e=["typed","transpose","conj"],i_e=ee(vF,a_e,t=>{var{typed:e,transpose:n,conj:r}=t;return e(vF,{any:function(i){return r(n(i))}})}),yF="zeros",s_e=["typed","config","matrix","BigNumber"],o_e=ee(yF,s_e,t=>{var{typed:e,config:n,matrix:r,BigNumber:a}=t;return e(yF,{"":function(){return n.matrix==="Array"?i([]):i([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return i(l,f)}else return n.matrix==="Array"?i(l):i(l,"default")},Array:i,Matrix:function(l){var c=l.storage();return i(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return i(l.valueOf(),c)}});function i(u,l){var c=s(u),f=c?new a(0):0;if(o(u),l){var d=r(l);return u.length>0?d.resize(u,f):d}else{var h=[];return u.length>0?od(h,u,f):h}}function s(u){var l=!1;return u.forEach(function(c,f,d){qt(c)&&(l=!0,d[f]=c.toNumber())}),l}function o(u){u.forEach(function(l){if(typeof l!="number"||!bt(l)||l<0)throw new Error("Parameters in function zeros must be positive integers")})}}),bF="fft",u_e=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],l_e=ee(bF,u_e,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:a,divideScalar:i,exp:s,tau:o,i:u,dotDivide:l,conj:c,pow:f,ceil:d,log2:h}=t;return e(bF,{Array:m,Matrix:function(x){return x.create(m(x.valueOf()),x.datatype())}});function m(w){var x=Mt(w);return x.length===1?b(w,x[0]):v(w.map(S=>m(S,x.slice(1))),0)}function v(w,x){var S=Mt(w);if(x!==0)return new Array(S[0]).fill(0).map((E,A)=>v(w[A],x-1));if(S.length===1)return b(w);function C(E){var A=Mt(E);return new Array(A[1]).fill(0).map((k,T)=>new Array(A[0]).fill(0).map((I,$)=>E[$][T]))}return C(v(C(w),1))}function y(w){for(var x=w.length,S=s(i(a(-1,a(u,o)),x)),C=[],E=1-x;E<x;E++)C.push(f(S,i(f(E,2),2)));for(var A=f(2,d(h(x+x-1))),k=[...new Array(x).fill(0).map((F,R)=>a(w[R],C[x-1+R])),...new Array(A-x).fill(0)],T=[...new Array(x+x-1).fill(0).map((F,R)=>i(1,C[R])),...new Array(A-(x+x-1)).fill(0)],I=b(k),$=b(T),O=new Array(A).fill(0).map((F,R)=>a(I[R],$[R])),B=l(c(m(c(O))),A),z=[],L=x-1;L<x+x-1;L++)z.push(a(B[L],C[L]));return z}function b(w){var x=w.length;if(x===1)return[w[0]];if(x%2===0){for(var S=[...b(w.filter((k,T)=>T%2===0)),...b(w.filter((k,T)=>T%2===1))],C=0;C<x/2;C++){var E=S[C],A=a(S[C+x/2],s(a(a(o,u),i(-C,x))));S[C]=r(E,A),S[C+x/2]=r(E,a(-1,A))}return S}else return y(w)}}),xF="ifft",c_e=["typed","fft","dotDivide","conj"],f_e=ee(xF,c_e,t=>{var{typed:e,fft:n,dotDivide:r,conj:a}=t;return e(xF,{"Array | Matrix":function(s){var o=Tt(s)?s.size():Mt(s);return r(a(n(a(s))),o.reduce((u,l)=>u*l,1))}})});function Ch(t){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(t)}function d_e(t,e){if(Ch(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ch(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function p_e(t){var e=d_e(t,"string");return Ch(e)=="symbol"?e:e+""}function Fr(t,e,n){return(e=p_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function h_e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wF(Object(n),!0).forEach(function(r){Fr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var m_e="solveODE",g_e=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],v_e=ee(m_e,g_e,t=>{var{typed:e,add:n,subtract:r,multiply:a,divide:i,max:s,map:o,abs:u,isPositive:l,isNegative:c,larger:f,smaller:d,matrix:h,bignumber:m,unaryMinus:v}=t;function y(k){return function(T,I,$,O){var B=!(I.length===2&&(I.every(E)||I.every(qi)));if(B)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var z=I[0],L=I[1],F=f(L,z),R=O.firstStep;if(R!==void 0&&!l(R))throw new Error('"firstStep" must be positive');var W=O.maxStep;if(W!==void 0&&!l(W))throw new Error('"maxStep" must be positive');var M=O.minStep;if(M&&c(M))throw new Error('"minStep" must be positive or zero');var j=[z,L,R,M,W].filter(re=>re!==void 0);if(!(j.every(E)||j.every(qi)))throw new Error('Inconsistent type of "t" dependant variables');for(var q=1,H=O.tol?O.tol:1e-4,G=O.minDelta?O.minDelta:.2,ne=O.maxDelta?O.maxDelta:5,ue=O.maxIter?O.maxIter:1e4,te=[z,L,...$,W,M].some(qt),[se,J,K,ae]=te?[m(k.a),m(k.c),m(k.b),m(k.bp)]:[k.a,k.c,k.b,k.bp],pe=R?F?R:v(R):i(r(L,z),q),he=[z],Se=[$],Ee=r(K,ae),Z=0,ie=0,ve=S(F),we=C(F);ve(he[Z],L);){var Fe=[];pe=we(he[Z],L,pe),Fe.push(T(he[Z],Se[Z]));for(var Re=1;Re<J.length;++Re)Fe.push(T(n(he[Z],a(J[Re],pe)),n(Se[Z],a(pe,se[Re],Fe))));var Ge=s(u(o(a(Ee,Fe),re=>qi(re)?re.value:re)));Ge<H&&H/Ge>1/4&&(he.push(n(he[Z],pe)),Se.push(n(Se[Z],a(pe,K,Fe))),Z++);var Ze=.84*(H/Ge)**(1/5);if(d(Ze,G)?Ze=G:f(Ze,ne)&&(Ze=ne),Ze=te?m(Ze):Ze,pe=a(pe,Ze),W&&f(u(pe),W)?pe=F?W:v(W):M&&d(u(pe),M)&&(pe=F?M:v(M)),ie++,ie>ue)throw new Error("Maximum number of iterations reached, try changing options")}return{t:he,y:Se}}}function b(k,T,I,$){var O=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],B=[null,1/2,3/4,1],z=[2/9,1/3,4/9,0],L=[7/24,1/4,1/3,1/8],F={a:O,c:B,b:z,bp:L};return y(F)(k,T,I,$)}function w(k,T,I,$){var O=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],B=[null,1/5,3/10,4/5,8/9,1,1],z=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],L=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],F={a:O,c:B,b:z,bp:L};return y(F)(k,T,I,$)}function x(k,T,I,$){var O=$.method?$.method:"RK45",B={RK23:b,RK45:w};if(O.toUpperCase()in B){var z=h_e({},$);return delete z.method,B[O.toUpperCase()](k,T,I,z)}else{var L=Object.keys(B).map(R=>'"'.concat(R,'"')),F="".concat(L.slice(0,-1).join(", ")," and ").concat(L.slice(-1));throw new Error('Unavailable method "'.concat(O,'". Available methods are ').concat(F))}}function S(k){return k?d:f}function C(k){var T=k?f:d;return function(I,$,O){var B=n(I,O);return T(B,$)?r($,I):O}}function E(k){return qt(k)||Vt(k)}function A(k,T,I,$){var O=x(k,T.toArray(),I.toArray(),$);return{t:h(O.t),y:h(O.y)}}return e("solveODE",{"function, Array, Array, Object":x,"function, Matrix, Matrix, Object":A,"function, Array, Array":(k,T,I)=>x(k,T,I,{}),"function, Matrix, Matrix":(k,T,I)=>A(k,T,I,{}),"function, Array, number | BigNumber | Unit":(k,T,I)=>{var $=x(k,T,[I],{});return{t:$.t,y:$.y.map(O=>O[0])}},"function, Matrix, number | BigNumber | Unit":(k,T,I)=>{var $=x(k,T.toArray(),[I],{});return{t:h($.t),y:h($.y.map(O=>O[0]))}},"function, Array, number | BigNumber | Unit, Object":(k,T,I,$)=>{var O=x(k,T,[I],$);return{t:O.t,y:O.y.map(B=>B[0])}},"function, Matrix, number | BigNumber | Unit, Object":(k,T,I,$)=>{var O=x(k,T.toArray(),[I],$);return{t:h(O.t),y:h(O.y.map(B=>B[0]))}}})}),y_e="erf",b_e=["typed"],x_e=ee(y_e,b_e,t=>{var{typed:e}=t;return e("name",{number:function(s){var o=Math.abs(s);return o>=S_e?$u(s):o<=w_e?$u(s)*n(o):o<=4?$u(s)*(1-r(o)):$u(s)*(1-a(o))},"Array | Matrix":e.referToSelf(i=>s=>zt(s,i))});function n(i){var s=i*i,o=To[0][4]*s,u=s,l;for(l=0;l<3;l+=1)o=(o+To[0][l])*s,u=(u+gf[0][l])*s;return i*(o+To[0][3])/(u+gf[0][3])}function r(i){var s=To[1][8]*i,o=i,u;for(u=0;u<7;u+=1)s=(s+To[1][u])*i,o=(o+gf[1][u])*i;var l=(s+To[1][7])/(o+gf[1][7]),c=parseInt(i*16)/16,f=(i-c)*(i+c);return Math.exp(-c*c)*Math.exp(-f)*l}function a(i){var s=1/(i*i),o=To[2][5]*s,u=s,l;for(l=0;l<4;l+=1)o=(o+To[2][l])*s,u=(u+gf[2][l])*s;var c=s*(o+To[2][4])/(u+gf[2][4]);c=(N_e-c)/i,s=parseInt(i*16)/16;var f=(i-s)*(i+s);return Math.exp(-s*s)*Math.exp(-f)*c}}),w_e=.46875,N_e=.5641895835477563,To=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],gf=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],S_e=Math.pow(2,53),NF="zeta",C_e=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],E_e=ee(NF,C_e,t=>{var{typed:e,config:n,multiply:r,pow:a,divide:i,factorial:s,equal:o,smallerEq:u,isNegative:l,gamma:c,sin:f,subtract:d,add:h,Complex:m,BigNumber:v,pi:y}=t;return e(NF,{number:E=>b(E,A=>A,()=>20),BigNumber:E=>b(E,A=>new v(A),()=>Math.abs(Math.log10(n.relTol))),Complex:w});function b(E,A,k){return o(E,0)?A(-.5):o(E,1)?A(NaN):isFinite(E)?x(E,A,k,T=>T):l(E)?A(NaN):A(1)}function w(E){return E.re===0&&E.im===0?new m(-.5):E.re===1?new m(NaN,NaN):E.re===1/0&&E.im===0?new m(1):E.im===1/0||E.re===-1/0?new m(NaN,NaN):x(E,A=>A,A=>Math.round(1.3*15+.9*Math.abs(A.im)),A=>A.re)}function x(E,A,k,T){var I=k(E);if(T(E)>-(I-1)/2)return C(E,A(I),A);var $=r(a(2,E),a(A(y),d(E,1)));return $=r($,f(r(i(A(y),2),E))),$=r($,c(d(1,E))),r($,x(d(1,E),A,k,T))}function S(E,A){for(var k=E,T=E;u(T,A);T=h(T,1)){var I=i(r(s(h(A,d(T,1))),a(4,T)),r(s(d(A,T)),s(r(2,T))));k=h(k,I)}return r(A,k)}function C(E,A,k){for(var T=i(1,r(S(k(0),A),d(1,a(2,d(1,E))))),I=k(0),$=k(1);u($,A);$=h($,1))I=h(I,i(r((-1)**($-1),S($,A)),a($,E)));return r(T,I)}}),SF="mode",D_e=["typed","isNaN","isNumeric"],T_e=ee(SF,D_e,t=>{var{typed:e,isNaN:n,isNumeric:r}=t;return e(SF,{"Array | Matrix":a,"...":function(s){return a(s)}});function a(i){i=hn(i.valueOf());var s=i.length;if(s===0)throw new Error("Cannot calculate mode of an empty array");for(var o={},u=[],l=0,c=0;c<i.length;c++){var f=i[c];if(r(f)&&n(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in o||(o[f]=0),o[f]++,o[f]===l?u.push(f):o[f]>l&&(l=o[f],u=[f])}return u}});function Va(t,e,n){var r;return String(t).includes("Unexpected type")?(r=arguments.length>2?" (type: "+Rn(n)+", value: "+JSON.stringify(n)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):String(t).includes("complex numbers")?(r=arguments.length>2?" (type: "+Rn(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):t}var CF="prod",$_e=["typed","config","multiplyScalar","numeric"],A_e=ee(CF,$_e,t=>{var{typed:e,config:n,multiplyScalar:r,numeric:a}=t;return e(CF,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":function(o,u){throw new Error("prod(A, dim) is not yet supported")},"...":function(o){return i(o)}});function i(s){var o;if(Ho(s,function(u){try{o=o===void 0?u:r(o,u)}catch(l){throw Va(l,"prod",u)}}),typeof o=="string"&&(o=a(o,ll(o,n))),o===void 0)throw new Error("Cannot calculate prod of an empty array");return o}}),EF="format",I_e=["typed"],k_e=ee(EF,I_e,t=>{var{typed:e}=t;return e(EF,{any:Xt,"any, Object | function | number | BigNumber":Xt})}),DF="bin",__e=["typed","format"],O_e=ee(DF,__e,t=>{var{typed:e,format:n}=t;return e(DF,{"number | BigNumber":function(a){return n(a,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(a,i){return n(a,{notation:"bin",wordSize:i})}})}),TF="oct",F_e=["typed","format"],R_e=ee(TF,F_e,t=>{var{typed:e,format:n}=t;return e(TF,{"number | BigNumber":function(a){return n(a,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(a,i){return n(a,{notation:"oct",wordSize:i})}})}),$F="hex",M_e=["typed","format"],P_e=ee($F,M_e,t=>{var{typed:e,format:n}=t;return e($F,{"number | BigNumber":function(a){return n(a,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(a,i){return n(a,{notation:"hex",wordSize:i})}})}),ZV=/\$([\w.]+)/g,AF="print",B_e=["typed"],QV=ee(AF,B_e,t=>{var{typed:e}=t;return e(AF,{"string, Object | Array":IF,"string, Object | Array, number | Object":IF})});function IF(t,e,n){return t.replace(ZV,function(r,a){var i=a.split("."),s=e[i.shift()];for(s!==void 0&&s.isMatrix&&(s=s.toArray());i.length&&s!==void 0;){var o=i.shift();s=o?s[o]:s+"."}return s!==void 0?Na(s)?s:Xt(s,n):r})}var kF="to",L_e=["typed","matrix","concat"],z_e=ee(kF,L_e,t=>{var{typed:e,matrix:n,concat:r}=t,a=Mn({typed:e,matrix:n,concat:r});return e(kF,{"Unit, Unit | string":(i,s)=>i.to(s)},a({Ds:!0}))}),_F="isPrime",U_e=["typed"],V_e=ee(_F,U_e,t=>{var{typed:e}=t;return e(_F,{number:function(r){if(r<=3)return r>1;if(r%2===0||r%3===0)return!1;for(var a=5;a*a<=r;a+=6)if(r%a===0||r%(a+2)===0)return!1;return!0},bigint:function(r){if(r<=3n)return r>1n;if(r%2n===0n||r%3n===0n)return!1;for(var a=5n;a*a<=r;a+=6n)if(r%a===0n||r%(a+2n)===0n)return!1;return!0},BigNumber:function(r){if(r.lte(3))return r.gt(1);if(r.mod(2).eq(0)||r.mod(3).eq(0))return!1;if(r.lt(Math.pow(2,32))){for(var a=r.toNumber(),i=5;i*i<=a;i+=6)if(a%i===0||a%(i+2)===0)return!1;return!0}function s(w,x,S){for(var C=1;!x.eq(0);)x.mod(2).eq(0)?(x=x.div(2),w=w.mul(w).mod(S)):(x=x.sub(1),C=w.mul(C).mod(S));return C}var o=r.constructor.clone({precision:r.toFixed(0).length*2});r=new o(r);for(var u=0,l=r.sub(1);l.mod(2).eq(0);)l=l.div(2),u+=1;var c=null;if(r.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(w=>w<r);else{var f=Math.min(r.toNumber()-2,Math.floor(2*Math.pow(r.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=f;d+=1)c.push(f)}for(var h=0;h<c.length;h+=1){var m=c[h],v=s(r.sub(r).add(m),l,r);if(!v.eq(1)){for(var y=0,b=v;!b.eq(r.sub(1));y+=1,b=b.mul(b).mod(r))if(y===u-1)return!1}}return!0},"Array | Matrix":e.referToSelf(n=>r=>zt(r,n))})}),W_e="numeric",q_e=["number","?bignumber","?fraction"],G_e=ee(W_e,q_e,t=>{var{number:e,bignumber:n,fraction:r}=t,a={string:!0,number:!0,BigNumber:!0,Fraction:!0},i={number:s=>e(s),BigNumber:n?s=>n(s):LT,bigint:s=>BigInt(s),Fraction:r?s=>r(s):HV};return function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Rn(o);if(!(c in a))throw new TypeError("Cannot convert "+o+' of type "'+c+'"; valid input types are '+Object.keys(a).join(", "));if(!(u in i))throw new TypeError("Cannot convert "+o+' to type "'+u+'"; valid output types are '+Object.keys(i).join(", "));return u===c?o:i[u](o)}}),OF="divideScalar",H_e=["typed","numeric"],j_e=ee(OF,H_e,t=>{var{typed:e,numeric:n}=t;return e(OF,{"number, number":function(a,i){return a/i},"Complex, Complex":function(a,i){return a.div(i)},"BigNumber, BigNumber":function(a,i){return a.div(i)},"bigint, bigint":function(a,i){return a/i},"Fraction, Fraction":function(a,i){return a.div(i)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,a)=>r.divide(a),"number | Fraction | Complex | BigNumber, Unit":(r,a)=>a.divideInto(r)})}),FF="pow",X_e=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],K_e=ee(FF,X_e,t=>{var{typed:e,config:n,identity:r,multiply:a,matrix:i,inv:s,number:o,fraction:u,Complex:l}=t;return e(FF,{"number, number":c,"Complex, Complex":function(m,v){return m.pow(v)},"BigNumber, BigNumber":function(m,v){return v.isInteger()||m>=0||n.predictable?m.pow(v):new l(m.toNumber(),0).pow(v.toNumber(),0)},"bigint, bigint":(h,m)=>h**m,"Fraction, Fraction":function(m,v){var y=m.pow(v);if(y!=null)return y;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(m.valueOf(),v.valueOf())},"Array, number":f,"Array, BigNumber":function(m,v){return f(m,v.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(m,v){return d(m,v.toNumber())},"Unit, number | BigNumber":function(m,v){return m.pow(v)}});function c(h,m){if(n.predictable&&!bt(m)&&h<0)try{var v=u(m),y=o(v);if((m===y||Math.abs((m-y)/m)<1e-14)&&v.d%2n===1n)return(v.n%2n===0n?1:-1)*Math.pow(-h,m)}catch{}return n.predictable&&(h<-1&&m===1/0||h>-1&&h<0&&m===-1/0)?NaN:bt(m)||h>=0||n.predictable?rV(h,m):h*h<1&&m===1/0||h*h>1&&m===-1/0?0:new l(h,0).pow(m,0)}function f(h,m){if(!bt(m))throw new TypeError("For A^b, b must be an integer (value is "+m+")");var v=Mt(h);if(v.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+v.length+" dimensions)");if(v[0]!==v[1])throw new Error("For A^b, A must be square (size is "+v[0]+"x"+v[1]+")");if(m<0)try{return f(s(h),-m)}catch(w){throw w.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+m+")"):w}for(var y=r(v[0]).valueOf(),b=h;m>=1;)(m&1)===1&&(y=a(b,y)),m>>=1,b=a(b,b);return y}function d(h,m){return i(f(h.valueOf(),m))}}),vf="Number of decimals in function round must be an integer",RF="round",Y_e=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],Z_e=ee(RF,Y_e,t=>{var{typed:e,config:n,matrix:r,equalScalar:a,zeros:i,BigNumber:s,DenseMatrix:o}=t,u=fa({typed:e,equalScalar:a}),l=Pr({typed:e,DenseMatrix:o}),c=Rs({typed:e});function f(d){return Math.abs(tg(d).exponent)}return e(RF,{number:function(h){var m=_p(h,f(n.relTol)),v=ua(h,m,n.relTol,n.absTol)?m:h;return _p(v)},"number, number":function(h,m){var v=f(n.relTol);if(m>=v)return _p(h,m);var y=_p(h,v),b=ua(h,y,n.relTol,n.absTol)?y:h;return _p(b,m)},"number, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(vf);return new s(h).toDecimalPlaces(m.toNumber())},Complex:function(h){return h.round()},"Complex, number":function(h,m){if(m%1)throw new TypeError(vf);return h.round(m)},"Complex, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(vf);var v=m.toNumber();return h.round(v)},BigNumber:function(h){var m=new s(h).toDecimalPlaces(f(n.relTol)),v=hi(h,m,n.relTol,n.absTol)?m:h;return v.toDecimalPlaces(0)},"BigNumber, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(vf);var v=f(n.relTol);if(m>=v)return h.toDecimalPlaces(m.toNumber());var y=h.toDecimalPlaces(v),b=hi(h,y,n.relTol,n.absTol)?y:h;return b.toDecimalPlaces(m.toNumber())},Fraction:function(h){return h.round()},"Fraction, number":function(h,m){if(m%1)throw new TypeError(vf);return h.round(m)},"Fraction, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(vf);return h.round(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(h,m,v){var y=h.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>zt(h,y=>d(y,m,v))),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>zt(h,d)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>u(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>c(r(h),m,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(h,m)=>a(h,0)?i(m.size(),m.storage()):l(m,h,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(h,m)=>a(h,0)?i(m.size(),m.storage()):c(m,h,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(h,m)=>c(r(m),h,d,!0).valueOf())})}),MF="log",Q_e=["config","typed","typeOf","divideScalar","Complex"],J_e=ee(MF,Q_e,t=>{var{typed:e,typeOf:n,config:r,divideScalar:a,Complex:i}=t;return e(MF,{number:function(o){return o>=0||r.predictable?e$e(o):new i(o,0).log()},Complex:function(o){return o.log()},BigNumber:function(o){return!o.isNegative()||r.predictable?o.ln():new i(o.toNumber(),0).log()},"any, any":e.referToSelf(s=>(o,u)=>{if(n(o)==="Fraction"&&n(u)==="Fraction"){var l=o.log(u);if(l!==null)return l}return a(s(o),s(u))})})}),PF="log1p",eOe=["typed","config","divideScalar","log","Complex"],tOe=ee(PF,eOe,t=>{var{typed:e,config:n,divideScalar:r,log:a,Complex:i}=t;return e(PF,{number:function(u){return u>=-1||n.predictable?nDe(u):s(new i(u,0))},Complex:s,BigNumber:function(u){var l=u.plus(1);return!l.isNegative()||n.predictable?l.ln():s(new i(u.toNumber(),0))},"Array | Matrix":e.referToSelf(o=>u=>zt(u,o)),"any, any":e.referToSelf(o=>(u,l)=>r(o(u),a(l)))});function s(o){var u=o.re+1;return new i(Math.log(Math.sqrt(u*u+o.im*o.im)),Math.atan2(o.im,u))}}),BF="nthRoots",nOe=["config","typed","divideScalar","Complex"],rOe=ee(BF,nOe,t=>{var{typed:e,config:n,divideScalar:r,Complex:a}=t,i=[function(u){return new a(u,0)},function(u){return new a(0,u)},function(u){return new a(-u,0)},function(u){return new a(0,-u)}];function s(o,u){if(u<0)throw new Error("Root must be greater than zero");if(u===0)throw new Error("Root must be non-zero");if(u%1!==0)throw new Error("Root must be an integer");if(o===0||o.abs()===0)return[new a(0,0)];var l=typeof o=="number",c;(l||o.re===0||o.im===0)&&(l?c=2*+(o<0):o.im===0?c=2*+(o.re<0):c=2*+(o.im<0)+1);for(var f=o.arg(),d=o.abs(),h=[],m=Math.pow(d,1/u),v=0;v<u;v++){var y=(c+4*v)/u;if(y===Math.round(y)){h.push(i[y%4](m));continue}h.push(new a({r:m,phi:(f+2*Math.PI*v)/u}))}return h}return e(BF,{Complex:function(u){return s(u,2)},"Complex, number":s})}),LF="dotPow",aOe=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],iOe=ee(LF,aOe,t=>{var{typed:e,equalScalar:n,matrix:r,pow:a,DenseMatrix:i,concat:s,SparseMatrix:o}=t,u=Wa({typed:e}),l=po({typed:e,SparseMatrix:o}),c=fa({typed:e,equalScalar:n}),f=Pr({typed:e,DenseMatrix:i}),d=Mn({typed:e,matrix:r,concat:s}),h={};for(var m in a.signatures)Object.prototype.hasOwnProperty.call(a.signatures,m)&&!m.includes("Matrix")&&!m.includes("Array")&&(h[m]=a.signatures[m]);var v=e(h);return e(LF,d({elop:v,SS:l,DS:u,Ss:c,sS:f}))}),zF="dotDivide",sOe=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],oOe=ee(zF,sOe,t=>{var{typed:e,matrix:n,equalScalar:r,divideScalar:a,DenseMatrix:i,concat:s,SparseMatrix:o}=t,u=Ms({typed:e,equalScalar:r}),l=Wa({typed:e}),c=po({typed:e,SparseMatrix:o}),f=fa({typed:e,equalScalar:r}),d=Pr({typed:e,DenseMatrix:i}),h=Mn({typed:e,matrix:n,concat:s});return e(zF,h({elop:a,SS:c,DS:l,SD:u,Ss:f,sS:d}))});function ng(t){var{DenseMatrix:e}=t;return function(r,a,i){var s=r.size();if(s.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+Xt(s)+")");var o=s[0],u=s[1];if(o!==u)throw new RangeError("Matrix must be square (size: "+Xt(s)+")");var l=[];if(Tt(a)){var c=a.size(),f=a._data;if(c.length===1){if(c[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<o;d++)l[d]=[f[d]];return new e({data:l,size:[o,1],datatype:a._datatype})}if(c.length===2){if(c[0]!==o||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(y0(a)){if(i){l=[];for(var h=0;h<o;h++)l[h]=[f[h][0]];return new e({data:l,size:[o,1],datatype:a._datatype})}return a}if(Xl(a)){for(var m=0;m<o;m++)l[m]=[0];for(var v=a._values,y=a._index,b=a._ptr,w=b[1],x=b[0];x<w;x++){var S=y[x];l[S][0]=v[x]}return new e({data:l,size:[o,1],datatype:a._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(En(a)){var C=Mt(a);if(C.length===1){if(C[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var E=0;E<o;E++)l[E]=[a[E]];return new e({data:l,size:[o,1]})}if(C.length===2){if(C[0]!==o||C[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var A=0;A<o;A++)l[A]=[a[A][0]];return new e({data:l,size:[o,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var UF="lsolve",uOe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],lOe=ee(UF,uOe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:o}=t,u=ng({DenseMatrix:o});return e(UF,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.valueOf()}});function l(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=[],b=f._data,w=0;w<v;w++){var x=h[w][0]||0,S=void 0;if(s(x,0))S=0;else{var C=b[w][w];if(s(C,0))throw new Error("Linear system cannot be solved since matrix is singular");S=r(x,C);for(var E=w+1;E<m;E++)h[E]=[i(h[E][0]||0,a(S,b[E][w]))]}y[w]=[S]}return new o({data:y,size:[m,1]})}function c(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=f._values,b=f._index,w=f._ptr,x=[],S=0;S<v;S++){var C=h[S][0]||0;if(s(C,0))x[S]=[0];else{for(var E=0,A=[],k=[],T=w[S],I=w[S+1],$=T;$<I;$++){var O=b[$];O===S?E=y[$]:O>S&&(A.push(y[$]),k.push(O))}if(s(E,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var B=r(C,E),z=0,L=k.length;z<L;z++){var F=k[z];h[F]=[i(h[F][0]||0,a(B,A[z]))]}x[S]=[B]}}return new o({data:x,size:[m,1]})}}),VF="usolve",cOe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],fOe=ee(VF,cOe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:o}=t,u=ng({DenseMatrix:o});return e(VF,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.valueOf()}});function l(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=[],b=f._data,w=v-1;w>=0;w--){var x=h[w][0]||0,S=void 0;if(s(x,0))S=0;else{var C=b[w][w];if(s(C,0))throw new Error("Linear system cannot be solved since matrix is singular");S=r(x,C);for(var E=w-1;E>=0;E--)h[E]=[i(h[E][0]||0,a(S,b[E][w]))]}y[w]=[S]}return new o({data:y,size:[m,1]})}function c(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=f._values,b=f._index,w=f._ptr,x=[],S=v-1;S>=0;S--){var C=h[S][0]||0;if(s(C,0))x[S]=[0];else{for(var E=0,A=[],k=[],T=w[S],I=w[S+1],$=I-1;$>=T;$--){var O=b[$];O===S?E=y[$]:O<S&&(A.push(y[$]),k.push(O))}if(s(E,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var B=r(C,E),z=0,L=k.length;z<L;z++){var F=k[z];h[F]=[i(h[F][0],a(B,A[z]))]}x[S]=[B]}}return new o({data:x,size:[m,1]})}}),WF="lsolveAll",dOe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],pOe=ee(WF,dOe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:o}=t,u=ng({DenseMatrix:o});return e(WF,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.map(y=>y.valueOf())}});function l(f,d){for(var h=[u(f,d,!0)._data.map(k=>k[0])],m=f._data,v=f._size[0],y=f._size[1],b=0;b<y;b++)for(var w=h.length,x=0;x<w;x++){var S=h[x];if(s(m[b][b],0))if(s(S[b],0)){if(x===0){var E=[...S];E[b]=1;for(var A=b+1;A<y;A++)E[A]=i(E[A],m[A][b]);h.push(E)}}else{if(x===0)return[];h.splice(x,1),x-=1,w-=1}else{S[b]=r(S[b],m[b][b]);for(var C=b+1;C<y;C++)S[C]=i(S[C],a(S[b],m[C][b]))}}return h.map(k=>new o({data:k.map(T=>[T]),size:[v,1]}))}function c(f,d){for(var h=[u(f,d,!0)._data.map(q=>q[0])],m=f._size[0],v=f._size[1],y=f._values,b=f._index,w=f._ptr,x=0;x<v;x++)for(var S=h.length,C=0;C<S;C++){for(var E=h[C],A=[],k=[],T=w[x],I=w[x+1],$=0,O=T;O<I;O++){var B=b[O];B===x?$=y[O]:B>x&&(A.push(y[O]),k.push(B))}if(s($,0))if(s(E[x],0)){if(C===0){var R=[...E];R[x]=1;for(var W=0,M=k.length;W<M;W++){var j=k[W];R[j]=i(R[j],A[W])}h.push(R)}}else{if(C===0)return[];h.splice(C,1),C-=1,S-=1}else{E[x]=r(E[x],$);for(var z=0,L=k.length;z<L;z++){var F=k[z];E[F]=i(E[F],a(E[x],A[z]))}}}return h.map(q=>new o({data:q.map(H=>[H]),size:[m,1]}))}}),qF="usolveAll",hOe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],mOe=ee(qF,hOe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:o}=t,u=ng({DenseMatrix:o});return e(qF,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.map(y=>y.valueOf())}});function l(f,d){for(var h=[u(f,d,!0)._data.map(k=>k[0])],m=f._data,v=f._size[0],y=f._size[1],b=y-1;b>=0;b--)for(var w=h.length,x=0;x<w;x++){var S=h[x];if(s(m[b][b],0))if(s(S[b],0)){if(x===0){var E=[...S];E[b]=1;for(var A=b-1;A>=0;A--)E[A]=i(E[A],m[A][b]);h.push(E)}}else{if(x===0)return[];h.splice(x,1),x-=1,w-=1}else{S[b]=r(S[b],m[b][b]);for(var C=b-1;C>=0;C--)S[C]=i(S[C],a(S[b],m[C][b]))}}return h.map(k=>new o({data:k.map(T=>[T]),size:[v,1]}))}function c(f,d){for(var h=[u(f,d,!0)._data.map(q=>q[0])],m=f._size[0],v=f._size[1],y=f._values,b=f._index,w=f._ptr,x=v-1;x>=0;x--)for(var S=h.length,C=0;C<S;C++){for(var E=h[C],A=[],k=[],T=w[x],I=w[x+1],$=0,O=I-1;O>=T;O--){var B=b[O];B===x?$=y[O]:B<x&&(A.push(y[O]),k.push(B))}if(s($,0))if(s(E[x],0)){if(C===0){var R=[...E];R[x]=1;for(var W=0,M=k.length;W<M;W++){var j=k[W];R[j]=i(R[j],A[W])}h.push(R)}}else{if(C===0)return[];h.splice(C,1),C-=1,S-=1}else{E[x]=r(E[x],$);for(var z=0,L=k.length;z<L;z++){var F=k[z];E[F]=i(E[F],a(E[x],A[z]))}}}return h.map(q=>new o({data:q.map(H=>[H]),size:[m,1]}))}}),gOe="matAlgo08xS0Sid",vOe=["typed","equalScalar"],zT=ee(gOe,vOe,t=>{var{typed:e,equalScalar:n}=t;return function(a,i,s){var o=a._values,u=a._index,l=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,h=i._index,m=i._ptr,v=i._size,y=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new Yt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");if(!o||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var b=c[0],w=c[1],x,S=n,C=0,E=s;typeof f=="string"&&f===y&&f!=="mixed"&&(x=f,S=e.find(n,[x,x]),C=e.convert(0,x),E=e.find(s,[x,x]));for(var A=[],k=[],T=[],I=[],$=[],O,B,z,L,F=0;F<w;F++){T[F]=k.length;var R=F+1;for(B=l[F],z=l[F+1],O=B;O<z;O++)L=u[O],$[L]=R,I[L]=o[O],k.push(L);for(B=m[F],z=m[F+1],O=B;O<z;O++)L=h[O],$[L]===R&&(I[L]=E(I[L],d[O]));for(O=T[F];O<k.length;){L=k[O];var W=I[L];S(W,C)?k.splice(O,1):(A.push(W),O++)}}return T[w]=k.length,a.createSparseMatrix({values:A,index:k,ptr:T,size:[b,w],datatype:f===a._datatype&&y===i._datatype?x:void 0})}}),UT=ee("useMatrixForArrayScalar",["typed","matrix"],t=>{var{typed:e,matrix:n}=t;return{"Array, number":e.referTo("DenseMatrix, number",r=>(a,i)=>r(n(a),i).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",r=>(a,i)=>r(n(a),i).valueOf()),"number, Array":e.referTo("number, DenseMatrix",r=>(a,i)=>r(a,n(i)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",r=>(a,i)=>r(a,n(i)).valueOf())}}),GF="leftShift",yOe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],bOe=ee(GF,yOe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,DenseMatrix:i,concat:s}=t,o=fl({typed:e}),u=Ms({typed:e,equalScalar:r}),l=zT({typed:e,equalScalar:r}),c=$c({typed:e,DenseMatrix:i}),f=fa({typed:e,equalScalar:r}),d=Rs({typed:e}),h=Mn({typed:e,matrix:n,concat:s}),m=UT({typed:e,matrix:n});return e(GF,{"number, number":uV,"BigNumber, BigNumber":WIe,"bigint, bigint":(v,y)=>v<<y,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():f(y,b,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():d(y,b,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):c(b,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):d(b,y,v,!0))},m,h({SS:l,DS:o,SD:u}))}),HF="rightArithShift",xOe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],wOe=ee(HF,xOe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,DenseMatrix:i,concat:s}=t,o=fl({typed:e}),u=Ms({typed:e,equalScalar:r}),l=zT({typed:e,equalScalar:r}),c=$c({typed:e,DenseMatrix:i}),f=fa({typed:e,equalScalar:r}),d=Rs({typed:e}),h=Mn({typed:e,matrix:n,concat:s}),m=UT({typed:e,matrix:n});return e(HF,{"number, number":lV,"BigNumber, BigNumber":qIe,"bigint, bigint":(v,y)=>v>>y,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():f(y,b,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():d(y,b,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):c(b,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):d(b,y,v,!0))},m,h({SS:l,DS:o,SD:u}))}),jF="rightLogShift",NOe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],SOe=ee(jF,NOe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,DenseMatrix:i,concat:s}=t,o=fl({typed:e}),u=Ms({typed:e,equalScalar:r}),l=zT({typed:e,equalScalar:r}),c=$c({typed:e,DenseMatrix:i}),f=fa({typed:e,equalScalar:r}),d=Rs({typed:e}),h=Mn({typed:e,matrix:n,concat:s}),m=UT({typed:e,matrix:n});return e(jF,{"number, number":cV,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():f(y,b,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():d(y,b,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):c(b,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):d(b,y,v,!0))},m,h({SS:l,DS:o,SD:u}))}),XF="and",COe=["typed","matrix","equalScalar","zeros","not","concat"],JV=ee(XF,COe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,not:i,concat:s}=t,o=Ms({typed:e,equalScalar:r}),u=Xb({typed:e,equalScalar:r}),l=fa({typed:e,equalScalar:r}),c=Rs({typed:e}),f=Mn({typed:e,matrix:n,concat:s});return e(XF,{"number, number":qS,"Complex, Complex":function(h,m){return(h.re!==0||h.im!==0)&&(m.re!==0||m.im!==0)},"BigNumber, BigNumber":function(h,m){return!h.isZero()&&!m.isZero()&&!h.isNaN()&&!m.isNaN()},"bigint, bigint":qS,"Unit, Unit":e.referToSelf(d=>(h,m)=>d(h.value||0,m.value||0)),"SparseMatrix, any":e.referToSelf(d=>(h,m)=>i(m)?a(h.size(),h.storage()):l(h,m,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(h,m)=>i(m)?a(h.size(),h.storage()):c(h,m,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(h,m)=>i(h)?a(h.size(),h.storage()):l(m,h,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(h,m)=>i(h)?a(h.size(),h.storage()):c(m,h,d,!0)),"Array, any":e.referToSelf(d=>(h,m)=>d(n(h),m).valueOf()),"any, Array":e.referToSelf(d=>(h,m)=>d(h,n(m)).valueOf())},f({SS:u,DS:o}))}),k0="compare",EOe=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],DOe=ee(k0,EOe,t=>{var{typed:e,config:n,equalScalar:r,matrix:a,BigNumber:i,Fraction:s,DenseMatrix:o,concat:u}=t,l=Wa({typed:e}),c=jb({typed:e,equalScalar:r}),f=Pr({typed:e,DenseMatrix:o}),d=Mn({typed:e,matrix:a,concat:u}),h=Md({typed:e});return e(k0,TOe({typed:e,config:n}),{"boolean, boolean":function(v,y){return v===y?0:v>y?1:-1},"BigNumber, BigNumber":function(v,y){return hi(v,y,n.relTol,n.absTol)?new i(0):new i(v.cmp(y))},"bigint, bigint":function(v,y){return v===y?0n:v>y?1n:-1n},"Fraction, Fraction":function(v,y){return new s(v.compare(y))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,d({SS:c,DS:l,Ss:f}))}),TOe=ee(k0,["typed","config"],t=>{var{typed:e,config:n}=t;return e(k0,{"number, number":function(a,i){return ua(a,i,n.relTol,n.absTol)?0:a>i?1:-1}})}),U2,KF;function $Oe(){return KF||(KF=1,U2=function t(e,n){var r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,o=/^0/,u=function(x){return t.insensitive&&(""+x).toLowerCase()||""+x},l=u(e).replace(a,"")||"",c=u(n).replace(a,"")||"",f=l.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(l.match(s),16)||f.length!==1&&l.match(i)&&Date.parse(l),m=parseInt(c.match(s),16)||h&&c.match(i)&&Date.parse(c)||null,v,y;if(m){if(h<m)return-1;if(h>m)return 1}for(var b=0,w=Math.max(f.length,d.length);b<w;b++){if(v=!(f[b]||"").match(o)&&parseFloat(f[b])||f[b]||0,y=!(d[b]||"").match(o)&&parseFloat(d[b])||d[b]||0,isNaN(v)!==isNaN(y))return isNaN(v)?1:-1;if(typeof v!=typeof y&&(v+="",y+=""),v<y)return-1;if(v>y)return 1}return 0}),U2}var AOe=$Oe();const yf=gc(AOe);var YF="compareNatural",IOe=["typed","compare"],kOe=ee(YF,IOe,t=>{var{typed:e,compare:n}=t,r=n.signatures["boolean,boolean"];return e(YF,{"any, any":a});function a(u,l){var c=Rn(u),f=Rn(l),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return d=n(u,l),d.toString()!=="0"?d>0?1:-1:yf(c,f);var h=["Array","DenseMatrix","SparseMatrix"];if(h.includes(c)||h.includes(f))return d=i(a,u,l),d!==0?d:yf(c,f);if(c!==f)return yf(c,f);if(c==="Complex")return _Oe(u,l);if(c==="Unit")return u.equalBase(l)?a(u.value,l.value):s(a,u.formatUnits(),l.formatUnits());if(c==="boolean")return r(u,l);if(c==="string")return yf(u,l);if(c==="Object")return o(a,u,l);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function i(u,l,c){return Xl(l)&&Xl(c)?s(u,l.toJSON().values,c.toJSON().values):Xl(l)?i(u,l.toArray(),c):Xl(c)?i(u,l,c.toArray()):y0(l)?i(u,l.toJSON().data,c):y0(c)?i(u,l,c.toJSON().data):Array.isArray(l)?Array.isArray(c)?s(u,l,c):i(u,l,[c]):i(u,[l],c)}function s(u,l,c){for(var f=0,d=Math.min(l.length,c.length);f<d;f++){var h=u(l[f],c[f]);if(h!==0)return h}return l.length>c.length?1:l.length<c.length?-1:0}function o(u,l,c){var f=Object.keys(l),d=Object.keys(c);f.sort(yf),d.sort(yf);var h=s(u,f,d);if(h!==0)return h;for(var m=0;m<f.length;m++){var v=u(l[f[m]],c[d[m]]);if(v!==0)return v}return 0}});function _Oe(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}var ZF="compareText",OOe=["typed","matrix","concat"];LS.signature="any, any";var FOe=ee(ZF,OOe,t=>{var{typed:e,matrix:n,concat:r}=t,a=Mn({typed:e,matrix:n,concat:r});return e(ZF,LS,a({elop:LS,Ds:!0}))}),_0="equal",ROe=["typed","matrix","equalScalar","DenseMatrix","concat","SparseMatrix"],MOe=ee(_0,ROe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:i,SparseMatrix:s}=t,o=Wa({typed:e}),u=po({typed:e,SparseMatrix:s}),l=Pr({typed:e,DenseMatrix:a}),c=Mn({typed:e,matrix:n,concat:i});return e(_0,POe({typed:e,equalScalar:r}),c({elop:r,SS:u,DS:o,Ss:l}))}),POe=ee(_0,["typed","equalScalar"],t=>{var{typed:e,equalScalar:n}=t;return e(_0,{"any, any":function(a,i){return a===null?i===null:i===null?a===null:a===void 0?i===void 0:i===void 0?a===void 0:n(a,i)}})}),QF="equalText",BOe=["typed","compareText","isZero"],LOe=ee(QF,BOe,t=>{var{typed:e,compareText:n,isZero:r}=t;return e(QF,{"any, any":function(i,s){return r(n(i,s))}})}),O0="smaller",zOe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],UOe=ee(O0,zOe,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:a,concat:i,SparseMatrix:s}=t,o=Wa({typed:e}),u=po({typed:e,SparseMatrix:s}),l=Pr({typed:e,DenseMatrix:a}),c=Mn({typed:e,matrix:r,concat:i}),f=Md({typed:e});return e(O0,VOe({typed:e,config:n}),{"boolean, boolean":(d,h)=>d<h,"BigNumber, BigNumber":function(h,m){return h.lt(m)&&!hi(h,m,n.relTol,n.absTol)},"bigint, bigint":(d,h)=>d<h,"Fraction, Fraction":(d,h)=>d.compare(h)===-1,"Complex, Complex":function(h,m){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:o,Ss:l}))}),VOe=ee(O0,["typed","config"],t=>{var{typed:e,config:n}=t;return e(O0,{"number, number":function(a,i){return a<i&&!ua(a,i,n.relTol,n.absTol)}})}),F0="smallerEq",WOe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],qOe=ee(F0,WOe,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:a,concat:i,SparseMatrix:s}=t,o=Wa({typed:e}),u=po({typed:e,SparseMatrix:s}),l=Pr({typed:e,DenseMatrix:a}),c=Mn({typed:e,matrix:r,concat:i}),f=Md({typed:e});return e(F0,GOe({typed:e,config:n}),{"boolean, boolean":(d,h)=>d<=h,"BigNumber, BigNumber":function(h,m){return h.lte(m)||hi(h,m,n.relTol,n.absTol)},"bigint, bigint":(d,h)=>d<=h,"Fraction, Fraction":(d,h)=>d.compare(h)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:o,Ss:l}))}),GOe=ee(F0,["typed","config"],t=>{var{typed:e,config:n}=t;return e(F0,{"number, number":function(a,i){return a<=i||ua(a,i,n.relTol,n.absTol)}})}),R0="larger",HOe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],jOe=ee(R0,HOe,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:a,concat:i,SparseMatrix:s}=t,o=Wa({typed:e}),u=po({typed:e,SparseMatrix:s}),l=Pr({typed:e,DenseMatrix:a}),c=Mn({typed:e,matrix:r,concat:i}),f=Md({typed:e});return e(R0,XOe({typed:e,config:n}),{"boolean, boolean":(d,h)=>d>h,"BigNumber, BigNumber":function(h,m){return h.gt(m)&&!hi(h,m,n.relTol,n.absTol)},"bigint, bigint":(d,h)=>d>h,"Fraction, Fraction":(d,h)=>d.compare(h)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:o,Ss:l}))}),XOe=ee(R0,["typed","config"],t=>{var{typed:e,config:n}=t;return e(R0,{"number, number":function(a,i){return a>i&&!ua(a,i,n.relTol,n.absTol)}})}),M0="largerEq",KOe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],YOe=ee(M0,KOe,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:a,concat:i,SparseMatrix:s}=t,o=Wa({typed:e}),u=po({typed:e,SparseMatrix:s}),l=Pr({typed:e,DenseMatrix:a}),c=Mn({typed:e,matrix:r,concat:i}),f=Md({typed:e});return e(M0,ZOe({typed:e,config:n}),{"boolean, boolean":(d,h)=>d>=h,"BigNumber, BigNumber":function(h,m){return h.gte(m)||hi(h,m,n.relTol,n.absTol)},"bigint, bigint":function(h,m){return h>=m},"Fraction, Fraction":(d,h)=>d.compare(h)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:o,Ss:l}))}),ZOe=ee(M0,["typed","config"],t=>{var{typed:e,config:n}=t;return e(M0,{"number, number":function(a,i){return a>=i||ua(a,i,n.relTol,n.absTol)}})}),JF="deepEqual",QOe=["typed","equal"],JOe=ee(JF,QOe,t=>{var{typed:e,equal:n}=t;return e(JF,{"any, any":function(i,s){return r(i.valueOf(),s.valueOf())}});function r(a,i){if(Array.isArray(a))if(Array.isArray(i)){var s=a.length;if(s!==i.length)return!1;for(var o=0;o<s;o++)if(!r(a[o],i[o]))return!1;return!0}else return!1;else return Array.isArray(i)?!1:n(a,i)}}),P0="unequal",e3e=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],t3e=ee(P0,e3e,t=>{var{typed:e,config:n,equalScalar:r,matrix:a,DenseMatrix:i,concat:s,SparseMatrix:o}=t,u=Wa({typed:e}),l=po({typed:e,SparseMatrix:o}),c=Pr({typed:e,DenseMatrix:i}),f=Mn({typed:e,matrix:a,concat:s});return e(P0,n3e({typed:e,equalScalar:r}),f({elop:d,SS:l,DS:u,Ss:c}));function d(h,m){return!r(h,m)}}),n3e=ee(P0,["typed","equalScalar"],t=>{var{typed:e,equalScalar:n}=t;return e(P0,{"any, any":function(a,i){return a===null?i!==null:i===null?a!==null:a===void 0?i!==void 0:i===void 0?a!==void 0:!n(a,i)}})}),eR="partitionSelect",r3e=["typed","isNumeric","isNaN","compare"],a3e=ee(eR,r3e,t=>{var{typed:e,isNumeric:n,isNaN:r,compare:a}=t,i=a,s=(l,c)=>-a(l,c);return e(eR,{"Array | Matrix, number":function(c,f){return o(c,f,i)},"Array | Matrix, number, string":function(c,f,d){if(d==="asc")return o(c,f,i);if(d==="desc")return o(c,f,s);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":o});function o(l,c,f){if(!bt(c)||c<0)throw new Error("k must be a non-negative integer");if(Tt(l)){var d=l.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return u(l.valueOf(),c,f)}if(Array.isArray(l))return u(l,c,f)}function u(l,c,f){if(c>=l.length)throw new Error("k out of bounds");for(var d=0;d<l.length;d++)if(n(l[d])&&r(l[d]))return l[d];for(var h=0,m=l.length-1;h<m;){for(var v=h,y=m,b=l[Math.floor(Math.random()*(m-h+1))+h];v<y;)if(f(l[v],b)>=0){var w=l[y];l[y]=l[v],l[v]=w,--y}else++v;f(l[v],b)>0&&--v,c<=v?m=v:h=v+1}return l[c]}}),tR="sort",i3e=["typed","matrix","compare","compareNatural"],s3e=ee(tR,i3e,t=>{var{typed:e,matrix:n,compare:r,compareNatural:a}=t,i=r,s=(c,f)=>-r(c,f);return e(tR,{Array:function(f){return u(f),f.sort(i)},Matrix:function(f){return l(f),n(f.toArray().sort(i),f.storage())},"Array, function":function(f,d){return u(f),f.sort(d)},"Matrix, function":function(f,d){return l(f),n(f.toArray().sort(d),f.storage())},"Array, string":function(f,d){return u(f),f.sort(o(d))},"Matrix, string":function(f,d){return l(f),n(f.toArray().sort(o(d)),f.storage())}});function o(c){if(c==="asc")return i;if(c==="desc")return s;if(c==="natural")return a;throw new Error('String "asc", "desc", or "natural" expected')}function u(c){if(Mt(c).length!==1)throw new Error("One dimensional array expected")}function l(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),nR="max",o3e=["typed","config","numeric","larger"],eW=ee(nR,o3e,t=>{var{typed:e,config:n,numeric:r,larger:a}=t;return e(nR,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(u,l){return Hb(u,l.valueOf(),i)},"...":function(u){if(Od(u))throw new TypeError("Scalar values expected in function max");return s(u)}});function i(o,u){try{return a(o,u)?o:u}catch(l){throw Va(l,"max",u)}}function s(o){var u;if(Ho(o,function(l){try{isNaN(l)&&typeof l=="number"?u=NaN:(u===void 0||a(l,u))&&(u=l)}catch(c){throw Va(c,"max",l)}}),u===void 0)throw new Error("Cannot calculate max of an empty array");return typeof u=="string"&&(u=r(u,ll(u,n))),u}}),rR="min",u3e=["typed","config","numeric","smaller"],tW=ee(rR,u3e,t=>{var{typed:e,config:n,numeric:r,smaller:a}=t;return e(rR,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(u,l){return Hb(u,l.valueOf(),i)},"...":function(u){if(Od(u))throw new TypeError("Scalar values expected in function min");return s(u)}});function i(o,u){try{return a(o,u)?o:u}catch(l){throw Va(l,"min",u)}}function s(o){var u;if(Ho(o,function(l){try{isNaN(l)&&typeof l=="number"?u=NaN:(u===void 0||a(l,u))&&(u=l)}catch(c){throw Va(c,"min",l)}}),u===void 0)throw new Error("Cannot calculate min of an empty array");return typeof u=="string"&&(u=r(u,ll(u,n))),u}}),l3e="ImmutableDenseMatrix",c3e=["smaller","DenseMatrix"],f3e=ee(l3e,c3e,t=>{var{smaller:e,DenseMatrix:n}=t;function r(a,i){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(i&&!Na(i))throw new Error("Invalid datatype: "+i);if(Tt(a)||En(a)){var s=new n(a,i);this._data=s._data,this._size=s._size,this._datatype=s._datatype,this._min=null,this._max=null}else if(a&&En(a.data)&&En(a.size))this._data=a.data,this._size=a.size,this._datatype=a.datatype,this._min=typeof a.min<"u"?a.min:null,this._max=typeof a.max<"u"?a.max:null;else{if(a)throw new TypeError("Unsupported type of data ("+Rn(a)+")");this._data=[],this._size=[0],this._datatype=i,this._min=null,this._max=null}}return r.prototype=new n,r.prototype.type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(a){switch(arguments.length){case 1:{var i=n.prototype.subset.call(this,a);return Tt(i)?new r({data:i._data,size:i._size,datatype:i._datatype}):i}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:Bt(this._data),size:Bt(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(a){return new r(a)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(this._min===null){var a=null;this.forEach(function(i){(a===null||e(i,a))&&(a=i)}),this._min=a!==null?a:void 0}return this._min},r.prototype.max=function(){if(this._max===null){var a=null;this.forEach(function(i){(a===null||e(a,i))&&(a=i)}),this._max=a!==null?a:void 0}return this._max},r},{isClass:!0}),d3e="Index",p3e=["ImmutableDenseMatrix","getMatrixDataType"],h3e=ee(d3e,p3e,t=>{var{ImmutableDenseMatrix:e,getMatrixDataType:n}=t;function r(i){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var s=0,o=arguments.length;s<o;s++){var u=arguments[s],l=En(u),c=Tt(u),f=null;if(DT(u))this._dimensions.push(u),this._isScalar=!1;else if(l||c){var d=void 0;n(u)==="boolean"?(l&&(d=a(aR(u).valueOf())),c&&(d=a(aR(u._data).valueOf())),f=u.valueOf().length):d=a(u.valueOf()),this._dimensions.push(d);var h=d.size();(h.length!==1||h[0]!==1||f!==null)&&(this._isScalar=!1)}else if(typeof u=="number")this._dimensions.push(a([u]));else if(typeof u=="string")this._dimensions.push(u);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(f)}}r.prototype.type="Index",r.prototype.isIndex=!0;function a(i){for(var s=0,o=i.length;s<o;s++)if(typeof i[s]!="number"||!bt(i[s]))throw new TypeError("Index parameters must be positive integer numbers");return new e(i)}return r.prototype.clone=function(){var i=new r;return i._dimensions=Bt(this._dimensions),i._isScalar=this._isScalar,i._sourceSize=this._sourceSize,i},r.create=function(i){var s=new r;return r.apply(s,i),s},r.prototype.size=function(){for(var i=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];i[s]=typeof u=="string"?1:u.size()[0]}return i},r.prototype.max=function(){for(var i=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];i[s]=typeof u=="string"?u:u.max()}return i},r.prototype.min=function(){for(var i=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];i[s]=typeof u=="string"?u:u.min()}return i},r.prototype.forEach=function(i){for(var s=0,o=this._dimensions.length;s<o;s++)i(this._dimensions[s],s,this)},r.prototype.dimension=function(i){return typeof i!="number"?null:this._dimensions[i]||null},r.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var i=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];i.push(typeof u=="string"?u:u.toArray())}return i},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var i=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];typeof u=="string"?i.push(JSON.stringify(u)):i.push(u.toString())}return"["+i.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(i){return r.create(i.dimensions)},r},{isClass:!0});function aR(t){var e=[];return t.forEach((n,r)=>{n&&e.push(r)}),e}var m3e="FibonacciHeap",g3e=["smaller","larger"],v3e=ee(m3e,g3e,t=>{var{smaller:e,larger:n}=t,r=1/Math.log((1+Math.sqrt(5))/2);function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}a.prototype.type="FibonacciHeap",a.prototype.isFibonacciHeap=!0,a.prototype.insert=function(c,f){var d={key:c,value:f,degree:0};if(this._minimum){var h=this._minimum;d.left=h,d.right=h.right,h.right=d,d.right.left=d,e(c,h.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},a.prototype.size=function(){return this._size},a.prototype.clear=function(){this._minimum=null,this._size=0},a.prototype.isEmpty=function(){return this._size===0},a.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,d=c.degree,h=c.child;d>0;){var m=h.right;h.left.right=h.right,h.right.left=h.left,h.left=f,h.right=f.right,f.right=h,h.right.left=h,h.parent=null,h=m,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=l(f,this._size)),this._size--,this._minimum=f,c},a.prototype.remove=function(c){this._minimum=i(this._minimum,c,-1),this.extractMinimum()};function i(c,f,d){f.key=d;var h=f.parent;return h&&e(f.key,h.key)&&(s(c,f,h),o(c,h)),e(f.key,c.key)&&(c=f),c}function s(c,f,d){f.left.right=f.right,f.right.left=f.left,d.degree--,d.child===f&&(d.child=f.right),d.degree===0&&(d.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function o(c,f){var d=f.parent;d&&(f.mark?(s(c,f,d),o(d)):f.mark=!0)}var u=function(f,d){f.left.right=f.right,f.right.left=f.left,f.parent=d,d.child?(f.left=d.child,f.right=d.child.right,d.child.right=f,f.right.left=f):(d.child=f,f.right=f,f.left=f),d.degree++,f.mark=!1};function l(c,f){var d=Math.floor(Math.log(f)*r)+1,h=new Array(d),m=0,v=c;if(v)for(m++,v=v.right;v!==c;)m++,v=v.right;for(var y;m>0;){for(var b=v.degree,w=v.right;y=h[b],!!y;){if(n(v.key,y.key)){var x=y;y=v,v=x}u(y,v),h[b]=null,b++}h[b]=v,v=w,m--}c=null;for(var S=0;S<d;S++)y=h[S],y&&(c?(y.left.right=y.right,y.right.left=y.left,y.left=c,y.right=c.right,c.right=y,y.right.left=y,e(y.key,c.key)&&(c=y)):c=y);return c}return a},{isClass:!0}),y3e="Spa",b3e=["addScalar","equalScalar","FibonacciHeap"],x3e=ee(y3e,b3e,t=>{var{addScalar:e,equalScalar:n,FibonacciHeap:r}=t;function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return a.prototype.type="Spa",a.prototype.isSpa=!0,a.prototype.set=function(i,s){if(this._values[i])this._values[i].value=s;else{var o=this._heap.insert(i,s);this._values[i]=o}},a.prototype.get=function(i){var s=this._values[i];return s?s.value:0},a.prototype.accumulate=function(i,s){var o=this._values[i];o?o.value=e(o.value,s):(o=this._heap.insert(i,s),this._values[i]=o)},a.prototype.forEach=function(i,s,o){var u=this._heap,l=this._values,c=[],f=u.extractMinimum();for(f&&c.push(f);f&&f.key<=s;)f.key>=i&&(n(f.value,0)||o(f.key,f.value,this)),f=u.extractMinimum(),f&&c.push(f);for(var d=0;d<c.length;d++){var h=c[d];f=u.insert(h.key,h.value),l[f.key]=f}},a.prototype.swap=function(i,s){var o=this._values[i],u=this._values[s];if(!o&&u)o=this._heap.insert(i,u.value),this._heap.remove(u),this._values[i]=o,this._values[s]=void 0;else if(o&&!u)u=this._heap.insert(s,o.value),this._heap.remove(o),this._values[s]=u,this._values[i]=void 0;else if(o&&u){var l=o.value;o.value=u.value,u.value=l}},a},{isClass:!0});function w3e(t){var e=0,n=1,r=Object.create(null),a=Object.create(null),i=0,s=function(u){var l=a[u];if(l&&(delete r[l],delete a[u],--e,n===l)){if(!e){i=0,n=1;return}for(;!Object.prototype.hasOwnProperty.call(r,++n););}};return t=Math.abs(t),{hit:function(u){var l=a[u],c=++i;if(r[c]=u,a[u]=c,!l)return++e,e<=t?void 0:(u=r[n],s(u),u);if(delete r[l],n===l)for(;!Object.prototype.hasOwnProperty.call(r,++n););},delete:s,clear:function(){e=i=0,n=1,r=Object.create(null),a=Object.create(null)}}}function rg(t){var{hasher:e,limit:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=n??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function r(){typeof r.cache!="object"&&(r.cache={values:new Map,lru:w3e(n||Number.POSITIVE_INFINITY)});for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var s=e(a);if(r.cache.values.has(s))return r.cache.lru.hit(s),r.cache.values.get(s);var o=t.apply(t,a);return r.cache.values.set(s,o),r.cache.values.delete(r.cache.lru.hit(s)),o}}var N3e=rg(function(t){return new t(1).exp()},{hasher:Kb}),S3e=rg(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:Kb}),VT=rg(function(t){return t.acos(-1)},{hasher:Kb}),C3e=rg(function(t){return VT(t).times(2)},{hasher:Kb});function Kb(t){return t[0].precision}function iR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function V2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iR(Object(n),!0).forEach(function(r){Fr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var E3e="Unit",D3e=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],T3e=ee(E3e,D3e,t=>{var{on:e,config:n,addScalar:r,subtractScalar:a,multiplyScalar:i,divideScalar:s,pow:o,abs:u,fix:l,round:c,equal:f,isNumeric:d,format:h,number:m,Complex:v,BigNumber:y,Fraction:b}=t,w=m;function x(Z,ie){if(!(this instanceof x))throw new Error("Constructor must be called with the new operator");if(!(Z==null||d(Z)||Mo(Z)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,ie===void 0)this.units=[],this.dimensions=W.map(we=>0);else if(typeof ie=="string"){var ve=x.parse(ie);this.units=ve.units,this.dimensions=ve.dimensions}else if(qi(ie)&&ie.value===null)this.fixPrefix=ie.fixPrefix,this.skipAutomaticSimplification=ie.skipAutomaticSimplification,this.dimensions=ie.dimensions.slice(0),this.units=ie.units.map(we=>kr({},we));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(Z)}Object.defineProperty(x,"name",{value:"Unit"}),x.prototype.constructor=x,x.prototype.type="Unit",x.prototype.isUnit=!0;var S,C,E;function A(){for(;E===" "||E==="	";)I()}function k(Z){return Z>="0"&&Z<="9"||Z==="."}function T(Z){return Z>="0"&&Z<="9"}function I(){C++,E=S.charAt(C)}function $(Z){C=Z,E=S.charAt(C)}function O(){var Z="",ie=C;if(E==="+"?I():E==="-"&&(Z+=E,I()),!k(E))return $(ie),null;if(E==="."){if(Z+=E,I(),!T(E))return $(ie),null}else{for(;T(E);)Z+=E,I();E==="."&&(Z+=E,I())}for(;T(E);)Z+=E,I();if(E==="E"||E==="e"){var ve="",we=C;if(ve+=E,I(),(E==="+"||E==="-")&&(ve+=E,I()),!T(E))return $(we),Z;for(Z=Z+ve;T(E);)Z+=E,I()}return Z}function B(){for(var Z="";T(E)||x.isValidAlpha(E);)Z+=E,I();var ie=Z.charAt(0);return x.isValidAlpha(ie)?Z:null}function z(Z){return E===Z?(I(),Z):null}x.parse=function(Z,ie){if(ie=ie||{},S=Z,C=-1,E="",typeof S!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var ve=new x;ve.units=[];var we=1,Fe=!1;I(),A();var Re=O(),Ge=null;if(Re){if(n.number==="BigNumber")Ge=new y(Re);else if(n.number==="Fraction")try{Ge=new b(Re)}catch{Ge=parseFloat(Re)}else Ge=parseFloat(Re);A(),z("*")?(we=1,Fe=!0):z("/")&&(we=-1,Fe=!0)}for(var Ze=[],re=1;;){for(A();E==="(";)Ze.push(we),re*=we,we=1,I(),A();var ce=void 0;if(E){var Ce=E;if(ce=B(),ce===null)throw new SyntaxError('Unexpected "'+Ce+'" in "'+S+'" at index '+C.toString())}else break;var $e=L(ce);if($e===null)throw new SyntaxError('Unit "'+ce+'" not found.');var Be=we*re;if(A(),z("^")){A();var Me=O();if(Me===null)throw new SyntaxError('In "'+Z+'", "^" must be followed by a floating-point number');Be*=Me}ve.units.push({unit:$e.unit,prefix:$e.prefix,power:Be});for(var Qe=0;Qe<W.length;Qe++)ve.dimensions[Qe]+=($e.unit.dimensions[Qe]||0)*Be;for(A();E===")";){if(Ze.length===0)throw new SyntaxError('Unmatched ")" in "'+S+'" at index '+C.toString());re/=Ze.pop(),I(),A()}if(Fe=!1,z("*")?(we=1,Fe=!0):z("/")?(we=-1,Fe=!0):we=1,$e.unit.base){var qe=$e.unit.base.key;te.auto[qe]={unit:$e.unit,prefix:$e.prefix}}}if(A(),E)throw new SyntaxError('Could not parse: "'+Z+'"');if(Fe)throw new SyntaxError('Trailing characters: "'+Z+'"');if(Ze.length!==0)throw new SyntaxError('Unmatched "(" in "'+S+'"');if(ve.units.length===0&&!ie.allowNoUnits)throw new SyntaxError('"'+Z+'" contains no units');return ve.value=Ge!==void 0?ve._normalize(Ge):null,ve},x.prototype.clone=function(){var Z=new x;Z.fixPrefix=this.fixPrefix,Z.skipAutomaticSimplification=this.skipAutomaticSimplification,Z.value=Bt(this.value),Z.dimensions=this.dimensions.slice(0),Z.units=[];for(var ie=0;ie<this.units.length;ie++){Z.units[ie]={};for(var ve in this.units[ie])dt(this.units[ie],ve)&&(Z.units[ie][ve]=this.units[ie][ve])}return Z},x.prototype.valueType=function(){return Rn(this.value)},x.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},x.prototype._normalize=function(Z){if(Z==null||this.units.length===0)return Z;for(var ie=Z,ve=x._getNumberConverter(Rn(Z)),we=0;we<this.units.length;we++){var Fe=ve(this.units[we].unit.value),Re=ve(this.units[we].prefix.value),Ge=ve(this.units[we].power);ie=i(ie,o(i(Fe,Re),Ge))}return ie},x.prototype._denormalize=function(Z,ie){if(Z==null||this.units.length===0)return Z;for(var ve=Z,we=x._getNumberConverter(Rn(Z)),Fe=0;Fe<this.units.length;Fe++){var Re=we(this.units[Fe].unit.value),Ge=we(this.units[Fe].prefix.value),Ze=we(this.units[Fe].power);ve=s(ve,o(i(Re,Ge),Ze))}return ve};var L=rg(Z=>{if(dt(G,Z)){var ie=G[Z],ve=ie.prefixes[""];return{unit:ie,prefix:ve}}for(var we in G)if(dt(G,we)&&BTe(Z,we)){var Fe=G[we],Re=Z.length-we.length,Ge=Z.substring(0,Re),Ze=dt(Fe.prefixes,Ge)?Fe.prefixes[Ge]:void 0;if(Ze!==void 0)return{unit:Fe,prefix:Ze}}return null},{hasher:Z=>Z[0],limit:100});x.isValuelessUnit=function(Z){return L(Z)!==null},x.prototype.hasBase=function(Z){if(typeof Z=="string"&&(Z=M[Z]),!Z)return!1;for(var ie=0;ie<W.length;ie++)if(Math.abs((this.dimensions[ie]||0)-(Z.dimensions[ie]||0))>1e-12)return!1;return!0},x.prototype.equalBase=function(Z){for(var ie=0;ie<W.length;ie++)if(Math.abs((this.dimensions[ie]||0)-(Z.dimensions[ie]||0))>1e-12)return!1;return!0},x.prototype.equals=function(Z){return this.equalBase(Z)&&f(this.value,Z.value)},x.prototype.multiply=function(Z){for(var ie=this.clone(),ve=qi(Z)?Z:new x(Z),we=0;we<W.length;we++)ie.dimensions[we]=(this.dimensions[we]||0)+(ve.dimensions[we]||0);for(var Fe=0;Fe<ve.units.length;Fe++){var Re=V2({},ve.units[Fe]);ie.units.push(Re)}if(this.value!==null||ve.value!==null){var Ge=this.value===null?this._normalize(1):this.value,Ze=ve.value===null?ve._normalize(1):ve.value;ie.value=i(Ge,Ze)}else ie.value=null;return qi(Z)&&(ie.skipAutomaticSimplification=!1),F(ie)},x.prototype.divideInto=function(Z){return new x(Z).divide(this)},x.prototype.divide=function(Z){for(var ie=this.clone(),ve=qi(Z)?Z:new x(Z),we=0;we<W.length;we++)ie.dimensions[we]=(this.dimensions[we]||0)-(ve.dimensions[we]||0);for(var Fe=0;Fe<ve.units.length;Fe++){var Re=V2(V2({},ve.units[Fe]),{},{power:-ve.units[Fe].power});ie.units.push(Re)}if(this.value!==null||ve.value!==null){var Ge=this.value===null?this._normalize(1):this.value,Ze=ve.value===null?ve._normalize(1):ve.value;ie.value=s(Ge,Ze)}else ie.value=null;return qi(Z)&&(ie.skipAutomaticSimplification=!1),F(ie)},x.prototype.pow=function(Z){for(var ie=this.clone(),ve=0;ve<W.length;ve++)ie.dimensions[ve]=(this.dimensions[ve]||0)*Z;for(var we=0;we<ie.units.length;we++)ie.units[we].power*=Z;return ie.value!==null?ie.value=o(ie.value,Z):ie.value=null,ie.skipAutomaticSimplification=!1,F(ie)};function F(Z){return Z.equalBase(M.NONE)&&Z.value!==null&&!n.predictable?Z.value:Z}x.prototype.abs=function(){var Z=this.clone();if(Z.value!==null)if(Z._isDerived()||Z.units.length===0||Z.units[0].unit.offset===0)Z.value=u(Z.value);else{var ie=Z._numberConverter(),ve=ie(Z.units[0].unit.value),we=ie(Z.units[0].unit.offset),Fe=i(ve,we);Z.value=a(u(r(Z.value,Fe)),Fe)}for(var Re in Z.units)(Z.units[Re].unit.name==="VA"||Z.units[Re].unit.name==="VAR")&&(Z.units[Re].unit=G.W);return Z},x.prototype.to=function(Z){var ie=this.value===null?this._normalize(1):this.value,ve;if(typeof Z=="string")ve=x.parse(Z);else if(qi(Z))ve=Z.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(ve))throw new Error("Units do not match ('".concat(ve.toString(),"' != '").concat(this.toString(),"')"));if(ve.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||ve.units.length===0||this.units[0].unit.offset===ve.units[0].unit.offset)ve.value=Bt(ie);else{var we=x._getNumberConverter(Rn(ie)),Fe=this.units[0].unit.value,Re=this.units[0].unit.offset,Ge=i(Fe,Re),Ze=ve.units[0].unit.value,re=ve.units[0].unit.offset,ce=i(Ze,re);ve.value=r(ie,we(a(Ge,ce)))}return ve.fixPrefix=!0,ve.skipAutomaticSimplification=!0,ve},x.prototype.toNumber=function(Z){return w(this.toNumeric(Z))},x.prototype.toNumeric=function(Z){var ie;return Z?ie=this.to(Z):ie=this.clone(),ie._isDerived()||ie.units.length===0?ie._denormalize(ie.value):ie._denormalize(ie.value,ie.units[0].prefix.value)},x.prototype.toString=function(){return this.format()},x.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},x.fromJSON=function(Z){var ie,ve=new x(Z.value,(ie=Z.unit)!==null&&ie!==void 0?ie:void 0);return ve.fixPrefix=Z.fixPrefix||!1,ve},x.prototype.valueOf=x.prototype.toString,x.prototype.simplify=function(){var Z=this.clone(),ie=[],ve;for(var we in se)if(dt(se,we)&&Z.hasBase(M[we])){ve=we;break}if(ve==="NONE")Z.units=[];else{var Fe;if(ve&&dt(se,ve)&&(Fe=se[ve]),Fe)Z.units=[{unit:Fe.unit,prefix:Fe.prefix,power:1}];else{for(var Re=!1,Ge=0;Ge<W.length;Ge++){var Ze=W[Ge];Math.abs(Z.dimensions[Ge]||0)>1e-12&&(dt(se,Ze)?ie.push({unit:se[Ze].unit,prefix:se[Ze].prefix,power:Z.dimensions[Ge]||0}):Re=!0)}ie.length<Z.units.length&&!Re&&(Z.units=ie)}}return Z},x.prototype.toSI=function(){for(var Z=this.clone(),ie=[],ve=0;ve<W.length;ve++){var we=W[ve];if(Math.abs(Z.dimensions[ve]||0)>1e-12)if(dt(te.si,we))ie.push({unit:te.si[we].unit,prefix:te.si[we].prefix,power:Z.dimensions[ve]||0});else throw new Error("Cannot express custom unit "+we+" in SI units")}return Z.units=ie,Z.fixPrefix=!0,Z.skipAutomaticSimplification=!0,this.value!==null?(Z.value=null,this.to(Z)):Z},x.prototype.formatUnits=function(){for(var Z="",ie="",ve=0,we=0,Fe=0;Fe<this.units.length;Fe++)this.units[Fe].power>0?(ve++,Z+=" "+this.units[Fe].prefix.name+this.units[Fe].unit.name,Math.abs(this.units[Fe].power-1)>1e-15&&(Z+="^"+this.units[Fe].power)):this.units[Fe].power<0&&we++;if(we>0)for(var Re=0;Re<this.units.length;Re++)this.units[Re].power<0&&(ve>0?(ie+=" "+this.units[Re].prefix.name+this.units[Re].unit.name,Math.abs(this.units[Re].power+1)>1e-15&&(ie+="^"+-this.units[Re].power)):(ie+=" "+this.units[Re].prefix.name+this.units[Re].unit.name,ie+="^"+this.units[Re].power));Z=Z.substr(1),ie=ie.substr(1),ve>1&&we>0&&(Z="("+Z+")"),we>1&&ve>0&&(ie="("+ie+")");var Ge=Z;return ve>0&&we>0&&(Ge+=" / "),Ge+=ie,Ge},x.prototype.format=function(Z){var ie=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),ve=!1;typeof ie.value<"u"&&ie.value!==null&&Mo(ie.value)&&(ve=Math.abs(ie.value.re)<1e-14);for(var we in ie.units)dt(ie.units,we)&&ie.units[we].unit&&(ie.units[we].unit.name==="VA"&&ve?ie.units[we].unit=G.VAR:ie.units[we].unit.name==="VAR"&&!ve&&(ie.units[we].unit=G.VA));ie.units.length===1&&!ie.fixPrefix&&Math.abs(ie.units[0].power-Math.round(ie.units[0].power))<1e-14&&(ie.units[0].prefix=ie._bestPrefix());var Fe=ie._denormalize(ie.value),Re=ie.value!==null?h(Fe,Z||{}):"",Ge=ie.formatUnits();return ie.value&&Mo(ie.value)&&(Re="("+Re+")"),Ge.length>0&&Re.length>0&&(Re+=" "),Re+=Ge,Re},x.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var Z=this.value!==null?u(this.value):0,ie=u(this.units[0].unit.value),ve=this.units[0].prefix;if(Z===0)return ve;var we=this.units[0].power,Fe=Math.log(Z/Math.pow(ve.value*ie,we))/Math.LN10-1.2;if(Fe>-2.200001&&Fe<1.800001)return ve;Fe=Math.abs(Fe);var Re=this.units[0].unit.prefixes;for(var Ge in Re)if(dt(Re,Ge)){var Ze=Re[Ge];if(Ze.scientific){var re=Math.abs(Math.log(Z/Math.pow(Ze.value*ie,we))/Math.LN10-1.2);(re<Fe||re===Fe&&Ze.name.length<ve.name.length)&&(ve=Ze,Fe=re)}}return ve},x.prototype.splitUnit=function(Z){for(var ie=this.clone(),ve=[],we=0;we<Z.length&&(ie=ie.to(Z[we]),we!==Z.length-1);we++){var Fe=ie.toNumeric(),Re=c(Fe),Ge=void 0,Ze=f(Re,Fe);Ze?Ge=Re:Ge=l(ie.toNumeric());var re=new x(Ge,Z[we].toString());ve.push(re),ie=a(ie,re)}for(var ce=0,Ce=0;Ce<ve.length;Ce++)ce=r(ce,ve[Ce].value);return f(ce,this.value)&&(ie.value=0),ve.push(ie),ve};var R={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};R.SHORTLONG=kr({},R.SHORT,R.LONG),R.BINARY_SHORT=kr({},R.BINARY_SHORT_SI,R.BINARY_SHORT_IEC),R.BINARY_LONG=kr({},R.BINARY_LONG_SI,R.BINARY_LONG_IEC);var W=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],M={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var j in M)dt(M,j)&&(M[j].key=j);var q={},H={name:"",base:q,value:1,offset:0,dimensions:W.map(Z=>0)},G={meter:{name:"meter",base:M.LENGTH,prefixes:R.LONG,value:1,offset:0},inch:{name:"inch",base:M.LENGTH,prefixes:R.NONE,value:.0254,offset:0},foot:{name:"foot",base:M.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yard:{name:"yard",base:M.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mile:{name:"mile",base:M.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},link:{name:"link",base:M.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rod:{name:"rod",base:M.LENGTH,prefixes:R.NONE,value:5.0292,offset:0},chain:{name:"chain",base:M.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:M.LENGTH,prefixes:R.NONE,value:1e-10,offset:0},m:{name:"m",base:M.LENGTH,prefixes:R.SHORT,value:1,offset:0},in:{name:"in",base:M.LENGTH,prefixes:R.NONE,value:.0254,offset:0},ft:{name:"ft",base:M.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yd:{name:"yd",base:M.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mi:{name:"mi",base:M.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},li:{name:"li",base:M.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rd:{name:"rd",base:M.LENGTH,prefixes:R.NONE,value:5.02921,offset:0},ch:{name:"ch",base:M.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},mil:{name:"mil",base:M.LENGTH,prefixes:R.NONE,value:254e-7,offset:0},m2:{name:"m2",base:M.SURFACE,prefixes:R.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:M.SURFACE,prefixes:R.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:M.SURFACE,prefixes:R.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:M.SURFACE,prefixes:R.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:M.SURFACE,prefixes:R.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:M.SURFACE,prefixes:R.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:M.SURFACE,prefixes:R.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:M.SURFACE,prefixes:R.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:M.SURFACE,prefixes:R.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:M.SURFACE,prefixes:R.NONE,value:1e4,offset:0},m3:{name:"m3",base:M.VOLUME,prefixes:R.CUBIC,value:1,offset:0},L:{name:"L",base:M.VOLUME,prefixes:R.SHORT,value:.001,offset:0},l:{name:"l",base:M.VOLUME,prefixes:R.SHORT,value:.001,offset:0},litre:{name:"litre",base:M.VOLUME,prefixes:R.LONG,value:.001,offset:0},cuin:{name:"cuin",base:M.VOLUME,prefixes:R.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:M.VOLUME,prefixes:R.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:M.VOLUME,prefixes:R.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:M.VOLUME,prefixes:R.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:M.VOLUME,prefixes:R.NONE,value:15e-6,offset:0},drop:{name:"drop",base:M.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:M.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},minim:{name:"minim",base:M.VOLUME,prefixes:R.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:M.VOLUME,prefixes:R.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:M.VOLUME,prefixes:R.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:M.VOLUME,prefixes:R.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:M.VOLUME,prefixes:R.NONE,value:1e-6,offset:0},cup:{name:"cup",base:M.VOLUME,prefixes:R.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:M.VOLUME,prefixes:R.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:M.VOLUME,prefixes:R.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:M.VOLUME,prefixes:R.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:M.VOLUME,prefixes:R.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:M.VOLUME,prefixes:R.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:M.VOLUME,prefixes:R.NONE,value:.238480942392,offset:0},g:{name:"g",base:M.MASS,prefixes:R.SHORT,value:.001,offset:0},gram:{name:"gram",base:M.MASS,prefixes:R.LONG,value:.001,offset:0},ton:{name:"ton",base:M.MASS,prefixes:R.SHORT,value:907.18474,offset:0},t:{name:"t",base:M.MASS,prefixes:R.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:M.MASS,prefixes:R.LONG,value:1e3,offset:0},grain:{name:"grain",base:M.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:M.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:M.MASS,prefixes:R.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:M.MASS,prefixes:R.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:M.MASS,prefixes:R.NONE,value:45.359237,offset:0},stick:{name:"stick",base:M.MASS,prefixes:R.NONE,value:.115,offset:0},stone:{name:"stone",base:M.MASS,prefixes:R.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:M.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:M.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:M.MASS,prefixes:R.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:M.MASS,prefixes:R.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:M.MASS,prefixes:R.NONE,value:45.359237,offset:0},s:{name:"s",base:M.TIME,prefixes:R.SHORT,value:1,offset:0},min:{name:"min",base:M.TIME,prefixes:R.NONE,value:60,offset:0},h:{name:"h",base:M.TIME,prefixes:R.NONE,value:3600,offset:0},second:{name:"second",base:M.TIME,prefixes:R.LONG,value:1,offset:0},sec:{name:"sec",base:M.TIME,prefixes:R.LONG,value:1,offset:0},minute:{name:"minute",base:M.TIME,prefixes:R.NONE,value:60,offset:0},hour:{name:"hour",base:M.TIME,prefixes:R.NONE,value:3600,offset:0},day:{name:"day",base:M.TIME,prefixes:R.NONE,value:86400,offset:0},week:{name:"week",base:M.TIME,prefixes:R.NONE,value:7*86400,offset:0},month:{name:"month",base:M.TIME,prefixes:R.NONE,value:2629800,offset:0},year:{name:"year",base:M.TIME,prefixes:R.NONE,value:31557600,offset:0},decade:{name:"decade",base:M.TIME,prefixes:R.NONE,value:315576e3,offset:0},century:{name:"century",base:M.TIME,prefixes:R.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:M.TIME,prefixes:R.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:M.FREQUENCY,prefixes:R.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:M.FREQUENCY,prefixes:R.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:M.ANGLE,prefixes:R.SHORT,value:1,offset:0},radian:{name:"radian",base:M.ANGLE,prefixes:R.LONG,value:1,offset:0},deg:{name:"deg",base:M.ANGLE,prefixes:R.SHORT,value:null,offset:0},degree:{name:"degree",base:M.ANGLE,prefixes:R.LONG,value:null,offset:0},grad:{name:"grad",base:M.ANGLE,prefixes:R.SHORT,value:null,offset:0},gradian:{name:"gradian",base:M.ANGLE,prefixes:R.LONG,value:null,offset:0},cycle:{name:"cycle",base:M.ANGLE,prefixes:R.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:M.ANGLE,prefixes:R.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:M.ANGLE,prefixes:R.NONE,value:null,offset:0},A:{name:"A",base:M.CURRENT,prefixes:R.SHORT,value:1,offset:0},ampere:{name:"ampere",base:M.CURRENT,prefixes:R.LONG,value:1,offset:0},K:{name:"K",base:M.TEMPERATURE,prefixes:R.SHORT,value:1,offset:0},degC:{name:"degC",base:M.TEMPERATURE,prefixes:R.SHORT,value:1,offset:273.15},degF:{name:"degF",base:M.TEMPERATURE,prefixes:R.SHORT,value:new b(5,9),offset:459.67},degR:{name:"degR",base:M.TEMPERATURE,prefixes:R.SHORT,value:new b(5,9),offset:0},kelvin:{name:"kelvin",base:M.TEMPERATURE,prefixes:R.LONG,value:1,offset:0},celsius:{name:"celsius",base:M.TEMPERATURE,prefixes:R.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:M.TEMPERATURE,prefixes:R.LONG,value:new b(5,9),offset:459.67},rankine:{name:"rankine",base:M.TEMPERATURE,prefixes:R.LONG,value:new b(5,9),offset:0},mol:{name:"mol",base:M.AMOUNT_OF_SUBSTANCE,prefixes:R.SHORT,value:1,offset:0},mole:{name:"mole",base:M.AMOUNT_OF_SUBSTANCE,prefixes:R.LONG,value:1,offset:0},cd:{name:"cd",base:M.LUMINOUS_INTENSITY,prefixes:R.SHORT,value:1,offset:0},candela:{name:"candela",base:M.LUMINOUS_INTENSITY,prefixes:R.LONG,value:1,offset:0},N:{name:"N",base:M.FORCE,prefixes:R.SHORT,value:1,offset:0},newton:{name:"newton",base:M.FORCE,prefixes:R.LONG,value:1,offset:0},dyn:{name:"dyn",base:M.FORCE,prefixes:R.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:M.FORCE,prefixes:R.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:M.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:M.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:M.FORCE,prefixes:R.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:M.FORCE,prefixes:R.NONE,value:9.80665,offset:0},J:{name:"J",base:M.ENERGY,prefixes:R.SHORT,value:1,offset:0},joule:{name:"joule",base:M.ENERGY,prefixes:R.LONG,value:1,offset:0},erg:{name:"erg",base:M.ENERGY,prefixes:R.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:M.ENERGY,prefixes:R.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:M.ENERGY,prefixes:R.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:M.ENERGY,prefixes:R.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:M.ENERGY,prefixes:R.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:M.POWER,prefixes:R.SHORT,value:1,offset:0},watt:{name:"watt",base:M.POWER,prefixes:R.LONG,value:1,offset:0},hp:{name:"hp",base:M.POWER,prefixes:R.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:M.POWER,prefixes:R.SHORT,value:v.I,offset:0},VA:{name:"VA",base:M.POWER,prefixes:R.SHORT,value:1,offset:0},Pa:{name:"Pa",base:M.PRESSURE,prefixes:R.SHORT,value:1,offset:0},psi:{name:"psi",base:M.PRESSURE,prefixes:R.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:M.PRESSURE,prefixes:R.NONE,value:101325,offset:0},bar:{name:"bar",base:M.PRESSURE,prefixes:R.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:M.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:M.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:M.PRESSURE,prefixes:R.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:M.PRESSURE,prefixes:R.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:M.ELECTRIC_CHARGE,prefixes:R.LONG,value:1,offset:0},C:{name:"C",base:M.ELECTRIC_CHARGE,prefixes:R.SHORT,value:1,offset:0},farad:{name:"farad",base:M.ELECTRIC_CAPACITANCE,prefixes:R.LONG,value:1,offset:0},F:{name:"F",base:M.ELECTRIC_CAPACITANCE,prefixes:R.SHORT,value:1,offset:0},volt:{name:"volt",base:M.ELECTRIC_POTENTIAL,prefixes:R.LONG,value:1,offset:0},V:{name:"V",base:M.ELECTRIC_POTENTIAL,prefixes:R.SHORT,value:1,offset:0},ohm:{name:"ohm",base:M.ELECTRIC_RESISTANCE,prefixes:R.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:M.ELECTRIC_INDUCTANCE,prefixes:R.LONG,value:1,offset:0},H:{name:"H",base:M.ELECTRIC_INDUCTANCE,prefixes:R.SHORT,value:1,offset:0},siemens:{name:"siemens",base:M.ELECTRIC_CONDUCTANCE,prefixes:R.LONG,value:1,offset:0},S:{name:"S",base:M.ELECTRIC_CONDUCTANCE,prefixes:R.SHORT,value:1,offset:0},weber:{name:"weber",base:M.MAGNETIC_FLUX,prefixes:R.LONG,value:1,offset:0},Wb:{name:"Wb",base:M.MAGNETIC_FLUX,prefixes:R.SHORT,value:1,offset:0},tesla:{name:"tesla",base:M.MAGNETIC_FLUX_DENSITY,prefixes:R.LONG,value:1,offset:0},T:{name:"T",base:M.MAGNETIC_FLUX_DENSITY,prefixes:R.SHORT,value:1,offset:0},b:{name:"b",base:M.BIT,prefixes:R.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:M.BIT,prefixes:R.BINARY_LONG,value:1,offset:0},B:{name:"B",base:M.BIT,prefixes:R.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:M.BIT,prefixes:R.BINARY_LONG,value:8,offset:0}},ne={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function ue(Z){if(Z.number==="BigNumber"){var ie=VT(y);G.rad.value=new y(1),G.deg.value=ie.div(180),G.grad.value=ie.div(200),G.cycle.value=ie.times(2),G.arcsec.value=ie.div(648e3),G.arcmin.value=ie.div(10800)}else G.rad.value=1,G.deg.value=Math.PI/180,G.grad.value=Math.PI/200,G.cycle.value=Math.PI*2,G.arcsec.value=Math.PI/648e3,G.arcmin.value=Math.PI/10800;G.radian.value=G.rad.value,G.degree.value=G.deg.value,G.gradian.value=G.grad.value}ue(n),e&&e("config",function(Z,ie){Z.number!==ie.number&&ue(Z)});var te={si:{NONE:{unit:H,prefix:R.NONE[""]},LENGTH:{unit:G.m,prefix:R.SHORT[""]},MASS:{unit:G.g,prefix:R.SHORT.k},TIME:{unit:G.s,prefix:R.SHORT[""]},CURRENT:{unit:G.A,prefix:R.SHORT[""]},TEMPERATURE:{unit:G.K,prefix:R.SHORT[""]},LUMINOUS_INTENSITY:{unit:G.cd,prefix:R.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:G.mol,prefix:R.SHORT[""]},ANGLE:{unit:G.rad,prefix:R.SHORT[""]},BIT:{unit:G.bits,prefix:R.SHORT[""]},FORCE:{unit:G.N,prefix:R.SHORT[""]},ENERGY:{unit:G.J,prefix:R.SHORT[""]},POWER:{unit:G.W,prefix:R.SHORT[""]},PRESSURE:{unit:G.Pa,prefix:R.SHORT[""]},ELECTRIC_CHARGE:{unit:G.C,prefix:R.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:G.F,prefix:R.SHORT[""]},ELECTRIC_POTENTIAL:{unit:G.V,prefix:R.SHORT[""]},ELECTRIC_RESISTANCE:{unit:G.ohm,prefix:R.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:G.H,prefix:R.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:G.S,prefix:R.SHORT[""]},MAGNETIC_FLUX:{unit:G.Wb,prefix:R.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:G.T,prefix:R.SHORT[""]},FREQUENCY:{unit:G.Hz,prefix:R.SHORT[""]}}};te.cgs=JSON.parse(JSON.stringify(te.si)),te.cgs.LENGTH={unit:G.m,prefix:R.SHORT.c},te.cgs.MASS={unit:G.g,prefix:R.SHORT[""]},te.cgs.FORCE={unit:G.dyn,prefix:R.SHORT[""]},te.cgs.ENERGY={unit:G.erg,prefix:R.NONE[""]},te.us=JSON.parse(JSON.stringify(te.si)),te.us.LENGTH={unit:G.ft,prefix:R.NONE[""]},te.us.MASS={unit:G.lbm,prefix:R.NONE[""]},te.us.TEMPERATURE={unit:G.degF,prefix:R.NONE[""]},te.us.FORCE={unit:G.lbf,prefix:R.NONE[""]},te.us.ENERGY={unit:G.BTU,prefix:R.BTU[""]},te.us.POWER={unit:G.hp,prefix:R.NONE[""]},te.us.PRESSURE={unit:G.psi,prefix:R.NONE[""]},te.auto=JSON.parse(JSON.stringify(te.si));var se=te.auto;x.setUnitSystem=function(Z){if(dt(te,Z))se=te[Z];else throw new Error("Unit system "+Z+" does not exist. Choices are: "+Object.keys(te).join(", "))},x.getUnitSystem=function(){for(var Z in te)if(dt(te,Z)&&te[Z]===se)return Z},x.typeConverters={BigNumber:function(ie){return ie!=null&&ie.isFraction?new y(String(ie.n)).div(String(ie.d)).times(String(ie.s)):new y(ie+"")},Fraction:function(ie){return new b(ie)},Complex:function(ie){return ie},number:function(ie){return ie!=null&&ie.isFraction?m(ie):ie}},x.prototype._numberConverter=function(){var Z=x.typeConverters[this.valueType()];if(Z)return Z;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},x._getNumberConverter=function(Z){if(!x.typeConverters[Z])throw new TypeError('Unsupported type "'+Z+'"');return x.typeConverters[Z]};for(var J in G)if(dt(G,J)){var K=G[J];K.dimensions=K.base.dimensions}for(var ae in ne)if(dt(ne,ae)){var pe=G[ne[ae]],he={};for(var Se in pe)dt(pe,Se)&&(he[Se]=pe[Se]);he.name=ae,G[ae]=he}x.isValidAlpha=function(ie){return/^[a-zA-Z]$/.test(ie)};function Ee(Z){for(var ie=0;ie<Z.length;ie++){if(E=Z.charAt(ie),ie===0&&!x.isValidAlpha(E))throw new Error('Invalid unit name (must begin with alpha character): "'+Z+'"');if(ie>0&&!(x.isValidAlpha(E)||T(E)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+Z+'"')}}return x.createUnit=function(Z,ie){if(typeof Z!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(ie&&ie.override){for(var ve in Z)if(dt(Z,ve)&&x.deleteUnit(ve),Z[ve].aliases)for(var we=0;we<Z[ve].aliases.length;we++)x.deleteUnit(Z[ve].aliases[we])}var Fe;for(var Re in Z)dt(Z,Re)&&(Fe=x.createUnitSingle(Re,Z[Re]));return Fe},x.createUnitSingle=function(Z,ie){if((typeof ie>"u"||ie===null)&&(ie={}),typeof Z!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(dt(G,Z))throw new Error('Cannot create unit "'+Z+'": a unit with that name already exists');Ee(Z);var ve=null,we=[],Fe=0,Re,Ge,Ze;if(ie&&ie.type==="Unit")ve=ie.clone();else if(typeof ie=="string")ie!==""&&(Re=ie);else if(typeof ie=="object")Re=ie.definition,Ge=ie.prefixes,Fe=ie.offset,Ze=ie.baseName,ie.aliases&&(we=ie.aliases.valueOf());else throw new TypeError('Cannot create unit "'+Z+'" from "'+ie.toString()+'": expecting "string" or "Unit" or "Object"');if(we){for(var re=0;re<we.length;re++)if(dt(G,we[re]))throw new Error('Cannot create alias "'+we[re]+'": a unit with that name already exists')}if(Re&&typeof Re=="string"&&!ve)try{ve=x.parse(Re,{allowNoUnits:!0})}catch(fe){throw fe.message='Could not create unit "'+Z+'" from "'+Re+'": '+fe.message,fe}else Re&&Re.type==="Unit"&&(ve=Re.clone());we=we||[],Fe=Fe||0,Ge&&Ge.toUpperCase?Ge=R[Ge.toUpperCase()]||R.NONE:Ge=R.NONE;var ce={};if(ve){ce={name:Z,value:ve.value,dimensions:ve.dimensions.slice(0),prefixes:Ge,offset:Fe};var Me=!1;for(var Qe in M)if(dt(M,Qe)){for(var qe=!0,et=0;et<W.length;et++)if(Math.abs((ce.dimensions[et]||0)-(M[Qe].dimensions[et]||0))>1e-12){qe=!1;break}if(qe){Me=!0,ce.base=M[Qe];break}}if(!Me){Ze=Ze||Z+"_STUFF";var Ye={dimensions:ve.dimensions.slice(0)};Ye.key=Ze,M[Ze]=Ye,se[Ze]={unit:ce,prefix:R.NONE[""]},ce.base=M[Ze]}}else{if(Ze=Ze||Z+"_STUFF",W.indexOf(Ze)>=0)throw new Error('Cannot create new base unit "'+Z+'": a base unit with that name already exists (and cannot be overridden)');W.push(Ze);for(var Ce in M)dt(M,Ce)&&(M[Ce].dimensions[W.length-1]=0);for(var $e={dimensions:[]},Be=0;Be<W.length;Be++)$e.dimensions[Be]=0;$e.dimensions[W.length-1]=1,$e.key=Ze,M[Ze]=$e,ce={name:Z,value:1,dimensions:M[Ze].dimensions.slice(0),prefixes:Ge,offset:Fe,base:M[Ze]},se[Ze]={unit:ce,prefix:R.NONE[""]}}x.UNITS[Z]=ce;for(var Ht=0;Ht<we.length;Ht++){var Nt=we[Ht],xn={};for(var V in ce)dt(ce,V)&&(xn[V]=ce[V]);xn.name=Nt,x.UNITS[Nt]=xn}return delete L.cache,new x(null,Z)},x.deleteUnit=function(Z){delete x.UNITS[Z],delete L.cache},x.PREFIXES=R,x.BASE_DIMENSIONS=W,x.BASE_UNITS=M,x.UNIT_SYSTEMS=te,x.UNITS=G,x},{isClass:!0}),sR="unit",$3e=["typed","Unit"],A3e=ee(sR,$3e,t=>{var{typed:e,Unit:n}=t;return e(sR,{Unit:function(a){return a.clone()},string:function(a){return n.isValuelessUnit(a)?new n(null,a):n.parse(a,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(a,i){return new n(a,i)},"number | BigNumber | Fraction":function(a){return new n(a)},"Array | Matrix":e.referToSelf(r=>a=>zt(a,r))})}),oR="sparse",I3e=["typed","SparseMatrix"],k3e=ee(oR,I3e,t=>{var{typed:e,SparseMatrix:n}=t;return e(oR,{"":function(){return new n([])},string:function(a){return new n([],a)},"Array | Matrix":function(a){return new n(a)},"Array | Matrix, string":function(a,i){return new n(a,i)}})}),uR="createUnit",_3e=["typed","Unit"],O3e=ee(uR,_3e,t=>{var{typed:e,Unit:n}=t;return e(uR,{"Object, Object":function(a,i){return n.createUnit(a,i)},Object:function(a){return n.createUnit(a,{})},"string, Unit | string | Object, Object":function(a,i,s){var o={};return o[a]=i,n.createUnit(o,s)},"string, Unit | string | Object":function(a,i){var s={};return s[a]=i,n.createUnit(s,{})},string:function(a){var i={};return i[a]={},n.createUnit(i,{})}})}),lR="acos",F3e=["typed","config","Complex"],R3e=ee(lR,F3e,t=>{var{typed:e,config:n,Complex:r}=t;return e(lR,{number:function(i){return i>=-1&&i<=1||n.predictable?Math.acos(i):new r(i,0).acos()},Complex:function(i){return i.acos()},BigNumber:function(i){return i.acos()}})}),cR="acosh",M3e=["typed","config","Complex"],P3e=ee(cR,M3e,t=>{var{typed:e,config:n,Complex:r}=t;return e(cR,{number:function(i){return i>=1||n.predictable?mV(i):i<=-1?new r(Math.log(Math.sqrt(i*i-1)-i),Math.PI):new r(i,0).acosh()},Complex:function(i){return i.acosh()},BigNumber:function(i){return i.acosh()}})}),fR="acot",B3e=["typed","BigNumber"],L3e=ee(fR,B3e,t=>{var{typed:e,BigNumber:n}=t;return e(fR,{number:gV,Complex:function(a){return a.acot()},BigNumber:function(a){return new n(1).div(a).atan()}})}),dR="acoth",z3e=["typed","config","Complex","BigNumber"],U3e=ee(dR,z3e,t=>{var{typed:e,config:n,Complex:r,BigNumber:a}=t;return e(dR,{number:function(s){return s>=1||s<=-1||n.predictable?vV(s):new r(s,0).acoth()},Complex:function(s){return s.acoth()},BigNumber:function(s){return new a(1).div(s).atanh()}})}),pR="acsc",V3e=["typed","config","Complex","BigNumber"],W3e=ee(pR,V3e,t=>{var{typed:e,config:n,Complex:r,BigNumber:a}=t;return e(pR,{number:function(s){return s<=-1||s>=1||n.predictable?yV(s):new r(s,0).acsc()},Complex:function(s){return s.acsc()},BigNumber:function(s){return new a(1).div(s).asin()}})}),hR="acsch",q3e=["typed","BigNumber"],G3e=ee(hR,q3e,t=>{var{typed:e,BigNumber:n}=t;return e(hR,{number:bV,Complex:function(a){return a.acsch()},BigNumber:function(a){return new n(1).div(a).asinh()}})}),mR="asec",H3e=["typed","config","Complex","BigNumber"],j3e=ee(mR,H3e,t=>{var{typed:e,config:n,Complex:r,BigNumber:a}=t;return e(mR,{number:function(s){return s<=-1||s>=1||n.predictable?xV(s):new r(s,0).asec()},Complex:function(s){return s.asec()},BigNumber:function(s){return new a(1).div(s).acos()}})}),gR="asech",X3e=["typed","config","Complex","BigNumber"],K3e=ee(gR,X3e,t=>{var{typed:e,config:n,Complex:r,BigNumber:a}=t;return e(gR,{number:function(s){if(s<=1&&s>=-1||n.predictable){var o=1/s;if(o>0||n.predictable)return wV(s);var u=Math.sqrt(o*o-1);return new r(Math.log(u-o),Math.PI)}return new r(s,0).asech()},Complex:function(s){return s.asech()},BigNumber:function(s){return new a(1).div(s).acosh()}})}),vR="asin",Y3e=["typed","config","Complex"],Z3e=ee(vR,Y3e,t=>{var{typed:e,config:n,Complex:r}=t;return e(vR,{number:function(i){return i>=-1&&i<=1||n.predictable?Math.asin(i):new r(i,0).asin()},Complex:function(i){return i.asin()},BigNumber:function(i){return i.asin()}})}),Q3e="asinh",J3e=["typed"],eFe=ee(Q3e,J3e,t=>{var{typed:e}=t;return e("asinh",{number:NV,Complex:function(r){return r.asinh()},BigNumber:function(r){return r.asinh()}})}),tFe="atan",nFe=["typed"],rFe=ee(tFe,nFe,t=>{var{typed:e}=t;return e("atan",{number:function(r){return Math.atan(r)},Complex:function(r){return r.atan()},BigNumber:function(r){return r.atan()}})}),yR="atan2",aFe=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],iFe=ee(yR,aFe,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:a,DenseMatrix:i,concat:s}=t,o=Ms({typed:e,equalScalar:r}),u=Wa({typed:e}),l=MV({typed:e,equalScalar:r}),c=fa({typed:e,equalScalar:r}),f=Pr({typed:e,DenseMatrix:i}),d=Mn({typed:e,matrix:n,concat:s});return e(yR,{"number, number":Math.atan2,"BigNumber, BigNumber":(h,m)=>a.atan2(h,m)},d({scalar:"number | BigNumber",SS:l,DS:u,SD:o,Ss:c,sS:f}))}),bR="atanh",sFe=["typed","config","Complex"],oFe=ee(bR,sFe,t=>{var{typed:e,config:n,Complex:r}=t;return e(bR,{number:function(i){return i<=1&&i>=-1||n.predictable?SV(i):new r(i,0).atanh()},Complex:function(i){return i.atanh()},BigNumber:function(i){return i.atanh()}})}),Pd=ee("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(n=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(n,r.valueType())(r.value)})}}),xR="cos",uFe=["typed"],lFe=ee(xR,uFe,t=>{var{typed:e}=t,n=Pd({typed:e});return e(xR,{number:Math.cos,"Complex | BigNumber":r=>r.cos()},n)}),wR="cosh",cFe=["typed"],fFe=ee(wR,cFe,t=>{var{typed:e}=t;return e(wR,{number:fDe,"Complex | BigNumber":n=>n.cosh()})}),NR="cot",dFe=["typed","BigNumber"],pFe=ee(NR,dFe,t=>{var{typed:e,BigNumber:n}=t,r=Pd({typed:e});return e(NR,{number:CV,Complex:a=>a.cot(),BigNumber:a=>new n(1).div(a.tan())},r)}),SR="coth",hFe=["typed","BigNumber"],mFe=ee(SR,hFe,t=>{var{typed:e,BigNumber:n}=t;return e(SR,{number:EV,Complex:r=>r.coth(),BigNumber:r=>new n(1).div(r.tanh())})}),CR="csc",gFe=["typed","BigNumber"],vFe=ee(CR,gFe,t=>{var{typed:e,BigNumber:n}=t,r=Pd({typed:e});return e(CR,{number:DV,Complex:a=>a.csc(),BigNumber:a=>new n(1).div(a.sin())},r)}),ER="csch",yFe=["typed","BigNumber"],bFe=ee(ER,yFe,t=>{var{typed:e,BigNumber:n}=t;return e(ER,{number:TV,Complex:r=>r.csch(),BigNumber:r=>new n(1).div(r.sinh())})}),DR="sec",xFe=["typed","BigNumber"],wFe=ee(DR,xFe,t=>{var{typed:e,BigNumber:n}=t,r=Pd({typed:e});return e(DR,{number:$V,Complex:a=>a.sec(),BigNumber:a=>new n(1).div(a.cos())},r)}),TR="sech",NFe=["typed","BigNumber"],SFe=ee(TR,NFe,t=>{var{typed:e,BigNumber:n}=t;return e(TR,{number:AV,Complex:r=>r.sech(),BigNumber:r=>new n(1).div(r.cosh())})}),$R="sin",CFe=["typed"],EFe=ee($R,CFe,t=>{var{typed:e}=t,n=Pd({typed:e});return e($R,{number:Math.sin,"Complex | BigNumber":r=>r.sin()},n)}),AR="sinh",DFe=["typed"],TFe=ee(AR,DFe,t=>{var{typed:e}=t;return e(AR,{number:IV,"Complex | BigNumber":n=>n.sinh()})}),IR="tan",$Fe=["typed"],AFe=ee(IR,$Fe,t=>{var{typed:e}=t,n=Pd({typed:e});return e(IR,{number:Math.tan,"Complex | BigNumber":r=>r.tan()},n)}),IFe="tanh",kFe=["typed"],_Fe=ee(IFe,kFe,t=>{var{typed:e}=t;return e("tanh",{number:pDe,"Complex | BigNumber":n=>n.tanh()})}),kR="setCartesian",OFe=["typed","size","subset","compareNatural","Index","DenseMatrix"],FFe=ee(kR,OFe,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(kR,{"Array | Matrix, Array | Matrix":function(u,l){var c=[];if(r(n(u),new i(0))!==0&&r(n(l),new i(0))!==0){var f=hn(Array.isArray(u)?u:u.toArray()).sort(a),d=hn(Array.isArray(l)?l:l.toArray()).sort(a);c=[];for(var h=0;h<f.length;h++)for(var m=0;m<d.length;m++)c.push([f[h],d[m]])}return Array.isArray(u)&&Array.isArray(l)?c:new s(c)}})}),_R="setDifference",RFe=["typed","size","subset","compareNatural","Index","DenseMatrix"],MFe=ee(_R,RFe,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(_R,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(r(n(u),new i(0))===0)c=[];else{if(r(n(l),new i(0))===0)return hn(u.toArray());var f=ud(hn(Array.isArray(u)?u:u.toArray()).sort(a)),d=ud(hn(Array.isArray(l)?l:l.toArray()).sort(a));c=[];for(var h,m=0;m<f.length;m++){h=!1;for(var v=0;v<d.length;v++)if(a(f[m].value,d[v].value)===0&&f[m].identifier===d[v].identifier){h=!0;break}h||c.push(f[m])}}return Array.isArray(u)&&Array.isArray(l)?E0(c):new s(E0(c))}})}),OR="setDistinct",PFe=["typed","size","subset","compareNatural","Index","DenseMatrix"],BFe=ee(OR,PFe,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(OR,{"Array | Matrix":function(u){var l;if(r(n(u),new i(0))===0)l=[];else{var c=hn(Array.isArray(u)?u:u.toArray()).sort(a);l=[],l.push(c[0]);for(var f=1;f<c.length;f++)a(c[f],c[f-1])!==0&&l.push(c[f])}return Array.isArray(u)?l:new s(l)}})}),FR="setIntersect",LFe=["typed","size","subset","compareNatural","Index","DenseMatrix"],zFe=ee(FR,LFe,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(FR,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(r(n(u),new i(0))===0||r(n(l),new i(0))===0)c=[];else{var f=ud(hn(Array.isArray(u)?u:u.toArray()).sort(a)),d=ud(hn(Array.isArray(l)?l:l.toArray()).sort(a));c=[];for(var h=0;h<f.length;h++)for(var m=0;m<d.length;m++)if(a(f[h].value,d[m].value)===0&&f[h].identifier===d[m].identifier){c.push(f[h]);break}}return Array.isArray(u)&&Array.isArray(l)?E0(c):new s(E0(c))}})}),RR="setIsSubset",UFe=["typed","size","subset","compareNatural","Index"],VFe=ee(RR,UFe,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:i}=t;return e(RR,{"Array | Matrix, Array | Matrix":function(o,u){if(r(n(o),new i(0))===0)return!0;if(r(n(u),new i(0))===0)return!1;for(var l=ud(hn(Array.isArray(o)?o:o.toArray()).sort(a)),c=ud(hn(Array.isArray(u)?u:u.toArray()).sort(a)),f,d=0;d<l.length;d++){f=!1;for(var h=0;h<c.length;h++)if(a(l[d].value,c[h].value)===0&&l[d].identifier===c[h].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),MR="setMultiplicity",WFe=["typed","size","subset","compareNatural","Index"],qFe=ee(MR,WFe,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:i}=t;return e(MR,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(o,u){if(r(n(u),new i(0))===0)return 0;for(var l=hn(Array.isArray(u)?u:u.toArray()),c=0,f=0;f<l.length;f++)a(l[f],o)===0&&c++;return c}})}),PR="setPowerset",GFe=["typed","size","subset","compareNatural","Index"],HFe=ee(PR,GFe,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:i}=t;return e(PR,{"Array | Matrix":function(l){if(r(n(l),new i(0))===0)return[];for(var c=hn(Array.isArray(l)?l:l.toArray()).sort(a),f=[],d=0;d.toString(2).length<=c.length;)f.push(s(c,d.toString(2).split("").reverse())),d++;return o(f)}});function s(u,l){for(var c=[],f=0;f<l.length;f++)l[f]==="1"&&c.push(u[f]);return c}function o(u){for(var l=[],c=u.length-1;c>0;c--)for(var f=0;f<c;f++)u[f].length>u[f+1].length&&(l=u[f],u[f]=u[f+1],u[f+1]=l);return u}}),BR="setSize",jFe=["typed","compareNatural"],XFe=ee(BR,jFe,t=>{var{typed:e,compareNatural:n}=t;return e(BR,{"Array | Matrix":function(a){return Array.isArray(a)?hn(a).length:hn(a.toArray()).length},"Array | Matrix, boolean":function(a,i){if(i===!1||a.length===0)return Array.isArray(a)?hn(a).length:hn(a.toArray()).length;for(var s=hn(Array.isArray(a)?a:a.toArray()).sort(n),o=1,u=1;u<s.length;u++)n(s[u],s[u-1])!==0&&o++;return o}})}),LR="setSymDifference",KFe=["typed","size","concat","subset","setDifference","Index"],YFe=ee(LR,KFe,t=>{var{typed:e,size:n,concat:r,subset:a,setDifference:i,Index:s}=t;return e(LR,{"Array | Matrix, Array | Matrix":function(u,l){if(a(n(u),new s(0))===0)return hn(l);if(a(n(l),new s(0))===0)return hn(u);var c=hn(u),f=hn(l);return r(i(c,f),i(f,c))}})}),zR="setUnion",ZFe=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],QFe=ee(zR,ZFe,t=>{var{typed:e,size:n,concat:r,subset:a,setIntersect:i,setSymDifference:s,Index:o}=t;return e(zR,{"Array | Matrix, Array | Matrix":function(l,c){if(a(n(l),new o(0))===0)return hn(c);if(a(n(c),new o(0))===0)return hn(l);var f=hn(l),d=hn(c);return r(s(f,d),i(f,d))}})}),UR="add",JFe=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],eRe=ee(UR,JFe,t=>{var{typed:e,matrix:n,addScalar:r,equalScalar:a,DenseMatrix:i,SparseMatrix:s,concat:o}=t,u=fl({typed:e}),l=PT({typed:e,equalScalar:a}),c=$c({typed:e,DenseMatrix:i}),f=Mn({typed:e,matrix:n,concat:o});return e(UR,{"any, any":r,"any, any, ...any":e.referToSelf(d=>(h,m,v)=>{for(var y=d(h,m),b=0;b<v.length;b++)y=d(y,v[b]);return y})},f({elop:r,DS:u,SS:l,Ss:c}))}),VR="hypot",tRe=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],nRe=ee(VR,tRe,t=>{var{typed:e,abs:n,addScalar:r,divideScalar:a,multiplyScalar:i,sqrt:s,smaller:o,isPositive:u}=t;return e(VR,{"... number | BigNumber":l,Array:l,Matrix:c=>l(hn(c.toArray()))});function l(c){for(var f=0,d=0,h=0;h<c.length;h++){if(Mo(c[h]))throw new TypeError("Unexpected type of argument to hypot");var m=n(c[h]);o(d,m)?(f=i(f,i(a(d,m),a(d,m))),f=r(f,1),d=m):f=r(f,u(m)?i(a(m,d),a(m,d)):m)}return i(d,s(f))}}),WR="norm",rRe=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],aRe=ee(WR,rRe,t=>{var{typed:e,abs:n,add:r,pow:a,conj:i,sqrt:s,multiply:o,equalScalar:u,larger:l,smaller:c,matrix:f,ctranspose:d,eigs:h}=t;return e(WR,{number:Math.abs,Complex:function(k){return k.abs()},BigNumber:function(k){return k.abs()},boolean:function(k){return Math.abs(k)},Array:function(k){return E(f(k),2)},Matrix:function(k){return E(k,2)},"Array, number | BigNumber | string":function(k,T){return E(f(k),T)},"Matrix, number | BigNumber | string":function(k,T){return E(k,T)}});function m(A){var k=0;return A.forEach(function(T){var I=n(T);l(I,k)&&(k=I)},!0),k}function v(A){var k;return A.forEach(function(T){var I=n(T);(!k||c(I,k))&&(k=I)},!0),k||0}function y(A,k){if(k===Number.POSITIVE_INFINITY||k==="inf")return m(A);if(k===Number.NEGATIVE_INFINITY||k==="-inf")return v(A);if(k==="fro")return E(A,2);if(typeof k=="number"&&!isNaN(k)){if(!u(k,0)){var T=0;return A.forEach(function(I){T=r(a(n(I),k),T)},!0),a(T,1/k)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function b(A){var k=0;return A.forEach(function(T,I){k=r(k,o(T,i(T)))}),n(s(k))}function w(A){var k=[],T=0;return A.forEach(function(I,$){var O=$[1],B=r(k[O]||0,n(I));l(B,T)&&(T=B),k[O]=B},!0),T}function x(A){var k=A.size();if(k[0]!==k[1])throw new RangeError("Invalid matrix dimensions");var T=d(A),I=o(T,A),$=h(I).values.toArray(),O=$[$.length-1];return n(s(O))}function S(A){var k=[],T=0;return A.forEach(function(I,$){var O=$[0],B=r(k[O]||0,n(I));l(B,T)&&(T=B),k[O]=B},!0),T}function C(A,k){if(k===1)return w(A);if(k===Number.POSITIVE_INFINITY||k==="inf")return S(A);if(k==="fro")return b(A);if(k===2)return x(A);throw new Error("Unsupported parameter value "+k)}function E(A,k){var T=A.size();if(T.length===1)return y(A,k);if(T.length===2){if(T[0]&&T[1])return C(A,k);throw new RangeError("Invalid matrix dimensions")}}}),qR="dot",iRe=["typed","addScalar","multiplyScalar","conj","size"],sRe=ee(qR,iRe,t=>{var{typed:e,addScalar:n,multiplyScalar:r,conj:a,size:i}=t;return e(qR,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":u});function s(c,f){var d=l(c),h=l(f),m,v;if(d.length===1)m=d[0];else if(d.length===2&&d[1]===1)m=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)v=h[0];else if(h.length===2&&h[1]===1)v=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(m!==v)throw new RangeError("Vectors must have equal length ("+m+" != "+v+")");if(m===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return m}function o(c,f){var d=s(c,f),h=Tt(c)?c._data:c,m=Tt(c)?c._datatype||c.getDataType():void 0,v=Tt(f)?f._data:f,y=Tt(f)?f._datatype||f.getDataType():void 0,b=l(c).length===2,w=l(f).length===2,x=n,S=r;if(m&&y&&m===y&&typeof m=="string"&&m!=="mixed"){var C=m;x=e.find(n,[C,C]),S=e.find(r,[C,C])}if(!b&&!w){for(var E=S(a(h[0]),v[0]),A=1;A<d;A++)E=x(E,S(a(h[A]),v[A]));return E}if(!b&&w){for(var k=S(a(h[0]),v[0][0]),T=1;T<d;T++)k=x(k,S(a(h[T]),v[T][0]));return k}if(b&&!w){for(var I=S(a(h[0][0]),v[0]),$=1;$<d;$++)I=x(I,S(a(h[$][0]),v[$]));return I}if(b&&w){for(var O=S(a(h[0][0]),v[0][0]),B=1;B<d;B++)O=x(O,S(a(h[B][0]),v[B][0]));return O}}function u(c,f){s(c,f);for(var d=c._index,h=c._values,m=f._index,v=f._values,y=0,b=n,w=r,x=0,S=0;x<d.length&&S<m.length;){var C=d[x],E=m[S];if(C<E){x++;continue}if(C>E){S++;continue}C===E&&(y=b(y,w(h[x],v[S])),x++,S++)}return y}function l(c){return Tt(c)?c.size():i(c)}}),oRe="trace",uRe=["typed","matrix","add"],lRe=ee(oRe,uRe,t=>{var{typed:e,matrix:n,add:r}=t;return e("trace",{Array:function(o){return a(n(o))},SparseMatrix:i,DenseMatrix:a,any:Bt});function a(s){var o=s._size,u=s._data;switch(o.length){case 1:if(o[0]===1)return Bt(u[0]);throw new RangeError("Matrix must be square (size: "+Xt(o)+")");case 2:{var l=o[0],c=o[1];if(l===c){for(var f=0,d=0;d<l;d++)f=r(f,u[d][d]);return f}else throw new RangeError("Matrix must be square (size: "+Xt(o)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Xt(o)+")")}}function i(s){var o=s._values,u=s._index,l=s._ptr,c=s._size,f=c[0],d=c[1];if(f===d){var h=0;if(o.length>0)for(var m=0;m<d;m++)for(var v=l[m],y=l[m+1],b=v;b<y;b++){var w=u[b];if(w===m){h=r(h,o[b]);break}if(w>m)break}return h}throw new RangeError("Matrix must be square (size: "+Xt(c)+")")}}),GR="index",cRe=["typed","Index"],fRe=ee(GR,cRe,t=>{var{typed:e,Index:n}=t;return e(GR,{"...number | string | BigNumber | Range | Array | Matrix":function(a){var i=a.map(function(o){return qt(o)?o.toNumber():En(o)||Tt(o)?o.map(function(u){return qt(u)?u.toNumber():u}):o}),s=new n;return n.apply(s,i),s}})}),nW=new Set(["end"]),dRe="Node",pRe=["mathWithTransform"],hRe=ee(dRe,pRe,t=>{var{mathWithTransform:e}=t;function n(a){for(var i of[...nW])if(a.has(i))throw new Error('Scope contains an illegal symbol, "'+i+'" is a reserved keyword')}class r{get type(){return"Node"}get isNode(){return!0}evaluate(i){return this.compile().evaluate(i)}compile(){var i=this._compile(e,{}),s={},o=null;function u(l){var c=Bf(l);return n(c),i(c,s,o)}return{evaluate:u}}_compile(i,s){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(i){throw new Error("Cannot run forEach on a Node interface")}map(i){throw new Error("Cannot run map on a Node interface")}_ifNode(i){if(!Dn(i))throw new TypeError("Callback function must return a Node");return i}traverse(i){i(this,null,null);function s(o,u){o.forEach(function(l,c,f){u(l,c,f),s(l,u)})}s(this,i)}transform(i){function s(o,u,l){var c=i(o,u,l);return c!==o?c:o.map(s)}return s(this,null,null)}filter(i){var s=[];return this.traverse(function(o,u,l){i(o,u,l)&&s.push(o)}),s}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(i){return i.cloneDeep()})}equals(i){return i?this.type===i.type&&Go(this,i):!1}toString(i){var s=this._getCustomString(i);return typeof s<"u"?s:this._toString(i)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(i){var s=this._getCustomString(i);return typeof s<"u"?s:this._toHTML(i)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(i){var s=this._getCustomString(i);return typeof s<"u"?s:this._toTex(i)}_toTex(i){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(i){if(i&&typeof i=="object")switch(typeof i.handler){case"object":case"undefined":return;case"function":return i.handler(this,i);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return r},{isClass:!0,isNode:!0});function qa(t){return t&&t.isIndexError?new Os(t.index+1,t.min+1,t.max!==void 0?t.max+1:void 0):t}function rW(t){var{subset:e}=t;return function(r,a){try{if(Array.isArray(r))return e(r,a);if(r&&typeof r.subset=="function")return r.subset(a);if(typeof r=="string")return e(r,a);if(typeof r=="object"){if(!a.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Pa(r,a.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(i){throw qa(i)}}}var Zv="AccessorNode",mRe=["subset","Node"],gRe=ee(Zv,mRe,t=>{var{subset:e,Node:n}=t,r=rW({subset:e});function a(s){return!(hc(s)||Wi(s)||sn(s)||ju(s)||zb(s)||qo(s)||jr(s))}class i extends n{constructor(o,u){if(super(),!Dn(o))throw new TypeError('Node expected for parameter "object"');if(!_d(u))throw new TypeError('IndexNode expected for parameter "index"');this.object=o,this.index=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return Zv}get isAccessorNode(){return!0}_compile(o,u){var l=this.object._compile(o,u),c=this.index._compile(o,u);if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(h,m,v){return Pa(l(h,m,v),f)}}else return function(h,m,v){var y=l(h,m,v),b=c(h,m,y);return r(y,b)}}forEach(o){o(this.object,"object",this),o(this.index,"index",this)}map(o){return new i(this._ifNode(o(this.object,"object",this)),this._ifNode(o(this.index,"index",this)))}clone(){return new i(this.object,this.index)}_toString(o){var u=this.object.toString(o);return a(this.object)&&(u="("+u+")"),u+this.index.toString(o)}_toHTML(o){var u=this.object.toHTML(o);return a(this.object)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+this.index.toHTML(o)}_toTex(o){var u=this.object.toTex(o);return a(this.object)&&(u="\\left(' + object + '\\right)"),u+this.index.toTex(o)}toJSON(){return{mathjs:Zv,object:this.object,index:this.index}}static fromJSON(o){return new i(o.object,o.index)}}return Fr(i,"name",Zv),i},{isClass:!0,isNode:!0}),Qv="ArrayNode",vRe=["Node"],yRe=ee(Qv,vRe,t=>{var{Node:e}=t;class n extends e{constructor(a){if(super(),this.items=a||[],!Array.isArray(this.items)||!this.items.every(Dn))throw new TypeError("Array containing Nodes expected")}get type(){return Qv}get isArrayNode(){return!0}_compile(a,i){var s=Fu(this.items,function(l){return l._compile(a,i)}),o=a.config.matrix!=="Array";if(o){var u=a.matrix;return function(c,f,d){return u(Fu(s,function(h){return h(c,f,d)}))}}else return function(c,f,d){return Fu(s,function(h){return h(c,f,d)})}}forEach(a){for(var i=0;i<this.items.length;i++){var s=this.items[i];a(s,"items["+i+"]",this)}}map(a){for(var i=[],s=0;s<this.items.length;s++)i[s]=this._ifNode(a(this.items[s],"items["+s+"]",this));return new n(i)}clone(){return new n(this.items.slice(0))}_toString(a){var i=this.items.map(function(s){return s.toString(a)});return"["+i.join(", ")+"]"}toJSON(){return{mathjs:Qv,items:this.items}}static fromJSON(a){return new n(a.items)}_toHTML(a){var i=this.items.map(function(s){return s.toHTML(a)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+i.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){function i(s,o){var u=s.some(Wi)&&!s.every(Wi),l=o||u,c=l?"&":"\\\\",f=s.map(function(d){return d.items?i(d.items,!o):d.toTex(a)}).join(c);return u||!l||l&&!o?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return i(this.items,!1)}}return Fr(n,"name",Qv),n},{isClass:!0,isNode:!0});function bRe(t){var{subset:e,matrix:n}=t;return function(a,i,s){try{if(Array.isArray(a)){var o=n(a).subset(i,s).valueOf();return o.forEach((u,l)=>{a[l]=u}),a}else{if(a&&typeof a.subset=="function")return a.subset(i,s);if(typeof a=="string")return e(a,i,s);if(typeof a=="object"){if(!i.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return ad(a,i.getObjectProperty(),s),a}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(u){throw qa(u)}}}var Ns=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function Jv(t,e){if(!e||e!=="auto")return t;for(var n=t;qo(n);)n=n.content;return n}function An(t,e,n,r){var a=t;e!=="keep"&&(a=t.getContent());for(var i=a.getIdentifier(),s=null,o=0;o<Ns.length;o++)if(i in Ns[o]){s=o;break}if(i==="OperatorNode:multiply"&&a.implicit&&n!=="show"){var u=Jv(a.args[0],e);!(sn(u)&&r&&r.getIdentifier()==="OperatorNode:divide"&&_S(Jv(r.args[0],e)))&&!(u.getIdentifier()==="OperatorNode:divide"&&_S(Jv(u.args[0],e))&&sn(Jv(u.args[1])))&&(s+=1)}return s}function Op(t,e){var n=t;e!=="keep"&&(n=t.getContent());var r=n.getIdentifier(),a=An(n,e);if(a===null)return null;var i=Ns[a][r];if(dt(i,"associativity")){if(i.associativity==="left")return"left";if(i.associativity==="right")return"right";throw Error("'"+r+"' has the invalid associativity '"+i.associativity+"'.")}return null}function W2(t,e,n){var r=n!=="keep"?t.getContent():t,a=n!=="keep"?t.getContent():e,i=r.getIdentifier(),s=a.getIdentifier(),o=An(r,n);if(o===null)return null;var u=Ns[o][i];if(dt(u,"associativeWith")&&u.associativeWith instanceof Array){for(var l=0;l<u.associativeWith.length;l++)if(u.associativeWith[l]===s)return!0;return!1}return null}function xRe(t){var e="OperatorNode:"+t;for(var n of Ns)if(e in n)return n[e].op;return null}var ey="AssignmentNode",wRe=["subset","?matrix","Node"],NRe=ee(ey,wRe,t=>{var{subset:e,matrix:n,Node:r}=t,a=rW({subset:e}),i=bRe({subset:e,matrix:n});function s(u,l,c){l||(l="keep");var f=An(u,l,c),d=An(u.value,l,c);return l==="all"||d!==null&&d<=f}class o extends r{constructor(l,c,f){if(super(),this.object=l,this.index=f?c:null,this.value=f||c,!jr(l)&&!hc(l))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(jr(l)&&l.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!_d(this.index))throw new TypeError('IndexNode expected as "index"');if(!Dn(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return ey}get isAssignmentNode(){return!0}_compile(l,c){var f=this.object._compile(l,c),d=this.index?this.index._compile(l,c):null,h=this.value._compile(l,c),m=this.object.name;if(this.index)if(this.index.isObjectProperty()){var v=this.index.getObjectProperty();return function(S,C,E){var A=f(S,C,E),k=h(S,C,E);return ad(A,v,k),k}}else{if(jr(this.object))return function(S,C,E){var A=f(S,C,E),k=h(S,C,E),T=d(S,C,A);return S.set(m,i(A,T,k)),k};var y=this.object.object._compile(l,c);if(this.object.index.isObjectProperty()){var b=this.object.index.getObjectProperty();return function(S,C,E){var A=y(S,C,E),k=Pa(A,b),T=d(S,C,k),I=h(S,C,E);return ad(A,b,i(k,T,I)),I}}else{var w=this.object.index._compile(l,c);return function(S,C,E){var A=y(S,C,E),k=w(S,C,A),T=a(A,k),I=d(S,C,T),$=h(S,C,E);return i(A,k,i(T,I,$)),$}}}else{if(!jr(this.object))throw new TypeError("SymbolNode expected as object");return function(S,C,E){var A=h(S,C,E);return S.set(m,A),A}}}forEach(l){l(this.object,"object",this),this.index&&l(this.index,"index",this),l(this.value,"value",this)}map(l){var c=this._ifNode(l(this.object,"object",this)),f=this.index?this._ifNode(l(this.index,"index",this)):null,d=this._ifNode(l(this.value,"value",this));return new o(c,f,d)}clone(){return new o(this.object,this.index,this.value)}_toString(l){var c=this.object.toString(l),f=this.index?this.index.toString(l):"",d=this.value.toString(l);return s(this,l&&l.parenthesis,l&&l.implicit)&&(d="("+d+")"),c+f+" = "+d}toJSON(){return{mathjs:ey,object:this.object,index:this.index,value:this.value}}static fromJSON(l){return new o(l.object,l.index,l.value)}_toHTML(l){var c=this.object.toHTML(l),f=this.index?this.index.toHTML(l):"",d=this.value.toHTML(l);return s(this,l&&l.parenthesis,l&&l.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(l){var c=this.object.toTex(l),f=this.index?this.index.toTex(l):"",d=this.value.toTex(l);return s(this,l&&l.parenthesis,l&&l.implicit)&&(d="\\left(".concat(d,"\\right)")),c+f+"="+d}}return Fr(o,"name",ey),o},{isClass:!0,isNode:!0}),ty="BlockNode",SRe=["ResultSet","Node"],CRe=ee(ty,SRe,t=>{var{ResultSet:e,Node:n}=t;class r extends n{constructor(i){if(super(),!Array.isArray(i))throw new Error("Array expected");this.blocks=i.map(function(s){var o=s&&s.node,u=s&&s.visible!==void 0?s.visible:!0;if(!Dn(o))throw new TypeError('Property "node" must be a Node');if(typeof u!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:o,visible:u}})}get type(){return ty}get isBlockNode(){return!0}_compile(i,s){var o=Fu(this.blocks,function(u){return{evaluate:u.node._compile(i,s),visible:u.visible}});return function(l,c,f){var d=[];return BU(o,function(m){var v=m.evaluate(l,c,f);m.visible&&d.push(v)}),new e(d)}}forEach(i){for(var s=0;s<this.blocks.length;s++)i(this.blocks[s].node,"blocks["+s+"].node",this)}map(i){for(var s=[],o=0;o<this.blocks.length;o++){var u=this.blocks[o],l=this._ifNode(i(u.node,"blocks["+o+"].node",this));s[o]={node:l,visible:u.visible}}return new r(s)}clone(){var i=this.blocks.map(function(s){return{node:s.node,visible:s.visible}});return new r(i)}_toString(i){return this.blocks.map(function(s){return s.node.toString(i)+(s.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:ty,blocks:this.blocks}}static fromJSON(i){return new r(i.blocks)}_toHTML(i){return this.blocks.map(function(s){return s.node.toHTML(i)+(s.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(i){return this.blocks.map(function(s){return s.node.toTex(i)+(s.visible?"":";")}).join(`\\;\\;
`)}}return Fr(r,"name",ty),r},{isClass:!0,isNode:!0}),ny="ConditionalNode",ERe=["Node"],DRe=ee(ny,ERe,t=>{var{Node:e}=t;function n(a){if(typeof a=="number"||typeof a=="boolean"||typeof a=="string")return!!a;if(a){if(qt(a))return!a.isZero();if(Mo(a))return!!(a.re||a.im);if(qi(a))return!!a.value}if(a==null)return!1;throw new TypeError('Unsupported type of condition "'+Rn(a)+'"')}class r extends e{constructor(i,s,o){if(super(),!Dn(i))throw new TypeError("Parameter condition must be a Node");if(!Dn(s))throw new TypeError("Parameter trueExpr must be a Node");if(!Dn(o))throw new TypeError("Parameter falseExpr must be a Node");this.condition=i,this.trueExpr=s,this.falseExpr=o}get type(){return ny}get isConditionalNode(){return!0}_compile(i,s){var o=this.condition._compile(i,s),u=this.trueExpr._compile(i,s),l=this.falseExpr._compile(i,s);return function(f,d,h){return n(o(f,d,h))?u(f,d,h):l(f,d,h)}}forEach(i){i(this.condition,"condition",this),i(this.trueExpr,"trueExpr",this),i(this.falseExpr,"falseExpr",this)}map(i){return new r(this._ifNode(i(this.condition,"condition",this)),this._ifNode(i(this.trueExpr,"trueExpr",this)),this._ifNode(i(this.falseExpr,"falseExpr",this)))}clone(){return new r(this.condition,this.trueExpr,this.falseExpr)}_toString(i){var s=i&&i.parenthesis?i.parenthesis:"keep",o=An(this,s,i&&i.implicit),u=this.condition.toString(i),l=An(this.condition,s,i&&i.implicit);(s==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=o)&&(u="("+u+")");var c=this.trueExpr.toString(i),f=An(this.trueExpr,s,i&&i.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c="("+c+")");var d=this.falseExpr.toString(i),h=An(this.falseExpr,s,i&&i.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=o)&&(d="("+d+")"),u+" ? "+c+" : "+d}toJSON(){return{mathjs:ny,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(i){return new r(i.condition,i.trueExpr,i.falseExpr)}_toHTML(i){var s=i&&i.parenthesis?i.parenthesis:"keep",o=An(this,s,i&&i.implicit),u=this.condition.toHTML(i),l=An(this.condition,s,i&&i.implicit);(s==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=o)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(i),f=An(this.trueExpr,s,i&&i.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(i),h=An(this.falseExpr,s,i&&i.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=o)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(i){return"\\begin{cases} {"+this.trueExpr.toTex(i)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(i)+"}\\\\{"+this.falseExpr.toTex(i)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return Fr(r,"name",ny),r},{isClass:!0,isNode:!0}),q2,HR;function TRe(){if(HR)return q2;HR=1;var t=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])}return a},e={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},n={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},r=function(i,s){return t({},i,s)};return q2=function(a){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.preserveFormatting,o=s===void 0?!1:s,u=i.escapeMapFn,l=u===void 0?r:u,c=String(a),f="",d=l(t({},e),o?t({},n):{}),h=Object.keys(d),m=function(){var y=!1;h.forEach(function(b,w){y||c.length>=b.length&&c.slice(0,b.length)===b&&(f+=d[h[w]],c=c.slice(b.length,c.length),y=!0)}),y||(f+=c.slice(0,1),c=c.slice(1,c.length))};c;)m();return f},q2}var $Re=TRe();const ARe=gc($Re);var KS={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},pn={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},jR={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(pn.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(pn.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(pn.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(pn.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(pn.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(pn.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(pn.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(pn.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(pn.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(pn.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(pn.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(pn.bitAnd,"${args[1]}\\right)")},bitNot:{1:pn.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(pn.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(pn.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(pn.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(pn.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(pn.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(pn.and,"${args[1]}\\right)")},not:{1:pn.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(pn.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(pn.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(pn.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(pn.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(pn.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(pn.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(pn.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(pn.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(pn.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(pn.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(pn.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(pn.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(pn.to,"${args[1]}\\right)")},numeric:function(e,n){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(KS.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},IRe="\\mathrm{${name}}\\left(${args}\\right)",XR={deg:"^\\circ"};function YS(t){return ARe(t,{preserveFormatting:!0})}function aW(t,e){return e=typeof e>"u"?!1:e,e?dt(XR,t)?XR[t]:"\\mathrm{"+YS(t)+"}":dt(KS,t)?KS[t]:YS(t)}var ry="ConstantNode",kRe=["Node"],_Re=ee(ry,kRe,t=>{var{Node:e}=t;class n extends e{constructor(a){super(),this.value=a}get type(){return ry}get isConstantNode(){return!0}_compile(a,i){var s=this.value;return function(){return s}}forEach(a){}map(a){return this.clone()}clone(){return new n(this.value)}_toString(a){return Xt(this.value,a)}_toHTML(a){var i=this._toString(a);switch(Rn(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+i+"</span>";case"string":return'<span class="math-string">'+i+"</span>";case"boolean":return'<span class="math-boolean">'+i+"</span>";case"null":return'<span class="math-null-symbol">'+i+"</span>";case"undefined":return'<span class="math-undefined">'+i+"</span>";default:return'<span class="math-symbol">'+i+"</span>"}}toJSON(){return{mathjs:ry,value:this.value}}static fromJSON(a){return new n(a.value)}_toTex(a){var i=this._toString(a),s=Rn(this.value);switch(s){case"string":return"\\mathtt{"+YS(i)+"}";case"number":case"BigNumber":{var o=s==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!o)return this.value.valueOf()<0?"-\\infty":"\\infty";var u=i.toLowerCase().indexOf("e");return u!==-1?i.substring(0,u)+"\\cdot10^{"+i.substring(u+1)+"}":i}case"bigint":return i.toString();case"Fraction":return this.value.toLatex();default:return i}}}return Fr(n,"name",ry),n},{isClass:!0,isNode:!0}),ay="FunctionAssignmentNode",ORe=["typed","Node"],FRe=ee(ay,ORe,t=>{var{typed:e,Node:n}=t;function r(i,s,o){var u=An(i,s,o),l=An(i.expr,s,o);return s==="all"||l!==null&&l<=u}class a extends n{constructor(s,o,u){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(o))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Dn(u))throw new TypeError('Node expected for parameter "expr"');if(nW.has(s))throw new Error('Illegal function name, "'+s+'" is a reserved keyword');var l=new Set;for(var c of o){var f=typeof c=="string"?c:c.name;if(l.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));l.add(f)}this.name=s,this.params=o.map(function(d){return d&&d.name||d}),this.types=o.map(function(d){return d&&d.type||"any"}),this.expr=u}get type(){return ay}get isFunctionAssignmentNode(){return!0}_compile(s,o){var u=Object.create(o);BU(this.params,function(m){u[m]=!0});var l=this.expr._compile(s,u),c=this.name,f=this.params,d=XO(this.types,","),h=c+"("+XO(this.params,", ")+")";return function(v,y,b){var w={};w[d]=function(){for(var S=Object.create(y),C=0;C<f.length;C++)S[f[C]]=arguments[C];return l(v,S,b)};var x=e(c,w);return x.syntax=h,v.set(c,x),x}}forEach(s){s(this.expr,"expr",this)}map(s){var o=this._ifNode(s(this.expr,"expr",this));return new a(this.name,this.params.slice(0),o)}clone(){return new a(this.name,this.params.slice(0),this.expr)}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=this.expr.toString(s);return r(this,o,s&&s.implicit)&&(u="("+u+")"),this.name+"("+this.params.join(", ")+") = "+u}toJSON(){var s=this.types;return{mathjs:ay,name:this.name,params:this.params.map(function(o,u){return{name:o,type:s[u]}}),expr:this.expr}}static fromJSON(s){return new a(s.name,s.params,s.expr)}_toHTML(s){for(var o=s&&s.parenthesis?s.parenthesis:"keep",u=[],l=0;l<this.params.length;l++)u.push('<span class="math-symbol math-parameter">'+Hi(this.params[l])+"</span>");var c=this.expr.toHTML(s);return r(this,o,s&&s.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+Hi(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+u.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=this.expr.toTex(s);return r(this,o,s&&s.implicit)&&(u="\\left(".concat(u,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(aW).join(",")+"\\right)="+u}}return Fr(a,"name",ay),a},{isClass:!0,isNode:!0}),iy="IndexNode",RRe=["Node","size"],MRe=ee(iy,RRe,t=>{var{Node:e,size:n}=t;class r extends e{constructor(i,s){if(super(),this.dimensions=i,this.dotNotation=s||!1,!Array.isArray(i)||!i.every(Dn))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return iy}get isIndexNode(){return!0}_compile(i,s){var o=Fu(this.dimensions,function(l,c){var f=l.filter(m=>m.isSymbolNode&&m.name==="end").length>0;if(f){var d=Object.create(s);d.end=!0;var h=l._compile(i,d);return function(v,y,b){if(!Tt(b)&&!En(b)&&!Na(b))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Rn(b));var w=n(b).valueOf(),x=Object.create(y);return x.end=w[c],h(v,x,b)}}else return l._compile(i,s)}),u=Pa(i,"index");return function(c,f,d){var h=Fu(o,function(m){return m(c,f,d)});return u(...h)}}forEach(i){for(var s=0;s<this.dimensions.length;s++)i(this.dimensions[s],"dimensions["+s+"]",this)}map(i){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this._ifNode(i(this.dimensions[o],"dimensions["+o+"]",this));return new r(s,this.dotNotation)}clone(){return new r(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&sn(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(i){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:iy,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(i){return new r(i.dimensions,i.dotNotation)}_toHTML(i){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this.dimensions[o].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+Hi(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){var s=this.dimensions.map(function(o){return o.toTex(i)});return this.dotNotation?"."+this.getObjectProperty():"_{"+s.join(",")+"}"}}return Fr(r,"name",iy),r},{isClass:!0,isNode:!0}),sy="ObjectNode",PRe=["Node"],BRe=ee(sy,PRe,t=>{var{Node:e}=t;class n extends e{constructor(a){if(super(),this.properties=a||{},a&&(typeof a!="object"||!Object.keys(a).every(function(i){return Dn(a[i])})))throw new TypeError("Object containing Nodes expected")}get type(){return sy}get isObjectNode(){return!0}_compile(a,i){var s={};for(var o in this.properties)if(dt(this.properties,o)){var u=$f(o),l=JSON.parse(u),c=Pa(this.properties,o);s[l]=c._compile(a,i)}return function(d,h,m){var v={};for(var y in s)dt(s,y)&&(v[y]=s[y](d,h,m));return v}}forEach(a){for(var i in this.properties)dt(this.properties,i)&&a(this.properties[i],"properties["+$f(i)+"]",this)}map(a){var i={};for(var s in this.properties)dt(this.properties,s)&&(i[s]=this._ifNode(a(this.properties[s],"properties["+$f(s)+"]",this)));return new n(i)}clone(){var a={};for(var i in this.properties)dt(this.properties,i)&&(a[i]=this.properties[i]);return new n(a)}_toString(a){var i=[];for(var s in this.properties)dt(this.properties,s)&&i.push($f(s)+": "+this.properties[s].toString(a));return"{"+i.join(", ")+"}"}toJSON(){return{mathjs:sy,properties:this.properties}}static fromJSON(a){return new n(a.properties)}_toHTML(a){var i=[];for(var s in this.properties)dt(this.properties,s)&&i.push('<span class="math-symbol math-property">'+Hi(s)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[s].toHTML(a));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+i.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(a){var i=[];for(var s in this.properties)dt(this.properties,s)&&i.push("\\mathbf{"+s+":} & "+this.properties[s].toTex(a)+"\\\\");var o="\\left\\{\\begin{array}{ll}"+i.join(`
`)+"\\end{array}\\right\\}";return o}}return Fr(n,"name",sy),n},{isClass:!0,isNode:!0});function Wp(t,e){return new cU(t,new Pb(e),new Set(Object.keys(e)))}var oy="OperatorNode",LRe=["Node"],zRe=ee(oy,LRe,t=>{var{Node:e}=t;function n(i,s){var o=i;if(s==="auto")for(;qo(o);)o=o.content;return sn(o)?!0:pr(o)?n(o.args[0],s):!1}function r(i,s,o,u,l){var c=An(i,s,o),f=Op(i,s);if(s==="all"||u.length>2&&i.getIdentifier()!=="OperatorNode:add"&&i.getIdentifier()!=="OperatorNode:multiply")return u.map(function(I){switch(I.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(u.length){case 0:d=[];break;case 1:{var h=An(u[0],s,o,i);if(l&&h!==null){var m,v;if(s==="keep"?(m=u[0].getIdentifier(),v=i.getIdentifier()):(m=u[0].getContent().getIdentifier(),v=i.getContent().getIdentifier()),Ns[c][v].latexLeftParens===!1){d=[!1];break}if(Ns[h][m].latexParens===!1){d=[!1];break}}if(h===null){d=[!1];break}if(h<=c){d=[!0];break}d=[!1]}break;case 2:{var y,b=An(u[0],s,o,i),w=W2(i,u[0],s);b===null?y=!1:b===c&&f==="right"&&!w||b<c?y=!0:y=!1;var x,S=An(u[1],s,o,i),C=W2(i,u[1],s);if(S===null?x=!1:S===c&&f==="left"&&!C||S<c?x=!0:x=!1,l){var E,A,k;s==="keep"?(E=i.getIdentifier(),A=i.args[0].getIdentifier(),k=i.args[1].getIdentifier()):(E=i.getContent().getIdentifier(),A=i.args[0].getContent().getIdentifier(),k=i.args[1].getContent().getIdentifier()),b!==null&&(Ns[c][E].latexLeftParens===!1&&(y=!1),Ns[b][A].latexParens===!1&&(y=!1)),S!==null&&(Ns[c][E].latexRightParens===!1&&(x=!1),Ns[S][k].latexParens===!1&&(x=!1))}d=[y,x]}break;default:(i.getIdentifier()==="OperatorNode:add"||i.getIdentifier()==="OperatorNode:multiply")&&(d=u.map(function(I){var $=An(I,s,o,i),O=W2(i,I,s),B=Op(I,s);return $===null?!1:c===$&&f===B&&!O?!0:$<c}));break}if(u.length>=2&&i.getIdentifier()==="OperatorNode:multiply"&&i.implicit&&s!=="all"&&o==="hide")for(var T=1;T<d.length;++T)n(u[T],s)&&!d[T-1]&&(s!=="keep"||!qo(u[T-1]))&&(d[T]=!0);return d}class a extends e{constructor(s,o,u,l,c){if(super(),typeof s!="string")throw new TypeError('string expected for parameter "op"');if(typeof o!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(u)||!u.every(Dn))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=l===!0,this.isPercentage=c===!0,this.op=s,this.fn=o,this.args=u||[]}get type(){return oy}get isOperatorNode(){return!0}_compile(s,o){if(typeof this.fn!="string"||!ET(s,this.fn))throw s[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var u=Pa(s,this.fn),l=Fu(this.args,function(m){return m._compile(s,o)});if(typeof u=="function"&&u.rawArgs===!0){var c=this.args;return function(v,y,b){return u(c,s,Wp(v,y))}}else if(l.length===1){var f=l[0];return function(v,y,b){return u(f(v,y,b))}}else if(l.length===2){var d=l[0],h=l[1];return function(v,y,b){return u(d(v,y,b),h(v,y,b))}}else return function(v,y,b){return u.apply(null,Fu(l,function(w){return w(v,y,b)}))}}forEach(s){for(var o=0;o<this.args.length;o++)s(this.args[o],"args["+o+"]",this)}map(s){for(var o=[],u=0;u<this.args.length;u++)o[u]=this._ifNode(s(this.args[u],"args["+u+"]",this));return new a(this.op,this.fn,o,this.implicit,this.isPercentage)}clone(){return new a(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=s&&s.implicit?s.implicit:"hide",l=this.args,c=r(this,o,u,l,!1);if(l.length===1){var f=Op(this,o),d=l[0].toString(s);c[0]&&(d="("+d+")");var h=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(h?" ":"")+d:f==="left"?d+(h?" ":"")+this.op:d+this.op}else if(l.length===2){var m=l[0].toString(s),v=l[1].toString(s);return c[0]&&(m="("+m+")"),c[1]&&(v="("+v+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?m+" "+v:m+" "+this.op+" "+v}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=l.map(function(b,w){return b=b.toString(s),c[w]&&(b="("+b+")"),b});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?y.join(" "):y.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:oy,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(s){return new a(s.op,s.fn,s.args,s.implicit,s.isPercentage)}_toHTML(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=s&&s.implicit?s.implicit:"hide",l=this.args,c=r(this,o,u,l,!1);if(l.length===1){var f=Op(this,o),d=l[0].toHTML(s);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+Hi(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+Hi(this.op)+"</span>"}else if(l.length===2){var h=l[0].toHTML(s),m=l[1].toHTML(s);return c[0]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?h+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+m:h+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Hi(this.op)+"</span>"+m}else{var v=l.map(function(y,b){return y=y.toHTML(s),c[b]&&(y='<span class="math-parenthesis math-round-parenthesis">(</span>'+y+'<span class="math-parenthesis math-round-parenthesis">)</span>'),y});return l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?v.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):v.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Hi(this.op)+"</span>"):'<span class="math-function">'+Hi(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+v.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=s&&s.implicit?s.implicit:"hide",l=this.args,c=r(this,o,u,l,!0),f=pn[this.fn];if(f=typeof f>"u"?this.op:f,l.length===1){var d=Op(this,o),h=l[0].toTex(s);return c[0]&&(h="\\left(".concat(h,"\\right)")),d==="right"?f+h:h+f}else if(l.length===2){var m=l[0],v=m.toTex(s);c[0]&&(v="\\left(".concat(v,"\\right)"));var y=l[1],b=y.toTex(s);c[1]&&(b="\\left(".concat(b,"\\right)"));var w;switch(o==="keep"?w=m.getIdentifier():w=m.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+v+"}{"+b+"}";case"OperatorNode:pow":switch(v="{"+v+"}",b="{"+b+"}",w){case"ConditionalNode":case"OperatorNode:divide":v="\\left(".concat(v,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&u==="hide")return v+"~"+b}return v+f+b}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var x=l.map(function(S,C){return S=S.toTex(s),c[C]&&(S="\\left(".concat(S,"\\right)")),S});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&u==="hide"?x.join("~"):x.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+l.map(function(S){return S.toTex(s)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return Fr(a,"name",oy),a},{isClass:!0,isNode:!0}),uy="ParenthesisNode",URe=["Node"],VRe=ee(uy,URe,t=>{var{Node:e}=t;class n extends e{constructor(a){if(super(),!Dn(a))throw new TypeError('Node expected for parameter "content"');this.content=a}get type(){return uy}get isParenthesisNode(){return!0}_compile(a,i){return this.content._compile(a,i)}getContent(){return this.content.getContent()}forEach(a){a(this.content,"content",this)}map(a){var i=a(this.content,"content",this);return new n(i)}clone(){return new n(this.content)}_toString(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?"("+this.content.toString(a)+")":this.content.toString(a)}toJSON(){return{mathjs:uy,content:this.content}}static fromJSON(a){return new n(a.content)}_toHTML(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(a)}_toTex(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?"\\left(".concat(this.content.toTex(a),"\\right)"):this.content.toTex(a)}}return Fr(n,"name",uy),n},{isClass:!0,isNode:!0}),ly="RangeNode",WRe=["Node"],qRe=ee(ly,WRe,t=>{var{Node:e}=t;function n(a,i,s){var o=An(a,i,s),u={},l=An(a.start,i,s);if(u.start=l!==null&&l<=o||i==="all",a.step){var c=An(a.step,i,s);u.step=c!==null&&c<=o||i==="all"}var f=An(a.end,i,s);return u.end=f!==null&&f<=o||i==="all",u}class r extends e{constructor(i,s,o){if(super(),!Dn(i))throw new TypeError("Node expected");if(!Dn(s))throw new TypeError("Node expected");if(o&&!Dn(o))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=i,this.end=s,this.step=o||null}get type(){return ly}get isRangeNode(){return!0}needsEnd(){var i=this.filter(function(s){return jr(s)&&s.name==="end"});return i.length>0}_compile(i,s){var o=i.range,u=this.start._compile(i,s),l=this.end._compile(i,s);if(this.step){var c=this.step._compile(i,s);return function(d,h,m){return o(u(d,h,m),l(d,h,m),c(d,h,m))}}else return function(d,h,m){return o(u(d,h,m),l(d,h,m))}}forEach(i){i(this.start,"start",this),i(this.end,"end",this),this.step&&i(this.step,"step",this)}map(i){return new r(this._ifNode(i(this.start,"start",this)),this._ifNode(i(this.end,"end",this)),this.step&&this._ifNode(i(this.step,"step",this)))}clone(){return new r(this.start,this.end,this.step&&this.step)}_toString(i){var s=i&&i.parenthesis?i.parenthesis:"keep",o=n(this,s,i&&i.implicit),u,l=this.start.toString(i);if(o.start&&(l="("+l+")"),u=l,this.step){var c=this.step.toString(i);o.step&&(c="("+c+")"),u+=":"+c}var f=this.end.toString(i);return o.end&&(f="("+f+")"),u+=":"+f,u}toJSON(){return{mathjs:ly,start:this.start,end:this.end,step:this.step}}static fromJSON(i){return new r(i.start,i.end,i.step)}_toHTML(i){var s=i&&i.parenthesis?i.parenthesis:"keep",o=n(this,s,i&&i.implicit),u,l=this.start.toHTML(i);if(o.start&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u=l,this.step){var c=this.step.toHTML(i);o.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(i);return o.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+f,u}_toTex(i){var s=i&&i.parenthesis?i.parenthesis:"keep",o=n(this,s,i&&i.implicit),u=this.start.toTex(i);if(o.start&&(u="\\left(".concat(u,"\\right)")),this.step){var l=this.step.toTex(i);o.step&&(l="\\left(".concat(l,"\\right)")),u+=":"+l}var c=this.end.toTex(i);return o.end&&(c="\\left(".concat(c,"\\right)")),u+=":"+c,u}}return Fr(r,"name",ly),r},{isClass:!0,isNode:!0}),cy="RelationalNode",GRe=["Node"],HRe=ee(cy,GRe,t=>{var{Node:e}=t,n={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class r extends e{constructor(i,s){if(super(),!Array.isArray(i))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(s))throw new TypeError("Parameter params must be an array");if(i.length!==s.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=i,this.params=s}get type(){return cy}get isRelationalNode(){return!0}_compile(i,s){var o=this,u=this.params.map(l=>l._compile(i,s));return function(c,f,d){for(var h,m=u[0](c,f,d),v=0;v<o.conditionals.length;v++){h=m,m=u[v+1](c,f,d);var y=Pa(i,o.conditionals[v]);if(!y(h,m))return!1}return!0}}forEach(i){this.params.forEach((s,o)=>i(s,"params["+o+"]",this),this)}map(i){return new r(this.conditionals.slice(),this.params.map((s,o)=>this._ifNode(i(s,"params["+o+"]",this)),this))}clone(){return new r(this.conditionals,this.params)}_toString(i){for(var s=i&&i.parenthesis?i.parenthesis:"keep",o=An(this,s,i&&i.implicit),u=this.params.map(function(f,d){var h=An(f,s,i&&i.implicit);return s==="all"||h!==null&&h<=o?"("+f.toString(i)+")":f.toString(i)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=" "+n[this.conditionals[c]],l+=" "+u[c+1];return l}toJSON(){return{mathjs:cy,conditionals:this.conditionals,params:this.params}}static fromJSON(i){return new r(i.conditionals,i.params)}_toHTML(i){for(var s=i&&i.parenthesis?i.parenthesis:"keep",o=An(this,s,i&&i.implicit),u=this.params.map(function(f,d){var h=An(f,s,i&&i.implicit);return s==="all"||h!==null&&h<=o?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(i)}),l=u[0],c=0;c<this.conditionals.length;c++)l+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Hi(n[this.conditionals[c]])+"</span>"+u[c+1];return l}_toTex(i){for(var s=i&&i.parenthesis?i.parenthesis:"keep",o=An(this,s,i&&i.implicit),u=this.params.map(function(f,d){var h=An(f,s,i&&i.implicit);return s==="all"||h!==null&&h<=o?"\\left("+f.toTex(i)+"\right)":f.toTex(i)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=pn[this.conditionals[c]]+u[c+1];return l}}return Fr(r,"name",cy),r},{isClass:!0,isNode:!0}),jRe="SymbolNode",XRe=["math","?Unit","Node"],KRe=ee(jRe,XRe,t=>{var{math:e,Unit:n,Node:r}=t;function a(s){return n?n.isValuelessUnit(s):!1}class i extends r{constructor(o){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');this.name=o}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(o,u){var l=this.name;if(u[l]===!0)return function(f,d,h){return Pa(d,l)};if(l in o)return function(f,d,h){return f.has(l)?f.get(l):Pa(o,l)};var c=a(l);return function(f,d,h){return f.has(l)?f.get(l):c?new n(null,l):i.onUndefinedSymbol(l)}}forEach(o){}map(o){return this.clone()}static onUndefinedSymbol(o){throw new Error("Undefined symbol "+o)}clone(){return new i(this.name)}_toString(o){return this.name}_toHTML(o){var u=Hi(this.name);return u==="true"||u==="false"?'<span class="math-symbol math-boolean">'+u+"</span>":u==="i"?'<span class="math-symbol math-imaginary-symbol">'+u+"</span>":u==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+u+"</span>":u==="NaN"?'<span class="math-symbol math-nan-symbol">'+u+"</span>":u==="null"?'<span class="math-symbol math-null-symbol">'+u+"</span>":u==="undefined"?'<span class="math-symbol math-undefined-symbol">'+u+"</span>":'<span class="math-symbol">'+u+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(o){return new i(o.name)}_toTex(o){var u=!1;typeof e[this.name]>"u"&&a(this.name)&&(u=!0);var l=aW(this.name,u);return l[0]==="\\"?l:" "+l}}return i},{isClass:!0,isNode:!0}),fy="FunctionNode",YRe=["math","Node","SymbolNode"],ZRe=ee(fy,YRe,t=>{var e,{math:n,Node:r,SymbolNode:a}=t,i=u=>Xt(u,{truncate:78});function s(u,l,c){for(var f="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,h=0,m;(m=d.exec(u))!==null;)if(f+=u.substring(h,m.index),h=m.index,m[0]==="$$")f+="$",h++;else{h+=m[0].length;var v=l[m[1]];if(!v)throw new ReferenceError("Template: Property "+m[1]+" does not exist.");if(m[2]===void 0)switch(typeof v){case"string":f+=v;break;case"object":if(Dn(v))f+=v.toTex(c);else if(Array.isArray(v))f+=v.map(function(y,b){if(Dn(y))return y.toTex(c);throw new TypeError("Template: "+m[1]+"["+b+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes")}else if(Dn(v[m[2]]&&v[m[2]]))f+=v[m[2]].toTex(c);else throw new TypeError("Template: "+m[1]+"["+m[2]+"] is not a Node.")}return f+=u.slice(h),f}class o extends r{constructor(l,c){if(super(),typeof l=="string"&&(l=new a(l)),!Dn(l))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(Dn))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=l,this.args=c||[]}get name(){return this.fn.name||""}get type(){return fy}get isFunctionNode(){return!0}_compile(l,c){var f=this.args.map(k=>k._compile(l,c));if(jr(this.fn)){var d=this.fn.name;if(c[d]){var b=this.args;return function(T,I,$){var O=Pa(I,d);if(typeof O!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(i(O)));if(O.rawArgs)return O(b,l,Wp(T,I));var B=f.map(z=>z(T,I,$));return O.apply(O,B)}}else{var h=d in l?Pa(l,d):void 0,m=typeof h=="function"&&h.rawArgs===!0,v=k=>{var T;if(k.has(d))T=k.get(d);else if(d in l)T=Pa(l,d);else return o.onUndefinedFunction(d);if(typeof T=="function")return T;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(i(T)))};if(m){var y=this.args;return function(T,I,$){var O=v(T);if(O.rawArgs===!0)return O(y,l,Wp(T,I));var B=f.map(z=>z(T,I,$));return O(...B)}}else switch(f.length){case 0:return function(T,I,$){var O=v(T);return O()};case 1:return function(T,I,$){var O=v(T),B=f[0];return O(B(T,I,$))};case 2:return function(T,I,$){var O=v(T),B=f[0],z=f[1];return O(B(T,I,$),z(T,I,$))};default:return function(T,I,$){var O=v(T),B=f.map(z=>z(T,I,$));return O(...B)}}}}else if(hc(this.fn)&&_d(this.fn.index)&&this.fn.index.isObjectProperty()){var w=this.fn.object._compile(l,c),x=this.fn.index.getObjectProperty(),S=this.args;return function(T,I,$){var O=w(T,I,$),B=TEe(O,x);if(B!=null&&B.rawArgs)return B(S,l,Wp(T,I));var z=f.map(L=>L(T,I,$));return B.apply(O,z)}}else{var C=this.fn.toString(),E=this.fn._compile(l,c),A=this.args;return function(T,I,$){var O=E(T,I,$);if(typeof O!="function")throw new TypeError("Expression '".concat(C,"' did not evaluate to a function; value is:")+`
  `.concat(i(O)));if(O.rawArgs)return O(A,l,Wp(T,I));var B=f.map(z=>z(T,I,$));return O.apply(O,B)}}}forEach(l){l(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)l(this.args[c],"args["+c+"]",this)}map(l){for(var c=this._ifNode(l(this.fn,"fn",this)),f=[],d=0;d<this.args.length;d++)f[d]=this._ifNode(l(this.args[d],"args["+d+"]",this));return new o(c,f)}clone(){return new o(this.fn,this.args.slice(0))}toString(l){var c,f=this.fn.toString(l);return l&&typeof l.handler=="object"&&dt(l.handler,f)&&(c=l.handler[f](this,l)),typeof c<"u"?c:super.toString(l)}_toString(l){var c=this.args.map(function(d){return d.toString(l)}),f=eg(this.fn)?"("+this.fn.toString(l)+")":this.fn.toString(l);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:fy,fn:this.fn,args:this.args}}_toHTML(l){var c=this.args.map(function(f){return f.toHTML(l)});return'<span class="math-function">'+Hi(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(l){var c;return l&&typeof l.handler=="object"&&dt(l.handler,this.name)&&(c=l.handler[this.name](this,l)),typeof c<"u"?c:super.toTex(l)}_toTex(l){var c=this.args.map(function(h){return h.toTex(l)}),f;jR[this.name]&&(f=jR[this.name]),n[this.name]&&(typeof n[this.name].toTex=="function"||typeof n[this.name].toTex=="object"||typeof n[this.name].toTex=="string")&&(f=n[this.name].toTex);var d;switch(typeof f){case"function":d=f(this,l);break;case"string":d=s(f,this,l);break;case"object":switch(typeof f[c.length]){case"function":d=f[c.length](this,l);break;case"string":d=s(f[c.length],this,l);break}}return typeof d<"u"?d:s(IRe,this,l)}getIdentifier(){return this.type+":"+this.name}}return e=o,Fr(o,"name",fy),Fr(o,"onUndefinedFunction",function(u){throw new Error("Undefined function "+u)}),Fr(o,"fromJSON",function(u){return new e(u.fn,u.args)}),o},{isClass:!0,isNode:!0}),KR="parse",QRe=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],JRe=ee(KR,QRe,t=>{var{typed:e,numeric:n,config:r,AccessorNode:a,ArrayNode:i,AssignmentNode:s,BlockNode:o,ConditionalNode:u,ConstantNode:l,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:d,ObjectNode:h,OperatorNode:m,ParenthesisNode:v,RangeNode:y,RelationalNode:b,SymbolNode:w}=t,x=e(KR,{string:function(fe){return q(fe,{})},"Array | Matrix":function(fe){return S(fe,{})},"string, Object":function(fe,ke){var Ve=ke.nodes!==void 0?ke.nodes:{};return q(fe,Ve)},"Array | Matrix, Object":S});function S(V){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ke=fe.nodes!==void 0?fe.nodes:{};return zt(V,function(Ve){if(typeof Ve!="string")throw new TypeError("String expected");return q(Ve,ke)})}var C={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},E={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},A={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},k={true:!0,false:!1,null:null,undefined:void 0},T=["NaN","Infinity"],I={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function $(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:C.NULL,nestingLevel:0,conditionalLevel:null}}function O(V,fe){return V.expression.substr(V.index,fe)}function B(V){return O(V,1)}function z(V){V.index++}function L(V){return V.expression.charAt(V.index-1)}function F(V){return V.expression.charAt(V.index+1)}function R(V){for(V.tokenType=C.NULL,V.token="",V.comment="";;){if(B(V)==="#")for(;B(V)!==`
`&&B(V)!=="";)V.comment+=B(V),z(V);if(x.isWhitespace(B(V),V.nestingLevel))z(V);else break}if(B(V)===""){V.tokenType=C.DELIMITER;return}if(B(V)===`
`&&!V.nestingLevel){V.tokenType=C.DELIMITER,V.token=B(V),z(V);return}var fe=B(V),ke=O(V,2),Ve=O(V,3);if(Ve.length===3&&E[Ve]){V.tokenType=C.DELIMITER,V.token=Ve,z(V),z(V),z(V);return}if(ke.length===2&&E[ke]){V.tokenType=C.DELIMITER,V.token=ke,z(V),z(V);return}if(E[fe]){V.tokenType=C.DELIMITER,V.token=fe,z(V);return}if(x.isDigitDot(fe)){V.tokenType=C.NUMBER;var Dt=O(V,2);if(Dt==="0b"||Dt==="0o"||Dt==="0x"){for(V.token+=B(V),z(V),V.token+=B(V),z(V);x.isHexDigit(B(V));)V.token+=B(V),z(V);if(B(V)===".")for(V.token+=".",z(V);x.isHexDigit(B(V));)V.token+=B(V),z(V);else if(B(V)==="i")for(V.token+="i",z(V);x.isDigit(B(V));)V.token+=B(V),z(V);return}if(B(V)==="."){if(V.token+=B(V),z(V),!x.isDigit(B(V))){V.tokenType=C.DELIMITER;return}}else{for(;x.isDigit(B(V));)V.token+=B(V),z(V);x.isDecimalMark(B(V),F(V))&&(V.token+=B(V),z(V))}for(;x.isDigit(B(V));)V.token+=B(V),z(V);if(B(V)==="E"||B(V)==="e"){if(x.isDigit(F(V))||F(V)==="-"||F(V)==="+"){if(V.token+=B(V),z(V),(B(V)==="+"||B(V)==="-")&&(V.token+=B(V),z(V)),!x.isDigit(B(V)))throw Nt(V,'Digit expected, got "'+B(V)+'"');for(;x.isDigit(B(V));)V.token+=B(V),z(V);if(x.isDecimalMark(B(V),F(V)))throw Nt(V,'Digit expected, got "'+B(V)+'"')}else if(F(V)===".")throw z(V),Nt(V,'Digit expected, got "'+B(V)+'"')}return}if(x.isAlpha(B(V),L(V),F(V))){for(;x.isAlpha(B(V),L(V),F(V))||x.isDigit(B(V));)V.token+=B(V),z(V);dt(A,V.token)?V.tokenType=C.DELIMITER:V.tokenType=C.SYMBOL;return}for(V.tokenType=C.UNKNOWN;B(V)!=="";)V.token+=B(V),z(V);throw Nt(V,'Syntax error in part "'+V.token+'"')}function W(V){do R(V);while(V.token===`
`)}function M(V){V.nestingLevel++}function j(V){V.nestingLevel--}x.isAlpha=function(fe,ke,Ve){return x.isValidLatinOrGreek(fe)||x.isValidMathSymbol(fe,Ve)||x.isValidMathSymbol(ke,fe)},x.isValidLatinOrGreek=function(fe){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(fe)},x.isValidMathSymbol=function(fe,ke){return/^[\uD835]$/.test(fe)&&/^[\uDC00-\uDFFF]$/.test(ke)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(ke)},x.isWhitespace=function(fe,ke){return fe===" "||fe==="	"||fe===`
`&&ke>0},x.isDecimalMark=function(fe,ke){return fe==="."&&ke!=="/"&&ke!=="*"&&ke!=="^"},x.isDigitDot=function(fe){return fe>="0"&&fe<="9"||fe==="."},x.isDigit=function(fe){return fe>="0"&&fe<="9"},x.isHexDigit=function(fe){return fe>="0"&&fe<="9"||fe>="a"&&fe<="f"||fe>="A"&&fe<="F"};function q(V,fe){var ke=$();kr(ke,{expression:V,extraNodes:fe}),R(ke);var Ve=H(ke);if(ke.token!=="")throw ke.tokenType===C.DELIMITER?xn(ke,"Unexpected operator "+ke.token):Nt(ke,'Unexpected part "'+ke.token+'"');return Ve}function H(V){var fe,ke=[],Ve;for(V.token!==""&&V.token!==`
`&&V.token!==";"&&(fe=G(V),V.comment&&(fe.comment=V.comment));V.token===`
`||V.token===";";)ke.length===0&&fe&&(Ve=V.token!==";",ke.push({node:fe,visible:Ve})),R(V),V.token!==`
`&&V.token!==";"&&V.token!==""&&(fe=G(V),V.comment&&(fe.comment=V.comment),Ve=V.token!==";",ke.push({node:fe,visible:Ve}));return ke.length>0?new o(ke):(fe||(fe=new l(void 0),V.comment&&(fe.comment=V.comment)),fe)}function G(V){var fe,ke,Ve,Dt,$t=ne(V);if(V.token==="="){if(jr($t))return fe=$t.name,W(V),Ve=G(V),new s(new w(fe),Ve);if(hc($t))return W(V),Ve=G(V),new s($t.object,$t.index,Ve);if(ju($t)&&jr($t.fn)&&(Dt=!0,ke=[],fe=$t.name,$t.args.forEach(function(ar,Bc){jr(ar)?ke[Bc]=ar.name:Dt=!1}),Dt))return W(V),Ve=G(V),new c(fe,ke,Ve);throw Nt(V,"Invalid left hand side of assignment operator =")}return $t}function ne(V){for(var fe=ue(V);V.token==="?";){var ke=V.conditionalLevel;V.conditionalLevel=V.nestingLevel,W(V);var Ve=fe,Dt=G(V);if(V.token!==":")throw Nt(V,"False part of conditional expression expected");V.conditionalLevel=null,W(V);var $t=G(V);fe=new u(Ve,Dt,$t),V.conditionalLevel=ke}return fe}function ue(V){for(var fe=te(V);V.token==="or";)W(V),fe=new m("or","or",[fe,te(V)]);return fe}function te(V){for(var fe=se(V);V.token==="xor";)W(V),fe=new m("xor","xor",[fe,se(V)]);return fe}function se(V){for(var fe=J(V);V.token==="and";)W(V),fe=new m("and","and",[fe,J(V)]);return fe}function J(V){for(var fe=K(V);V.token==="|";)W(V),fe=new m("|","bitOr",[fe,K(V)]);return fe}function K(V){for(var fe=ae(V);V.token==="^|";)W(V),fe=new m("^|","bitXor",[fe,ae(V)]);return fe}function ae(V){for(var fe=pe(V);V.token==="&";)W(V),fe=new m("&","bitAnd",[fe,pe(V)]);return fe}function pe(V){for(var fe=[he(V)],ke=[],Ve={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};dt(Ve,V.token);){var Dt={name:V.token,fn:Ve[V.token]};ke.push(Dt),W(V),fe.push(he(V))}return fe.length===1?fe[0]:fe.length===2?new m(ke[0].name,ke[0].fn,fe):new b(ke.map($t=>$t.fn),fe)}function he(V){var fe,ke,Ve,Dt;fe=Se(V);for(var $t={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};dt($t,V.token);)ke=V.token,Ve=$t[ke],W(V),Dt=[fe,Se(V)],fe=new m(ke,Ve,Dt);return fe}function Se(V){var fe,ke,Ve,Dt;fe=Ee(V);for(var $t={to:"to",in:"to"};dt($t,V.token);)ke=V.token,Ve=$t[ke],W(V),ke==="in"&&V.token===""?fe=new m("*","multiply",[fe,new w("in")],!0):(Dt=[fe,Ee(V)],fe=new m(ke,Ve,Dt));return fe}function Ee(V){var fe,ke=[];if(V.token===":"?fe=new l(1):fe=Z(V),V.token===":"&&V.conditionalLevel!==V.nestingLevel){for(ke.push(fe);V.token===":"&&ke.length<3;)W(V),V.token===")"||V.token==="]"||V.token===","||V.token===""?ke.push(new w("end")):ke.push(Z(V));ke.length===3?fe=new y(ke[0],ke[2],ke[1]):fe=new y(ke[0],ke[1])}return fe}function Z(V){var fe,ke,Ve,Dt;fe=ie(V);for(var $t={"+":"add","-":"subtract"};dt($t,V.token);){ke=V.token,Ve=$t[ke],W(V);var ar=ie(V);ar.isPercentage?Dt=[fe,new m("*","multiply",[fe,ar])]:Dt=[fe,ar],fe=new m(ke,Ve,Dt)}return fe}function ie(V){var fe,ke,Ve,Dt;fe=ve(V),ke=fe;for(var $t={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};dt($t,V.token);)if(Ve=V.token,Dt=$t[Ve],W(V),Ve==="%"&&V.tokenType===C.DELIMITER&&V.token!=="(")if(V.token!==""&&$t[V.token]){var ar=new m("/","divide",[fe,new l(100)],!1,!0);Ve=V.token,Dt=$t[Ve],W(V),ke=ve(V),fe=new m(Ve,Dt,[ar,ke])}else fe=new m("/","divide",[fe,new l(100)],!1,!0);else ke=ve(V),fe=new m(Ve,Dt,[fe,ke]);return fe}function ve(V){var fe,ke;for(fe=we(V),ke=fe;V.tokenType===C.SYMBOL||V.token==="in"&&sn(fe)||V.token==="in"&&pr(fe)&&fe.fn==="unaryMinus"&&sn(fe.args[0])||V.tokenType===C.NUMBER&&!sn(ke)&&(!pr(ke)||ke.op==="!")||V.token==="(";)ke=we(V),fe=new m("*","multiply",[fe,ke],!0);return fe}function we(V){for(var fe=Fe(V),ke=fe,Ve=[];V.token==="/"&&_S(ke);)if(Ve.push(kr({},V)),W(V),V.tokenType===C.NUMBER)if(Ve.push(kr({},V)),W(V),V.tokenType===C.SYMBOL||V.token==="("||V.token==="in")kr(V,Ve.pop()),Ve.pop(),ke=Fe(V),fe=new m("/","divide",[fe,ke]);else{Ve.pop(),kr(V,Ve.pop());break}else{kr(V,Ve.pop());break}return fe}function Fe(V){var fe,ke,Ve,Dt={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return dt(Dt,V.token)?(Ve=Dt[V.token],fe=V.token,W(V),ke=[Fe(V)],new m(fe,Ve,ke)):Re(V)}function Re(V){var fe,ke,Ve,Dt;return fe=Ge(V),(V.token==="^"||V.token===".^")&&(ke=V.token,Ve=ke==="^"?"pow":"dotPow",W(V),Dt=[fe,Fe(V)],fe=new m(ke,Ve,Dt)),fe}function Ge(V){var fe,ke,Ve,Dt;fe=Ze(V);for(var $t={"!":"factorial","'":"ctranspose"};dt($t,V.token);)ke=V.token,Ve=$t[ke],R(V),Dt=[fe],fe=new m(ke,Ve,Dt),fe=ce(V,fe);return fe}function Ze(V){var fe=[];if(V.tokenType===C.SYMBOL&&dt(V.extraNodes,V.token)){var ke=V.extraNodes[V.token];if(R(V),V.token==="("){if(fe=[],M(V),R(V),V.token!==")")for(fe.push(G(V));V.token===",";)R(V),fe.push(G(V));if(V.token!==")")throw Nt(V,"Parenthesis ) expected");j(V),R(V)}return new ke(fe)}return re(V)}function re(V){var fe,ke;return V.tokenType===C.SYMBOL||V.tokenType===C.DELIMITER&&V.token in A?(ke=V.token,R(V),dt(k,ke)?fe=new l(k[ke]):T.includes(ke)?fe=new l(n(ke,"number")):fe=new w(ke),fe=ce(V,fe),fe):Ce(V)}function ce(V,fe,ke){for(var Ve;(V.token==="("||V.token==="["||V.token===".")&&!ke;)if(Ve=[],V.token==="(")if(jr(fe)||hc(fe)){if(M(V),R(V),V.token!==")")for(Ve.push(G(V));V.token===",";)R(V),Ve.push(G(V));if(V.token!==")")throw Nt(V,"Parenthesis ) expected");j(V),R(V),fe=new f(fe,Ve)}else return fe;else if(V.token==="["){if(M(V),R(V),V.token!=="]")for(Ve.push(G(V));V.token===",";)R(V),Ve.push(G(V));if(V.token!=="]")throw Nt(V,"Parenthesis ] expected");j(V),R(V),fe=new a(fe,new d(Ve))}else{R(V);var Dt=V.tokenType===C.SYMBOL||V.tokenType===C.DELIMITER&&V.token in A;if(!Dt)throw Nt(V,"Property name expected after dot");Ve.push(new l(V.token)),R(V);var $t=!0;fe=new a(fe,new d(Ve,$t))}return fe}function Ce(V){var fe,ke;return V.token==='"'||V.token==="'"?(ke=$e(V,V.token),fe=new l(ke),fe=ce(V,fe),fe):Be(V)}function $e(V,fe){for(var ke="";B(V)!==""&&B(V)!==fe;)if(B(V)==="\\"){z(V);var Ve=B(V),Dt=I[Ve];if(Dt!==void 0)ke+=Dt,V.index+=1;else if(Ve==="u"){var $t=V.expression.slice(V.index+1,V.index+5);if(/^[0-9A-Fa-f]{4}$/.test($t))ke+=String.fromCharCode(parseInt($t,16)),V.index+=5;else throw Nt(V,"Invalid unicode character \\u".concat($t))}else throw Nt(V,"Bad escape character \\".concat(Ve))}else ke+=B(V),z(V);if(R(V),V.token!==fe)throw Nt(V,"End of string ".concat(fe," expected"));return R(V),ke}function Be(V){var fe,ke,Ve,Dt;if(V.token==="["){if(M(V),R(V),V.token!=="]"){var $t=Me(V);if(V.token===";"){for(Ve=1,ke=[$t];V.token===";";)R(V),V.token!=="]"&&(ke[Ve]=Me(V),Ve++);if(V.token!=="]")throw Nt(V,"End of matrix ] expected");j(V),R(V),Dt=ke[0].items.length;for(var ar=1;ar<Ve;ar++)if(ke[ar].items.length!==Dt)throw xn(V,"Column dimensions mismatch ("+ke[ar].items.length+" !== "+Dt+")");fe=new i(ke)}else{if(V.token!=="]")throw Nt(V,"End of matrix ] expected");j(V),R(V),fe=$t}}else j(V),R(V),fe=new i([]);return ce(V,fe)}return Qe(V)}function Me(V){for(var fe=[G(V)],ke=1;V.token===",";)R(V),V.token!=="]"&&V.token!==";"&&(fe[ke]=G(V),ke++);return new i(fe)}function Qe(V){if(V.token==="{"){M(V);var fe,ke={};do if(R(V),V.token!=="}"){if(V.token==='"'||V.token==="'")fe=$e(V,V.token);else if(V.tokenType===C.SYMBOL||V.tokenType===C.DELIMITER&&V.token in A)fe=V.token,R(V);else throw Nt(V,"Symbol or string expected as object key");if(V.token!==":")throw Nt(V,"Colon : expected after object key");R(V),ke[fe]=G(V)}while(V.token===",");if(V.token!=="}")throw Nt(V,"Comma , or bracket } expected after object value");j(V),R(V);var Ve=new h(ke);return Ve=ce(V,Ve),Ve}return qe(V)}function qe(V){var fe;if(V.tokenType===C.NUMBER){fe=V.token,R(V);var ke=ll(fe,r),Ve=n(fe,ke);return new l(Ve)}return et(V)}function et(V){var fe;if(V.token==="("){if(M(V),R(V),fe=G(V),V.token!==")")throw Nt(V,"Parenthesis ) expected");return j(V),R(V),fe=new v(fe),fe=ce(V,fe),fe}return Ye(V)}function Ye(V){throw V.token===""?Nt(V,"Unexpected end of expression"):Nt(V,"Value expected")}function Ht(V){return V.index-V.token.length+1}function Nt(V,fe){var ke=Ht(V),Ve=new SyntaxError(fe+" (char "+ke+")");return Ve.char=ke,Ve}function xn(V,fe){var ke=Ht(V),Ve=new SyntaxError(fe+" (char "+ke+")");return Ve.char=ke,Ve}return e.addConversion({from:"string",to:"Node",convert:x}),x}),YR="compile",eMe=["typed","parse"],tMe=ee(YR,eMe,t=>{var{typed:e,parse:n}=t;return e(YR,{string:function(a){return n(a).compile()},"Array | Matrix":function(a){return zt(a,function(i){return n(i).compile()})}})}),ZR="evaluate",nMe=["typed","parse"],rMe=ee(ZR,nMe,t=>{var{typed:e,parse:n}=t;return e(ZR,{string:function(a){var i=xh();return n(a).compile().evaluate(i)},"string, Map | Object":function(a,i){return n(a).compile().evaluate(i)},"Array | Matrix":function(a){var i=xh();return zt(a,function(s){return n(s).compile().evaluate(i)})},"Array | Matrix, Map | Object":function(a,i){return zt(a,function(s){return n(s).compile().evaluate(i)})}})}),aMe="Parser",iMe=["evaluate","parse"],sMe=ee(aMe,iMe,t=>{var{evaluate:e,parse:n}=t;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:xh(),writable:!1})}r.prototype.type="Parser",r.prototype.isParser=!0,r.prototype.evaluate=function(i){return e(i,this.scope)},r.prototype.get=function(i){if(this.scope.has(i))return this.scope.get(i)},r.prototype.getAll=function(){return kEe(this.scope)},r.prototype.getAllAsMap=function(){return this.scope};function a(i){if(i.length===0)return!1;for(var s=0;s<i.length;s++){var o=i.charAt(s-1),u=i.charAt(s),l=i.charAt(s+1),c=n.isAlpha(u,o,l)||s>0&&n.isDigit(u);if(!c)return!1}return!0}return r.prototype.set=function(i,s){if(!a(i))throw new Error("Invalid variable name: '".concat(i,"'. Variable names must follow the specified rules."));return this.scope.set(i,s),s},r.prototype.remove=function(i){this.scope.delete(i)},r.prototype.clear=function(){this.scope.clear()},r},{isClass:!0}),QR="parser",oMe=["typed","Parser"],uMe=ee(QR,oMe,t=>{var{typed:e,Parser:n}=t;return e(QR,{"":function(){return new n}})}),JR="lup",lMe=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],cMe=ee(JR,lMe,t=>{var{typed:e,matrix:n,abs:r,addScalar:a,divideScalar:i,multiplyScalar:s,subtractScalar:o,larger:u,equalScalar:l,unaryMinus:c,DenseMatrix:f,SparseMatrix:d,Spa:h}=t;return e(JR,{DenseMatrix:function(b){return m(b)},SparseMatrix:function(b){return v(b)},Array:function(b){var w=n(b),x=m(w);return{L:x.L.valueOf(),U:x.U.valueOf(),p:x.p}}});function m(y){var b=y._size[0],w=y._size[1],x=Math.min(b,w),S=Bt(y._data),C=[],E=[b,x],A=[],k=[x,w],T,I,$,O=[];for(T=0;T<b;T++)O[T]=T;for(I=0;I<w;I++){if(I>0)for(T=0;T<b;T++){var B=Math.min(T,I),z=0;for($=0;$<B;$++)z=a(z,s(S[T][$],S[$][I]));S[T][I]=o(S[T][I],z)}var L=I,F=0,R=0;for(T=I;T<b;T++){var W=S[T][I],M=r(W);u(M,F)&&(L=T,F=M,R=W)}if(I!==L&&(O[I]=[O[L],O[L]=O[I]][0],f._swapRows(I,L,S)),I<b)for(T=I+1;T<b;T++){var j=S[T][I];l(j,0)||(S[T][I]=i(S[T][I],R))}}for(I=0;I<w;I++)for(T=0;T<b;T++){if(I===0&&(T<w&&(A[T]=[]),C[T]=[]),T<I){T<w&&(A[T][I]=S[T][I]),I<b&&(C[T][I]=0);continue}if(T===I){T<w&&(A[T][I]=S[T][I]),I<b&&(C[T][I]=1);continue}T<w&&(A[T][I]=0),I<b&&(C[T][I]=S[T][I])}var q=new f({data:C,size:E}),H=new f({data:A,size:k}),G=[];for(T=0,x=O.length;T<x;T++)G[O[T]]=T;return{L:q,U:H,p:G,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function v(y){var b=y._size[0],w=y._size[1],x=Math.min(b,w),S=y._values,C=y._index,E=y._ptr,A=[],k=[],T=[],I=[b,x],$=[],O=[],B=[],z=[x,w],L,F,R,W=[],M=[];for(L=0;L<b;L++)W[L]=L,M[L]=L;var j=function(G,ne){var ue=M[G],te=M[ne];W[ue]=ne,W[te]=G,M[G]=te,M[ne]=ue},q=function(){var G=new h;F<b&&(T.push(A.length),A.push(1),k.push(F)),B.push($.length);var ne=E[F],ue=E[F+1];for(R=ne;R<ue;R++)L=C[R],G.set(W[L],S[R]);F>0&&G.forEach(0,F-1,function(K,ae){d._forEachRow(K,A,k,T,function(pe,he){pe>K&&G.accumulate(pe,c(s(he,ae)))})});var te=F,se=G.get(F),J=r(se);G.forEach(F+1,b-1,function(K,ae){var pe=r(ae);u(pe,J)&&(te=K,J=pe,se=ae)}),F!==te&&(d._swapRows(F,te,I[1],A,k,T),d._swapRows(F,te,z[1],$,O,B),G.swap(F,te),j(F,te)),G.forEach(0,b-1,function(K,ae){K<=F?($.push(ae),O.push(K)):(ae=i(ae,se),l(ae,0)||(A.push(ae),k.push(K)))})};for(F=0;F<w;F++)q();return B.push($.length),T.push(A.length),{L:new d({values:A,index:k,ptr:T,size:I}),U:new d({values:$,index:O,ptr:B,size:z}),p:W,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),eM="qr",fMe=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],dMe=ee(eM,fMe,t=>{var{typed:e,matrix:n,zeros:r,identity:a,isZero:i,equal:s,sign:o,sqrt:u,conj:l,unaryMinus:c,addScalar:f,divideScalar:d,multiplyScalar:h,subtractScalar:m,complex:v}=t;return kr(e(eM,{DenseMatrix:function(S){return b(S)},SparseMatrix:function(S){return w()},Array:function(S){var C=n(S),E=b(C);return{Q:E.Q.valueOf(),R:E.R.valueOf()}}}),{_denseQRimpl:y});function y(x){var S=x._size[0],C=x._size[1],E=a([S],"dense"),A=E._data,k=x.clone(),T=k._data,I,$,O,B=r([S],"");for(O=0;O<Math.min(C,S);++O){var z=T[O][O],L=c(s(z,0)?1:o(z)),F=l(L),R=0;for(I=O;I<S;I++)R=f(R,h(T[I][O],l(T[I][O])));var W=h(L,u(R));if(!i(W)){var M=m(z,W);for(B[O]=1,I=O+1;I<S;I++)B[I]=d(T[I][O],M);var j=c(l(d(M,W))),q=void 0;for($=O;$<C;$++){for(q=0,I=O;I<S;I++)q=f(q,h(l(B[I]),T[I][$]));for(q=h(q,j),I=O;I<S;I++)T[I][$]=h(m(T[I][$],h(B[I],q)),F)}for(I=0;I<S;I++){for(q=0,$=O;$<S;$++)q=f(q,h(A[I][$],B[$]));for(q=h(q,j),$=O;$<S;++$)A[I][$]=d(m(A[I][$],h(q,l(B[$]))),F)}}}return{Q:E,R:k,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function b(x){var S=y(x),C=S.R._data;if(x._data.length>0)for(var E=C[0][0].type==="Complex"?v(0):0,A=0;A<C.length;++A)for(var k=0;k<A&&k<(C[0]||[]).length;++k)C[A][k]=E;return S}function w(x){throw new Error("qr not implemented for sparse matrices yet")}});function pMe(t,e,n,r){t._values;for(var a=t._index,i=t._ptr,s=t._size,o=t._datatype,u=s[0],l=s[1],c=null,f=[],d=[],h=0,m=0;m<l;m++){d[m]=h;for(var v=n?n[m]:m,y=i[v],b=i[v+1],w=y;w<b;w++){var x=a[w];f[h]=x,h++}}return d[l]=h,t.createSparseMatrix({values:c,index:f,ptr:d,size:[u,l],datatype:o})}function iW(t,e,n,r,a,i,s){var o=0;for(n[s]=t;o>=0;){var u=n[s+o],l=n[r+u];l===-1?(o--,i[e++]=u):(n[r+u]=n[a+l],++o,n[s+o]=l)}return e}function hMe(t,e){if(!t)return null;var n=0,r,a=[],i=[],s=0,o=e,u=2*e;for(r=0;r<e;r++)i[s+r]=-1;for(r=e-1;r>=0;r--)t[r]!==-1&&(i[o+r]=i[s+t[r]],i[s+t[r]]=r);for(r=0;r<e;r++)t[r]===-1&&(n=iW(r,n,i,s,o,a,u));return a}function mMe(t,e){if(!t)return null;var n=t._index,r=t._ptr,a=t._size,i=a[0],s=a[1],o=[],u=[],l=0,c=s,f,d;for(f=0;f<i;f++)u[c+f]=-1;for(var h=0;h<s;h++){o[h]=-1,u[l+h]=-1;for(var m=r[h],v=r[h+1],y=m;y<v;y++){var b=n[y];for(f=u[c+b];f!==-1&&f<h;f=d)d=u[l+f],u[l+f]=h,d===-1&&(o[f]=h);u[c+b]=h}}return o}function gMe(t,e,n){for(var r=t._values,a=t._index,i=t._ptr,s=t._size,o=s[1],u=0,l=0;l<o;l++){var c=i[l];for(i[l]=u;c<i[l+1];c++)e(a[c],l,r?r[c]:1,n)&&(a[u]=a[c],r&&(r[u]=r[c]),u++)}return i[o]=u,a.splice(u,a.length-u),r&&r.splice(u,r.length-u),u}function Nu(t){return-t-2}var vMe="csAmd",yMe=["add","multiply","transpose"],bMe=ee(vMe,yMe,t=>{var{add:e,multiply:n,transpose:r}=t;return function(c,f){if(!f||c<=0||c>3)return null;var d=f._size,h=d[0],m=d[1],v=0,y=Math.max(16,10*Math.sqrt(m));y=Math.min(m-2,y);var b=a(c,f,h,m,y);gMe(b,u,null);for(var w=b._index,x=b._ptr,S=x[m],C=[],E=[],A=0,k=m+1,T=2*(m+1),I=3*(m+1),$=4*(m+1),O=5*(m+1),B=6*(m+1),z=7*(m+1),L=C,F=i(m,x,E,A,I,L,T,z,k,B,$,O),R=s(m,x,E,O,$,B,y,k,I,L,T),W=0,M,j,q,H,G,ne,ue,te,se,J,K,ae,pe,he,Se,Ee;R<m;){for(q=-1;W<m&&(q=E[I+W])===-1;W++);E[T+q]!==-1&&(L[E[T+q]]=-1),E[I+W]=E[T+q];var Z=E[$+q],ie=E[k+q];R+=ie;var ve=0;E[k+q]=-ie;var we=x[q],Fe=Z===0?we:S,Re=Fe;for(H=1;H<=Z+1;H++){for(H>Z?(ne=q,ue=we,te=E[A+q]-Z):(ne=w[we++],ue=x[ne],te=E[A+ne]),G=1;G<=te;G++)M=w[ue++],!((se=E[k+M])<=0)&&(ve+=se,E[k+M]=-se,w[Re++]=M,E[T+M]!==-1&&(L[E[T+M]]=L[M]),L[M]!==-1?E[T+L[M]]=E[T+M]:E[I+E[O+M]]=E[T+M]);ne!==q&&(x[ne]=Nu(q),E[B+ne]=0)}for(Z!==0&&(S=Re),E[O+q]=ve,x[q]=Fe,E[A+q]=Re-Fe,E[$+q]=-2,F=o(F,v,E,B,m),J=Fe;J<Re;J++)if(M=w[J],!((K=E[$+M])<=0)){se=-E[k+M];var Ge=F-se;for(we=x[M],ae=x[M]+K-1;we<=ae;we++)ne=w[we],E[B+ne]>=F?E[B+ne]-=se:E[B+ne]!==0&&(E[B+ne]=E[O+ne]+Ge)}for(J=Fe;J<Re;J++){for(M=w[J],ae=x[M],pe=ae+E[$+M]-1,he=ae,Se=0,Ee=0,we=ae;we<=pe;we++)if(ne=w[we],E[B+ne]!==0){var Ze=E[B+ne]-F;Ze>0?(Ee+=Ze,w[he++]=ne,Se+=ne):(x[ne]=Nu(q),E[B+ne]=0)}E[$+M]=he-ae+1;var re=he,ce=ae+E[A+M];for(we=pe+1;we<ce;we++){j=w[we];var Ce=E[k+j];Ce<=0||(Ee+=Ce,w[he++]=j,Se+=j)}Ee===0?(x[M]=Nu(q),se=-E[k+M],ve-=se,ie+=se,R+=se,E[k+M]=0,E[$+M]=-1):(E[O+M]=Math.min(E[O+M],Ee),w[he]=w[re],w[re]=w[ae],w[ae]=q,E[A+M]=he-ae+1,Se=(Se<0?-Se:Se)%m,E[T+M]=E[z+Se],E[z+Se]=M,L[M]=Se)}for(E[O+q]=ve,v=Math.max(v,ve),F=o(F+v,v,E,B,m),J=Fe;J<Re;J++)if(M=w[J],!(E[k+M]>=0))for(Se=L[M],M=E[z+Se],E[z+Se]=-1;M!==-1&&E[T+M]!==-1;M=E[T+M],F++){for(te=E[A+M],K=E[$+M],we=x[M]+1;we<=x[M]+te-1;we++)E[B+w[we]]=F;var $e=M;for(j=E[T+M];j!==-1;){var Be=E[A+j]===te&&E[$+j]===K;for(we=x[j]+1;Be&&we<=x[j]+te-1;we++)E[B+w[we]]!==F&&(Be=0);Be?(x[j]=Nu(M),E[k+M]+=E[k+j],E[k+j]=0,E[$+j]=-1,j=E[T+j],E[T+$e]=j):($e=j,j=E[T+j])}}for(we=Fe,J=Fe;J<Re;J++)M=w[J],!((se=-E[k+M])<=0)&&(E[k+M]=se,Ee=E[O+M]+ve-se,Ee=Math.min(Ee,m-R-se),E[I+Ee]!==-1&&(L[E[I+Ee]]=M),E[T+M]=E[I+Ee],L[M]=-1,E[I+Ee]=M,W=Math.min(W,Ee),E[O+M]=Ee,w[we++]=M);E[k+q]=ie,(E[A+q]=we-Fe)===0&&(x[q]=-1,E[B+q]=0),Z!==0&&(S=we)}for(M=0;M<m;M++)x[M]=Nu(x[M]);for(j=0;j<=m;j++)E[I+j]=-1;for(j=m;j>=0;j--)E[k+j]>0||(E[T+j]=E[I+x[j]],E[I+x[j]]=j);for(ne=m;ne>=0;ne--)E[k+ne]<=0||x[ne]!==-1&&(E[T+ne]=E[I+x[ne]],E[I+x[ne]]=ne);for(q=0,M=0;M<=m;M++)x[M]===-1&&(q=iW(M,q,E,I,T,C,B));return C.splice(C.length-1,1),C};function a(l,c,f,d,h){var m=r(c);if(l===1&&d===f)return e(c,m);if(l===2){for(var v=m._index,y=m._ptr,b=0,w=0;w<f;w++){var x=y[w];if(y[w]=b,!(y[w+1]-x>h))for(var S=y[w+1];x<S;x++)v[b++]=v[x]}return y[f]=b,c=r(m),n(m,c)}return n(m,c)}function i(l,c,f,d,h,m,v,y,b,w,x,S){for(var C=0;C<l;C++)f[d+C]=c[C+1]-c[C];f[d+l]=0;for(var E=0;E<=l;E++)f[h+E]=-1,m[E]=-1,f[v+E]=-1,f[y+E]=-1,f[b+E]=1,f[w+E]=1,f[x+E]=0,f[S+E]=f[d+E];var A=o(0,0,f,w,l);return f[x+l]=-2,c[l]=-1,f[w+l]=0,A}function s(l,c,f,d,h,m,v,y,b,w,x){for(var S=0,C=0;C<l;C++){var E=f[d+C];if(E===0)f[h+C]=-2,S++,c[C]=-1,f[m+C]=0;else if(E>v)f[y+C]=0,f[h+C]=-1,S++,c[C]=Nu(l),f[y+l]++;else{var A=f[b+E];A!==-1&&(w[A]=C),f[x+C]=f[b+E],f[b+E]=C}}return S}function o(l,c,f,d,h){if(l<2||l+c<0){for(var m=0;m<h;m++)f[d+m]!==0&&(f[d+m]=1);l=2}return l}function u(l,c){return l!==c}});function xMe(t,e,n,r,a,i,s){var o,u,l=0,c;if(t<=e||n[r+e]<=n[a+t])return-1;n[a+t]=n[r+e];var f=n[i+t];if(n[i+t]=e,f===-1)l=1,c=t;else{for(l=2,c=f;c!==n[s+c];c=n[s+c]);for(o=f;o!==c;o=u)u=n[s+o],n[s+o]=c}return{jleaf:l,q:c}}var wMe="csCounts",NMe=["transpose"],SMe=ee(wMe,NMe,t=>{var{transpose:e}=t;return function(n,r,a,i){if(!n||!r||!a)return null;var s=n._size,o=s[0],u=s[1],l,c,f,d,h,m,v,y=4*u+(i?u+o+1:0),b=[],w=0,x=u,S=2*u,C=3*u,E=4*u,A=5*u+1;for(f=0;f<y;f++)b[f]=-1;var k=[],T=e(n),I=T._index,$=T._ptr;for(f=0;f<u;f++)for(c=a[f],k[c]=b[C+c]===-1?1:0;c!==-1&&b[C+c]===-1;c=r[c])b[C+c]=f;if(i){for(f=0;f<u;f++)b[a[f]]=f;for(l=0;l<o;l++){for(f=u,m=$[l],v=$[l+1],h=m;h<v;h++)f=Math.min(f,b[I[h]]);b[A+l]=b[E+f],b[E+f]=l}}for(l=0;l<u;l++)b[w+l]=l;for(f=0;f<u;f++){for(c=a[f],r[c]!==-1&&k[r[c]]--,d=i?b[E+f]:c;d!==-1;d=i?b[A+d]:-1)for(h=$[d];h<$[d+1];h++){l=I[h];var O=xMe(l,c,b,C,x,S,w);O.jleaf>=1&&k[c]++,O.jleaf===2&&k[O.q]--}r[c]!==-1&&(b[w+c]=r[c])}for(c=0;c<u;c++)r[c]!==-1&&(k[r[c]]+=k[c]);return k}}),CMe="csSqr",EMe=["add","multiply","transpose"],DMe=ee(CMe,EMe,t=>{var{add:e,multiply:n,transpose:r}=t,a=bMe({add:e,multiply:n,transpose:r}),i=SMe({transpose:r});return function(u,l,c){var f=l._ptr,d=l._size,h=d[1],m,v={};if(v.q=a(u,l),u&&!v.q)return null;if(c){var y=u?pMe(l,null,v.q):l;v.parent=mMe(y);var b=hMe(v.parent,h);if(v.cp=i(y,v.parent,b,1),y&&v.parent&&v.cp&&s(y,v))for(v.unz=0,m=0;m<h;m++)v.unz+=v.cp[m]}else v.unz=4*f[h]+h,v.lnz=v.unz;return v};function s(o,u){var l=o._ptr,c=o._index,f=o._size,d=f[0],h=f[1];u.pinv=[],u.leftmost=[];var m=u.parent,v=u.pinv,y=u.leftmost,b=[],w=0,x=d,S=d+h,C=d+2*h,E,A,k,T,I;for(A=0;A<h;A++)b[x+A]=-1,b[S+A]=-1,b[C+A]=0;for(E=0;E<d;E++)y[E]=-1;for(A=h-1;A>=0;A--)for(T=l[A],I=l[A+1],k=T;k<I;k++)y[c[k]]=A;for(E=d-1;E>=0;E--)v[E]=-1,A=y[E],A!==-1&&(b[C+A]++===0&&(b[S+A]=E),b[w+E]=b[x+A],b[x+A]=E);for(u.lnz=0,u.m2=d,A=0;A<h;A++)if(E=b[x+A],u.lnz++,E<0&&(E=u.m2++),v[E]=A,!(--C[A]<=0)){u.lnz+=b[C+A];var $=m[A];$!==-1&&(b[C+$]===0&&(b[S+$]=b[S+A]),b[w+b[S+A]]=b[x+$],b[x+$]=b[w+E],b[C+$]+=b[C+A])}for(E=0;E<d;E++)v[E]<0&&(v[E]=A++);return!0}});function ZS(t,e){return t[e]<0}function sW(t,e){t[e]=Nu(t[e])}function tM(t){return t<0?Nu(t):t}function TMe(t,e,n,r,a){var i=e._index,s=e._ptr,o=e._size,u=o[1],l,c,f,d=0;for(r[0]=t;d>=0;){t=r[d];var h=a?a[t]:t;ZS(s,t)||(sW(s,t),r[u+d]=h<0?0:tM(s[h]));var m=1;for(c=r[u+d],f=h<0?0:tM(s[h+1]);c<f;c++)if(l=i[c],!ZS(s,l)){r[u+d]=c,r[++d]=l,m=0;break}m&&(d--,r[--n]=t)}return n}function $Me(t,e,n,r,a){var i=t._ptr,s=t._size,o=e._index,u=e._ptr,l=s[1],c,f,d,h=l;for(f=u[n],d=u[n+1],c=f;c<d;c++){var m=o[c];ZS(i,m)||(h=TMe(m,t,h,r,a))}for(c=h;c<l;c++)sW(i,r[c]);return h}var AMe="csSpsolve",IMe=["divideScalar","multiply","subtract"],kMe=ee(AMe,IMe,t=>{var{divideScalar:e,multiply:n,subtract:r}=t;return function(i,s,o,u,l,c,f){var d=i._values,h=i._index,m=i._ptr,v=i._size,y=v[1],b=s._values,w=s._index,x=s._ptr,S,C,E,A,k=$Me(i,s,o,u,c);for(S=k;S<y;S++)l[u[S]]=0;for(C=x[o],E=x[o+1],S=C;S<E;S++)l[w[S]]=b[S];for(var T=k;T<y;T++){var I=u[T],$=c?c[I]:I;if(!($<0))for(C=m[$],E=m[$+1],l[I]=e(l[I],d[f?C:E-1]),S=f?C+1:C,A=f?E:E-1;S<A;S++){var O=h[S];l[O]=r(l[O],n(d[S],l[I]))}}return k}}),_Me="csLu",OMe=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],FMe=ee(_Me,OMe,t=>{var{abs:e,divideScalar:n,multiply:r,subtract:a,larger:i,largerEq:s,SparseMatrix:o}=t,u=kMe({divideScalar:n,multiply:r,subtract:a});return function(c,f,d){if(!c)return null;var h=c._size,m=h[1],v,y=100,b=100;f&&(v=f.q,y=f.lnz||y,b=f.unz||b);var w=[],x=[],S=[],C=new o({values:w,index:x,ptr:S,size:[m,m]}),E=[],A=[],k=[],T=new o({values:E,index:A,ptr:k,size:[m,m]}),I=[],$,O,B=[],z=[];for($=0;$<m;$++)B[$]=0,I[$]=-1,S[$+1]=0;y=0,b=0;for(var L=0;L<m;L++){S[L]=y,k[L]=b;var F=v?v[L]:L,R=u(C,c,F,z,B,I,1),W=-1,M=-1;for(O=R;O<m;O++)if($=z[O],I[$]<0){var j=e(B[$]);i(j,M)&&(M=j,W=$)}else A[b]=I[$],E[b++]=B[$];if(W===-1||M<=0)return null;I[F]<0&&s(e(B[F]),r(M,d))&&(W=F);var q=B[W];for(A[b]=L,E[b++]=q,I[W]=L,x[y]=W,w[y++]=1,O=R;O<m;O++)$=z[O],I[$]<0&&(x[y]=$,w[y++]=n(B[$],q)),B[$]=0}for(S[m]=y,k[m]=b,O=0;O<y;O++)x[O]=I[x[O]];return w.splice(y,w.length-y),x.splice(y,x.length-y),E.splice(b,E.length-b),A.splice(b,A.length-b),{L:C,U:T,pinv:I}}}),nM="slu",RMe=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],MMe=ee(nM,RMe,t=>{var{typed:e,abs:n,add:r,multiply:a,transpose:i,divideScalar:s,subtract:o,larger:u,largerEq:l,SparseMatrix:c}=t,f=DMe({add:r,multiply:a,transpose:i}),d=FMe({abs:n,divideScalar:s,multiply:a,subtract:o,larger:u,largerEq:l,SparseMatrix:c});return e(nM,{"SparseMatrix, number, number":function(m,v,y){if(!bt(v)||v<0||v>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(y<0||y>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var b=f(v,m,!1),w=d(m,b,y);return{L:w.L,U:w.U,p:w.pinv,q:b.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function rM(t,e){var n,r=e.length,a=[];if(t)for(n=0;n<r;n++)a[t[n]]=e[n];else for(n=0;n<r;n++)a[n]=e[n];return a}var aM="lusolve",PMe=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],BMe=ee(aM,PMe,t=>{var{typed:e,matrix:n,lup:r,slu:a,usolve:i,lsolve:s,DenseMatrix:o}=t,u=ng({DenseMatrix:o});return e(aM,{"Array, Array | Matrix":function(d,h){d=n(d);var m=r(d),v=c(m.L,m.U,m.p,null,h);return v.valueOf()},"DenseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(d,h,m,v){var y=a(d,m,v);return c(y.L,y.U,y.p,y.q,h)},"Object, Array | Matrix":function(d,h){return c(d.L,d.U,d.p,d.q,h)}});function l(f){if(Tt(f))return f;if(En(f))return n(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,d,h,m,v){f=l(f),d=l(d),h&&(v=u(f,v,!0),v._data=rM(h,v._data));var y=s(f,v),b=i(d,y);return m&&(b._data=rM(m,b._data)),b}}),iM="polynomialRoot",LMe=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],zMe=ee(iM,LMe,t=>{var{typed:e,isZero:n,equalScalar:r,add:a,subtract:i,multiply:s,divide:o,sqrt:u,unaryMinus:l,cbrt:c,typeOf:f,im:d,re:h}=t;return e(iM,{"number|Complex, ...number|Complex":(m,v)=>{for(var y=[m,...v];y.length>0&&n(y[y.length-1]);)y.pop();if(y.length<2)throw new RangeError("Polynomial [".concat(m,", ").concat(v,"] must have a non-zero non-constant coefficient"));switch(y.length){case 2:return[l(o(y[0],y[1]))];case 3:{var[b,w,x]=y,S=s(2,x),C=s(w,w),E=s(4,x,b);if(r(C,E))return[o(l(w),S)];var A=u(i(C,E));return[o(i(A,w),S),o(i(l(A),w),S)]}case 4:{var[k,T,I,$]=y,O=l(s(3,$)),B=s(I,I),z=s(3,$,T),L=a(s(2,I,I,I),s(27,$,$,k)),F=s(9,$,I,T);if(r(B,z)&&r(L,F))return[o(I,O)];var R=i(B,z),W=i(L,F),M=a(s(18,$,I,T,k),s(I,I,T,T)),j=a(s(4,I,I,I,k),s(4,$,T,T,T),s(27,$,$,k,k));if(r(M,j))return[o(i(s(4,$,I,T),a(s(9,$,$,k),s(I,I,I))),s($,R)),o(i(s(9,$,k),s(I,T)),s(2,R))];var q;r(B,z)?q=W:q=o(a(W,u(i(s(W,W),s(4,R,R,R)))),2);var H=!0,G=c(q,H).toArray().map(ne=>o(a(I,ne,o(R,ne)),O));return G.map(ne=>f(ne)==="Complex"&&r(h(ne),h(ne)+d(ne))?h(ne):ne)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(y))}}})}),UMe="Help",VMe=["evaluate"],WMe=ee(UMe,VMe,t=>{var{evaluate:e}=t;function n(r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!r)throw new Error('Argument "doc" missing');this.doc=r}return n.prototype.type="Help",n.prototype.isHelp=!0,n.prototype.toString=function(){var r=this.doc||{},a=`
`;if(r.name&&(a+="Name: "+r.name+`

`),r.category&&(a+="Category: "+r.category+`

`),r.description&&(a+=`Description:
    `+r.description+`

`),r.syntax&&(a+=`Syntax:
    `+r.syntax.join(`
    `)+`

`),r.examples){a+=`Examples:
`;for(var i=!1,s=e("config()"),o={config:f=>(i=!0,e("config(newConfig)",{newConfig:f}))},u=0;u<r.examples.length;u++){var l=r.examples[u];a+="    "+l+`
`;var c=void 0;try{c=e(l,o)}catch(f){c=f}c!==void 0&&!dU(c)&&(a+="        "+Xt(c,{precision:14})+`
`)}a+=`
`,i&&e("config(originalConfig)",{originalConfig:s})}return r.mayThrow&&r.mayThrow.length&&(a+="Throws: "+r.mayThrow.join(", ")+`

`),r.seealso&&r.seealso.length&&(a+="See also: "+r.seealso.join(", ")+`
`),a},n.prototype.toJSON=function(){var r=Bt(this.doc);return r.mathjs="Help",r},n.fromJSON=function(r){var a={};return Object.keys(r).filter(i=>i!=="mathjs").forEach(i=>{a[i]=r[i]}),new n(a)},n.prototype.valueOf=n.prototype.toString,n},{isClass:!0}),qMe="Chain",GMe=["?on","math","typed"],HMe=ee(qMe,GMe,t=>{var{on:e,math:n,typed:r}=t;function a(l){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");hU(l)?this.value=l.value:this.value=l}a.prototype.type="Chain",a.prototype.isChain=!0,a.prototype.done=function(){return this.value},a.prototype.valueOf=function(){return this.value},a.prototype.toString=function(){return Xt(this.value)},a.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},a.fromJSON=function(l){return new a(l.value)};function i(l,c){typeof c=="function"&&(a.prototype[l]=o(c))}function s(l,c){HEe(a.prototype,l,function(){var d=c();if(typeof d=="function")return o(d)})}function o(l){return function(){if(arguments.length===0)return new a(l(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(r.isTypedFunction(l)){var d=r.resolve(l,c);if(d.params.length===1)throw new Error("chain function "+l.name+" cannot match rest parameter between chain value and additional arguments.");return new a(d.implementation.apply(l,c))}return new a(l.apply(l,c))}}a.createProxy=function(l,c){if(typeof l=="string")i(l,c);else{var f=function(m){dt(l,m)&&u[m]===void 0&&s(m,()=>l[m])};for(var d in l)f(d)}};var u={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return a.createProxy(n),e&&e("import",function(l,c,f){f||s(l,c)}),a},{isClass:!0}),sM={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},jMe={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},XMe={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},KMe={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},YMe={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},ZMe={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},QMe={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},JMe={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},e4e={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},t4e={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},n4e={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},oM={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},r4e={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},a4e={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},i4e={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},s4e={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},o4e={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},u4e={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},l4e={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},c4e={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},f4e={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},d4e={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},p4e={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},h4e={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},m4e={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},g4e={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},v4e={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},y4e={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},b4e={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},x4e={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},w4e={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},N4e={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},S4e={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},C4e={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},E4e={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},D4e={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},T4e={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},$4e={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},A4e={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},I4e={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},k4e={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},_4e={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},O4e={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},F4e={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},R4e={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},M4e={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},P4e={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},B4e={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},L4e={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},z4e={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},U4e={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},V4e={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},W4e={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},q4e={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},G4e={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},H4e={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},j4e={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},X4e={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},K4e={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},Y4e={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},Z4e={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},Q4e={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},J4e={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},ePe={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},tPe={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},nPe={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},rPe={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},aPe={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},iPe={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},sPe={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},oPe={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},uPe={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},lPe={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},cPe={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},fPe={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},dPe={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},pPe={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},hPe={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},mPe={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},gPe={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},vPe={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},yPe={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},bPe={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},xPe={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},wPe={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},NPe={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},SPe={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},CPe={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},EPe={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},DPe={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},TPe={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},$Pe={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},APe={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},IPe={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},kPe={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},_Pe={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},OPe={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},FPe={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},RPe={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},MPe={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},PPe={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},BPe={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},LPe={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},zPe={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},UPe={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},VPe={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},WPe={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},qPe={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},GPe={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},HPe={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},jPe={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},XPe={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},KPe={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},YPe={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},ZPe={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},QPe={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},JPe={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},eBe={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},tBe={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},nBe={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},rBe={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},aBe={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},iBe={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},sBe={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},oBe={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},uBe={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},lBe={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},cBe={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},fBe={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},dBe={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},pBe={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},hBe={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},mBe={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},gBe={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},vBe={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},yBe={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},bBe={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},xBe={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},wBe={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},NBe={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},SBe={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},CBe={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},EBe={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},DBe={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},TBe={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},$Be={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},ABe={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},IBe={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},kBe={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},_Be={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},OBe={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},FBe={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},RBe={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},MBe={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},PBe={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},BBe={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},LBe={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},zBe={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},UBe={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},VBe={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},WBe={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},qBe={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},GBe={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},HBe={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},jBe={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},XBe={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},KBe={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},YBe={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},ZBe={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},QBe={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},JBe={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},eLe={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},tLe={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},nLe={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},rLe={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},aLe={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},iLe={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},sLe={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},oLe={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},uLe={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},lLe={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},cLe={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},fLe={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},dLe={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},pLe={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},hLe={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},mLe={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},gLe={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},vLe={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},yLe={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},bLe={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},xLe={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},wLe={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},NLe={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},SLe={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},CLe={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},ELe={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},DLe={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},TLe={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},$Le={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},ALe={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},ILe={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},kLe={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},_Le={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},OLe={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},FLe={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},RLe={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},MLe={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},PLe={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},BLe={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},LLe={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},zLe={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},ULe={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},VLe={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},WLe={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},qLe={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},GLe={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},HLe={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},jLe={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},XLe={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},KLe={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},YLe={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},ZLe={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},QLe={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},JLe={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},eze={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},tze={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},nze={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},rze={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},aze={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},ize={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},sze={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},oze={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},uze={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},lze={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},cze={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},fze={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},dze={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},pze={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},hze={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},mze={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},gze={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},vze={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},yze={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},bze={bignumber:u4e,bigint:l4e,boolean:c4e,complex:f4e,createUnit:d4e,fraction:p4e,index:h4e,matrix:m4e,number:g4e,sparse:v4e,splitUnit:y4e,string:b4e,unit:x4e,e:sM,E:sM,false:jMe,i:XMe,Infinity:KMe,LN2:ZMe,LN10:YMe,LOG2E:JMe,LOG10E:QMe,NaN:e4e,null:t4e,pi:oM,PI:oM,phi:n4e,SQRT1_2:r4e,SQRT2:a4e,tau:i4e,true:s4e,version:o4e,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:C4e,lsolve:D4e,lsolveAll:T4e,lup:$4e,lusolve:A4e,leafCount:E4e,polynomialRoot:I4e,resolve:O4e,simplify:F4e,simplifyConstant:R4e,simplifyCore:M4e,symbolicEqual:B4e,rationalize:_4e,slu:P4e,usolve:L4e,usolveAll:z4e,qr:k4e,abs:U4e,add:V4e,cbrt:W4e,ceil:q4e,cube:G4e,divide:H4e,dotDivide:j4e,dotMultiply:X4e,dotPow:K4e,exp:Y4e,expm:Z4e,expm1:Q4e,fix:J4e,floor:ePe,gcd:tPe,hypot:nPe,lcm:aPe,log:iPe,log2:uPe,log1p:oPe,log10:sPe,mod:lPe,multiply:cPe,norm:fPe,nthRoot:dPe,nthRoots:pPe,pow:hPe,round:mPe,sign:gPe,sqrt:vPe,sqrtm:yPe,square:NPe,subtract:SPe,unaryMinus:CPe,unaryPlus:EPe,xgcd:DPe,invmod:rPe,bitAnd:TPe,bitNot:$Pe,bitOr:APe,bitXor:IPe,leftShift:kPe,rightArithShift:_Pe,rightLogShift:OPe,bellNumbers:FPe,catalan:RPe,composition:MPe,stirlingS2:PPe,config:w4e,import:N4e,typed:S4e,arg:BPe,conj:LPe,re:UPe,im:zPe,evaluate:VPe,help:WPe,distance:qPe,intersect:GPe,and:HPe,not:jPe,or:XPe,xor:KPe,concat:ZPe,count:QPe,cross:JPe,column:YPe,ctranspose:eBe,det:tBe,diag:nBe,diff:rBe,dot:aBe,getMatrixDataType:lBe,identity:cBe,filter:sBe,flatten:oBe,forEach:uBe,inv:fBe,pinv:dBe,eigs:iBe,kron:pBe,matrixFromFunction:gBe,matrixFromRows:vBe,matrixFromColumns:mBe,map:hBe,ones:yBe,partitionSelect:bBe,range:xBe,resize:NBe,reshape:wBe,rotate:SBe,rotationMatrix:CBe,row:EBe,size:DBe,sort:TBe,squeeze:$Be,subset:ABe,trace:IBe,transpose:kBe,zeros:_Be,fft:OBe,ifft:FBe,sylvester:bPe,schur:xPe,lyap:wPe,solveODE:yze,combinations:RBe,combinationsWithRep:MBe,factorial:PBe,gamma:BBe,kldivergence:zBe,lgamma:LBe,multinomial:UBe,permutations:VBe,pickRandom:WBe,random:qBe,randomInt:GBe,compare:HBe,compareNatural:jBe,compareText:XBe,deepEqual:KBe,equal:YBe,equalText:ZBe,larger:QBe,largerEq:JBe,smaller:eLe,smallerEq:tLe,unequal:nLe,setCartesian:rLe,setDifference:aLe,setDistinct:iLe,setIntersect:sLe,setIsSubset:oLe,setMultiplicity:uLe,setPowerset:lLe,setSize:cLe,setSymDifference:fLe,setUnion:dLe,zpk2tf:pLe,freqz:hLe,erf:mLe,zeta:gLe,cumsum:DLe,mad:vLe,max:yLe,mean:bLe,median:xLe,min:wLe,mode:NLe,prod:SLe,quantileSeq:CLe,std:ELe,sum:TLe,variance:$Le,corr:ALe,acos:ILe,acosh:kLe,acot:_Le,acoth:OLe,acsc:FLe,acsch:RLe,asec:MLe,asech:PLe,asin:BLe,asinh:LLe,atan:zLe,atanh:VLe,atan2:ULe,cos:WLe,cosh:qLe,cot:GLe,coth:HLe,csc:jLe,csch:XLe,sec:KLe,sech:YLe,sin:ZLe,sinh:QLe,tan:JLe,tanh:eze,to:tze,clone:rze,format:aze,bin:nze,oct:mze,hex:sze,isNaN:uze,isInteger:oze,isNegative:lze,isNumeric:cze,hasNumericValue:ize,isPositive:fze,isPrime:dze,isZero:pze,print:gze,typeOf:vze,numeric:hze},uM="help",xze=["typed","mathWithTransform","Help"],wze=ee(uM,xze,t=>{var{typed:e,mathWithTransform:n,Help:r}=t;return e(uM,{any:function(i){var s,o=i;if(typeof i!="string"){for(s in n)if(dt(n,s)&&i===n[s]){o=s;break}}var u=Pa(bze,o);if(!u){var l=typeof o=="function"?o.name:o;throw new Error('No documentation found on "'+l+'"')}return new r(u)}})}),lM="chain",Nze=["typed","Chain"],Sze=ee(lM,Nze,t=>{var{typed:e,Chain:n}=t;return e(lM,{"":function(){return new n},any:function(a){return new n(a)}})}),cM="det",Cze=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],Eze=ee(cM,Cze,t=>{var{typed:e,matrix:n,subtractScalar:r,multiply:a,divideScalar:i,isZero:s,unaryMinus:o}=t;return e(cM,{any:function(c){return Bt(c)},"Array | Matrix":function(c){var f;switch(Tt(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return Bt(c);case 1:if(f[0]===1)return Bt(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Xt(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return u(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+Xt(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Xt(f)+")")}}});function u(l,c,f){if(c===1)return Bt(l[0][0]);if(c===2)return r(a(l[0][0],l[1][1]),a(l[1][0],l[0][1]));for(var d=!1,h=new Array(c).fill(0).map((A,k)=>k),m=0;m<c;m++){var v=h[m];if(s(l[v][m])){var y=void 0;for(y=m+1;y<c;y++)if(!s(l[h[y]][m])){v=h[y],h[y]=h[m],h[m]=v,d=!d;break}if(y===c)return l[v][m]}for(var b=l[v][m],w=m===0?1:l[h[m-1]][m-1],x=m+1;x<c;x++)for(var S=h[x],C=m+1;C<c;C++)l[S][C]=i(r(a(l[S][C],b),a(l[S][m],l[v][C])),w)}var E=l[h[c-1]][c-1];return d?o(E):E}}),fM="inv",Dze=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Tze=ee(fM,Dze,t=>{var{typed:e,matrix:n,divideScalar:r,addScalar:a,multiply:i,unaryMinus:s,det:o,identity:u,abs:l}=t;return e(fM,{"Array | Matrix":function(d){var h=Tt(d)?d.size():Mt(d);switch(h.length){case 1:if(h[0]===1)return Tt(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+Xt(h)+")");case 2:{var m=h[0],v=h[1];if(m===v)return Tt(d)?n(c(d.valueOf(),m,v),d.storage()):c(d,m,v);throw new RangeError("Matrix must be square (size: "+Xt(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Xt(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var m,v,y,b,w;if(d===1){if(b=f[0][0],b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,b)]]}else if(d===2){var x=o(f);if(x===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],x),r(s(f[0][1]),x)],[r(s(f[1][0]),x),r(f[0][0],x)]]}else{var S=f.concat();for(m=0;m<d;m++)S[m]=S[m].concat();for(var C=u(d).valueOf(),E=0;E<h;E++){var A=l(S[E][E]),k=E;for(m=E+1;m<d;)l(S[m][E])>A&&(A=l(S[m][E]),k=m),m++;if(A===0)throw Error("Cannot calculate inverse, determinant is zero");m=k,m!==E&&(w=S[E],S[E]=S[m],S[m]=w,w=C[E],C[E]=C[m],C[m]=w);var T=S[E],I=C[E];for(m=0;m<d;m++){var $=S[m],O=C[m];if(m!==E){if($[E]!==0){for(y=r(s($[E]),T[E]),v=E;v<h;v++)$[v]=a($[v],i(y,T[v]));for(v=0;v<h;v++)O[v]=a(O[v],i(y,I[v]))}}else{for(y=T[E],v=E;v<h;v++)$[v]=r($[v],y);for(v=0;v<h;v++)O[v]=r(O[v],y)}}}return C}}}),dM="pinv",$ze=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],Aze=ee(dM,$ze,t=>{var{typed:e,matrix:n,inv:r,deepEqual:a,equal:i,dotDivide:s,dot:o,ctranspose:u,divideScalar:l,multiply:c,add:f,Complex:d}=t;return e(dM,{"Array | Matrix":function(x){var S=Tt(x)?x.size():Mt(x);switch(S.length){case 1:return b(x)?u(x):S[0]===1?r(x):s(u(x),o(x,x));case 2:{if(b(x))return u(x);var C=S[0],E=S[1];if(C===E)try{return r(x)}catch(A){if(!(A instanceof Error&&A.message.match(/Cannot calculate inverse, determinant is zero/)))throw A}return Tt(x)?n(h(x.valueOf(),C,E),x.storage()):h(x,C,E)}default:throw new RangeError("Matrix must be two dimensional (size: "+Xt(S)+")")}},any:function(x){return i(x,0)?Bt(x):l(1,x)}});function h(w,x,S){var{C,F:E}=v(w,x,S),A=c(r(c(u(C),C)),u(C)),k=c(u(E),r(c(E,u(E))));return c(k,A)}function m(w,x,S){for(var C=Bt(w),E=0,A=0;A<x;A++){if(S<=E)return C;for(var k=A;y(C[k][E]);)if(k++,x===k&&(k=A,E++,S===E))return C;[C[k],C[A]]=[C[A],C[k]];for(var T=C[A][E],I=0;I<S;I++)C[A][I]=s(C[A][I],T);for(var $=0;$<x;$++)if($!==A){T=C[$][E];for(var O=0;O<S;O++)C[$][O]=f(C[$][O],c(-1,c(T,C[A][O])))}E++}return C}function v(w,x,S){var C=m(w,x,S),E=w.map((k,T)=>k.filter((I,$)=>$<x&&!y(o(C[$],C[$])))),A=C.filter((k,T)=>!y(o(C[T],C[T])));return{C:E,F:A}}function y(w){return i(f(w,d(1,1)),f(0,d(1,1)))}function b(w){return a(f(w,d(1,1)),f(c(w,0),d(1,1)))}});function Ize(t){var{addScalar:e,subtract:n,flatten:r,multiply:a,multiplyScalar:i,divideScalar:s,sqrt:o,abs:u,bignumber:l,diag:c,size:f,reshape:d,inv:h,qr:m,usolve:v,usolveAll:y,equal:b,complex:w,larger:x,smaller:S,matrixFromColumns:C,dot:E}=t;function A(H,G,ne,ue){var te=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,se=k(H,G,ne,ue,te);T(H,G,ne,ue,te,se);var{values:J,C:K}=I(H,G,ne,ue,te);if(te){var ae=$(H,G,K,se,J,ne,ue);return{values:J,eigenvectors:ae}}return{values:J}}function k(H,G,ne,ue,te){var se=ue==="BigNumber",J=ue==="Complex",K=se?l(0):0,ae=se?l(1):J?w(1):1,pe=se?l(1):1,he=se?l(10):2,Se=i(he,he),Ee;te&&(Ee=Array(G).fill(ae));for(var Z=!1;!Z;){Z=!0;for(var ie=0;ie<G;ie++){for(var ve=K,we=K,Fe=0;Fe<G;Fe++)ie!==Fe&&(ve=e(ve,u(H[Fe][ie])),we=e(we,u(H[ie][Fe])));if(!b(ve,0)&&!b(we,0)){for(var Re=pe,Ge=ve,Ze=s(we,he),re=i(we,he);S(Ge,Ze);)Ge=i(Ge,Se),Re=i(Re,he);for(;x(Ge,re);)Ge=s(Ge,Se),Re=s(Re,he);var ce=S(s(e(Ge,we),Re),i(e(ve,we),.95));if(ce){Z=!1;for(var Ce=s(1,Re),$e=0;$e<G;$e++)ie!==$e&&(H[ie][$e]=i(H[ie][$e],Ce),H[$e][ie]=i(H[$e][ie],Re));te&&(Ee[ie]=i(Ee[ie],Ce))}}}}return te?c(Ee):null}function T(H,G,ne,ue,te,se){var J=ue==="BigNumber",K=ue==="Complex",ae=J?l(0):K?w(0):0;J&&(ne=l(ne));for(var pe=0;pe<G-2;pe++){for(var he=0,Se=ae,Ee=pe+1;Ee<G;Ee++){var Z=H[Ee][pe];S(u(Se),u(Z))&&(Se=Z,he=Ee)}if(!S(u(Se),ne)){if(he!==pe+1){var ie=H[he];H[he]=H[pe+1],H[pe+1]=ie;for(var ve=0;ve<G;ve++){var we=H[ve][he];H[ve][he]=H[ve][pe+1],H[ve][pe+1]=we}if(te){var Fe=se[he];se[he]=se[pe+1],se[pe+1]=Fe}}for(var Re=pe+2;Re<G;Re++){var Ge=s(H[Re][pe],Se);if(Ge!==0){for(var Ze=0;Ze<G;Ze++)H[Re][Ze]=n(H[Re][Ze],i(Ge,H[pe+1][Ze]));for(var re=0;re<G;re++)H[re][pe+1]=e(H[re][pe+1],i(Ge,H[re][Re]));if(te)for(var ce=0;ce<G;ce++)se[Re][ce]=n(se[Re][ce],i(Ge,se[pe+1][ce]))}}}}return se}function I(H,G,ne,ue,te){var se=ue==="BigNumber",J=ue==="Complex",K=se?l(1):J?w(1):1;se&&(ne=l(ne));for(var ae=Bt(H),pe=[],he=G,Se=[],Ee=te?c(Array(G).fill(K)):void 0,Z=te?c(Array(he).fill(K)):void 0,ie=0;ie<=100;){ie+=1;for(var ve=ae[he-1][he-1],we=0;we<he;we++)ae[we][we]=n(ae[we][we],ve);var{Q:Fe,R:Re}=m(ae);ae=a(Re,Fe);for(var Ge=0;Ge<he;Ge++)ae[Ge][Ge]=e(ae[Ge][Ge],ve);if(te&&(Z=a(Z,Fe)),he===1||S(u(ae[he-1][he-2]),ne)){ie=0,pe.push(ae[he-1][he-1]),te&&(Se.unshift([[1]]),z(Z,G),Ee=a(Ee,Z),he>1&&(Z=c(Array(he-1).fill(K)))),he-=1,ae.pop();for(var Ze=0;Ze<he;Ze++)ae[Ze].pop()}else if(he===2||S(u(ae[he-2][he-3]),ne)){ie=0;var re=O(ae[he-2][he-2],ae[he-2][he-1],ae[he-1][he-2],ae[he-1][he-1]);pe.push(...re),te&&(Se.unshift(B(ae[he-2][he-2],ae[he-2][he-1],ae[he-1][he-2],ae[he-1][he-1],re[0],re[1],ne,ue)),z(Z,G),Ee=a(Ee,Z),he>2&&(Z=c(Array(he-2).fill(K)))),he-=2,ae.pop(),ae.pop();for(var ce=0;ce<he;ce++)ae[ce].pop(),ae[ce].pop()}if(he===0)break}if(pe.sort((Be,Me)=>+n(u(Be),u(Me))),ie>100){var Ce=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+pe.join(", "));throw Ce.values=pe,Ce.vectors=[],Ce}var $e=te?a(Ee,L(Se,G)):void 0;return{values:pe,C:$e}}function $(H,G,ne,ue,te,se,J){var K=h(ne),ae=a(K,H,ne),pe=J==="BigNumber",he=J==="Complex",Se=pe?l(0):he?w(0):0,Ee=pe?l(1):he?w(1):1,Z=[],ie=[];for(var ve of te){var we=F(Z,ve,b);we===-1?(Z.push(ve),ie.push(1)):ie[we]+=1}for(var Fe=[],Re=Z.length,Ge=Array(G).fill(Se),Ze=c(Array(G).fill(Ee)),re=function(){var $e=Z[ce],Be=n(ae,a($e,Ze)),Me=y(Be,Ge);for(Me.shift();Me.length<ie[ce];){var Qe=R(Be,G,Me,se,J);if(Qe===null)break;Me.push(Qe)}var qe=a(h(ue),ne);Me=Me.map(et=>a(qe,et)),Fe.push(...Me.map(et=>({value:$e,vector:r(et)})))},ce=0;ce<Re;ce++)re();return Fe}function O(H,G,ne,ue){var te=e(H,ue),se=n(i(H,ue),i(G,ne)),J=i(te,.5),K=i(o(n(i(te,te),i(4,se))),.5);return[e(J,K),n(J,K)]}function B(H,G,ne,ue,te,se,J,K){var ae=K==="BigNumber",pe=K==="Complex",he=ae?l(0):pe?w(0):0,Se=ae?l(1):pe?w(1):1;if(S(u(ne),J))return[[Se,he],[he,Se]];if(x(u(n(te,se)),J))return[[n(te,ue),n(se,ue)],[ne,ne]];var Ee=n(H,te),Z=n(ue,te);return S(u(G),J)&&S(u(Z),J)?[[Ee,Se],[ne,he]]:[[G,he],[Z,Se]]}function z(H,G){for(var ne=0;ne<H.length;ne++)H[ne].push(...Array(G-H[ne].length).fill(0));for(var ue=H.length;ue<G;ue++)H.push(Array(G).fill(0)),H[ue][ue]=1;return H}function L(H,G){for(var ne=[],ue=0;ue<G;ue++)ne[ue]=Array(G).fill(0);var te=0;for(var se of H){for(var J=se.length,K=0;K<J;K++)for(var ae=0;ae<J;ae++)ne[te+K][te+ae]=se[K][ae];te+=J}return ne}function F(H,G,ne){for(var ue=0;ue<H.length;ue++)if(ne(H[ue],G))return ue;return-1}function R(H,G,ne,ue,te){for(var se=te==="BigNumber"?l(1e3):1e3,J,K=0;K<5;++K){J=W(G,ne,te);try{J=v(H,J)}catch{continue}if(x(j(J),se))break}if(K>=5)return null;for(K=0;;){var ae=v(H,J);if(S(j(M(J,[ae])),ue))break;if(++K>=10)return null;J=q(ae)}return J}function W(H,G,ne){var ue=ne==="BigNumber",te=ne==="Complex",se=Array(H).fill(0).map(J=>2*Math.random()-1);return ue&&(se=se.map(J=>l(J))),te&&(se=se.map(J=>w(J))),se=M(se,G),q(se,ne)}function M(H,G){var ne=f(H);for(var ue of G)ue=d(ue,ne),H=n(H,a(s(E(ue,H),E(ue,ue)),ue));return H}function j(H){return u(o(E(H,H)))}function q(H,G){var ne=G==="BigNumber",ue=G==="Complex",te=ne?l(1):ue?w(1):1;return a(s(te,j(H)),H)}return A}function kze(t){var{config:e,addScalar:n,subtract:r,abs:a,atan:i,cos:s,sin:o,multiplyScalar:u,inv:l,bignumber:c,multiply:f,add:d}=t;function h(T,I){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,O=arguments.length>3?arguments[3]:void 0,B=arguments.length>4?arguments[4]:void 0;if(O==="number")return m(T,$,B);if(O==="BigNumber")return v(T,$,B);throw TypeError("Unsupported data type: "+O)}function m(T,I,$){var O=T.length,B=Math.abs(I/O),z,L;if($){L=new Array(O);for(var F=0;F<O;F++)L[F]=Array(O).fill(0),L[F][F]=1}for(var R=E(T);Math.abs(R[1])>=Math.abs(B);){var W=R[0][0],M=R[0][1];z=y(T[W][W],T[M][M],T[W][M]),T=C(T,z,W,M),$&&(L=w(L,z,W,M)),R=E(T)}for(var j=Array(O).fill(0),q=0;q<O;q++)j[q]=T[q][q];return k(Bt(j),L,$)}function v(T,I,$){var O=T.length,B=a(I/O),z,L;if($){L=new Array(O);for(var F=0;F<O;F++)L[F]=Array(O).fill(0),L[F][F]=1}for(var R=A(T);a(R[1])>=a(B);){var W=R[0][0],M=R[0][1];z=b(T[W][W],T[M][M],T[W][M]),T=S(T,z,W,M),$&&(L=x(L,z,W,M)),R=A(T)}for(var j=Array(O).fill(0),q=0;q<O;q++)j[q]=T[q][q];return k(Bt(j),L,$)}function y(T,I,$){var O=I-T;return Math.abs(O)<=e.relTol?Math.PI/4:.5*Math.atan(2*$/(I-T))}function b(T,I,$){var O=r(I,T);return a(O)<=e.relTol?c(-1).acos().div(4):u(.5,i(f(2,$,l(O))))}function w(T,I,$,O){for(var B=T.length,z=Math.cos(I),L=Math.sin(I),F=Array(B).fill(0),R=Array(B).fill(0),W=0;W<B;W++)F[W]=z*T[W][$]-L*T[W][O],R[W]=L*T[W][$]+z*T[W][O];for(var M=0;M<B;M++)T[M][$]=F[M],T[M][O]=R[M];return T}function x(T,I,$,O){for(var B=T.length,z=s(I),L=o(I),F=Array(B).fill(c(0)),R=Array(B).fill(c(0)),W=0;W<B;W++)F[W]=r(u(z,T[W][$]),u(L,T[W][O])),R[W]=n(u(L,T[W][$]),u(z,T[W][O]));for(var M=0;M<B;M++)T[M][$]=F[M],T[M][O]=R[M];return T}function S(T,I,$,O){for(var B=T.length,z=c(s(I)),L=c(o(I)),F=u(z,z),R=u(L,L),W=Array(B).fill(c(0)),M=Array(B).fill(c(0)),j=f(c(2),z,L,T[$][O]),q=n(r(u(F,T[$][$]),j),u(R,T[O][O])),H=d(u(R,T[$][$]),j,u(F,T[O][O])),G=0;G<B;G++)W[G]=r(u(z,T[$][G]),u(L,T[O][G])),M[G]=n(u(L,T[$][G]),u(z,T[O][G]));T[$][$]=q,T[O][O]=H,T[$][O]=c(0),T[O][$]=c(0);for(var ne=0;ne<B;ne++)ne!==$&&ne!==O&&(T[$][ne]=W[ne],T[ne][$]=W[ne],T[O][ne]=M[ne],T[ne][O]=M[ne]);return T}function C(T,I,$,O){for(var B=T.length,z=Math.cos(I),L=Math.sin(I),F=z*z,R=L*L,W=Array(B).fill(0),M=Array(B).fill(0),j=F*T[$][$]-2*z*L*T[$][O]+R*T[O][O],q=R*T[$][$]+2*z*L*T[$][O]+F*T[O][O],H=0;H<B;H++)W[H]=z*T[$][H]-L*T[O][H],M[H]=L*T[$][H]+z*T[O][H];T[$][$]=j,T[O][O]=q,T[$][O]=0,T[O][$]=0;for(var G=0;G<B;G++)G!==$&&G!==O&&(T[$][G]=W[G],T[G][$]=W[G],T[O][G]=M[G],T[G][O]=M[G]);return T}function E(T){for(var I=T.length,$=0,O=[0,1],B=0;B<I;B++)for(var z=B+1;z<I;z++)Math.abs($)<Math.abs(T[B][z])&&($=Math.abs(T[B][z]),O=[B,z]);return[O,$]}function A(T){for(var I=T.length,$=0,O=[0,1],B=0;B<I;B++)for(var z=B+1;z<I;z++)a($)<a(T[B][z])&&($=a(T[B][z]),O=[B,z]);return[O,$]}function k(T,I,$){var O=T.length,B=Array(O),z;if($){z=Array(O);for(var L=0;L<O;L++)z[L]=Array(O)}for(var F=0;F<O;F++){for(var R=0,W=T[0],M=0;M<T.length;M++)a(T[M])<a(W)&&(R=M,W=T[R]);if(B[F]=T.splice(R,1)[0],$)for(var j=0;j<O;j++)z[F][j]=I[j][R],I[j].splice(R,1)}if(!$)return{values:B};var q=z.map((H,G)=>({value:B[G],vector:H}));return{values:B,eigenvectors:q}}return h}var _ze="eigs",Oze=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],Fze=ee(_ze,Oze,t=>{var{config:e,typed:n,matrix:r,addScalar:a,subtract:i,equal:s,abs:o,atan:u,cos:l,sin:c,multiplyScalar:f,divideScalar:d,inv:h,bignumber:m,multiply:v,add:y,larger:b,column:w,flatten:x,number:S,complex:C,sqrt:E,diag:A,size:k,reshape:T,qr:I,usolve:$,usolveAll:O,im:B,re:z,smaller:L,matrixFromColumns:F,dot:R}=t,W=kze({config:e,addScalar:a,subtract:i,column:w,flatten:x,equal:s,abs:o,atan:u,cos:l,sin:c,multiplyScalar:f,inv:h,bignumber:m,complex:C,multiply:v,add:y}),M=Ize({config:e,addScalar:a,subtract:i,multiply:v,multiplyScalar:f,flatten:x,divideScalar:d,sqrt:E,abs:o,bignumber:m,diag:A,size:k,reshape:T,qr:I,inv:h,usolve:$,usolveAll:O,equal:s,complex:C,larger:b,smaller:L,matrixFromColumns:F,dot:R});return n("eigs",{Array:function(se){return j(r(se))},"Array, number|BigNumber":function(se,J){return j(r(se),{precision:J})},"Array, Object"(te,se){return j(r(te),se)},Matrix:function(se){return j(se,{matricize:!0})},"Matrix, number|BigNumber":function(se,J){return j(se,{precision:J,matricize:!0})},"Matrix, Object":function(se,J){var K={matricize:!0};return kr(K,J),j(se,K)}});function j(te){var se,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K="eigenvectors"in J?J.eigenvectors:!0,ae=(se=J.precision)!==null&&se!==void 0?se:e.relTol,pe=q(te,ae,K);return J.matricize&&(pe.values=r(pe.values),K&&(pe.eigenvectors=pe.eigenvectors.map(he=>{var{value:Se,vector:Ee}=he;return{value:Se,vector:r(Ee)}}))),K&&Object.defineProperty(pe,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),pe}function q(te,se,J){var K=te.toArray(),ae=te.size();if(ae.length!==2||ae[0]!==ae[1])throw new RangeError("Matrix must be square (size: ".concat(Xt(ae),")"));var pe=ae[0];if(G(K,pe,se)&&(ne(K,pe),H(K,pe,se))){var he=ue(te,K,pe);return W(K,pe,se,he,J)}var Se=ue(te,K,pe);return M(K,pe,se,Se,J)}function H(te,se,J){for(var K=0;K<se;K++)for(var ae=K;ae<se;ae++)if(b(m(o(i(te[K][ae],te[ae][K]))),J))return!1;return!0}function G(te,se,J){for(var K=0;K<se;K++)for(var ae=0;ae<se;ae++)if(b(m(o(B(te[K][ae]))),J))return!1;return!0}function ne(te,se){for(var J=0;J<se;J++)for(var K=0;K<se;K++)te[J][K]=z(te[J][K])}function ue(te,se,J){var K=te.datatype();if(K==="number"||K==="BigNumber"||K==="Complex")return K;for(var ae=!1,pe=!1,he=!1,Se=0;Se<J;Se++)for(var Ee=0;Ee<J;Ee++){var Z=se[Se][Ee];if(Vt(Z)||Jm(Z))ae=!0;else if(qt(Z))pe=!0;else if(Mo(Z))he=!0;else throw TypeError("Unsupported type in Matrix: "+Rn(Z))}if(pe&&he&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),he){for(var ie=0;ie<J;ie++)for(var ve=0;ve<J;ve++)se[ie][ve]=C(se[ie][ve]);return"Complex"}if(pe){for(var we=0;we<J;we++)for(var Fe=0;Fe<J;Fe++)se[we][Fe]=m(se[we][Fe]);return"BigNumber"}if(ae){for(var Re=0;Re<J;Re++)for(var Ge=0;Ge<J;Ge++)se[Re][Ge]=S(se[Re][Ge]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),pM="expm",Rze=["typed","abs","add","identity","inv","multiply"],Mze=ee(pM,Rze,t=>{var{typed:e,abs:n,add:r,identity:a,inv:i,multiply:s}=t;return e(pM,{Matrix:function(f){var d=f.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+Xt(d)+")");for(var h=d[0],m=1e-15,v=o(f),y=u(v,m),b=y.q,w=y.j,x=s(f,Math.pow(2,-w)),S=a(h),C=a(h),E=1,A=x,k=-1,T=1;T<=b;T++)T>1&&(A=s(A,x),k=-k),E=E*(b-T+1)/((2*b-T+1)*T),S=r(S,s(E,A)),C=r(C,s(E*k,A));for(var I=s(i(C),S),$=0;$<w;$++)I=s(I,I);return Xl(f)?f.createSparseMatrix(I):I}});function o(c){for(var f=c.size()[0],d=0,h=0;h<f;h++){for(var m=0,v=0;v<f;v++)m+=n(c.get([h,v]));d=Math.max(m,d)}return d}function u(c,f){for(var d=30,h=0;h<d;h++)for(var m=0;m<=h;m++){var v=h-m;if(l(c,m,v)<f)return{q:m,j:v}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function l(c,f,d){for(var h=1,m=2;m<=f;m++)h*=m;for(var v=h,y=f+1;y<=2*f;y++)v*=y;var b=v*(2*f+1);return 8*Math.pow(c/Math.pow(2,d),2*f)*h*h/(v*b)}}),hM="sqrtm",Pze=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],Bze=ee(hM,Pze,t=>{var{typed:e,abs:n,add:r,multiply:a,map:i,sqrt:s,subtract:o,inv:u,size:l,max:c,identity:f}=t,d=1e3,h=1e-6;function m(v){var y,b=0,w=v,x=f(l(v));do{var S=w;if(w=a(.5,r(S,u(x))),x=a(.5,r(x,u(S))),y=c(n(o(w,S))),y>h&&++b>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(y>h);return w}return e(hM,{"Array | Matrix":function(y){var b=Tt(y)?y.size():Mt(y);switch(b.length){case 1:if(b[0]===1)return i(y,s);throw new RangeError("Matrix must be square (size: "+Xt(b)+")");case 2:{var w=b[0],x=b[1];if(w===x)return m(y);throw new RangeError("Matrix must be square (size: "+Xt(b)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+Xt(b)+")")}}})}),mM="sylvester",Lze=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],zze=ee(mM,Lze,t=>{var{typed:e,schur:n,matrixFromColumns:r,matrix:a,multiply:i,range:s,concat:o,transpose:u,index:l,subset:c,add:f,subtract:d,identity:h,lusolve:m,abs:v}=t;return e(mM,{"Matrix, Matrix, Matrix":y,"Array, Matrix, Matrix":function(w,x,S){return y(a(w),x,S)},"Array, Array, Matrix":function(w,x,S){return y(a(w),a(x),S)},"Array, Matrix, Array":function(w,x,S){return y(a(w),x,a(S))},"Matrix, Array, Matrix":function(w,x,S){return y(w,a(x),S)},"Matrix, Array, Array":function(w,x,S){return y(w,a(x),a(S))},"Matrix, Matrix, Array":function(w,x,S){return y(w,x,a(S))},"Array, Array, Array":function(w,x,S){return y(a(w),a(x),a(S)).toArray()}});function y(b,w,x){for(var S=w.size()[0],C=b.size()[0],E=n(b),A=E.T,k=E.U,T=n(i(-1,w)),I=T.T,$=T.U,O=i(i(u(k),x),$),B=s(0,C),z=[],L=(he,Se)=>o(he,Se,1),F=(he,Se)=>o(he,Se,0),R=0;R<S;R++)if(R<S-1&&v(c(I,l(R+1,R)))>1e-5){for(var W=F(c(O,l(B,R)),c(O,l(B,R+1))),M=0;M<R;M++)W=f(W,F(i(z[M],c(I,l(M,R))),i(z[M],c(I,l(M,R+1)))));var j=i(h(C),i(-1,c(I,l(R,R)))),q=i(h(C),i(-1,c(I,l(R+1,R)))),H=i(h(C),i(-1,c(I,l(R,R+1)))),G=i(h(C),i(-1,c(I,l(R+1,R+1)))),ne=F(L(f(A,j),q),L(H,f(A,G))),ue=m(ne,W);z[R]=ue.subset(l(s(0,C),0)),z[R+1]=ue.subset(l(s(C,2*C),0)),R++}else{for(var te=c(O,l(B,R)),se=0;se<R;se++)te=f(te,i(z[se],c(I,l(se,R))));var J=c(I,l(R,R)),K=d(A,i(J,h(C)));z[R]=m(K,te)}var ae=a(r(...z)),pe=i(k,i(ae,u($)));return pe}}),gM="schur",Uze=["typed","matrix","identity","multiply","qr","norm","subtract"],Vze=ee(gM,Uze,t=>{var{typed:e,matrix:n,identity:r,multiply:a,qr:i,norm:s,subtract:o}=t;return e(gM,{Array:function(c){var f=u(n(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return u(c)}});function u(l){var c=l.size()[0],f=l,d=r(c),h=0,m;do{m=f;var v=i(f),y=v.Q,b=v.R;if(f=a(b,y),d=a(d,y),h++>100)break}while(s(o(f,m))>1e-4);return{U:d,T:f}}}),vM="lyap",Wze=["typed","matrix","sylvester","multiply","transpose"],qze=ee(vM,Wze,t=>{var{typed:e,matrix:n,sylvester:r,multiply:a,transpose:i}=t;return e(vM,{"Matrix, Matrix":function(o,u){return r(o,i(o),a(-1,u))},"Array, Matrix":function(o,u){return r(n(o),i(n(o)),a(-1,u))},"Matrix, Array":function(o,u){return r(o,i(n(o)),n(a(-1,u)))},"Array, Array":function(o,u){return r(n(o),i(n(o)),n(a(-1,u))).toArray()}})}),Gze="divide",Hze=["typed","matrix","multiply","equalScalar","divideScalar","inv"],jze=ee(Gze,Hze,t=>{var{typed:e,matrix:n,multiply:r,equalScalar:a,divideScalar:i,inv:s}=t,o=fa({typed:e,equalScalar:a}),u=Rs({typed:e});return e("divide",mU({"Array | Matrix, Array | Matrix":function(c,f){return r(c,s(f))},"DenseMatrix, any":function(c,f){return u(c,f,i,!1)},"SparseMatrix, any":function(c,f){return o(c,f,i,!1)},"Array, any":function(c,f){return u(n(c),f,i,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,s(f))}},i.signatures))}),yM="distance",Xze=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],Kze=ee(yM,Xze,t=>{var{typed:e,addScalar:n,subtractScalar:r,multiplyScalar:a,divideScalar:i,deepEqual:s,sqrt:o,abs:u}=t;return e(yM,{"Array, Array, Array":function(C,E,A){if(C.length===2&&E.length===2&&A.length===2){if(!c(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(A))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(s(E,A))throw new TypeError("LinePoint1 should not be same with LinePoint2");var k=r(A[1],E[1]),T=r(E[0],A[0]),I=r(a(A[0],E[1]),a(E[0],A[1]));return y(C[0],C[1],k,T,I)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(C,E,A){if(Object.keys(C).length===2&&Object.keys(E).length===2&&Object.keys(A).length===2){if(!c(C))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(E))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(A))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(s(m(E),m(A)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in C&&"pointY"in C&&"lineOnePtX"in E&&"lineOnePtY"in E&&"lineTwoPtX"in A&&"lineTwoPtY"in A){var k=r(A.lineTwoPtY,E.lineOnePtY),T=r(E.lineOnePtX,A.lineTwoPtX),I=r(a(A.lineTwoPtX,E.lineOnePtY),a(E.lineOnePtX,A.lineTwoPtY));return y(C.pointX,C.pointY,k,T,I)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(C,E){if(C.length===2&&E.length===3){if(!c(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(E))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return y(C[0],C[1],E[0],E[1],E[2])}else if(C.length===3&&E.length===6){if(!f(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!h(E))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return b(C[0],C[1],C[2],E[0],E[1],E[2],E[3],E[4],E[5])}else if(C.length===E.length&&C.length>0){if(!d(C))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(E))throw new TypeError("All values of an array should be numbers or BigNumbers");return w(C,E)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(C,E){if(Object.keys(C).length===2&&Object.keys(E).length===3){if(!c(C))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(E))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in C&&"pointY"in C&&"xCoeffLine"in E&&"yCoeffLine"in E&&"constant"in E)return y(C.pointX,C.pointY,E.xCoeffLine,E.yCoeffLine,E.constant);throw new TypeError("Key names do not match")}else if(Object.keys(C).length===3&&Object.keys(E).length===6){if(!f(C))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!h(E))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in C&&"pointY"in C&&"x0"in E&&"y0"in E&&"z0"in E&&"a"in E&&"b"in E&&"c"in E)return b(C.pointX,C.pointY,C.pointZ,E.x0,E.y0,E.z0,E.a,E.b,E.c);throw new TypeError("Key names do not match")}else if(Object.keys(C).length===2&&Object.keys(E).length===2){if(!c(C))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(E))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in C&&"pointOneY"in C&&"pointTwoX"in E&&"pointTwoY"in E)return w([C.pointOneX,C.pointOneY],[E.pointTwoX,E.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(C).length===3&&Object.keys(E).length===3){if(!f(C))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(E))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in C&&"pointOneY"in C&&"pointOneZ"in C&&"pointTwoX"in E&&"pointTwoY"in E&&"pointTwoZ"in E)return w([C.pointOneX,C.pointOneY,C.pointOneZ],[E.pointTwoX,E.pointTwoY,E.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(C){if(!v(C))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return x(C)}});function l(S){return typeof S=="number"||qt(S)}function c(S){return S.constructor!==Array&&(S=m(S)),l(S[0])&&l(S[1])}function f(S){return S.constructor!==Array&&(S=m(S)),l(S[0])&&l(S[1])&&l(S[2])}function d(S){return Array.isArray(S)||(S=m(S)),S.every(l)}function h(S){return S.constructor!==Array&&(S=m(S)),l(S[0])&&l(S[1])&&l(S[2])&&l(S[3])&&l(S[4])&&l(S[5])}function m(S){for(var C=Object.keys(S),E=[],A=0;A<C.length;A++)E.push(S[C[A]]);return E}function v(S){if(S[0].length===2&&l(S[0][0])&&l(S[0][1])){if(S.some(C=>C.length!==2||!l(C[0])||!l(C[1])))return!1}else if(S[0].length===3&&l(S[0][0])&&l(S[0][1])&&l(S[0][2])){if(S.some(C=>C.length!==3||!l(C[0])||!l(C[1])||!l(C[2])))return!1}else return!1;return!0}function y(S,C,E,A,k){var T=u(n(n(a(E,S),a(A,C)),k)),I=o(n(a(E,E),a(A,A)));return i(T,I)}function b(S,C,E,A,k,T,I,$,O){var B=[r(a(r(k,C),O),a(r(T,E),$)),r(a(r(T,E),I),a(r(A,S),O)),r(a(r(A,S),$),a(r(k,C),I))];B=o(n(n(a(B[0],B[0]),a(B[1],B[1])),a(B[2],B[2])));var z=o(n(n(a(I,I),a($,$)),a(O,O)));return i(B,z)}function w(S,C){for(var E=S.length,A=0,k=0,T=0;T<E;T++)k=r(S[T],C[T]),A=n(a(k,k),A);return o(A)}function x(S){for(var C=[],E=[],A=[],k=0;k<S.length-1;k++)for(var T=k+1;T<S.length;T++)S[0].length===2?(E=[S[k][0],S[k][1]],A=[S[T][0],S[T][1]]):S[0].length===3&&(E=[S[k][0],S[k][1],S[k][2]],A=[S[T][0],S[T][1],S[T][2]]),C.push(w(E,A));return C}}),Yze="intersect",Zze=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],Qze=ee(Yze,Zze,t=>{var{typed:e,config:n,abs:r,add:a,addScalar:i,matrix:s,multiply:o,multiplyScalar:u,divideScalar:l,subtract:c,smaller:f,equalScalar:d,flatten:h,isZero:m,isNumeric:v}=t;return e("intersect",{"Array, Array, Array":y,"Array, Array, Array, Array":b,"Matrix, Matrix, Matrix":function($,O,B){var z=y($.valueOf(),O.valueOf(),B.valueOf());return z===null?null:s(z)},"Matrix, Matrix, Matrix, Matrix":function($,O,B,z){var L=b($.valueOf(),O.valueOf(),B.valueOf(),z.valueOf());return L===null?null:s(L)}});function y(I,$,O){if(I=w(I),$=w($),O=w(O),!S(I))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!S($))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!C(O))throw new TypeError("Array with 4 numbers expected as third argument");return T(I[0],I[1],I[2],$[0],$[1],$[2],O[0],O[1],O[2],O[3])}function b(I,$,O,B){if(I=w(I),$=w($),O=w(O),B=w(B),I.length===2){if(!x(I))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!x($))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!x(O))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!x(B))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return E(I,$,O,B)}else if(I.length===3){if(!S(I))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!S($))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!S(O))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!S(B))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return k(I[0],I[1],I[2],$[0],$[1],$[2],O[0],O[1],O[2],B[0],B[1],B[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function w(I){return I.length===1?I[0]:I.length>1&&Array.isArray(I[0])&&I.every($=>Array.isArray($)&&$.length===1)?h(I):I}function x(I){return I.length===2&&v(I[0])&&v(I[1])}function S(I){return I.length===3&&v(I[0])&&v(I[1])&&v(I[2])}function C(I){return I.length===4&&v(I[0])&&v(I[1])&&v(I[2])&&v(I[3])}function E(I,$,O,B){var z=I,L=O,F=c(z,$),R=c(L,B),W=c(u(F[0],R[1]),u(R[0],F[1]));if(m(W)||f(r(W),n.relTol))return null;var M=u(R[0],z[1]),j=u(R[1],z[0]),q=u(R[0],L[1]),H=u(R[1],L[0]),G=l(i(c(c(M,j),q),H),W);return a(o(F,G),z)}function A(I,$,O,B,z,L,F,R,W,M,j,q){var H=u(c(I,$),c(O,B)),G=u(c(z,L),c(F,R)),ne=u(c(W,M),c(j,q));return i(i(H,G),ne)}function k(I,$,O,B,z,L,F,R,W,M,j,q){var H=A(I,F,M,F,$,R,j,R,O,W,q,W),G=A(M,F,B,I,j,R,z,$,q,W,L,O),ne=A(I,F,B,I,$,R,z,$,O,W,L,O),ue=A(M,F,M,F,j,R,j,R,q,W,q,W),te=A(B,I,B,I,z,$,z,$,L,O,L,O),se=c(u(H,G),u(ne,ue)),J=c(u(te,ue),u(G,G));if(m(J))return null;var K=l(se,J),ae=l(i(H,u(K,G)),ue),pe=i(I,u(K,c(B,I))),he=i($,u(K,c(z,$))),Se=i(O,u(K,c(L,O))),Ee=i(F,u(ae,c(M,F))),Z=i(R,u(ae,c(j,R))),ie=i(W,u(ae,c(q,W)));return d(pe,Ee)&&d(he,Z)&&d(Se,ie)?[pe,he,Se]:null}function T(I,$,O,B,z,L,F,R,W,M){var j=u(I,F),q=u(B,F),H=u($,R),G=u(z,R),ne=u(O,W),ue=u(L,W),te=c(c(c(M,j),H),ne),se=c(c(c(i(i(q,G),ue),j),H),ne),J=l(te,se),K=i(I,u(J,c(B,I))),ae=i($,u(J,c(z,$))),pe=i(O,u(J,c(L,O)));return[K,ae,pe]}}),bM="sum",Jze=["typed","config","add","numeric"],oW=ee(bM,Jze,t=>{var{typed:e,config:n,add:r,numeric:a}=t;return e(bM,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":s,"...":function(u){if(Od(u))throw new TypeError("Scalar values expected in function sum");return i(u)}});function i(o){var u;return Ho(o,function(l){try{u=u===void 0?l:r(u,l)}catch(c){throw Va(c,"sum",l)}}),u===void 0&&(u=a(0,n.number)),typeof u=="string"&&(u=a(u,ll(u,n))),u}function s(o,u){try{var l=Hb(o,u,r);return l}catch(c){throw Va(c,"sum")}}}),dy="cumsum",e5e=["typed","add","unaryPlus"],uW=ee(dy,e5e,t=>{var{typed:e,add:n,unaryPlus:r}=t;return e(dy,{Array:a,Matrix:function(l){return l.create(a(l.valueOf(),l.datatype()))},"Array, number | BigNumber":s,"Matrix, number | BigNumber":function(l,c){return l.create(s(l.valueOf(),c),l.datatype())},"...":function(l){if(Od(l))throw new TypeError("All values expected to be scalar in function cumsum");return a(l)}});function a(u){try{return i(u)}catch(l){throw Va(l,dy)}}function i(u){if(u.length===0)return[];for(var l=[r(u[0])],c=1;c<u.length;++c)l.push(n(l[c-1],u[c]));return l}function s(u,l){var c=Mt(u);if(l<0||l>=c.length)throw new Os(l,c.length);try{return o(u,l)}catch(f){throw Va(f,dy)}}function o(u,l){var c,f,d;if(l<=0){var h=u[0][0];if(Array.isArray(h)){for(d=VU(u),f=[],c=0;c<d.length;c++)f[c]=o(d[c],l-1);return f}else return i(u)}else{for(f=[],c=0;c<u.length;c++)f[c]=o(u[c],l-1);return f}}}),xM="mean",t5e=["typed","add","divide"],lW=ee(xM,t5e,t=>{var{typed:e,add:n,divide:r}=t;return e(xM,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":a,"...":function(o){if(Od(o))throw new TypeError("Scalar values expected in function mean");return i(o)}});function a(s,o){try{var u=Hb(s,o,n),l=Array.isArray(s)?Mt(s):s.size();return r(u,l[o])}catch(c){throw Va(c,"mean")}}function i(s){var o,u=0;if(Ho(s,function(l){try{o=o===void 0?l:n(o,l),u++}catch(c){throw Va(c,"mean",l)}}),u===0)throw new Error("Cannot calculate the mean of an empty array");return r(o,u)}}),wM="median",n5e=["typed","add","divide","compare","partitionSelect"],r5e=ee(wM,n5e,t=>{var{typed:e,add:n,divide:r,compare:a,partitionSelect:i}=t;function s(l){try{l=hn(l.valueOf());var c=l.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,d=i(l,f+1),h=l[f],m=0;m<f;++m)a(l[m],h)>0&&(h=l[m]);return u(h,d)}else{var v=i(l,(c-1)/2);return o(v)}}catch(y){throw Va(y,"median")}}var o=e({"number | BigNumber | Complex | Unit":function(c){return c}}),u=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return r(n(c,f),2)}});return e(wM,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(Od(c))throw new TypeError("Scalar values expected in function median");return s(c)}})}),NM="mad",a5e=["typed","abs","map","median","subtract"],i5e=ee(NM,a5e,t=>{var{typed:e,abs:n,map:r,median:a,subtract:i}=t;return e(NM,{"Array | Matrix":s,"...":function(u){return s(u)}});function s(o){if(o=hn(o.valueOf()),o.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var u=a(o);return a(r(o,function(l){return n(i(l,u))}))}catch(l){throw l instanceof TypeError&&l.message.includes("median")?new TypeError(l.message.replace("median","mad")):Va(l,"mad")}}}),G2="unbiased",SM="variance",s5e=["typed","add","subtract","multiply","divide","apply","isNaN"],cW=ee(SM,s5e,t=>{var{typed:e,add:n,subtract:r,multiply:a,divide:i,apply:s,isNaN:o}=t;return e(SM,{"Array | Matrix":function(f){return u(f,G2)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(f,d){return l(f,d,G2)},"Array | Matrix, number | BigNumber, string":l,"...":function(f){return u(f,G2)}});function u(c,f){var d,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Ho(c,function(y){try{d=d===void 0?y:n(d,y),h++}catch(b){throw Va(b,"variance",y)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var m=i(d,h);if(d=void 0,Ho(c,function(y){var b=r(y,m);d=d===void 0?a(b,b):n(d,a(b,b))}),o(d))return d;switch(f){case"uncorrected":return i(d,h);case"biased":return i(d,h+1);case"unbiased":{var v=qt(d)?d.mul(0):0;return h===1?v:i(d,h-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function l(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return s(c,f,h=>u(h,d))}catch(h){throw Va(h,"variance")}}}),CM="quantileSeq",o5e=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],fW=ee(CM,o5e,t=>{var{typed:e,bignumber:n,add:r,subtract:a,divide:i,multiply:s,partitionSelect:o,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d}=t,h=MT({typed:e,isInteger:l});return e(CM,{"Array | Matrix, number | BigNumber":(w,x)=>v(w,x,!1),"Array | Matrix, number | BigNumber, number":(w,x,S)=>m(w,x,!1,S,v),"Array | Matrix, number | BigNumber, boolean":v,"Array | Matrix, number | BigNumber, boolean, number":(w,x,S,C)=>m(w,x,S,C,v),"Array | Matrix, Array | Matrix":(w,x)=>y(w,x,!1),"Array | Matrix, Array | Matrix, number":(w,x,S)=>m(w,x,!1,S,y),"Array | Matrix, Array | Matrix, boolean":y,"Array | Matrix, Array | Matrix, boolean, number":(w,x,S,C)=>m(w,x,S,C,y)});function m(w,x,S,C,E){return h(w,C,A=>E(A,x,S))}function v(w,x,S){var C,E=w.valueOf();if(c(x,0))throw new Error("N/prob must be non-negative");if(f(x,1))return Vt(x)?b(E,x,S):n(b(E,x,S));if(d(x,1)){if(!l(x))throw new Error("N must be a positive integer");if(d(x,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var A=r(x,1);C=[];for(var k=0;c(k,x);k++){var T=i(k+1,A);C.push(b(E,T,S))}return Vt(x)?C:n(C)}}function y(w,x,S){for(var C=w.valueOf(),E=x.valueOf(),A=[],k=0;k<E.length;++k)A.push(b(C,E[k],S));return A}function b(w,x,S){var C=hn(w),E=C.length;if(E===0)throw new Error("Cannot calculate quantile of an empty sequence");var A=Vt(x)?x*(E-1):x.times(E-1),k=Vt(x)?Math.floor(A):A.floor().toNumber(),T=Vt(x)?A%1:A.minus(k);if(l(A))return S?C[A]:o(C,Vt(x)?A:A.valueOf());var I,$;if(S)I=C[k],$=C[k+1];else{$=o(C,k+1),I=C[k];for(var O=0;O<k;++O)u(C[O],I)>0&&(I=C[O])}return r(s(I,a(1,T)),s($,T))}}),EM="std",u5e=["typed","map","sqrt","variance"],dW=ee(EM,u5e,t=>{var{typed:e,map:n,sqrt:r,variance:a}=t;return e(EM,{"Array | Matrix":i,"Array | Matrix, string":i,"Array | Matrix, number | BigNumber":i,"Array | Matrix, number | BigNumber, string":i,"...":function(o){return i(o)}});function i(s,o){if(s.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var u=a.apply(null,arguments);return as(u)?n(u,r):r(u)}catch(l){throw l instanceof TypeError&&l.message.includes(" variance")?new TypeError(l.message.replace(" variance"," std")):l}}}),DM="corr",l5e=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],c5e=ee(DM,l5e,t=>{var{typed:e,matrix:n,sqrt:r,sum:a,add:i,subtract:s,multiply:o,pow:u,divide:l}=t;return e(DM,{"Array, Array":function(h,m){return c(h,m)},"Matrix, Matrix":function(h,m){var v=c(h.toArray(),m.toArray());return Array.isArray(v)?n(v):v}});function c(d,h){var m=[];if(Array.isArray(d[0])&&Array.isArray(h[0])){if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var v=0;v<d.length;v++){if(d[v].length!==h[v].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");m.push(f(d[v],h[v]))}return m}else{if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(d,h)}}function f(d,h){var m=d.length,v=a(d),y=a(h),b=d.reduce((E,A,k)=>i(E,o(A,h[k])),0),w=a(d.map(E=>u(E,2))),x=a(h.map(E=>u(E,2))),S=s(o(m,b),o(v,y)),C=r(o(s(o(m,w),u(v,2)),s(o(m,x),u(y,2))));return l(S,C)}}),TM="combinations",f5e=["typed"],d5e=ee(TM,f5e,t=>{var{typed:e}=t;return e(TM,{"number, number":fV,"BigNumber, BigNumber":function(r,a){var i=r.constructor,s,o,u=r.minus(a),l=new i(1);if(!$M(r)||!$M(a))throw new TypeError("Positive integer value expected in function combinations");if(a.gt(r))throw new TypeError("k must be less than n in function combinations");if(s=l,a.lt(u))for(o=l;o.lte(u);o=o.plus(l))s=s.times(a.plus(o)).dividedBy(o);else for(o=l;o.lte(a);o=o.plus(l))s=s.times(u.plus(o)).dividedBy(o);return s}})});function $M(t){return t.isInteger()&&t.gte(0)}var AM="combinationsWithRep",p5e=["typed"],h5e=ee(AM,p5e,t=>{var{typed:e}=t;return e(AM,{"number, number":function(r,a){if(!bt(r)||r<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!bt(a)||a<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r<1)throw new TypeError("k must be less than or equal to n + k - 1");if(a<r-1){var i=Oo(r,r+a-1);return i/Oo(1,a)}var s=Oo(a+1,r+a-1);return s/Oo(1,r-1)},"BigNumber, BigNumber":function(r,a){var i=r.constructor,s,o,u=new i(1),l=r.minus(u);if(!IM(r)||!IM(a))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r.lt(u))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(s=u,a.lt(l))for(o=u;o.lte(l);o=o.plus(u))s=s.times(a.plus(o)).dividedBy(o);else for(o=u;o.lte(a);o=o.plus(u))s=s.times(l.plus(o)).dividedBy(o);return s}})});function IM(t){return t.isInteger()&&t.gte(0)}var kM="gamma",m5e=["typed","config","multiplyScalar","pow","BigNumber","Complex"],g5e=ee(kM,m5e,t=>{var{typed:e,config:n,multiplyScalar:r,pow:a,BigNumber:i,Complex:s}=t;function o(l){if(l.im===0)return T0(l.re);if(l.re<.5){var c=new s(1-l.re,-l.im),f=new s(Math.PI*l.re,Math.PI*l.im);return new s(Math.PI).div(f.sin()).div(o(c))}l=new s(l.re-1,l.im);for(var d=new s(zf[0],0),h=1;h<zf.length;++h){var m=new s(zf[h],0);d=d.add(m.div(l.add(h)))}var v=new s(l.re+pV+.5,l.im),y=Math.sqrt(2*Math.PI),b=v.pow(l.add(.5)),w=v.neg().exp();return d.mul(y).mul(b).mul(w)}return e(kM,{number:T0,Complex:o,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new i(1/0):u(c.minus(1));if(!c.isFinite())return new i(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function u(l){if(l<8)return new i([1,1,2,6,24,120,720,5040][l]);var c=n.precision+(Math.log(l.toNumber())|0),f=i.clone({precision:c});if(l%2===1)return l.times(u(new i(l-1)));for(var d=l,h=new f(l),m=l.toNumber();d>2;)d-=2,m+=d,h=h.times(m);return new i(h.toPrecision(i.precision))}}),_M="lgamma",v5e=["Complex","typed"],y5e=ee(_M,v5e,t=>{var{Complex:e,typed:n}=t,r=7,a=7,i=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return n(_M,{number:$0,Complex:s,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function s(l){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(l.isNaN())return new e(NaN,NaN);if(l.im===0)return new e($0(l.re),0);if(l.re>=r||Math.abs(l.im)>=a)return o(l);if(l.re<=d){var h=hDe(c,l.im)*Math.floor(.5*l.re+.25),m=l.mul(Math.PI).sin().log(),v=s(new e(1-l.re,-l.im));return new e(f,h).sub(m).sub(v)}else return l.im>=0?u(l):u(l.conjugate()).conjugate()}function o(l){for(var c=l.sub(.5).mul(l.log()).sub(l).add(hV),f=new e(1,0).div(l),d=f.div(l),h=i[0],m=i[1],v=2*d.re,y=d.re*d.re+d.im*d.im,b=2;b<8;b++){var w=m;m=-y*h+i[b],h=v*h+w}var x=f.mul(d.mul(h).add(m));return c.add(x)}function u(l){var c=0,f=0,d=l;for(l=l.add(1);l.re<=r;){d=d.mul(l);var h=d.im<0?1:0;h!==0&&f===0&&c++,f=h,l=l.add(1)}return o(l).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),OM="factorial",b5e=["typed","gamma"],x5e=ee(OM,b5e,t=>{var{typed:e,gamma:n}=t;return e(OM,{number:function(a){if(a<0)throw new Error("Value must be non-negative");return n(a+1)},BigNumber:function(a){if(a.isNegative())throw new Error("Value must be non-negative");return n(a.plus(1))},"Array | Matrix":e.referToSelf(r=>a=>zt(a,r))})}),FM="kldivergence",w5e=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],N5e=ee(FM,w5e,t=>{var{typed:e,matrix:n,divide:r,sum:a,multiply:i,map:s,dotDivide:o,log:u,isNumeric:l}=t;return e(FM,{"Array, Array":function(d,h){return c(n(d),n(h))},"Matrix, Array":function(d,h){return c(d,n(h))},"Array, Matrix":function(d,h){return c(n(d),h)},"Matrix, Matrix":function(d,h){return c(d,h)}});function c(f,d){var h=d.size().length,m=f.size().length;if(h>1)throw new Error("first object must be one dimensional");if(m>1)throw new Error("second object must be one dimensional");if(h!==m)throw new Error("Length of two vectors must be equal");var v=a(f);if(v===0)throw new Error("Sum of elements in first object must be non zero");var y=a(d);if(y===0)throw new Error("Sum of elements in second object must be non zero");var b=r(f,a(f)),w=r(d,a(d)),x=a(i(b,s(o(b,w),S=>u(S))));return l(x)?x:Number.NaN}}),RM="multinomial",S5e=["typed","add","divide","multiply","factorial","isInteger","isPositive"],C5e=ee(RM,S5e,t=>{var{typed:e,add:n,divide:r,multiply:a,factorial:i,isInteger:s,isPositive:o}=t;return e(RM,{"Array | Matrix":function(l){var c=0,f=1;return Ho(l,function(d){if(!s(d)||!o(d))throw new TypeError("Positive integer value expected in function multinomial");c=n(c,d),f=a(f,i(d))}),r(i(c),f)}})}),MM="permutations",E5e=["typed","factorial"],D5e=ee(MM,E5e,t=>{var{typed:e,factorial:n}=t;return e(MM,{"number | BigNumber":n,"number, number":function(a,i){if(!bt(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(!bt(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(i>a)throw new TypeError("second argument k must be less than or equal to first argument n");return Oo(a-i+1,a)},"BigNumber, BigNumber":function(a,i){var s,o;if(!PM(a)||!PM(i))throw new TypeError("Positive integer value expected in function permutations");if(i.gt(a))throw new TypeError("second argument k must be less than or equal to first argument n");var u=a.mul(0).add(1);for(s=u,o=a.minus(i).plus(1);o.lte(a);o=o.plus(1))s=s.times(o);return s}})});function PM(t){return t.isInteger()&&t.gte(0)}var T5e=IB(Date.now());function ld(t){var e;function n(a){e=a===null?T5e:IB(String(a))}n(t);function r(){return e()}return r}var BM="pickRandom",$5e=["typed","config","?on"],A5e=ee(BM,$5e,t=>{var{typed:e,config:n,on:r}=t,a=ld(n.randomSeed);return r&&r("config",function(s,o){s.randomSeed!==o.randomSeed&&(a=ld(s.randomSeed))}),e(BM,{"Array | Matrix":function(o){return i(o,{})},"Array | Matrix, Object":function(o,u){return i(o,u)},"Array | Matrix, number":function(o,u){return i(o,{number:u})},"Array | Matrix, Array | Matrix":function(o,u){return i(o,{weights:u})},"Array | Matrix, Array | Matrix, number":function(o,u,l){return i(o,{number:l,weights:u})},"Array | Matrix, number, Array | Matrix":function(o,u,l){return i(o,{number:u,weights:l})}});function i(s,o){var{number:u,weights:l,elementWise:c=!0}=o,f=typeof u>"u";f&&(u=1);var d=Tt(s)?s.create:Tt(l)?l.create:null;s=s.valueOf(),l&&(l=l.valueOf()),c===!0&&(s=hn(s),l=hn(l));var h=0;if(typeof l<"u"){if(l.length!==s.length)throw new Error("Weights must have the same length as possibles");for(var m=0,v=l.length;m<v;m++){if(!Vt(l[m])||l[m]<0)throw new Error("Weights must be an array of positive numbers");h+=l[m]}}for(var y=s.length,b=[],w;b.length<u;){if(typeof l>"u")w=s[Math.floor(a()*y)];else for(var x=a()*h,S=0,C=s.length;S<C;S++)if(x-=l[S],x<0){w=s[S];break}b.push(w)}return f?b[0]:d?d(b):b}});function WT(t,e){var n=[];if(t=t.slice(0),t.length>1)for(var r=0,a=t.shift();r<a;r++)n.push(WT(t,e));else for(var i=0,s=t.shift();i<s;i++)n.push(e());return n}var LM="random",I5e=["typed","config","?on"],k5e=ee(LM,I5e,t=>{var{typed:e,config:n,on:r}=t,a=ld(n.randomSeed);return r&&r("config",function(o,u){o.randomSeed!==u.randomSeed&&(a=ld(o.randomSeed))}),e(LM,{"":()=>s(0,1),number:o=>s(0,o),"number, number":(o,u)=>s(o,u),"Array | Matrix":o=>i(o,0,1),"Array | Matrix, number":(o,u)=>i(o,0,u),"Array | Matrix, number, number":(o,u,l)=>i(o,u,l)});function i(o,u,l){var c=WT(o.valueOf(),()=>s(u,l));return Tt(o)?o.create(c,"number"):c}function s(o,u){return o+a()*(u-o)}}),zM="randomInt",_5e=["typed","config","?on"],O5e=ee(zM,_5e,t=>{var{typed:e,config:n,on:r}=t,a=ld(n.randomSeed);return r&&r("config",function(o,u){o.randomSeed!==u.randomSeed&&(a=ld(o.randomSeed))}),e(zM,{"":()=>s(0,1),number:o=>s(0,o),"number, number":(o,u)=>s(o,u),"Array | Matrix":o=>i(o,0,1),"Array | Matrix, number":(o,u)=>i(o,0,u),"Array | Matrix, number, number":(o,u,l)=>i(o,u,l)});function i(o,u,l){var c=WT(o.valueOf(),()=>s(u,l));return Tt(o)?o.create(c,"number"):c}function s(o,u){return Math.floor(o+a()*(u-o))}}),UM="stirlingS2",F5e=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],R5e=ee(UM,F5e,t=>{var{typed:e,addScalar:n,subtractScalar:r,multiplyScalar:a,divideScalar:i,pow:s,factorial:o,combinations:u,isNegative:l,isInteger:c,number:f,bignumber:d,larger:h}=t,m=[],v=[];return e(UM,{"number | BigNumber, number | BigNumber":function(b,w){if(!c(b)||l(b)||!c(w)||l(w))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(h(w,b))throw new TypeError("k must be less than or equal to n in function stirlingS2");var x=!(Vt(b)&&Vt(w)),S=x?v:m,C=x?d:f,E=f(b),A=f(w);if(S[E]&&S[E].length>A)return S[E][A];for(var k=0;k<=E;++k)if(S[k]||(S[k]=[C(k===0?1:0)]),k!==0)for(var T=S[k],I=S[k-1],$=T.length;$<=k&&$<=A;++$)$===k?T[$]=1:T[$]=n(a(C($),I[$]),I[$-1]);return S[E][A]}})}),VM="bellNumbers",M5e=["typed","addScalar","isNegative","isInteger","stirlingS2"],P5e=ee(VM,M5e,t=>{var{typed:e,addScalar:n,isNegative:r,isInteger:a,stirlingS2:i}=t;return e(VM,{"number | BigNumber":function(o){if(!a(o)||r(o))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var u=0,l=0;l<=o;l++)u=n(u,i(o,l));return u}})}),WM="catalan",B5e=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],L5e=ee(WM,B5e,t=>{var{typed:e,addScalar:n,divideScalar:r,multiplyScalar:a,combinations:i,isNegative:s,isInteger:o}=t;return e(WM,{"number | BigNumber":function(l){if(!o(l)||s(l))throw new TypeError("Non-negative integer value expected in function catalan");return r(i(a(l,2),l),n(l,1))}})}),qM="composition",z5e=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],U5e=ee(qM,z5e,t=>{var{typed:e,addScalar:n,combinations:r,isPositive:a,isNegative:i,isInteger:s,larger:o}=t;return e(qM,{"number | BigNumber, number | BigNumber":function(l,c){if(!s(l)||!a(l)||!s(c)||!a(c))throw new TypeError("Positive integer value expected in function composition");if(o(c,l))throw new TypeError("k must be less than or equal to n in function composition");return r(n(l,-1),n(c,-1))}})}),GM="leafCount",V5e=["parse","typed"],W5e=ee(GM,V5e,t=>{var{parse:e,typed:n}=t;function r(a){var i=0;return a.forEach(s=>{i+=r(s)}),i||1}return n(GM,{Node:function(i){return r(i)}})});function HM(t){return sn(t)||pr(t)&&t.isUnary()&&sn(t.args[0])}function B0(t){return!!(sn(t)||(ju(t)||pr(t))&&t.args.every(B0)||qo(t)&&B0(t.content))}function jM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function H2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jM(Object(n),!0).forEach(function(r){Fr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var q5e="simplifyUtil",G5e=["FunctionNode","OperatorNode","SymbolNode"],qT=ee(q5e,G5e,t=>{var{FunctionNode:e,OperatorNode:n,SymbolNode:r}=t,a=!0,i=!1,s="defaultF",o={add:{trivial:a,total:a,commutative:a,associative:a},unaryPlus:{trivial:a,total:a,commutative:a,associative:a},subtract:{trivial:i,total:a,commutative:i,associative:i},multiply:{trivial:a,total:a,commutative:a,associative:a},divide:{trivial:i,total:a,commutative:i,associative:i},paren:{trivial:a,total:a,commutative:a,associative:i},defaultF:{trivial:i,total:a,commutative:i,associative:i}},u={divide:{total:i},log:{total:i}},l={subtract:{total:i},abs:{trivial:a},log:{total:a}};function c(x,S){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o,E=s;if(typeof x=="string"?E=x:pr(x)?E=x.fn.toString():ju(x)?E=x.name:qo(x)&&(E="paren"),dt(C,E)){var A=C[E];if(dt(A,S))return A[S];if(dt(o,E))return o[E][S]}if(dt(C,s)){var k=C[s];return dt(k,S)?k[S]:o[s][S]}if(dt(o,E)){var T=o[E];if(dt(T,S))return T[S]}return o[s][S]}function f(x){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(x,"commutative",S)}function d(x){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(x,"associative",S)}function h(x,S){var C=H2({},x);for(var E in S)dt(x,E)?C[E]=H2(H2({},S[E]),x[E]):C[E]=S[E];return C}function m(x,S){if(!x.args||x.args.length===0)return x;x.args=v(x,S);for(var C=0;C<x.args.length;C++)m(x.args[C],S)}function v(x,S){var C,E=[],A=function(T){for(var I=0;I<T.args.length;I++){var $=T.args[I];pr($)&&C===$.op?A($):E.push($)}};return d(x,S)?(C=x.op,A(x),E):x.args}function y(x,S){if(!(!x.args||x.args.length===0)){for(var C=w(x),E=x.args.length,A=0;A<E;A++)y(x.args[A],S);if(E>2&&d(x,S)){for(var k=x.args.pop();x.args.length>0;)k=C([x.args.pop(),k]);x.args=k.args}}}function b(x,S){if(!(!x.args||x.args.length===0)){for(var C=w(x),E=x.args.length,A=0;A<E;A++)b(x.args[A],S);if(E>2&&d(x,S)){for(var k=x.args.shift();x.args.length>0;)k=C([k,x.args.shift()]);x.args=k.args}}}function w(x){return pr(x)?function(S){try{return new n(x.op,x.fn,S,x.implicit)}catch(C){return console.error(C),[]}}:function(S){return new e(new r(x.name),S)}}return{createMakeNodeFunction:w,hasProperty:c,isCommutative:f,isAssociative:d,mergeContext:h,flatten:m,allChildren:v,unflattenr:y,unflattenl:b,defaultContext:o,realContext:u,positiveContext:l}}),H5e="simplify",j5e=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],X5e=ee(H5e,j5e,t=>{var{typed:e,parse:n,equal:r,resolve:a,simplifyConstant:i,simplifyCore:s,AccessorNode:o,ArrayNode:u,ConstantNode:l,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:h,ParenthesisNode:m,SymbolNode:v,replacer:y}=t,{hasProperty:b,isCommutative:w,isAssociative:x,mergeContext:S,flatten:C,unflattenr:E,unflattenl:A,createMakeNodeFunction:k,defaultContext:T,realContext:I,positiveContext:$}=qT({FunctionNode:c,OperatorNode:h,SymbolNode:v});e.addConversion({from:"Object",to:"Map",convert:Bf});var O=e("simplify",{Node:M,"Node, Map":(J,K)=>M(J,!1,K),"Node, Map, Object":(J,K,ae)=>M(J,!1,K,ae),"Node, Array":M,"Node, Array, Map":M,"Node, Array, Map, Object":M});e.removeConversion({from:"Object",to:"Map",convert:Bf}),O.defaultContext=T,O.realContext=I,O.positiveContext=$;function B(J){return J.transform(function(K){return qo(K)?B(K.content):K})}var z={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};O.rules=[s,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},i,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},i,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function L(J,K){var ae={};if(J.s){var pe=J.s.split("->");if(pe.length===2)ae.l=pe[0],ae.r=pe[1];else throw SyntaxError("Could not parse rule: "+J.s)}else ae.l=J.l,ae.r=J.r;ae.l=B(n(ae.l)),ae.r=B(n(ae.r));for(var he of["imposeContext","repeat","assuming"])he in J&&(ae[he]=J[he]);if(J.evaluate&&(ae.evaluate=n(J.evaluate)),x(ae.l,K)){var Se=!w(ae.l,K),Ee;Se&&(Ee=W());var Z=k(ae.l),ie=W();ae.expanded={},ae.expanded.l=Z([ae.l,ie]),C(ae.expanded.l,K),E(ae.expanded.l,K),ae.expanded.r=Z([ae.r,ie]),Se&&(ae.expandedNC1={},ae.expandedNC1.l=Z([Ee,ae.l]),ae.expandedNC1.r=Z([Ee,ae.r]),ae.expandedNC2={},ae.expandedNC2.l=Z([Ee,ae.expanded.l]),ae.expandedNC2.r=Z([Ee,ae.expanded.r]))}return ae}function F(J,K){for(var ae=[],pe=0;pe<J.length;pe++){var he=J[pe],Se=void 0,Ee=typeof he;switch(Ee){case"string":he={s:he};case"object":Se=L(he,K);break;case"function":Se=he;break;default:throw TypeError("Unsupported type of rule: "+Ee)}ae.push(Se)}return ae}var R=0;function W(){return new v("_p"+R++)}function M(J,K){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xh(),pe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},he=pe.consoleDebug;K=F(K||O.rules,pe.context);var Se=a(J,ae);Se=B(Se);for(var Ee={},Z=Se.toString({parenthesis:"all"});!Ee[Z];){Ee[Z]=!0,R=0;var ie=Z;he&&console.log("Working on: ",Z);for(var ve=0;ve<K.length;ve++){var we="";if(typeof K[ve]=="function"?(Se=K[ve](Se,pe),he&&(we=K[ve].name)):(C(Se,pe.context),Se=q(Se,K[ve],pe.context),he&&(we="".concat(K[ve].l.toString()," -> ").concat(K[ve].r.toString()))),he){var Fe=Se.toString({parenthesis:"all"});Fe!==ie&&(console.log("Applying",we,"produced",Fe),ie=Fe)}A(Se,pe.context)}Z=Se.toString({parenthesis:"all"})}return Se}function j(J,K,ae){var pe=J;if(J)for(var he=0;he<J.length;++he){var Se=q(J[he],K,ae);Se!==J[he]&&(pe===J&&(pe=J.slice()),pe[he]=Se)}return pe}function q(J,K,ae){if(K.assuming){for(var pe in K.assuming)for(var he in K.assuming[pe])if(b(pe,he,ae)!==K.assuming[pe][he])return J}var Se=S(K.imposeContext,ae),Ee=J;if(Ee instanceof h||Ee instanceof c){var Z=j(Ee.args,K,ae);Z!==Ee.args&&(Ee=Ee.clone(),Ee.args=Z)}else if(Ee instanceof m){if(Ee.content){var ie=q(Ee.content,K,ae);ie!==Ee.content&&(Ee=new m(ie))}}else if(Ee instanceof u){var ve=j(Ee.items,K,ae);ve!==Ee.items&&(Ee=new u(ve))}else if(Ee instanceof o){var we=Ee.object;Ee.object&&(we=q(Ee.object,K,ae));var Fe=Ee.index;Ee.index&&(Fe=q(Ee.index,K,ae)),(we!==Ee.object||Fe!==Ee.index)&&(Ee=new o(we,Fe))}else if(Ee instanceof f){var Re=j(Ee.dimensions,K,ae);Re!==Ee.dimensions&&(Ee=new f(Re))}else if(Ee instanceof d){var Ge=!1,Ze={};for(var re in Ee.properties)Ze[re]=q(Ee.properties[re],K,ae),Ze[re]!==Ee.properties[re]&&(Ge=!0);Ge&&(Ee=new d(Ze))}var ce=K.r,Ce=te(K.l,Ee,Se)[0];if(!Ce&&K.expanded&&(ce=K.expanded.r,Ce=te(K.expanded.l,Ee,Se)[0]),!Ce&&K.expandedNC1&&(ce=K.expandedNC1.r,Ce=te(K.expandedNC1.l,Ee,Se)[0],Ce||(ce=K.expandedNC2.r,Ce=te(K.expandedNC2.l,Ee,Se)[0])),Ce){var $e=Ee.implicit;Ee=ce.clone(),$e&&"implicit"in ce&&(Ee.implicit=!0),Ee=Ee.transform(function(Be){return Be.isSymbolNode&&dt(Ce.placeholders,Be.name)?Ce.placeholders[Be.name].clone():Be})}return K.repeat&&Ee!==J&&(Ee=q(Ee,K,ae)),Ee}function H(J,K){var ae=[],pe,he,Se=k(J);if(w(J,K))for(var Ee=0;Ee<J.args.length;Ee++)he=J.args.slice(0),he.splice(Ee,1),pe=he.length===1?he[0]:Se(he),ae.push(Se([J.args[Ee],pe]));else for(var Z=1;Z<J.args.length;Z++){var ie=J.args[0];Z>1&&(ie=Se(J.args.slice(0,Z))),he=J.args.slice(Z),pe=he.length===1?he[0]:Se(he),ae.push(Se([ie,pe]))}return ae}function G(J,K){var ae={placeholders:{}};if(!J.placeholders&&!K.placeholders)return ae;if(J.placeholders){if(!K.placeholders)return J}else return K;for(var pe in J.placeholders)if(dt(J.placeholders,pe)&&(ae.placeholders[pe]=J.placeholders[pe],dt(K.placeholders,pe)&&!se(J.placeholders[pe],K.placeholders[pe])))return null;for(var he in K.placeholders)dt(K.placeholders,he)&&(ae.placeholders[he]=K.placeholders[he]);return ae}function ne(J,K){var ae=[];if(J.length===0||K.length===0)return ae;for(var pe,he=0;he<J.length;he++)for(var Se=0;Se<K.length;Se++)pe=G(J[he],K[Se]),pe&&ae.push(pe);return ae}function ue(J){if(J.length===0)return J;for(var K=J.reduce(ne),ae=[],pe={},he=0;he<K.length;he++){var Se=JSON.stringify(K[he],y);pe[Se]||(pe[Se]=!0,ae.push(K[he]))}return ae}function te(J,K,ae,pe){var he=[{placeholders:{}}];if(J instanceof h&&K instanceof h||J instanceof c&&K instanceof c){if(J instanceof h){if(J.op!==K.op||J.fn!==K.fn)return[]}else if(J instanceof c&&J.name!==K.name)return[];if(K.args.length===1&&J.args.length===1||!x(K,ae)&&K.args.length===J.args.length||pe){for(var Se=[],Ee=0;Ee<J.args.length;Ee++){var Z=te(J.args[Ee],K.args[Ee],ae);if(Z.length===0)break;Se.push(Z)}if(Se.length!==J.args.length){if(!w(K,ae)||J.args.length===1)return[];if(J.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var ie=te(J.args[0],K.args[1],ae);if(ie.length===0)return[];var ve=te(J.args[1],K.args[0],ae);if(ve.length===0)return[];Se=[ie,ve]}he=ue(Se)}else if(K.args.length>=2&&J.args.length===2){for(var we=H(K,ae),Fe=[],Re=0;Re<we.length;Re++){var Ge=te(J,we[Re],ae,!0);Fe=Fe.concat(Ge)}return Fe}else{if(J.args.length>2)throw Error("Unexpected non-binary associative function: "+J.toString());return[]}}else if(J instanceof v){if(J.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(z[J.name]){if(J.name!==K.name)return[]}else switch(J.name[1]>="a"&&J.name[1]<="z"?J.name.substring(0,2):J.name[0]){case"n":case"_p":he[0].placeholders[J.name]=K;break;case"c":case"cl":if(sn(K))he[0].placeholders[J.name]=K;else return[];break;case"v":if(!sn(K))he[0].placeholders[J.name]=K;else return[];break;case"vl":if(jr(K))he[0].placeholders[J.name]=K;else return[];break;case"cd":if(HM(K))he[0].placeholders[J.name]=K;else return[];break;case"vd":if(!HM(K))he[0].placeholders[J.name]=K;else return[];break;case"ce":if(B0(K))he[0].placeholders[J.name]=K;else return[];break;case"ve":if(!B0(K))he[0].placeholders[J.name]=K;else return[];break;default:throw new Error("Invalid symbol in rule: "+J.name)}}else if(J instanceof l){if(!r(J.value,K.value))return[]}else return[];return he}function se(J,K){if(J instanceof l&&K instanceof l){if(!r(J.value,K.value))return!1}else if(J instanceof v&&K instanceof v){if(J.name!==K.name)return!1}else if(J instanceof h&&K instanceof h||J instanceof c&&K instanceof c){if(J instanceof h){if(J.op!==K.op||J.fn!==K.fn)return!1}else if(J instanceof c&&J.name!==K.name)return!1;if(J.args.length!==K.args.length)return!1;for(var ae=0;ae<J.args.length;ae++)if(!se(J.args[ae],K.args[ae]))return!1}else return!1;return!0}return O}),K5e="simplifyConstant",Y5e=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],Z5e=ee(K5e,Y5e,t=>{var{typed:e,config:n,mathWithTransform:r,matrix:a,fraction:i,bignumber:s,AccessorNode:o,ArrayNode:u,ConstantNode:l,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:h,SymbolNode:m}=t,{isCommutative:v,isAssociative:y,allChildren:b,createMakeNodeFunction:w}=qT({FunctionNode:c,OperatorNode:h,SymbolNode:m}),x=e("simplifyConstant",{Node:L=>A(z(L,{})),"Node, Object":function(F,R){return A(z(F,R))}});function S(L){return Jm(L)?L.valueOf():L instanceof Array?L.map(S):Tt(L)?a(S(L.valueOf())):L}function C(L,F,R){try{return r[L].apply(null,F)}catch{return F=F.map(S),T(r[L].apply(null,F),R)}}var E=e({Fraction:$,number:function(F){return F<0?I(new l(-F)):new l(F)},BigNumber:function(F){return F<0?I(new l(-F)):new l(F)},bigint:function(F){return F<0n?I(new l(-F)):new l(F)},Complex:function(F){throw new Error("Cannot convert Complex number to Node")},string:function(F){return new l(F)},Matrix:function(F){return new u(F.valueOf().map(R=>E(R)))}});function A(L){return Dn(L)?L:E(L)}function k(L,F){var R=F&&F.exactFractions!==!1;if(R&&isFinite(L)&&i){var W=i(L),M=F&&typeof F.fractionsLimit=="number"?F.fractionsLimit:1/0;if(W.valueOf()===L&&W.n<M&&W.d<M)return W}return L}var T=e({"string, Object":function(F,R){var W=ll(F,n);if(W==="BigNumber")return s===void 0&&LT(),s(F);if(W==="bigint")return BigInt(F);if(W==="Fraction")return i===void 0&&HV(),i(F);var M=parseFloat(F);return k(M,R)},"Fraction, Object":function(F,R){return F},"BigNumber, Object":function(F,R){return F},"number, Object":function(F,R){return k(F,R)},"bigint, Object":function(F,R){return F},"Complex, Object":function(F,R){return F.im!==0?F:k(F.re,R)},"Matrix, Object":function(F,R){return a(k(F.valueOf()))},"Array, Object":function(F,R){return F.map(k)}});function I(L){return new h("-","unaryMinus",[L])}function $(L){var F=M=>n.number==="BigNumber"&&s?s(M):Number(M),R=L.s*L.n,W=R<0n?new h("-","unaryMinus",[new l(-F(R))]):new l(F(R));return L.d===1n?W:new h("/","divide",[W,new l(F(L.d))])}function O(L,F,R){if(!_d(F))return new o(A(L),A(F));if(Wi(L)||Tt(L)){for(var W=Array.from(F.dimensions);W.length>0;)if(sn(W[0])&&typeof W[0].value!="string"){var M=T(W.shift().value,R);Wi(L)?L=L.items[M-1]:(L=L.valueOf()[M-1],L instanceof Array&&(L=a(L)))}else if(W.length>1&&sn(W[1])&&typeof W[1].value!="string"){var j=T(W[1].value,R),q=[],H=Wi(L)?L.items:L.valueOf();for(var G of H)if(Wi(G))q.push(G.items[j-1]);else if(Tt(L))q.push(G[j-1]);else break;if(q.length===H.length)Wi(L)?L=new u(q):L=a(q),W.splice(1,1);else break}else break;return W.length===F.dimensions.length?new o(A(L),F):W.length>0?(F=new f(W),new o(A(L),F)):L}if(zb(L)&&F.dimensions.length===1&&sn(F.dimensions[0])){var ne=F.dimensions[0].value;return ne in L.properties?L.properties[ne]:new l}return new o(A(L),F)}function B(L,F,R,W){var M=F.shift(),j=F.reduce((q,H)=>{if(!Dn(H)){var G=q.pop();if(Dn(G))return[G,H];try{return q.push(C(L,[G,H],W)),q}catch{q.push(G)}}q.push(A(q.pop()));var ne=q.length===1?q[0]:R(q);return[R([ne,A(H)])]},[M]);return j.length===1?j[0]:R([j[0],E(j[1])])}function z(L,F){switch(L.type){case"SymbolNode":return L;case"ConstantNode":switch(typeof L.value){case"number":return T(L.value,F);case"bigint":return T(L.value,F);case"string":return L.value;default:if(!isNaN(L.value))return T(L.value,F)}return L;case"FunctionNode":if(r[L.name]&&r[L.name].rawArgs)return L;{var R=["add","multiply"];if(!R.includes(L.name)){var W=L.args.map(pe=>z(pe,F));if(!W.some(Dn))try{return C(L.name,W,F)}catch{}if(L.name==="size"&&W.length===1&&Wi(W[0])){for(var M=[],j=W[0];Wi(j);)M.push(j.items.length),j=j.items[0];return a(M)}return new c(L.name,W.map(A))}}case"OperatorNode":{var q=L.fn.toString(),H,G,ne=w(L);if(pr(L)&&L.isUnary())H=[z(L.args[0],F)],Dn(H[0])?G=ne(H):G=C(q,H,F);else if(y(L,F.context))if(H=b(L,F.context),H=H.map(pe=>z(pe,F)),v(q,F.context)){for(var ue=[],te=[],se=0;se<H.length;se++)Dn(H[se])?te.push(H[se]):ue.push(H[se]);ue.length>1?(G=B(q,ue,ne,F),te.unshift(G),G=B(q,te,ne,F)):G=B(q,H,ne,F)}else G=B(q,H,ne,F);else H=L.args.map(pe=>z(pe,F)),G=B(q,H,ne,F);return G}case"ParenthesisNode":return z(L.content,F);case"AccessorNode":return O(z(L.object,F),z(L.index,F),F);case"ArrayNode":{var J=L.items.map(pe=>z(pe,F));return J.some(Dn)?new u(J.map(A)):a(J)}case"IndexNode":return new f(L.dimensions.map(pe=>x(pe,F)));case"ObjectNode":{var K={};for(var ae in L.properties)K[ae]=x(L.properties[ae],F);return new d(K)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(L.type))}}return x}),XM="simplifyCore",Q5e=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],J5e=ee(XM,Q5e,t=>{var{typed:e,parse:n,equal:r,isZero:a,add:i,subtract:s,multiply:o,divide:u,pow:l,AccessorNode:c,ArrayNode:f,ConstantNode:d,FunctionNode:h,IndexNode:m,ObjectNode:v,OperatorNode:y,ParenthesisNode:b,SymbolNode:w}=t,x=new d(0),S=new d(1),C=new d(!0),E=new d(!1);function A($){return pr($)&&["and","not","or"].includes($.op)}var{hasProperty:k,isCommutative:T}=qT({FunctionNode:h,OperatorNode:y,SymbolNode:w});function I($){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=O?O.context:void 0;if(k($,"trivial",B)){if(ju($)&&$.args.length===1)return I($.args[0],O);var z=!1,L=0;if($.forEach(te=>{++L,L===1&&(z=I(te,O))}),L===1)return z}var F=$;if(ju(F)){var R=xRe(F.name);if(R){if(F.args.length>2&&k(F,"associative",B))for(;F.args.length>2;){var W=F.args.pop(),M=F.args.pop();F.args.push(new y(R,F.name,[W,M]))}F=new y(R,F.name,F.args)}else return new h(I(F.fn),F.args.map(te=>I(te,O)))}if(pr(F)&&F.isUnary()){var j=I(F.args[0],O);if(F.op==="~"&&pr(j)&&j.isUnary()&&j.op==="~"||F.op==="not"&&pr(j)&&j.isUnary()&&j.op==="not"&&A(j.args[0]))return j.args[0];var q=!0;if(F.op==="-"&&pr(j)&&(j.isBinary()&&j.fn==="subtract"&&(F=new y("-","subtract",[j.args[1],j.args[0]]),q=!1),j.isUnary()&&j.op==="-"))return j.args[0];if(q)return new y(F.op,F.fn,[j])}if(pr(F)&&F.isBinary()){var H=I(F.args[0],O),G=I(F.args[1],O);if(F.op==="+"){if(sn(H)&&a(H.value))return G;if(sn(G)&&a(G.value))return H;pr(G)&&G.isUnary()&&G.op==="-"&&(G=G.args[0],F=new y("-","subtract",[H,G]))}if(F.op==="-")return pr(G)&&G.isUnary()&&G.op==="-"?I(new y("+","add",[H,G.args[0]]),O):sn(H)&&a(H.value)?I(new y("-","unaryMinus",[G])):sn(G)&&a(G.value)?H:new y(F.op,F.fn,[H,G]);if(F.op==="*"){if(sn(H)){if(a(H.value))return x;if(r(H.value,1))return G}if(sn(G)){if(a(G.value))return x;if(r(G.value,1))return H;if(T(F,B))return new y(F.op,F.fn,[G,H],F.implicit)}return new y(F.op,F.fn,[H,G],F.implicit)}if(F.op==="/")return sn(H)&&a(H.value)?x:sn(G)&&r(G.value,1)?H:new y(F.op,F.fn,[H,G]);if(F.op==="^"&&sn(G)){if(a(G.value))return S;if(r(G.value,1))return H}if(F.op==="and"){if(sn(H))if(H.value){if(A(G))return G;if(sn(G))return G.value?C:E}else return E;if(sn(G))if(G.value){if(A(H))return H}else return E}if(F.op==="or"){if(sn(H)){if(H.value)return C;if(A(G))return G}if(sn(G)){if(G.value)return C;if(A(H))return H}}return new y(F.op,F.fn,[H,G])}if(pr(F))return new y(F.op,F.fn,F.args.map(te=>I(te,O)));if(Wi(F))return new f(F.items.map(te=>I(te,O)));if(hc(F))return new c(I(F.object,O),I(F.index,O));if(_d(F))return new m(F.dimensions.map(te=>I(te,O)));if(zb(F)){var ne={};for(var ue in F.properties)ne[ue]=I(F.properties[ue],O);return new v(ne)}return F}return e(XM,{Node:I,"Node,Object":I})}),e6e="resolve",t6e=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],n6e=ee(e6e,t6e,t=>{var{typed:e,parse:n,ConstantNode:r,FunctionNode:a,OperatorNode:i,ParenthesisNode:s}=t;function o(u,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!l)return u;if(jr(u)){if(c.has(u.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var d=l.get(u.name);if(Dn(d)){var h=new Set(c);return h.add(u.name),o(d,l,h)}else return typeof d=="number"?n(String(d)):d!==void 0?new r(d):u}else if(pr(u)){var m=u.args.map(function(y){return o(y,l,c)});return new i(u.op,u.fn,m,u.implicit)}else{if(qo(u))return new s(o(u.content,l,c));if(ju(u)){var v=u.args.map(function(y){return o(y,l,c)});return new a(u.name,v)}}return u.map(y=>o(y,l,c))}return e("resolve",{Node:o,"Node, Map | null | undefined":o,"Node, Object":(u,l)=>o(u,Bf(l)),"Array | Matrix":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array | Matrix, null | undefined":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array, Object":e.referTo("Array,Map",u=>(l,c)=>u(l,Bf(c))),"Matrix, Object":e.referTo("Matrix,Map",u=>(l,c)=>u(l,Bf(c))),"Array | Matrix, Map":e.referToSelf(u=>(l,c)=>l.map(f=>u(f,c)))})}),KM="symbolicEqual",r6e=["parse","simplify","typed","OperatorNode"],a6e=ee(KM,r6e,t=>{var{parse:e,simplify:n,typed:r,OperatorNode:a}=t;function i(s,o){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=new a("-","subtract",[s,o]),c=n(l,{},u);return sn(c)&&!c.value}return r(KM,{"Node, Node":i,"Node, Node, Object":i})}),YM="derivative",i6e=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],s6e=ee(YM,i6e,t=>{var{typed:e,config:n,parse:r,simplify:a,equal:i,isZero:s,numeric:o,ConstantNode:u,FunctionNode:l,OperatorNode:c,ParenthesisNode:f,SymbolNode:d}=t;function h(S,C){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},A={};b(A,S,C.name);var k=w(S,A);return E.simplify?a(k):k}function m(S){var C=r(S);if(!C.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(S)," into a variable in function derivative"));return C}var v=e(YM,{"Node, SymbolNode":h,"Node, SymbolNode, Object":h,"Node, string":(S,C)=>h(S,m(C)),"Node, string, Object":(S,C,E)=>h(S,m(C),E)});v._simplify=!0,v.toTex=function(S){return y.apply(null,S.args)};var y=e("_derivTex",{"Node, SymbolNode":function(C,E){return sn(C)&&Rn(C.value)==="string"?y(r(C.value).toString(),E.toString(),1):y(C.toTex(),E.toString(),1)},"Node, ConstantNode":function(C,E){if(Rn(E.value)==="string")return y(C,r(E.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(C,E,A){return y(C.toString(),E.name,A.value)},"string, string, number":function(C,E,A){var k;return A===1?k="{d\\over d"+E+"}":k="{d^{"+A+"}\\over d"+E+"^{"+A+"}}",k+"\\left[".concat(C,"\\right]")}}),b=e("constTag",{"Object, ConstantNode, string":function(C,E){return C[E]=!0,!0},"Object, SymbolNode, string":function(C,E,A){return E.name!==A?(C[E]=!0,!0):!1},"Object, ParenthesisNode, string":function(C,E,A){return b(C,E.content,A)},"Object, FunctionAssignmentNode, string":function(C,E,A){return E.params.includes(A)?b(C,E.expr,A):(C[E]=!0,!0)},"Object, FunctionNode | OperatorNode, string":function(C,E,A){if(E.args.length>0){for(var k=b(C,E.args[0],A),T=1;T<E.args.length;++T)k=b(C,E.args[T],A)&&k;if(k)return C[E]=!0,!0}return!1}}),w=e("_derivative",{"ConstantNode, Object":function(C){return x(0)},"SymbolNode, Object":function(C,E){return E[C]!==void 0?x(0):x(1)},"ParenthesisNode, Object":function(C,E){return new f(w(C.content,E))},"FunctionAssignmentNode, Object":function(C,E){return E[C]!==void 0?x(0):w(C.expr,E)},"FunctionNode, Object":function(C,E){if(E[C]!==void 0)return x(0);var A=C.args[0],k,T=!1,I=!1,$;switch(C.name){case"cbrt":T=!0,$=new c("*","multiply",[x(3),new c("^","pow",[A,new c("/","divide",[x(2),x(3)])])]);break;case"sqrt":case"nthRoot":if(C.args.length===1)T=!0,$=new c("*","multiply",[x(2),new l("sqrt",[A])]);else if(C.args.length===2)return k=new c("/","divide",[x(1),C.args[1]]),E[k]=E[C.args[1]],w(new c("^","pow",[A,k]),E);break;case"log10":k=x(10);case"log":if(!k&&C.args.length===1)$=A.clone(),T=!0;else if(C.args.length===1&&k||C.args.length===2&&E[C.args[1]]!==void 0)$=new c("*","multiply",[A.clone(),new l("log",[k||C.args[1]])]),T=!0;else if(C.args.length===2)return w(new c("/","divide",[new l("log",[A]),new l("log",[C.args[1]])]),E);break;case"pow":if(C.args.length===2)return E[k]=E[C.args[1]],w(new c("^","pow",[A,C.args[1]]),E);break;case"exp":$=new l("exp",[A.clone()]);break;case"sin":$=new l("cos",[A.clone()]);break;case"cos":$=new c("-","unaryMinus",[new l("sin",[A.clone()])]);break;case"tan":$=new c("^","pow",[new l("sec",[A.clone()]),x(2)]);break;case"sec":$=new c("*","multiply",[C,new l("tan",[A.clone()])]);break;case"csc":I=!0,$=new c("*","multiply",[C,new l("cot",[A.clone()])]);break;case"cot":I=!0,$=new c("^","pow",[new l("csc",[A.clone()]),x(2)]);break;case"asin":T=!0,$=new l("sqrt",[new c("-","subtract",[x(1),new c("^","pow",[A.clone(),x(2)])])]);break;case"acos":T=!0,I=!0,$=new l("sqrt",[new c("-","subtract",[x(1),new c("^","pow",[A.clone(),x(2)])])]);break;case"atan":T=!0,$=new c("+","add",[new c("^","pow",[A.clone(),x(2)]),x(1)]);break;case"asec":T=!0,$=new c("*","multiply",[new l("abs",[A.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[A.clone(),x(2)]),x(1)])])]);break;case"acsc":T=!0,I=!0,$=new c("*","multiply",[new l("abs",[A.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[A.clone(),x(2)]),x(1)])])]);break;case"acot":T=!0,I=!0,$=new c("+","add",[new c("^","pow",[A.clone(),x(2)]),x(1)]);break;case"sinh":$=new l("cosh",[A.clone()]);break;case"cosh":$=new l("sinh",[A.clone()]);break;case"tanh":$=new c("^","pow",[new l("sech",[A.clone()]),x(2)]);break;case"sech":I=!0,$=new c("*","multiply",[C,new l("tanh",[A.clone()])]);break;case"csch":I=!0,$=new c("*","multiply",[C,new l("coth",[A.clone()])]);break;case"coth":I=!0,$=new c("^","pow",[new l("csch",[A.clone()]),x(2)]);break;case"asinh":T=!0,$=new l("sqrt",[new c("+","add",[new c("^","pow",[A.clone(),x(2)]),x(1)])]);break;case"acosh":T=!0,$=new l("sqrt",[new c("-","subtract",[new c("^","pow",[A.clone(),x(2)]),x(1)])]);break;case"atanh":T=!0,$=new c("-","subtract",[x(1),new c("^","pow",[A.clone(),x(2)])]);break;case"asech":T=!0,I=!0,$=new c("*","multiply",[A.clone(),new l("sqrt",[new c("-","subtract",[x(1),new c("^","pow",[A.clone(),x(2)])])])]);break;case"acsch":T=!0,I=!0,$=new c("*","multiply",[new l("abs",[A.clone()]),new l("sqrt",[new c("+","add",[new c("^","pow",[A.clone(),x(2)]),x(1)])])]);break;case"acoth":T=!0,I=!0,$=new c("-","subtract",[x(1),new c("^","pow",[A.clone(),x(2)])]);break;case"abs":$=new c("/","divide",[new l(new d("abs"),[A.clone()]),A.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+C.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var O,B;T?(O="/",B="divide"):(O="*",B="multiply");var z=w(A,E);return I&&(z=new c("-","unaryMinus",[z])),new c(O,B,[z,$])},"OperatorNode, Object":function(C,E){if(E[C]!==void 0)return x(0);if(C.op==="+")return new c(C.op,C.fn,C.args.map(function(F){return w(F,E)}));if(C.op==="-"){if(C.isUnary())return new c(C.op,C.fn,[w(C.args[0],E)]);if(C.isBinary())return new c(C.op,C.fn,[w(C.args[0],E),w(C.args[1],E)])}if(C.op==="*"){var A=C.args.filter(function(F){return E[F]!==void 0});if(A.length>0){var k=C.args.filter(function(F){return E[F]===void 0}),T=k.length===1?k[0]:new c("*","multiply",k),I=A.concat(w(T,E));return new c("*","multiply",I)}return new c("+","add",C.args.map(function(F){return new c("*","multiply",C.args.map(function(R){return R===F?w(R,E):R.clone()}))}))}if(C.op==="/"&&C.isBinary()){var $=C.args[0],O=C.args[1];return E[O]!==void 0?new c("/","divide",[w($,E),O]):E[$]!==void 0?new c("*","multiply",[new c("-","unaryMinus",[$]),new c("/","divide",[w(O,E),new c("^","pow",[O.clone(),x(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[w($,E),O.clone()]),new c("*","multiply",[$.clone(),w(O,E)])]),new c("^","pow",[O.clone(),x(2)])])}if(C.op==="^"&&C.isBinary()){var B=C.args[0],z=C.args[1];if(E[B]!==void 0)return sn(B)&&(s(B.value)||i(B.value,1))?x(0):new c("*","multiply",[C,new c("*","multiply",[new l("log",[B.clone()]),w(z.clone(),E)])]);if(E[z]!==void 0){if(sn(z)){if(s(z.value))return x(0);if(i(z.value,1))return w(B,E)}var L=new c("^","pow",[B.clone(),new c("-","subtract",[z,x(1)])]);return new c("*","multiply",[z.clone(),new c("*","multiply",[w(B,E),L])])}return new c("*","multiply",[new c("^","pow",[B.clone(),z.clone()]),new c("+","add",[new c("*","multiply",[w(B,E),new c("/","divide",[z.clone(),B.clone()])]),new c("*","multiply",[w(z,E),new l("log",[B.clone()])])])])}throw new Error('Cannot process operator "'+C.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function x(S,C){return new u(o(S,ll(String(S),n)))}return v}),ZM="rationalize",o6e=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],u6e=ee(ZM,o6e,t=>{var{config:e,typed:n,equal:r,isZero:a,add:i,subtract:s,multiply:o,divide:u,pow:l,parse:c,simplifyConstant:f,simplifyCore:d,simplify:h,fraction:m,bignumber:v,mathWithTransform:y,matrix:b,AccessorNode:w,ArrayNode:x,ConstantNode:S,FunctionNode:C,IndexNode:E,ObjectNode:A,OperatorNode:k,SymbolNode:T,ParenthesisNode:I}=t;function $(F){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,M=B(),j=O(F,R,!0,M.firstRules),q=j.variables.length,H={exactFractions:!1},G={exactFractions:!0};if(F=j.expression,q>=1){F=z(F);var ne,ue,te=!0,se=!1;F=h(F,M.firstRules,{},H);for(var J;ue=te?M.distrDivRules:M.sucDivRules,F=h(F,ue,{},G),te=!te,J=F.toString(),J!==ne;)se=!0,ne=J;se&&(F=h(F,M.firstRulesAgain,{},H)),F=h(F,M.finalRules,{},H)}var K=[],ae={};return F.type==="OperatorNode"&&F.isBinary()&&F.op==="/"?(q===1&&(F.args[0]=L(F.args[0],K),F.args[1]=L(F.args[1])),W&&(ae.numerator=F.args[0],ae.denominator=F.args[1])):(q===1&&(F=L(F,K)),W&&(ae.numerator=F,ae.denominator=null)),W?(ae.coefficients=K,ae.variables=j.variables,ae.expression=F,ae):F}return n(ZM,{Node:$,"Node, boolean":(F,R)=>$(F,{},R),"Node, Object":$,"Node, Object, boolean":$});function O(F,R,W,M){var j=[],q=h(F,M,R,{exactFractions:!1});W=!!W;var H="+-*"+(W?"/":"");ne(q);var G={};return G.expression=q,G.variables=j,G;function ne(ue){var te=ue.type;if(te==="FunctionNode")throw new Error("There is an unsolved function call");if(te==="OperatorNode")if(ue.op==="^"){if(ue.args[1].type!=="ConstantNode"||!bt(parseFloat(ue.args[1].value)))throw new Error("There is a non-integer exponent");ne(ue.args[0])}else{if(!H.includes(ue.op))throw new Error("Operator "+ue.op+" invalid in polynomial expression");for(var se=0;se<ue.args.length;se++)ne(ue.args[se])}else if(te==="SymbolNode"){var J=ue.name,K=j.indexOf(J);K===-1&&j.push(J)}else if(te==="ParenthesisNode")ne(ue.content);else if(te!=="ConstantNode")throw new Error("type "+te+" is not allowed in polynomial expression")}}function B(){var F=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],R=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],W=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],M=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],j={};return j.firstRules=F.concat(R,M),j.distrDivRules=W,j.sucDivRules=M,j.firstRulesAgain=F.concat(R),j.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],j}function z(F,R,W){var M=F.type,j=arguments.length>1;if(M==="OperatorNode"&&F.isBinary()){var q=!1,H;if(F.op==="^"&&(F.args[0].type==="ParenthesisNode"||F.args[0].type==="OperatorNode")&&F.args[1].type==="ConstantNode"&&(H=parseFloat(F.args[1].value),q=H>=2&&bt(H)),q){if(H>2){var G=F.args[0],ne=new k("^","pow",[F.args[0].cloneDeep(),new S(H-1)]);F=new k("*","multiply",[G,ne])}else F=new k("*","multiply",[F.args[0],F.args[0].cloneDeep()]);j&&(W==="content"?R.content=F:R.args[W]=F)}}if(M==="ParenthesisNode")z(F.content,F,"content");else if(M!=="ConstantNode"&&M!=="SymbolNode")for(var ue=0;ue<F.args.length;ue++)z(F.args[ue],F,ue);if(!j)return F}function L(F,R){R===void 0&&(R=[]),R[0]=0;var W={};W.cte=1,W.oper="+",W.fire="";var M=0,j="";J(F,null,W),M=R.length-1;for(var q=!0,H,G=M;G>=0;G--)if(R[G]!==0){var ne=new S(q?R[G]:Math.abs(R[G])),ue=R[G]<0?"-":"+";if(G>0){var te=new T(j);if(G>1){var se=new S(G);te=new k("^","pow",[te,se])}R[G]===-1&&q?ne=new k("-","unaryMinus",[te]):Math.abs(R[G])===1?ne=te:ne=new k("*","multiply",[ne,te])}q?H=ne:ue==="+"?H=new k("+","add",[H,ne]):H=new k("-","subtract",[H,ne]),q=!1}if(q)return new S(0);return H;function J(K,ae,pe){var he=K.type;if(he==="FunctionNode")throw new Error("There is an unsolved function call");if(he==="OperatorNode"){if(!"+-*^".includes(K.op))throw new Error("Operator "+K.op+" invalid");if(ae!==null){if((K.fn==="unaryMinus"||K.fn==="pow")&&ae.fn!=="add"&&ae.fn!=="subtract"&&ae.fn!=="multiply")throw new Error("Invalid "+K.op+" placing");if((K.fn==="subtract"||K.fn==="add"||K.fn==="multiply")&&ae.fn!=="add"&&ae.fn!=="subtract")throw new Error("Invalid "+K.op+" placing");if((K.fn==="subtract"||K.fn==="add"||K.fn==="unaryMinus")&&pe.noFil!==0)throw new Error("Invalid "+K.op+" placing")}(K.op==="^"||K.op==="*")&&(pe.fire=K.op);for(var Se=0;Se<K.args.length;Se++)K.fn==="unaryMinus"&&(pe.oper="-"),(K.op==="+"||K.fn==="subtract")&&(pe.fire="",pe.cte=1,pe.oper=Se===0?"+":K.op),pe.noFil=Se,J(K.args[Se],K,pe)}else if(he==="SymbolNode"){if(K.name!==j&&j!=="")throw new Error("There is more than one variable");if(j=K.name,ae===null){R[1]=1;return}if(ae.op==="^"&&pe.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ae.op==="*"&&pe.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(pe.fire===""||pe.fire==="*")&&(M<1&&(R[1]=0),R[1]+=pe.cte*(pe.oper==="+"?1:-1),M=Math.max(1,M))}else if(he==="ConstantNode"){var Ee=parseFloat(K.value);if(ae===null){R[0]=Ee;return}if(ae.op==="^"){if(pe.noFil!==1)throw new Error("Constant cannot be powered");if(!bt(Ee)||Ee<=0)throw new Error("Non-integer exponent is not allowed");for(var Z=M+1;Z<Ee;Z++)R[Z]=0;Ee>M&&(R[Ee]=0),R[Ee]+=pe.cte*(pe.oper==="+"?1:-1),M=Math.max(Ee,M);return}pe.cte=Ee,pe.fire===""&&(R[0]+=pe.cte*(pe.oper==="+"?1:-1))}else throw new Error("Type "+he+" is not allowed")}}}),QM="zpk2tf",l6e=["typed","add","multiply","Complex","number"],c6e=ee(QM,l6e,t=>{var{typed:e,add:n,multiply:r,Complex:a,number:i}=t;return e(QM,{"Array,Array,number":function(l,c,f){return s(l,c,f)},"Array,Array":function(l,c){return s(l,c,1)},"Matrix,Matrix,number":function(l,c,f){return s(l.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(l,c){return s(l.valueOf(),c.valueOf(),1)}});function s(u,l,c){u.some(w=>w.type==="BigNumber")&&(u=u.map(w=>i(w))),l.some(w=>w.type==="BigNumber")&&(l=l.map(w=>i(w)));for(var f=[a(1,0)],d=[a(1,0)],h=0;h<u.length;h++){var m=u[h];typeof m=="number"&&(m=a(m,0)),f=o(f,[a(1,0),a(-m.re,-m.im)])}for(var v=0;v<l.length;v++){var y=l[v];typeof y=="number"&&(y=a(y,0)),d=o(d,[a(1,0),a(-y.re,-y.im)])}for(var b=0;b<f.length;b++)f[b]=r(f[b],c);return[f,d]}function o(u,l){for(var c=[],f=0;f<u.length+l.length-1;f++){c[f]=a(0,0);for(var d=0;d<u.length;d++)f-d>=0&&f-d<l.length&&(c[f]=n(c[f],r(u[d],l[f-d])))}return c}}),JM="freqz",f6e=["typed","add","multiply","Complex","divide","matrix"],d6e=ee(JM,f6e,t=>{var{typed:e,add:n,multiply:r,Complex:a,divide:i,matrix:s}=t;return e(JM,{"Array, Array":function(c,f){var d=u(512);return o(c,f,d)},"Array, Array, Array":function(c,f,d){return o(c,f,d)},"Array, Array, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=u(d);return o(c,f,h)},"Matrix, Matrix":function(c,f){var d=u(512),{w:h,h:m}=o(c.valueOf(),f.valueOf(),d);return{w:s(h),h:s(m)}},"Matrix, Matrix, Matrix":function(c,f,d){var{h}=o(c.valueOf(),f.valueOf(),d.valueOf());return{h:s(h),w:s(d)}},"Matrix, Matrix, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=u(d),{h:m}=o(c.valueOf(),f.valueOf(),h);return{h:s(m),w:s(h)}}});function o(l,c,f){for(var d=[],h=[],m=0;m<f.length;m++){for(var v=a(0,0),y=a(0,0),b=0;b<l.length;b++)v=n(v,r(l[b],a(Math.cos(-b*f[m]),Math.sin(-b*f[m]))));for(var w=0;w<c.length;w++)y=n(y,r(c[w],a(Math.cos(-w*f[m]),Math.sin(-w*f[m]))));d.push(v),h.push(y)}for(var x=[],S=0;S<d.length;S++)x.push(i(d[S],h[S]));return{h:x,w:f}}function u(l){for(var c=[],f=0;f<l;f++)c.push(f/l*Math.PI);return c}}),p6e="reviver",h6e=["classes"],m6e=ee(p6e,h6e,t=>{var{classes:e}=t;return function(r,a){var i=e[a&&a.mathjs];return i&&typeof i.fromJSON=="function"?i.fromJSON(a):a}}),g6e="replacer",v6e=[],y6e=ee(g6e,v6e,()=>function(e,n){return typeof n=="number"&&(!isFinite(n)||isNaN(n))?{mathjs:"number",value:String(n)}:typeof n=="bigint"?{mathjs:"bigint",value:String(n)}:n}),b6e="14.0.0",x6e=ee("true",[],()=>!0),w6e=ee("false",[],()=>!1),N6e=ee("null",[],()=>null),S6e=$i("Infinity",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1/0):1/0}),C6e=$i("NaN",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(NaN):NaN}),E6e=$i("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?VT(n):n$e}),D6e=$i("tau",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?C3e(n):r$e}),T6e=$i("e",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?N3e(n):a$e}),$6e=$i("phi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?S3e(n):i$e}),A6e=$i("LN2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(2).ln():Math.LN2}),I6e=$i("LN10",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(10).ln():Math.LN10}),k6e=$i("LOG2E",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1).div(new n(2).ln()):Math.LOG2E}),_6e=$i("LOG10E",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1).div(new n(10).ln()):Math.LOG10E}),O6e=$i("SQRT1_2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n("0.5").sqrt():Math.SQRT1_2}),F6e=$i("SQRT2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(2).sqrt():Math.SQRT2}),R6e=$i("i",["Complex"],t=>{var{Complex:e}=t;return e.I}),M6e=ee("version",[],()=>b6e);function $i(t,e,n){return ee(t,e,n,{recreateOnConfigChange:!0})}var P6e=Ut("speedOfLight","299792458","m s^-1"),B6e=Ut("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),L6e=Ut("planckConstant","6.62607015e-34","J s"),z6e=Ut("reducedPlanckConstant","1.0545718176461565e-34","J s"),U6e=Ut("magneticConstant","1.25663706212e-6","N A^-2"),V6e=Ut("electricConstant","8.8541878128e-12","F m^-1"),W6e=Ut("vacuumImpedance","376.730313667","ohm"),q6e=Ut("coulomb","8.987551792261171e9","N m^2 C^-2"),G6e=Ut("elementaryCharge","1.602176634e-19","C"),H6e=Ut("bohrMagneton","9.2740100783e-24","J T^-1"),j6e=Ut("conductanceQuantum","7.748091729863649e-5","S"),X6e=Ut("inverseConductanceQuantum","12906.403729652257","ohm"),K6e=Ut("magneticFluxQuantum","2.0678338484619295e-15","Wb"),Y6e=Ut("nuclearMagneton","5.0507837461e-27","J T^-1"),Z6e=Ut("klitzing","25812.807459304513","ohm"),Q6e=Ut("bohrRadius","5.29177210903e-11","m"),J6e=Ut("classicalElectronRadius","2.8179403262e-15","m"),e8e=Ut("electronMass","9.1093837015e-31","kg"),t8e=Ut("fermiCoupling","1.1663787e-5","GeV^-2"),n8e=Yb("fineStructure",.0072973525693),r8e=Ut("hartreeEnergy","4.3597447222071e-18","J"),a8e=Ut("protonMass","1.67262192369e-27","kg"),i8e=Ut("deuteronMass","3.3435830926e-27","kg"),s8e=Ut("neutronMass","1.6749271613e-27","kg"),o8e=Ut("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),u8e=Ut("rydberg","10973731.568160","m^-1"),l8e=Ut("thomsonCrossSection","6.6524587321e-29","m^2"),c8e=Yb("weakMixingAngle",.2229),f8e=Yb("efimovFactor",22.7),d8e=Ut("atomicMass","1.66053906660e-27","kg"),p8e=Ut("avogadro","6.02214076e23","mol^-1"),h8e=Ut("boltzmann","1.380649e-23","J K^-1"),m8e=Ut("faraday","96485.33212331001","C mol^-1"),g8e=Ut("firstRadiation","3.7417718521927573e-16","W m^2"),v8e=Ut("loschmidt","2.686780111798444e25","m^-3"),y8e=Ut("gasConstant","8.31446261815324","J K^-1 mol^-1"),b8e=Ut("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),x8e=Ut("molarVolume","0.022413969545014137","m^3 mol^-1"),w8e=Yb("sackurTetrode",-1.16487052358),N8e=Ut("secondRadiation","0.014387768775039337","m K"),S8e=Ut("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),C8e=Ut("wienDisplacement","2.897771955e-3","m K"),E8e=Ut("molarMass","0.99999999965e-3","kg mol^-1"),D8e=Ut("molarMassC12","11.9999999958e-3","kg mol^-1"),T8e=Ut("gravity","9.80665","m s^-2"),$8e=Ut("planckLength","1.616255e-35","m"),A8e=Ut("planckMass","2.176435e-8","kg"),I8e=Ut("planckTime","5.391245e-44","s"),k8e=Ut("planckCharge","1.87554603778e-18","C"),_8e=Ut("planckTemperature","1.416785e+32","K");function Ut(t,e,n){var r=["config","Unit","BigNumber"];return ee(t,r,a=>{var{config:i,Unit:s,BigNumber:o}=a,u=i.number==="BigNumber"?new o(e):parseFloat(e),l=new s(u,n);return l.fixPrefix=!0,l})}function Yb(t,e){var n=["config","BigNumber"];return ee(t,n,r=>{var{config:a,BigNumber:i}=r;return a.number==="BigNumber"?new i(e):e})}var O8e="apply",F8e=["typed","isInteger"],R8e=ee(O8e,F8e,t=>{var{typed:e,isInteger:n}=t,r=MT({typed:e,isInteger:n});return e("apply",{"...any":function(i){var s=i[1];Vt(s)?i[1]=s-1:qt(s)&&(i[1]=s.minus(1));try{return r.apply(null,i)}catch(o){throw qa(o)}}})},{isTransformFunction:!0}),M8e="column",P8e=["typed","Index","matrix","range"],B8e=ee(M8e,P8e,t=>{var{typed:e,Index:n,matrix:r,range:a}=t,i=UV({typed:e,Index:n,matrix:r,range:a});return e("column",{"...any":function(o){var u=o.length-1,l=o[u];Vt(l)&&(o[u]=l-1);try{return i.apply(null,o)}catch(c){throw qa(c)}}})},{isTransformFunction:!0});function GT(t,e,n){var r=t.filter(function(u){return jr(u)&&!(u.name in e)&&!n.has(u.name)})[0];if(!r)throw new Error('No undefined variable found in inline expression "'+t+'"');var a=r.name,i=new Map,s=new cU(n,i,new Set([a])),o=t.compile();return function(l){return i.set(a,l),o.evaluate(s)}}var L8e="transformCallback",z8e=["typed"],HT=ee(L8e,z8e,t=>{var{typed:e}=t;return function(r,a){return e.isTypedFunction(r)?n(r,a):e4(r,r.length,a)};function n(r,a){var i=Object.fromEntries(Object.entries(r.signatures).map(s=>{var[o,u]=s,l=o.split(",").length;return e.isTypedFunction(u)?[o,n(u,a)]:[o,e4(u,l,a)]}));return typeof r.name=="string"?e(r.name,i):e(i)}});function e4(t,e,n){return e===n?t:e===n+1?function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var s=a.slice(0,n),o=t4(a[n]);return t(...s,o)}:e>n+1?function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var s=a.slice(0,n),o=t4(a[n]),u=a.slice(n+1);return t(...s,o,...u)}:t}function t4(t){return t.map(e=>e+1)}var U8e="filter",V8e=["typed"],W8e=ee(U8e,V8e,t=>{var{typed:e}=t;function n(a,i,s){var o=VV({typed:e}),u=HT({typed:e});if(a.length===0)return o();var l=a[0];if(a.length===1)return o(l);var c=a.length-1,f=a[c];return l&&(l=r(l,s)),f&&(jr(f)||eg(f)?f=r(f,s):f=GT(f,i,s)),o(l,u(f,c))}n.rawArgs=!0;function r(a,i){return a.compile().evaluate(i)}return n},{isTransformFunction:!0}),q8e="forEach",G8e=["typed"],H8e=ee(q8e,G8e,t=>{var{typed:e}=t,n=WV({typed:e}),r=HT({typed:e});function a(s,o,u){if(s.length===0)return n();var l=s[0];if(s.length===1)return n(l);var c=s.length-1,f=s[c];return l&&(l=i(l,u)),f&&(jr(f)||eg(f)?f=i(f,u):f=GT(f,o,u)),n(l,r(f,c))}a.rawArgs=!0;function i(s,o){return s.compile().evaluate(o)}return a},{isTransformFunction:!0}),j8e="index",X8e=["Index","getMatrixDataType"],K8e=ee(j8e,X8e,t=>{var{Index:e,getMatrixDataType:n}=t;return function(){for(var a=[],i=0,s=arguments.length;i<s;i++){var o=arguments[i];if(DT(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(l){return l-1});else if(En(o)||Tt(o))n(o)!=="boolean"&&(o=o.map(function(l){return l-1}));else if(Vt(o))o--;else if(qt(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");a[i]=o}var u=new e;return e.apply(u,a),u}},{isTransformFunction:!0}),Y8e="map",Z8e=["typed"],Q8e=ee(Y8e,Z8e,t=>{var{typed:e}=t,n=qV({typed:e}),r=HT({typed:e});function a(i,s,o){if(i.length===0)return n();if(i.length===1)return n(i[0]);var u=i.length-1,l=i.slice(0,u),c=i[u];return l=l.map(d=>f(d,o)),c&&(jr(c)||eg(c)?c=f(c,o):c=GT(c,s,o)),n(...l,r(c,u));function f(d,h){return d.compile().evaluate(h)}}return a.rawArgs=!0,a},{isTransformFunction:!0});function J8e(t){return Vt(t)?t-1:qt(t)?t.minus(1):t}function eUe(t){return Vt(t)||qt(t)}function dl(t){if(t.length===2&&as(t[0])){t=t.slice();var e=t[1];eUe(e)&&(t[1]=J8e(e))}return t}var tUe="max",nUe=["typed","config","numeric","larger"],rUe=ee(tUe,nUe,t=>{var{typed:e,config:n,numeric:r,larger:a}=t,i=eW({typed:e,config:n,numeric:r,larger:a});return e("max",{"...any":function(o){o=dl(o);try{return i.apply(null,o)}catch(u){throw qa(u)}}})},{isTransformFunction:!0}),aUe="mean",iUe=["typed","add","divide"],sUe=ee(aUe,iUe,t=>{var{typed:e,add:n,divide:r}=t,a=lW({typed:e,add:n,divide:r});return e("mean",{"...any":function(s){s=dl(s);try{return a.apply(null,s)}catch(o){throw qa(o)}}})},{isTransformFunction:!0}),oUe="min",uUe=["typed","config","numeric","smaller"],lUe=ee(oUe,uUe,t=>{var{typed:e,config:n,numeric:r,smaller:a}=t,i=tW({typed:e,config:n,numeric:r,smaller:a});return e("min",{"...any":function(o){o=dl(o);try{return i.apply(null,o)}catch(u){throw qa(u)}}})},{isTransformFunction:!0}),cUe="range",fUe=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],dUe=ee(cUe,fUe,t=>{var{typed:e,config:n,matrix:r,bignumber:a,smaller:i,smallerEq:s,larger:o,largerEq:u,add:l,isPositive:c}=t,f=XV({typed:e,config:n,matrix:r,bignumber:a,smaller:i,smallerEq:s,larger:o,largerEq:u,add:l,isPositive:c});return e("range",{"...any":function(h){var m=h.length-1,v=h[m];return typeof v!="boolean"&&h.push(!0),f.apply(null,h)}})},{isTransformFunction:!0}),pUe="row",hUe=["typed","Index","matrix","range"],mUe=ee(pUe,hUe,t=>{var{typed:e,Index:n,matrix:r,range:a}=t,i=KV({typed:e,Index:n,matrix:r,range:a});return e("row",{"...any":function(o){var u=o.length-1,l=o[u];Vt(l)&&(o[u]=l-1);try{return i.apply(null,o)}catch(c){throw qa(c)}}})},{isTransformFunction:!0}),gUe="subset",vUe=["typed","matrix","zeros","add"],yUe=ee(gUe,vUe,t=>{var{typed:e,matrix:n,zeros:r,add:a}=t,i=YV({typed:e,matrix:n,zeros:r,add:a});return e("subset",{"...any":function(o){try{return i.apply(null,o)}catch(u){throw qa(u)}}})},{isTransformFunction:!0}),bUe="concat",xUe=["typed","matrix","isInteger"],wUe=ee(bUe,xUe,t=>{var{typed:e,matrix:n,isInteger:r}=t,a=zV({typed:e,matrix:n,isInteger:r});return e("concat",{"...any":function(s){var o=s.length-1,u=s[o];Vt(u)?s[o]=u-1:qt(u)&&(s[o]=u.minus(1));try{return a.apply(null,s)}catch(l){throw qa(l)}}})},{isTransformFunction:!0}),n4="diff",NUe=["typed","matrix","subtract","number","bignumber"],SUe=ee(n4,NUe,t=>{var{typed:e,matrix:n,subtract:r,number:a,bignumber:i}=t,s=GV({typed:e,matrix:n,subtract:r,number:a,bignumber:i});return e(n4,{"...any":function(u){u=dl(u);try{return s.apply(null,u)}catch(l){throw qa(l)}}})},{isTransformFunction:!0}),CUe="std",EUe=["typed","map","sqrt","variance"],DUe=ee(CUe,EUe,t=>{var{typed:e,map:n,sqrt:r,variance:a}=t,i=dW({typed:e,map:n,sqrt:r,variance:a});return e("std",{"...any":function(o){o=dl(o);try{return i.apply(null,o)}catch(u){throw qa(u)}}})},{isTransformFunction:!0}),r4="sum",TUe=["typed","config","add","numeric"],$Ue=ee(r4,TUe,t=>{var{typed:e,config:n,add:r,numeric:a}=t,i=oW({typed:e,config:n,add:r,numeric:a});return e(r4,{"...any":function(o){o=dl(o);try{return i.apply(null,o)}catch(u){throw qa(u)}}})},{isTransformFunction:!0}),AUe="quantileSeq",IUe=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],kUe=ee(AUe,IUe,t=>{var{typed:e,bignumber:n,add:r,subtract:a,divide:i,multiply:s,partitionSelect:o,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d}=t,h=fW({typed:e,bignumber:n,add:r,subtract:a,divide:i,multiply:s,partitionSelect:o,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d});return e("quantileSeq",{"Array | Matrix, number | BigNumber":h,"Array | Matrix, number | BigNumber, number":(v,y,b)=>h(v,y,m(b)),"Array | Matrix, number | BigNumber, boolean":h,"Array | Matrix, number | BigNumber, boolean, number":(v,y,b,w)=>h(v,y,b,m(w)),"Array | Matrix, Array | Matrix":h,"Array | Matrix, Array | Matrix, number":(v,y,b)=>h(v,y,m(b)),"Array | Matrix, Array | Matrix, boolean":h,"Array | Matrix, Array | Matrix, boolean, number":(v,y,b,w)=>h(v,y,b,m(w))});function m(v){return dl([[],v])[1]}},{isTransformFunction:!0}),a4="cumsum",_Ue=["typed","add","unaryPlus"],OUe=ee(a4,_Ue,t=>{var{typed:e,add:n,unaryPlus:r}=t,a=uW({typed:e,add:n,unaryPlus:r});return e(a4,{"...any":function(s){if(s.length===2&&as(s[0])){var o=s[1];Vt(o)?s[1]=o-1:qt(o)&&(s[1]=o.minus(1))}try{return a.apply(null,s)}catch(u){throw qa(u)}}})},{isTransformFunction:!0}),i4="variance",FUe=["typed","add","subtract","multiply","divide","apply","isNaN"],RUe=ee(i4,FUe,t=>{var{typed:e,add:n,subtract:r,multiply:a,divide:i,apply:s,isNaN:o}=t,u=cW({typed:e,add:n,subtract:r,multiply:a,divide:i,apply:s,isNaN:o});return e(i4,{"...any":function(c){c=dl(c);try{return u.apply(null,c)}catch(f){throw qa(f)}}})},{isTransformFunction:!0}),s4="print",MUe=["typed","matrix","zeros","add"],PUe=ee(s4,MUe,t=>{var{typed:e,matrix:n,zeros:r,add:a}=t,i=QV({typed:e,matrix:n,zeros:r,add:a});return e(s4,{"string, Object | Array":function(u,l){return i(s(u),l)},"string, Object | Array, number | Object":function(u,l,c){return i(s(u),l,c)}});function s(o){return o.replace(ZV,u=>{var l=u.slice(1).split("."),c=l.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0}),BUe="and",LUe=["typed","matrix","zeros","add","equalScalar","not","concat"],zUe=ee(BUe,LUe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,not:i,concat:s}=t,o=JV({typed:e,matrix:n,equalScalar:r,zeros:a,not:i,concat:s});function u(l,c,f){var d=l[0].compile().evaluate(f);if(!as(d)&&!o(d,!0))return!1;var h=l[1].compile().evaluate(f);return o(d,h)}return u.rawArgs=!0,u},{isTransformFunction:!0}),UUe="or",VUe=["typed","matrix","equalScalar","DenseMatrix","concat"],WUe=ee(UUe,VUe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:i}=t,s=LV({typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:i});function o(u,l,c){var f=u[0].compile().evaluate(c);if(!as(f)&&s(f,!1))return!0;var d=u[1].compile().evaluate(c);return s(f,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),qUe="bitAnd",GUe=["typed","matrix","zeros","add","equalScalar","not","concat"],HUe=ee(qUe,GUe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,not:i,concat:s}=t,o=PV({typed:e,matrix:n,equalScalar:r,zeros:a,not:i,concat:s});function u(l,c,f){var d=l[0].compile().evaluate(f);if(!as(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var h=l[1].compile().evaluate(f);return o(d,h)}return u.rawArgs=!0,u},{isTransformFunction:!0}),jUe="bitOr",XUe=["typed","matrix","equalScalar","DenseMatrix","concat"],KUe=ee(jUe,XUe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:i}=t,s=BV({typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:i});function o(u,l,c){var f=u[0].compile().evaluate(c);if(!as(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var d=u[1].compile().evaluate(c);return s(f,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),nt=gTe({config:Ue}),kn=wTe({}),o4=T6e({BigNumber:nt,config:Ue}),YUe=w6e({}),ZUe=n8e({BigNumber:nt,config:Ue}),Ic=$Te({}),pW=R6e({Complex:kn}),QUe=S6e({BigNumber:nt,config:Ue}),JUe=I6e({BigNumber:nt,config:Ue}),eVe=_6e({BigNumber:nt,config:Ue}),Zb=FTe({}),tVe=C6e({BigNumber:nt,config:Ue}),nVe=N6e({}),rVe=$6e({BigNumber:nt,config:Ue}),aVe=kTe({}),hW=xDe({}),iVe=O6e({BigNumber:nt,config:Ue}),sVe=w8e({BigNumber:nt,config:Ue}),mW=D6e({BigNumber:nt,config:Ue}),oVe=x6e({}),uVe=M6e({}),Gt=KTe({Matrix:Zb}),lVe=f8e({BigNumber:nt,config:Ue}),cVe=A6e({BigNumber:nt,config:Ue}),QS=E6e({BigNumber:nt,config:Ue}),gW=y6e({}),fVe=F6e({BigNumber:nt,config:Ue}),oe=gDe({BigNumber:nt,Complex:kn,DenseMatrix:Gt,Fraction:Ic}),dVe=c8e({BigNumber:nt,config:Ue}),Ga=fAe({typed:oe}),pVe=R3e({Complex:kn,config:Ue,typed:oe}),hVe=L3e({BigNumber:nt,typed:oe}),mVe=W3e({BigNumber:nt,Complex:kn,config:Ue,typed:oe}),Br=mAe({typed:oe}),gVe=eke({typed:oe}),vVe=K3e({BigNumber:nt,Complex:kn,config:Ue,typed:oe}),yVe=eFe({typed:oe}),vW=rFe({typed:oe}),bVe=oFe({Complex:kn,config:Ue,typed:oe}),xVe=M$e({typed:oe}),wVe=jIe({typed:oe}),NVe=z$e({typed:oe}),SVe=ZTe({typed:oe}),Qb=d5e({typed:oe}),Jb=H$e({Complex:kn,typed:oe}),kc=nke({typed:oe}),jT=lFe({typed:oe}),CVe=pFe({BigNumber:nt,typed:oe}),EVe=vFe({BigNumber:nt,typed:oe}),DVe=IAe({typed:oe}),Zt=E$e({config:Ue,typed:oe}),TVe=x_e({typed:oe}),yW=_Ae({typed:oe}),$Ve=FAe({Complex:kn,typed:oe}),AVe=VV({typed:oe}),ag=Ske({typed:oe}),IVe=WV({typed:oe}),ig=k_e({typed:oe}),XT=Tke({typed:oe}),kVe=P_e({format:ig,typed:oe}),KT=ake({typed:oe}),si=JTe({typed:oe}),pl=c$e({config:Ue,typed:oe}),_c=g$e({config:Ue,typed:oe}),ho=y$e({equalScalar:Zt,typed:oe}),_Ve=k6e({BigNumber:nt,config:Ue}),OVe=y5e({Complex:kn,typed:oe}),FVe=pIe({Complex:kn,config:Ue,typed:oe}),bW=mIe({Complex:kn,config:Ue,typed:oe}),Oc=qV({typed:oe}),fr=yIe({typed:oe}),L0=uke({typed:oe}),Qo=O$e({typed:oe}),RVe=R_e({format:ig,typed:oe}),MVe=A5e({config:Ue,typed:oe}),PVe=QV({typed:oe}),BVe=k5e({config:Ue,typed:oe}),YT=ske({typed:oe}),LVe=wFe({BigNumber:nt,typed:oe}),xW=CIe({BigNumber:nt,Fraction:Ic,complex:Jb,typed:oe}),ex=EFe({typed:oe}),Lr=$$e({Matrix:Zb,equalScalar:Zt,typed:oe}),zVe=iAe({typed:oe}),UVe=AIe({typed:oe}),VVe=B$e({typed:oe}),us=vAe({typed:oe}),WVe=AFe({typed:oe}),ZT=N$e({typed:oe}),qVe=P3e({Complex:kn,config:Ue,typed:oe}),GVe=G3e({BigNumber:nt,typed:oe}),QT=MT({isInteger:si,typed:oe}),HVe=j3e({BigNumber:nt,Complex:kn,config:Ue,typed:oe}),Ji=W$e({BigNumber:nt,typed:oe}),jVe=h5e({typed:oe}),XVe=fFe({typed:oe}),KVe=bFe({BigNumber:nt,typed:oe}),sg=x$e({typed:oe}),YVe=V_e({typed:oe}),ZVe=O5e({config:Ue,typed:oe}),QVe=SFe({BigNumber:nt,typed:oe}),JVe=TFe({typed:oe}),eWe=k3e({SparseMatrix:Lr,typed:oe}),Ps=TIe({Complex:kn,config:Ue,typed:oe}),tWe=Zke({typed:oe}),nWe=_Fe({typed:oe}),mo=oAe({typed:oe}),rWe=U3e({BigNumber:nt,Complex:kn,config:Ue,typed:oe}),aWe=O_e({format:ig,typed:oe}),iWe=mFe({BigNumber:nt,typed:oe}),og=K$e({Fraction:Ic,typed:oe}),Fc=d$e({typed:oe}),tt=Z$e({DenseMatrix:Gt,Matrix:Zb,SparseMatrix:Lr,typed:oe}),sWe=J$e({isZero:ho,matrix:tt,typed:oe}),oWe=T_e({isNaN:sg,isNumeric:Fc,typed:oe}),es=G_e({bignumber:Ji,fraction:og,number:Qo}),wW=A_e({config:Ue,multiplyScalar:fr,numeric:es,typed:oe}),NW=Lke({isInteger:si,matrix:tt,typed:oe}),da=Kke({matrix:tt,config:Ue,typed:oe}),ug=r_e({matrix:tt,typed:oe}),SW=OIe({BigNumber:nt,config:Ue,matrix:tt,typed:oe}),aa=o_e({BigNumber:nt,config:Ue,matrix:tt,typed:oe}),uWe=Z3e({Complex:kn,config:Ue,typed:oe}),CW=bAe({BigNumber:nt,Complex:kn,Fraction:Ic,config:Ue,isNegative:pl,matrix:tt,typed:oe,unaryMinus:mo}),fn=zV({isInteger:si,matrix:tt,typed:oe}),lWe=mke({prod:wW,size:da,typed:oe}),JT=i_e({conj:kc,transpose:ug,typed:oe}),EW=bke({DenseMatrix:Gt,SparseMatrix:Lr,matrix:tt,typed:oe}),Qn=j_e({numeric:es,typed:oe}),lg=oOe({DenseMatrix:Gt,SparseMatrix:Lr,concat:fn,divideScalar:Qn,equalScalar:Zt,matrix:tt,typed:oe}),ls=MOe({DenseMatrix:Gt,SparseMatrix:Lr,concat:fn,equalScalar:Zt,matrix:tt,typed:oe}),cWe=h$e({isNumeric:Fc,typed:oe}),hl=Ake({BigNumber:nt,DenseMatrix:Gt,SparseMatrix:Lr,config:Ue,matrix:tt,typed:oe}),fWe=kke({matrix:tt,multiplyScalar:fr,typed:oe}),tx=YOe({DenseMatrix:Gt,SparseMatrix:Lr,concat:fn,config:Ue,matrix:tt,typed:oe}),dWe=bOe({DenseMatrix:Gt,concat:fn,equalScalar:Zt,matrix:tt,typed:oe,zeros:aa}),DW=lOe({DenseMatrix:Gt,divideScalar:Qn,equalScalar:Zt,matrix:tt,multiplyScalar:fr,subtractScalar:us,typed:oe}),e$=rAe({flatten:ag,matrix:tt,size:da,typed:oe}),pWe=NIe({BigNumber:nt,concat:fn,equalScalar:Zt,matrix:tt,typed:oe}),hWe=Mke({BigNumber:nt,config:Ue,matrix:tt,typed:oe}),t$=dMe({addScalar:Br,complex:Jb,conj:kc,divideScalar:Qn,equal:ls,identity:hl,isZero:ho,matrix:tt,multiplyScalar:fr,sign:xW,sqrt:Ps,subtractScalar:us,typed:oe,unaryMinus:mo,zeros:aa}),mWe=Vke({config:Ue,matrix:tt}),gWe=wOe({DenseMatrix:Gt,concat:fn,equalScalar:Zt,matrix:tt,typed:oe,zeros:aa}),Bd=Z_e({BigNumber:nt,DenseMatrix:Gt,config:Ue,equalScalar:Zt,matrix:tt,typed:oe,zeros:aa}),Ba=UOe({DenseMatrix:Gt,SparseMatrix:Lr,concat:fn,config:Ue,matrix:tt,typed:oe}),mr=kIe({DenseMatrix:Gt,concat:fn,equalScalar:Zt,matrix:tt,subtractScalar:us,typed:oe,unaryMinus:mo}),vWe=z_e({concat:fn,matrix:tt,typed:oe}),n$=lAe({config:Ue,numeric:es,typed:oe}),r$=fOe({DenseMatrix:Gt,divideScalar:Qn,equalScalar:Zt,matrix:tt,multiplyScalar:fr,subtractScalar:us,typed:oe}),yWe=fke({DenseMatrix:Gt,SparseMatrix:Lr,concat:fn,matrix:tt,typed:oe}),an=eRe({DenseMatrix:Gt,SparseMatrix:Lr,addScalar:Br,concat:fn,equalScalar:Zt,matrix:tt,typed:oe}),bWe=iFe({BigNumber:nt,DenseMatrix:Gt,concat:fn,equalScalar:Zt,matrix:tt,typed:oe}),xWe=PV({concat:fn,equalScalar:Zt,matrix:tt,typed:oe}),wWe=BV({DenseMatrix:Gt,concat:fn,equalScalar:Zt,matrix:tt,typed:oe}),NWe=QIe({DenseMatrix:Gt,SparseMatrix:Lr,concat:fn,matrix:tt,typed:oe}),SWe=L5e({addScalar:Br,combinations:Qb,divideScalar:Qn,isInteger:si,isNegative:pl,multiplyScalar:fr,typed:oe}),Rc=DOe({BigNumber:nt,DenseMatrix:Gt,Fraction:Ic,concat:fn,config:Ue,equalScalar:Zt,matrix:tt,typed:oe}),TW=FOe({concat:fn,matrix:tt,typed:oe}),CWe=uW({add:an,typed:oe,unaryPlus:n$}),a$=JOe({equal:ls,typed:oe}),EWe=GV({matrix:tt,number:Qo,subtract:mr,typed:oe}),DWe=Kze({abs:Ga,addScalar:Br,deepEqual:a$,divideScalar:Qn,multiplyScalar:fr,sqrt:Ps,subtractScalar:us,typed:oe}),nx=sRe({addScalar:Br,conj:kc,multiplyScalar:fr,size:da,typed:oe}),TWe=LOe({compareText:TW,isZero:ho,typed:oe}),$W=FV({DenseMatrix:Gt,config:Ue,equalScalar:Zt,matrix:tt,round:Bd,typed:oe,zeros:aa}),$We=oIe({BigNumber:nt,DenseMatrix:Gt,concat:fn,config:Ue,equalScalar:Zt,matrix:tt,round:Bd,typed:oe,zeros:aa}),AWe=nRe({abs:Ga,addScalar:Br,divideScalar:Qn,isPositive:_c,multiplyScalar:fr,smaller:Ba,sqrt:Ps,typed:oe}),AW=f3e({DenseMatrix:Gt,smaller:Ba}),Ca=h3e({ImmutableDenseMatrix:AW,getMatrixDataType:XT}),La=jOe({DenseMatrix:Gt,SparseMatrix:Lr,concat:fn,config:Ue,matrix:tt,typed:oe}),i$=J_e({Complex:kn,config:Ue,divideScalar:Qn,typeOf:ZT,typed:oe}),IWe=pOe({DenseMatrix:Gt,divideScalar:Qn,equalScalar:Zt,matrix:tt,multiplyScalar:fr,subtractScalar:us,typed:oe}),kWe=tAe({flatten:ag,matrix:tt,size:da,typed:oe}),_We=tW({config:Ue,numeric:es,smaller:Ba,typed:oe}),IW=RV({DenseMatrix:Gt,concat:fn,config:Ue,equalScalar:Zt,matrix:tt,round:Bd,typed:oe,zeros:aa}),Sn=xIe({addScalar:Br,dot:nx,equalScalar:Zt,matrix:tt,multiplyScalar:fr,typed:oe}),OWe=rOe({Complex:kn,config:Ue,divideScalar:Qn,typed:oe}),FWe=LV({DenseMatrix:Gt,concat:fn,equalScalar:Zt,matrix:tt,typed:oe}),rx=a3e({compare:Rc,isNaN:sg,isNumeric:Fc,typed:oe}),RWe=SOe({DenseMatrix:Gt,concat:fn,equalScalar:Zt,matrix:tt,typed:oe,zeros:aa}),kW=MMe({SparseMatrix:Lr,abs:Ga,add:an,divideScalar:Qn,larger:La,largerEq:tx,multiply:Sn,subtract:mr,transpose:ug,typed:oe}),Ai=YV({add:an,matrix:tt,typed:oe,zeros:aa}),s$=oW({add:an,config:Ue,numeric:es,typed:oe}),MWe=lRe({add:an,matrix:tt,typed:oe}),_W=mOe({DenseMatrix:Gt,divideScalar:Qn,equalScalar:Zt,matrix:tt,multiplyScalar:fr,subtractScalar:us,typed:oe}),PWe=c6e({Complex:kn,add:an,multiply:Sn,number:Qo,typed:oe}),o$=$Ae({DenseMatrix:Gt,config:Ue,equalScalar:Zt,matrix:tt,round:Bd,typed:oe,zeros:aa}),go=kOe({compare:Rc,typed:oe}),BWe=U5e({addScalar:Br,combinations:Qb,isInteger:si,isNegative:pl,isPositive:_c,larger:La,typed:oe}),LWe=vke({matrix:tt,multiply:Sn,subtract:mr,typed:oe}),OW=Eze({divideScalar:Qn,isZero:ho,matrix:tt,multiply:Sn,subtractScalar:us,typed:oe,unaryMinus:mo}),zWe=LIe({concat:fn,equalScalar:Zt,matrix:tt,multiplyScalar:fr,typed:oe}),FW=v3e({larger:La,smaller:Ba}),RW=PAe({Complex:kn,DenseMatrix:Gt,ceil:o$,equalScalar:Zt,floor:$W,matrix:tt,typed:oe,zeros:aa}),MW=fRe({Index:Ca,typed:oe}),UWe=Qze({abs:Ga,add:an,addScalar:Br,config:Ue,divideScalar:Qn,equalScalar:Zt,flatten:ag,isNumeric:Fc,isZero:ho,matrix:tt,multiply:Sn,multiplyScalar:fr,smaller:Ba,subtract:mr,typed:oe}),VWe=RIe({BigNumber:nt,add:an,config:Ue,equal:ls,isInteger:si,mod:IW,smaller:Ba,typed:oe,xgcd:SW}),WWe=fIe({concat:fn,equalScalar:Zt,matrix:tt,typed:oe}),qWe=tOe({Complex:kn,config:Ue,divideScalar:Qn,log:i$,typed:oe}),u$=eW({config:Ue,larger:La,numeric:es,typed:oe}),GWe=FFe({DenseMatrix:Gt,Index:Ca,compareNatural:go,size:da,subset:Ai,typed:oe}),HWe=BFe({DenseMatrix:Gt,Index:Ca,compareNatural:go,size:da,subset:Ai,typed:oe}),jWe=VFe({Index:Ca,compareNatural:go,size:da,subset:Ai,typed:oe}),XWe=HFe({Index:Ca,compareNatural:go,size:da,subset:Ai,typed:oe}),cd=qOe({DenseMatrix:Gt,SparseMatrix:Lr,concat:fn,config:Ue,matrix:tt,typed:oe}),KWe=s3e({compare:Rc,compareNatural:go,matrix:tt,typed:oe}),YWe=t3e({DenseMatrix:Gt,SparseMatrix:Lr,concat:fn,config:Ue,equalScalar:Zt,matrix:tt,typed:oe}),ZWe=JV({concat:fn,equalScalar:Zt,matrix:tt,not:L0,typed:oe,zeros:aa}),fd=XV({bignumber:Ji,matrix:tt,add:an,config:Ue,isPositive:_c,larger:La,largerEq:tx,smaller:Ba,smallerEq:cd,typed:oe}),QWe=KV({Index:Ca,matrix:tt,range:fd,typed:oe}),PW=MFe({DenseMatrix:Gt,Index:Ca,compareNatural:go,size:da,subset:Ai,typed:oe}),JWe=qFe({Index:Ca,compareNatural:go,size:da,subset:Ai,typed:oe}),BW=YFe({Index:Ca,concat:fn,setDifference:PW,size:da,subset:Ai,typed:oe}),LW=x3e({FibonacciHeap:FW,addScalar:Br,equalScalar:Zt}),zW=UV({Index:Ca,matrix:tt,range:fd,typed:oe}),Mc=Tze({abs:Ga,addScalar:Br,det:OW,divideScalar:Qn,identity:hl,matrix:tt,multiply:Sn,typed:oe,unaryMinus:mo}),UW=cMe({DenseMatrix:Gt,Spa:LW,SparseMatrix:Lr,abs:Ga,addScalar:Br,divideScalar:Qn,equalScalar:Zt,larger:La,matrix:tt,multiplyScalar:fr,subtractScalar:us,typed:oe,unaryMinus:mo}),e7e=Aze({Complex:kn,add:an,ctranspose:JT,deepEqual:a$,divideScalar:Qn,dot:nx,dotDivide:lg,equal:ls,inv:Mc,matrix:tt,multiply:Sn,typed:oe}),Bs=K_e({Complex:kn,config:Ue,fraction:og,identity:hl,inv:Mc,matrix:tt,multiply:Sn,number:Qo,typed:oe}),VW=zFe({DenseMatrix:Gt,Index:Ca,compareNatural:go,size:da,subset:Ai,typed:oe}),t7e=QFe({Index:Ca,concat:fn,setIntersect:VW,setSymDifference:BW,size:da,subset:Ai,typed:oe}),n7e=Bze({abs:Ga,add:an,identity:hl,inv:Mc,map:Oc,max:u$,multiply:Sn,size:da,sqrt:Ps,subtract:mr,typed:oe}),Ft=T3e({BigNumber:nt,Complex:kn,Fraction:Ic,abs:Ga,addScalar:Br,config:Ue,divideScalar:Qn,equal:ls,fix:RW,format:ig,isNumeric:Fc,multiplyScalar:fr,number:Qo,pow:Bs,round:Bd,subtractScalar:us}),r7e=W6e({BigNumber:nt,Unit:Ft,config:Ue}),a7e=C8e({BigNumber:nt,Unit:Ft,config:Ue}),i7e=d8e({BigNumber:nt,Unit:Ft,config:Ue}),s7e=H6e({BigNumber:nt,Unit:Ft,config:Ue}),o7e=h8e({BigNumber:nt,Unit:Ft,config:Ue}),u7e=j6e({BigNumber:nt,Unit:Ft,config:Ue}),l7e=q6e({BigNumber:nt,Unit:Ft,config:Ue}),c7e=i8e({BigNumber:nt,Unit:Ft,config:Ue}),f7e=iOe({DenseMatrix:Gt,SparseMatrix:Lr,concat:fn,equalScalar:Zt,matrix:tt,pow:Bs,typed:oe}),d7e=V6e({BigNumber:nt,Unit:Ft,config:Ue}),p7e=G6e({BigNumber:nt,Unit:Ft,config:Ue}),h7e=Mze({abs:Ga,add:an,identity:hl,inv:Mc,multiply:Sn,typed:oe}),m7e=m8e({BigNumber:nt,Unit:Ft,config:Ue}),WW=l_e({addScalar:Br,ceil:o$,conj:kc,divideScalar:Qn,dotDivide:lg,exp:yW,i:pW,log2:bW,matrix:tt,multiplyScalar:fr,pow:Bs,tau:mW,typed:oe}),l$=g5e({BigNumber:nt,Complex:kn,config:Ue,multiplyScalar:fr,pow:Bs,typed:oe}),g7e=B6e({BigNumber:nt,Unit:Ft,config:Ue}),v7e=r8e({BigNumber:nt,Unit:Ft,config:Ue}),y7e=f_e({conj:kc,dotDivide:lg,fft:WW,typed:oe}),b7e=Z6e({BigNumber:nt,Unit:Ft,config:Ue}),x7e=v8e({BigNumber:nt,Unit:Ft,config:Ue}),w7e=U6e({BigNumber:nt,Unit:Ft,config:Ue}),N7e=E8e({BigNumber:nt,Unit:Ft,config:Ue}),S7e=b8e({BigNumber:nt,Unit:Ft,config:Ue}),C7e=s8e({BigNumber:nt,Unit:Ft,config:Ue}),E7e=Y6e({BigNumber:nt,Unit:Ft,config:Ue}),D7e=k8e({BigNumber:nt,Unit:Ft,config:Ue}),T7e=$8e({BigNumber:nt,Unit:Ft,config:Ue}),$7e=_8e({BigNumber:nt,Unit:Ft,config:Ue}),A7e=a8e({BigNumber:nt,Unit:Ft,config:Ue}),I7e=o8e({BigNumber:nt,Unit:Ft,config:Ue}),k7e=z6e({BigNumber:nt,Unit:Ft,config:Ue}),_7e=u8e({BigNumber:nt,Unit:Ft,config:Ue}),O7e=N8e({BigNumber:nt,Unit:Ft,config:Ue}),F7e=P6e({BigNumber:nt,Unit:Ft,config:Ue}),R7e=S8e({BigNumber:nt,Unit:Ft,config:Ue}),M7e=l8e({BigNumber:nt,Unit:Ft,config:Ue}),P7e=p8e({BigNumber:nt,Unit:Ft,config:Ue}),B7e=Q6e({BigNumber:nt,Unit:Ft,config:Ue}),L7e=O3e({Unit:Ft,typed:oe}),sa=jze({divideScalar:Qn,equalScalar:Zt,inv:Mc,matrix:tt,multiply:Sn,typed:oe}),z7e=e8e({BigNumber:nt,Unit:Ft,config:Ue}),cg=x5e({gamma:l$,typed:oe}),U7e=g8e({BigNumber:nt,Unit:Ft,config:Ue}),V7e=T8e({BigNumber:nt,Unit:Ft,config:Ue}),W7e=X6e({BigNumber:nt,Unit:Ft,config:Ue}),qW=BMe({DenseMatrix:Gt,lsolve:DW,lup:UW,matrix:tt,slu:kW,typed:oe,usolve:r$}),q7e=K6e({BigNumber:nt,Unit:Ft,config:Ue}),G7e=D8e({BigNumber:nt,Unit:Ft,config:Ue}),H7e=C5e({add:an,divide:sa,factorial:cg,isInteger:si,isPositive:_c,multiply:Sn,typed:oe}),j7e=D5e({factorial:cg,typed:oe}),X7e=A8e({BigNumber:nt,Unit:Ft,config:Ue}),K7e=zMe({add:an,cbrt:CW,divide:sa,equalScalar:Zt,im:KT,isZero:ho,multiply:Sn,re:YT,sqrt:Ps,subtract:mr,typeOf:ZT,typed:oe,unaryMinus:mo}),Y7e=XFe({compareNatural:go,typed:oe}),Z7e=v_e({abs:Ga,add:an,bignumber:Ji,divide:sa,isNegative:pl,isPositive:_c,larger:La,map:Oc,matrix:tt,max:u$,multiply:Sn,smaller:Ba,subtract:mr,typed:oe,unaryMinus:mo}),GW=R5e({bignumber:Ji,addScalar:Br,combinations:Qb,divideScalar:Qn,factorial:cg,isInteger:si,isNegative:pl,larger:La,multiplyScalar:fr,number:Qo,pow:Bs,subtractScalar:us,typed:oe}),Q7e=A3e({Unit:Ft,typed:oe}),J7e=P5e({addScalar:Br,isInteger:si,isNegative:pl,stirlingS2:GW,typed:oe}),HW=Fze({abs:Ga,add:an,addScalar:Br,atan:vW,bignumber:Ji,column:zW,complex:Jb,config:Ue,cos:jT,diag:EW,divideScalar:Qn,dot:nx,equal:ls,flatten:ag,im:KT,inv:Mc,larger:La,matrix:tt,matrixFromColumns:e$,multiply:Sn,multiplyScalar:fr,number:Qo,qr:t$,re:YT,reshape:NW,sin:ex,size:da,smaller:Ba,sqrt:Ps,subtract:mr,typed:oe,usolve:r$,usolveAll:_W}),e9e=t8e({BigNumber:nt,Unit:Ft,config:Ue}),t9e=y8e({BigNumber:nt,Unit:Ft,config:Ue}),n9e=N5e({divide:sa,dotDivide:lg,isNumeric:Fc,log:i$,map:Oc,matrix:tt,multiply:Sn,sum:s$,typed:oe}),jW=lW({add:an,divide:sa,typed:oe}),r9e=x8e({BigNumber:nt,Unit:Ft,config:Ue}),a9e=L6e({BigNumber:nt,Unit:Ft,config:Ue}),i9e=fW({bignumber:Ji,add:an,compare:Rc,divide:sa,isInteger:si,larger:La,multiply:Sn,partitionSelect:rx,smaller:Ba,smallerEq:cd,subtract:mr,typed:oe}),c$=cW({add:an,apply:QT,divide:sa,isNaN:sg,multiply:Sn,subtract:mr,typed:oe}),s9e=J6e({BigNumber:nt,Unit:Ft,config:Ue}),XW=r5e({add:an,compare:Rc,divide:sa,partitionSelect:rx,typed:oe}),o9e=c5e({add:an,divide:sa,matrix:tt,mean:jW,multiply:Sn,pow:Bs,sqrt:Ps,subtract:mr,sum:s$,typed:oe}),u9e=d6e({Complex:kn,add:an,divide:sa,matrix:tt,multiply:Sn,typed:oe}),l9e=i5e({abs:Ga,map:Oc,median:XW,subtract:mr,typed:oe}),c9e=dW({map:Oc,sqrt:Ps,typed:oe,variance:c$}),f9e=E_e({BigNumber:nt,Complex:kn,add:an,config:Ue,divide:sa,equal:ls,factorial:cg,gamma:l$,isNegative:pl,multiply:Sn,pi:QS,pow:Bs,sin:ex,smallerEq:cd,subtract:mr,typed:oe}),f$=aRe({abs:Ga,add:an,conj:kc,ctranspose:JT,eigs:HW,equalScalar:Zt,larger:La,matrix:tt,multiply:Sn,pow:Bs,smaller:Ba,sqrt:Ps,typed:oe}),KW=Hke({BigNumber:nt,DenseMatrix:Gt,SparseMatrix:Lr,addScalar:Br,config:Ue,cos:jT,matrix:tt,multiplyScalar:fr,norm:f$,sin:ex,typed:oe,unaryMinus:mo}),d9e=I8e({BigNumber:nt,Unit:Ft,config:Ue}),YW=Vze({identity:hl,matrix:tt,multiply:Sn,norm:f$,qr:t$,subtract:mr,typed:oe}),p9e=qke({multiply:Sn,rotationMatrix:KW,typed:oe}),ZW=zze({abs:Ga,add:an,concat:fn,identity:hl,index:MW,lusolve:qW,matrix:tt,matrixFromColumns:e$,multiply:Sn,range:fd,schur:YW,subset:Ai,subtract:mr,transpose:ug,typed:oe}),h9e=qze({matrix:tt,multiply:Sn,sylvester:ZW,transpose:ug,typed:oe}),Ld={},fg={},QW={},Ia=hRe({mathWithTransform:fg}),zd=BRe({Node:Ia}),Jo=zRe({Node:Ia}),Pc=VRe({Node:Ia}),JW=HRe({Node:Ia}),Ud=yRe({Node:Ia}),e7=CRe({Node:Ia,ResultSet:hW}),t7=DRe({Node:Ia}),ml=_Re({Node:Ia}),n7=qRe({Node:Ia}),m9e=m6e({classes:QW}),d$=HMe({math:Ld,typed:oe}),r7=FRe({Node:Ia,typed:oe}),g9e=Sze({Chain:d$,typed:oe}),Vd=MRe({Node:Ia,size:da}),Wd=gRe({Node:Ia,subset:Ai}),a7=NRe({matrix:tt,Node:Ia,subset:Ai}),gl=KRe({Unit:Ft,Node:Ia,math:Ld}),vl=ZRe({Node:Ia,SymbolNode:gl,math:Ld}),Ls=JRe({AccessorNode:Wd,ArrayNode:Ud,AssignmentNode:a7,BlockNode:e7,ConditionalNode:t7,ConstantNode:ml,FunctionAssignmentNode:r7,FunctionNode:vl,IndexNode:Vd,ObjectNode:zd,OperatorNode:Jo,ParenthesisNode:Pc,RangeNode:n7,RelationalNode:JW,SymbolNode:gl,config:Ue,numeric:es,typed:oe}),i7=n6e({ConstantNode:ml,FunctionNode:vl,OperatorNode:Jo,ParenthesisNode:Pc,parse:Ls,typed:oe}),p$=Z5e({bignumber:Ji,fraction:og,AccessorNode:Wd,ArrayNode:Ud,ConstantNode:ml,FunctionNode:vl,IndexNode:Vd,ObjectNode:zd,OperatorNode:Jo,SymbolNode:gl,config:Ue,mathWithTransform:fg,matrix:tt,typed:oe}),v9e=tMe({parse:Ls,typed:oe}),h$=J5e({AccessorNode:Wd,ArrayNode:Ud,ConstantNode:ml,FunctionNode:vl,IndexNode:Vd,ObjectNode:zd,OperatorNode:Jo,ParenthesisNode:Pc,SymbolNode:gl,add:an,divide:sa,equal:ls,isZero:ho,multiply:Sn,parse:Ls,pow:Bs,subtract:mr,typed:oe}),ax=rMe({parse:Ls,typed:oe}),s7=WMe({evaluate:ax}),o7=sMe({evaluate:ax,parse:Ls}),ix=X5e({AccessorNode:Wd,ArrayNode:Ud,ConstantNode:ml,FunctionNode:vl,IndexNode:Vd,ObjectNode:zd,OperatorNode:Jo,ParenthesisNode:Pc,SymbolNode:gl,equal:ls,parse:Ls,replacer:gW,resolve:i7,simplifyConstant:p$,simplifyCore:h$,typed:oe}),y9e=a6e({OperatorNode:Jo,parse:Ls,simplify:ix,typed:oe}),b9e=W5e({parse:Ls,typed:oe}),x9e=uMe({Parser:o7,typed:oe}),w9e=u6e({bignumber:Ji,fraction:og,AccessorNode:Wd,ArrayNode:Ud,ConstantNode:ml,FunctionNode:vl,IndexNode:Vd,ObjectNode:zd,OperatorNode:Jo,ParenthesisNode:Pc,SymbolNode:gl,add:an,config:Ue,divide:sa,equal:ls,isZero:ho,mathWithTransform:fg,matrix:tt,multiply:Sn,parse:Ls,pow:Bs,simplify:ix,simplifyConstant:p$,simplifyCore:h$,subtract:mr,typed:oe}),N9e=s6e({ConstantNode:ml,FunctionNode:vl,OperatorNode:Jo,ParenthesisNode:Pc,SymbolNode:gl,config:Ue,equal:ls,isZero:ho,numeric:es,parse:Ls,simplify:ix,typed:oe}),S9e=wze({Help:s7,mathWithTransform:fg,typed:oe});kr(Ld,{e:o4,false:YUe,fineStructure:ZUe,i:pW,Infinity:QUe,LN10:JUe,LOG10E:eVe,NaN:tVe,null:nVe,phi:rVe,SQRT1_2:iVe,sackurTetrode:sVe,tau:mW,true:oVe,E:o4,version:uVe,efimovFactor:lVe,LN2:cVe,pi:QS,replacer:gW,reviver:m9e,SQRT2:fVe,typed:oe,PI:QS,weakMixingAngle:dVe,abs:Ga,acos:pVe,acot:hVe,acsc:mVe,addScalar:Br,arg:gVe,asech:vVe,asinh:yVe,atan:vW,atanh:bVe,bigint:xVe,bitNot:wVe,boolean:NVe,clone:SVe,combinations:Qb,complex:Jb,conj:kc,cos:jT,cot:CVe,csc:EVe,cube:DVe,equalScalar:Zt,erf:TVe,exp:yW,expm1:$Ve,filter:AVe,flatten:ag,forEach:IVe,format:ig,getMatrixDataType:XT,hex:kVe,im:KT,isInteger:si,isNegative:pl,isPositive:_c,isZero:ho,LOG2E:_Ve,lgamma:OVe,log10:FVe,log2:bW,map:Oc,multiplyScalar:fr,not:L0,number:Qo,oct:RVe,pickRandom:MVe,print:PVe,random:BVe,re:YT,sec:LVe,sign:xW,sin:ex,splitUnit:zVe,square:UVe,string:VVe,subtractScalar:us,tan:WVe,typeOf:ZT,acosh:qVe,acsch:GVe,apply:QT,asec:HVe,bignumber:Ji,chain:g9e,combinationsWithRep:jVe,cosh:XVe,csch:KVe,isNaN:sg,isPrime:YVe,randomInt:ZVe,sech:QVe,sinh:JVe,sparse:eWe,sqrt:Ps,squeeze:tWe,tanh:nWe,unaryMinus:mo,acoth:rWe,bin:aWe,coth:iWe,fraction:og,isNumeric:Fc,matrix:tt,matrixFromFunction:sWe,mode:oWe,numeric:es,prod:wW,reshape:NW,size:da,transpose:ug,xgcd:SW,zeros:aa,asin:uWe,cbrt:CW,concat:fn,count:lWe,ctranspose:JT,diag:EW,divideScalar:Qn,dotDivide:lg,equal:ls,hasNumericValue:cWe,identity:hl,kron:fWe,largerEq:tx,leftShift:dWe,lsolve:DW,matrixFromColumns:e$,nthRoot:pWe,ones:hWe,qr:t$,resize:mWe,rightArithShift:gWe,round:Bd,smaller:Ba,subtract:mr,to:vWe,unaryPlus:n$,usolve:r$,xor:yWe,add:an,atan2:bWe,bitAnd:xWe,bitOr:wWe,bitXor:NWe,catalan:SWe,compare:Rc,compareText:TW,cumsum:CWe,deepEqual:a$,diff:EWe,distance:DWe,dot:nx,equalText:TWe,floor:$W,gcd:$We,hypot:AWe,larger:La,log:i$,lsolveAll:IWe,matrixFromRows:kWe,min:_We,mod:IW,multiply:Sn,nthRoots:OWe,or:FWe,partitionSelect:rx,rightLogShift:RWe,slu:kW,subset:Ai,sum:s$,trace:MWe,usolveAll:_W,zpk2tf:PWe,ceil:o$,compareNatural:go,composition:BWe,cross:LWe,det:OW,dotMultiply:zWe,fix:RW,index:MW,intersect:UWe,invmod:VWe,lcm:WWe,log1p:qWe,max:u$,setCartesian:GWe,setDistinct:HWe,setIsSubset:jWe,setPowerset:XWe,smallerEq:cd,sort:KWe,unequal:YWe,and:ZWe,range:fd,row:QWe,setDifference:PW,setMultiplicity:JWe,setSymDifference:BW,column:zW,inv:Mc,lup:UW,pinv:e7e,pow:Bs,setIntersect:VW,setUnion:t7e,sqrtm:n7e,vacuumImpedance:r7e,wienDisplacement:a7e,atomicMass:i7e,bohrMagneton:s7e,boltzmann:o7e,conductanceQuantum:u7e,coulomb:l7e,deuteronMass:c7e,dotPow:f7e,electricConstant:d7e,elementaryCharge:p7e,expm:h7e,faraday:m7e,fft:WW,gamma:l$,gravitationConstant:g7e,hartreeEnergy:v7e,ifft:y7e,klitzing:b7e,loschmidt:x7e,magneticConstant:w7e,molarMass:N7e,molarPlanckConstant:S7e,neutronMass:C7e,nuclearMagneton:E7e,planckCharge:D7e,planckLength:T7e,planckTemperature:$7e,protonMass:A7e,quantumOfCirculation:I7e,reducedPlanckConstant:k7e,rydberg:_7e,secondRadiation:O7e,speedOfLight:F7e,stefanBoltzmann:R7e,thomsonCrossSection:M7e,avogadro:P7e,bohrRadius:B7e,createUnit:L7e,divide:sa,electronMass:z7e,factorial:cg,firstRadiation:U7e,gravity:V7e,inverseConductanceQuantum:W7e,lusolve:qW,magneticFluxQuantum:q7e,molarMassC12:G7e,multinomial:H7e,parse:Ls,permutations:j7e,planckMass:X7e,polynomialRoot:K7e,resolve:i7,setSize:Y7e,simplifyConstant:p$,solveODE:Z7e,stirlingS2:GW,unit:Q7e,bellNumbers:J7e,compile:v9e,eigs:HW,fermiCoupling:e9e,gasConstant:t9e,kldivergence:n9e,mean:jW,molarVolume:r9e,planckConstant:a9e,quantileSeq:i9e,simplifyCore:h$,variance:c$,classicalElectronRadius:s9e,evaluate:ax,median:XW,simplify:ix,symbolicEqual:y9e,corr:o9e,freqz:u9e,leafCount:b9e,mad:l9e,parser:x9e,rationalize:w9e,std:c9e,zeta:f9e,derivative:N9e,norm:f$,rotationMatrix:KW,help:S9e,planckTime:d9e,schur:YW,rotate:p9e,sylvester:ZW,lyap:h9e,config:Ue});kr(fg,Ld,{filter:W8e({typed:oe}),forEach:H8e({typed:oe}),map:Q8e({typed:oe}),apply:R8e({isInteger:si,typed:oe}),or:WUe({DenseMatrix:Gt,concat:fn,equalScalar:Zt,matrix:tt,typed:oe}),and:zUe({add:an,concat:fn,equalScalar:Zt,matrix:tt,not:L0,typed:oe,zeros:aa}),concat:wUe({isInteger:si,matrix:tt,typed:oe}),max:rUe({config:Ue,larger:La,numeric:es,typed:oe}),print:PUe({add:an,matrix:tt,typed:oe,zeros:aa}),bitAnd:HUe({add:an,concat:fn,equalScalar:Zt,matrix:tt,not:L0,typed:oe,zeros:aa}),diff:SUe({bignumber:Ji,matrix:tt,number:Qo,subtract:mr,typed:oe}),min:lUe({config:Ue,numeric:es,smaller:Ba,typed:oe}),subset:yUe({add:an,matrix:tt,typed:oe,zeros:aa}),bitOr:KUe({DenseMatrix:Gt,concat:fn,equalScalar:Zt,matrix:tt,typed:oe}),cumsum:OUe({add:an,typed:oe,unaryPlus:n$}),index:K8e({Index:Ca,getMatrixDataType:XT}),sum:$Ue({add:an,config:Ue,numeric:es,typed:oe}),range:dUe({bignumber:Ji,matrix:tt,add:an,config:Ue,isPositive:_c,larger:La,largerEq:tx,smaller:Ba,smallerEq:cd,typed:oe}),row:mUe({Index:Ca,matrix:tt,range:fd,typed:oe}),column:B8e({Index:Ca,matrix:tt,range:fd,typed:oe}),mean:sUe({add:an,divide:sa,typed:oe}),quantileSeq:kUe({add:an,bignumber:Ji,compare:Rc,divide:sa,isInteger:si,larger:La,multiply:Sn,partitionSelect:rx,smaller:Ba,smallerEq:cd,subtract:mr,typed:oe}),variance:RUe({add:an,apply:QT,divide:sa,isNaN:sg,multiply:Sn,subtract:mr,typed:oe}),std:DUe({map:Oc,sqrt:Ps,typed:oe,variance:c$})});kr(QW,{BigNumber:nt,Complex:kn,Fraction:Ic,Matrix:Zb,Node:Ia,ObjectNode:zd,OperatorNode:Jo,ParenthesisNode:Pc,Range:aVe,RelationalNode:JW,ResultSet:hW,ArrayNode:Ud,BlockNode:e7,ConditionalNode:t7,ConstantNode:ml,DenseMatrix:Gt,RangeNode:n7,Chain:d$,FunctionAssignmentNode:r7,SparseMatrix:Lr,IndexNode:Vd,ImmutableDenseMatrix:AW,Index:Ca,AccessorNode:Wd,AssignmentNode:a7,FibonacciHeap:FW,Spa:LW,Unit:Ft,SymbolNode:gl,FunctionNode:vl,Help:s7,Parser:o7});d$.createProxy(Ld);const C9e=()=>{const[t,e]=bn.useState([{message:"Hola! Soy tu chatbot. En qu puedo ayudarte?",sentTime:"justo ahora",sender:"Chatbot"}]),[n,r]=bn.useState(null),[a,i]=bn.useState([]);bn.useEffect(()=>{(async()=>{await VY("webgl"),await WY();const d=await lse();r(d);const h=FO.map(v=>v.question),m=await d.embed(h);i(m),console.log("Modelo y embeddings cargados")})()},[]);const s=f=>/^[0-9+\-*/().\s]+$/.test(f.trim()),o=f=>{const d=/cunto es\s*([\d+\-*/().\s]+)/i,h=f.match(d);return h?h[1]:null},u=f=>{try{return`El resultado es: ${ax(f)}`}catch{return"Lo siento, no pude calcular esa expresin. Puedes verificar si es correcta?"}},l=async f=>{var w;if(!n)return"El modelo an no est listo, por favor espera un momento.";const d=f.trim().toLowerCase(),h={hola:"Hola! En qu puedo ayudarte?","cmo ests":"Estoy aqu para ayudarte con tus dudas.","cmo te sientes":"Me siento genial ayudndote con tus consultas.","eres humano":"No, soy una inteligencia artificial, pero estoy aqu para ayudarte."};if(h[d])return h[d];if(s(d))return u(d);const m=o(d);if(m)return u(m);const v=await n.embed([d]),b=Jt(v,a,!1,!0).argMax(1).arraySync()[0];return((w=FO[b])==null?void 0:w.answer)||"Lo siento, no entiendo tu consulta."},c=async f=>{const d={message:f,sentTime:"justo ahora",sender:"Usuario"};e(m=>[...m,d]);const h=await l(f);setTimeout(()=>{e(m=>[...m,{message:h,sentTime:"justo ahora",sender:"Chatbot"}])},1e3)};return wn.jsx("div",{className:"h-screen flex justify-center items-center",children:wn.jsx(TK,{style:{width:"100%",maxWidth:"600px",height:"80vh",maxHeight:"600px",backgroundColor:"#1e1e1e",borderRadius:"12px",overflow:"hidden"},children:wn.jsxs(oK,{children:[wn.jsx(pd,{style:{flex:"1 1 auto",overflowY:"auto",padding:"10px",backgroundColor:"#1e1e1e"},children:t.map((f,d)=>wn.jsx(Yu,{model:{message:f.message,sentTime:f.sentTime,sender:f.sender,direction:f.sender==="Usuario"?"outgoing":"incoming",position:"normal"}},d))}),wn.jsx(q0,{placeholder:"Escribe tu mensaje aqu...",onSend:c,attachButton:!1,autoFocus:!0,style:{borderTop:"1px solid #444",backgroundColor:"#1e1e1e",color:"#fff"}})]})})})},E9e=()=>wn.jsxs("div",{className:"h-screen flex flex-col bg-primary text-text",children:[wn.jsx(aq,{}),wn.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[wn.jsx(vq,{}),wn.jsx("div",{className:"flex-1",children:wn.jsx(C9e,{})})]})]});rq.createRoot(document.getElementById("root")).render(wn.jsx(bn.StrictMode,{children:wn.jsx(E9e,{})}));
